var A9=Object.defineProperty,D9=Object.defineProperties;var R9=Object.getOwnPropertyDescriptors;var g_=Object.getOwnPropertySymbols;var M9=Object.prototype.hasOwnProperty,O9=Object.prototype.propertyIsEnumerable;var m_=(e,t,n)=>t in e?A9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dt=(e,t)=>{for(var n in t||(t={}))M9.call(t,n)&&m_(e,n,t[n]);if(g_)for(var n of g_(t))O9.call(t,n)&&m_(e,n,t[n]);return e},Ut=(e,t)=>D9(e,R9(t));function F9(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(s){if(s!=="default"&&!(s in e)){var o=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:function(){return n[s]}})}})}),Object.freeze(e)}function n2(e,t){const n=Object.create(null),s=e.split(",");for(let o=0;o<s.length;o++)n[s[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const P9="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",L9=n2(P9);function S3(e){return!!e||e===""}function rt(e){if(At(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],o=Qt(s)?V9(s):rt(s);if(o)for(const r in o)t[r]=o[r]}return t}else{if(Qt(e))return e;if(cn(e))return e}}const B9=/;(?![^(]*\))/g,z9=/:(.+)/;function V9(e){const t={};return e.split(B9).forEach(n=>{if(n){const s=n.split(z9);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Q(e){let t="";if(Qt(e))t=e;else if(At(e))for(let n=0;n<e.length;n++){const s=Q(e[n]);s&&(t+=s+" ")}else if(cn(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Wu(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Qt(t)&&(e.class=Q(t)),n&&(e.style=rt(n)),e}function W9(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=yd(e[s],t[s]);return n}function yd(e,t){if(e===t)return!0;let n=v_(e),s=v_(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=At(e),s=At(t),n||s)return n&&s?W9(e,t):!1;if(n=cn(e),s=cn(t),n||s){if(!n||!s)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const i in e){const a=e.hasOwnProperty(i),l=t.hasOwnProperty(i);if(a&&!l||!a&&l||!yd(e[i],t[i]))return!1}}return String(e)===String(t)}function I3(e,t){return e.findIndex(n=>yd(n,t))}const ze=e=>Qt(e)?e:e==null?"":At(e)||cn(e)&&(e.toString===T3||!Vt(e.toString))?JSON.stringify(e,E3,2):String(e),E3=(e,t)=>t&&t.__v_isRef?E3(e,t.value):ud(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,o])=>(n[`${s} =>`]=o,n),{})}:hb(t)?{[`Set(${t.size})`]:[...t.values()]}:cn(t)&&!At(t)&&!_3(t)?String(t):t,es={},ld=[],un=()=>{},H9=()=>!1,U9=/^on[^a-z]/,fb=e=>U9.test(e),s2=e=>e.startsWith("onUpdate:"),lo=Object.assign,o2=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},j9=Object.prototype.hasOwnProperty,Kt=(e,t)=>j9.call(e,t),At=Array.isArray,ud=e=>Dp(e)==="[object Map]",hb=e=>Dp(e)==="[object Set]",v_=e=>e instanceof Date,Vt=e=>typeof e=="function",Qt=e=>typeof e=="string",r2=e=>typeof e=="symbol",cn=e=>e!==null&&typeof e=="object",wd=e=>cn(e)&&Vt(e.then)&&Vt(e.catch),T3=Object.prototype.toString,Dp=e=>T3.call(e),kv=e=>Dp(e).slice(8,-1),_3=e=>Dp(e)==="[object Object]",i2=e=>Qt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Sv=n2(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pb=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},G9=/-(\w)/g,qr=pb(e=>e.replace(G9,(t,n)=>n?n.toUpperCase():"")),K9=/\B([A-Z])/g,Il=pb(e=>e.replace(K9,"-$1").toLowerCase()),gr=pb(e=>e.charAt(0).toUpperCase()+e.slice(1)),Iv=pb(e=>e?`on${gr(e)}`:""),Vh=(e,t)=>!Object.is(e,t),Ev=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},u0=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},c0=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let b_;const q9=()=>b_||(b_=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Or;class N3{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Or&&(this.parent=Or,this.index=(Or.scopes||(Or.scopes=[])).push(this)-1)}run(t){if(this.active)try{return Or=this,t()}finally{Or=this.parent}}on(){Or=this}off(){Or=this.parent}stop(t){if(this.active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}}}function Y9(e){return new N3(e)}function X9(e,t=Or){t&&t.active&&t.effects.push(e)}function Z9(){return Or}function A3(e){Or&&Or.cleanups.push(e)}const a2=e=>{const t=new Set(e);return t.w=0,t.n=0,t},D3=e=>(e.w&ml)>0,R3=e=>(e.n&ml)>0,J9=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ml},Q9=e=>{const{deps:t}=e;if(t.length){let n=0;for(let s=0;s<t.length;s++){const o=t[s];D3(o)&&!R3(o)?o.delete(e):t[n++]=o,o.w&=~ml,o.n&=~ml}t.length=n}},P$=new WeakMap;let nh=0,ml=1;const L$=30;let Ui;const Nu=Symbol(""),B$=Symbol("");class l2{constructor(t,n=null,s){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,X9(this,s)}run(){if(!this.active)return this.fn();let t=Ui,n=ul;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ui,Ui=this,ul=!0,ml=1<<++nh,nh<=L$?J9(this):y_(this),this.fn()}finally{nh<=L$&&Q9(this),ml=1<<--nh,Ui=this.parent,ul=n,this.parent=void 0}}stop(){this.active&&(y_(this),this.onStop&&this.onStop(),this.active=!1)}}function y_(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let ul=!0;const M3=[];function cc(){M3.push(ul),ul=!1}function dc(){const e=M3.pop();ul=e===void 0?!0:e}function Cr(e,t,n){if(ul&&Ui){let s=P$.get(e);s||P$.set(e,s=new Map);let o=s.get(n);o||s.set(n,o=a2()),O3(o)}}function O3(e,t){let n=!1;nh<=L$?R3(e)||(e.n|=ml,n=!D3(e)):n=!e.has(Ui),n&&(e.add(Ui),Ui.deps.push(e))}function Ea(e,t,n,s,o,r){const i=P$.get(e);if(!i)return;let a=[];if(t==="clear")a=[...i.values()];else if(n==="length"&&At(e))i.forEach((l,u)=>{(u==="length"||u>=s)&&a.push(l)});else switch(n!==void 0&&a.push(i.get(n)),t){case"add":At(e)?i2(n)&&a.push(i.get("length")):(a.push(i.get(Nu)),ud(e)&&a.push(i.get(B$)));break;case"delete":At(e)||(a.push(i.get(Nu)),ud(e)&&a.push(i.get(B$)));break;case"set":ud(e)&&a.push(i.get(Nu));break}if(a.length===1)a[0]&&z$(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);z$(a2(l))}}function z$(e,t){for(const n of At(e)?e:[...e])(n!==Ui||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const e7=n2("__proto__,__v_isRef,__isVue"),F3=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(r2)),t7=u2(),n7=u2(!1,!0),s7=u2(!0),w_=o7();function o7(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=xn(this);for(let r=0,i=this.length;r<i;r++)Cr(s,"get",r+"");const o=s[t](...n);return o===-1||o===!1?s[t](...n.map(xn)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){cc();const s=xn(this)[t].apply(this,n);return dc(),s}}),e}function u2(e=!1,t=!1){return function(s,o,r){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&r===(e?t?w7:V3:t?z3:B3).get(s))return s;const i=At(s);if(!e&&i&&Kt(w_,o))return Reflect.get(w_,o,r);const a=Reflect.get(s,o,r);return(r2(o)?F3.has(o):e7(o))||(e||Cr(s,"get",o),t)?a:vs(a)?!i||!i2(o)?a.value:a:cn(a)?e?Rp(a):En(a):a}}const r7=P3(),i7=P3(!0);function P3(e=!1){return function(n,s,o,r){let i=n[s];if(Wh(i)&&vs(i)&&!vs(o))return!1;if(!e&&!Wh(o)&&(W3(o)||(o=xn(o),i=xn(i)),!At(n)&&vs(i)&&!vs(o)))return i.value=o,!0;const a=At(n)&&i2(s)?Number(s)<n.length:Kt(n,s),l=Reflect.set(n,s,o,r);return n===xn(r)&&(a?Vh(o,i)&&Ea(n,"set",s,o):Ea(n,"add",s,o)),l}}function a7(e,t){const n=Kt(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&n&&Ea(e,"delete",t,void 0),s}function l7(e,t){const n=Reflect.has(e,t);return(!r2(t)||!F3.has(t))&&Cr(e,"has",t),n}function u7(e){return Cr(e,"iterate",At(e)?"length":Nu),Reflect.ownKeys(e)}const L3={get:t7,set:r7,deleteProperty:a7,has:l7,ownKeys:u7},c7={get:s7,set(e,t){return!0},deleteProperty(e,t){return!0}},d7=lo({},L3,{get:n7,set:i7}),c2=e=>e,gb=e=>Reflect.getPrototypeOf(e);function Rm(e,t,n=!1,s=!1){e=e.__v_raw;const o=xn(e),r=xn(t);t!==r&&!n&&Cr(o,"get",t),!n&&Cr(o,"get",r);const{has:i}=gb(o),a=s?c2:n?h2:Uh;if(i.call(o,t))return a(e.get(t));if(i.call(o,r))return a(e.get(r));e!==o&&e.get(t)}function Mm(e,t=!1){const n=this.__v_raw,s=xn(n),o=xn(e);return e!==o&&!t&&Cr(s,"has",e),!t&&Cr(s,"has",o),e===o?n.has(e):n.has(e)||n.has(o)}function Om(e,t=!1){return e=e.__v_raw,!t&&Cr(xn(e),"iterate",Nu),Reflect.get(e,"size",e)}function $_(e){e=xn(e);const t=xn(this);return gb(t).has.call(t,e)||(t.add(e),Ea(t,"add",e,e)),this}function C_(e,t){t=xn(t);const n=xn(this),{has:s,get:o}=gb(n);let r=s.call(n,e);r||(e=xn(e),r=s.call(n,e));const i=o.call(n,e);return n.set(e,t),r?Vh(t,i)&&Ea(n,"set",e,t):Ea(n,"add",e,t),this}function x_(e){const t=xn(this),{has:n,get:s}=gb(t);let o=n.call(t,e);o||(e=xn(e),o=n.call(t,e)),s&&s.call(t,e);const r=t.delete(e);return o&&Ea(t,"delete",e,void 0),r}function k_(){const e=xn(this),t=e.size!==0,n=e.clear();return t&&Ea(e,"clear",void 0,void 0),n}function Fm(e,t){return function(s,o){const r=this,i=r.__v_raw,a=xn(i),l=t?c2:e?h2:Uh;return!e&&Cr(a,"iterate",Nu),i.forEach((u,c)=>s.call(o,l(u),l(c),r))}}function Pm(e,t,n){return function(...s){const o=this.__v_raw,r=xn(o),i=ud(r),a=e==="entries"||e===Symbol.iterator&&i,l=e==="keys"&&i,u=o[e](...s),c=n?c2:t?h2:Uh;return!t&&Cr(r,"iterate",l?B$:Nu),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Ga(e){return function(...t){return e==="delete"?!1:this}}function f7(){const e={get(r){return Rm(this,r)},get size(){return Om(this)},has:Mm,add:$_,set:C_,delete:x_,clear:k_,forEach:Fm(!1,!1)},t={get(r){return Rm(this,r,!1,!0)},get size(){return Om(this)},has:Mm,add:$_,set:C_,delete:x_,clear:k_,forEach:Fm(!1,!0)},n={get(r){return Rm(this,r,!0)},get size(){return Om(this,!0)},has(r){return Mm.call(this,r,!0)},add:Ga("add"),set:Ga("set"),delete:Ga("delete"),clear:Ga("clear"),forEach:Fm(!0,!1)},s={get(r){return Rm(this,r,!0,!0)},get size(){return Om(this,!0)},has(r){return Mm.call(this,r,!0)},add:Ga("add"),set:Ga("set"),delete:Ga("delete"),clear:Ga("clear"),forEach:Fm(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Pm(r,!1,!1),n[r]=Pm(r,!0,!1),t[r]=Pm(r,!1,!0),s[r]=Pm(r,!0,!0)}),[e,n,t,s]}const[h7,p7,g7,m7]=f7();function d2(e,t){const n=t?e?m7:g7:e?p7:h7;return(s,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?s:Reflect.get(Kt(n,o)&&o in s?n:s,o,r)}const v7={get:d2(!1,!1)},b7={get:d2(!1,!0)},y7={get:d2(!0,!1)},B3=new WeakMap,z3=new WeakMap,V3=new WeakMap,w7=new WeakMap;function $7(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function C7(e){return e.__v_skip||!Object.isExtensible(e)?0:$7(kv(e))}function En(e){return Wh(e)?e:f2(e,!1,L3,v7,B3)}function x7(e){return f2(e,!1,d7,b7,z3)}function Rp(e){return f2(e,!0,c7,y7,V3)}function f2(e,t,n,s,o){if(!cn(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=o.get(e);if(r)return r;const i=C7(e);if(i===0)return e;const a=new Proxy(e,i===2?s:n);return o.set(e,a),a}function cd(e){return Wh(e)?cd(e.__v_raw):!!(e&&e.__v_isReactive)}function Wh(e){return!!(e&&e.__v_isReadonly)}function W3(e){return!!(e&&e.__v_isShallow)}function H3(e){return cd(e)||Wh(e)}function xn(e){const t=e&&e.__v_raw;return t?xn(t):e}function Hh(e){return u0(e,"__v_skip",!0),e}const Uh=e=>cn(e)?En(e):e,h2=e=>cn(e)?Rp(e):e;function U3(e){ul&&Ui&&(e=xn(e),O3(e.dep||(e.dep=a2())))}function p2(e,t){e=xn(e),e.dep&&z$(e.dep)}function vs(e){return!!(e&&e.__v_isRef===!0)}function V(e){return j3(e,!1)}function bo(e){return j3(e,!0)}function j3(e,t){return vs(e)?e:new k7(e,t)}class k7{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:xn(t),this._value=n?t:Uh(t)}get value(){return U3(this),this._value}set value(t){t=this.__v_isShallow?t:xn(t),Vh(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Uh(t),p2(this))}}function Of(e){p2(e)}function Xe(e){return vs(e)?e.value:e}const S7={get:(e,t,n)=>Xe(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const o=e[t];return vs(o)&&!vs(n)?(o.value=n,!0):Reflect.set(e,t,n,s)}};function d0(e){return cd(e)?e:new Proxy(e,S7)}function ko(e){const t=At(e)?new Array(e.length):{};for(const n in e)t[n]=yo(e,n);return t}class I7{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function yo(e,t,n){const s=e[t];return vs(s)?s:new I7(e,t,n)}class E7{constructor(t,n,s,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new l2(t,()=>{this._dirty||(this._dirty=!0,p2(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=s}get value(){const t=xn(this);return U3(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function T7(e,t,n=!1){let s,o;const r=Vt(e);return r?(s=e,o=un):(s=e.get,o=e.set),new E7(s,o,r||!o,n)}Promise.resolve();const yh=[];function _7(e,...t){cc();const n=yh.length?yh[yh.length-1].component:null,s=n&&n.appContext.config.warnHandler,o=N7();if(s)xa(s,n,11,[e+t.join(""),n&&n.proxy,o.map(({vnode:r})=>`at <${$F(n,r.type)}>`).join(`
`),o]);else{const r=[`[Vue warn]: ${e}`,...t];o.length&&r.push(`
`,...A7(o)),console.warn(...r)}dc()}function N7(){let e=yh[yh.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const s=e.component&&e.component.parent;e=s&&s.vnode}return t}function A7(e){const t=[];return e.forEach((n,s)=>{t.push(...s===0?[]:[`
`],...D7(n))}),t}function D7({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",s=e.component?e.component.parent==null:!1,o=` at <${$F(e.component,e.type,s)}`,r=">"+n;return e.props?[o,...R7(e.props),r]:[o+r]}function R7(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(s=>{t.push(...G3(s,e[s]))}),n.length>3&&t.push(" ..."),t}function G3(e,t,n){return Qt(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:vs(t)?(t=G3(e,xn(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):Vt(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=xn(t),n?t:[`${e}=`,t])}function xa(e,t,n,s){let o;try{o=s?e(...s):e()}catch(r){mb(r,t,n)}return o}function Gr(e,t,n,s){if(Vt(e)){const r=xa(e,t,n,s);return r&&wd(r)&&r.catch(i=>{mb(i,t,n)}),r}const o=[];for(let r=0;r<e.length;r++)o.push(Gr(e[r],t,n,s));return o}function mb(e,t,n,s=!0){const o=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,a=n;for(;r;){const u=r.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,i,a)===!1)return}r=r.parent}const l=t.appContext.config.errorHandler;if(l){xa(l,null,10,[e,i,a]);return}}M7(e,n,o,s)}function M7(e,t,n,s=!0){console.error(e)}let f0=!1,V$=!1;const mr=[];let ma=0;const wh=[];let sh=null,Zc=0;const $h=[];let Xa=null,Jc=0;const K3=Promise.resolve();let g2=null,W$=null;function ft(e){const t=g2||K3;return e?t.then(this?e.bind(this):e):t}function O7(e){let t=ma+1,n=mr.length;for(;t<n;){const s=t+n>>>1;jh(mr[s])<e?t=s+1:n=s}return t}function q3(e){(!mr.length||!mr.includes(e,f0&&e.allowRecurse?ma+1:ma))&&e!==W$&&(e.id==null?mr.push(e):mr.splice(O7(e.id),0,e),Y3())}function Y3(){!f0&&!V$&&(V$=!0,g2=K3.then(J3))}function F7(e){const t=mr.indexOf(e);t>ma&&mr.splice(t,1)}function X3(e,t,n,s){At(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&n.push(e),Y3()}function P7(e){X3(e,sh,wh,Zc)}function L7(e){X3(e,Xa,$h,Jc)}function m2(e,t=null){if(wh.length){for(W$=t,sh=[...new Set(wh)],wh.length=0,Zc=0;Zc<sh.length;Zc++)sh[Zc]();sh=null,Zc=0,W$=null,m2(e,t)}}function Z3(e){if($h.length){const t=[...new Set($h)];if($h.length=0,Xa){Xa.push(...t);return}for(Xa=t,Xa.sort((n,s)=>jh(n)-jh(s)),Jc=0;Jc<Xa.length;Jc++)Xa[Jc]();Xa=null,Jc=0}}const jh=e=>e.id==null?1/0:e.id;function J3(e){V$=!1,f0=!0,m2(e),mr.sort((n,s)=>jh(n)-jh(s));const t=un;try{for(ma=0;ma<mr.length;ma++){const n=mr[ma];n&&n.active!==!1&&xa(n,null,14)}}finally{ma=0,mr.length=0,Z3(),f0=!1,g2=null,(mr.length||wh.length||$h.length)&&J3(e)}}function B7(e,t,...n){const s=e.vnode.props||es;let o=n;const r=t.startsWith("update:"),i=r&&t.slice(7);if(i&&i in s){const c=`${i==="modelValue"?"model":i}Modifiers`,{number:d,trim:f}=s[c]||es;f?o=n.map(h=>h.trim()):d&&(o=n.map(c0))}let a,l=s[a=Iv(t)]||s[a=Iv(qr(t))];!l&&r&&(l=s[a=Iv(Il(t))]),l&&Gr(l,e,6,o);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Gr(u,e,6,o)}}function Q3(e,t,n=!1){const s=t.emitsCache,o=s.get(e);if(o!==void 0)return o;const r=e.emits;let i={},a=!1;if(!Vt(e)){const l=u=>{const c=Q3(u,t,!0);c&&(a=!0,lo(i,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(s.set(e,null),null):(At(r)?r.forEach(l=>i[l]=null):lo(i,r),s.set(e,i),i)}function v2(e,t){return!e||!fb(t)?!1:(t=t.slice(2).replace(/Once$/,""),Kt(e,t[0].toLowerCase()+t.slice(1))||Kt(e,Il(t))||Kt(e,t))}let br=null,vb=null;function h0(e){const t=br;return br=e,vb=e&&e.type.__scopeId||null,t}function bct(e){vb=e}function yct(){vb=null}function ce(e,t=br,n){if(!t||e._n)return e;const s=(...o)=>{s._d&&F_(-1);const r=h0(t),i=e(...o);return h0(r),s._d&&F_(1),i};return s._n=!0,s._c=!0,s._d=!0,s}function yw(e){const{type:t,vnode:n,proxy:s,withProxy:o,props:r,propsOptions:[i],slots:a,attrs:l,emit:u,render:c,renderCache:d,data:f,setupState:h,ctx:p,inheritAttrs:g}=e;let m,v;const b=h0(e);try{if(n.shapeFlag&4){const y=o||s;m=Li(c.call(y,y,d,r,h,f,p)),v=l}else{const y=t;m=Li(y.length>1?y(r,{attrs:l,slots:a,emit:u}):y(r,null)),v=t.props?l:z7(l)}}catch(y){xh.length=0,mb(y,e,1),m=pe(xr)}let $=m;if(v&&g!==!1){const y=Object.keys(v),{shapeFlag:w}=$;y.length&&w&7&&(i&&y.some(s2)&&(v=V7(v,i)),$=Uu($,v))}return n.dirs&&($.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&($.transition=n.transition),m=$,h0(b),m}const z7=e=>{let t;for(const n in e)(n==="class"||n==="style"||fb(n))&&((t||(t={}))[n]=e[n]);return t},V7=(e,t)=>{const n={};for(const s in e)(!s2(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function W7(e,t,n){const{props:s,children:o,component:r}=e,{props:i,children:a,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?S_(s,i,u):!!i;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(i[f]!==s[f]&&!v2(u,f))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:s===i?!1:s?i?S_(s,i,u):!0:!!i;return!1}function S_(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let o=0;o<s.length;o++){const r=s[o];if(t[r]!==e[r]&&!v2(n,r))return!0}return!1}function H7({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const U7=e=>e.__isSuspense;function j7(e,t){t&&t.pendingBranch?At(e)?t.effects.push(...e):t.effects.push(e):L7(e)}function jt(e,t){if(oo){let n=oo.provides;const s=oo.parent&&oo.parent.provides;s===n&&(n=oo.provides=Object.create(s)),n[e]=t}}function Qe(e,t,n=!1){const s=oo||br;if(s){const o=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Vt(t)?t.call(s.proxy):t}}function ka(e,t){return b2(e,null,t)}const I_={};function Le(e,t,n){return b2(e,t,n)}function b2(e,t,{immediate:n,deep:s,flush:o,onTrack:r,onTrigger:i}=es){const a=oo;let l,u=!1,c=!1;if(vs(e)?(l=()=>e.value,u=W3(e)):cd(e)?(l=()=>e,s=!0):At(e)?(c=!0,u=e.some(cd),l=()=>e.map(v=>{if(vs(v))return v.value;if(cd(v))return $u(v);if(Vt(v))return xa(v,a,2)})):Vt(e)?t?l=()=>xa(e,a,2):l=()=>{if(!(a&&a.isUnmounted))return d&&d(),Gr(e,a,3,[f])}:l=un,t&&s){const v=l;l=()=>$u(v())}let d,f=v=>{d=m.onStop=()=>{xa(v,a,4)}};if(Yh)return f=un,t?n&&Gr(t,a,3,[l(),c?[]:void 0,f]):l(),un;let h=c?[]:I_;const p=()=>{if(!!m.active)if(t){const v=m.run();(s||u||(c?v.some((b,$)=>Vh(b,h[$])):Vh(v,h)))&&(d&&d(),Gr(t,a,3,[v,h===I_?void 0:h,f]),h=v)}else m.run()};p.allowRecurse=!!t;let g;o==="sync"?g=p:o==="post"?g=()=>qo(p,a&&a.suspense):g=()=>{!a||a.isMounted?P7(p):p()};const m=new l2(l,g);return t?n?p():h=m.run():o==="post"?qo(m.run.bind(m),a&&a.suspense):m.run(),()=>{m.stop(),a&&a.scope&&o2(a.scope.effects,m)}}function G7(e,t,n){const s=this.proxy,o=Qt(e)?e.includes(".")?eF(s,e):()=>s[e]:e.bind(s,s);let r;Vt(t)?r=t:(r=t.handler,n=t);const i=oo;$d(this);const a=b2(o,r.bind(s),n);return i?$d(i):Du(),a}function eF(e,t){const n=t.split(".");return()=>{let s=e;for(let o=0;o<n.length&&s;o++)s=s[n[o]];return s}}function $u(e,t){if(!cn(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),vs(e))$u(e.value,t);else if(At(e))for(let n=0;n<e.length;n++)$u(e[n],t);else if(hb(e)||ud(e))e.forEach(n=>{$u(n,t)});else if(_3(e))for(const n in e)$u(e[n],t);return e}function tF(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ft(()=>{e.isMounted=!0}),us(()=>{e.isUnmounting=!0}),e}const _r=[Function,Array],K7={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:_r,onEnter:_r,onAfterEnter:_r,onEnterCancelled:_r,onBeforeLeave:_r,onLeave:_r,onAfterLeave:_r,onLeaveCancelled:_r,onBeforeAppear:_r,onAppear:_r,onAfterAppear:_r,onAppearCancelled:_r},setup(e,{slots:t}){const n=Wt(),s=tF();let o;return()=>{const r=t.default&&y2(t.default(),!0);if(!r||!r.length)return;const i=xn(e),{mode:a}=i,l=r[0];if(s.isLeaving)return ww(l);const u=E_(l);if(!u)return ww(l);const c=Gh(u,i,s,n);Kh(u,c);const d=n.subTree,f=d&&E_(d);let h=!1;const{getTransitionKey:p}=u.type;if(p){const g=p();o===void 0?o=g:g!==o&&(o=g,h=!0)}if(f&&f.type!==xr&&(!gu(u,f)||h)){const g=Gh(f,i,s,n);if(Kh(f,g),a==="out-in")return s.isLeaving=!0,g.afterLeave=()=>{s.isLeaving=!1,n.update()},ww(l);a==="in-out"&&u.type!==xr&&(g.delayLeave=(m,v,b)=>{const $=sF(s,f);$[String(f.key)]=f,m._leaveCb=()=>{v(),m._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=b})}return l}}},nF=K7;function sF(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function Gh(e,t,n,s){const{appear:o,mode:r,persisted:i=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:f,onAfterLeave:h,onLeaveCancelled:p,onBeforeAppear:g,onAppear:m,onAfterAppear:v,onAppearCancelled:b}=t,$=String(e.key),y=sF(n,e),w=(x,S)=>{x&&Gr(x,s,9,S)},C={mode:r,persisted:i,beforeEnter(x){let S=a;if(!n.isMounted)if(o)S=g||a;else return;x._leaveCb&&x._leaveCb(!0);const T=y[$];T&&gu(e,T)&&T.el._leaveCb&&T.el._leaveCb(),w(S,[x])},enter(x){let S=l,T=u,I=c;if(!n.isMounted)if(o)S=m||l,T=v||u,I=b||c;else return;let _=!1;const N=x._enterCb=D=>{_||(_=!0,D?w(I,[x]):w(T,[x]),C.delayedLeave&&C.delayedLeave(),x._enterCb=void 0)};S?(S(x,N),S.length<=1&&N()):N()},leave(x,S){const T=String(e.key);if(x._enterCb&&x._enterCb(!0),n.isUnmounting)return S();w(d,[x]);let I=!1;const _=x._leaveCb=N=>{I||(I=!0,S(),N?w(p,[x]):w(h,[x]),x._leaveCb=void 0,y[T]===e&&delete y[T])};y[T]=e,f?(f(x,_),f.length<=1&&_()):_()},clone(x){return Gh(x,t,n,s)}};return C}function ww(e){if(bb(e))return e=Uu(e),e.children=null,e}function E_(e){return bb(e)?e.children?e.children[0]:void 0:e}function Kh(e,t){e.shapeFlag&6&&e.component?Kh(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function y2(e,t=!1){let n=[],s=0;for(let o=0;o<e.length;o++){const r=e[o];r.type===ct?(r.patchFlag&128&&s++,n=n.concat(y2(r.children,t))):(t||r.type!==xr)&&n.push(r)}if(s>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}function $e(e){return Vt(e)?{setup:e,name:e.name}:e}const H$=e=>!!e.type.__asyncLoader,bb=e=>e.type.__isKeepAlive;function q7(e,t){oF(e,"a",t)}function Y7(e,t){oF(e,"da",t)}function oF(e,t,n=oo){const s=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(yb(t,s,n),n){let o=n.parent;for(;o&&o.parent;)bb(o.parent.vnode)&&X7(s,t,n,o),o=o.parent}}function X7(e,t,n,s){const o=yb(t,e,s,!0);Op(()=>{o2(s[t],o)},n)}function yb(e,t,n=oo,s=!1){if(n){const o=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{if(n.isUnmounted)return;cc(),$d(n);const a=Gr(t,n,e,i);return Du(),dc(),a});return s?o.unshift(r):o.push(r),r}}const Ma=e=>(t,n=oo)=>(!Yh||e==="sp")&&yb(e,t,n),Mp=Ma("bm"),Ft=Ma("m"),rF=Ma("bu"),Ni=Ma("u"),us=Ma("bum"),Op=Ma("um"),Z7=Ma("sp"),J7=Ma("rtg"),Q7=Ma("rtc");function eq(e,t=oo){yb("ec",e,t)}let U$=!0;function tq(e){const t=aF(e),n=e.proxy,s=e.ctx;U$=!1,t.beforeCreate&&T_(t.beforeCreate,e,"bc");const{data:o,computed:r,methods:i,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:g,deactivated:m,beforeDestroy:v,beforeUnmount:b,destroyed:$,unmounted:y,render:w,renderTracked:C,renderTriggered:x,errorCaptured:S,serverPrefetch:T,expose:I,inheritAttrs:_,components:N,directives:D,filters:F}=t;if(u&&nq(u,s,null,e.appContext.config.unwrapInjectedRef),i)for(const B in i){const j=i[B];Vt(j)&&(s[B]=j.bind(n))}if(o){const B=o.call(n,n);cn(B)&&(e.data=En(B))}if(U$=!0,r)for(const B in r){const j=r[B],X=Vt(j)?j.bind(n,n):Vt(j.get)?j.get.bind(n,n):un,ae=!Vt(j)&&Vt(j.set)?j.set.bind(n):un,be=O({get:X,set:ae});Object.defineProperty(s,B,{enumerable:!0,configurable:!0,get:()=>be.value,set:ie=>be.value=ie})}if(a)for(const B in a)iF(a[B],s,n,B);if(l){const B=Vt(l)?l.call(n):l;Reflect.ownKeys(B).forEach(j=>{jt(j,B[j])})}c&&T_(c,e,"c");function M(B,j){At(j)?j.forEach(X=>B(X.bind(n))):j&&B(j.bind(n))}if(M(Mp,d),M(Ft,f),M(rF,h),M(Ni,p),M(q7,g),M(Y7,m),M(eq,S),M(Q7,C),M(J7,x),M(us,b),M(Op,y),M(Z7,T),At(I))if(I.length){const B=e.exposed||(e.exposed={});I.forEach(j=>{Object.defineProperty(B,j,{get:()=>n[j],set:X=>n[j]=X})})}else e.exposed||(e.exposed={});w&&e.render===un&&(e.render=w),_!=null&&(e.inheritAttrs=_),N&&(e.components=N),D&&(e.directives=D)}function nq(e,t,n=un,s=!1){At(e)&&(e=j$(e));for(const o in e){const r=e[o];let i;cn(r)?"default"in r?i=Qe(r.from||o,r.default,!0):i=Qe(r.from||o):i=Qe(r),vs(i)&&s?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[o]=i}}function T_(e,t,n){Gr(At(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function iF(e,t,n,s){const o=s.includes(".")?eF(n,s):()=>n[s];if(Qt(e)){const r=t[e];Vt(r)&&Le(o,r)}else if(Vt(e))Le(o,e.bind(n));else if(cn(e))if(At(e))e.forEach(r=>iF(r,t,n,s));else{const r=Vt(e.handler)?e.handler.bind(n):t[e.handler];Vt(r)&&Le(o,r,e)}}function aF(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,a=r.get(t);let l;return a?l=a:!o.length&&!n&&!s?l=t:(l={},o.length&&o.forEach(u=>p0(l,u,i,!0)),p0(l,t,i)),r.set(t,l),l}function p0(e,t,n,s=!1){const{mixins:o,extends:r}=t;r&&p0(e,r,n,!0),o&&o.forEach(i=>p0(e,i,n,!0));for(const i in t)if(!(s&&i==="expose")){const a=sq[i]||n&&n[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const sq={data:__,props:au,emits:au,methods:au,computed:au,beforeCreate:Po,created:Po,beforeMount:Po,mounted:Po,beforeUpdate:Po,updated:Po,beforeDestroy:Po,beforeUnmount:Po,destroyed:Po,unmounted:Po,activated:Po,deactivated:Po,errorCaptured:Po,serverPrefetch:Po,components:au,directives:au,watch:rq,provide:__,inject:oq};function __(e,t){return t?e?function(){return lo(Vt(e)?e.call(this,this):e,Vt(t)?t.call(this,this):t)}:t:e}function oq(e,t){return au(j$(e),j$(t))}function j$(e){if(At(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Po(e,t){return e?[...new Set([].concat(e,t))]:t}function au(e,t){return e?lo(lo(Object.create(null),e),t):t}function rq(e,t){if(!e)return t;if(!t)return e;const n=lo(Object.create(null),e);for(const s in t)n[s]=Po(e[s],t[s]);return n}function iq(e,t,n,s=!1){const o={},r={};u0(r,$b,1),e.propsDefaults=Object.create(null),lF(e,t,o,r);for(const i in e.propsOptions[0])i in o||(o[i]=void 0);n?e.props=s?o:x7(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function aq(e,t,n,s){const{props:o,attrs:r,vnode:{patchFlag:i}}=e,a=xn(o),[l]=e.propsOptions;let u=!1;if((s||i>0)&&!(i&16)){if(i&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];const h=t[f];if(l)if(Kt(r,f))h!==r[f]&&(r[f]=h,u=!0);else{const p=qr(f);o[p]=G$(l,a,p,h,e,!1)}else h!==r[f]&&(r[f]=h,u=!0)}}}else{lF(e,t,o,r)&&(u=!0);let c;for(const d in a)(!t||!Kt(t,d)&&((c=Il(d))===d||!Kt(t,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(o[d]=G$(l,a,d,void 0,e,!0)):delete o[d]);if(r!==a)for(const d in r)(!t||!Kt(t,d)&&!0)&&(delete r[d],u=!0)}u&&Ea(e,"set","$attrs")}function lF(e,t,n,s){const[o,r]=e.propsOptions;let i=!1,a;if(t)for(let l in t){if(Sv(l))continue;const u=t[l];let c;o&&Kt(o,c=qr(l))?!r||!r.includes(c)?n[c]=u:(a||(a={}))[c]=u:v2(e.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,i=!0)}if(r){const l=xn(n),u=a||es;for(let c=0;c<r.length;c++){const d=r[c];n[d]=G$(o,l,d,u[d],e,!Kt(u,d))}}return i}function G$(e,t,n,s,o,r){const i=e[n];if(i!=null){const a=Kt(i,"default");if(a&&s===void 0){const l=i.default;if(i.type!==Function&&Vt(l)){const{propsDefaults:u}=o;n in u?s=u[n]:($d(o),s=u[n]=l.call(null,t),Du())}else s=l}i[0]&&(r&&!a?s=!1:i[1]&&(s===""||s===Il(n))&&(s=!0))}return s}function uF(e,t,n=!1){const s=t.propsCache,o=s.get(e);if(o)return o;const r=e.props,i={},a=[];let l=!1;if(!Vt(e)){const c=d=>{l=!0;const[f,h]=uF(d,t,!0);lo(i,f),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!l)return s.set(e,ld),ld;if(At(r))for(let c=0;c<r.length;c++){const d=qr(r[c]);N_(d)&&(i[d]=es)}else if(r)for(const c in r){const d=qr(c);if(N_(d)){const f=r[c],h=i[d]=At(f)||Vt(f)?{type:f}:f;if(h){const p=R_(Boolean,h.type),g=R_(String,h.type);h[0]=p>-1,h[1]=g<0||p<g,(p>-1||Kt(h,"default"))&&a.push(d)}}}const u=[i,a];return s.set(e,u),u}function N_(e){return e[0]!=="$"}function A_(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function D_(e,t){return A_(e)===A_(t)}function R_(e,t){return At(t)?t.findIndex(n=>D_(n,e)):Vt(t)&&D_(t,e)?0:-1}const cF=e=>e[0]==="_"||e==="$stable",w2=e=>At(e)?e.map(Li):[Li(e)],lq=(e,t,n)=>{const s=ce((...o)=>w2(t(...o)),n);return s._c=!1,s},dF=(e,t,n)=>{const s=e._ctx;for(const o in e){if(cF(o))continue;const r=e[o];if(Vt(r))t[o]=lq(o,r,s);else if(r!=null){const i=w2(r);t[o]=()=>i}}},fF=(e,t)=>{const n=w2(t);e.slots.default=()=>n},uq=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=xn(t),u0(t,"_",n)):dF(t,e.slots={})}else e.slots={},t&&fF(e,t);u0(e.slots,$b,1)},cq=(e,t,n)=>{const{vnode:s,slots:o}=e;let r=!0,i=es;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:(lo(o,t),!n&&a===1&&delete o._):(r=!t.$stable,dF(t,o)),i=t}else t&&(fF(e,t),i={default:1});if(r)for(const a in o)!cF(a)&&!(a in i)&&delete o[a]};function Ct(e,t){const n=br;if(n===null)return e;const s=n.proxy,o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,a,l,u=es]=t[r];Vt(i)&&(i={mounted:i,updated:i}),i.deep&&$u(a),o.push({dir:i,instance:s,value:a,oldValue:void 0,arg:l,modifiers:u})}return e}function Xl(e,t,n,s){const o=e.dirs,r=t&&t.dirs;for(let i=0;i<o.length;i++){const a=o[i];r&&(a.oldValue=r[i].value);let l=a.dir[s];l&&(cc(),Gr(l,n,8,[e.el,a,e,t]),dc())}}function hF(){return{app:null,config:{isNativeTag:H9,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let dq=0;function fq(e,t){return function(s,o=null){o!=null&&!cn(o)&&(o=null);const r=hF(),i=new Set;let a=!1;const l=r.app={_uid:dq++,_component:s,_props:o,_container:null,_context:r,_instance:null,version:Mq,get config(){return r.config},set config(u){},use(u,...c){return i.has(u)||(u&&Vt(u.install)?(i.add(u),u.install(l,...c)):Vt(u)&&(i.add(u),u(l,...c))),l},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),l},component(u,c){return c?(r.components[u]=c,l):r.components[u]},directive(u,c){return c?(r.directives[u]=c,l):r.directives[u]},mount(u,c,d){if(!a){const f=pe(s,o);return f.appContext=r,c&&t?t(f,u):e(f,u,d),a=!0,l._container=u,u.__vue_app__=l,S2(f.component)||f.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return r.provides[u]=c,l}};return l}}function K$(e,t,n,s,o=!1){if(At(e)){e.forEach((f,h)=>K$(f,t&&(At(t)?t[h]:t),n,s,o));return}if(H$(s)&&!o)return;const r=s.shapeFlag&4?S2(s.component)||s.component.proxy:s.el,i=o?null:r,{i:a,r:l}=e,u=t&&t.r,c=a.refs===es?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(Qt(u)?(c[u]=null,Kt(d,u)&&(d[u]=null)):vs(u)&&(u.value=null)),Vt(l))xa(l,a,12,[i,c]);else{const f=Qt(l),h=vs(l);if(f||h){const p=()=>{if(e.f){const g=f?c[l]:l.value;o?At(g)&&o2(g,r):At(g)?g.includes(r)||g.push(r):f?c[l]=[r]:(l.value=[r],e.k&&(c[e.k]=l.value))}else f?(c[l]=i,Kt(d,l)&&(d[l]=i)):vs(l)&&(l.value=i,e.k&&(c[e.k]=i))};i?(p.id=-1,qo(p,n)):p()}}}const qo=j7;function hq(e){return pq(e)}function pq(e,t){const n=q9();n.__VUE__=!0;const{insert:s,remove:o,patchProp:r,createElement:i,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=un,cloneNode:p,insertStaticContent:g}=e,m=(Y,ne,q,le=null,xe=null,oe=null,Me=!1,Re=null,ve=!!ne.dynamicChildren)=>{if(Y===ne)return;Y&&!gu(Y,ne)&&(le=fe(Y),ye(Y,xe,oe,!0),Y=null),ne.patchFlag===-2&&(ve=!1,ne.dynamicChildren=null);const{type:Ae,ref:it,shapeFlag:Je}=ne;switch(Ae){case Fp:v(Y,ne,q,le);break;case xr:b(Y,ne,q,le);break;case $w:Y==null&&$(ne,q,le,Me);break;case ct:D(Y,ne,q,le,xe,oe,Me,Re,ve);break;default:Je&1?C(Y,ne,q,le,xe,oe,Me,Re,ve):Je&6?F(Y,ne,q,le,xe,oe,Me,Re,ve):(Je&64||Je&128)&&Ae.process(Y,ne,q,le,xe,oe,Me,Re,ve,We)}it!=null&&xe&&K$(it,Y&&Y.ref,oe,ne||Y,!ne)},v=(Y,ne,q,le)=>{if(Y==null)s(ne.el=a(ne.children),q,le);else{const xe=ne.el=Y.el;ne.children!==Y.children&&u(xe,ne.children)}},b=(Y,ne,q,le)=>{Y==null?s(ne.el=l(ne.children||""),q,le):ne.el=Y.el},$=(Y,ne,q,le)=>{[Y.el,Y.anchor]=g(Y.children,ne,q,le,Y.el,Y.anchor)},y=({el:Y,anchor:ne},q,le)=>{let xe;for(;Y&&Y!==ne;)xe=f(Y),s(Y,q,le),Y=xe;s(ne,q,le)},w=({el:Y,anchor:ne})=>{let q;for(;Y&&Y!==ne;)q=f(Y),o(Y),Y=q;o(ne)},C=(Y,ne,q,le,xe,oe,Me,Re,ve)=>{Me=Me||ne.type==="svg",Y==null?x(ne,q,le,xe,oe,Me,Re,ve):I(Y,ne,xe,oe,Me,Re,ve)},x=(Y,ne,q,le,xe,oe,Me,Re)=>{let ve,Ae;const{type:it,props:Je,shapeFlag:st,transition:vt,patchFlag:z,dirs:k}=Y;if(Y.el&&p!==void 0&&z===-1)ve=Y.el=p(Y.el);else{if(ve=Y.el=i(Y.type,oe,Je&&Je.is,Je),st&8?c(ve,Y.children):st&16&&T(Y.children,ve,null,le,xe,oe&&it!=="foreignObject",Me,Re),k&&Xl(Y,null,le,"created"),Je){for(const W in Je)W!=="value"&&!Sv(W)&&r(ve,W,null,Je[W],oe,Y.children,le,xe,te);"value"in Je&&r(ve,"value",null,Je.value),(Ae=Je.onVnodeBeforeMount)&&Fi(Ae,le,Y)}S(ve,Y,Y.scopeId,Me,le)}k&&Xl(Y,null,le,"beforeMount");const E=(!xe||xe&&!xe.pendingBranch)&&vt&&!vt.persisted;E&&vt.beforeEnter(ve),s(ve,ne,q),((Ae=Je&&Je.onVnodeMounted)||E||k)&&qo(()=>{Ae&&Fi(Ae,le,Y),E&&vt.enter(ve),k&&Xl(Y,null,le,"mounted")},xe)},S=(Y,ne,q,le,xe)=>{if(q&&h(Y,q),le)for(let oe=0;oe<le.length;oe++)h(Y,le[oe]);if(xe){let oe=xe.subTree;if(ne===oe){const Me=xe.vnode;S(Y,Me,Me.scopeId,Me.slotScopeIds,xe.parent)}}},T=(Y,ne,q,le,xe,oe,Me,Re,ve=0)=>{for(let Ae=ve;Ae<Y.length;Ae++){const it=Y[Ae]=Re?Qa(Y[Ae]):Li(Y[Ae]);m(null,it,ne,q,le,xe,oe,Me,Re)}},I=(Y,ne,q,le,xe,oe,Me)=>{const Re=ne.el=Y.el;let{patchFlag:ve,dynamicChildren:Ae,dirs:it}=ne;ve|=Y.patchFlag&16;const Je=Y.props||es,st=ne.props||es;let vt;q&&Zl(q,!1),(vt=st.onVnodeBeforeUpdate)&&Fi(vt,q,ne,Y),it&&Xl(ne,Y,q,"beforeUpdate"),q&&Zl(q,!0);const z=xe&&ne.type!=="foreignObject";if(Ae?_(Y.dynamicChildren,Ae,Re,q,le,z,oe):Me||X(Y,ne,Re,null,q,le,z,oe,!1),ve>0){if(ve&16)N(Re,ne,Je,st,q,le,xe);else if(ve&2&&Je.class!==st.class&&r(Re,"class",null,st.class,xe),ve&4&&r(Re,"style",Je.style,st.style,xe),ve&8){const k=ne.dynamicProps;for(let E=0;E<k.length;E++){const W=k[E],G=Je[W],he=st[W];(he!==G||W==="value")&&r(Re,W,G,he,xe,Y.children,q,le,te)}}ve&1&&Y.children!==ne.children&&c(Re,ne.children)}else!Me&&Ae==null&&N(Re,ne,Je,st,q,le,xe);((vt=st.onVnodeUpdated)||it)&&qo(()=>{vt&&Fi(vt,q,ne,Y),it&&Xl(ne,Y,q,"updated")},le)},_=(Y,ne,q,le,xe,oe,Me)=>{for(let Re=0;Re<ne.length;Re++){const ve=Y[Re],Ae=ne[Re],it=ve.el&&(ve.type===ct||!gu(ve,Ae)||ve.shapeFlag&70)?d(ve.el):q;m(ve,Ae,it,null,le,xe,oe,Me,!0)}},N=(Y,ne,q,le,xe,oe,Me)=>{if(q!==le){for(const Re in le){if(Sv(Re))continue;const ve=le[Re],Ae=q[Re];ve!==Ae&&Re!=="value"&&r(Y,Re,Ae,ve,Me,ne.children,xe,oe,te)}if(q!==es)for(const Re in q)!Sv(Re)&&!(Re in le)&&r(Y,Re,q[Re],null,Me,ne.children,xe,oe,te);"value"in le&&r(Y,"value",q.value,le.value)}},D=(Y,ne,q,le,xe,oe,Me,Re,ve)=>{const Ae=ne.el=Y?Y.el:a(""),it=ne.anchor=Y?Y.anchor:a("");let{patchFlag:Je,dynamicChildren:st,slotScopeIds:vt}=ne;vt&&(Re=Re?Re.concat(vt):vt),Y==null?(s(Ae,q,le),s(it,q,le),T(ne.children,q,it,xe,oe,Me,Re,ve)):Je>0&&Je&64&&st&&Y.dynamicChildren?(_(Y.dynamicChildren,st,q,xe,oe,Me,Re),(ne.key!=null||xe&&ne===xe.subTree)&&$2(Y,ne,!0)):X(Y,ne,q,it,xe,oe,Me,Re,ve)},F=(Y,ne,q,le,xe,oe,Me,Re,ve)=>{ne.slotScopeIds=Re,Y==null?ne.shapeFlag&512?xe.ctx.activate(ne,q,le,Me,ve):P(ne,q,le,xe,oe,Me,ve):M(Y,ne,ve)},P=(Y,ne,q,le,xe,oe,Me)=>{const Re=Y.component=Iq(Y,le,xe);if(bb(Y)&&(Re.ctx.renderer=We),Eq(Re),Re.asyncDep){if(xe&&xe.registerDep(Re,B),!Y.el){const ve=Re.subTree=pe(xr);b(null,ve,ne,q)}return}B(Re,Y,ne,q,xe,oe,Me)},M=(Y,ne,q)=>{const le=ne.component=Y.component;if(W7(Y,ne,q))if(le.asyncDep&&!le.asyncResolved){j(le,ne,q);return}else le.next=ne,F7(le.update),le.update();else ne.component=Y.component,ne.el=Y.el,le.vnode=ne},B=(Y,ne,q,le,xe,oe,Me)=>{const Re=()=>{if(Y.isMounted){let{next:it,bu:Je,u:st,parent:vt,vnode:z}=Y,k=it,E;Zl(Y,!1),it?(it.el=z.el,j(Y,it,Me)):it=z,Je&&Ev(Je),(E=it.props&&it.props.onVnodeBeforeUpdate)&&Fi(E,vt,it,z),Zl(Y,!0);const W=yw(Y),G=Y.subTree;Y.subTree=W,m(G,W,d(G.el),fe(G),Y,xe,oe),it.el=W.el,k===null&&H7(Y,W.el),st&&qo(st,xe),(E=it.props&&it.props.onVnodeUpdated)&&qo(()=>Fi(E,vt,it,z),xe)}else{let it;const{el:Je,props:st}=ne,{bm:vt,m:z,parent:k}=Y,E=H$(ne);if(Zl(Y,!1),vt&&Ev(vt),!E&&(it=st&&st.onVnodeBeforeMount)&&Fi(it,k,ne),Zl(Y,!0),Je&&Ve){const W=()=>{Y.subTree=yw(Y),Ve(Je,Y.subTree,Y,xe,null)};E?ne.type.__asyncLoader().then(()=>!Y.isUnmounted&&W()):W()}else{const W=Y.subTree=yw(Y);m(null,W,q,le,Y,xe,oe),ne.el=W.el}if(z&&qo(z,xe),!E&&(it=st&&st.onVnodeMounted)){const W=ne;qo(()=>Fi(it,k,W),xe)}ne.shapeFlag&256&&Y.a&&qo(Y.a,xe),Y.isMounted=!0,ne=q=le=null}},ve=Y.effect=new l2(Re,()=>q3(Y.update),Y.scope),Ae=Y.update=ve.run.bind(ve);Ae.id=Y.uid,Zl(Y,!0),Ae()},j=(Y,ne,q)=>{ne.component=Y;const le=Y.vnode.props;Y.vnode=ne,Y.next=null,aq(Y,ne.props,le,q),cq(Y,ne.children,q),cc(),m2(void 0,Y.update),dc()},X=(Y,ne,q,le,xe,oe,Me,Re,ve=!1)=>{const Ae=Y&&Y.children,it=Y?Y.shapeFlag:0,Je=ne.children,{patchFlag:st,shapeFlag:vt}=ne;if(st>0){if(st&128){be(Ae,Je,q,le,xe,oe,Me,Re,ve);return}else if(st&256){ae(Ae,Je,q,le,xe,oe,Me,Re,ve);return}}vt&8?(it&16&&te(Ae,xe,oe),Je!==Ae&&c(q,Je)):it&16?vt&16?be(Ae,Je,q,le,xe,oe,Me,Re,ve):te(Ae,xe,oe,!0):(it&8&&c(q,""),vt&16&&T(Je,q,le,xe,oe,Me,Re,ve))},ae=(Y,ne,q,le,xe,oe,Me,Re,ve)=>{Y=Y||ld,ne=ne||ld;const Ae=Y.length,it=ne.length,Je=Math.min(Ae,it);let st;for(st=0;st<Je;st++){const vt=ne[st]=ve?Qa(ne[st]):Li(ne[st]);m(Y[st],vt,q,null,xe,oe,Me,Re,ve)}Ae>it?te(Y,xe,oe,!0,!1,Je):T(ne,q,le,xe,oe,Me,Re,ve,Je)},be=(Y,ne,q,le,xe,oe,Me,Re,ve)=>{let Ae=0;const it=ne.length;let Je=Y.length-1,st=it-1;for(;Ae<=Je&&Ae<=st;){const vt=Y[Ae],z=ne[Ae]=ve?Qa(ne[Ae]):Li(ne[Ae]);if(gu(vt,z))m(vt,z,q,null,xe,oe,Me,Re,ve);else break;Ae++}for(;Ae<=Je&&Ae<=st;){const vt=Y[Je],z=ne[st]=ve?Qa(ne[st]):Li(ne[st]);if(gu(vt,z))m(vt,z,q,null,xe,oe,Me,Re,ve);else break;Je--,st--}if(Ae>Je){if(Ae<=st){const vt=st+1,z=vt<it?ne[vt].el:le;for(;Ae<=st;)m(null,ne[Ae]=ve?Qa(ne[Ae]):Li(ne[Ae]),q,z,xe,oe,Me,Re,ve),Ae++}}else if(Ae>st)for(;Ae<=Je;)ye(Y[Ae],xe,oe,!0),Ae++;else{const vt=Ae,z=Ae,k=new Map;for(Ae=z;Ae<=st;Ae++){const xt=ne[Ae]=ve?Qa(ne[Ae]):Li(ne[Ae]);xt.key!=null&&k.set(xt.key,Ae)}let E,W=0;const G=st-z+1;let he=!1,_e=0;const ht=new Array(G);for(Ae=0;Ae<G;Ae++)ht[Ae]=0;for(Ae=vt;Ae<=Je;Ae++){const xt=Y[Ae];if(W>=G){ye(xt,xe,oe,!0);continue}let zt;if(xt.key!=null)zt=k.get(xt.key);else for(E=z;E<=st;E++)if(ht[E-z]===0&&gu(xt,ne[E])){zt=E;break}zt===void 0?ye(xt,xe,oe,!0):(ht[zt-z]=Ae+1,zt>=_e?_e=zt:he=!0,m(xt,ne[zt],q,null,xe,oe,Me,Re,ve),W++)}const Dt=he?gq(ht):ld;for(E=Dt.length-1,Ae=G-1;Ae>=0;Ae--){const xt=z+Ae,zt=ne[xt],ln=xt+1<it?ne[xt+1].el:le;ht[Ae]===0?m(null,zt,q,ln,xe,oe,Me,Re,ve):he&&(E<0||Ae!==Dt[E]?ie(zt,q,ln,2):E--)}}},ie=(Y,ne,q,le,xe=null)=>{const{el:oe,type:Me,transition:Re,children:ve,shapeFlag:Ae}=Y;if(Ae&6){ie(Y.component.subTree,ne,q,le);return}if(Ae&128){Y.suspense.move(ne,q,le);return}if(Ae&64){Me.move(Y,ne,q,We);return}if(Me===ct){s(oe,ne,q);for(let Je=0;Je<ve.length;Je++)ie(ve[Je],ne,q,le);s(Y.anchor,ne,q);return}if(Me===$w){y(Y,ne,q);return}if(le!==2&&Ae&1&&Re)if(le===0)Re.beforeEnter(oe),s(oe,ne,q),qo(()=>Re.enter(oe),xe);else{const{leave:Je,delayLeave:st,afterLeave:vt}=Re,z=()=>s(oe,ne,q),k=()=>{Je(oe,()=>{z(),vt&&vt()})};st?st(oe,z,k):k()}else s(oe,ne,q)},ye=(Y,ne,q,le=!1,xe=!1)=>{const{type:oe,props:Me,ref:Re,children:ve,dynamicChildren:Ae,shapeFlag:it,patchFlag:Je,dirs:st}=Y;if(Re!=null&&K$(Re,null,q,Y,!0),it&256){ne.ctx.deactivate(Y);return}const vt=it&1&&st,z=!H$(Y);let k;if(z&&(k=Me&&Me.onVnodeBeforeUnmount)&&Fi(k,ne,Y),it&6)ee(Y.component,q,le);else{if(it&128){Y.suspense.unmount(q,le);return}vt&&Xl(Y,null,ne,"beforeUnmount"),it&64?Y.type.remove(Y,ne,q,xe,We,le):Ae&&(oe!==ct||Je>0&&Je&64)?te(Ae,ne,q,!1,!0):(oe===ct&&Je&384||!xe&&it&16)&&te(ve,ne,q),le&&ue(Y)}(z&&(k=Me&&Me.onVnodeUnmounted)||vt)&&qo(()=>{k&&Fi(k,ne,Y),vt&&Xl(Y,null,ne,"unmounted")},q)},ue=Y=>{const{type:ne,el:q,anchor:le,transition:xe}=Y;if(ne===ct){Z(q,le);return}if(ne===$w){w(Y);return}const oe=()=>{o(q),xe&&!xe.persisted&&xe.afterLeave&&xe.afterLeave()};if(Y.shapeFlag&1&&xe&&!xe.persisted){const{leave:Me,delayLeave:Re}=xe,ve=()=>Me(q,oe);Re?Re(Y.el,oe,ve):ve()}else oe()},Z=(Y,ne)=>{let q;for(;Y!==ne;)q=f(Y),o(Y),Y=q;o(ne)},ee=(Y,ne,q)=>{const{bum:le,scope:xe,update:oe,subTree:Me,um:Re}=Y;le&&Ev(le),xe.stop(),oe&&(oe.active=!1,ye(Me,Y,ne,q)),Re&&qo(Re,ne),qo(()=>{Y.isUnmounted=!0},ne),ne&&ne.pendingBranch&&!ne.isUnmounted&&Y.asyncDep&&!Y.asyncResolved&&Y.suspenseId===ne.pendingId&&(ne.deps--,ne.deps===0&&ne.resolve())},te=(Y,ne,q,le=!1,xe=!1,oe=0)=>{for(let Me=oe;Me<Y.length;Me++)ye(Y[Me],ne,q,le,xe)},fe=Y=>Y.shapeFlag&6?fe(Y.component.subTree):Y.shapeFlag&128?Y.suspense.next():f(Y.anchor||Y.el),De=(Y,ne,q)=>{Y==null?ne._vnode&&ye(ne._vnode,null,null,!0):m(ne._vnode||null,Y,ne,null,null,null,q),Z3(),ne._vnode=Y},We={p:m,um:ye,m:ie,r:ue,mt:P,mc:T,pc:X,pbc:_,n:fe,o:e};let He,Ve;return t&&([He,Ve]=t(We)),{render:De,hydrate:He,createApp:fq(De,He)}}function Zl({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function $2(e,t,n=!1){const s=e.children,o=t.children;if(At(s)&&At(o))for(let r=0;r<s.length;r++){const i=s[r];let a=o[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[r]=Qa(o[r]),a.el=i.el),n||$2(i,a))}}function gq(e){const t=e.slice(),n=[0];let s,o,r,i,a;const l=e.length;for(s=0;s<l;s++){const u=e[s];if(u!==0){if(o=n[n.length-1],e[o]<u){t[s]=o,n.push(s);continue}for(r=0,i=n.length-1;r<i;)a=r+i>>1,e[n[a]]<u?r=a+1:i=a;u<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}const mq=e=>e.__isTeleport,Ch=e=>e&&(e.disabled||e.disabled===""),M_=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,q$=(e,t)=>{const n=e&&e.to;return Qt(n)?t?t(n):null:n},vq={__isTeleport:!0,process(e,t,n,s,o,r,i,a,l,u){const{mc:c,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:g,createComment:m}}=u,v=Ch(t.props);let{shapeFlag:b,children:$,dynamicChildren:y}=t;if(e==null){const w=t.el=g(""),C=t.anchor=g("");h(w,n,s),h(C,n,s);const x=t.target=q$(t.props,p),S=t.targetAnchor=g("");x&&(h(S,x),i=i||M_(x));const T=(I,_)=>{b&16&&c($,I,_,o,r,i,a,l)};v?T(n,C):x&&T(x,S)}else{t.el=e.el;const w=t.anchor=e.anchor,C=t.target=e.target,x=t.targetAnchor=e.targetAnchor,S=Ch(e.props),T=S?n:C,I=S?w:x;if(i=i||M_(C),y?(f(e.dynamicChildren,y,T,o,r,i,a),$2(e,t,!0)):l||d(e,t,T,I,o,r,i,a,!1),v)S||Lm(t,n,w,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const _=t.target=q$(t.props,p);_&&Lm(t,_,null,u,0)}else S&&Lm(t,C,x,u,1)}},remove(e,t,n,s,{um:o,o:{remove:r}},i){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:d,props:f}=e;if(d&&r(c),(i||!Ch(f))&&(r(u),a&16))for(let h=0;h<l.length;h++){const p=l[h];o(p,t,n,!0,!!p.dynamicChildren)}},move:Lm,hydrate:bq};function Lm(e,t,n,{o:{insert:s},m:o},r=2){r===0&&s(e.targetAnchor,t,n);const{el:i,anchor:a,shapeFlag:l,children:u,props:c}=e,d=r===2;if(d&&s(i,t,n),(!d||Ch(c))&&l&16)for(let f=0;f<u.length;f++)o(u[f],t,n,2);d&&s(a,t,n)}function bq(e,t,n,s,o,r,{o:{nextSibling:i,parentNode:a,querySelector:l}},u){const c=t.target=q$(t.props,l);if(c){const d=c._lpa||c.firstChild;t.shapeFlag&16&&(Ch(t.props)?(t.anchor=u(i(e),t,a(e),n,s,o,r),t.targetAnchor=d):(t.anchor=i(e),t.targetAnchor=u(d,t,c,n,s,o,r)),c._lpa=t.targetAnchor&&i(t.targetAnchor))}return t.anchor&&i(t.anchor)}const wb=vq,C2="components",yq="directives";function de(e,t){return x2(C2,e,!0,t)||e}const pF=Symbol();function on(e){return Qt(e)?x2(C2,e,!1)||e:e||pF}function Wo(e){return x2(yq,e)}function x2(e,t,n=!0,s=!1){const o=br||oo;if(o){const r=o.type;if(e===C2){const a=wF(r);if(a&&(a===t||a===qr(t)||a===gr(qr(t))))return r}const i=O_(o[e]||r[e],t)||O_(o.appContext[e],t);return!i&&s?r:i}}function O_(e,t){return e&&(e[t]||e[qr(t)]||e[gr(qr(t))])}const ct=Symbol(void 0),Fp=Symbol(void 0),xr=Symbol(void 0),$w=Symbol(void 0),xh=[];let Au=null;function R(e=!1){xh.push(Au=e?null:[])}function wq(){xh.pop(),Au=xh[xh.length-1]||null}let g0=1;function F_(e){g0+=e}function gF(e){return e.dynamicChildren=g0>0?Au||ld:null,wq(),g0>0&&Au&&Au.push(e),e}function H(e,t,n,s,o,r){return gF(K(e,t,n,s,o,r,!0))}function ke(e,t,n,s,o){return gF(pe(e,t,n,s,o,!0))}function Ds(e){return e?e.__v_isVNode===!0:!1}function gu(e,t){return e.type===t.type&&e.key===t.key}const $b="__vInternal",mF=({key:e})=>e!=null?e:null,Tv=({ref:e,ref_key:t,ref_for:n})=>e!=null?Qt(e)||vs(e)||Vt(e)?{i:br,r:e,k:t,f:!!n}:e:null;function K(e,t=null,n=null,s=0,o=null,r=e===ct?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&mF(t),ref:t&&Tv(t),scopeId:vb,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:o,dynamicChildren:null,appContext:null};return a?(k2(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=Qt(n)?8:16),g0>0&&!i&&Au&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Au.push(l),l}const pe=$q;function $q(e,t=null,n=null,s=0,o=null,r=!1){if((!e||e===pF)&&(e=xr),Ds(e)){const a=Uu(e,t,!0);return n&&k2(a,n),a}if(Rq(e)&&(e=e.__vccOpts),t){t=Hu(t);let{class:a,style:l}=t;a&&!Qt(a)&&(t.class=Q(a)),cn(l)&&(H3(l)&&!At(l)&&(l=lo({},l)),t.style=rt(l))}const i=Qt(e)?1:U7(e)?128:mq(e)?64:cn(e)?4:Vt(e)?2:0;return K(e,t,n,s,o,i,r,!0)}function Hu(e){return e?H3(e)||$b in e?lo({},e):e:null}function Uu(e,t,n=!1){const{props:s,ref:o,patchFlag:r,children:i}=e,a=t?uo(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&mF(a),ref:t&&t.ref?n&&o?At(o)?o.concat(Tv(t)):[o,Tv(t)]:Tv(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ct?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Uu(e.ssContent),ssFallback:e.ssFallback&&Uu(e.ssFallback),el:e.el,anchor:e.anchor}}function Zt(e=" ",t=0){return pe(Fp,null,e,t)}function me(e="",t=!1){return t?(R(),ke(xr,null,e)):pe(xr,null,e)}function Li(e){return e==null||typeof e=="boolean"?pe(xr):At(e)?pe(ct,null,e.slice()):typeof e=="object"?Qa(e):pe(Fp,null,String(e))}function Qa(e){return e.el===null||e.memo?e:Uu(e)}function k2(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(At(t))n=16;else if(typeof t=="object")if(s&65){const o=t.default;o&&(o._c&&(o._d=!1),k2(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!($b in t)?t._ctx=br:o===3&&br&&(br.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Vt(t)?(t={default:t,_ctx:br},n=32):(t=String(t),s&64?(n=16,t=[Zt(t)]):n=8);e.children=t,e.shapeFlag|=n}function uo(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const o in s)if(o==="class")t.class!==s.class&&(t.class=Q([t.class,s.class]));else if(o==="style")t.style=rt([t.style,s.style]);else if(fb(o)){const r=t[o],i=s[o];i&&r!==i&&!(At(r)&&r.includes(i))&&(t[o]=r?[].concat(r,i):i)}else o!==""&&(t[o]=s[o])}return t}function Fi(e,t,n,s=null){Gr(e,t,7,[n,s])}function en(e,t,n,s){let o;const r=n&&n[s];if(At(e)||Qt(e)){o=new Array(e.length);for(let i=0,a=e.length;i<a;i++)o[i]=t(e[i],i,void 0,r&&r[i])}else if(typeof e=="number"){o=new Array(e);for(let i=0;i<e;i++)o[i]=t(i+1,i,void 0,r&&r[i])}else if(cn(e))if(e[Symbol.iterator])o=Array.from(e,(i,a)=>t(i,a,void 0,r&&r[a]));else{const i=Object.keys(e);o=new Array(i.length);for(let a=0,l=i.length;a<l;a++){const u=i[a];o[a]=t(e[u],u,a,r&&r[a])}}else o=[];return n&&(n[s]=o),o}function qh(e,t){for(let n=0;n<t.length;n++){const s=t[n];if(At(s))for(let o=0;o<s.length;o++)e[s[o].name]=s[o].fn;else s&&(e[s.name]=s.fn)}return e}function Pe(e,t,n={},s,o){if(br.isCE)return pe("slot",t==="default"?null:{name:t},s&&s());let r=e[t];r&&r._c&&(r._d=!1),R();const i=r&&vF(r(n)),a=ke(ct,{key:n.key||`_${t}`},i||(s?s():[]),i&&e._===1?64:-2);return!o&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function vF(e){return e.some(t=>Ds(t)?!(t.type===xr||t.type===ct&&!vF(t.children)):!0)?e:null}function Cq(e){const t={};for(const n in e)t[Iv(n)]=e[n];return t}const Y$=e=>e?bF(e)?S2(e)||e.proxy:Y$(e.parent):null,m0=lo(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Y$(e.parent),$root:e=>Y$(e.root),$emit:e=>e.emit,$options:e=>aF(e),$forceUpdate:e=>()=>q3(e.update),$nextTick:e=>ft.bind(e.proxy),$watch:e=>G7.bind(e)}),xq={get({_:e},t){const{ctx:n,setupState:s,data:o,props:r,accessCache:i,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const h=i[t];if(h!==void 0)switch(h){case 1:return s[t];case 2:return o[t];case 4:return n[t];case 3:return r[t]}else{if(s!==es&&Kt(s,t))return i[t]=1,s[t];if(o!==es&&Kt(o,t))return i[t]=2,o[t];if((u=e.propsOptions[0])&&Kt(u,t))return i[t]=3,r[t];if(n!==es&&Kt(n,t))return i[t]=4,n[t];U$&&(i[t]=0)}}const c=m0[t];let d,f;if(c)return t==="$attrs"&&Cr(e,"get",t),c(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==es&&Kt(n,t))return i[t]=4,n[t];if(f=l.config.globalProperties,Kt(f,t))return f[t]},set({_:e},t,n){const{data:s,setupState:o,ctx:r}=e;return o!==es&&Kt(o,t)?(o[t]=n,!0):s!==es&&Kt(s,t)?(s[t]=n,!0):Kt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:o,propsOptions:r}},i){let a;return!!n[i]||e!==es&&Kt(e,i)||t!==es&&Kt(t,i)||(a=r[0])&&Kt(a,i)||Kt(s,i)||Kt(m0,i)||Kt(o.config.globalProperties,i)},defineProperty(e,t,n){return n.get!=null?this.set(e,t,n.get(),null):n.value!=null&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},kq=hF();let Sq=0;function Iq(e,t,n){const s=e.type,o=(t?t.appContext:e.appContext)||kq,r={uid:Sq++,vnode:e,type:s,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new N3(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:uF(s,o),emitsOptions:Q3(s,o),emit:null,emitted:null,propsDefaults:es,inheritAttrs:s.inheritAttrs,ctx:es,data:es,props:es,attrs:es,slots:es,refs:es,setupState:es,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=B7.bind(null,r),e.ce&&e.ce(r),r}let oo=null;const Wt=()=>oo||br,$d=e=>{oo=e,e.scope.on()},Du=()=>{oo&&oo.scope.off(),oo=null};function bF(e){return e.vnode.shapeFlag&4}let Yh=!1;function Eq(e,t=!1){Yh=t;const{props:n,children:s}=e.vnode,o=bF(e);iq(e,n,o,t),uq(e,s);const r=o?Tq(e,t):void 0;return Yh=!1,r}function Tq(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Hh(new Proxy(e.ctx,xq));const{setup:s}=n;if(s){const o=e.setupContext=s.length>1?Nq(e):null;$d(e),cc();const r=xa(s,e,0,[e.props,o]);if(dc(),Du(),wd(r)){if(r.then(Du,Du),t)return r.then(i=>{P_(e,i,t)}).catch(i=>{mb(i,e,0)});e.asyncDep=r}else P_(e,r,t)}else yF(e,t)}function P_(e,t,n){Vt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:cn(t)&&(e.setupState=d0(t)),yF(e,n)}let L_;function yF(e,t,n){const s=e.type;if(!e.render){if(!t&&L_&&!s.render){const o=s.template;if(o){const{isCustomElement:r,compilerOptions:i}=e.appContext.config,{delimiters:a,compilerOptions:l}=s,u=lo(lo({isCustomElement:r,delimiters:a},i),l);s.render=L_(o,u)}}e.render=s.render||un}$d(e),cc(),tq(e),dc(),Du()}function _q(e){return new Proxy(e.attrs,{get(t,n){return Cr(e,"get","$attrs"),t[n]}})}function Nq(e){const t=s=>{e.exposed=s||{}};let n;return{get attrs(){return n||(n=_q(e))},slots:e.slots,emit:e.emit,expose:t}}function S2(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(d0(Hh(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in m0)return m0[n](e)}}))}const Aq=/(?:^|[-_])(\w)/g,Dq=e=>e.replace(Aq,t=>t.toUpperCase()).replace(/[-_]/g,"");function wF(e){return Vt(e)&&e.displayName||e.name}function $F(e,t,n=!1){let s=wF(t);if(!s&&t.__file){const o=t.__file.match(/([^/\\]+)\.\w+$/);o&&(s=o[1])}if(!s&&e&&e.parent){const o=r=>{for(const i in r)if(r[i]===t)return i};s=o(e.components||e.parent.type.components)||o(e.appContext.components)}return s?Dq(s):n?"App":"Anonymous"}function Rq(e){return Vt(e)&&"__vccOpts"in e}const O=(e,t)=>T7(e,t,Yh);function Ke(e,t,n){const s=arguments.length;return s===2?cn(t)&&!At(t)?Ds(t)?pe(e,null,[t]):pe(e,t):pe(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Ds(n)&&(n=[n]),pe(e,t,n))}const Mq="3.2.31",Oq="http://www.w3.org/2000/svg",mu=typeof document!="undefined"?document:null,B_=mu&&mu.createElement("template"),Fq={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const o=t?mu.createElementNS(Oq,e):mu.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&o.setAttribute("multiple",s.multiple),o},createText:e=>mu.createTextNode(e),createComment:e=>mu.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>mu.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,s,o,r){const i=n?n.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===r||!(o=o.nextSibling)););else{B_.innerHTML=s?`<svg>${e}</svg>`:e;const a=B_.content;if(s){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Pq(e,t,n){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Lq(e,t,n){const s=e.style,o=Qt(n);if(n&&!o){for(const r in n)X$(s,r,n[r]);if(t&&!Qt(t))for(const r in t)n[r]==null&&X$(s,r,"")}else{const r=s.display;o?t!==n&&(s.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=r)}}const z_=/\s*!important$/;function X$(e,t,n){if(At(n))n.forEach(s=>X$(e,t,s));else if(t.startsWith("--"))e.setProperty(t,n);else{const s=Bq(e,t);z_.test(n)?e.setProperty(Il(s),n.replace(z_,""),"important"):e[s]=n}}const V_=["Webkit","Moz","ms"],Cw={};function Bq(e,t){const n=Cw[t];if(n)return n;let s=qr(t);if(s!=="filter"&&s in e)return Cw[t]=s;s=gr(s);for(let o=0;o<V_.length;o++){const r=V_[o]+s;if(r in e)return Cw[t]=r}return t}const W_="http://www.w3.org/1999/xlink";function zq(e,t,n,s,o){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(W_,t.slice(6,t.length)):e.setAttributeNS(W_,t,n);else{const r=L9(t);n==null||r&&!S3(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function Vq(e,t,n,s,o,r,i){if(t==="innerHTML"||t==="textContent"){s&&i(s,o,r),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const a=n==null?"":n;(e.value!==a||e.tagName==="OPTION")&&(e.value=a),n==null&&e.removeAttribute(t);return}if(n===""||n==null){const a=typeof e[t];if(a==="boolean"){e[t]=S3(n);return}else if(n==null&&a==="string"){e[t]="",e.removeAttribute(t);return}else if(a==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=n}catch{}}let v0=Date.now,CF=!1;if(typeof window!="undefined"){v0()>document.createEvent("Event").timeStamp&&(v0=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);CF=!!(e&&Number(e[1])<=53)}let Z$=0;const Wq=Promise.resolve(),Hq=()=>{Z$=0},Uq=()=>Z$||(Wq.then(Hq),Z$=v0());function nl(e,t,n,s){e.addEventListener(t,n,s)}function jq(e,t,n,s){e.removeEventListener(t,n,s)}function Gq(e,t,n,s,o=null){const r=e._vei||(e._vei={}),i=r[t];if(s&&i)i.value=s;else{const[a,l]=Kq(t);if(s){const u=r[t]=qq(s,o);nl(e,a,u,l)}else i&&(jq(e,a,i,l),r[t]=void 0)}}const H_=/(?:Once|Passive|Capture)$/;function Kq(e){let t;if(H_.test(e)){t={};let n;for(;n=e.match(H_);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[Il(e.slice(2)),t]}function qq(e,t){const n=s=>{const o=s.timeStamp||v0();(CF||o>=n.attached-1)&&Gr(Yq(s,n.value),t,5,[s])};return n.value=e,n.attached=Uq(),n}function Yq(e,t){if(At(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>o=>!o._stopped&&s&&s(o))}else return t}const U_=/^on[a-z]/,Xq=(e,t,n,s,o=!1,r,i,a,l)=>{t==="class"?Pq(e,s,o):t==="style"?Lq(e,n,s):fb(t)?s2(t)||Gq(e,t,n,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Zq(e,t,s,o))?Vq(e,t,s,r,i,a,l):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),zq(e,t,s,o))};function Zq(e,t,n,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&U_.test(t)&&Vt(n)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||U_.test(t)&&Qt(n)?!1:t in e}const Ka="transition",Ff="animation",ks=(e,{slots:t})=>Ke(nF,kF(e),t);ks.displayName="Transition";const xF={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Jq=ks.props=lo({},nF.props,xF),Jl=(e,t=[])=>{At(e)?e.forEach(n=>n(...t)):e&&e(...t)},j_=e=>e?At(e)?e.some(t=>t.length>1):e.length>1:!1;function kF(e){const t={};for(const N in e)N in xF||(t[N]=e[N]);if(e.css===!1)return t;const{name:n="v",type:s,duration:o,enterFromClass:r=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:u=i,appearToClass:c=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,p=Qq(o),g=p&&p[0],m=p&&p[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:$,onLeave:y,onLeaveCancelled:w,onBeforeAppear:C=v,onAppear:x=b,onAppearCancelled:S=$}=t,T=(N,D,F)=>{lu(N,D?c:a),lu(N,D?u:i),F&&F()},I=(N,D)=>{lu(N,h),lu(N,f),D&&D()},_=N=>(D,F)=>{const P=N?x:b,M=()=>T(D,N,F);Jl(P,[D,M]),G_(()=>{lu(D,N?l:r),fa(D,N?c:a),j_(P)||K_(D,s,g,M)})};return lo(t,{onBeforeEnter(N){Jl(v,[N]),fa(N,r),fa(N,i)},onBeforeAppear(N){Jl(C,[N]),fa(N,l),fa(N,u)},onEnter:_(!1),onAppear:_(!0),onLeave(N,D){const F=()=>I(N,D);fa(N,d),IF(),fa(N,f),G_(()=>{lu(N,d),fa(N,h),j_(y)||K_(N,s,m,F)}),Jl(y,[N,F])},onEnterCancelled(N){T(N,!1),Jl($,[N])},onAppearCancelled(N){T(N,!0),Jl(S,[N])},onLeaveCancelled(N){I(N),Jl(w,[N])}})}function Qq(e){if(e==null)return null;if(cn(e))return[xw(e.enter),xw(e.leave)];{const t=xw(e);return[t,t]}}function xw(e){return c0(e)}function fa(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function lu(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function G_(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let eY=0;function K_(e,t,n,s){const o=e._endId=++eY,r=()=>{o===e._endId&&s()};if(n)return setTimeout(r,n);const{type:i,timeout:a,propCount:l}=SF(e,t);if(!i)return s();const u=i+"end";let c=0;const d=()=>{e.removeEventListener(u,f),r()},f=h=>{h.target===e&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},a+1),e.addEventListener(u,f)}function SF(e,t){const n=window.getComputedStyle(e),s=p=>(n[p]||"").split(", "),o=s(Ka+"Delay"),r=s(Ka+"Duration"),i=q_(o,r),a=s(Ff+"Delay"),l=s(Ff+"Duration"),u=q_(a,l);let c=null,d=0,f=0;t===Ka?i>0&&(c=Ka,d=i,f=r.length):t===Ff?u>0&&(c=Ff,d=u,f=l.length):(d=Math.max(i,u),c=d>0?i>u?Ka:Ff:null,f=c?c===Ka?r.length:l.length:0);const h=c===Ka&&/\b(transform|all)(,|$)/.test(n[Ka+"Property"]);return{type:c,timeout:d,propCount:f,hasTransform:h}}function q_(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Y_(n)+Y_(e[s])))}function Y_(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function IF(){return document.body.offsetHeight}const EF=new WeakMap,TF=new WeakMap,tY={name:"TransitionGroup",props:lo({},Jq,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Wt(),s=tF();let o,r;return Ni(()=>{if(!o.length)return;const i=e.moveClass||`${e.name||"v"}-move`;if(!iY(o[0].el,n.vnode.el,i))return;o.forEach(sY),o.forEach(oY);const a=o.filter(rY);IF(),a.forEach(l=>{const u=l.el,c=u.style;fa(u,i),c.transform=c.webkitTransform=c.transitionDuration="";const d=u._moveCb=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u._moveCb=null,lu(u,i))};u.addEventListener("transitionend",d)})}),()=>{const i=xn(e),a=kF(i);let l=i.tag||ct;o=r,r=t.default?y2(t.default()):[];for(let u=0;u<r.length;u++){const c=r[u];c.key!=null&&Kh(c,Gh(c,a,s,n))}if(o)for(let u=0;u<o.length;u++){const c=o[u];Kh(c,Gh(c,a,s,n)),EF.set(c,c.el.getBoundingClientRect())}return pe(l,null,r)}}},nY=tY;function sY(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function oY(e){TF.set(e,e.el.getBoundingClientRect())}function rY(e){const t=EF.get(e),n=TF.get(e),s=t.left-n.left,o=t.top-n.top;if(s||o){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${o}px)`,r.transitionDuration="0s",e}}function iY(e,t,n){const s=e.cloneNode();e._vtc&&e._vtc.forEach(i=>{i.split(/\s+/).forEach(a=>a&&s.classList.remove(a))}),n.split(/\s+/).forEach(i=>i&&s.classList.add(i)),s.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(s);const{hasTransform:r}=SF(s);return o.removeChild(s),r}const Cd=e=>{const t=e.props["onUpdate:modelValue"];return At(t)?n=>Ev(t,n):t};function aY(e){e.target.composing=!0}function X_(e){const t=e.target;t.composing&&(t.composing=!1,lY(t,"input"))}function lY(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}const I2={created(e,{modifiers:{lazy:t,trim:n,number:s}},o){e._assign=Cd(o);const r=s||o.props&&o.props.type==="number";nl(e,t?"change":"input",i=>{if(i.target.composing)return;let a=e.value;n?a=a.trim():r&&(a=c0(a)),e._assign(a)}),n&&nl(e,"change",()=>{e.value=e.value.trim()}),t||(nl(e,"compositionstart",aY),nl(e,"compositionend",X_),nl(e,"change",X_))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:s,number:o}},r){if(e._assign=Cd(r),e.composing||document.activeElement===e&&(n||s&&e.value.trim()===t||(o||e.type==="number")&&c0(e.value)===t))return;const i=t==null?"":t;e.value!==i&&(e.value=i)}},b0={deep:!0,created(e,t,n){e._assign=Cd(n),nl(e,"change",()=>{const s=e._modelValue,o=NF(e),r=e.checked,i=e._assign;if(At(s)){const a=I3(s,o),l=a!==-1;if(r&&!l)i(s.concat(o));else if(!r&&l){const u=[...s];u.splice(a,1),i(u)}}else if(hb(s)){const a=new Set(s);r?a.add(o):a.delete(o),i(a)}else i(AF(e,r))})},mounted:Z_,beforeUpdate(e,t,n){e._assign=Cd(n),Z_(e,t,n)}};function Z_(e,{value:t,oldValue:n},s){e._modelValue=t,At(t)?e.checked=I3(t,s.props.value)>-1:hb(t)?e.checked=t.has(s.props.value):t!==n&&(e.checked=yd(t,AF(e,!0)))}const _F={created(e,{value:t},n){e.checked=yd(t,n.props.value),e._assign=Cd(n),nl(e,"change",()=>{e._assign(NF(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e._assign=Cd(s),t!==n&&(e.checked=yd(t,s.props.value))}};function NF(e){return"_value"in e?e._value:e.value}function AF(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const uY=["ctrl","shift","alt","meta"],cY={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>uY.some(n=>e[`${n}Key`]&&!t.includes(n))},gt=(e,t)=>(n,...s)=>{for(let o=0;o<t.length;o++){const r=cY[t[o]];if(r&&r(n,t))return}return e(n,...s)},dY={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qt=(e,t)=>n=>{if(!("key"in n))return;const s=Il(n.key);if(t.some(o=>o===s||dY[o]===s))return e(n)},sn={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Pf(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Pf(e,!0),s.enter(e)):s.leave(e,()=>{Pf(e,!1)}):Pf(e,t))},beforeUnmount(e,{value:t}){Pf(e,t)}};function Pf(e,t){e.style.display=t?e._vod:"none"}const fY=lo({patchProp:Xq},Fq);let J_;function DF(){return J_||(J_=hq(fY))}const xd=(...e)=>{DF().render(...e)},hY=(...e)=>{const t=DF().createApp(...e),{mount:n}=t;return t.mount=s=>{const o=pY(s);if(!o)return;const r=t._component;!Vt(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.innerHTML="";const i=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t};function pY(e){return Qt(e)?document.querySelector(e):e}var Fn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function gY(e){for(var t=-1,n=e==null?0:e.length,s={};++t<n;){var o=e[t];s[o[0]]=o[1]}return s}var RF=gY;class mY extends Error{constructor(t){super(t);this.name="ElementPlusError"}}function So(e,t){throw new mY(`[${e}] ${t}`)}const vY=["class","style"],bY=/^on[A-Z]/,E2=(e={})=>{const{excludeListeners:t=!1,excludeKeys:n=[]}=e,s=n.concat(vY),o=Wt();return O(o?()=>{var r;return RF(Object.entries((r=o.proxy)==null?void 0:r.$attrs).filter(([i])=>!s.includes(i)&&!(t&&bY.test(i))))}:()=>({}))},ar=Symbol("elForm"),Ai=Symbol("elFormItem"),MF=Symbol("buttonGroupContextKey"),OF=Symbol("elBreadcrumbKey"),FF=Symbol("elPaginationKey"),PF=Symbol(),LF=Symbol("radioGroupKey"),Cb=Symbol("tabsRootContextKey"),BF=Symbol("scrollbarContextKey"),J$=Symbol(),Q_="__elPropsReservedKey";function xi(e,t){if(!cn(e)||!!e[Q_])return e;const{values:n,required:s,default:o,type:r,validator:i}=e,a=n||i?l=>{let u=!1,c=[];if(n&&(c=[...n,o],u||(u=c.includes(l))),i&&(u||(u=i(l))),!u&&c.length>0){const d=[...new Set(c)].map(f=>JSON.stringify(f)).join(", ");_7(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${d}], got value ${JSON.stringify(l)}.`)}return u}:void 0;return{type:typeof r=="object"&&Object.getOwnPropertySymbols(r).includes(J$)?r[J$]:r,required:!!s,default:o,validator:a,[Q_]:!0}}const yt=e=>RF(Object.entries(e).map(([t,n])=>[t,xi(n,t)])),et=e=>({[J$]:e}),yY=e=>Object.keys(e),As=e=>e,T2=["large","default","small"],zF=e=>{const t=Wt();return O(()=>{var n,s;return(s=(n=t.proxy)==null?void 0:n.$props[e])!=null?s:void 0})};function wY(){this.__data__=[],this.size=0}var $Y=wY;function CY(e,t){return e===t||e!==e&&t!==t}var _2=CY,xY=_2;function kY(e,t){for(var n=e.length;n--;)if(xY(e[n][0],t))return n;return-1}var xb=kY,SY=xb,IY=Array.prototype,EY=IY.splice;function TY(e){var t=this.__data__,n=SY(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():EY.call(t,n,1),--this.size,!0}var _Y=TY,NY=xb;function AY(e){var t=this.__data__,n=NY(t,e);return n<0?void 0:t[n][1]}var DY=AY,RY=xb;function MY(e){return RY(this.__data__,e)>-1}var OY=MY,FY=xb;function PY(e,t){var n=this.__data__,s=FY(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var LY=PY,BY=$Y,zY=_Y,VY=DY,WY=OY,HY=LY;function nf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}nf.prototype.clear=BY;nf.prototype.delete=zY;nf.prototype.get=VY;nf.prototype.has=WY;nf.prototype.set=HY;var kb=nf,UY=kb;function jY(){this.__data__=new UY,this.size=0}var GY=jY;function KY(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var qY=KY;function YY(e){return this.__data__.get(e)}var XY=YY;function ZY(e){return this.__data__.has(e)}var JY=ZY,QY=typeof Fn=="object"&&Fn&&Fn.Object===Object&&Fn,VF=QY,eX=VF,tX=typeof self=="object"&&self&&self.Object===Object&&self,nX=eX||tX||Function("return this")(),Di=nX,sX=Di,oX=sX.Symbol,sf=oX,eN=sf,WF=Object.prototype,rX=WF.hasOwnProperty,iX=WF.toString,Lf=eN?eN.toStringTag:void 0;function aX(e){var t=rX.call(e,Lf),n=e[Lf];try{e[Lf]=void 0;var s=!0}catch{}var o=iX.call(e);return s&&(t?e[Lf]=n:delete e[Lf]),o}var lX=aX,uX=Object.prototype,cX=uX.toString;function dX(e){return cX.call(e)}var fX=dX,tN=sf,hX=lX,pX=fX,gX="[object Null]",mX="[object Undefined]",nN=tN?tN.toStringTag:void 0;function vX(e){return e==null?e===void 0?mX:gX:nN&&nN in Object(e)?hX(e):pX(e)}var Pp=vX;function bX(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var El=bX,yX=Pp,wX=El,$X="[object AsyncFunction]",CX="[object Function]",xX="[object GeneratorFunction]",kX="[object Proxy]";function SX(e){if(!wX(e))return!1;var t=yX(e);return t==CX||t==xX||t==$X||t==kX}var HF=SX,IX=Di,EX=IX["__core-js_shared__"],TX=EX,kw=TX,sN=function(){var e=/[^.]+$/.exec(kw&&kw.keys&&kw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function _X(e){return!!sN&&sN in e}var NX=_X,AX=Function.prototype,DX=AX.toString;function RX(e){if(e!=null){try{return DX.call(e)}catch{}try{return e+""}catch{}}return""}var UF=RX,MX=HF,OX=NX,FX=El,PX=UF,LX=/[\\^$.*+?()[\]{}|]/g,BX=/^\[object .+?Constructor\]$/,zX=Function.prototype,VX=Object.prototype,WX=zX.toString,HX=VX.hasOwnProperty,UX=RegExp("^"+WX.call(HX).replace(LX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jX(e){if(!FX(e)||OX(e))return!1;var t=MX(e)?UX:BX;return t.test(PX(e))}var GX=jX;function KX(e,t){return e==null?void 0:e[t]}var qX=KX,YX=GX,XX=qX;function ZX(e,t){var n=XX(e,t);return YX(n)?n:void 0}var fc=ZX,JX=fc,QX=Di,eZ=JX(QX,"Map"),N2=eZ,tZ=fc,nZ=tZ(Object,"create"),Sb=nZ,oN=Sb;function sZ(){this.__data__=oN?oN(null):{},this.size=0}var oZ=sZ;function rZ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var iZ=rZ,aZ=Sb,lZ="__lodash_hash_undefined__",uZ=Object.prototype,cZ=uZ.hasOwnProperty;function dZ(e){var t=this.__data__;if(aZ){var n=t[e];return n===lZ?void 0:n}return cZ.call(t,e)?t[e]:void 0}var fZ=dZ,hZ=Sb,pZ=Object.prototype,gZ=pZ.hasOwnProperty;function mZ(e){var t=this.__data__;return hZ?t[e]!==void 0:gZ.call(t,e)}var vZ=mZ,bZ=Sb,yZ="__lodash_hash_undefined__";function wZ(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=bZ&&t===void 0?yZ:t,this}var $Z=wZ,CZ=oZ,xZ=iZ,kZ=fZ,SZ=vZ,IZ=$Z;function of(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}of.prototype.clear=CZ;of.prototype.delete=xZ;of.prototype.get=kZ;of.prototype.has=SZ;of.prototype.set=IZ;var EZ=of,rN=EZ,TZ=kb,_Z=N2;function NZ(){this.size=0,this.__data__={hash:new rN,map:new(_Z||TZ),string:new rN}}var AZ=NZ;function DZ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var RZ=DZ,MZ=RZ;function OZ(e,t){var n=e.__data__;return MZ(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Ib=OZ,FZ=Ib;function PZ(e){var t=FZ(this,e).delete(e);return this.size-=t?1:0,t}var LZ=PZ,BZ=Ib;function zZ(e){return BZ(this,e).get(e)}var VZ=zZ,WZ=Ib;function HZ(e){return WZ(this,e).has(e)}var UZ=HZ,jZ=Ib;function GZ(e,t){var n=jZ(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var KZ=GZ,qZ=AZ,YZ=LZ,XZ=VZ,ZZ=UZ,JZ=KZ;function rf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}rf.prototype.clear=qZ;rf.prototype.delete=YZ;rf.prototype.get=XZ;rf.prototype.has=ZZ;rf.prototype.set=JZ;var A2=rf,QZ=kb,eJ=N2,tJ=A2,nJ=200;function sJ(e,t){var n=this.__data__;if(n instanceof QZ){var s=n.__data__;if(!eJ||s.length<nJ-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new tJ(s)}return n.set(e,t),this.size=n.size,this}var oJ=sJ,rJ=kb,iJ=GY,aJ=qY,lJ=XY,uJ=JY,cJ=oJ;function af(e){var t=this.__data__=new rJ(e);this.size=t.size}af.prototype.clear=iJ;af.prototype.delete=aJ;af.prototype.get=lJ;af.prototype.has=uJ;af.prototype.set=cJ;var jF=af,dJ="__lodash_hash_undefined__";function fJ(e){return this.__data__.set(e,dJ),this}var hJ=fJ;function pJ(e){return this.__data__.has(e)}var gJ=pJ,mJ=A2,vJ=hJ,bJ=gJ;function y0(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new mJ;++t<n;)this.add(e[t])}y0.prototype.add=y0.prototype.push=vJ;y0.prototype.has=bJ;var GF=y0;function yJ(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var wJ=yJ;function $J(e,t){return e.has(t)}var KF=$J,CJ=GF,xJ=wJ,kJ=KF,SJ=1,IJ=2;function EJ(e,t,n,s,o,r){var i=n&SJ,a=e.length,l=t.length;if(a!=l&&!(i&&l>a))return!1;var u=r.get(e),c=r.get(t);if(u&&c)return u==t&&c==e;var d=-1,f=!0,h=n&IJ?new CJ:void 0;for(r.set(e,t),r.set(t,e);++d<a;){var p=e[d],g=t[d];if(s)var m=i?s(g,p,d,t,e,r):s(p,g,d,e,t,r);if(m!==void 0){if(m)continue;f=!1;break}if(h){if(!xJ(t,function(v,b){if(!kJ(h,b)&&(p===v||o(p,v,n,s,r)))return h.push(b)})){f=!1;break}}else if(!(p===g||o(p,g,n,s,r))){f=!1;break}}return r.delete(e),r.delete(t),f}var qF=EJ,TJ=Di,_J=TJ.Uint8Array,YF=_J;function NJ(e){var t=-1,n=Array(e.size);return e.forEach(function(s,o){n[++t]=[o,s]}),n}var AJ=NJ;function DJ(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var D2=DJ,iN=sf,aN=YF,RJ=_2,MJ=qF,OJ=AJ,FJ=D2,PJ=1,LJ=2,BJ="[object Boolean]",zJ="[object Date]",VJ="[object Error]",WJ="[object Map]",HJ="[object Number]",UJ="[object RegExp]",jJ="[object Set]",GJ="[object String]",KJ="[object Symbol]",qJ="[object ArrayBuffer]",YJ="[object DataView]",lN=iN?iN.prototype:void 0,Sw=lN?lN.valueOf:void 0;function XJ(e,t,n,s,o,r,i){switch(n){case YJ:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case qJ:return!(e.byteLength!=t.byteLength||!r(new aN(e),new aN(t)));case BJ:case zJ:case HJ:return RJ(+e,+t);case VJ:return e.name==t.name&&e.message==t.message;case UJ:case GJ:return e==t+"";case WJ:var a=OJ;case jJ:var l=s&PJ;if(a||(a=FJ),e.size!=t.size&&!l)return!1;var u=i.get(e);if(u)return u==t;s|=LJ,i.set(e,t);var c=MJ(a(e),a(t),s,o,r,i);return i.delete(e),c;case KJ:if(Sw)return Sw.call(e)==Sw.call(t)}return!1}var ZJ=XJ;function JJ(e,t){for(var n=-1,s=t.length,o=e.length;++n<s;)e[o+n]=t[n];return e}var R2=JJ,QJ=Array.isArray,Tl=QJ,eQ=R2,tQ=Tl;function nQ(e,t,n){var s=t(e);return tQ(e)?s:eQ(s,n(e))}var XF=nQ;function sQ(e,t){for(var n=-1,s=e==null?0:e.length,o=0,r=[];++n<s;){var i=e[n];t(i,n,e)&&(r[o++]=i)}return r}var oQ=sQ;function rQ(){return[]}var ZF=rQ,iQ=oQ,aQ=ZF,lQ=Object.prototype,uQ=lQ.propertyIsEnumerable,uN=Object.getOwnPropertySymbols,cQ=uN?function(e){return e==null?[]:(e=Object(e),iQ(uN(e),function(t){return uQ.call(e,t)}))}:aQ,M2=cQ;function dQ(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var fQ=dQ;function hQ(e){return e!=null&&typeof e=="object"}var _l=hQ,pQ=Pp,gQ=_l,mQ="[object Arguments]";function vQ(e){return gQ(e)&&pQ(e)==mQ}var bQ=vQ,cN=bQ,yQ=_l,JF=Object.prototype,wQ=JF.hasOwnProperty,$Q=JF.propertyIsEnumerable,CQ=cN(function(){return arguments}())?cN:function(e){return yQ(e)&&wQ.call(e,"callee")&&!$Q.call(e,"callee")},QF=CQ,Xh={exports:{}};function xQ(){return!1}var kQ=xQ;(function(e,t){var n=Di,s=kQ,o=t&&!t.nodeType&&t,r=o&&!0&&e&&!e.nodeType&&e,i=r&&r.exports===o,a=i?n.Buffer:void 0,l=a?a.isBuffer:void 0,u=l||s;e.exports=u})(Xh,Xh.exports);var SQ=9007199254740991,IQ=/^(?:0|[1-9]\d*)$/;function EQ(e,t){var n=typeof e;return t=t==null?SQ:t,!!t&&(n=="number"||n!="symbol"&&IQ.test(e))&&e>-1&&e%1==0&&e<t}var TQ=EQ,_Q=9007199254740991;function NQ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=_Q}var eP=NQ,AQ=Pp,DQ=eP,RQ=_l,MQ="[object Arguments]",OQ="[object Array]",FQ="[object Boolean]",PQ="[object Date]",LQ="[object Error]",BQ="[object Function]",zQ="[object Map]",VQ="[object Number]",WQ="[object Object]",HQ="[object RegExp]",UQ="[object Set]",jQ="[object String]",GQ="[object WeakMap]",KQ="[object ArrayBuffer]",qQ="[object DataView]",YQ="[object Float32Array]",XQ="[object Float64Array]",ZQ="[object Int8Array]",JQ="[object Int16Array]",QQ="[object Int32Array]",eee="[object Uint8Array]",tee="[object Uint8ClampedArray]",nee="[object Uint16Array]",see="[object Uint32Array]",fs={};fs[YQ]=fs[XQ]=fs[ZQ]=fs[JQ]=fs[QQ]=fs[eee]=fs[tee]=fs[nee]=fs[see]=!0;fs[MQ]=fs[OQ]=fs[KQ]=fs[FQ]=fs[qQ]=fs[PQ]=fs[LQ]=fs[BQ]=fs[zQ]=fs[VQ]=fs[WQ]=fs[HQ]=fs[UQ]=fs[jQ]=fs[GQ]=!1;function oee(e){return RQ(e)&&DQ(e.length)&&!!fs[AQ(e)]}var ree=oee;function iee(e){return function(t){return e(t)}}var O2=iee,Zh={exports:{}};(function(e,t){var n=VF,s=t&&!t.nodeType&&t,o=s&&!0&&e&&!e.nodeType&&e,r=o&&o.exports===s,i=r&&n.process,a=function(){try{var l=o&&o.require&&o.require("util").types;return l||i&&i.binding&&i.binding("util")}catch{}}();e.exports=a})(Zh,Zh.exports);var aee=ree,lee=O2,dN=Zh.exports,fN=dN&&dN.isTypedArray,uee=fN?lee(fN):aee,tP=uee,cee=fQ,dee=QF,fee=Tl,hee=Xh.exports,pee=TQ,gee=tP,mee=Object.prototype,vee=mee.hasOwnProperty;function bee(e,t){var n=fee(e),s=!n&&dee(e),o=!n&&!s&&hee(e),r=!n&&!s&&!o&&gee(e),i=n||s||o||r,a=i?cee(e.length,String):[],l=a.length;for(var u in e)(t||vee.call(e,u))&&!(i&&(u=="length"||o&&(u=="offset"||u=="parent")||r&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||pee(u,l)))&&a.push(u);return a}var nP=bee,yee=Object.prototype;function wee(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||yee;return e===n}var F2=wee;function $ee(e,t){return function(n){return e(t(n))}}var sP=$ee,Cee=sP,xee=Cee(Object.keys,Object),kee=xee,See=F2,Iee=kee,Eee=Object.prototype,Tee=Eee.hasOwnProperty;function _ee(e){if(!See(e))return Iee(e);var t=[];for(var n in Object(e))Tee.call(e,n)&&n!="constructor"&&t.push(n);return t}var Nee=_ee,Aee=HF,Dee=eP;function Ree(e){return e!=null&&Dee(e.length)&&!Aee(e)}var P2=Ree,Mee=nP,Oee=Nee,Fee=P2;function Pee(e){return Fee(e)?Mee(e):Oee(e)}var L2=Pee,Lee=XF,Bee=M2,zee=L2;function Vee(e){return Lee(e,zee,Bee)}var oP=Vee,hN=oP,Wee=1,Hee=Object.prototype,Uee=Hee.hasOwnProperty;function jee(e,t,n,s,o,r){var i=n&Wee,a=hN(e),l=a.length,u=hN(t),c=u.length;if(l!=c&&!i)return!1;for(var d=l;d--;){var f=a[d];if(!(i?f in t:Uee.call(t,f)))return!1}var h=r.get(e),p=r.get(t);if(h&&p)return h==t&&p==e;var g=!0;r.set(e,t),r.set(t,e);for(var m=i;++d<l;){f=a[d];var v=e[f],b=t[f];if(s)var $=i?s(b,v,f,t,e,r):s(v,b,f,e,t,r);if(!($===void 0?v===b||o(v,b,n,s,r):$)){g=!1;break}m||(m=f=="constructor")}if(g&&!m){var y=e.constructor,w=t.constructor;y!=w&&"constructor"in e&&"constructor"in t&&!(typeof y=="function"&&y instanceof y&&typeof w=="function"&&w instanceof w)&&(g=!1)}return r.delete(e),r.delete(t),g}var Gee=jee,Kee=fc,qee=Di,Yee=Kee(qee,"DataView"),Xee=Yee,Zee=fc,Jee=Di,Qee=Zee(Jee,"Promise"),ete=Qee,tte=fc,nte=Di,ste=tte(nte,"Set"),rP=ste,ote=fc,rte=Di,ite=ote(rte,"WeakMap"),ate=ite,Q$=Xee,eC=N2,tC=ete,nC=rP,sC=ate,iP=Pp,lf=UF,pN="[object Map]",lte="[object Object]",gN="[object Promise]",mN="[object Set]",vN="[object WeakMap]",bN="[object DataView]",ute=lf(Q$),cte=lf(eC),dte=lf(tC),fte=lf(nC),hte=lf(sC),uu=iP;(Q$&&uu(new Q$(new ArrayBuffer(1)))!=bN||eC&&uu(new eC)!=pN||tC&&uu(tC.resolve())!=gN||nC&&uu(new nC)!=mN||sC&&uu(new sC)!=vN)&&(uu=function(e){var t=iP(e),n=t==lte?e.constructor:void 0,s=n?lf(n):"";if(s)switch(s){case ute:return bN;case cte:return pN;case dte:return gN;case fte:return mN;case hte:return vN}return t});var Eb=uu,Iw=jF,pte=qF,gte=ZJ,mte=Gee,yN=Eb,wN=Tl,$N=Xh.exports,vte=tP,bte=1,CN="[object Arguments]",xN="[object Array]",Bm="[object Object]",yte=Object.prototype,kN=yte.hasOwnProperty;function wte(e,t,n,s,o,r){var i=wN(e),a=wN(t),l=i?xN:yN(e),u=a?xN:yN(t);l=l==CN?Bm:l,u=u==CN?Bm:u;var c=l==Bm,d=u==Bm,f=l==u;if(f&&$N(e)){if(!$N(t))return!1;i=!0,c=!1}if(f&&!c)return r||(r=new Iw),i||vte(e)?pte(e,t,n,s,o,r):gte(e,t,l,n,s,o,r);if(!(n&bte)){var h=c&&kN.call(e,"__wrapped__"),p=d&&kN.call(t,"__wrapped__");if(h||p){var g=h?e.value():e,m=p?t.value():t;return r||(r=new Iw),o(g,m,n,s,r)}}return f?(r||(r=new Iw),mte(e,t,n,s,o,r)):!1}var $te=wte,Cte=$te,SN=_l;function aP(e,t,n,s,o){return e===t?!0:e==null||t==null||!SN(e)&&!SN(t)?e!==e&&t!==t:Cte(e,t,n,s,aP,o)}var xte=aP;function Tb(e){return Z9()?(A3(e),!0):!1}const Jt=typeof window!="undefined",kte=e=>typeof e=="string",Ew=()=>{};function Ste(e,t){function n(...s){e(()=>t.apply(this,s),{fn:t,thisArg:this,args:s})}return n}function Ite(e,t=!0,n=!0){let s=0,o,r=!n;const i=()=>{o&&(clearTimeout(o),o=void 0)};return l=>{const u=Xe(e),c=Date.now()-s;if(i(),u<=0)return s=Date.now(),l();c>u&&(s=Date.now(),r?r=!1:l()),t&&(o=setTimeout(()=>{s=Date.now(),n||(r=!0),i(),l()},u)),!n&&!o&&(o=setTimeout(()=>r=!0,u))}}var Ete=Object.defineProperty,Tte=Object.defineProperties,_te=Object.getOwnPropertyDescriptors,IN=Object.getOwnPropertySymbols,Nte=Object.prototype.hasOwnProperty,Ate=Object.prototype.propertyIsEnumerable,EN=(e,t,n)=>t in e?Ete(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dte=(e,t)=>{for(var n in t||(t={}))Nte.call(t,n)&&EN(e,n,t[n]);if(IN)for(var n of IN(t))Ate.call(t,n)&&EN(e,n,t[n]);return e},Rte=(e,t)=>Tte(e,_te(t));function TN(e,t){var n;const s=bo();return ka(()=>{s.value=e()},Rte(Dte({},t),{flush:(n=t==null?void 0:t.flush)!=null?n:"sync"})),Rp(s)}function lP(e,t=200,n=!0,s=!0){return Ste(Ite(t,n,s),e)}function kd(e,t,n={}){const{immediate:s=!0}=n,o=V(!1);let r=null;function i(){r&&(clearTimeout(r),r=null)}function a(){o.value=!1,i()}function l(...u){i(),o.value=!0,r=setTimeout(()=>{o.value=!1,r=null,e(...u)},Xe(t))}return s&&(o.value=!0,Jt&&l()),Tb(a),{isPending:o,start:l,stop:a}}function kh(e){var t;const n=Xe(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Lp=Jt?window:void 0,Mte=Jt?window.document:void 0;function Bs(...e){let t,n,s,o;if(kte(e[0])?([n,s,o]=e,t=Lp):[t,n,s,o]=e,!t)return Ew;let r=Ew;const i=Le(()=>Xe(t),l=>{r(),!!l&&(l.addEventListener(n,s,o),r=()=>{l.removeEventListener(n,s,o),r=Ew})},{immediate:!0,flush:"post"}),a=()=>{i(),r()};return Tb(a),a}function oC(e,t,n={}){const{window:s=Lp,ignore:o}=n;if(!s)return;const r=V(!0),a=[Bs(s,"click",u=>{const c=kh(e),d=u.composedPath();!c||c===u.target||d.includes(c)||!r.value||o&&o.length>0&&o.some(f=>{const h=kh(f);return h&&(u.target===h||d.includes(h))})||t(u)},{passive:!0,capture:!0}),Bs(s,"pointerdown",u=>{const c=kh(e);r.value=!!c&&!u.composedPath().includes(c)},{passive:!0})];return()=>a.forEach(u=>u())}const rC=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},iC="__vueuse_ssr_handlers__";rC[iC]=rC[iC]||{};rC[iC];function Ote(e,t,{window:n=Lp}={}){const s=V(""),o=O(()=>{var r;return kh(t)||((r=n==null?void 0:n.document)==null?void 0:r.documentElement)});return Le([o,()=>Xe(e)],([r,i])=>{r&&n&&(s.value=n.getComputedStyle(r).getPropertyValue(i))},{immediate:!0}),Le(s,r=>{var i;((i=o.value)==null?void 0:i.style)&&o.value.style.setProperty(Xe(e),r)}),s}function Fte({document:e=Mte}={}){if(!e)return V("visible");const t=V(e.visibilityState);return Bs(e,"visibilitychange",()=>{t.value=e.visibilityState}),t}var _N=Object.getOwnPropertySymbols,Pte=Object.prototype.hasOwnProperty,Lte=Object.prototype.propertyIsEnumerable,Bte=(e,t)=>{var n={};for(var s in e)Pte.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&_N)for(var s of _N(e))t.indexOf(s)<0&&Lte.call(e,s)&&(n[s]=e[s]);return n};function Jh(e,t,n={}){const s=n,{window:o=Lp}=s,r=Bte(s,["window"]);let i;const a=o&&"ResizeObserver"in o,l=()=>{i&&(i.disconnect(),i=void 0)},u=Le(()=>kh(e),d=>{l(),a&&o&&d&&(i=new o.ResizeObserver(t),i.observe(d,r))},{immediate:!0,flush:"post"}),c=()=>{l(),u()};return Tb(c),{isSupported:a,stop:c}}var NN,AN;Jt&&(window==null?void 0:window.navigator)&&((NN=window==null?void 0:window.navigator)==null?void 0:NN.platform)&&/iP(ad|hone|od)/.test((AN=window==null?void 0:window.navigator)==null?void 0:AN.platform);var zte=Object.defineProperty,DN=Object.getOwnPropertySymbols,Vte=Object.prototype.hasOwnProperty,Wte=Object.prototype.propertyIsEnumerable,RN=(e,t,n)=>t in e?zte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hte=(e,t)=>{for(var n in t||(t={}))Vte.call(t,n)&&RN(e,n,t[n]);if(DN)for(var n of DN(t))Wte.call(t,n)&&RN(e,n,t[n]);return e};const Ute={top:0,left:0,bottom:0,right:0,height:0,width:0};Hte({text:""},Ute);function jte({window:e=Lp}={}){if(!e)return V(!1);const t=V(e.document.hasFocus());return Bs(e,"blur",()=>{t.value=!1}),Bs(e,"focus",()=>{t.value=!0}),t}const Gte="Util",Ps=(e,t="")=>{let n=e;return t.split(".").map(s=>{n=n==null?void 0:n[s]}),n};function _v(e,t,n){let s=e,o,r;if(e&&Kt(e,t))o=t,r=s==null?void 0:s[t];else{t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");const i=t.split(".");let a=0;for(a;a<i.length-1&&!(!s&&!n);a++){const l=i[a];if(l in s)s=s[l];else{n&&So(Gte,"Please transfer a valid prop path to form item!");break}}o=i[a],r=s==null?void 0:s[i[a]]}return{o:s,k:o,v:r}}const Qh=()=>Math.floor(Math.random()*1e4),Kte=(e="")=>String(e).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),Ru=e=>!e&&e!==0?[]:Array.isArray(e)?e:[e],uP=function(){return Jt&&!!window.navigator.userAgent.match(/firefox/i)},qte=function(e){const t=["transform","transition","animation"],n=["ms-","webkit-"];return t.forEach(s=>{const o=e[s];s&&o&&n.forEach(r=>{e[r+s]=o})}),e},bi=e=>typeof e=="boolean",Sn=e=>typeof e=="number";function Tw(e){let t=!1;return function(...n){t||(t=!0,window.requestAnimationFrame(()=>{Reflect.apply(e,this,n),t=!1}))}}function ep(e){return e===void 0}function tp(e){return!!(!e&&e!==0||At(e)&&!e.length||cn(e)&&!Object.keys(e).length)}function cP(e){return e.reduce((t,n)=>{const s=Array.isArray(n)?cP(n):n;return t.concat(s)},[])}function MN(e){return Array.from(new Set(e))}function Ta(e){return Qt(e)?e:Sn(e)?`${e}px`:""}const Yte=(e,t)=>{var n;const s=[...new Set([...Object.keys(e),...Object.keys(t)])],o={};for(const r of s)o[r]=(n=t[r])!=null?n:e[r];return o},dP=V({});function uf(e){const t=Qe(PF,dP);return e?cn(t.value)&&Kt(t.value,e)?O(()=>t.value[e]):V(void 0):t}const fP=(e,t)=>{var n;const s=!!Wt(),o=s?uf():void 0,r=(n=t==null?void 0:t.provide)!=null?n:s?jt:void 0;if(!r)return;const i=O(()=>{const a=Xe(e);return o?Yte(o.value,a):a});return r(PF,i),dP.value=i.value,i},_b=xi({type:String,values:T2,required:!1}),Ss=(e,t={})=>{const n=V(void 0),s=t.prop?n:zF("size"),o=t.global?n:uf("size"),r=t.form?{size:void 0}:Qe(ar,void 0),i=t.formItem?{size:void 0}:Qe(Ai,void 0);return O(()=>s.value||Xe(e)||(i==null?void 0:i.size)||(r==null?void 0:r.size)||o.value||"default")},Bp=e=>{const t=zF("disabled"),n=Qe(ar,void 0);return O(()=>t.value||Xe(e)||(n==null?void 0:n.disabled)||!1)},Xte=e=>({focus:()=>{var t,n;(n=(t=e.value)==null?void 0:t.focus)==null||n.call(t)}}),cf=()=>{const e=Qe(ar,void 0),t=Qe(Ai,void 0);return{form:e,formItem:t}};var Zte=Pp,Jte=_l,Qte="[object Symbol]";function ene(e){return typeof e=="symbol"||Jte(e)&&Zte(e)==Qte}var Nb=ene,tne=Tl,nne=Nb,sne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,one=/^\w*$/;function rne(e,t){if(tne(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||nne(e)?!0:one.test(e)||!sne.test(e)||t!=null&&e in Object(t)}var ine=rne,hP=A2,ane="Expected a function";function B2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(ane);var n=function(){var s=arguments,o=t?t.apply(this,s):s[0],r=n.cache;if(r.has(o))return r.get(o);var i=e.apply(this,s);return n.cache=r.set(o,i)||r,i};return n.cache=new(B2.Cache||hP),n}B2.Cache=hP;var pP=B2,lne=pP,une=500;function cne(e){var t=lne(e,function(s){return n.size===une&&n.clear(),s}),n=t.cache;return t}var dne=cne,fne=dne,hne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pne=/\\(\\)?/g,gne=fne(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(hne,function(n,s,o,r){t.push(o?r.replace(pne,"$1"):s||n)}),t}),mne=gne;function vne(e,t){for(var n=-1,s=e==null?0:e.length,o=Array(s);++n<s;)o[n]=t(e[n],n,e);return o}var bne=vne,ON=sf,yne=bne,wne=Tl,$ne=Nb,Cne=1/0,FN=ON?ON.prototype:void 0,PN=FN?FN.toString:void 0;function gP(e){if(typeof e=="string")return e;if(wne(e))return yne(e,gP)+"";if($ne(e))return PN?PN.call(e):"";var t=e+"";return t=="0"&&1/e==-Cne?"-0":t}var xne=gP,kne=xne;function Sne(e){return e==null?"":kne(e)}var Ine=Sne,Ene=Tl,Tne=ine,_ne=mne,Nne=Ine;function Ane(e,t){return Ene(e)?e:Tne(e,t)?[e]:_ne(Nne(e))}var Dne=Ane,Rne=Nb,Mne=1/0;function One(e){if(typeof e=="string"||Rne(e))return e;var t=e+"";return t=="0"&&1/e==-Mne?"-0":t}var Fne=One,Pne=Dne,Lne=Fne;function Bne(e,t){t=Pne(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[Lne(t[n++])];return n&&n==s?e:void 0}var zne=Bne,Vne=zne;function Wne(e,t,n){var s=e==null?void 0:Vne(e,t);return s===void 0?n:s}var Hne=Wne,Une={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const jne=e=>(t,n)=>Gne(t,n,Xe(e)),Gne=(e,t,n)=>Hne(n,e,e).replace(/\{(\w+)\}/g,(s,o)=>{var r;return`${(r=t==null?void 0:t[o])!=null?r:`{${o}}`}`}),Kne=e=>{const t=O(()=>Xe(e).name),n=vs(e)?e:V(e);return{lang:t,locale:n,t:jne(e)}},Tn=()=>{const e=uf("locale");return Kne(O(()=>e.value||Une))};let zm;function qne(){var e;if(!Jt)return 0;if(zm!==void 0)return zm;const t=document.createElement("div");t.className="el-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const s=document.createElement("div");s.style.width="100%",t.appendChild(s);const o=s.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),zm=n-o,zm}const aC=function(e){return(e||"").split(" ").filter(t=>!!t.trim())},wn=function(e,t,n,s=!1){e&&t&&n&&(e==null||e.addEventListener(t,n,s))},qn=function(e,t,n,s=!1){e&&t&&n&&(e==null||e.removeEventListener(t,n,s))},Yne=function(e,t,n){const s=function(...o){n&&n.apply(this,o),qn(e,t,s)};wn(e,t,s)};function yi(e,t){if(!e||!t)return!1;if(t.indexOf(" ")!==-1)throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(e.getAttribute("class")||"").split(" ").includes(t)}function Zo(e,t){if(!e)return;let n=e.getAttribute("class")||"";const s=aC(n),o=(t||"").split(" ").filter(r=>!s.includes(r)&&!!r.trim());e.classList?e.classList.add(...o):(n+=` ${o.join(" ")}`,e.setAttribute("class",n))}function wo(e,t){if(!e||!t)return;const n=aC(t);let s=e.getAttribute("class")||"";if(e.classList){e.classList.remove(...n);return}n.forEach(r=>{s=s.replace(` ${r} `," ")});const o=aC(s).join(" ");e.setAttribute("class",o)}const Lr=function(e,t){var n;if(!Jt||!e||!t)return"";t=qr(t),t==="float"&&(t="cssFloat");try{const s=e.style[t];if(s)return s;const o=(n=document.defaultView)==null?void 0:n.getComputedStyle(e,"");return o?o[t]:""}catch{return e.style[t]}},Xne=(e,t)=>Jt?(t==null?Lr(e,"overflow"):t?Lr(e,"overflow-y"):Lr(e,"overflow-x")).match(/(scroll|auto|overlay)/):null,z2=(e,t)=>{if(!Jt)return;let n=e;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(Xne(n,t))return n;n=n.parentNode}return n},Zne=(e,t)=>{if(!Jt||!e||!t)return!1;const n=e.getBoundingClientRect();let s;return t instanceof Element?s=t.getBoundingClientRect():s={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<s.bottom&&n.bottom>s.top&&n.right>s.left&&n.left<s.right},LN=e=>{let t=0,n=e;for(;n;)t+=n.offsetTop,n=n.offsetParent;return t},Jne=(e,t)=>Math.abs(LN(e)-LN(t)),V2=e=>{let t,n;return e.type==="touchend"?(n=e.changedTouches[0].clientY,t=e.changedTouches[0].clientX):e.type.startsWith("touch")?(n=e.touches[0].clientY,t=e.touches[0].clientX):(n=e.clientY,t=e.clientX),{clientX:t,clientY:n}},Ls=(e,t,{checkForDefaultPrevented:n=!0}={})=>o=>{const r=e==null?void 0:e(o);if(n===!1||!r)return t==null?void 0:t(o)},BN=e=>t=>t.pointerType==="mouse"?e(t):void 0,mP=(...e)=>t=>{e.forEach(n=>{n.value=t})},vP=e=>{if(vs(e)||So("[useLockscreen]","You need to pass a ref param to this function"),!Jt||yi(document.body,"el-popup-parent--hidden"))return;let t=0,n=!1,s="0",o=0;const r=()=>{wo(document.body,"el-popup-parent--hidden"),n&&(document.body.style.paddingRight=s)};Le(e,i=>{if(!i){r();return}n=!yi(document.body,"el-popup-parent--hidden"),n&&(s=document.body.style.paddingRight,o=parseInt(Lr(document.body,"paddingRight"),10)),t=qne();const a=document.documentElement.clientHeight<document.body.scrollHeight,l=Lr(document.body,"overflowY");t>0&&(a||l==="scroll")&&n&&(document.body.style.paddingRight=`${o+t}px`),Zo(document.body,"el-popup-parent--hidden")}),A3(()=>r())},tt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Qne='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',ese=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,zN=e=>Array.from(e.querySelectorAll(Qne)).filter(t=>tse(t)&&ese(t)),tse=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Nv=function(e,t,...n){let s;t.includes("mouse")||t.includes("click")?s="MouseEvents":t.includes("key")?s="KeyboardEvent":s="HTMLEvents";const o=document.createEvent(s);return o.initEvent(t,...n),e.dispatchEvent(o),e},bP=e=>!e.getAttribute("aria-owns"),yP=(e,t,n)=>{const{parentNode:s}=e;if(!s)return null;const o=s.querySelectorAll(n),r=Array.prototype.indexOf.call(o,e);return o[r+t]||null},Av=e=>{!e||(e.focus(),!bP(e)&&e.click())},dd=[],nse=e=>{dd.length!==0&&e.code===tt.esc&&(e.stopPropagation(),dd[dd.length-1].handleClose())},wP=(e,t)=>{Le(t,n=>{n?dd.push(e):dd.splice(dd.findIndex(s=>s===e),1)})};Jt&&Bs(document,"keydown",nse);const $P=e=>{const t={[e]:xi({type:et(Boolean),default:null}),[`onUpdate:${e}`]:xi({type:et(Function)})},n=[`update:${e}`];return{useModelToggle:({indicator:o,shouldHideWhenRouteChanges:r,shouldProceed:i,onShow:a,onHide:l})=>{const u=Wt(),c=u.props,{emit:d}=u,f=`update:${e}`,h=O(()=>Vt(c[`onUpdate:${e}`])),p=O(()=>c[e]===null),g=()=>{o.value!==!0&&(o.value=!0,Vt(a)&&a())},m=()=>{o.value!==!1&&(o.value=!1,Vt(l)&&l())},v=()=>{if(c.disabled===!0||Vt(i)&&!i())return;const w=h.value&&Jt;w&&d(f,!0),(p.value||!w)&&g()},b=()=>{if(c.disabled===!0||!Jt)return;const w=h.value&&Jt;w&&d(f,!1),(p.value||!w)&&m()},$=w=>{!bi(w)||(c.disabled&&w?h.value&&d(f,!1):o.value!==w&&(w?g():m()))},y=()=>{o.value?b():v()};return Le(()=>c[e],$),r&&u.appContext.config.globalProperties.$route!==void 0&&Le(()=>dt({},u.proxy.$route),()=>{r.value&&o.value&&b()}),Ft(()=>{$(c[e])}),{hide:b,show:v,toggle:y}},useModelToggleProps:t,useModelToggleEmits:n}};$P("modelValue");const sse=(e,t,n)=>{const s=r=>{n(r)&&r.stopImmediatePropagation()};let o;Le(()=>e.value,r=>{r?o=Bs(document,t,s,!0):o==null||o()},{immediate:!0})},CP=(e,t)=>{let n;Le(()=>e.value,s=>{var o,r;s?(n=document.activeElement,vs(t)&&((r=(o=t.value).focus)==null||r.call(o))):n.focus()})},xP=e=>{if(!e)return{onClick:un,onMousedown:un,onMouseup:un};let t=!1,n=!1;return{onClick:i=>{t&&n&&e(i),t=n=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{n=i.target===i.currentTarget}}},ose=(e,t=0)=>{if(t===0)return e;const n=V(!1);let s=0;const o=()=>{s&&clearTimeout(s),s=window.setTimeout(()=>{n.value=e.value},t)};return Ft(o),Le(()=>e.value,r=>{r?o():n.value=r}),n};function rse(){let e;const t=(s,o)=>{n(),e=window.setTimeout(s,o)},n=()=>window.clearTimeout(e);return Tb(()=>n()),{registerTimeout:t,cancelTimeout:n}}const ise={prefix:Math.floor(Math.random()*1e4),current:0},ase=Symbol("elIdInjection"),kP=e=>{const t=Qe(ase,ise);return O(()=>Xe(e)||`el-id-${t.prefix}-${t.current++}`)},lse=e=>{const t=n=>{const s=n;s.key===tt.esc&&(e==null||e(s))};Ft(()=>{wn(document,"keydown",t)}),us(()=>{qn(document,"keydown",t)})};let VN;const SP=`el-popper-container-${Qh()}`,use=`#${SP}`,cse=()=>{Mp(()=>{if(!!Jt&&!VN){const e=document.createElement("div");e.id=SP,document.body.appendChild(e),VN=e}})},dse=yt({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200}}),fse=({showAfter:e,hideAfter:t,open:n,close:s})=>{const{registerTimeout:o}=rse();return{onOpen:()=>{o(()=>{n()},Xe(e))},onClose:()=>{o(()=>{s()},Xe(t))}}},IP=Symbol("elForwardRef"),hse=e=>{jt(IP,{setForwardRef:n=>{e.value=n}})},pse=e=>({mounted(t){e(t)},updated(t){e(t)},unmounted(){e(null)}}),gse="el",mse="is-",Ql=(e,t,n,s,o)=>{let r=`${e}-${t}`;return n&&(r+=`-${n}`),s&&(r+=`__${s}`),o&&(r+=`--${o}`),r},Mt=e=>{const t=O(()=>uf("namespace").value||gse);return{namespace:t,b:(c="")=>Ql(Xe(t),e,c,"",""),e:c=>c?Ql(Xe(t),e,"",c,""):"",m:c=>c?Ql(Xe(t),e,"","",c):"",be:(c,d)=>c&&d?Ql(Xe(t),e,c,d,""):"",em:(c,d)=>c&&d?Ql(Xe(t),e,"",c,d):"",bm:(c,d)=>c&&d?Ql(Xe(t),e,c,"",d):"",bem:(c,d,f)=>c&&d&&f?Ql(Xe(t),e,c,d,f):"",is:(c,d=!0)=>d?`${mse}${c}`:""}},vse=e=>{e.preventDefault(),e.stopPropagation()},bse=()=>{ys==null||ys.doOnModalClick()};let lC=!1;const WN=function(){if(!Jt)return;let e=ys.modalDom;return e?lC=!0:(lC=!1,e=document.createElement("div"),ys.modalDom=e,wn(e,"touchmove",vse),wn(e,"click",bse)),e},Vm={},ys={modalFade:!0,modalDom:void 0,globalInitialZIndex:2e3,zIndex:0,getInitialZIndex(){var e;return Wt()?(e=uf("zIndex").value)!=null?e:this.globalInitialZIndex:this.globalInitialZIndex},getInstance(e){return Vm[e]},register(e,t){e&&t&&(Vm[e]=t)},deregister(e){e&&(Vm[e]=null,delete Vm[e])},nextZIndex(){return this.getInitialZIndex()+ ++this.zIndex},modalStack:[],doOnModalClick(){const e=ys.modalStack[ys.modalStack.length-1];if(!e)return;const t=ys.getInstance(e.id);t&&t.closeOnClickModal.value&&t.close()},openModal(e,t,n,s,o){if(!Jt||!e||t===void 0)return;this.modalFade=o;const r=this.modalStack;for(let a=0,l=r.length;a<l;a++)if(r[a].id===e)return;const i=WN();Zo(i,"v-modal"),this.modalFade&&!lC&&Zo(i,"v-modal-enter"),s&&s.trim().split(/\s+/).forEach(l=>Zo(i,l)),setTimeout(()=>{wo(i,"v-modal-enter")},200),n&&n.parentNode&&n.parentNode.nodeType!==11?n.parentNode.appendChild(i):document.body.appendChild(i),t&&(i.style.zIndex=String(t)),i.tabIndex=0,i.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:s})},closeModal(e){const t=this.modalStack,n=WN();if(t.length>0){const s=t[t.length-1];if(s.id===e)s.modalClass&&s.modalClass.trim().split(/\s+/).forEach(r=>wo(n,r)),t.pop(),t.length>0&&(n.style.zIndex=`${t[t.length-1].zIndex}`);else for(let o=t.length-1;o>=0;o--)if(t[o].id===e){t.splice(o,1);break}}t.length===0&&(this.modalFade&&Zo(n,"v-modal-leave"),setTimeout(()=>{t.length===0&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",ys.modalDom=void 0),wo(n,"v-modal-leave")},200))}},yse=function(){if(!!Jt&&ys.modalStack.length>0){const e=ys.modalStack[ys.modalStack.length-1];return e?ys.getInstance(e.id):void 0}};Jt&&window.addEventListener("keydown",function(e){if(e.code===tt.esc){const t=yse();t&&t.closeOnPressEscape.value&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}});const wse="1.3.0-beta.10",HN=Symbol("INSTALLED_KEY"),$se=(e=[])=>({version:wse,install:(n,s={})=>{n[HN]||(n[HN]=!0,e.forEach(o=>n.use(o)),fP(s,n),Le(()=>Xe(s).zIndex,()=>{const o=Xe(s).zIndex;Sn(o)&&(ys.globalInitialZIndex=o)},{immediate:!0}))}}),Gt=(e,t)=>{if(e.install=n=>{for(const s of[e,...Object.values(t!=null?t:{})])n.component(s.name,s)},t)for(const[n,s]of Object.entries(t))e[n]=s;return e},EP=(e,t)=>(e.install=n=>{n.config.globalProperties[t]=e},e),cs=e=>(e.install=un,e),Cse=yt({zIndex:{type:et([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),xse={scroll:({scrollTop:e,fixed:t})=>typeof e=="number"&&typeof t=="boolean",change:e=>typeof e=="boolean"};var Ge=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};const kse=$e({name:"ElAffix",props:Cse,emits:xse,setup(e,{emit:t}){const n=Mt("affix"),s=bo(),o=bo(),r=bo(),i=En({fixed:!1,height:0,width:0,scrollTop:0,clientHeight:0,transform:0}),a=O(()=>({height:i.fixed?`${i.height}px`:"",width:i.fixed?`${i.width}px`:""})),l=O(()=>{if(!i.fixed)return;const d=e.offset?`${e.offset}px`:0,f=i.transform?`translateY(${i.transform}px)`:"";return{height:`${i.height}px`,width:`${i.width}px`,top:e.position==="top"?d:"",bottom:e.position==="bottom"?d:"",transform:f,zIndex:e.zIndex}}),u=()=>{if(!o.value||!s.value||!r.value)return;const d=o.value.getBoundingClientRect(),f=s.value.getBoundingClientRect();if(i.height=d.height,i.width=d.width,i.scrollTop=r.value instanceof Window?document.documentElement.scrollTop:r.value.scrollTop||0,i.clientHeight=document.documentElement.clientHeight,e.position==="top")if(e.target){const h=f.bottom-e.offset-i.height;i.fixed=e.offset>d.top&&f.bottom>0,i.transform=h<0?h:0}else i.fixed=e.offset>d.top;else if(e.target){const h=i.clientHeight-f.top-e.offset-i.height;i.fixed=i.clientHeight-e.offset<d.bottom&&i.clientHeight>f.top,i.transform=h<0?-h:0}else i.fixed=i.clientHeight-e.offset<d.bottom},c=()=>{u(),t("scroll",{scrollTop:i.scrollTop,fixed:i.fixed})};return Le(()=>i.fixed,()=>{t("change",i.fixed)}),Ft(()=>{var d;if(e.target){if(s.value=(d=document.querySelector(e.target))!=null?d:void 0,!s.value)throw new Error(`Target is not existed: ${e.target}`)}else s.value=document.documentElement;r.value=z2(o.value,!0)}),Bs(r,"scroll",c),Jh(o,()=>u()),Jh(s,()=>u()),{ns:n,root:o,state:i,rootStyle:a,affixStyle:l,update:u}}});function Sse(e,t,n,s,o,r){return R(),H("div",{ref:"root",class:Q(e.ns.b()),style:rt(e.rootStyle)},[K("div",{class:Q({[e.ns.m("fixed")]:e.state.fixed}),style:rt(e.affixStyle)},[Pe(e.$slots,"default")],6)],6)}var Ise=Ge(kse,[["render",Sse]]);const Ese=Gt(Ise),Tse=yt({size:{type:et([Number,String])},color:{type:String}}),_se=$e({name:"ElIcon",inheritAttrs:!1,props:Tse,setup(e){const t=Mt("icon"),n=O(()=>!e.size&&!e.color?{}:{fontSize:ep(e.size)?void 0:Ta(e.size),"--color":e.color});return{ns:t,style:n}}});function Nse(e,t,n,s,o,r){return R(),H("i",uo({class:e.ns.b(),style:e.style},e.$attrs),[Pe(e.$slots,"default")],16)}var Ase=Ge(_se,[["render",Nse]]);const Pt=Gt(Ase);var bn=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};const Dse=$e({name:"ArrowDown"}),Rse={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Mse=K("path",{fill:"currentColor",d:"M831.872 340.864L512 652.672 192.128 340.864a30.592 30.592 0 00-42.752 0 29.12 29.12 0 000 41.6L489.664 714.24a32 32 0 0044.672 0l340.288-331.712a29.12 29.12 0 000-41.728 30.592 30.592 0 00-42.752 0z"},null,-1),Ose=[Mse];function Fse(e,t,n,s,o,r){return R(),H("svg",Rse,Ose)}var hc=bn(Dse,[["render",Fse]]);const Pse=$e({name:"ArrowLeft"}),Lse={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Bse=K("path",{fill:"currentColor",d:"M609.408 149.376L277.76 489.6a32 32 0 000 44.672l331.648 340.352a29.12 29.12 0 0041.728 0 30.592 30.592 0 000-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 000-42.688 29.12 29.12 0 00-41.728 0z"},null,-1),zse=[Bse];function Vse(e,t,n,s,o,r){return R(),H("svg",Lse,zse)}var pc=bn(Pse,[["render",Vse]]);const Wse=$e({name:"ArrowRight"}),Hse={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Use=K("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 000 42.752L652.736 512 340.864 831.872a30.592 30.592 0 000 42.752 29.12 29.12 0 0041.728 0L714.24 534.336a32 32 0 000-44.672L382.592 149.376a29.12 29.12 0 00-41.728 0z"},null,-1),jse=[Use];function Gse(e,t,n,s,o,r){return R(),H("svg",Hse,jse)}var ei=bn(Wse,[["render",Gse]]);const Kse=$e({name:"ArrowUp"}),qse={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Yse=K("path",{fill:"currentColor",d:"M488.832 344.32l-339.84 356.672a32 32 0 000 44.16l.384.384a29.44 29.44 0 0042.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0042.688 0l.384-.384a32 32 0 000-44.16L535.168 344.32a32 32 0 00-46.336 0z"},null,-1),Xse=[Yse];function Zse(e,t,n,s,o,r){return R(),H("svg",qse,Xse)}var zp=bn(Kse,[["render",Zse]]);const Jse=$e({name:"Back"}),Qse={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},eoe=K("path",{fill:"currentColor",d:"M224 480h640a32 32 0 110 64H224a32 32 0 010-64z"},null,-1),toe=K("path",{fill:"currentColor",d:"M237.248 512l265.408 265.344a32 32 0 01-45.312 45.312l-288-288a32 32 0 010-45.312l288-288a32 32 0 1145.312 45.312L237.248 512z"},null,-1),noe=[eoe,toe];function soe(e,t,n,s,o,r){return R(),H("svg",Qse,noe)}var ooe=bn(Jse,[["render",soe]]);const roe=$e({name:"Calendar"}),ioe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},aoe=K("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 11-64 0v-32H320v32a32 32 0 01-64 0v-32H128v128h768v64H128zm192-256h384V96a32 32 0 1164 0v32h160a32 32 0 0132 32v768a32 32 0 01-32 32H96a32 32 0 01-32-32V160a32 32 0 0132-32h160V96a32 32 0 0164 0v32zm-32 384h64a32 32 0 010 64h-64a32 32 0 010-64zm0 192h64a32 32 0 110 64h-64a32 32 0 110-64zm192-192h64a32 32 0 010 64h-64a32 32 0 010-64zm0 192h64a32 32 0 110 64h-64a32 32 0 110-64zm192-192h64a32 32 0 110 64h-64a32 32 0 110-64zm0 192h64a32 32 0 110 64h-64a32 32 0 110-64z"},null,-1),loe=[aoe];function uoe(e,t,n,s,o,r){return R(),H("svg",ioe,loe)}var coe=bn(roe,[["render",uoe]]);const doe=$e({name:"CaretRight"}),foe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},hoe=K("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1),poe=[hoe];function goe(e,t,n,s,o,r){return R(),H("svg",foe,poe)}var TP=bn(doe,[["render",goe]]);const moe=$e({name:"CaretTop"}),voe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},boe=K("path",{fill:"currentColor",d:"M512 320L192 704h639.936z"},null,-1),yoe=[boe];function woe(e,t,n,s,o,r){return R(),H("svg",voe,yoe)}var $oe=bn(moe,[["render",woe]]);const Coe=$e({name:"Check"}),xoe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},koe=K("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 10-45.248 45.248l256 256 512-512a32 32 0 00-45.248-45.248L406.592 706.944z"},null,-1),Soe=[koe];function Ioe(e,t,n,s,o,r){return R(),H("svg",xoe,Soe)}var Sd=bn(Coe,[["render",Ioe]]);const Eoe=$e({name:"CircleCheckFilled"}),Toe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_oe=K("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm-55.808 536.384l-99.52-99.584a38.4 38.4 0 10-54.336 54.336l126.72 126.72a38.272 38.272 0 0054.336 0l262.4-262.464a38.4 38.4 0 10-54.272-54.336L456.192 600.384z"},null,-1),Noe=[_oe];function Aoe(e,t,n,s,o,r){return R(),H("svg",Toe,Noe)}var Doe=bn(Eoe,[["render",Aoe]]);const Roe=$e({name:"CircleCheck"}),Moe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ooe=K("path",{fill:"currentColor",d:"M512 896a384 384 0 100-768 384 384 0 000 768zm0 64a448 448 0 110-896 448 448 0 010 896z"},null,-1),Foe=K("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0145.312 45.312l-288 288a32 32 0 01-45.312 0l-160-160a32 32 0 1145.312-45.312L480 626.752l265.344-265.408z"},null,-1),Poe=[Ooe,Foe];function Loe(e,t,n,s,o,r){return R(),H("svg",Moe,Poe)}var w0=bn(Roe,[["render",Loe]]);const Boe=$e({name:"CircleCloseFilled"}),zoe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Voe=K("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm0 393.664L407.936 353.6a38.4 38.4 0 10-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1054.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1054.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 10-54.336-54.336L512 457.664z"},null,-1),Woe=[Voe];function Hoe(e,t,n,s,o,r){return R(),H("svg",zoe,Woe)}var W2=bn(Boe,[["render",Hoe]]);const Uoe=$e({name:"CircleClose"}),joe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Goe=K("path",{fill:"currentColor",d:"M466.752 512l-90.496-90.496a32 32 0 0145.248-45.248L512 466.752l90.496-90.496a32 32 0 1145.248 45.248L557.248 512l90.496 90.496a32 32 0 11-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 01-45.248-45.248L466.752 512z"},null,-1),Koe=K("path",{fill:"currentColor",d:"M512 896a384 384 0 100-768 384 384 0 000 768zm0 64a448 448 0 110-896 448 448 0 010 896z"},null,-1),qoe=[Goe,Koe];function Yoe(e,t,n,s,o,r){return R(),H("svg",joe,qoe)}var _a=bn(Uoe,[["render",Yoe]]);const Xoe=$e({name:"Clock"}),Zoe={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Joe=K("path",{fill:"currentColor",d:"M512 896a384 384 0 100-768 384 384 0 000 768zm0 64a448 448 0 110-896 448 448 0 010 896z"},null,-1),Qoe=K("path",{fill:"currentColor",d:"M480 256a32 32 0 0132 32v256a32 32 0 01-64 0V288a32 32 0 0132-32z"},null,-1),ere=K("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32z"},null,-1),tre=[Joe,Qoe,ere];function nre(e,t,n,s,o,r){return R(),H("svg",Zoe,tre)}var _P=bn(Xoe,[["render",nre]]);const sre=$e({name:"Close"}),ore={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},rre=K("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88 259.712 214.592a31.936 31.936 0 00-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1045.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0045.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 10-45.12-45.184z"},null,-1),ire=[rre];function are(e,t,n,s,o,r){return R(),H("svg",ore,ire)}var ki=bn(sre,[["render",are]]);const lre=$e({name:"DArrowLeft"}),ure={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},cre=K("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0141.728 0 30.592 30.592 0 010 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 01-.512 43.264 29.12 29.12 0 01-41.216-.512L197.76 534.272a32 32 0 010-44.672l331.648-340.224zm256 0a29.12 29.12 0 0141.728 0 30.592 30.592 0 010 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 01-.512 43.264 29.12 29.12 0 01-41.216-.512L453.76 534.272a32 32 0 010-44.672l331.648-340.224z"},null,-1),dre=[cre];function fre(e,t,n,s,o,r){return R(),H("svg",ure,dre)}var Ab=bn(lre,[["render",fre]]);const hre=$e({name:"DArrowRight"}),pre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},gre=K("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0141.728.064L826.24 489.664a32 32 0 010 44.672L494.592 874.624a29.12 29.12 0 01-41.728 0 30.592 30.592 0 010-42.752L764.736 512 452.864 192a30.592 30.592 0 010-42.688zm-256 0a29.12 29.12 0 0141.728.064L570.24 489.664a32 32 0 010 44.672L238.592 874.624a29.12 29.12 0 01-41.728 0 30.592 30.592 0 010-42.752L508.736 512 196.864 192a30.592 30.592 0 010-42.688z"},null,-1),mre=[gre];function vre(e,t,n,s,o,r){return R(),H("svg",pre,mre)}var Db=bn(hre,[["render",vre]]);const bre=$e({name:"Delete"}),yre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},wre=K("path",{fill:"currentColor",d:"M160 256H96a32 32 0 010-64h256V95.936a32 32 0 0132-32h256a32 32 0 0132 32V192h256a32 32 0 110 64h-64v672a32 32 0 01-32 32H192a32 32 0 01-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 01-32-32V416a32 32 0 0164 0v320a32 32 0 01-32 32zm192 0a32 32 0 01-32-32V416a32 32 0 0164 0v320a32 32 0 01-32 32z"},null,-1),$re=[wre];function Cre(e,t,n,s,o,r){return R(),H("svg",yre,$re)}var xre=bn(bre,[["render",Cre]]);const kre=$e({name:"Document"}),Sre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Ire=K("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 01-32 32H160a32 32 0 01-32-32V96a32 32 0 0132-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"},null,-1),Ere=[Ire];function Tre(e,t,n,s,o,r){return R(),H("svg",Sre,Ere)}var _re=bn(kre,[["render",Tre]]);const Nre=$e({name:"FullScreen"}),Are={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Dre=K("path",{fill:"currentColor",d:"M160 96.064l192 .192a32 32 0 010 64l-192-.192V352a32 32 0 01-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1164 0v191.936l192-.192a32 32 0 110 64l-192 .192zM864 96.064V96h64v256a32 32 0 11-64 0V160.064l-192 .192a32 32 0 110-64l192-.192zm0 831.872l-192-.192a32 32 0 010-64l192 .192V672a32 32 0 1164 0v256h-64v-.064z"},null,-1),Rre=[Dre];function Mre(e,t,n,s,o,r){return R(),H("svg",Are,Rre)}var Ore=bn(Nre,[["render",Mre]]);const Fre=$e({name:"InfoFilled"}),Pre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Lre=K("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896.064A448 448 0 01512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 01-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 017.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),Bre=[Lre];function zre(e,t,n,s,o,r){return R(),H("svg",Pre,Bre)}var H2=bn(Fre,[["render",zre]]);const Vre=$e({name:"Loading"}),Wre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Hre=K("path",{fill:"currentColor",d:"M512 64a32 32 0 0132 32v192a32 32 0 01-64 0V96a32 32 0 0132-32zm0 640a32 32 0 0132 32v192a32 32 0 11-64 0V736a32 32 0 0132-32zm448-192a32 32 0 01-32 32H736a32 32 0 110-64h192a32 32 0 0132 32zm-640 0a32 32 0 01-32 32H96a32 32 0 010-64h192a32 32 0 0132 32zM195.2 195.2a32 32 0 0145.248 0L376.32 331.008a32 32 0 01-45.248 45.248L195.2 240.448a32 32 0 010-45.248zm452.544 452.544a32 32 0 0145.248 0L828.8 783.552a32 32 0 01-45.248 45.248L647.744 692.992a32 32 0 010-45.248zM828.8 195.264a32 32 0 010 45.184L692.992 376.32a32 32 0 01-45.248-45.248l135.808-135.808a32 32 0 0145.248 0zm-452.544 452.48a32 32 0 010 45.248L240.448 828.8a32 32 0 01-45.248-45.248l135.808-135.808a32 32 0 0145.248 0z"},null,-1),Ure=[Hre];function jre(e,t,n,s,o,r){return R(),H("svg",Wre,Ure)}var Oa=bn(Vre,[["render",jre]]);const Gre=$e({name:"Minus"}),Kre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},qre=K("path",{fill:"currentColor",d:"M128 544h768a32 32 0 100-64H128a32 32 0 000 64z"},null,-1),Yre=[qre];function Xre(e,t,n,s,o,r){return R(),H("svg",Kre,Yre)}var Zre=bn(Gre,[["render",Xre]]);const Jre=$e({name:"MoreFilled"}),Qre={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},eie=K("path",{fill:"currentColor",d:"M176 416a112 112 0 110 224 112 112 0 010-224zm336 0a112 112 0 110 224 112 112 0 010-224zm336 0a112 112 0 110 224 112 112 0 010-224z"},null,-1),tie=[eie];function nie(e,t,n,s,o,r){return R(),H("svg",Qre,tie)}var sie=bn(Jre,[["render",nie]]);const oie=$e({name:"More"}),rie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},iie=K("path",{fill:"currentColor",d:"M176 416a112 112 0 100 224 112 112 0 000-224m0 64a48 48 0 110 96 48 48 0 010-96zm336-64a112 112 0 110 224 112 112 0 010-224zm0 64a48 48 0 100 96 48 48 0 000-96zm336-64a112 112 0 110 224 112 112 0 010-224zm0 64a48 48 0 100 96 48 48 0 000-96z"},null,-1),aie=[iie];function lie(e,t,n,s,o,r){return R(),H("svg",rie,aie)}var uie=bn(oie,[["render",lie]]);const cie=$e({name:"Plus"}),die={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},fie=K("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0164 0v352h352a32 32 0 110 64H544v352a32 32 0 11-64 0V544H128a32 32 0 010-64h352z"},null,-1),hie=[fie];function pie(e,t,n,s,o,r){return R(),H("svg",die,hie)}var NP=bn(cie,[["render",pie]]);const gie=$e({name:"QuestionFilled"}),mie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},vie=K("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 00-38.72 14.784 49.408 49.408 0 00-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 00523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0016.192-38.72 51.968 51.968 0 00-15.488-38.016 55.936 55.936 0 00-39.424-14.784z"},null,-1),bie=[vie];function yie(e,t,n,s,o,r){return R(),H("svg",mie,bie)}var wie=bn(gie,[["render",yie]]);const $ie=$e({name:"RefreshLeft"}),Cie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},xie=K("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 010 64H232.96a32 32 0 01-32-32V179.712a32 32 0 0164 0v50.56a384 384 0 01643.84 282.88 384 384 0 01-383.936 384 384 384 0 01-384-384h64a320 320 0 10640 0 320 320 0 00-555.712-216.448z"},null,-1),kie=[xie];function Sie(e,t,n,s,o,r){return R(),H("svg",Cie,kie)}var Iie=bn($ie,[["render",Sie]]);const Eie=$e({name:"RefreshRight"}),Tie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},_ie=K("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1164 0v149.056a32 32 0 01-32 32H667.52a32 32 0 110-64h92.992A320 320 0 10524.8 833.152a320 320 0 00320-320h64a384 384 0 01-384 384 384 384 0 01-384-384 384 384 0 01643.712-282.88z"},null,-1),Nie=[_ie];function Aie(e,t,n,s,o,r){return R(),H("svg",Tie,Nie)}var Die=bn(Eie,[["render",Aie]]);const Rie=$e({name:"ScaleToOriginal"}),Mie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Oie=K("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0160.236 60.235v481.883a60.235 60.235 0 01-60.236 60.235H210.824a60.235 60.235 0 01-60.236-60.235V240.94a60.235 60.235 0 0160.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0090.353 240.94v481.883a120.47 120.47 0 00120.47 120.47h602.353a120.47 120.47 0 00120.471-120.47V240.94a120.47 120.47 0 00-120.47-120.47zm-120.47 180.705a30.118 30.118 0 00-30.118 30.118v301.177a30.118 30.118 0 0060.236 0V331.294a30.118 30.118 0 00-30.118-30.118zm-361.412 0a30.118 30.118 0 00-30.118 30.118v301.177a30.118 30.118 0 1060.236 0V331.294a30.118 30.118 0 00-30.118-30.118zM512 361.412a30.118 30.118 0 00-30.118 30.117v30.118a30.118 30.118 0 0060.236 0V391.53A30.118 30.118 0 00512 361.412zM512 512a30.118 30.118 0 00-30.118 30.118v30.117a30.118 30.118 0 0060.236 0v-30.117A30.118 30.118 0 00512 512z"},null,-1),Fie=[Oie];function Pie(e,t,n,s,o,r){return R(),H("svg",Mie,Fie)}var Lie=bn(Rie,[["render",Pie]]);const Bie=$e({name:"Search"}),zie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Vie=K("path",{fill:"currentColor",d:"M795.904 750.72l124.992 124.928a32 32 0 01-45.248 45.248L750.656 795.904a416 416 0 1145.248-45.248zM480 832a352 352 0 100-704 352 352 0 000 704z"},null,-1),Wie=[Vie];function Hie(e,t,n,s,o,r){return R(),H("svg",zie,Wie)}var Uie=bn(Bie,[["render",Hie]]);const jie=$e({name:"StarFilled"}),Gie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Kie=K("path",{fill:"currentColor",d:"M283.84 867.84L512 747.776l228.16 119.936a6.4 6.4 0 009.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 00-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 00-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 00-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 009.28 6.72z"},null,-1),qie=[Kie];function Yie(e,t,n,s,o,r){return R(),H("svg",Gie,qie)}var oh=bn(jie,[["render",Yie]]);const Xie=$e({name:"Star"}),Zie={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Jie=K("path",{fill:"currentColor",d:"M512 747.84l228.16 119.936a6.4 6.4 0 009.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 00-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 00-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 00-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 009.28 6.72L512 747.84zM313.6 924.48a70.4 70.4 0 01-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 01128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 01126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0139.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 01-102.144 74.24L512 820.096l-198.4 104.32z"},null,-1),Qie=[Jie];function eae(e,t,n,s,o,r){return R(),H("svg",Zie,Qie)}var AP=bn(Xie,[["render",eae]]);const tae=$e({name:"SuccessFilled"}),nae={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},sae=K("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm-55.808 536.384l-99.52-99.584a38.4 38.4 0 10-54.336 54.336l126.72 126.72a38.272 38.272 0 0054.336 0l262.4-262.464a38.4 38.4 0 10-54.272-54.336L456.192 600.384z"},null,-1),oae=[sae];function rae(e,t,n,s,o,r){return R(),H("svg",nae,oae)}var DP=bn(tae,[["render",rae]]);const iae=$e({name:"View"}),aae={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},lae=K("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 110 448 224 224 0 010-448zm0 64a160.192 160.192 0 00-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),uae=[lae];function cae(e,t,n,s,o,r){return R(),H("svg",aae,uae)}var dae=bn(iae,[["render",cae]]);const fae=$e({name:"WarningFilled"}),hae={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},pae=K("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm0 192a58.432 58.432 0 00-58.24 63.744l23.36 256.384a35.072 35.072 0 0069.76 0l23.296-256.384A58.432 58.432 0 00512 256zm0 512a51.2 51.2 0 100-102.4 51.2 51.2 0 000 102.4z"},null,-1),gae=[pae];function mae(e,t,n,s,o,r){return R(),H("svg",hae,gae)}var np=bn(fae,[["render",mae]]);const vae=$e({name:"ZoomIn"}),bae={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},yae=K("path",{fill:"currentColor",d:"M795.904 750.72l124.992 124.928a32 32 0 01-45.248 45.248L750.656 795.904a416 416 0 1145.248-45.248zM480 832a352 352 0 100-704 352 352 0 000 704zm-32-384v-96a32 32 0 0164 0v96h96a32 32 0 010 64h-96v96a32 32 0 01-64 0v-96h-96a32 32 0 010-64h96z"},null,-1),wae=[yae];function $ae(e,t,n,s,o,r){return R(),H("svg",bae,wae)}var RP=bn(vae,[["render",$ae]]);const Cae=$e({name:"ZoomOut"}),xae={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},kae=K("path",{fill:"currentColor",d:"M795.904 750.72l124.992 124.928a32 32 0 01-45.248 45.248L750.656 795.904a416 416 0 1145.248-45.248zM480 832a352 352 0 100-704 352 352 0 000 704zM352 448h256a32 32 0 010 64H352a32 32 0 010-64z"},null,-1),Sae=[kae];function Iae(e,t,n,s,o,r){return R(),H("svg",xae,Sae)}var Eae=bn(Cae,[["render",Iae]]);const Tae={Close:ki},Rb={Close:ki,SuccessFilled:DP,InfoFilled:H2,WarningFilled:np,CircleCloseFilled:W2},Na={success:DP,warning:np,error:W2,info:H2},MP={validating:Oa,success:w0,error:_a},_ae=["light","dark"],Nae=yt({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:yY(Na),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:_ae,default:"light"}}),Aae={close:e=>e instanceof MouseEvent},Dae=$e({name:"ElAlert",components:dt({ElIcon:Pt},Rb),props:Nae,emits:Aae,setup(e,{emit:t,slots:n}){const s=Mt("alert"),o=V(!0),r=O(()=>Na[e.type]||Na.info),i=O(()=>e.description||n.default?s.is("big"):""),a=O(()=>e.description||n.default?s.is("bold"):"");return{ns:s,visible:o,iconComponent:r,isBigIcon:i,isBoldTitle:a,close:u=>{o.value=!1,t("close",u)}}}});function Rae(e,t,n,s,o,r){const i=de("el-icon"),a=de("close");return R(),ke(ks,{name:"el-alert-fade"},{default:ce(()=>[Ct(K("div",{class:Q([e.ns.b(),e.ns.m(e.type),e.ns.is("center",e.center),e.ns.is(e.effect)]),role:"alert"},[e.showIcon&&e.iconComponent?(R(),ke(i,{key:0,class:Q([e.ns.e("icon"),e.isBigIcon])},{default:ce(()=>[(R(),ke(on(e.iconComponent)))]),_:1},8,["class"])):me("v-if",!0),K("div",{class:Q(e.ns.e("content"))},[e.title||e.$slots.title?(R(),H("span",{key:0,class:Q([e.ns.e("title"),e.isBoldTitle])},[Pe(e.$slots,"title",{},()=>[Zt(ze(e.title),1)])],2)):me("v-if",!0),e.$slots.default||e.description?(R(),H("p",{key:1,class:Q(e.ns.e("description"))},[Pe(e.$slots,"default",{},()=>[Zt(ze(e.description),1)])],2)):me("v-if",!0),e.closable?(R(),H(ct,{key:2},[e.closeText?(R(),H("div",{key:0,class:Q([e.ns.e("closebtn"),e.ns.is("customed")]),onClick:t[0]||(t[0]=(...l)=>e.close&&e.close(...l))},ze(e.closeText),3)):(R(),ke(i,{key:1,class:Q(e.ns.e("closebtn")),onClick:e.close},{default:ce(()=>[pe(a)]),_:1},8,["class","onClick"]))],2112)):me("v-if",!0)],2)],2),[[sn,e.visible]])]),_:3})}var Mae=Ge(Dae,[["render",Rae]]);const Oae=Gt(Mae);var Fae=Di,Pae=function(){return Fae.Date.now()},Lae=Pae,Bae=/\s/;function zae(e){for(var t=e.length;t--&&Bae.test(e.charAt(t)););return t}var Vae=zae,Wae=Vae,Hae=/^\s+/;function Uae(e){return e&&e.slice(0,Wae(e)+1).replace(Hae,"")}var jae=Uae,Gae=jae,UN=El,Kae=Nb,jN=0/0,qae=/^[-+]0x[0-9a-f]+$/i,Yae=/^0b[01]+$/i,Xae=/^0o[0-7]+$/i,Zae=parseInt;function Jae(e){if(typeof e=="number")return e;if(Kae(e))return jN;if(UN(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=UN(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Gae(e);var n=Yae.test(e);return n||Xae.test(e)?Zae(e.slice(2),n?2:8):qae.test(e)?jN:+e}var Qae=Jae,ele=El,_w=Lae,GN=Qae,tle="Expected a function",nle=Math.max,sle=Math.min;function ole(e,t,n){var s,o,r,i,a,l,u=0,c=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(tle);t=GN(t)||0,ele(n)&&(c=!!n.leading,d="maxWait"in n,r=d?nle(GN(n.maxWait)||0,t):r,f="trailing"in n?!!n.trailing:f);function h(C){var x=s,S=o;return s=o=void 0,u=C,i=e.apply(S,x),i}function p(C){return u=C,a=setTimeout(v,t),c?h(C):i}function g(C){var x=C-l,S=C-u,T=t-x;return d?sle(T,r-S):T}function m(C){var x=C-l,S=C-u;return l===void 0||x>=t||x<0||d&&S>=r}function v(){var C=_w();if(m(C))return b(C);a=setTimeout(v,g(C))}function b(C){return a=void 0,f&&s?h(C):(s=o=void 0,i)}function $(){a!==void 0&&clearTimeout(a),u=0,s=l=o=a=void 0}function y(){return a===void 0?i:b(_w())}function w(){var C=_w(),x=m(C);if(s=arguments,o=this,l=C,x){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(v,t),h(l)}return a===void 0&&(a=setTimeout(v,t)),i}return w.cancel=$,w.flush=y,w}var nr=ole;const Za=new Map;let KN;Jt&&(wn(document,"mousedown",e=>KN=e),wn(document,"mouseup",e=>{for(const t of Za.values())for(const{documentHandler:n}of t)n(e,KN)}));function qN(e,t){let n=[];return Array.isArray(t.arg)?n=t.arg:t.arg instanceof HTMLElement&&n.push(t.arg),function(s,o){const r=t.instance.popperRef,i=s.target,a=o==null?void 0:o.target,l=!t||!t.instance,u=!i||!a,c=e.contains(i)||e.contains(a),d=e===i,f=n.length&&n.some(p=>p==null?void 0:p.contains(i))||n.length&&n.includes(a),h=r&&(r.contains(i)||r.contains(a));l||u||c||d||f||h||t.value(s,o)}}const Nl={beforeMount(e,t){Za.has(e)||Za.set(e,[]),Za.get(e).push({documentHandler:qN(e,t),bindingFn:t.value})},updated(e,t){Za.has(e)||Za.set(e,[]);const n=Za.get(e),s=n.findIndex(r=>r.bindingFn===t.oldValue),o={documentHandler:qN(e,t),bindingFn:t.value};s>=0?n.splice(s,1,o):n.push(o)},unmounted(e){Za.delete(e)}};var OP={beforeMount(e,t){let n=null,s;const o=()=>t.value&&t.value(),r=()=>{Date.now()-s<100&&o(),clearInterval(n),n=null};wn(e,"mousedown",i=>{i.button===0&&(s=Date.now(),Yne(document,"mouseup",r),clearInterval(n),n=setInterval(o,100))})}};const uC="_trap-focus-children",Cu=[],YN=e=>{if(Cu.length===0)return;const t=Cu[Cu.length-1][uC];if(t.length>0&&e.code===tt.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const n=e.shiftKey,s=e.target===t[0],o=e.target===t[t.length-1];s&&n&&(e.preventDefault(),t[t.length-1].focus()),o&&!n&&(e.preventDefault(),t[0].focus())}},U2={beforeMount(e){e[uC]=zN(e),Cu.push(e),Cu.length<=1&&wn(document,"keydown",YN)},updated(e){ft(()=>{e[uC]=zN(e)})},unmounted(){Cu.shift(),Cu.length===0&&qn(document,"keydown",YN)}};var XN=!1,vu,cC,dC,Dv,Rv,FP,Mv,fC,hC,pC,PP,gC,mC,LP,BP;function Ko(){if(!XN){XN=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(gC=/\b(iPhone|iP[ao]d)/.exec(e),mC=/\b(iP[ao]d)/.exec(e),pC=/Android/i.exec(e),LP=/FBAN\/\w+;/i.exec(e),BP=/Mobile/i.exec(e),PP=!!/Win64/.exec(e),t){vu=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,vu&&document&&document.documentMode&&(vu=document.documentMode);var s=/(?:Trident\/(\d+.\d+))/.exec(e);FP=s?parseFloat(s[1])+4:vu,cC=t[2]?parseFloat(t[2]):NaN,dC=t[3]?parseFloat(t[3]):NaN,Dv=t[4]?parseFloat(t[4]):NaN,Dv?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),Rv=t&&t[1]?parseFloat(t[1]):NaN):Rv=NaN}else vu=cC=dC=Rv=Dv=NaN;if(n){if(n[1]){var o=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);Mv=o?parseFloat(o[1].replace("_",".")):!0}else Mv=!1;fC=!!n[2],hC=!!n[3]}else Mv=fC=hC=!1}}var vC={ie:function(){return Ko()||vu},ieCompatibilityMode:function(){return Ko()||FP>vu},ie64:function(){return vC.ie()&&PP},firefox:function(){return Ko()||cC},opera:function(){return Ko()||dC},webkit:function(){return Ko()||Dv},safari:function(){return vC.webkit()},chrome:function(){return Ko()||Rv},windows:function(){return Ko()||fC},osx:function(){return Ko()||Mv},linux:function(){return Ko()||hC},iphone:function(){return Ko()||gC},mobile:function(){return Ko()||gC||mC||pC||BP},nativeApp:function(){return Ko()||LP},android:function(){return Ko()||pC},ipad:function(){return Ko()||mC}},rle=vC,Wm=!!(typeof window!="undefined"&&window.document&&window.document.createElement),ile={canUseDOM:Wm,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:Wm&&!!(window.addEventListener||window.attachEvent),canUseViewport:Wm&&!!window.screen,isInWorker:!Wm},zP=ile,VP;zP.canUseDOM&&(VP=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function ale(e,t){if(!zP.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,s=n in document;if(!s){var o=document.createElement("div");o.setAttribute(n,"return;"),s=typeof o[n]=="function"}return!s&&VP&&e==="wheel"&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}var lle=ale,ZN=10,JN=40,QN=800;function WP(e){var t=0,n=0,s=0,o=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),s=t*ZN,o=n*ZN,"deltaY"in e&&(o=e.deltaY),"deltaX"in e&&(s=e.deltaX),(s||o)&&e.deltaMode&&(e.deltaMode==1?(s*=JN,o*=JN):(s*=QN,o*=QN)),s&&!t&&(t=s<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:t,spinY:n,pixelX:s,pixelY:o}}WP.getEventType=function(){return rle.firefox()?"DOMMouseScroll":lle("wheel")?"wheel":"mousewheel"};var ule=WP;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const cle=function(e,t){if(e&&e.addEventListener){const n=function(s){const o=ule(s);t&&t.apply(this,[s,o])};uP()?e.addEventListener("DOMMouseScroll",n):e.onmousewheel=n}},dle={beforeMount(e,t){cle(e,t.value)}},fle=function(e){for(const t of e){const n=t.target.__resizeListeners__||[];n.length&&n.forEach(s=>{s()})}},Al=function(e,t){!Jt||!e||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new ResizeObserver(fle),e.__ro__.observe(e)),e.__resizeListeners__.push(t))},Dl=function(e,t){var n;!e||!e.__resizeListeners__||(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(n=e.__ro__)==null||n.disconnect())},hle={beforeMount(e,t){e._handleResize=()=>{var n;e&&((n=t.value)==null||n.call(t,e))},Al(e,e._handleResize)},beforeUnmount(e){Dl(e,e._handleResize)}},Bt="update:modelValue",Zs="change",vl="input";function Mb(e){return/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e)}let di;const ple=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,gle=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function mle(e){const t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),s=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),o=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:gle.map(i=>`${i}:${t.getPropertyValue(i)}`).join(";"),paddingSize:s,borderSize:o,boxSizing:n}}function eA(e,t=1,n){var s;di||(di=document.createElement("textarea"),document.body.appendChild(di));const{paddingSize:o,borderSize:r,boxSizing:i,contextStyle:a}=mle(e);di.setAttribute("style",`${a};${ple}`),di.value=e.value||e.placeholder||"";let l=di.scrollHeight;const u={};i==="border-box"?l=l+r:i==="content-box"&&(l=l-o),di.value="";const c=di.scrollHeight-o;if(Sn(t)){let d=c*t;i==="border-box"&&(d=d+o+r),l=Math.max(d,l),u.minHeight=`${d}px`}if(Sn(n)){let d=c*n;i==="border-box"&&(d=d+o+r),l=Math.min(d,l)}return u.height=`${l}px`,(s=di.parentNode)==null||s.removeChild(di),di=void 0,u}const vle=yt({size:_b,disabled:Boolean,modelValue:{type:et(void 0),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:et([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:et([String,Object]),default:""},prefixIcon:{type:et([String,Object]),default:""},label:{type:String},tabindex:{type:[Number,String]},validateEvent:{type:Boolean,default:!0},inputStyle:{type:et([Object,Array,String]),default:()=>As({})}}),ble={[Bt]:e=>Qt(e),input:e=>Qt(e),change:e=>Qt(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof KeyboardEvent,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},yle={suffix:"append",prefix:"prepend"},wle=$e({name:"ElInput",components:{ElIcon:Pt,CircleClose:_a,IconView:dae},inheritAttrs:!1,props:vle,emits:ble,setup(e,{slots:t,emit:n,attrs:s}){const o=Wt(),r=E2(),{form:i,formItem:a}=cf(),l=Ss(),u=Bp(),c=Mt("input"),d=Mt("textarea"),f=V(),h=V(),p=V(!1),g=V(!1),m=V(!1),v=V(!1),b=bo(e.inputStyle),$=O(()=>f.value||h.value),y=O(()=>{var q;return(q=i==null?void 0:i.statusIcon)!=null?q:!1}),w=O(()=>(a==null?void 0:a.validateState)||""),C=O(()=>MP[w.value]),x=O(()=>s.style),S=O(()=>[e.inputStyle,b.value,{resize:e.resize}]),T=O(()=>e.modelValue===null||e.modelValue===void 0?"":String(e.modelValue)),I=O(()=>e.clearable&&!u.value&&!e.readonly&&!!T.value&&(p.value||g.value)),_=O(()=>e.showPassword&&!u.value&&!e.readonly&&(!!T.value||p.value)),N=O(()=>e.showWordLimit&&!!r.value.maxlength&&(e.type==="text"||e.type==="textarea")&&!u.value&&!e.readonly&&!e.showPassword),D=O(()=>Array.from(T.value).length),F=O(()=>!!N.value&&D.value>Number(r.value.maxlength)),P=()=>{const{type:q,autosize:le}=e;if(!(!Jt||q!=="textarea"))if(le){const xe=cn(le)?le.minRows:void 0,oe=cn(le)?le.maxRows:void 0;b.value=dt({},eA(h.value,xe,oe))}else b.value={minHeight:eA(h.value).minHeight}},M=()=>{const q=$.value;!q||q.value===T.value||(q.value=T.value)},B=q=>{const{el:le}=o.vnode;if(!le)return;const oe=Array.from(le.querySelectorAll(`.${c.e(q)}`)).find(Re=>Re.parentNode===le);if(!oe)return;const Me=yle[q];t[Me]?oe.style.transform=`translateX(${q==="suffix"?"-":""}${le.querySelector(`.${c.be("group",Me)}`).offsetWidth}px)`:oe.removeAttribute("style")},j=()=>{B("prefix"),B("suffix")},X=q=>{const{value:le}=q.target;m.value||le!==T.value&&(n(Bt,le),n("input",le),ft(M))},ae=q=>{n("change",q.target.value)},be=()=>{ft(()=>{var q;(q=$.value)==null||q.focus()})},ie=()=>{var q;(q=$.value)==null||q.blur()},ye=q=>{p.value=!0,n("focus",q)},ue=q=>{var le;p.value=!1,n("blur",q),e.validateEvent&&((le=a==null?void 0:a.validate)==null||le.call(a,"blur"))},Z=()=>{var q;(q=$.value)==null||q.select()},ee=q=>{n("compositionstart",q),m.value=!0},te=q=>{var le;n("compositionupdate",q);const xe=(le=q.target)==null?void 0:le.value,oe=xe[xe.length-1]||"";m.value=!Mb(oe)},fe=q=>{n("compositionend",q),m.value&&(m.value=!1,X(q))},De=()=>{n(Bt,""),n("change",""),n("clear"),n("input","")},We=()=>{v.value=!v.value,be()},He=O(()=>!!t.suffix||!!e.suffixIcon||I.value||e.showPassword||N.value||!!w.value&&y.value);return Le(()=>e.modelValue,()=>{var q;ft(P),e.validateEvent&&((q=a==null?void 0:a.validate)==null||q.call(a,"change"))}),Le(T,()=>M()),Le(()=>e.type,()=>{ft(()=>{M(),P(),j()})}),Ft(()=>{M(),j(),ft(P)}),Ni(()=>{ft(j)}),{input:f,textarea:h,attrs:r,inputSize:l,validateState:w,validateIcon:C,containerStyle:x,computedTextareaStyle:S,inputDisabled:u,showClear:I,showPwdVisible:_,isWordLimitVisible:N,textLength:D,hovering:g,inputExceed:F,passwordVisible:v,inputOrTextarea:$,suffixVisible:He,needStatusIcon:y,resizeTextarea:P,handleInput:X,handleChange:ae,handleFocus:ye,handleBlur:ue,handleCompositionStart:ee,handleCompositionUpdate:te,handleCompositionEnd:fe,handlePasswordVisible:We,clear:De,select:Z,focus:be,blur:ie,onMouseLeave:q=>{g.value=!1,n("mouseleave",q)},onMouseEnter:q=>{g.value=!0,n("mouseenter",q)},handleKeydown:q=>{n("keydown",q)},nsInput:c,nsTextarea:d}}}),$le=["type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder"],Cle=["tabindex","disabled","readonly","autocomplete","aria-label","placeholder"];function xle(e,t,n,s,o,r){const i=de("el-icon"),a=de("circle-close"),l=de("icon-view");return Ct((R(),H("div",{class:Q([e.type==="textarea"?e.nsTextarea.b():e.nsInput.b(),e.nsInput.m(e.inputSize),e.nsInput.is("disabled",e.inputDisabled),e.nsInput.is("exceed",e.inputExceed),{[e.nsInput.b("group")]:e.$slots.prepend||e.$slots.append,[e.nsInput.bm("group","append")]:e.$slots.append,[e.nsInput.bm("group","prepend")]:e.$slots.prepend,[e.nsInput.m("prefix")]:e.$slots.prefix||e.prefixIcon,[e.nsInput.m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[e.nsInput.m("suffix--password-clear")]:e.clearable&&e.showPassword},e.$attrs.class]),style:rt(e.containerStyle),onMouseenter:t[17]||(t[17]=(...u)=>e.onMouseEnter&&e.onMouseEnter(...u)),onMouseleave:t[18]||(t[18]=(...u)=>e.onMouseLeave&&e.onMouseLeave(...u))},[me(" input "),e.type!=="textarea"?(R(),H(ct,{key:0},[me(" prepend slot "),e.$slots.prepend?(R(),H("div",{key:0,class:Q(e.nsInput.be("group","prepend"))},[Pe(e.$slots,"prepend")],2)):me("v-if",!0),K("input",uo({ref:"input",class:e.nsInput.e("inner")},e.attrs,{type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:t[0]||(t[0]=(...u)=>e.handleCompositionStart&&e.handleCompositionStart(...u)),onCompositionupdate:t[1]||(t[1]=(...u)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...u)),onCompositionend:t[2]||(t[2]=(...u)=>e.handleCompositionEnd&&e.handleCompositionEnd(...u)),onInput:t[3]||(t[3]=(...u)=>e.handleInput&&e.handleInput(...u)),onFocus:t[4]||(t[4]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onBlur:t[5]||(t[5]=(...u)=>e.handleBlur&&e.handleBlur(...u)),onChange:t[6]||(t[6]=(...u)=>e.handleChange&&e.handleChange(...u)),onKeydown:t[7]||(t[7]=(...u)=>e.handleKeydown&&e.handleKeydown(...u))}),null,16,$le),me(" prefix slot "),e.$slots.prefix||e.prefixIcon?(R(),H("span",{key:1,class:Q(e.nsInput.e("prefix"))},[K("span",{class:Q(e.nsInput.e("prefix-inner"))},[Pe(e.$slots,"prefix"),e.prefixIcon?(R(),ke(i,{key:0,class:Q(e.nsInput.e("icon"))},{default:ce(()=>[(R(),ke(on(e.prefixIcon)))]),_:1},8,["class"])):me("v-if",!0)],2)],2)):me("v-if",!0),me(" suffix slot "),e.suffixVisible?(R(),H("span",{key:2,class:Q(e.nsInput.e("suffix"))},[K("span",{class:Q(e.nsInput.e("suffix-inner"))},[!e.showClear||!e.showPwdVisible||!e.isWordLimitVisible?(R(),H(ct,{key:0},[Pe(e.$slots,"suffix"),e.suffixIcon?(R(),ke(i,{key:0,class:Q(e.nsInput.e("icon"))},{default:ce(()=>[(R(),ke(on(e.suffixIcon)))]),_:1},8,["class"])):me("v-if",!0)],64)):me("v-if",!0),e.showClear?(R(),ke(i,{key:1,class:Q([e.nsInput.e("icon"),e.nsInput.e("clear")]),onMousedown:t[8]||(t[8]=gt(()=>{},["prevent"])),onClick:e.clear},{default:ce(()=>[pe(a)]),_:1},8,["class","onClick"])):me("v-if",!0),e.showPwdVisible?(R(),ke(i,{key:2,class:Q([e.nsInput.e("icon"),e.nsInput.e("clear")]),onClick:e.handlePasswordVisible},{default:ce(()=>[pe(l)]),_:1},8,["class","onClick"])):me("v-if",!0),e.isWordLimitVisible?(R(),H("span",{key:3,class:Q(e.nsInput.e("count"))},[K("span",{class:Q(e.nsInput.e("count-inner"))},ze(e.textLength)+" / "+ze(e.attrs.maxlength),3)],2)):me("v-if",!0)],2),e.validateState&&e.validateIcon&&e.needStatusIcon?(R(),ke(i,{key:0,class:Q([e.nsInput.e("icon"),e.nsInput.e("validateIcon")])},{default:ce(()=>[(R(),ke(on(e.validateIcon)))]),_:1},8,["class"])):me("v-if",!0)],2)):me("v-if",!0),me(" append slot "),e.$slots.append?(R(),H("div",{key:3,class:Q(e.nsInput.be("group","append"))},[Pe(e.$slots,"append")],2)):me("v-if",!0)],64)):(R(),H(ct,{key:1},[me(" textarea "),K("textarea",uo({ref:"textarea",class:e.nsTextarea.e("inner")},e.attrs,{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autocomplete,style:e.computedTextareaStyle,"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:t[9]||(t[9]=(...u)=>e.handleCompositionStart&&e.handleCompositionStart(...u)),onCompositionupdate:t[10]||(t[10]=(...u)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...u)),onCompositionend:t[11]||(t[11]=(...u)=>e.handleCompositionEnd&&e.handleCompositionEnd(...u)),onInput:t[12]||(t[12]=(...u)=>e.handleInput&&e.handleInput(...u)),onFocus:t[13]||(t[13]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onBlur:t[14]||(t[14]=(...u)=>e.handleBlur&&e.handleBlur(...u)),onChange:t[15]||(t[15]=(...u)=>e.handleChange&&e.handleChange(...u)),onKeydown:t[16]||(t[16]=(...u)=>e.handleKeydown&&e.handleKeydown(...u))}),null,16,Cle),e.isWordLimitVisible?(R(),H("span",{key:0,class:Q(e.nsInput.e("count"))},ze(e.textLength)+" / "+ze(e.attrs.maxlength),3)):me("v-if",!0)],64))],38)),[[sn,e.type!=="hidden"]])}var kle=Ge(wle,[["render",xle]]);const ti=Gt(kle),HP={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Sle=({move:e,size:t,bar:n})=>({[n.size]:t,transform:`translate${n.axis}(${e}%)`}),Ile=yt({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),tA="Thumb",Ele=$e({name:tA,props:Ile,setup(e){const t=Qe(BF),n=Mt("scrollbar");t||So(tA,"can not inject scrollbar context");const s=V(),o=V(),r=V({}),i=V(!1);let a=!1,l=!1,u=Jt?document.onselectstart:null;const c=O(()=>HP[e.vertical?"vertical":"horizontal"]),d=O(()=>Sle({size:e.size,move:e.move,bar:c.value})),f=O(()=>s.value[c.value.offset]**2/t.wrapElement[c.value.scrollSize]/e.ratio/o.value[c.value.offset]),h=w=>{var C;if(w.stopPropagation(),w.ctrlKey||[1,2].includes(w.button))return;(C=window.getSelection())==null||C.removeAllRanges(),g(w);const x=w.currentTarget;!x||(r.value[c.value.axis]=x[c.value.offset]-(w[c.value.client]-x.getBoundingClientRect()[c.value.direction]))},p=w=>{if(!o.value||!s.value||!t.wrapElement)return;const C=Math.abs(w.target.getBoundingClientRect()[c.value.direction]-w[c.value.client]),x=o.value[c.value.offset]/2,S=(C-x)*100*f.value/s.value[c.value.offset];t.wrapElement[c.value.scroll]=S*t.wrapElement[c.value.scrollSize]/100},g=w=>{w.stopImmediatePropagation(),a=!0,document.addEventListener("mousemove",m),document.addEventListener("mouseup",v),u=document.onselectstart,document.onselectstart=()=>!1},m=w=>{if(!s.value||!o.value||a===!1)return;const C=r.value[c.value.axis];if(!C)return;const x=(s.value.getBoundingClientRect()[c.value.direction]-w[c.value.client])*-1,S=o.value[c.value.offset]-C,T=(x-S)*100*f.value/s.value[c.value.offset];t.wrapElement[c.value.scroll]=T*t.wrapElement[c.value.scrollSize]/100},v=()=>{a=!1,r.value[c.value.axis]=0,document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",v),y(),l&&(i.value=!1)},b=()=>{l=!1,i.value=!!e.size},$=()=>{l=!0,i.value=a};us(()=>{y(),document.removeEventListener("mouseup",v)});const y=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return Bs(yo(t,"scrollbarElement"),"mousemove",b),Bs(yo(t,"scrollbarElement"),"mouseleave",$),{ns:n,instance:s,thumb:o,bar:c,thumbStyle:d,visible:i,clickTrackHandler:p,clickThumbHandler:h}}});function Tle(e,t,n,s,o,r){return R(),ke(ks,{name:e.ns.b("fade")},{default:ce(()=>[Ct(K("div",{ref:"instance",class:Q([e.ns.e("bar"),e.ns.is(e.bar.key)]),onMousedown:t[1]||(t[1]=(...i)=>e.clickTrackHandler&&e.clickTrackHandler(...i))},[K("div",{ref:"thumb",class:Q(e.ns.e("thumb")),style:rt(e.thumbStyle),onMousedown:t[0]||(t[0]=(...i)=>e.clickThumbHandler&&e.clickThumbHandler(...i))},null,38)],34),[[sn,e.always||e.visible]])]),_:1},8,["name"])}var _le=Ge(Ele,[["render",Tle]]);const Nle=yt({always:{type:Boolean,default:!0},width:{type:String,default:""},height:{type:String,default:""},ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Ale=$e({components:{Thumb:_le},props:Nle,setup(e){const t=V(0),n=V(0),s=4;return{handleScroll:r=>{if(r){const i=r.offsetHeight-s,a=r.offsetWidth-s;n.value=r.scrollTop*100/i*e.ratioY,t.value=r.scrollLeft*100/a*e.ratioX}},moveX:t,moveY:n}}});function Dle(e,t,n,s,o,r){const i=de("thumb");return R(),H(ct,null,[pe(i,{move:e.moveX,ratio:e.ratioX,size:e.width,always:e.always},null,8,["move","ratio","size","always"]),pe(i,{move:e.moveY,ratio:e.ratioY,size:e.height,vertical:"",always:e.always},null,8,["move","ratio","size","always"])],64)}var Rle=Ge(Ale,[["render",Dle]]);const Mle=yt({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:et([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:{type:Boolean,default:!1},minSize:{type:Number,default:20}}),Ole={scroll:({scrollTop:e,scrollLeft:t})=>Sn(e)&&Sn(t)},Fle=$e({name:"ElScrollbar",components:{Bar:Rle},props:Mle,emits:Ole,setup(e,{emit:t}){const n=Mt("scrollbar");let s,o;const r=V(),i=V(),a=V(),l=V("0"),u=V("0"),c=V(),d=V(0),f=V(0),h=V(1),p=V(1),g=4,m=O(()=>{const w={};return e.height&&(w.height=Ta(e.height)),e.maxHeight&&(w.maxHeight=Ta(e.maxHeight)),[e.wrapStyle,w]}),v=()=>{var w;i.value&&((w=c.value)==null||w.handleScroll(i.value),t("scroll",{scrollTop:i.value.scrollTop,scrollLeft:i.value.scrollLeft}))},b=w=>{!Sn(w)||(i.value.scrollTop=w)},$=w=>{!Sn(w)||(i.value.scrollLeft=w)},y=()=>{if(!i.value)return;const w=i.value.offsetHeight-g,C=i.value.offsetWidth-g,x=w**2/i.value.scrollHeight,S=C**2/i.value.scrollWidth,T=Math.max(x,e.minSize),I=Math.max(S,e.minSize);h.value=x/(w-x)/(T/(w-T)),p.value=S/(C-S)/(I/(C-I)),u.value=T+g<w?`${T}px`:"",l.value=I+g<C?`${I}px`:""};return Le(()=>e.noresize,w=>{w?(s==null||s(),o==null||o()):({stop:s}=Jh(a,y),o=Bs("resize",y))},{immediate:!0}),jt(BF,En({scrollbarElement:r,wrapElement:i})),Ft(()=>{e.native||ft(()=>y())}),{ns:n,scrollbar$:r,wrap$:i,resize$:a,barRef:c,moveX:d,moveY:f,ratioX:p,ratioY:h,sizeWidth:l,sizeHeight:u,style:m,update:y,handleScroll:v,setScrollTop:b,setScrollLeft:$}}});function Ple(e,t,n,s,o,r){const i=de("bar");return R(),H("div",{ref:"scrollbar$",class:Q(e.ns.b())},[K("div",{ref:"wrap$",class:Q([e.wrapClass,e.ns.e("wrap"),{[e.ns.em("wrap","hidden-default")]:!e.native}]),style:rt(e.style),onScroll:t[0]||(t[0]=(...a)=>e.handleScroll&&e.handleScroll(...a))},[(R(),ke(on(e.tag),{ref:"resize$",class:Q([e.ns.e("view"),e.viewClass]),style:rt(e.viewStyle)},{default:ce(()=>[Pe(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?me("v-if",!0):(R(),ke(i,{key:0,ref:"barRef",height:e.sizeHeight,width:e.sizeWidth,always:e.always,"ratio-x":e.ratioX,"ratio-y":e.ratioY},null,8,["height","width","always","ratio-x","ratio-y"]))],2)}var Lle=Ge(Fle,[["render",Ple]]);const Fa=Gt(Lle),j2=Symbol("elPopper"),UP=Symbol("elPopperContent"),Ble=$e({name:"ElPopperProvider",inheritAttrs:!1,setup(){const e={triggerRef:V(null),popperInstanceRef:V(null),contentRef:V(null)};return jt(j2,e),e}});function zle(e,t,n,s,o,r){return Pe(e.$slots,"default")}var Vle=Ge(Ble,[["render",zle]]),er="top",Yr="bottom",Xr="right",tr="left",G2="auto",Vp=[er,Yr,Xr,tr],Id="start",sp="end",Wle="clippingParents",jP="viewport",Bf="popper",Hle="reference",nA=Vp.reduce(function(e,t){return e.concat([t+"-"+Id,t+"-"+sp])},[]),K2=[].concat(Vp,[G2]).reduce(function(e,t){return e.concat([t,t+"-"+Id,t+"-"+sp])},[]),Ule="beforeRead",jle="read",Gle="afterRead",Kle="beforeMain",qle="main",Yle="afterMain",Xle="beforeWrite",Zle="write",Jle="afterWrite",Qle=[Ule,jle,Gle,Kle,qle,Yle,Xle,Zle,Jle];function Ji(e){return e?(e.nodeName||"").toLowerCase():null}function Ri(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ed(e){var t=Ri(e).Element;return e instanceof t||e instanceof Element}function Kr(e){var t=Ri(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function GP(e){if(typeof ShadowRoot=="undefined")return!1;var t=Ri(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function eue(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},o=t.attributes[n]||{},r=t.elements[n];!Kr(r)||!Ji(r)||(Object.assign(r.style,s),Object.keys(o).forEach(function(i){var a=o[i];a===!1?r.removeAttribute(i):r.setAttribute(i,a===!0?"":a)}))})}function tue(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var o=t.elements[s],r=t.attributes[s]||{},i=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),a=i.reduce(function(l,u){return l[u]="",l},{});!Kr(o)||!Ji(o)||(Object.assign(o.style,a),Object.keys(r).forEach(function(l){o.removeAttribute(l)}))})}}var nue={name:"applyStyles",enabled:!0,phase:"write",fn:eue,effect:tue,requires:["computeStyles"]};function Gi(e){return e.split("-")[0]}var Mu=Math.max,$0=Math.min,Td=Math.round;function _d(e,t){t===void 0&&(t=!1);var n=e.getBoundingClientRect(),s=1,o=1;if(Kr(e)&&t){var r=e.offsetHeight,i=e.offsetWidth;i>0&&(s=Td(n.width)/i||1),r>0&&(o=Td(n.height)/r||1)}return{width:n.width/s,height:n.height/o,top:n.top/o,right:n.right/s,bottom:n.bottom/o,left:n.left/s,x:n.left/s,y:n.top/o}}function q2(e){var t=_d(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function KP(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&GP(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Aa(e){return Ri(e).getComputedStyle(e)}function sue(e){return["table","td","th"].indexOf(Ji(e))>=0}function Rl(e){return((Ed(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ob(e){return Ji(e)==="html"?e:e.assignedSlot||e.parentNode||(GP(e)?e.host:null)||Rl(e)}function sA(e){return!Kr(e)||Aa(e).position==="fixed"?null:e.offsetParent}function oue(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&Kr(e)){var s=Aa(e);if(s.position==="fixed")return null}for(var o=Ob(e);Kr(o)&&["html","body"].indexOf(Ji(o))<0;){var r=Aa(o);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return o;o=o.parentNode}return null}function Wp(e){for(var t=Ri(e),n=sA(e);n&&sue(n)&&Aa(n).position==="static";)n=sA(n);return n&&(Ji(n)==="html"||Ji(n)==="body"&&Aa(n).position==="static")?t:n||oue(e)||t}function Y2(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Sh(e,t,n){return Mu(e,$0(t,n))}function rue(e,t,n){var s=Sh(e,t,n);return s>n?n:s}function qP(){return{top:0,right:0,bottom:0,left:0}}function YP(e){return Object.assign({},qP(),e)}function XP(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var iue=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,YP(typeof t!="number"?t:XP(t,Vp))};function aue(e){var t,n=e.state,s=e.name,o=e.options,r=n.elements.arrow,i=n.modifiersData.popperOffsets,a=Gi(n.placement),l=Y2(a),u=[tr,Xr].indexOf(a)>=0,c=u?"height":"width";if(!(!r||!i)){var d=iue(o.padding,n),f=q2(r),h=l==="y"?er:tr,p=l==="y"?Yr:Xr,g=n.rects.reference[c]+n.rects.reference[l]-i[l]-n.rects.popper[c],m=i[l]-n.rects.reference[l],v=Wp(r),b=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,$=g/2-m/2,y=d[h],w=b-f[c]-d[p],C=b/2-f[c]/2+$,x=Sh(y,C,w),S=l;n.modifiersData[s]=(t={},t[S]=x,t.centerOffset=x-C,t)}}function lue(e){var t=e.state,n=e.options,s=n.element,o=s===void 0?"[data-popper-arrow]":s;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||!KP(t.elements.popper,o)||(t.elements.arrow=o))}var uue={name:"arrow",enabled:!0,phase:"main",fn:aue,effect:lue,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Nd(e){return e.split("-")[1]}var cue={top:"auto",right:"auto",bottom:"auto",left:"auto"};function due(e){var t=e.x,n=e.y,s=window,o=s.devicePixelRatio||1;return{x:Td(t*o)/o||0,y:Td(n*o)/o||0}}function oA(e){var t,n=e.popper,s=e.popperRect,o=e.placement,r=e.variation,i=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,f=i.x,h=f===void 0?0:f,p=i.y,g=p===void 0?0:p,m=typeof c=="function"?c({x:h,y:g}):{x:h,y:g};h=m.x,g=m.y;var v=i.hasOwnProperty("x"),b=i.hasOwnProperty("y"),$=tr,y=er,w=window;if(u){var C=Wp(n),x="clientHeight",S="clientWidth";if(C===Ri(n)&&(C=Rl(n),Aa(C).position!=="static"&&a==="absolute"&&(x="scrollHeight",S="scrollWidth")),C=C,o===er||(o===tr||o===Xr)&&r===sp){y=Yr;var T=d&&w.visualViewport?w.visualViewport.height:C[x];g-=T-s.height,g*=l?1:-1}if(o===tr||(o===er||o===Yr)&&r===sp){$=Xr;var I=d&&w.visualViewport?w.visualViewport.width:C[S];h-=I-s.width,h*=l?1:-1}}var _=Object.assign({position:a},u&&cue),N=c===!0?due({x:h,y:g}):{x:h,y:g};if(h=N.x,g=N.y,l){var D;return Object.assign({},_,(D={},D[y]=b?"0":"",D[$]=v?"0":"",D.transform=(w.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",D))}return Object.assign({},_,(t={},t[y]=b?g+"px":"",t[$]=v?h+"px":"",t.transform="",t))}function fue(e){var t=e.state,n=e.options,s=n.gpuAcceleration,o=s===void 0?!0:s,r=n.adaptive,i=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:Gi(t.placement),variation:Nd(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,oA(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,oA(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var hue={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:fue,data:{}},Hm={passive:!0};function pue(e){var t=e.state,n=e.instance,s=e.options,o=s.scroll,r=o===void 0?!0:o,i=s.resize,a=i===void 0?!0:i,l=Ri(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&u.forEach(function(c){c.addEventListener("scroll",n.update,Hm)}),a&&l.addEventListener("resize",n.update,Hm),function(){r&&u.forEach(function(c){c.removeEventListener("scroll",n.update,Hm)}),a&&l.removeEventListener("resize",n.update,Hm)}}var gue={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:pue,data:{}},mue={left:"right",right:"left",bottom:"top",top:"bottom"};function Ov(e){return e.replace(/left|right|bottom|top/g,function(t){return mue[t]})}var vue={start:"end",end:"start"};function rA(e){return e.replace(/start|end/g,function(t){return vue[t]})}function X2(e){var t=Ri(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function Z2(e){return _d(Rl(e)).left+X2(e).scrollLeft}function bue(e){var t=Ri(e),n=Rl(e),s=t.visualViewport,o=n.clientWidth,r=n.clientHeight,i=0,a=0;return s&&(o=s.width,r=s.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(i=s.offsetLeft,a=s.offsetTop)),{width:o,height:r,x:i+Z2(e),y:a}}function yue(e){var t,n=Rl(e),s=X2(e),o=(t=e.ownerDocument)==null?void 0:t.body,r=Mu(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),i=Mu(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-s.scrollLeft+Z2(e),l=-s.scrollTop;return Aa(o||n).direction==="rtl"&&(a+=Mu(n.clientWidth,o?o.clientWidth:0)-r),{width:r,height:i,x:a,y:l}}function J2(e){var t=Aa(e),n=t.overflow,s=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+s)}function ZP(e){return["html","body","#document"].indexOf(Ji(e))>=0?e.ownerDocument.body:Kr(e)&&J2(e)?e:ZP(Ob(e))}function Ih(e,t){var n;t===void 0&&(t=[]);var s=ZP(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),r=Ri(s),i=o?[r].concat(r.visualViewport||[],J2(s)?s:[]):s,a=t.concat(i);return o?a:a.concat(Ih(Ob(i)))}function bC(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function wue(e){var t=_d(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function iA(e,t){return t===jP?bC(bue(e)):Ed(t)?wue(t):bC(yue(Rl(e)))}function $ue(e){var t=Ih(Ob(e)),n=["absolute","fixed"].indexOf(Aa(e).position)>=0,s=n&&Kr(e)?Wp(e):e;return Ed(s)?t.filter(function(o){return Ed(o)&&KP(o,s)&&Ji(o)!=="body"}):[]}function Cue(e,t,n){var s=t==="clippingParents"?$ue(e):[].concat(t),o=[].concat(s,[n]),r=o[0],i=o.reduce(function(a,l){var u=iA(e,l);return a.top=Mu(u.top,a.top),a.right=$0(u.right,a.right),a.bottom=$0(u.bottom,a.bottom),a.left=Mu(u.left,a.left),a},iA(e,r));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function JP(e){var t=e.reference,n=e.element,s=e.placement,o=s?Gi(s):null,r=s?Nd(s):null,i=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(o){case er:l={x:i,y:t.y-n.height};break;case Yr:l={x:i,y:t.y+t.height};break;case Xr:l={x:t.x+t.width,y:a};break;case tr:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var u=o?Y2(o):null;if(u!=null){var c=u==="y"?"height":"width";switch(r){case Id:l[u]=l[u]-(t[c]/2-n[c]/2);break;case sp:l[u]=l[u]+(t[c]/2-n[c]/2);break}}return l}function op(e,t){t===void 0&&(t={});var n=t,s=n.placement,o=s===void 0?e.placement:s,r=n.boundary,i=r===void 0?Wle:r,a=n.rootBoundary,l=a===void 0?jP:a,u=n.elementContext,c=u===void 0?Bf:u,d=n.altBoundary,f=d===void 0?!1:d,h=n.padding,p=h===void 0?0:h,g=YP(typeof p!="number"?p:XP(p,Vp)),m=c===Bf?Hle:Bf,v=e.rects.popper,b=e.elements[f?m:c],$=Cue(Ed(b)?b:b.contextElement||Rl(e.elements.popper),i,l),y=_d(e.elements.reference),w=JP({reference:y,element:v,strategy:"absolute",placement:o}),C=bC(Object.assign({},v,w)),x=c===Bf?C:y,S={top:$.top-x.top+g.top,bottom:x.bottom-$.bottom+g.bottom,left:$.left-x.left+g.left,right:x.right-$.right+g.right},T=e.modifiersData.offset;if(c===Bf&&T){var I=T[o];Object.keys(S).forEach(function(_){var N=[Xr,Yr].indexOf(_)>=0?1:-1,D=[er,Yr].indexOf(_)>=0?"y":"x";S[_]+=I[D]*N})}return S}function xue(e,t){t===void 0&&(t={});var n=t,s=n.placement,o=n.boundary,r=n.rootBoundary,i=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?K2:l,c=Nd(s),d=c?a?nA:nA.filter(function(p){return Nd(p)===c}):Vp,f=d.filter(function(p){return u.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,g){return p[g]=op(e,{placement:g,boundary:o,rootBoundary:r,padding:i})[Gi(g)],p},{});return Object.keys(h).sort(function(p,g){return h[p]-h[g]})}function kue(e){if(Gi(e)===G2)return[];var t=Ov(e);return[rA(e),t,rA(t)]}function Sue(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var o=n.mainAxis,r=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!0:i,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,g=n.allowedAutoPlacements,m=t.options.placement,v=Gi(m),b=v===m,$=l||(b||!p?[Ov(m)]:kue(m)),y=[m].concat($).reduce(function(ue,Z){return ue.concat(Gi(Z)===G2?xue(t,{placement:Z,boundary:c,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:g}):Z)},[]),w=t.rects.reference,C=t.rects.popper,x=new Map,S=!0,T=y[0],I=0;I<y.length;I++){var _=y[I],N=Gi(_),D=Nd(_)===Id,F=[er,Yr].indexOf(N)>=0,P=F?"width":"height",M=op(t,{placement:_,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),B=F?D?Xr:tr:D?Yr:er;w[P]>C[P]&&(B=Ov(B));var j=Ov(B),X=[];if(r&&X.push(M[N]<=0),a&&X.push(M[B]<=0,M[j]<=0),X.every(function(ue){return ue})){T=_,S=!1;break}x.set(_,X)}if(S)for(var ae=p?3:1,be=function(Z){var ee=y.find(function(te){var fe=x.get(te);if(fe)return fe.slice(0,Z).every(function(De){return De})});if(ee)return T=ee,"break"},ie=ae;ie>0;ie--){var ye=be(ie);if(ye==="break")break}t.placement!==T&&(t.modifiersData[s]._skip=!0,t.placement=T,t.reset=!0)}}var Iue={name:"flip",enabled:!0,phase:"main",fn:Sue,requiresIfExists:["offset"],data:{_skip:!1}};function aA(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function lA(e){return[er,Xr,Yr,tr].some(function(t){return e[t]>=0})}function Eue(e){var t=e.state,n=e.name,s=t.rects.reference,o=t.rects.popper,r=t.modifiersData.preventOverflow,i=op(t,{elementContext:"reference"}),a=op(t,{altBoundary:!0}),l=aA(i,s),u=aA(a,o,r),c=lA(l),d=lA(u);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var Tue={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Eue};function _ue(e,t,n){var s=Gi(e),o=[tr,er].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,i=r[0],a=r[1];return i=i||0,a=(a||0)*o,[tr,Xr].indexOf(s)>=0?{x:a,y:i}:{x:i,y:a}}function Nue(e){var t=e.state,n=e.options,s=e.name,o=n.offset,r=o===void 0?[0,0]:o,i=K2.reduce(function(c,d){return c[d]=_ue(d,t.rects,r),c},{}),a=i[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[s]=i}var Aue={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Nue};function Due(e){var t=e.state,n=e.name;t.modifiersData[n]=JP({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Rue={name:"popperOffsets",enabled:!0,phase:"read",fn:Due,data:{}};function Mue(e){return e==="x"?"y":"x"}function Oue(e){var t=e.state,n=e.options,s=e.name,o=n.mainAxis,r=o===void 0?!0:o,i=n.altAxis,a=i===void 0?!1:i,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,g=p===void 0?0:p,m=op(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),v=Gi(t.placement),b=Nd(t.placement),$=!b,y=Y2(v),w=Mue(y),C=t.modifiersData.popperOffsets,x=t.rects.reference,S=t.rects.popper,T=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,I=typeof T=="number"?{mainAxis:T,altAxis:T}:Object.assign({mainAxis:0,altAxis:0},T),_=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,N={x:0,y:0};if(!!C){if(r){var D,F=y==="y"?er:tr,P=y==="y"?Yr:Xr,M=y==="y"?"height":"width",B=C[y],j=B+m[F],X=B-m[P],ae=h?-S[M]/2:0,be=b===Id?x[M]:S[M],ie=b===Id?-S[M]:-x[M],ye=t.elements.arrow,ue=h&&ye?q2(ye):{width:0,height:0},Z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:qP(),ee=Z[F],te=Z[P],fe=Sh(0,x[M],ue[M]),De=$?x[M]/2-ae-fe-ee-I.mainAxis:be-fe-ee-I.mainAxis,We=$?-x[M]/2+ae+fe+te+I.mainAxis:ie+fe+te+I.mainAxis,He=t.elements.arrow&&Wp(t.elements.arrow),Ve=He?y==="y"?He.clientTop||0:He.clientLeft||0:0,Y=(D=_==null?void 0:_[y])!=null?D:0,ne=B+De-Y-Ve,q=B+We-Y,le=Sh(h?$0(j,ne):j,B,h?Mu(X,q):X);C[y]=le,N[y]=le-B}if(a){var xe,oe=y==="x"?er:tr,Me=y==="x"?Yr:Xr,Re=C[w],ve=w==="y"?"height":"width",Ae=Re+m[oe],it=Re-m[Me],Je=[er,tr].indexOf(v)!==-1,st=(xe=_==null?void 0:_[w])!=null?xe:0,vt=Je?Ae:Re-x[ve]-S[ve]-st+I.altAxis,z=Je?Re+x[ve]+S[ve]-st-I.altAxis:it,k=h&&Je?rue(vt,Re,z):Sh(h?vt:Ae,Re,h?z:it);C[w]=k,N[w]=k-Re}t.modifiersData[s]=N}}var Fue={name:"preventOverflow",enabled:!0,phase:"main",fn:Oue,requiresIfExists:["offset"]};function Pue(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Lue(e){return e===Ri(e)||!Kr(e)?X2(e):Pue(e)}function Bue(e){var t=e.getBoundingClientRect(),n=Td(t.width)/e.offsetWidth||1,s=Td(t.height)/e.offsetHeight||1;return n!==1||s!==1}function zue(e,t,n){n===void 0&&(n=!1);var s=Kr(t),o=Kr(t)&&Bue(t),r=Rl(t),i=_d(e,o),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&((Ji(t)!=="body"||J2(r))&&(a=Lue(t)),Kr(t)?(l=_d(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=Z2(r))),{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}function Vue(e){var t=new Map,n=new Set,s=[];e.forEach(function(r){t.set(r.name,r)});function o(r){n.add(r.name);var i=[].concat(r.requires||[],r.requiresIfExists||[]);i.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&o(l)}}),s.push(r)}return e.forEach(function(r){n.has(r.name)||o(r)}),s}function Wue(e){var t=Vue(e);return Qle.reduce(function(n,s){return n.concat(t.filter(function(o){return o.phase===s}))},[])}function Hue(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Uue(e){var t=e.reduce(function(n,s){var o=n[s.name];return n[s.name]=o?Object.assign({},o,s,{options:Object.assign({},o.options,s.options),data:Object.assign({},o.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var uA={placement:"bottom",modifiers:[],strategy:"absolute"};function cA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function jue(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,o=t.defaultOptions,r=o===void 0?uA:o;return function(a,l,u){u===void 0&&(u=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},uA,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:c,setOptions:function(v){var b=typeof v=="function"?v(c.options):v;g(),c.options=Object.assign({},r,c.options,b),c.scrollParents={reference:Ed(a)?Ih(a):a.contextElement?Ih(a.contextElement):[],popper:Ih(l)};var $=Wue(Uue([].concat(s,c.options.modifiers)));return c.orderedModifiers=$.filter(function(y){return y.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var v=c.elements,b=v.reference,$=v.popper;if(!!cA(b,$)){c.rects={reference:zue(b,Wp($),c.options.strategy==="fixed"),popper:q2($)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(I){return c.modifiersData[I.name]=Object.assign({},I.data)});for(var y=0;y<c.orderedModifiers.length;y++){if(c.reset===!0){c.reset=!1,y=-1;continue}var w=c.orderedModifiers[y],C=w.fn,x=w.options,S=x===void 0?{}:x,T=w.name;typeof C=="function"&&(c=C({state:c,options:S,name:T,instance:h})||c)}}}},update:Hue(function(){return new Promise(function(m){h.forceUpdate(),m(c)})}),destroy:function(){g(),f=!0}};if(!cA(a,l))return h;h.setOptions(u).then(function(m){!f&&u.onFirstUpdate&&u.onFirstUpdate(m)});function p(){c.orderedModifiers.forEach(function(m){var v=m.name,b=m.options,$=b===void 0?{}:b,y=m.effect;if(typeof y=="function"){var w=y({state:c,name:v,instance:h,options:$}),C=function(){};d.push(w||C)}})}function g(){d.forEach(function(m){return m()}),d=[]}return h}}var Gue=[gue,Rue,hue,nue,Aue,Iue,Fue,uue,Tue],QP=jue({defaultModifiers:Gue});const eL={LIGHT:"light",DARK:"dark"},tL=yt({arrowOffset:{type:Number,default:5}}),Kue=yt({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:et(Array),default:()=>[]},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:K2,default:"bottom"},popperOptions:{type:et(Object),default:()=>({})},strategy:{type:String,values:["fixed","absolute"],default:"absolute"}});yt({autoClose:{type:Number,default:0},cutoff:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}});const nL=yt(Ut(dt({},Kue),{style:{type:et([String,Array,Object])},className:{type:et([String,Array,Object])},effect:{type:String,default:"dark"},enterable:{type:Boolean,default:!0},pure:{type:Boolean},popperClass:{type:et([String,Array,Object])},popperStyle:{type:et([String,Array,Object])},referenceEl:{type:et(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},zIndex:Number})),sL=yt({virtualRef:{type:et(Object)},virtualTriggering:{type:Boolean}}),que=$e({name:"ElPopperArrow",props:tL,setup(e){const t=V(null),n=Qe(UP,void 0);return Le(()=>e.arrowOffset,s=>{n.arrowOffset.value=s}),Ft(()=>{n.arrowRef.value=Xe(t)}),us(()=>{n.arrowRef.value=null}),{arrowRef:t}}}),Yue={ref:"arrowRef",class:"el-popper__arrow","data-popper-arrow":""};function Xue(e,t,n,s,o,r){return R(),H("span",Yue,null,512)}var Zue=Ge(que,[["render",Xue]]);const Jue="ElOnlyChild",Que=$e({name:Jue,setup(e,{slots:t,attrs:n}){var s;const o=Qe(IP,void 0),r=pse((s=o.setForwardRef)!=null?s:un);return()=>{var i;const a=(i=t.default)==null?void 0:i.call(t,n);if(!a||a.length>1)return null;const l=oL(a);return l?Ct(Uu(l,n),[[r]]):null}}});function oL(e){if(!e)return null;const t=e;for(let n=0;n<t.length;n++){const s=t[n];if(cn(s))switch(s.type){case xr:continue;case Fp:return dA(s);case ct:return oL(s.children);default:return s}return dA(s)}return null}function dA(e){return Ke("span",{class:"el-only-child__content"},[e])}const ece=(e,t)=>{const{placement:n,strategy:s,popperOptions:o}=e,r=Ut(dt({placement:n,strategy:s},o),{modifiers:tce(e)});return nce(r,t),sce(r,o==null?void 0:o.modifiers),r},rL=e=>{let t=null;return e?("getBoundingClientRect"in e||e instanceof HTMLElement?t=e:t=e.$el,t):null};function tce(e){const{offset:t,gpuAcceleration:n,fallbackPlacements:s}=e;return[{name:"offset",options:{offset:[0,t!=null?t:12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:s!=null?s:[]}},{name:"computeStyles",options:{gpuAcceleration:n,adaptive:n}}]}function nce(e,{arrowEl:t,arrowOffset:n}){e.modifiers.push({name:"arrow",options:{element:t,padding:n!=null?n:5}})}function sce(e,t){t&&(e.modifiers=[...e.modifiers,...t!=null?t:[]])}const oce=$e({name:"ElPopperTrigger",components:{ElOnlyChild:Que},inheritAttrs:!1,props:Ut(dt({},sL),{onMouseenter:Function,onMouseleave:Function,onClick:Function,onKeydown:Function,onFocus:Function,onBlur:Function,onContextmenu:Function,id:String,open:Boolean}),setup(e){const{triggerRef:t}=Qe(j2,void 0);return hse(t),Le(()=>e.virtualRef,n=>{n&&(t.value=rL(n))},{immediate:!0}),Le(()=>t.value,(n,s)=>{n&&n instanceof HTMLElement&&["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(o=>{const r=e[o];r&&(n.addEventListener(o.slice(2).toLowerCase(),r),s==null||s.removeEventListener(o.slice(2).toLowerCase(),r))})},{immediate:!0}),{triggerRef:t}}});function rce(e,t,n,s,o,r){const i=de("el-only-child");return e.virtualTriggering?me("v-if",!0):(R(),ke(i,uo({key:0},e.$attrs,{"aria-describedby":e.open?e.id:void 0}),{default:ce(()=>[Pe(e.$slots,"default")]),_:3},16,["aria-describedby"]))}var ice=Ge(oce,[["render",rce]]);const ace=$e({name:"ElPopperContent",props:nL,emits:["mouseenter","mouseleave"],setup(e){const{triggerRef:t,popperInstanceRef:n,contentRef:s}=Qe(j2,void 0),o=V(null),r=V(null),i=V();jt(UP,{arrowRef:r,arrowOffset:i});const a=V(e.zIndex||ys.nextZIndex()),l=O(()=>[{zIndex:Xe(a)},e.popperStyle]),u=O(()=>[{"el-popper":!0,"is-pure":e.pure,[`is-${e.effect}`]:!!e.effect},e.popperClass]),c=({referenceEl:f,popperContentEl:h,arrowEl:p})=>{const g=ece(e,{arrowEl:p,arrowOffset:Xe(i)});return QP(f,h,g)},d=()=>{var f;(f=Xe(n))==null||f.update(),a.value=e.zIndex||ys.nextZIndex()};return Ft(()=>{let f;Le(()=>rL(e.referenceEl)||Xe(t),h=>{var p;if(f==null||f(),h){(p=n.value)==null||p.destroy();const g=Xe(o);s.value=g;const m=Xe(r),v=c({referenceEl:h,popperContentEl:Xe(o),arrowEl:m});n.value=v,f=Le(()=>h.getBoundingClientRect(),()=>{d()},{immediate:!0})}else n.value=null},{immediate:!0})}),{popperContentRef:o,popperInstanceRef:n,contentStyle:l,contentClass:u,updatePopper:d}}});function lce(e,t,n,s,o,r){return R(),H("div",{ref:"popperContentRef",style:rt(e.contentStyle),class:Q(e.contentClass),role:"tooltip",onMouseenter:t[0]||(t[0]=i=>e.$emit("mouseenter",i)),onMouseleave:t[1]||(t[1]=i=>e.$emit("mouseleave",i))},[Pe(e.$slots,"default")],38)}var uce=Ge(ace,[["render",lce]]);const iL=Gt(Vle),cce=$e({name:"ElVisuallyHidden",props:{style:{type:[String,Object,Array]}},setup(e){return{computedStyle:O(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}])}}});function dce(e,t,n,s,o,r){return R(),H("span",uo(e.$attrs,{style:e.computedStyle}),null,16)}var fce=Ge(cce,[["render",dce]]);const sl=dt(dt(dt({},dse),nL),yt({appendTo:{type:et([String,Object]),default:use},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:et(Boolean),default:null},transition:{type:String,default:"el-fade-in-linear"},teleported:{type:Boolean,default:!0},disabled:{type:Boolean}})),Q2=Ut(dt({},sL),{disabled:Boolean,trigger:{type:[String,Array],default:"hover"}}),hce=yt({openDelay:{type:Number},visibleArrow:{type:Boolean,default:void 0},hideAfter:{type:Number,default:200},showArrow:{type:Boolean,default:!0}}),Fb=Symbol("elTooltip"),pce=$e({name:"ElTooltipContent",components:{ElPopperContent:uce,ElVisuallyHidden:fce},inheritAttrs:!1,props:sl,setup(e){const t=V(null),n=V(!1),s=V(!1),o=V(!1),{controlled:r,id:i,open:a,trigger:l,onClose:u,onOpen:c,onShow:d,onHide:f}=Qe(Fb,void 0),h=O(()=>e.persistent),p=O(()=>Xe(h)?!0:Xe(a)),g=O(()=>e.disabled?!1:Xe(a)),m=O(()=>{var T;return(T=e.style)!=null?T:{}}),v=O(()=>!Xe(a));lse(u);const b=()=>{f()},$=()=>{if(Xe(r))return!0},y=Ls($,()=>{e.enterable&&Xe(l)==="hover"&&c()}),w=Ls($,()=>{Xe(l)==="hover"&&u()}),C=()=>{var T,I;(I=(T=t.value)==null?void 0:T.updatePopper)==null||I.call(T)},x=()=>{d()};let S;return Le(()=>Xe(a),T=>{T?S=oC(O(()=>{var I;return(I=t.value)==null?void 0:I.popperContentRef}),()=>{if(Xe(r))return;Xe(l)!=="hover"&&u()}):S==null||S()},{flush:"post"}),{ariaHidden:v,entering:s,leaving:o,id:i,intermediateOpen:n,contentStyle:m,contentRef:t,shouldRender:p,shouldShow:g,open:a,onAfterShow:x,onBeforeEnter:C,onContentEnter:y,onContentLeave:w,onTransitionLeave:b}}});function gce(e,t,n,s,o,r){const i=de("el-visually-hidden"),a=de("el-popper-content");return R(),ke(wb,{disabled:!e.teleported,to:e.appendTo},[pe(ks,{name:e.transition,onAfterLeave:e.onTransitionLeave,onBeforeEnter:e.onBeforeEnter,onAfterEnter:e.onAfterShow},{default:ce(()=>[e.shouldRender?Ct((R(),ke(a,uo({key:0,ref:"contentRef"},e.$attrs,{"aria-hidden":e.ariaHidden,"boundaries-padding":e.boundariesPadding,"fallback-placements":e.fallbackPlacements,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,placement:e.placement,"popper-options":e.popperOptions,strategy:e.strategy,effect:e.effect,enterable:e.enterable,pure:e.pure,"popper-class":e.popperClass,"popper-style":[e.popperStyle,e.contentStyle],"reference-el":e.referenceEl,"z-index":e.zIndex,onMouseenter:e.onContentEnter,onMouseleave:e.onContentLeave}),{default:ce(()=>[Pe(e.$slots,"default"),pe(i,{id:e.id,role:"tooltip"},{default:ce(()=>[Zt(ze(e.ariaLabel),1)]),_:1},8,["id"])]),_:3},16,["aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","z-index","onMouseenter","onMouseleave"])),[[sn,e.shouldShow]]):me("v-if",!0)]),_:3},8,["name","onAfterLeave","onBeforeEnter","onAfterEnter"])],8,["disabled","to"])}var mce=Ge(pce,[["render",gce]]);const vce=(e,t)=>At(e)?e.includes(t):e===t,zc=(e,t,n)=>s=>{vce(Xe(e),t)&&n(s)},bce=$e({name:"ElTooltipTrigger",components:{ElPopperTrigger:ice},props:Q2,setup(e){const{controlled:t,id:n,open:s,onOpen:o,onClose:r,onToggle:i}=Qe(Fb,void 0),a=V(null),l=()=>{if(Xe(t)||e.disabled)return!0},u=yo(e,"trigger"),c=Ls(l,zc(u,"hover",o)),d=Ls(l,zc(u,"hover",r)),f=Ls(l,zc(u,"click",v=>{v.button===0&&i(v)})),h=Ls(l,zc(u,"focus",o)),p=Ls(l,zc(u,"focus",r)),g=Ls(l,zc(u,"contextmenu",v=>{v.preventDefault(),i(v)})),m=Ls(l,v=>{const{code:b}=v;(b===tt.enter||b===tt.space)&&i(v)});return{onBlur:p,onContextMenu:g,onFocus:h,onMouseenter:c,onMouseleave:d,onClick:f,onKeydown:m,open:s,id:n,triggerRef:a}}});function yce(e,t,n,s,o,r){const i=de("el-popper-trigger");return R(),ke(i,{id:e.id,"virtual-ref":e.virtualRef,open:e.open,"virtual-triggering":e.virtualTriggering,class:"el-tooltip__trigger",onBlur:e.onBlur,onClick:e.onClick,onContextmenu:e.onContextMenu,onFocus:e.onFocus,onMouseenter:e.onMouseenter,onMouseleave:e.onMouseleave,onKeydown:e.onKeydown},{default:ce(()=>[Pe(e.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"])}var wce=Ge(bce,[["render",yce]]);const{useModelToggleProps:$ce,useModelToggle:Cce,useModelToggleEmits:xce}=$P("visible"),kce=$e({name:"ElTooltip",components:{ElPopper:iL,ElPopperArrow:Zue,ElTooltipContent:mce,ElTooltipTrigger:wce},props:dt(dt(dt(dt(dt({},$ce),sl),Q2),tL),hce),emits:[...xce,"show","hide"],setup(e,{emit:t}){cse();const n=O(()=>(!ep(e.openDelay),e.openDelay||e.showAfter)),s=O(()=>(!ep(e.visibleArrow),bi(e.visibleArrow)?e.visibleArrow:e.showArrow)),o=kP(),r=V(null),i=()=>{var h;const p=Xe(r);p&&((h=p.popperInstanceRef)==null||h.update())},a=V(!1),{show:l,hide:u}=Cce({indicator:a}),{onOpen:c,onClose:d}=fse({showAfter:n,hideAfter:yo(e,"hideAfter"),open:l,close:u}),f=O(()=>bi(e.visible));return jt(Fb,{controlled:f,id:o,open:Rp(a),trigger:yo(e,"trigger"),onOpen:c,onClose:d,onToggle:()=>{Xe(a)?d():c()},onShow:()=>{t("show")},onHide:()=>{t("hide")},updatePopper:i}),{compatShowAfter:n,compatShowArrow:s,popperRef:r,open:a,hide:u,updatePopper:i,onOpen:c,onClose:d}}}),Sce=["innerHTML"],Ice={key:1};function Ece(e,t,n,s,o,r){const i=de("el-tooltip-trigger"),a=de("el-popper-arrow"),l=de("el-tooltip-content"),u=de("el-popper");return R(),ke(u,{ref:"popperRef"},{default:ce(()=>[pe(i,{disabled:e.disabled,trigger:e.trigger,"virtual-ref":e.virtualRef,"virtual-triggering":e.virtualTriggering},{default:ce(()=>[e.$slots.default?Pe(e.$slots,"default",{key:0}):me("v-if",!0)]),_:3},8,["disabled","trigger","virtual-ref","virtual-triggering"]),pe(l,{"aria-label":e.ariaLabel,"boundaries-padding":e.boundariesPadding,content:e.content,disabled:e.disabled,effect:e.effect,enterable:e.enterable,"fallback-placements":e.fallbackPlacements,"hide-after":e.hideAfter,"gpu-acceleration":e.gpuAcceleration,offset:e.offset,persistent:e.persistent,"popper-class":e.popperClass,"popper-style":e.popperStyle,placement:e.placement,"popper-options":e.popperOptions,pure:e.pure,"raw-content":e.rawContent,"reference-el":e.referenceEl,"show-after":e.compatShowAfter,strategy:e.strategy,teleported:e.teleported,transition:e.transition,"z-index":e.zIndex},{default:ce(()=>[Pe(e.$slots,"content",{},()=>[e.rawContent?(R(),H("span",{key:0,innerHTML:e.content},null,8,Sce)):(R(),H("span",Ice,ze(e.content),1))]),e.compatShowArrow?(R(),ke(a,{key:0,"arrow-offset":e.arrowOffset},null,8,["arrow-offset"])):me("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","show-after","strategy","teleported","transition","z-index"])]),_:3},512)}var Tce=Ge(kce,[["render",Ece]]);const lr=Gt(Tce),_ce=$e({name:"ElAutocomplete",components:{ElTooltip:lr,ElInput:ti,ElScrollbar:Fa,ElIcon:Pt,Loading:Oa},directives:{clickoutside:Nl},inheritAttrs:!1,props:{valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:String,validator:e=>["top","top-start","top-end","bottom","bottom-start","bottom-end"].includes(e),default:"bottom-start"},fetchSuggestions:{type:Function,default:un},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},popperAppendToBody:{type:Boolean,default:!0},highlightFirstItem:{type:Boolean,default:!1}},emits:[Bt,"input","change","focus","blur","clear","select"],setup(e,t){const n=Mt("autocomplete"),s=E2(),o=V([]),r=V(-1),i=V(""),a=V(!1),l=V(!1),u=V(!1),c=V(null),d=V(null),f=V(null),h=O(()=>n.b(String(Qh()))),p=O(()=>(At(o.value)&&o.value.length>0||u.value)&&a.value),g=O(()=>!e.hideLoading&&u.value),m=()=>{ft(()=>{p.value&&(i.value=`${c.value.$el.offsetWidth}px`)})};Ft(()=>{c.value.inputOrTextarea.setAttribute("role","textbox"),c.value.inputOrTextarea.setAttribute("aria-autocomplete","list"),c.value.inputOrTextarea.setAttribute("aria-controls","id"),c.value.inputOrTextarea.setAttribute("aria-activedescendant",`${h.value}-item-${r.value}`)});const v=D=>{l.value||(u.value=!0,e.fetchSuggestions(D,F=>{u.value=!1,!l.value&&(At(F)?(o.value=F,r.value=e.highlightFirstItem?0:-1):So("ElAutocomplete","autocomplete suggestions must be an array"))}))},b=nr(v,e.debounce),$=D=>{if(t.emit("input",D),t.emit(Bt,D),l.value=!1,!e.triggerOnFocus&&!D){l.value=!0,o.value=[];return}b(D)},y=D=>{t.emit("change",D)},w=D=>{a.value=!0,t.emit("focus",D),e.triggerOnFocus&&b(String(e.modelValue))},C=D=>{t.emit("blur",D)},x=()=>{a.value=!1,t.emit(Bt,""),t.emit("clear")},S=()=>{p.value&&r.value>=0&&r.value<o.value.length?_(o.value[r.value]):e.selectWhenUnmatched&&(t.emit("select",{value:e.modelValue}),ft(()=>{o.value=[],r.value=-1}))},T=()=>{a.value=!1},I=()=>{var D;(D=c.value)==null||D.focus()},_=D=>{t.emit("input",D[e.valueKey]),t.emit(Bt,D[e.valueKey]),t.emit("select",D),ft(()=>{o.value=[],r.value=-1})};return{attrs:s,suggestions:o,highlightedIndex:r,dropdownWidth:i,activated:a,suggestionDisabled:l,loading:u,inputRef:c,regionRef:d,popper:f,id:h,suggestionVisible:p,suggestionLoading:g,getData:v,handleInput:$,handleChange:y,handleFocus:w,handleBlur:C,handleClear:x,handleKeyEnter:S,close:T,focus:I,select:_,highlight:D=>{if(!p.value||u.value)return;if(D<0){r.value=-1;return}D>=o.value.length&&(D=o.value.length-1);const F=d.value.querySelector(`.${n.be("suggestion","wrap")}`),M=F.querySelectorAll(`.${n.be("suggestion","list")} li`)[D],B=F.scrollTop,{offsetTop:j,scrollHeight:X}=M;j+X>B+F.clientHeight&&(F.scrollTop+=X),j<B&&(F.scrollTop-=X),r.value=D,c.value.inputOrTextarea.setAttribute("aria-activedescendant",`${h.value}-item-${r.value}`)},onSuggestionShow:m,ns:n}}}),Nce=["aria-expanded","aria-owns"],Ace={key:0},Dce=["id","aria-selected","onClick"];function Rce(e,t,n,s,o,r){const i=de("el-input"),a=de("loading"),l=de("el-icon"),u=de("el-scrollbar"),c=de("el-tooltip"),d=Wo("clickoutside");return R(),ke(c,{ref:"popper",visible:e.suggestionVisible,"onUpdate:visible":t[2]||(t[2]=f=>e.suggestionVisible=f),placement:e.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":`${e.ns.e("popper")} ${e.popperClass}`,"append-to-body":e.popperAppendToBody,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${e.ns.namespace.value}-zoom-in-top`,persistent:"",onShow:e.onSuggestionShow},{content:ce(()=>[K("div",{ref:"regionRef",class:Q([e.ns.b("suggestion"),e.ns.is("loading",e.suggestionLoading)]),style:rt({minWidth:e.dropdownWidth,outline:"none"}),role:"region"},[pe(u,{id:e.id,tag:"ul","wrap-class":e.ns.be("suggestion","wrap"),"view-class":e.ns.be("suggestion","list"),role:"listbox"},{default:ce(()=>[e.suggestionLoading?(R(),H("li",Ace,[pe(l,{class:"is-loading"},{default:ce(()=>[pe(a)]),_:1})])):(R(!0),H(ct,{key:1},en(e.suggestions,(f,h)=>(R(),H("li",{id:`${e.id}-item-${h}`,key:h,class:Q({highlighted:e.highlightedIndex===h}),role:"option","aria-selected":e.highlightedIndex===h,onClick:p=>e.select(f)},[Pe(e.$slots,"default",{item:f},()=>[Zt(ze(f[e.valueKey]),1)])],10,Dce))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:ce(()=>[Ct((R(),H("div",{class:Q([e.ns.b(),e.$attrs.class]),style:rt(e.$attrs.style),role:"combobox","aria-haspopup":"listbox","aria-expanded":e.suggestionVisible,"aria-owns":e.id},[pe(i,uo({ref:"inputRef"},e.attrs,{"model-value":e.modelValue,onInput:e.handleInput,onChange:e.handleChange,onFocus:e.handleFocus,onBlur:e.handleBlur,onClear:e.handleClear,onKeydown:[t[0]||(t[0]=qt(gt(f=>e.highlight(e.highlightedIndex-1),["prevent"]),["up"])),t[1]||(t[1]=qt(gt(f=>e.highlight(e.highlightedIndex+1),["prevent"]),["down"])),qt(e.handleKeyEnter,["enter"]),qt(e.close,["tab"])]}),qh({_:2},[e.$slots.prepend?{name:"prepend",fn:ce(()=>[Pe(e.$slots,"prepend")])}:void 0,e.$slots.append?{name:"append",fn:ce(()=>[Pe(e.$slots,"append")])}:void 0,e.$slots.prefix?{name:"prefix",fn:ce(()=>[Pe(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:ce(()=>[Pe(e.$slots,"suffix")])}:void 0]),1040,["model-value","onInput","onChange","onFocus","onBlur","onClear","onKeydown"])],14,Nce)),[[d,e.close]])]),_:3},8,["visible","placement","popper-class","append-to-body","transition","onShow"])}var Fv=Ge(_ce,[["render",Rce]]);Fv.install=e=>{e.component(Fv.name,Fv)};const Mce=Fv,Oce=Mce,Fce=yt({size:{type:[Number,String],values:["large","default","small"],default:"default",validator:e=>typeof e=="number"},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:et([String,Object])},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:et(String),default:"cover"}}),Pce={error:e=>e instanceof Event},Lce=$e({name:"ElAvatar",components:{ElIcon:Pt},props:Fce,emits:Pce,setup(e,{emit:t}){const n=Mt("avatar"),s=V(!1),o=O(()=>{const{size:l,icon:u,shape:c}=e,d=[n.b()];return Qt(l)&&d.push(n.m(l)),u&&d.push(n.m("icon")),c&&d.push(n.m(c)),d}),r=O(()=>{const{size:l}=e;return Sn(l)?{"--el-avatar-size":Ta(l)}:void 0}),i=O(()=>({objectFit:e.fit}));Le(()=>e.src,()=>s.value=!1);function a(l){s.value=!0,t("error",l)}return{hasLoadError:s,avatarClass:o,sizeStyle:r,fitStyle:i,handleError:a}}}),Bce=["src","alt","srcset"];function zce(e,t,n,s,o,r){const i=de("el-icon");return R(),H("span",{class:Q(e.avatarClass),style:rt(e.sizeStyle)},[(e.src||e.srcSet)&&!e.hasLoadError?(R(),H("img",{key:0,src:e.src,alt:e.alt,srcset:e.srcSet,style:rt(e.fitStyle),onError:t[0]||(t[0]=(...a)=>e.handleError&&e.handleError(...a))},null,44,Bce)):e.icon?(R(),ke(i,{key:1},{default:ce(()=>[(R(),ke(on(e.icon)))]),_:1})):Pe(e.$slots,"default",{key:2})],6)}var Vce=Ge(Lce,[["render",zce]]);const Wce=Gt(Vce),fA=e=>Math.pow(e,3),Hce=e=>e<.5?fA(e*2)/2:1-fA((1-e)*2)/2,Uce={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},jce={click:e=>e instanceof MouseEvent},hA="ElBacktop",Gce=$e({name:hA,components:{ElIcon:Pt,CaretTop:$oe},props:Uce,emits:jce,setup(e,{emit:t}){const n=Mt("backtop"),s=bo(document.documentElement),o=bo(document),r=V(!1),i=O(()=>`${e.bottom}px`),a=O(()=>`${e.right}px`),l=()=>{if(!s.value)return;const f=Date.now(),h=s.value.scrollTop,p=()=>{if(!s.value)return;const g=(Date.now()-f)/500;g<1?(s.value.scrollTop=h*(1-Hce(g)),requestAnimationFrame(p)):s.value.scrollTop=0};requestAnimationFrame(p)},u=()=>{s.value&&(r.value=s.value.scrollTop>=e.visibilityHeight)},c=f=>{l(),t("click",f)},d=lP(u,300);return Ft(()=>{var f;e.target&&(s.value=(f=document.querySelector(e.target))!=null?f:void 0,s.value||So(hA,`target is not existed: ${e.target}`),o.value=s.value),Bs(o,"scroll",d)}),{visible:r,styleBottom:i,styleRight:a,handleClick:c,ns:n}}});function Kce(e,t,n,s,o,r){const i=de("caret-top"),a=de("el-icon");return R(),ke(ks,{name:`${e.ns.namespace.value}-fade-in`},{default:ce(()=>[e.visible?(R(),H("div",{key:0,style:rt({right:e.styleRight,bottom:e.styleBottom}),class:Q(e.ns.b()),onClick:t[0]||(t[0]=gt((...l)=>e.handleClick&&e.handleClick(...l),["stop"]))},[Pe(e.$slots,"default",{},()=>[pe(a,{class:Q(e.ns.e("icon"))},{default:ce(()=>[pe(i)]),_:1},8,["class"])])],6)):me("v-if",!0)]),_:3},8,["name"])}var qce=Ge(Gce,[["render",Kce]]);const Yce=Gt(qce),Xce=yt({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),Zce=$e({name:"ElBadge",props:Xce,setup(e){const t=Mt("badge"),n=O(()=>e.isDot?"":typeof e.value=="number"&&typeof e.max=="number"?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`);return{ns:t,content:n}}}),Jce=["textContent"];function Qce(e,t,n,s,o,r){return R(),H("div",{class:Q(e.ns.b())},[Pe(e.$slots,"default"),pe(ks,{name:"el-zoom-in-center"},{default:ce(()=>[Ct(K("sup",{class:Q([e.ns.e("content"),e.ns.em("content",e.type),e.ns.is("fixed",!!e.$slots.default),e.ns.is("dot",e.isDot)]),textContent:ze(e.content)},null,10,Jce),[[sn,!e.hidden&&(e.content||e.content==="0"||e.isDot)]])]),_:1})],2)}var ede=Ge(Zce,[["render",Qce]]);const aL=Gt(ede),tde=yt({separator:{type:String,default:"/"},separatorIcon:{type:et([String,Object]),default:""}}),nde=$e({name:"ElBreadcrumb",props:tde,setup(e){const t=Mt("breadcrumb"),n=V();return jt(OF,e),Ft(()=>{const s=n.value.querySelectorAll(`.${t.e("item")}`);s.length&&s[s.length-1].setAttribute("aria-current","page")}),{ns:t,breadcrumb:n}}});function sde(e,t,n,s,o,r){return R(),H("div",{ref:"breadcrumb",class:Q(e.ns.b()),"aria-label":"Breadcrumb",role:"navigation"},[Pe(e.$slots,"default")],2)}var ode=Ge(nde,[["render",sde]]);const rde=yt({to:{type:et([String,Object]),default:""},replace:{type:Boolean,default:!1}}),ide="ElBreadcrumbItem",ade=$e({name:ide,components:{ElIcon:Pt},props:rde,setup(e){const n=Wt().appContext.config.globalProperties.$router,s=Qe(OF,void 0),o=Mt("breadcrumb"),r=V();return Ft(()=>{r.value.setAttribute("role","link"),r.value.addEventListener("click",()=>{!e.to||!n||(e.replace?n.replace(e.to):n.push(e.to))})}),{ns:o,link:r,separator:s==null?void 0:s.separator,separatorIcon:s==null?void 0:s.separatorIcon}}});function lde(e,t,n,s,o,r){const i=de("el-icon");return R(),H("span",{class:Q(e.ns.e("item"))},[K("span",{ref:"link",class:Q([e.ns.e("inner"),e.ns.is("link",!!e.to)]),role:"link"},[Pe(e.$slots,"default")],2),e.separatorIcon?(R(),ke(i,{key:0,class:Q(e.ns.e("separator"))},{default:ce(()=>[(R(),ke(on(e.separatorIcon)))]),_:1},8,["class"])):(R(),H("span",{key:1,class:Q(e.ns.e("separator")),role:"presentation"},ze(e.separator),3))],2)}var lL=Ge(ade,[["render",lde]]);const ude=Gt(ode,{BreadcrumbItem:lL}),cde=cs(lL);function $o(e,t){dde(e)&&(e="100%");var n=fde(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Um(e){return Math.min(1,Math.max(0,e))}function dde(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function fde(e){return typeof e=="string"&&e.indexOf("%")!==-1}function uL(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function jm(e){return e<=1?Number(e)*100+"%":e}function xu(e){return e.length===1?"0"+e:String(e)}function hde(e,t,n){return{r:$o(e,255)*255,g:$o(t,255)*255,b:$o(n,255)*255}}function pA(e,t,n){e=$o(e,255),t=$o(t,255),n=$o(n,255);var s=Math.max(e,t,n),o=Math.min(e,t,n),r=0,i=0,a=(s+o)/2;if(s===o)i=0,r=0;else{var l=s-o;switch(i=a>.5?l/(2-s-o):l/(s+o),s){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4;break}r/=6}return{h:r,s:i,l:a}}function Nw(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function pde(e,t,n){var s,o,r;if(e=$o(e,360),t=$o(t,100),n=$o(n,100),t===0)o=n,r=n,s=n;else{var i=n<.5?n*(1+t):n+t-n*t,a=2*n-i;s=Nw(a,i,e+1/3),o=Nw(a,i,e),r=Nw(a,i,e-1/3)}return{r:s*255,g:o*255,b:r*255}}function gA(e,t,n){e=$o(e,255),t=$o(t,255),n=$o(n,255);var s=Math.max(e,t,n),o=Math.min(e,t,n),r=0,i=s,a=s-o,l=s===0?0:a/s;if(s===o)r=0;else{switch(s){case e:r=(t-n)/a+(t<n?6:0);break;case t:r=(n-e)/a+2;break;case n:r=(e-t)/a+4;break}r/=6}return{h:r,s:l,v:i}}function gde(e,t,n){e=$o(e,360)*6,t=$o(t,100),n=$o(n,100);var s=Math.floor(e),o=e-s,r=n*(1-t),i=n*(1-o*t),a=n*(1-(1-o)*t),l=s%6,u=[n,i,r,r,a,n][l],c=[a,n,n,i,r,r][l],d=[r,r,a,n,n,i][l];return{r:u*255,g:c*255,b:d*255}}function mA(e,t,n,s){var o=[xu(Math.round(e).toString(16)),xu(Math.round(t).toString(16)),xu(Math.round(n).toString(16))];return s&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function mde(e,t,n,s,o){var r=[xu(Math.round(e).toString(16)),xu(Math.round(t).toString(16)),xu(Math.round(n).toString(16)),xu(vde(s))];return o&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))&&r[3].startsWith(r[3].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function vde(e){return Math.round(parseFloat(e)*255).toString(16)}function vA(e){return fr(e)/255}function fr(e){return parseInt(e,16)}function bde(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var yC={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function yde(e){var t={r:0,g:0,b:0},n=1,s=null,o=null,r=null,i=!1,a=!1;return typeof e=="string"&&(e=Cde(e)),typeof e=="object"&&(ca(e.r)&&ca(e.g)&&ca(e.b)?(t=hde(e.r,e.g,e.b),i=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):ca(e.h)&&ca(e.s)&&ca(e.v)?(s=jm(e.s),o=jm(e.v),t=gde(e.h,s,o),i=!0,a="hsv"):ca(e.h)&&ca(e.s)&&ca(e.l)&&(s=jm(e.s),r=jm(e.l),t=pde(e.h,s,r),i=!0,a="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=uL(n),{ok:i,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var wde="[-\\+]?\\d+%?",$de="[-\\+]?\\d*\\.\\d+%?",rl="(?:"+$de+")|(?:"+wde+")",Aw="[\\s|\\(]+("+rl+")[,|\\s]+("+rl+")[,|\\s]+("+rl+")\\s*\\)?",Dw="[\\s|\\(]+("+rl+")[,|\\s]+("+rl+")[,|\\s]+("+rl+")[,|\\s]+("+rl+")\\s*\\)?",fi={CSS_UNIT:new RegExp(rl),rgb:new RegExp("rgb"+Aw),rgba:new RegExp("rgba"+Dw),hsl:new RegExp("hsl"+Aw),hsla:new RegExp("hsla"+Dw),hsv:new RegExp("hsv"+Aw),hsva:new RegExp("hsva"+Dw),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Cde(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(yC[e])e=yC[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=fi.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=fi.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=fi.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=fi.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=fi.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=fi.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=fi.hex8.exec(e),n?{r:fr(n[1]),g:fr(n[2]),b:fr(n[3]),a:vA(n[4]),format:t?"name":"hex8"}:(n=fi.hex6.exec(e),n?{r:fr(n[1]),g:fr(n[2]),b:fr(n[3]),format:t?"name":"hex"}:(n=fi.hex4.exec(e),n?{r:fr(n[1]+n[1]),g:fr(n[2]+n[2]),b:fr(n[3]+n[3]),a:vA(n[4]+n[4]),format:t?"name":"hex8"}:(n=fi.hex3.exec(e),n?{r:fr(n[1]+n[1]),g:fr(n[2]+n[2]),b:fr(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function ca(e){return Boolean(fi.CSS_UNIT.exec(String(e)))}var rh=function(){function e(t,n){t===void 0&&(t=""),n===void 0&&(n={});var s;if(t instanceof e)return t;typeof t=="number"&&(t=bde(t)),this.originalInput=t;var o=yde(t);this.originalInput=t,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(s=n.format)!==null&&s!==void 0?s:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),n,s,o,r=t.r/255,i=t.g/255,a=t.b/255;return r<=.03928?n=r/12.92:n=Math.pow((r+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),a<=.03928?o=a/12.92:o=Math.pow((a+.055)/1.055,2.4),.2126*n+.7152*s+.0722*o},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=uL(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var t=gA(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=gA(this.r,this.g,this.b),n=Math.round(t.h*360),s=Math.round(t.s*100),o=Math.round(t.v*100);return this.a===1?"hsv("+n+", "+s+"%, "+o+"%)":"hsva("+n+", "+s+"%, "+o+"%, "+this.roundA+")"},e.prototype.toHsl=function(){var t=pA(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=pA(this.r,this.g,this.b),n=Math.round(t.h*360),s=Math.round(t.s*100),o=Math.round(t.l*100);return this.a===1?"hsl("+n+", "+s+"%, "+o+"%)":"hsla("+n+", "+s+"%, "+o+"%, "+this.roundA+")"},e.prototype.toHex=function(t){return t===void 0&&(t=!1),mA(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),mde(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),n=Math.round(this.g),s=Math.round(this.b);return this.a===1?"rgb("+t+", "+n+", "+s+")":"rgba("+t+", "+n+", "+s+", "+this.roundA+")"},e.prototype.toPercentageRgb=function(){var t=function(n){return Math.round($o(n,255)*100)+"%"};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(n){return Math.round($o(n,255)*100)};return this.a===1?"rgb("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%)":"rgba("+t(this.r)+"%, "+t(this.g)+"%, "+t(this.b)+"%, "+this.roundA+")"},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+mA(this.r,this.g,this.b,!1),n=0,s=Object.entries(yC);n<s.length;n++){var o=s[n],r=o[0],i=o[1];if(t===i)return r}return!1},e.prototype.toString=function(t){var n=Boolean(t);t=t!=null?t:this.format;var s=!1,o=this.a<1&&this.a>=0,r=!n&&o&&(t.startsWith("hex")||t==="name");return r?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(s=this.toRgbString()),t==="prgb"&&(s=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(s=this.toHexString()),t==="hex3"&&(s=this.toHexString(!0)),t==="hex4"&&(s=this.toHex8String(!0)),t==="hex8"&&(s=this.toHex8String()),t==="name"&&(s=this.toName()),t==="hsl"&&(s=this.toHslString()),t==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=Um(n.l),new e(n)},e.prototype.brighten=function(t){t===void 0&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),new e(n)},e.prototype.darken=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=Um(n.l),new e(n)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=Um(n.s),new e(n)},e.prototype.saturate=function(t){t===void 0&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=Um(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),s=(n.h+t)%360;return n.h=s<0?360+s:s,new e(n)},e.prototype.mix=function(t,n){n===void 0&&(n=50);var s=this.toRgb(),o=new e(t).toRgb(),r=n/100,i={r:(o.r-s.r)*r+s.r,g:(o.g-s.g)*r+s.g,b:(o.b-s.b)*r+s.b,a:(o.a-s.a)*r+s.a};return new e(i)},e.prototype.analogous=function(t,n){t===void 0&&(t=6),n===void 0&&(n=30);var s=this.toHsl(),o=360/n,r=[this];for(s.h=(s.h-(o*t>>1)+720)%360;--t;)s.h=(s.h+o)%360,r.push(new e(s));return r},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var n=this.toHsv(),s=n.h,o=n.s,r=n.v,i=[],a=1/t;t--;)i.push(new e({h:s,s:o,v:r})),r=(r+a)%1;return i},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),s=new e(t).toRgb();return new e({r:s.r+(n.r-s.r)*n.a,g:s.g+(n.g-s.g)*n.a,b:s.b+(n.b-s.b)*n.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),s=n.h,o=[this],r=360/t,i=1;i<t;i++)o.push(new e({h:(s+i*r)%360,s:n.s,l:n.l}));return o},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();const wC=["default","primary","success","warning","info","danger","text",""],xde=["button","submit","reset"],$C=yt({size:_b,disabled:Boolean,type:{type:String,values:wC,default:""},icon:{type:et([String,Object]),default:""},nativeType:{type:String,values:xde,default:"button"},loading:Boolean,loadingIcon:{type:et([String,Object]),default:()=>Oa},plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,autoInsertSpace:{type:Boolean,default:void 0}}),kde={click:e=>e instanceof MouseEvent},Sde=$e({name:"ElButton",components:{ElIcon:Pt,Loading:Oa},props:$C,emits:kde,setup(e,{emit:t,slots:n}){const s=V(),o=Qe(MF,void 0),r=uf("button"),i=Mt("button"),a=O(()=>{var m,v,b;return(b=(v=e.autoInsertSpace)!=null?v:(m=r.value)==null?void 0:m.autoInsertSpace)!=null?b:!1}),l=O(()=>{var m;const v=(m=n.default)==null?void 0:m.call(n);if(a.value&&(v==null?void 0:v.length)===1){const b=v[0];if((b==null?void 0:b.type)===Fp){const $=b.children;return/^\p{Unified_Ideograph}{2}$/u.test($)}}return!1}),{form:u}=cf(),c=Ss(O(()=>o==null?void 0:o.size)),d=Bp(),f=O(()=>e.type||(o==null?void 0:o.type)||""),h=O(()=>Ote(`--el-color-${e.type}`).value),p=O(()=>{let m={};const v=e.color||h.value;if(v){const b=new rh(v).shade(10).toString();if(e.plain)m={"--el-button-bg-color":new rh(v).tint(90).toString(),"--el-button-text-color":v,"--el-button-hover-text-color":"var(--el-color-white)","--el-button-hover-bg-color":v,"--el-button-hover-border-color":v,"--el-button-active-bg-color":b,"--el-button-active-text-color":"var(--el-color-white)","--el-button-active-border-color":b};else{const $=new rh(v).tint(20).toString();m={"--el-button-bg-color":v,"--el-button-border-color":v,"--el-button-hover-bg-color":$,"--el-button-hover-border-color":$,"--el-button-active-bg-color":b,"--el-button-active-border-color":b}}if(d.value){const $=new rh(v).tint(50).toString();m["--el-button-disabled-bg-color"]=$,m["--el-button-disabled-border-color"]=$}}return m});return{buttonRef:s,buttonStyle:p,buttonSize:c,buttonType:f,buttonDisabled:d,shouldAddSpace:l,handleClick:m=>{e.nativeType==="reset"&&(u==null||u.resetFields()),t("click",m)},ns:i}}}),Ide=["disabled","autofocus","type"];function Ede(e,t,n,s,o,r){const i=de("el-icon");return R(),H("button",{ref:"buttonRef",class:Q([e.ns.b(),e.ns.m(e.buttonType),e.ns.m(e.buttonSize),e.ns.is("disabled",e.buttonDisabled),e.ns.is("loading",e.loading),e.ns.is("plain",e.plain),e.ns.is("round",e.round),e.ns.is("circle",e.circle)]),disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType,style:rt(e.buttonStyle),onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},[e.loading?(R(),H(ct,{key:0},[e.$slots.loading?Pe(e.$slots,"loading",{key:0}):(R(),ke(i,{key:1,class:Q(e.ns.is("loading"))},{default:ce(()=>[(R(),ke(on(e.loadingIcon)))]),_:1},8,["class"]))],2112)):e.icon?(R(),ke(i,{key:1},{default:ce(()=>[(R(),ke(on(e.icon)))]),_:1})):me("v-if",!0),e.$slots.default?(R(),H("span",{key:2,class:Q({[e.ns.em("text","expand")]:e.shouldAddSpace})},[Pe(e.$slots,"default")],2)):me("v-if",!0)],14,Ide)}var Tde=Ge(Sde,[["render",Ede]]);const _de={size:$C.size,type:$C.type},Nde=$e({name:"ElButtonGroup",props:_de,setup(e){return jt(MF,En({size:yo(e,"size"),type:yo(e,"type")})),{ns:Mt("button")}}});function Ade(e,t,n,s,o,r){return R(),H("div",{class:Q(`${e.ns.b("group")}`)},[Pe(e.$slots,"default")],2)}var cL=Ge(Nde,[["render",Ade]]);const sa=Gt(Tde,{ButtonGroup:cL}),dL=cs(cL);var fL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(Fn,function(){var n=1e3,s=6e4,o=36e5,r="millisecond",i="second",a="minute",l="hour",u="day",c="week",d="month",f="quarter",h="year",p="date",g="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},$=function(D,F,P){var M=String(D);return!M||M.length>=F?D:""+Array(F+1-M.length).join(P)+D},y={s:$,z:function(D){var F=-D.utcOffset(),P=Math.abs(F),M=Math.floor(P/60),B=P%60;return(F<=0?"+":"-")+$(M,2,"0")+":"+$(B,2,"0")},m:function D(F,P){if(F.date()<P.date())return-D(P,F);var M=12*(P.year()-F.year())+(P.month()-F.month()),B=F.clone().add(M,d),j=P-B<0,X=F.clone().add(M+(j?-1:1),d);return+(-(M+(P-B)/(j?B-X:X-B))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:d,y:h,w:c,d:u,D:p,h:l,m:a,s:i,ms:r,Q:f}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},w="en",C={};C[w]=b;var x=function(D){return D instanceof _},S=function(D,F,P){var M;if(!D)return w;if(typeof D=="string")C[D]&&(M=D),F&&(C[D]=F,M=D);else{var B=D.name;C[B]=D,M=B}return!P&&M&&(w=M),M||!P&&w},T=function(D,F){if(x(D))return D.clone();var P=typeof F=="object"?F:{};return P.date=D,P.args=arguments,new _(P)},I=y;I.l=S,I.i=x,I.w=function(D,F){return T(D,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var _=function(){function D(P){this.$L=S(P.locale,null,!0),this.parse(P)}var F=D.prototype;return F.parse=function(P){this.$d=function(M){var B=M.date,j=M.utc;if(B===null)return new Date(NaN);if(I.u(B))return new Date;if(B instanceof Date)return new Date(B);if(typeof B=="string"&&!/Z$/i.test(B)){var X=B.match(m);if(X){var ae=X[2]-1||0,be=(X[7]||"0").substring(0,3);return j?new Date(Date.UTC(X[1],ae,X[3]||1,X[4]||0,X[5]||0,X[6]||0,be)):new Date(X[1],ae,X[3]||1,X[4]||0,X[5]||0,X[6]||0,be)}}return new Date(B)}(P),this.$x=P.x||{},this.init()},F.init=function(){var P=this.$d;this.$y=P.getFullYear(),this.$M=P.getMonth(),this.$D=P.getDate(),this.$W=P.getDay(),this.$H=P.getHours(),this.$m=P.getMinutes(),this.$s=P.getSeconds(),this.$ms=P.getMilliseconds()},F.$utils=function(){return I},F.isValid=function(){return this.$d.toString()!==g},F.isSame=function(P,M){var B=T(P);return this.startOf(M)<=B&&B<=this.endOf(M)},F.isAfter=function(P,M){return T(P)<this.startOf(M)},F.isBefore=function(P,M){return this.endOf(M)<T(P)},F.$g=function(P,M,B){return I.u(P)?this[M]:this.set(B,P)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(P,M){var B=this,j=!!I.u(M)||M,X=I.p(P),ae=function(fe,De){var We=I.w(B.$u?Date.UTC(B.$y,De,fe):new Date(B.$y,De,fe),B);return j?We:We.endOf(u)},be=function(fe,De){return I.w(B.toDate()[fe].apply(B.toDate("s"),(j?[0,0,0,0]:[23,59,59,999]).slice(De)),B)},ie=this.$W,ye=this.$M,ue=this.$D,Z="set"+(this.$u?"UTC":"");switch(X){case h:return j?ae(1,0):ae(31,11);case d:return j?ae(1,ye):ae(0,ye+1);case c:var ee=this.$locale().weekStart||0,te=(ie<ee?ie+7:ie)-ee;return ae(j?ue-te:ue+(6-te),ye);case u:case p:return be(Z+"Hours",0);case l:return be(Z+"Minutes",1);case a:return be(Z+"Seconds",2);case i:return be(Z+"Milliseconds",3);default:return this.clone()}},F.endOf=function(P){return this.startOf(P,!1)},F.$set=function(P,M){var B,j=I.p(P),X="set"+(this.$u?"UTC":""),ae=(B={},B[u]=X+"Date",B[p]=X+"Date",B[d]=X+"Month",B[h]=X+"FullYear",B[l]=X+"Hours",B[a]=X+"Minutes",B[i]=X+"Seconds",B[r]=X+"Milliseconds",B)[j],be=j===u?this.$D+(M-this.$W):M;if(j===d||j===h){var ie=this.clone().set(p,1);ie.$d[ae](be),ie.init(),this.$d=ie.set(p,Math.min(this.$D,ie.daysInMonth())).$d}else ae&&this.$d[ae](be);return this.init(),this},F.set=function(P,M){return this.clone().$set(P,M)},F.get=function(P){return this[I.p(P)]()},F.add=function(P,M){var B,j=this;P=Number(P);var X=I.p(M),ae=function(ye){var ue=T(j);return I.w(ue.date(ue.date()+Math.round(ye*P)),j)};if(X===d)return this.set(d,this.$M+P);if(X===h)return this.set(h,this.$y+P);if(X===u)return ae(1);if(X===c)return ae(7);var be=(B={},B[a]=s,B[l]=o,B[i]=n,B)[X]||1,ie=this.$d.getTime()+P*be;return I.w(ie,this)},F.subtract=function(P,M){return this.add(-1*P,M)},F.format=function(P){var M=this,B=this.$locale();if(!this.isValid())return B.invalidDate||g;var j=P||"YYYY-MM-DDTHH:mm:ssZ",X=I.z(this),ae=this.$H,be=this.$m,ie=this.$M,ye=B.weekdays,ue=B.months,Z=function(De,We,He,Ve){return De&&(De[We]||De(M,j))||He[We].substr(0,Ve)},ee=function(De){return I.s(ae%12||12,De,"0")},te=B.meridiem||function(De,We,He){var Ve=De<12?"AM":"PM";return He?Ve.toLowerCase():Ve},fe={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ie+1,MM:I.s(ie+1,2,"0"),MMM:Z(B.monthsShort,ie,ue,3),MMMM:Z(ue,ie),D:this.$D,DD:I.s(this.$D,2,"0"),d:String(this.$W),dd:Z(B.weekdaysMin,this.$W,ye,2),ddd:Z(B.weekdaysShort,this.$W,ye,3),dddd:ye[this.$W],H:String(ae),HH:I.s(ae,2,"0"),h:ee(1),hh:ee(2),a:te(ae,be,!0),A:te(ae,be,!1),m:String(be),mm:I.s(be,2,"0"),s:String(this.$s),ss:I.s(this.$s,2,"0"),SSS:I.s(this.$ms,3,"0"),Z:X};return j.replace(v,function(De,We){return We||fe[De]||X.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(P,M,B){var j,X=I.p(M),ae=T(P),be=(ae.utcOffset()-this.utcOffset())*s,ie=this-ae,ye=I.m(this,ae);return ye=(j={},j[h]=ye/12,j[d]=ye,j[f]=ye/3,j[c]=(ie-be)/6048e5,j[u]=(ie-be)/864e5,j[l]=ie/o,j[a]=ie/s,j[i]=ie/n,j)[X]||ie,B?ye:I.a(ye)},F.daysInMonth=function(){return this.endOf(d).$D},F.$locale=function(){return C[this.$L]},F.locale=function(P,M){if(!P)return this.$L;var B=this.clone(),j=S(P,M,!0);return j&&(B.$L=j),B},F.clone=function(){return I.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},D}(),N=_.prototype;return T.prototype=N,[["$ms",r],["$s",i],["$m",a],["$H",l],["$W",u],["$M",d],["$y",h],["$D",p]].forEach(function(D){N[D[1]]=function(F){return this.$g(F,D[0],D[1])}}),T.extend=function(D,F){return D.$i||(D(F,_,T),D.$i=!0),T},T.locale=S,T.isDayjs=x,T.unix=function(D){return T(1e3*D)},T.en=C[w],T.Ls=C,T.p={},T})})(fL);var kt=fL.exports,hL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(Fn,function(){return function(n,s,o){var r=s.prototype,i=function(d){return d&&(d.indexOf?d:d.s)},a=function(d,f,h,p,g){var m=d.name?d:d.$locale(),v=i(m[f]),b=i(m[h]),$=v||b.map(function(w){return w.substr(0,p)});if(!g)return $;var y=m.weekStart;return $.map(function(w,C){return $[(C+(y||0))%7]})},l=function(){return o.Ls[o.locale()]},u=function(d,f){return d.formats[f]||function(h){return h.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,g,m){return g||m.slice(1)})}(d.formats[f.toUpperCase()])},c=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):a(d,"months")},monthsShort:function(f){return f?f.format("MMM"):a(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):a(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):a(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):a(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return u(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return c.bind(this)()},o.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return o.weekdays()},weekdaysShort:function(){return o.weekdaysShort()},weekdaysMin:function(){return o.weekdaysMin()},months:function(){return o.months()},monthsShort:function(){return o.monthsShort()},longDateFormat:function(f){return u(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},o.months=function(){return a(l(),"months")},o.monthsShort=function(){return a(l(),"monthsShort","months",3)},o.weekdays=function(d){return a(l(),"weekdays",null,null,d)},o.weekdaysShort=function(d){return a(l(),"weekdaysShort","weekdays",3,d)},o.weekdaysMin=function(d){return a(l(),"weekdaysMin","weekdays",2,d)}}})})(hL);var pL=hL.exports,gL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(Fn,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},s=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,o=/\d\d/,r=/\d\d?/,i=/\d*[^\s\d-_:/()]+/,a={},l=function(g){return(g=+g)+(g>68?1900:2e3)},u=function(g){return function(m){this[g]=+m}},c=[/[+-]\d\d:?(\d\d)?|Z/,function(g){(this.zone||(this.zone={})).offset=function(m){if(!m||m==="Z")return 0;var v=m.match(/([+-]|\d\d)/g),b=60*v[1]+(+v[2]||0);return b===0?0:v[0]==="+"?-b:b}(g)}],d=function(g){var m=a[g];return m&&(m.indexOf?m:m.s.concat(m.f))},f=function(g,m){var v,b=a.meridiem;if(b){for(var $=1;$<=24;$+=1)if(g.indexOf(b($,0,m))>-1){v=$>12;break}}else v=g===(m?"pm":"PM");return v},h={A:[i,function(g){this.afternoon=f(g,!1)}],a:[i,function(g){this.afternoon=f(g,!0)}],S:[/\d/,function(g){this.milliseconds=100*+g}],SS:[o,function(g){this.milliseconds=10*+g}],SSS:[/\d{3}/,function(g){this.milliseconds=+g}],s:[r,u("seconds")],ss:[r,u("seconds")],m:[r,u("minutes")],mm:[r,u("minutes")],H:[r,u("hours")],h:[r,u("hours")],HH:[r,u("hours")],hh:[r,u("hours")],D:[r,u("day")],DD:[o,u("day")],Do:[i,function(g){var m=a.ordinal,v=g.match(/\d+/);if(this.day=v[0],m)for(var b=1;b<=31;b+=1)m(b).replace(/\[|\]/g,"")===g&&(this.day=b)}],M:[r,u("month")],MM:[o,u("month")],MMM:[i,function(g){var m=d("months"),v=(d("monthsShort")||m.map(function(b){return b.substr(0,3)})).indexOf(g)+1;if(v<1)throw new Error;this.month=v%12||v}],MMMM:[i,function(g){var m=d("months").indexOf(g)+1;if(m<1)throw new Error;this.month=m%12||m}],Y:[/[+-]?\d+/,u("year")],YY:[o,function(g){this.year=l(g)}],YYYY:[/\d{4}/,u("year")],Z:c,ZZ:c};function p(g){var m,v;m=g,v=a&&a.formats;for(var b=(g=m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(T,I,_){var N=_&&_.toUpperCase();return I||v[_]||n[_]||v[N].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(D,F,P){return F||P.slice(1)})})).match(s),$=b.length,y=0;y<$;y+=1){var w=b[y],C=h[w],x=C&&C[0],S=C&&C[1];b[y]=S?{regex:x,parser:S}:w.replace(/^\[|\]$/g,"")}return function(T){for(var I={},_=0,N=0;_<$;_+=1){var D=b[_];if(typeof D=="string")N+=D.length;else{var F=D.regex,P=D.parser,M=T.substr(N),B=F.exec(M)[0];P.call(I,B),T=T.replace(B,"")}}return function(j){var X=j.afternoon;if(X!==void 0){var ae=j.hours;X?ae<12&&(j.hours+=12):ae===12&&(j.hours=0),delete j.afternoon}}(I),I}}return function(g,m,v){v.p.customParseFormat=!0,g&&g.parseTwoDigitYear&&(l=g.parseTwoDigitYear);var b=m.prototype,$=b.parse;b.parse=function(y){var w=y.date,C=y.utc,x=y.args;this.$u=C;var S=x[1];if(typeof S=="string"){var T=x[2]===!0,I=x[3]===!0,_=T||I,N=x[2];I&&(N=x[2]),a=this.$locale(),!T&&N&&(a=v.Ls[N]),this.$d=function(M,B,j){try{if(["x","X"].indexOf(B)>-1)return new Date((B==="X"?1e3:1)*M);var X=p(B)(M),ae=X.year,be=X.month,ie=X.day,ye=X.hours,ue=X.minutes,Z=X.seconds,ee=X.milliseconds,te=X.zone,fe=new Date,De=ie||(ae||be?1:fe.getDate()),We=ae||fe.getFullYear(),He=0;ae&&!be||(He=be>0?be-1:fe.getMonth());var Ve=ye||0,Y=ue||0,ne=Z||0,q=ee||0;return te?new Date(Date.UTC(We,He,De,Ve,Y,ne,q+60*te.offset*1e3)):j?new Date(Date.UTC(We,He,De,Ve,Y,ne,q)):new Date(We,He,De,Ve,Y,ne,q)}catch{return new Date("")}}(w,S,C),this.init(),N&&N!==!0&&(this.$L=this.locale(N).$L),_&&w!=this.format(S)&&(this.$d=new Date("")),a={}}else if(S instanceof Array)for(var D=S.length,F=1;F<=D;F+=1){x[1]=S[F-1];var P=v.apply(this,x);if(P.isValid()){this.$d=P.$d,this.$L=P.$L,this.init();break}F===D&&(this.$d=new Date(""))}else $.call(this,y)}}})})(gL);var ek=gL.exports;const CC="HH:mm:ss",ih="YYYY-MM-DD",Dde={date:ih,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${ih} ${CC}`,monthrange:"YYYY-MM",daterange:ih,datetimerange:`${ih} ${CC}`};var Rde=xte;function Mde(e,t){return Rde(e,t)}var wi=Mde;const sr=e=>["","large","default","small"].includes(e),mL=e=>["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"].includes(e),tk={id:{type:[Array,String]},name:{type:[Array,String],default:""},popperClass:{type:String,default:""},format:{type:String},valueFormat:{type:String},type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:_a},editable:{type:Boolean,default:!0},prefixIcon:{type:[String,Object],default:""},size:{type:String,validator:sr},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},modelValue:{type:[Date,Array,String,Number],default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:[Date,Array]},defaultTime:{type:[Date,Array]},isRange:{type:Boolean,default:!1},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean},bA=function(e,t){const n=e instanceof Date,s=t instanceof Date;return n&&s?e.getTime()===t.getTime():!n&&!s?e===t:!1},yA=function(e,t){const n=e instanceof Array,s=t instanceof Array;return n&&s?e.length!==t.length?!1:e.every((o,r)=>bA(o,t[r])):!n&&!s?bA(e,t):!1},wA=function(e,t,n){const s=tp(t)||t==="x"?kt(e).locale(n):kt(e,t).locale(n);return s.isValid()?s:void 0},$A=function(e,t,n){return tp(t)?e:t==="x"?+e:kt(e).locale(n).format(t)},Ode=$e({name:"Picker",components:{ElInput:ti,ElTooltip:lr,ElIcon:Pt},props:tk,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change"],setup(e,t){const{lang:n}=Tn(),s=Qe(ar,{}),o=Qe(Ai,{}),r=Qe("ElPopperOptions",{}),i=V(),a=V(),l=V(!1),u=V(!1),c=V(null);Le(l,oe=>{var Me;oe?c.value=e.modelValue:(ie.value=null,ft(()=>{d(e.modelValue)}),t.emit("blur"),ue(),e.validateEvent&&((Me=o.validate)==null||Me.call(o,"blur")))});const d=(oe,Me)=>{var Re;(Me||!yA(oe,c.value))&&(t.emit("change",oe),e.validateEvent&&((Re=o.validate)==null||Re.call(o,"change")))},f=oe=>{if(!yA(e.modelValue,oe)){let Me;Array.isArray(oe)?Me=oe.map(Re=>$A(Re,e.valueFormat,n.value)):oe&&(Me=$A(oe,e.valueFormat,n.value)),t.emit("update:modelValue",oe&&Me,n.value)}},h=O(()=>{if(a.value){const oe=B.value?a.value:a.value.$el;return Array.from(oe.querySelectorAll("input"))}return[]}),p=O(()=>h==null?void 0:h.value[0]),g=O(()=>h==null?void 0:h.value[1]),m=(oe,Me,Re)=>{const ve=h.value;!ve.length||(!Re||Re==="min"?(ve[0].setSelectionRange(oe,Me),ve[0].focus()):Re==="max"&&(ve[1].setSelectionRange(oe,Me),ve[1].focus()))},v=(oe="",Me=!1)=>{l.value=Me;let Re;Array.isArray(oe)?Re=oe.map(ve=>ve.toDate()):Re=oe&&oe.toDate(),ie.value=null,f(Re)},b=(oe=!0)=>{let Me=p.value;!oe&&B.value&&(Me=g.value),Me&&Me.focus()},$=oe=>{e.readonly||w.value||l.value||(l.value=!0,t.emit("focus",oe))},y=()=>{var oe;(oe=i.value)==null||oe.onClose(),ue()},w=O(()=>e.disabled||s.disabled),C=O(()=>{let oe;if(F.value?ne.value.getDefaultValue&&(oe=ne.value.getDefaultValue()):Array.isArray(e.modelValue)?oe=e.modelValue.map(Me=>wA(Me,e.valueFormat,n.value)):oe=wA(e.modelValue,e.valueFormat,n.value),ne.value.getRangeAvailableTime){const Me=ne.value.getRangeAvailableTime(oe);wi(Me,oe)||(oe=Me,f(Array.isArray(oe)?oe.map(Re=>Re.toDate()):oe.toDate()))}return Array.isArray(oe)&&oe.some(Me=>!Me)&&(oe=[]),oe}),x=O(()=>{if(!ne.value.panelReady)return;const oe=ee(C.value);if(Array.isArray(ie.value))return[ie.value[0]||oe&&oe[0]||"",ie.value[1]||oe&&oe[1]||""];if(ie.value!==null)return ie.value;if(!(!T.value&&F.value)&&!(!l.value&&F.value))return oe?I.value?oe.join(", "):oe:""}),S=O(()=>e.type.includes("time")),T=O(()=>e.type.startsWith("time")),I=O(()=>e.type==="dates"),_=O(()=>e.prefixIcon||(S.value?_P:coe)),N=V(!1),D=oe=>{e.readonly||w.value||N.value&&(oe.stopPropagation(),f(null),d(null,!0),N.value=!1,l.value=!1,ne.value.handleClear&&ne.value.handleClear())},F=O(()=>!e.modelValue||Array.isArray(e.modelValue)&&!e.modelValue.length),P=()=>{e.readonly||w.value||!F.value&&e.clearable&&(N.value=!0)},M=()=>{N.value=!1},B=O(()=>e.type.indexOf("range")>-1),j=Ss(),X=O(()=>{var oe,Me;return(Me=(oe=i.value)==null?void 0:oe.popperRef)==null?void 0:Me.contentRef}),ae=O(()=>{var oe,Me;return(Me=(oe=Xe(i))==null?void 0:oe.popperRef)==null?void 0:Me.contentRef}),be=O(()=>{var oe;return Xe(B)?Xe(a):(oe=Xe(a))==null?void 0:oe.$el});oC(be,oe=>{const Me=Xe(ae),Re=Xe(be);Me&&(oe.target===Me||oe.composedPath().includes(Me))||oe.target===Re||oe.composedPath().includes(Re)||(l.value=!1)});const ie=V(null),ye=()=>{if(ie.value){const oe=Z(x.value);oe&&te(oe)&&(f(Array.isArray(oe)?oe.map(Me=>Me.toDate()):oe.toDate()),ie.value=null)}ie.value===""&&(f(null),d(null),ie.value=null)},ue=()=>{h.value.forEach(oe=>oe.blur())},Z=oe=>oe?ne.value.parseUserInput(oe):null,ee=oe=>oe?ne.value.formatToString(oe):null,te=oe=>ne.value.isValidValue(oe),fe=oe=>{const Me=oe.code;if(Me===tt.esc){l.value=!1,oe.stopPropagation();return}if(Me===tt.tab){B.value?setTimeout(()=>{h.value.indexOf(document.activeElement)===-1&&(l.value=!1,ue())},0):(ye(),l.value=!1,oe.stopPropagation());return}if(Me===tt.enter||Me===tt.numpadEnter){(ie.value===null||ie.value===""||te(Z(x.value)))&&(ye(),l.value=!1),oe.stopPropagation();return}if(ie.value){oe.stopPropagation();return}ne.value.handleKeydown&&ne.value.handleKeydown(oe)},De=oe=>{ie.value=oe},We=oe=>{ie.value?ie.value=[oe.target.value,ie.value[1]]:ie.value=[oe.target.value,null]},He=oe=>{ie.value?ie.value=[ie.value[0],oe.target.value]:ie.value=[null,oe.target.value]},Ve=()=>{const oe=Z(ie.value&&ie.value[0]);if(oe&&oe.isValid()){ie.value=[ee(oe),x.value[1]];const Me=[oe,C.value&&C.value[1]];te(Me)&&(f(Me),ie.value=null)}},Y=()=>{const oe=Z(ie.value&&ie.value[1]);if(oe&&oe.isValid()){ie.value=[x.value[0],ee(oe)];const Me=[C.value&&C.value[0],oe];te(Me)&&(f(Me),ie.value=null)}},ne=V({}),q=oe=>{ne.value[oe[0]]=oe[1],ne.value.panelReady=!0},le=oe=>{t.emit("calendar-change",oe)},xe=(oe,Me,Re)=>{t.emit("panel-change",oe,Me,Re)};return jt("EP_PICKER_BASE",{props:e}),{elPopperOptions:r,isDatesPicker:I,handleEndChange:Y,handleStartChange:Ve,handleStartInput:We,handleEndInput:He,onUserInput:De,handleChange:ye,handleKeydown:fe,popperPaneRef:X,onClickOutside:oC,pickerSize:j,isRangeInput:B,onMouseLeave:M,onMouseEnter:P,onClearIconClick:D,showClose:N,triggerIcon:_,onPick:v,handleFocus:$,handleBlur:y,pickerVisible:l,pickerActualVisible:u,displayValue:x,parsedValue:C,setSelectionRange:m,refPopper:i,inputRef:a,pickerDisabled:w,onSetPickerOption:q,onCalendarChange:le,onPanelChange:xe,focus:b}}}),Fde=["id","name","placeholder","value","disabled","readonly"],Pde={class:"el-range-separator"},Lde=["id","name","placeholder","value","disabled","readonly"];function Bde(e,t,n,s,o,r){const i=de("el-icon"),a=de("el-input"),l=de("el-tooltip");return R(),ke(l,uo({ref:"refPopper",visible:e.pickerVisible,"onUpdate:visible":t[17]||(t[17]=u=>e.pickerVisible=u),effect:"light",pure:"",trigger:"click"},e.$attrs,{"append-to-body":"",transition:"el-zoom-in-top","popper-class":`el-picker__popper ${e.popperClass}`,"popper-options":e.elPopperOptions,"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onShow:t[18]||(t[18]=u=>e.pickerActualVisible=!0),onHide:t[19]||(t[19]=u=>e.pickerActualVisible=!1)}),{default:ce(()=>[e.isRangeInput?(R(),H("div",{key:1,ref:"inputRef",class:Q(["el-date-editor el-range-editor el-input__inner",["el-date-editor--"+e.type,e.pickerSize?`el-range-editor--${e.pickerSize}`:"",e.pickerDisabled?"is-disabled":"",e.pickerVisible?"is-active":"",e.$attrs.class||void 0]]),style:rt(e.$attrs.style||void 0),onClick:t[7]||(t[7]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onMouseenter:t[8]||(t[8]=(...u)=>e.onMouseEnter&&e.onMouseEnter(...u)),onMouseleave:t[9]||(t[9]=(...u)=>e.onMouseLeave&&e.onMouseLeave(...u)),onKeydown:t[10]||(t[10]=(...u)=>e.handleKeydown&&e.handleKeydown(...u))},[e.triggerIcon?(R(),ke(i,{key:0,class:"el-input__icon el-range__icon",onClick:e.handleFocus},{default:ce(()=>[(R(),ke(on(e.triggerIcon)))]),_:1},8,["onClick"])):me("v-if",!0),K("input",{id:e.id&&e.id[0],autocomplete:"off",name:e.name&&e.name[0],placeholder:e.startPlaceholder,value:e.displayValue&&e.displayValue[0],disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,class:"el-range-input",onInput:t[1]||(t[1]=(...u)=>e.handleStartInput&&e.handleStartInput(...u)),onChange:t[2]||(t[2]=(...u)=>e.handleStartChange&&e.handleStartChange(...u)),onFocus:t[3]||(t[3]=(...u)=>e.handleFocus&&e.handleFocus(...u))},null,40,Fde),Pe(e.$slots,"range-separator",{},()=>[K("span",Pde,ze(e.rangeSeparator),1)]),K("input",{id:e.id&&e.id[1],autocomplete:"off",name:e.name&&e.name[1],placeholder:e.endPlaceholder,value:e.displayValue&&e.displayValue[1],disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,class:"el-range-input",onFocus:t[4]||(t[4]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onInput:t[5]||(t[5]=(...u)=>e.handleEndInput&&e.handleEndInput(...u)),onChange:t[6]||(t[6]=(...u)=>e.handleEndChange&&e.handleEndChange(...u))},null,40,Lde),e.clearIcon?(R(),ke(i,{key:1,class:Q(["el-input__icon el-range__close-icon",{"el-range__close-icon--hidden":!e.showClose}]),onClick:e.onClearIconClick},{default:ce(()=>[(R(),ke(on(e.clearIcon)))]),_:1},8,["class","onClick"])):me("v-if",!0)],38)):(R(),ke(a,{key:0,id:e.id,ref:"inputRef","model-value":e.displayValue,name:e.name,size:e.pickerSize,disabled:e.pickerDisabled,placeholder:e.placeholder,class:Q(["el-date-editor",["el-date-editor--"+e.type,e.$attrs.class||void 0]]),style:rt(e.$attrs.style||void 0),readonly:!e.editable||e.readonly||e.isDatesPicker||e.type==="week",onInput:e.onUserInput,onFocus:e.handleFocus,onKeydown:e.handleKeydown,onChange:e.handleChange,onMouseenter:e.onMouseEnter,onMouseleave:e.onMouseLeave,onClick:t[0]||(t[0]=gt(()=>{},["stop"]))},{prefix:ce(()=>[e.triggerIcon?(R(),ke(i,{key:0,class:"el-input__icon",onClick:e.handleFocus},{default:ce(()=>[(R(),ke(on(e.triggerIcon)))]),_:1},8,["onClick"])):me("v-if",!0)]),suffix:ce(()=>[e.showClose&&e.clearIcon?(R(),ke(i,{key:0,class:"el-input__icon clear-icon",onClick:e.onClearIconClick},{default:ce(()=>[(R(),ke(on(e.clearIcon)))]),_:1},8,["onClick"])):me("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","onInput","onFocus","onKeydown","onChange","onMouseenter","onMouseleave"]))]),content:ce(()=>[Pe(e.$slots,"default",{visible:e.pickerVisible,actualVisible:e.pickerActualVisible,parsedValue:e.parsedValue,format:e.format,unlinkPanels:e.unlinkPanels,type:e.type,defaultValue:e.defaultValue,onPick:t[11]||(t[11]=(...u)=>e.onPick&&e.onPick(...u)),onSelectRange:t[12]||(t[12]=(...u)=>e.setSelectionRange&&e.setSelectionRange(...u)),onSetPickerOption:t[13]||(t[13]=(...u)=>e.onSetPickerOption&&e.onSetPickerOption(...u)),onCalendarChange:t[14]||(t[14]=(...u)=>e.onCalendarChange&&e.onCalendarChange(...u)),onPanelChange:t[15]||(t[15]=(...u)=>e.onPanelChange&&e.onPanelChange(...u)),onMousedown:t[16]||(t[16]=gt(()=>{},["stop"]))})]),_:3},16,["visible","popper-class","popper-options"])}var vL=Ge(Ode,[["render",Bde]]);const Rw=(e,t,n)=>{const s=[],o=t&&n();for(let r=0;r<e;r++)s[r]=o?o.includes(r):!1;return s},Mw=e=>e.map((t,n)=>t||n).filter(t=>t!==!0),bL=(e,t,n)=>({getHoursList:(i,a)=>Rw(24,e,()=>e(i,a)),getMinutesList:(i,a,l)=>Rw(60,t,()=>t(i,a,l)),getSecondsList:(i,a,l,u)=>Rw(60,n,()=>n(i,a,l,u))}),yL=(e,t,n)=>{const{getHoursList:s,getMinutesList:o,getSecondsList:r}=bL(e,t,n);return{getAvailableHours:(u,c)=>Mw(s(u,c)),getAvailableMinutes:(u,c,d)=>Mw(o(u,c,d)),getAvailableSeconds:(u,c,d,f)=>Mw(r(u,c,d,f))}},wL=e=>{const t=V(e.parsedValue);return Le(()=>e.visible,n=>{n||(t.value=e.parsedValue)}),t},zde=$e({directives:{repeatClick:OP},components:{ElScrollbar:Fa,ElIcon:Pt,ArrowUp:zp,ArrowDown:hc},props:{role:{type:String,required:!0},spinnerDate:{type:Object,required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:String,default:""},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function}},emits:["change","select-range","set-option"],setup(e,t){let n=!1;const s=nr(ue=>{n=!1,S(ue)},200),o=V(null),r=V(null),i=V(null),a=V(null),l={hours:r,minutes:i,seconds:a},u=O(()=>{const ue=["hours","minutes","seconds"];return e.showSeconds?ue:ue.slice(0,2)}),c=O(()=>e.spinnerDate.hour()),d=O(()=>e.spinnerDate.minute()),f=O(()=>e.spinnerDate.second()),h=O(()=>({hours:c,minutes:d,seconds:f})),p=O(()=>be(e.role)),g=O(()=>ie(c.value,e.role)),m=O(()=>ye(c.value,d.value,e.role)),v=O(()=>({hours:p,minutes:g,seconds:m})),b=O(()=>{const ue=c.value;return[ue>0?ue-1:void 0,ue,ue<23?ue+1:void 0]}),$=O(()=>{const ue=d.value;return[ue>0?ue-1:void 0,ue,ue<59?ue+1:void 0]}),y=O(()=>{const ue=f.value;return[ue>0?ue-1:void 0,ue,ue<59?ue+1:void 0]}),w=O(()=>({hours:b,minutes:$,seconds:y})),C=ue=>{if(!!!e.amPmMode)return"";const ee=e.amPmMode==="A";let te=ue<12?" am":" pm";return ee&&(te=te.toUpperCase()),te},x=ue=>{ue==="hours"?t.emit("select-range",0,2):ue==="minutes"?t.emit("select-range",3,5):ue==="seconds"&&t.emit("select-range",6,8),o.value=ue},S=ue=>{I(ue,h.value[ue].value)},T=()=>{S("hours"),S("minutes"),S("seconds")},I=(ue,Z)=>{if(e.arrowControl)return;const ee=l[ue];ee&&ee.$el&&(ee.$el.querySelector(".el-scrollbar__wrap").scrollTop=Math.max(0,Z*_(ue)))},_=ue=>l[ue].$el.querySelector("li").offsetHeight,N=()=>{F(1)},D=()=>{F(-1)},F=ue=>{o.value||x("hours");const Z=o.value;let ee=h.value[Z].value;const te=o.value==="hours"?24:60;ee=(ee+ue+te)%te,P(Z,ee),I(Z,ee),ft(()=>x(o.value))},P=(ue,Z)=>{if(!v.value[ue].value[Z])switch(ue){case"hours":t.emit("change",e.spinnerDate.hour(Z).minute(d.value).second(f.value));break;case"minutes":t.emit("change",e.spinnerDate.hour(c.value).minute(Z).second(f.value));break;case"seconds":t.emit("change",e.spinnerDate.hour(c.value).minute(d.value).second(Z));break}},M=(ue,{value:Z,disabled:ee})=>{ee||(P(ue,Z),x(ue),I(ue,Z))},B=ue=>{n=!0,s(ue);const Z=Math.min(Math.round((l[ue].$el.querySelector(".el-scrollbar__wrap").scrollTop-(j(ue)*.5-10)/_(ue)+3)/_(ue)),ue==="hours"?23:59);P(ue,Z)},j=ue=>l[ue].$el.offsetHeight,X=()=>{const ue=Z=>{l[Z]&&l[Z].$el&&(l[Z].$el.querySelector(".el-scrollbar__wrap").onscroll=()=>{B(Z)})};ue("hours"),ue("minutes"),ue("seconds")};Ft(()=>{ft(()=>{!e.arrowControl&&X(),T(),e.role==="start"&&x("hours")})});const ae=(ue,Z)=>{l[Z]=ue};t.emit("set-option",[`${e.role}_scrollDown`,F]),t.emit("set-option",[`${e.role}_emitSelectRange`,x]);const{getHoursList:be,getMinutesList:ie,getSecondsList:ye}=bL(e.disabledHours,e.disabledMinutes,e.disabledSeconds);return Le(()=>e.spinnerDate,()=>{n||T()}),{setRef:ae,spinnerItems:u,currentScrollbar:o,hours:c,minutes:d,seconds:f,hoursList:p,minutesList:g,arrowHourList:b,arrowMinuteList:$,arrowSecondList:y,getAmPmFlag:C,emitSelectRange:x,adjustCurrentSpinner:S,typeItemHeight:_,listHoursRef:r,listMinutesRef:i,listSecondsRef:a,onIncreaseClick:N,onDecreaseClick:D,handleClick:M,secondsList:m,timePartsMap:h,arrowListMap:w,listMap:v}}}),Vde=["onClick"],Wde=["onMouseenter"],Hde={class:"el-time-spinner__list"};function Ude(e,t,n,s,o,r){const i=de("el-scrollbar"),a=de("arrow-up"),l=de("el-icon"),u=de("arrow-down"),c=Wo("repeat-click");return R(),H("div",{class:Q(["el-time-spinner",{"has-seconds":e.showSeconds}])},[e.arrowControl?me("v-if",!0):(R(!0),H(ct,{key:0},en(e.spinnerItems,d=>(R(),ke(i,{key:d,ref_for:!0,ref:f=>e.setRef(f,d),class:"el-time-spinner__wrapper","wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul",onMouseenter:f=>e.emitSelectRange(d),onMousemove:f=>e.adjustCurrentSpinner(d)},{default:ce(()=>[(R(!0),H(ct,null,en(e.listMap[d].value,(f,h)=>(R(),H("li",{key:h,class:Q(["el-time-spinner__item",{active:h===e.timePartsMap[d].value,disabled:f}]),onClick:p=>e.handleClick(d,{value:h,disabled:f})},[d==="hours"?(R(),H(ct,{key:0},[Zt(ze(("0"+(e.amPmMode?h%12||12:h)).slice(-2))+ze(e.getAmPmFlag(h)),1)],2112)):(R(),H(ct,{key:1},[Zt(ze(("0"+h).slice(-2)),1)],2112))],10,Vde))),128))]),_:2},1032,["onMouseenter","onMousemove"]))),128)),e.arrowControl?(R(!0),H(ct,{key:1},en(e.spinnerItems,d=>(R(),H("div",{key:d,class:"el-time-spinner__wrapper is-arrow",onMouseenter:f=>e.emitSelectRange(d)},[Ct((R(),ke(l,{class:"el-time-spinner__arrow arrow-up"},{default:ce(()=>[pe(a)]),_:1})),[[c,e.onDecreaseClick]]),Ct((R(),ke(l,{class:"el-time-spinner__arrow arrow-down"},{default:ce(()=>[pe(u)]),_:1})),[[c,e.onIncreaseClick]]),K("ul",Hde,[(R(!0),H(ct,null,en(e.arrowListMap[d].value,(f,h)=>(R(),H("li",{key:h,class:Q(["el-time-spinner__item",{active:f===e.timePartsMap[d].value,disabled:e.listMap[d].value[f]}])},[typeof f=="number"?(R(),H(ct,{key:0},[d==="hours"?(R(),H(ct,{key:0},[Zt(ze(("0"+(e.amPmMode?f%12||12:f)).slice(-2))+ze(e.getAmPmFlag(f)),1)],2112)):(R(),H(ct,{key:1},[Zt(ze(("0"+f).slice(-2)),1)],2112))],2112)):me("v-if",!0)],2))),128))])],40,Wde))),128)):me("v-if",!0)],2)}var $L=Ge(zde,[["render",Ude]]);const jde=$e({components:{TimeSpinner:$L},props:{visible:Boolean,actualVisible:{type:Boolean,default:void 0},datetimeRole:{type:String},parsedValue:{type:[Object,String]},format:{type:String,default:""}},emits:["pick","select-range","set-picker-option"],setup(e,t){const{t:n,lang:s}=Tn(),o=V([0,2]),r=wL(e),i=O(()=>e.actualVisible===void 0?"el-zoom-in-top":""),a=O(()=>e.format.includes("ss")),l=O(()=>e.format.includes("A")?"A":e.format.includes("a")?"a":""),u=P=>{const M=kt(P).locale(s.value),B=m(M);return M.isSame(B)},c=()=>{t.emit("pick",r.value,!1)},d=(P=!1,M=!1)=>{M||t.emit("pick",e.parsedValue,P)},f=P=>{if(!e.visible)return;const M=m(P).millisecond(0);t.emit("pick",M,!0)},h=(P,M)=>{t.emit("select-range",P,M),o.value=[P,M]},p=P=>{const M=[0,3].concat(a.value?[6]:[]),B=["hours","minutes"].concat(a.value?["seconds"]:[]),X=(M.indexOf(o.value[0])+P+M.length)%M.length;y.start_emitSelectRange(B[X])},g=P=>{const M=P.code;if(M===tt.left||M===tt.right){const B=M===tt.left?-1:1;p(B),P.preventDefault();return}if(M===tt.up||M===tt.down){const B=M===tt.up?-1:1;y.start_scrollDown(B),P.preventDefault();return}},m=P=>{const M={hour:N,minute:D,second:F};let B=P;return["hour","minute","second"].forEach(j=>{if(M[j]){let X;const ae=M[j];j==="minute"?X=ae(B.hour(),e.datetimeRole):j==="second"?X=ae(B.hour(),B.minute(),e.datetimeRole):X=ae(e.datetimeRole),X&&X.length&&!X.includes(B[j]())&&(B=B[j](X[0]))}}),B},v=P=>P?kt(P,e.format).locale(s.value):null,b=P=>P?P.format(e.format):null,$=()=>kt(_).locale(s.value);t.emit("set-picker-option",["isValidValue",u]),t.emit("set-picker-option",["formatToString",b]),t.emit("set-picker-option",["parseUserInput",v]),t.emit("set-picker-option",["handleKeydown",g]),t.emit("set-picker-option",["getRangeAvailableTime",m]),t.emit("set-picker-option",["getDefaultValue",$]);const y={},w=P=>{y[P[0]]=P[1]},C=Qe("EP_PICKER_BASE"),{arrowControl:x,disabledHours:S,disabledMinutes:T,disabledSeconds:I,defaultValue:_}=C.props,{getAvailableHours:N,getAvailableMinutes:D,getAvailableSeconds:F}=yL(S,T,I);return{transitionName:i,arrowControl:x,onSetOption:w,t:n,handleConfirm:d,handleChange:f,setSelectionRange:h,amPmMode:l,showSeconds:a,handleCancel:c,disabledHours:S,disabledMinutes:T,disabledSeconds:I}}}),Gde={key:0,class:"el-time-panel"},Kde={class:"el-time-panel__footer"};function qde(e,t,n,s,o,r){const i=de("time-spinner");return R(),ke(ks,{name:e.transitionName},{default:ce(()=>[e.actualVisible||e.visible?(R(),H("div",Gde,[K("div",{class:Q(["el-time-panel__content",{"has-seconds":e.showSeconds}])},[pe(i,{ref:"spinner",role:e.datetimeRole||"start","arrow-control":e.arrowControl,"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"spinner-date":e.parsedValue,"disabled-hours":e.disabledHours,"disabled-minutes":e.disabledMinutes,"disabled-seconds":e.disabledSeconds,onChange:e.handleChange,onSetOption:e.onSetOption,onSelectRange:e.setSelectionRange},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2),K("div",Kde,[K("button",{type:"button",class:"el-time-panel__btn cancel",onClick:t[0]||(t[0]=(...a)=>e.handleCancel&&e.handleCancel(...a))},ze(e.t("el.datepicker.cancel")),1),K("button",{type:"button",class:"el-time-panel__btn confirm",onClick:t[1]||(t[1]=a=>e.handleConfirm())},ze(e.t("el.datepicker.confirm")),1)])])):me("v-if",!0)]),_:1},8,["name"])}var nk=Ge(jde,[["render",qde]]),CA=sf,Yde=QF,Xde=Tl,xA=CA?CA.isConcatSpreadable:void 0;function Zde(e){return Xde(e)||Yde(e)||!!(xA&&e&&e[xA])}var Jde=Zde,Qde=R2,efe=Jde;function CL(e,t,n,s,o){var r=-1,i=e.length;for(n||(n=efe),o||(o=[]);++r<i;){var a=e[r];t>0&&n(a)?t>1?CL(a,t-1,n,s,o):Qde(o,a):s||(o[o.length]=a)}return o}var tfe=CL;function nfe(e){return e}var xL=nfe;function sfe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var ofe=sfe,rfe=ofe,kA=Math.max;function ife(e,t,n){return t=kA(t===void 0?e.length-1:t,0),function(){for(var s=arguments,o=-1,r=kA(s.length-t,0),i=Array(r);++o<r;)i[o]=s[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=s[o];return a[t]=n(i),rfe(e,this,a)}}var afe=ife;function lfe(e){return function(){return e}}var ufe=lfe,cfe=fc,dfe=function(){try{var e=cfe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),kL=dfe,ffe=ufe,SA=kL,hfe=xL,pfe=SA?function(e,t){return SA(e,"toString",{configurable:!0,enumerable:!1,value:ffe(t),writable:!0})}:hfe,gfe=pfe,mfe=800,vfe=16,bfe=Date.now;function yfe(e){var t=0,n=0;return function(){var s=bfe(),o=vfe-(s-n);if(n=s,o>0){if(++t>=mfe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var wfe=yfe,$fe=gfe,Cfe=wfe,xfe=Cfe($fe),kfe=xfe,Sfe=xL,Ife=afe,Efe=kfe;function Tfe(e,t){return Efe(Ife(e,t,Sfe),e+"")}var _fe=Tfe;function Nfe(e,t,n,s){for(var o=e.length,r=n+(s?1:-1);s?r--:++r<o;)if(t(e[r],r,e))return r;return-1}var Afe=Nfe;function Dfe(e){return e!==e}var Rfe=Dfe;function Mfe(e,t,n){for(var s=n-1,o=e.length;++s<o;)if(e[s]===t)return s;return-1}var Ofe=Mfe,Ffe=Afe,Pfe=Rfe,Lfe=Ofe;function Bfe(e,t,n){return t===t?Lfe(e,t,n):Ffe(e,Pfe,n)}var zfe=Bfe,Vfe=zfe;function Wfe(e,t){var n=e==null?0:e.length;return!!n&&Vfe(e,t,0)>-1}var Hfe=Wfe;function Ufe(e,t,n){for(var s=-1,o=e==null?0:e.length;++s<o;)if(n(t,e[s]))return!0;return!1}var jfe=Ufe;function Gfe(){}var Kfe=Gfe,Ow=rP,qfe=Kfe,Yfe=D2,Xfe=1/0,Zfe=Ow&&1/Yfe(new Ow([,-0]))[1]==Xfe?function(e){return new Ow(e)}:qfe,Jfe=Zfe,Qfe=GF,ehe=Hfe,the=jfe,nhe=KF,she=Jfe,ohe=D2,rhe=200;function ihe(e,t,n){var s=-1,o=ehe,r=e.length,i=!0,a=[],l=a;if(n)i=!1,o=the;else if(r>=rhe){var u=t?null:she(e);if(u)return ohe(u);i=!1,o=nhe,l=new Qfe}else l=t?[]:a;e:for(;++s<r;){var c=e[s],d=t?t(c):c;if(c=n||c!==0?c:0,i&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),a.push(c)}else o(l,d,n)||(l!==a&&l.push(d),a.push(c))}return a}var ahe=ihe,lhe=P2,uhe=_l;function che(e){return uhe(e)&&lhe(e)}var dhe=che,fhe=tfe,hhe=_fe,phe=ahe,ghe=dhe,mhe=hhe(function(e){return phe(fhe(e,1,ghe,!0))}),Fw=mhe;const Vc=(e,t)=>{const n=[];for(let s=e;s<=t;s++)n.push(s);return n},vhe=$e({components:{TimeSpinner:$L},props:{visible:Boolean,actualVisible:Boolean,parsedValue:{type:[Array]},format:{type:String,default:""}},emits:["pick","select-range","set-picker-option"],setup(e,t){const{t:n,lang:s}=Tn(),o=O(()=>e.parsedValue[0]),r=O(()=>e.parsedValue[1]),i=wL(e),a=()=>{t.emit("pick",i.value,null)},l=O(()=>e.format.includes("ss")),u=O(()=>e.format.includes("A")?"A":e.format.includes("a")?"a":""),c=V([]),d=V([]),f=(te=!1)=>{t.emit("pick",[o.value,r.value],te)},h=te=>{m(te.millisecond(0),r.value)},p=te=>{m(o.value,te.millisecond(0))},g=te=>{const fe=te.map(We=>kt(We).locale(s.value)),De=_(fe);return fe[0].isSame(De[0])&&fe[1].isSame(De[1])},m=(te,fe)=>{t.emit("pick",[te,fe],!0)},v=O(()=>o.value>r.value),b=V([0,2]),$=(te,fe)=>{t.emit("select-range",te,fe,"min"),b.value=[te,fe]},y=O(()=>l.value?11:8),w=(te,fe)=>{t.emit("select-range",te,fe,"max"),b.value=[te+y.value,fe+y.value]},C=te=>{const fe=l.value?[0,3,6,11,14,17]:[0,3,8,11],De=["hours","minutes"].concat(l.value?["seconds"]:[]),He=(fe.indexOf(b.value[0])+te+fe.length)%fe.length,Ve=fe.length/2;He<Ve?X.start_emitSelectRange(De[He]):X.end_emitSelectRange(De[He-Ve])},x=te=>{const fe=te.code;if(fe===tt.left||fe===tt.right){const De=fe===tt.left?-1:1;C(De),te.preventDefault();return}if(fe===tt.up||fe===tt.down){const De=fe===tt.up?-1:1,We=b.value[0]<y.value?"start":"end";X[`${We}_scrollDown`](De),te.preventDefault();return}},S=(te,fe)=>{const De=ye?ye(te):[],We=te==="start",Ve=(fe||(We?r.value:o.value)).hour(),Y=We?Vc(Ve+1,23):Vc(0,Ve-1);return Fw(De,Y)},T=(te,fe,De)=>{const We=ue?ue(te,fe):[],He=fe==="start",Ve=De||(He?r.value:o.value),Y=Ve.hour();if(te!==Y)return We;const ne=Ve.minute(),q=He?Vc(ne+1,59):Vc(0,ne-1);return Fw(We,q)},I=(te,fe,De,We)=>{const He=Z?Z(te,fe,De):[],Ve=De==="start",Y=We||(Ve?r.value:o.value),ne=Y.hour(),q=Y.minute();if(te!==ne||fe!==q)return He;const le=Y.second(),xe=Ve?Vc(le+1,59):Vc(0,le-1);return Fw(He,xe)},_=te=>te.map((fe,De)=>P(te[0],te[1],De===0?"start":"end")),{getAvailableHours:N,getAvailableMinutes:D,getAvailableSeconds:F}=yL(S,T,I),P=(te,fe,De)=>{const We={hour:N,minute:D,second:F},He=De==="start";let Ve=He?te:fe;const Y=He?fe:te;return["hour","minute","second"].forEach(ne=>{if(We[ne]){let q;const le=We[ne];if(ne==="minute"?q=le(Ve.hour(),De,Y):ne==="second"?q=le(Ve.hour(),Ve.minute(),De,Y):q=le(De,Y),q&&q.length&&!q.includes(Ve[ne]())){const xe=He?0:q.length-1;Ve=Ve[ne](q[xe])}}}),Ve},M=te=>te?Array.isArray(te)?te.map(fe=>kt(fe,e.format).locale(s.value)):kt(te,e.format).locale(s.value):null,B=te=>te?Array.isArray(te)?te.map(fe=>fe.format(e.format)):te.format(e.format):null,j=()=>{if(Array.isArray(ee))return ee.map(fe=>kt(fe).locale(s.value));const te=kt(ee).locale(s.value);return[te,te.add(60,"m")]};t.emit("set-picker-option",["formatToString",B]),t.emit("set-picker-option",["parseUserInput",M]),t.emit("set-picker-option",["isValidValue",g]),t.emit("set-picker-option",["handleKeydown",x]),t.emit("set-picker-option",["getDefaultValue",j]),t.emit("set-picker-option",["getRangeAvailableTime",_]);const X={},ae=te=>{X[te[0]]=te[1]},be=Qe("EP_PICKER_BASE"),{arrowControl:ie,disabledHours:ye,disabledMinutes:ue,disabledSeconds:Z,defaultValue:ee}=be.props;return{arrowControl:ie,onSetOption:ae,setMaxSelectionRange:w,setMinSelectionRange:$,btnConfirmDisabled:v,handleCancel:a,handleConfirm:f,t:n,showSeconds:l,minDate:o,maxDate:r,amPmMode:u,handleMinChange:h,handleMaxChange:p,minSelectableRange:c,maxSelectableRange:d,disabledHours_:S,disabledMinutes_:T,disabledSeconds_:I}}}),bhe={key:0,class:"el-time-range-picker el-picker-panel"},yhe={class:"el-time-range-picker__content"},whe={class:"el-time-range-picker__cell"},$he={class:"el-time-range-picker__header"},Che={class:"el-time-range-picker__cell"},xhe={class:"el-time-range-picker__header"},khe={class:"el-time-panel__footer"},She=["disabled"];function Ihe(e,t,n,s,o,r){const i=de("time-spinner");return e.actualVisible?(R(),H("div",bhe,[K("div",yhe,[K("div",whe,[K("div",$he,ze(e.t("el.datepicker.startTime")),1),K("div",{class:Q([{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl},"el-time-range-picker__body el-time-panel__content"])},[pe(i,{ref:"minSpinner",role:"start","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.minDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMinChange,onSetOption:e.onSetOption,onSelectRange:e.setMinSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)]),K("div",Che,[K("div",xhe,ze(e.t("el.datepicker.endTime")),1),K("div",{class:Q([{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl},"el-time-range-picker__body el-time-panel__content"])},[pe(i,{ref:"maxSpinner",role:"end","show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,"spinner-date":e.maxDate,"disabled-hours":e.disabledHours_,"disabled-minutes":e.disabledMinutes_,"disabled-seconds":e.disabledSeconds_,onChange:e.handleMaxChange,onSetOption:e.onSetOption,onSelectRange:e.setMaxSelectionRange},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onChange","onSetOption","onSelectRange"])],2)])]),K("div",khe,[K("button",{type:"button",class:"el-time-panel__btn cancel",onClick:t[0]||(t[0]=a=>e.handleCancel())},ze(e.t("el.datepicker.cancel")),1),K("button",{type:"button",class:"el-time-panel__btn confirm",disabled:e.btnConfirmDisabled,onClick:t[1]||(t[1]=a=>e.handleConfirm())},ze(e.t("el.datepicker.confirm")),9,She)])])):me("v-if",!0)}var Ehe=Ge(vhe,[["render",Ihe]]);kt.extend(ek);var The=$e({name:"ElTimePicker",install:null,props:Ut(dt({},tk),{isRange:{type:Boolean,default:!1}}),emits:["update:modelValue"],setup(e,t){const n=V(null),s=e.isRange?"timerange":"time",o=e.isRange?Ehe:nk,r=Ut(dt({},e),{focus:()=>{var i;(i=n.value)==null||i.handleFocus()},blur:()=>{var i;(i=n.value)==null||i.handleBlur()}});return jt("ElPopperOptions",e.popperOptions),t.expose(r),()=>{var i;const a=(i=e.format)!=null?i:CC;return Ke(vL,Ut(dt({},e),{format:a,type:s,ref:n,"onUpdate:modelValue":l=>t.emit("update:modelValue",l)}),{default:l=>Ke(o,l)})}}});const cl=e=>Array.from(Array(e).keys()),SL=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),IL=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),Pv=The;Pv.install=e=>{e.component(Pv.name,Pv)};const _he=Pv,Nhe=yt({selectedDay:{type:et(Object)},range:{type:et(Array)},date:{type:et(Object),required:!0},hideHeader:{type:Boolean}}),Ahe={pick:e=>cn(e)};kt.extend(pL);const Pw=["sun","mon","tue","wed","thu","fri","sat"],Dhe=(e,t)=>{const n=e.subtract(1,"month").endOf("month").date();return cl(t).map((s,o)=>n-(t-o-1))},Rhe=e=>{const t=e.daysInMonth();return cl(t).map((n,s)=>s+1)},Mhe=e=>cl(e.length/7).map(t=>{const n=t*7;return e.slice(n,n+7)}),Ohe=$e({props:Nhe,emits:Ahe,setup(e,{emit:t}){const{t:n,lang:s}=Tn(),o=Mt("calendar-table"),r=Mt("calendar-day"),i=kt().locale(s.value),a=i.$locale().weekStart||0,l=O(()=>!!e.range&&!!e.range.length),u=O(()=>{let g=[];if(l.value){const[m,v]=e.range,b=cl(v.date()-m.date()+1).map(w=>({text:m.date()+w,type:"current"}));let $=b.length%7;$=$===0?0:7-$;const y=cl($).map((w,C)=>({text:C+1,type:"next"}));g=b.concat(y)}else{const m=e.date.startOf("month").day()||7,v=Dhe(e.date,m-a).map(y=>({text:y,type:"prev"})),b=Rhe(e.date).map(y=>({text:y,type:"current"}));g=[...v,...b];const $=cl(42-g.length).map((y,w)=>({text:w+1,type:"next"}));g=g.concat($)}return Mhe(g)}),c=O(()=>{const g=a;return g===0?Pw.map(m=>n(`el.datepicker.weeks.${m}`)):Pw.slice(g).concat(Pw.slice(0,g)).map(m=>n(`el.datepicker.weeks.${m}`))}),d=(g,m)=>{switch(m){case"prev":return e.date.startOf("month").subtract(1,"month").date(g);case"next":return e.date.startOf("month").add(1,"month").date(g);case"current":return e.date.date(g)}};return{isInRange:l,weekDays:c,rows:u,getCellClass:({text:g,type:m})=>{const v=[m];if(m==="current"){const b=d(g,m);b.isSame(e.selectedDay,"day")&&v.push("is-selected"),b.isSame(i,"day")&&v.push("is-today")}return v},handlePickDay:({text:g,type:m})=>{const v=d(g,m);t("pick",v)},getSlotData:({text:g,type:m})=>{const v=d(g,m);return{isSelected:v.isSame(e.selectedDay),type:`${m}-month`,day:v.format("YYYY-MM-DD"),date:v.toDate()}},nsTable:o,nsDay:r}}}),Fhe={key:0},Phe=["onClick"];function Lhe(e,t,n,s,o,r){return R(),H("table",{class:Q([e.nsTable.b(),e.nsTable.is("range",e.isInRange)]),cellspacing:"0",cellpadding:"0"},[e.hideHeader?me("v-if",!0):(R(),H("thead",Fhe,[(R(!0),H(ct,null,en(e.weekDays,i=>(R(),H("th",{key:i},ze(i),1))),128))])),K("tbody",null,[(R(!0),H(ct,null,en(e.rows,(i,a)=>(R(),H("tr",{key:a,class:Q({[e.nsTable.e("row")]:!0,[e.nsTable.em("row","hide-border")]:a===0&&e.hideHeader})},[(R(!0),H(ct,null,en(i,(l,u)=>(R(),H("td",{key:u,class:Q(e.getCellClass(l)),onClick:c=>e.handlePickDay(l)},[K("div",{class:Q(e.nsDay.b())},[Pe(e.$slots,"dateCell",{data:e.getSlotData(l)},()=>[K("span",null,ze(l.text),1)])],2)],10,Phe))),128))],2))),128))])],2)}var Bhe=Ge(Ohe,[["render",Lhe]]);const zhe=yt({modelValue:{type:Date},range:{type:et(Array),validator:e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date)}}),Vhe={[Bt]:e=>e instanceof Date,input:e=>e instanceof Date},Whe=$e({name:"ElCalendar",components:{DateTable:Bhe,ElButton:sa,ElButtonGroup:dL},props:zhe,emits:Vhe,setup(e,{emit:t}){const n=Mt("calendar"),{t:s,lang:o}=Tn(),r=V(),i=kt().locale(o.value),a=O(()=>p.value.subtract(1,"month").date(1)),l=O(()=>kt(p.value).locale(o.value).format("YYYY-MM")),u=O(()=>p.value.add(1,"month").date(1)),c=O(()=>p.value.subtract(1,"year").date(1)),d=O(()=>p.value.add(1,"year").date(1)),f=O(()=>{const $=`el.datepicker.month${p.value.format("M")}`;return`${p.value.year()} ${s("el.datepicker.year")} ${s($)}`}),h=O({get(){return e.modelValue?p.value:r.value},set($){if(!$)return;r.value=$;const y=$.toDate();t("input",y),t("update:modelValue",y)}}),p=O(()=>e.modelValue?kt(e.modelValue).locale(o.value):h.value?h.value:m.value.length?m.value[0][0]:i),g=($,y)=>{const w=$.startOf("week"),C=y.endOf("week"),x=w.get("month"),S=C.get("month");if(x===S)return[[w,C]];if(x+1===S){const T=w.endOf("month"),I=C.startOf("month"),N=T.isSame(I,"week")?I.add(1,"week"):I;return[[w,T],[N.startOf("week"),C]]}else if(x+2===S){const T=w.endOf("month"),I=w.add(1,"month").startOf("month"),_=T.isSame(I,"week")?I.add(1,"week"):I,N=_.endOf("month"),D=C.startOf("month"),F=N.isSame(D,"week")?D.add(1,"week"):D;return[[w,T],[_.startOf("week"),N],[F.startOf("week"),C]]}else return[]},m=O(()=>{if(!e.range)return[];const $=e.range.map(C=>kt(C).locale(o.value)),[y,w]=$;return y.isAfter(w)?[]:y.isSame(w,"month")?g(y,w):y.add(1,"month").month()!==w.month()?[]:g(y,w)}),v=$=>{h.value=$};return{selectedDay:r,curMonthDatePrefix:l,i18nDate:f,realSelectedDay:h,date:p,validatedRange:m,pickDay:v,selectDate:$=>{let y;$==="prev-month"?y=a.value:$==="next-month"?y=u.value:$==="prev-year"?y=c.value:$==="next-year"?y=d.value:y=i,!y.isSame(p.value,"day")&&v(y)},t:s,ns:n}}});function Hhe(e,t,n,s,o,r){const i=de("el-button"),a=de("el-button-group"),l=de("date-table");return R(),H("div",{class:Q(e.ns.b())},[K("div",{class:Q(e.ns.e("header"))},[Pe(e.$slots,"header",{date:e.i18nDate},()=>[K("div",{class:Q(e.ns.e("title"))},ze(e.i18nDate),3),e.validatedRange.length===0?(R(),H("div",{key:0,class:Q(e.ns.e("button-group"))},[pe(a,null,{default:ce(()=>[pe(i,{size:"small",onClick:t[0]||(t[0]=u=>e.selectDate("prev-month"))},{default:ce(()=>[Zt(ze(e.t("el.datepicker.prevMonth")),1)]),_:1}),pe(i,{size:"small",onClick:t[1]||(t[1]=u=>e.selectDate("today"))},{default:ce(()=>[Zt(ze(e.t("el.datepicker.today")),1)]),_:1}),pe(i,{size:"small",onClick:t[2]||(t[2]=u=>e.selectDate("next-month"))},{default:ce(()=>[Zt(ze(e.t("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):me("v-if",!0)])],2),e.validatedRange.length===0?(R(),H("div",{key:0,class:Q(e.ns.e("body"))},[pe(l,{date:e.date,"selected-day":e.realSelectedDay,onPick:e.pickDay},qh({_:2},[e.$slots.dateCell?{name:"dateCell",fn:ce(u=>[Pe(e.$slots,"dateCell",Wu(Hu(u)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(R(),H("div",{key:1,class:Q(e.ns.e("body"))},[(R(!0),H(ct,null,en(e.validatedRange,(u,c)=>(R(),ke(l,{key:c,date:u[0],"selected-day":e.realSelectedDay,range:u,"hide-header":c!==0,onPick:e.pickDay},qh({_:2},[e.$slots.dateCell?{name:"dateCell",fn:ce(d=>[Pe(e.$slots,"dateCell",Wu(Hu(d)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2)}var Uhe=Ge(Whe,[["render",Hhe]]);const jhe=Gt(Uhe),Ghe=yt({header:{type:String,default:""},bodyStyle:{type:et([String,Object,Array]),default:""},shadow:{type:String,default:"always"}}),Khe=$e({name:"ElCard",props:Ghe,setup(){return{ns:Mt("card")}}});function qhe(e,t,n,s,o,r){return R(),H("div",{class:Q([e.ns.b(),e.ns.is(`${e.shadow}-shadow`)])},[e.$slots.header||e.header?(R(),H("div",{key:0,class:Q(e.ns.e("header"))},[Pe(e.$slots,"header",{},()=>[Zt(ze(e.header),1)])],2)):me("v-if",!0),K("div",{class:Q(e.ns.e("body")),style:rt(e.bodyStyle)},[Pe(e.$slots,"default")],6)],2)}var Yhe=Ge(Khe,[["render",qhe]]);const Xhe=Gt(Yhe);var Zhe=nr,Jhe=El,Qhe="Expected a function";function epe(e,t,n){var s=!0,o=!0;if(typeof e!="function")throw new TypeError(Qhe);return Jhe(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),Zhe(e,t,{leading:s,maxWait:t,trailing:o})}var C0=epe;const tpe=$e({name:"ElCarousel",components:{ElIcon:Pt,ArrowLeft:pc,ArrowRight:ei},props:{initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,default:""},indicator:{type:Boolean,default:!0},arrow:{type:String,default:"hover"},type:{type:String,default:""},loop:{type:Boolean,default:!0},direction:{type:String,default:"horizontal",validator(e){return["horizontal","vertical"].includes(e)}},pauseOnHover:{type:Boolean,default:!0}},emits:["change"],setup(e,{emit:t}){const n=Mt("carousel"),s=En({activeIndex:-1,containerWidth:0,timer:null,hover:!1}),o=V(null),r=V([]),i=O(()=>e.arrow!=="never"&&e.direction!=="vertical"),a=O(()=>r.value.some(N=>N.label.toString().length>0)),l=O(()=>{const N=[n.b(),n.m(e.direction)];return e.type==="card"&&N.push(n.m("card")),N}),u=O(()=>{const N=[n.e("indicators"),n.em("indicators",e.direction)];return a.value&&N.push(n.em("indicators","labels")),(e.indicatorPosition==="outside"||e.type==="card")&&N.push(n.em("indicators","outside")),N}),c=C0(N=>{g(N)},300,{trailing:!0}),d=C0(N=>{T(N)},300);function f(){s.timer&&(clearInterval(s.timer),s.timer=null)}function h(){e.interval<=0||!e.autoplay||s.timer||(s.timer=setInterval(()=>p(),e.interval))}const p=()=>{s.activeIndex<r.value.length-1?s.activeIndex=s.activeIndex+1:e.loop&&(s.activeIndex=0)};function g(N){if(typeof N=="string"){const P=r.value.filter(M=>M.name===N);P.length>0&&(N=r.value.indexOf(P[0]))}if(N=Number(N),isNaN(N)||N!==Math.floor(N))return;const D=r.value.length,F=s.activeIndex;N<0?s.activeIndex=e.loop?D-1:0:N>=D?s.activeIndex=e.loop?0:D-1:s.activeIndex=N,F===s.activeIndex&&m(F)}function m(N){r.value.forEach((D,F)=>{D.translateItem(F,s.activeIndex,N)})}function v(N){r.value.push(N)}function b(N){const D=r.value.findIndex(F=>F.uid===N);D!==-1&&(r.value.splice(D,1),s.activeIndex===D&&_())}function $(N,D){const F=r.value.length;return D===F-1&&N.inStage&&r.value[0].active||N.inStage&&r.value[D+1]&&r.value[D+1].active?"left":D===0&&N.inStage&&r.value[F-1].active||N.inStage&&r.value[D-1]&&r.value[D-1].active?"right":!1}function y(){s.hover=!0,e.pauseOnHover&&f()}function w(){s.hover=!1,h()}function C(N){e.direction!=="vertical"&&r.value.forEach((D,F)=>{N===$(D,F)&&(D.hover=!0)})}function x(){e.direction!=="vertical"&&r.value.forEach(N=>{N.hover=!1})}function S(N){s.activeIndex=N}function T(N){e.trigger==="hover"&&N!==s.activeIndex&&(s.activeIndex=N)}function I(){g(s.activeIndex-1)}function _(){g(s.activeIndex+1)}return Le(()=>s.activeIndex,(N,D)=>{m(D),D>-1&&t("change",N,D)}),Le(()=>e.autoplay,N=>{N?h():f()}),Le(()=>e.loop,()=>{g(s.activeIndex)}),Ft(()=>{ft(()=>{Al(o.value,m),e.initialIndex<r.value.length&&e.initialIndex>=0&&(s.activeIndex=e.initialIndex),h()})}),us(()=>{o.value&&Dl(o.value,m),f()}),jt("injectCarouselScope",{root:o,direction:e.direction,type:e.type,items:r,loop:e.loop,addItem:v,removeItem:b,setActiveItem:g}),{data:s,props:e,items:r,arrowDisplay:i,carouselClasses:l,indicatorsClasses:u,hasLabel:a,handleMouseEnter:y,handleMouseLeave:w,handleIndicatorClick:S,throttledArrowClick:c,throttledIndicatorHover:d,handleButtonEnter:C,handleButtonLeave:x,prev:I,next:_,setActiveItem:g,root:o,ns:n}}}),npe=["onMouseenter","onClick"],spe={key:0};function ope(e,t,n,s,o,r){const i=de("arrow-left"),a=de("el-icon"),l=de("arrow-right");return R(),H("div",{ref:"root",class:Q(e.carouselClasses),onMouseenter:t[6]||(t[6]=gt((...u)=>e.handleMouseEnter&&e.handleMouseEnter(...u),["stop"])),onMouseleave:t[7]||(t[7]=gt((...u)=>e.handleMouseLeave&&e.handleMouseLeave(...u),["stop"]))},[K("div",{class:Q(e.ns.e("container")),style:rt({height:e.height})},[e.arrowDisplay?(R(),ke(ks,{key:0,name:"carousel-arrow-left"},{default:ce(()=>[Ct(K("button",{type:"button",class:Q([e.ns.e("arrow"),e.ns.em("arrow","left")]),onMouseenter:t[0]||(t[0]=u=>e.handleButtonEnter("left")),onMouseleave:t[1]||(t[1]=(...u)=>e.handleButtonLeave&&e.handleButtonLeave(...u)),onClick:t[2]||(t[2]=gt(u=>e.throttledArrowClick(e.data.activeIndex-1),["stop"]))},[pe(a,null,{default:ce(()=>[pe(i)]),_:1})],34),[[sn,(e.arrow==="always"||e.data.hover)&&(e.props.loop||e.data.activeIndex>0)]])]),_:1})):me("v-if",!0),e.arrowDisplay?(R(),ke(ks,{key:1,name:"carousel-arrow-right"},{default:ce(()=>[Ct(K("button",{type:"button",class:Q([e.ns.e("arrow"),e.ns.em("arrow","right")]),onMouseenter:t[3]||(t[3]=u=>e.handleButtonEnter("right")),onMouseleave:t[4]||(t[4]=(...u)=>e.handleButtonLeave&&e.handleButtonLeave(...u)),onClick:t[5]||(t[5]=gt(u=>e.throttledArrowClick(e.data.activeIndex+1),["stop"]))},[pe(a,null,{default:ce(()=>[pe(l)]),_:1})],34),[[sn,(e.arrow==="always"||e.data.hover)&&(e.props.loop||e.data.activeIndex<e.items.length-1)]])]),_:1})):me("v-if",!0),Pe(e.$slots,"default")],6),e.indicatorPosition!=="none"?(R(),H("ul",{key:0,class:Q(e.indicatorsClasses)},[(R(!0),H(ct,null,en(e.items,(u,c)=>(R(),H("li",{key:c,class:Q([e.ns.e("indicator"),e.ns.em("indicator",e.direction),e.ns.is("active",c===e.data.activeIndex)]),onMouseenter:d=>e.throttledIndicatorHover(c),onClick:gt(d=>e.handleIndicatorClick(c),["stop"])},[K("button",{class:Q(e.ns.e("button"))},[e.hasLabel?(R(),H("span",spe,ze(u.label),1)):me("v-if",!0)],2)],42,npe))),128))],2)):me("v-if",!0)],34)}var rpe=Ge(tpe,[["render",ope]]);const Gm=.83,ipe=$e({name:"ElCarouselItem",props:{name:{type:String,default:""},label:{type:[String,Number],default:""}},setup(e){const t=Mt("carousel"),n=Wt(),s=En({hover:!1,translate:0,scale:1,active:!1,ready:!1,inStage:!1,animating:!1}),o=Qe("injectCarouselScope"),r=O(()=>o.direction),i=O(()=>{const p={transform:`${r.value==="vertical"?"translateY":"translateX"}(${s.translate}px) scale(${s.scale})`};return qte(p)});function a(f,h,p){return h===0&&f===p-1?-1:h===p-1&&f===0?p:f<h-1&&h-f>=p/2?p+1:f>h+1&&f-h>=p/2?-2:f}function l(f,h){var p;const g=((p=o.root.value)==null?void 0:p.offsetWidth)||0;return s.inStage?g*((2-Gm)*(f-h)+1)/4:f<h?-(1+Gm)*g/4:(3+Gm)*g/4}function u(f,h,p){var g,m;return((p?(g=o.root.value)==null?void 0:g.offsetHeight:(m=o.root.value)==null?void 0:m.offsetWidth)||0)*(f-h)}const c=(f,h,p)=>{const g=o.type,m=o.items.value.length;if(g!=="card"&&p!==void 0&&(s.animating=f===h||f===p),f!==h&&m>2&&o.loop&&(f=a(f,h,m)),g==="card")r.value==="vertical",s.inStage=Math.round(Math.abs(f-h))<=1,s.active=f===h,s.translate=l(f,h),s.scale=s.active?1:Gm;else{s.active=f===h;const v=r.value==="vertical";s.translate=u(f,h,v)}s.ready=!0};function d(){if(o&&o.type==="card"){const f=o.items.value.map(h=>h.uid).indexOf(n.uid);o.setActiveItem(f)}}return Ft(()=>{o.addItem&&o.addItem(Ut(dt(dt({uid:n.uid},e),ko(s)),{translateItem:c}))}),Op(()=>{o.removeItem&&o.removeItem(n.uid)}),{data:s,itemStyle:i,translateItem:c,type:o.type,handleItemClick:d,ns:t}}});function ape(e,t,n,s,o,r){return Ct((R(),H("div",{class:Q([e.ns.e("item"),e.ns.is("active",e.data.active),e.ns.is("in-stage",e.data.inStage),e.ns.is("hover",e.data.hover),e.ns.is("animating",e.data.animating),{[e.ns.em("item","card")]:e.type==="card"}]),style:rt(e.itemStyle),onClick:t[0]||(t[0]=(...i)=>e.handleItemClick&&e.handleItemClick(...i))},[e.type==="card"?Ct((R(),H("div",{key:0,class:Q(e.ns.e("mask"))},null,2)),[[sn,!e.data.active]]):me("v-if",!0),Pe(e.$slots,"default")],6)),[[sn,e.data.ready]])}var EL=Ge(ipe,[["render",ape]]);const lpe=Gt(rpe,{CarouselItem:EL}),upe=cs(EL);function TL(e,t){if(!Jt)return;if(!t){e.scrollTop=0;return}const n=[];let s=t.offsetParent;for(;s!==null&&e!==s&&e.contains(s);)n.push(s),s=s.offsetParent;const o=t.offsetTop+n.reduce((l,u)=>l+u.offsetTop,0),r=o+t.offsetHeight,i=e.scrollTop,a=i+e.clientHeight;o<i?e.scrollTop=o:r>a&&(e.scrollTop=r-e.clientHeight)}const cpe={modelValue:{type:[Boolean,Number,String],default:()=>{}},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},tabindex:[String,Number],size:String},df=()=>{const e=Qe(ar,{}),t=Qe(Ai,{}),n=Qe("CheckboxGroup",{}),s=O(()=>n&&(n==null?void 0:n.name)==="ElCheckboxGroup"),o=O(()=>t.size);return{isGroup:s,checkboxGroup:n,elForm:e,elFormItemSize:o,elFormItem:t}},dpe=e=>{const t=V(!1),{emit:n}=Wt(),{isGroup:s,checkboxGroup:o}=df(),r=V(!1);return{model:O({get(){var a,l;return s.value?(a=o.modelValue)==null?void 0:a.value:(l=e.modelValue)!=null?l:t.value},set(a){var l;s.value&&Array.isArray(a)?(r.value=o.max!==void 0&&a.length>o.max.value,r.value===!1&&((l=o==null?void 0:o.changeEvent)==null||l.call(o,a))):(n(Bt,a),t.value=a)}}),isLimitExceeded:r}},fpe=(e,{model:t})=>{const{isGroup:n,checkboxGroup:s}=df(),o=V(!1),r=Ss(s==null?void 0:s.checkboxGroupSize,{prop:!0}),i=O(()=>{const l=t.value;return Dp(l)==="[object Boolean]"?l:Array.isArray(l)?l.includes(e.label):l!=null?l===e.trueLabel:!!l}),a=Ss(O(()=>{var l;return n.value?(l=s==null?void 0:s.checkboxGroupSize)==null?void 0:l.value:void 0}));return{isChecked:i,focus:o,size:r,checkboxSize:a}},hpe=(e,{model:t,isChecked:n})=>{const{elForm:s,isGroup:o,checkboxGroup:r}=df(),i=O(()=>{var l,u;const c=(l=r.max)==null?void 0:l.value,d=(u=r.min)==null?void 0:u.value;return!!(c||d)&&t.value.length>=c&&!n.value||t.value.length<=d&&n.value});return{isDisabled:O(()=>{var l,u;const c=e.disabled||s.disabled;return(u=o.value?((l=r.disabled)==null?void 0:l.value)||c||i.value:e.disabled||s.disabled)!=null?u:!1}),isLimitDisabled:i}},ppe=(e,{model:t})=>{function n(){Array.isArray(t.value)&&!t.value.includes(e.label)?t.value.push(e.label):t.value=e.trueLabel||!0}e.checked&&n()},gpe=(e,{isLimitExceeded:t})=>{const{elFormItem:n}=df(),{emit:s}=Wt();function o(r){var i,a;if(t.value)return;const u=r.target.checked?(i=e.trueLabel)!=null?i:!0:(a=e.falseLabel)!=null?a:!1;s("change",u,r)}return Le(()=>e.modelValue,()=>{var r;(r=n.validate)==null||r.call(n,"change")}),{handleChange:o}},_L=e=>{const{model:t,isLimitExceeded:n}=dpe(e),{focus:s,size:o,isChecked:r,checkboxSize:i}=fpe(e,{model:t}),{isDisabled:a}=hpe(e,{model:t,isChecked:r}),{handleChange:l}=gpe(e,{isLimitExceeded:n});return ppe(e,{model:t}),{isChecked:r,isDisabled:a,checkboxSize:i,model:t,handleChange:l,focus:s,size:o}},mpe=$e({name:"ElCheckbox",props:{modelValue:{type:[Boolean,Number,String],default:()=>{}},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:{type:String,validator:sr},tabindex:[String,Number]},emits:[Bt,"change"],setup(e){const t=Mt("checkbox");return dt({ns:t},_L(e))}}),vpe=["id","aria-controls"],bpe=["tabindex","role","aria-checked"],ype=["aria-hidden","name","tabindex","disabled","true-value","false-value"],wpe=["aria-hidden","disabled","value","name","tabindex"];function $pe(e,t,n,s,o,r){return R(),H("label",{id:e.id,class:Q([e.ns.b(),e.ns.m(e.checkboxSize),e.ns.is("disabled",e.isDisabled),e.ns.is("bordered",e.border),e.ns.is("checked",e.isChecked)]),"aria-controls":e.indeterminate?e.controls:null},[K("span",{class:Q([e.ns.e("input"),e.ns.is("disabled",e.isDisabled),e.ns.is("checked",e.isChecked),e.ns.is("indeterminate",e.indeterminate),e.ns.is("focus",e.focus)]),tabindex:e.indeterminate?0:void 0,role:e.indeterminate?"checkbox":void 0,"aria-checked":e.indeterminate?"mixed":!1},[K("span",{class:Q(e.ns.e("inner"))},null,2),e.trueLabel||e.falseLabel?Ct((R(),H("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=i=>e.model=i),class:Q(e.ns.e("original")),type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,tabindex:e.tabindex,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel,onChange:t[1]||(t[1]=(...i)=>e.handleChange&&e.handleChange(...i)),onFocus:t[2]||(t[2]=i=>e.focus=!0),onBlur:t[3]||(t[3]=i=>e.focus=!1)},null,42,ype)),[[b0,e.model]]):Ct((R(),H("input",{key:1,"onUpdate:modelValue":t[4]||(t[4]=i=>e.model=i),class:Q(e.ns.e("original")),type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,value:e.label,name:e.name,tabindex:e.tabindex,onChange:t[5]||(t[5]=(...i)=>e.handleChange&&e.handleChange(...i)),onFocus:t[6]||(t[6]=i=>e.focus=!0),onBlur:t[7]||(t[7]=i=>e.focus=!1)},null,42,wpe)),[[b0,e.model]])],10,bpe),e.$slots.default||e.label?(R(),H("span",{key:0,class:Q(e.ns.e("label"))},[Pe(e.$slots,"default"),e.$slots.default?me("v-if",!0):(R(),H(ct,{key:0},[Zt(ze(e.label),1)],2112))],2)):me("v-if",!0)],10,vpe)}var Cpe=Ge(mpe,[["render",$pe]]);const xpe=$e({name:"ElCheckboxButton",props:cpe,emits:[Bt,"change"],setup(e){const{focus:t,isChecked:n,isDisabled:s,size:o,model:r,handleChange:i}=_L(e),{checkboxGroup:a}=df(),l=Mt("checkbox"),u=O(()=>{var c,d,f,h;const p=(d=(c=a==null?void 0:a.fill)==null?void 0:c.value)!=null?d:"";return{backgroundColor:p,borderColor:p,color:(h=(f=a==null?void 0:a.textColor)==null?void 0:f.value)!=null?h:"",boxShadow:p?`-1px 0 0 0 ${p}`:null}});return{focus:t,isChecked:n,isDisabled:s,model:r,handleChange:i,activeStyle:u,size:o,ns:l}}}),kpe=["aria-checked","aria-disabled"],Spe=["name","tabindex","disabled","true-value","false-value"],Ipe=["name","tabindex","disabled","value"];function Epe(e,t,n,s,o,r){return R(),H("label",{class:Q([e.ns.b("button"),e.ns.bm("button",e.size),e.ns.is("disabled",e.isDisabled),e.ns.is("checked",e.isChecked),e.ns.is("focus",e.focus)]),role:"checkbox","aria-checked":e.isChecked,"aria-disabled":e.isDisabled},[e.trueLabel||e.falseLabel?Ct((R(),H("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=i=>e.model=i),class:Q(e.ns.be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel,onChange:t[1]||(t[1]=(...i)=>e.handleChange&&e.handleChange(...i)),onFocus:t[2]||(t[2]=i=>e.focus=!0),onBlur:t[3]||(t[3]=i=>e.focus=!1)},null,42,Spe)),[[b0,e.model]]):Ct((R(),H("input",{key:1,"onUpdate:modelValue":t[4]||(t[4]=i=>e.model=i),class:Q(e.ns.be("button","original")),type:"checkbox",name:e.name,tabindex:e.tabindex,disabled:e.isDisabled,value:e.label,onChange:t[5]||(t[5]=(...i)=>e.handleChange&&e.handleChange(...i)),onFocus:t[6]||(t[6]=i=>e.focus=!0),onBlur:t[7]||(t[7]=i=>e.focus=!1)},null,42,Ipe)),[[b0,e.model]]),e.$slots.default||e.label?(R(),H("span",{key:2,class:Q(e.ns.be("button","inner")),style:rt(e.isChecked?e.activeStyle:null)},[Pe(e.$slots,"default",{},()=>[Zt(ze(e.label),1)])],6)):me("v-if",!0)],10,kpe)}var NL=Ge(xpe,[["render",Epe]]);const AL=$e({name:"ElCheckboxGroup",props:{modelValue:{type:Array,default:()=>[]},disabled:Boolean,min:{type:Number,default:void 0},max:{type:Number,default:void 0},size:{type:String,validator:sr},fill:{type:String,default:void 0},textColor:{type:String,default:void 0},tag:{type:String,default:"div"}},emits:[Bt,"change"],setup(e,{emit:t,slots:n}){const{elFormItem:s}=df(),o=Ss(),r=Mt("checkbox"),i=l=>{t(Bt,l),ft(()=>{t("change",l)})},a=O({get(){return e.modelValue},set(l){i(l)}});return jt("CheckboxGroup",Ut(dt({name:"ElCheckboxGroup",modelValue:a},ko(e)),{checkboxGroupSize:o,changeEvent:i})),Le(()=>e.modelValue,()=>{var l;(l=s.validate)==null||l.call(s,"change")}),()=>Ke(e.tag,{class:r.b("group"),role:"group","aria-label":"checkbox-group"},[Pe(n,"default")])}}),Si=Gt(Cpe,{CheckboxButton:NL,CheckboxGroup:AL}),Tpe=cs(NL),DL=cs(AL),RL=yt({size:_b,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),_pe=yt(Ut(dt({},RL),{modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean})),ML={[Bt]:e=>Qt(e)||Sn(e)||bi(e),change:e=>Qt(e)||Sn(e)||bi(e)},OL=(e,t)=>{const n=V(),s=Qe(LF,void 0),o=O(()=>!!s),r=O({get(){return o.value?s.modelValue:e.modelValue},set(c){o.value?s.changeEvent(c):t(Bt,c),n.value.checked=e.modelValue===e.label}}),i=Ss(O(()=>s==null?void 0:s.size)),a=Bp(O(()=>s==null?void 0:s.disabled)),l=V(!1),u=O(()=>a.value||o.value&&r.value!==e.label?-1:0);return{radioRef:n,isGroup:o,radioGroup:s,focus:l,size:i,disabled:a,tabIndex:u,modelValue:r}},Npe=$e({name:"ElRadio",props:_pe,emits:ML,setup(e,{emit:t}){const{radioRef:n,isGroup:s,focus:o,size:r,disabled:i,tabIndex:a,modelValue:l}=OL(e,t);function u(){ft(()=>t("change",l.value))}return{focus:o,isGroup:s,modelValue:l,tabIndex:a,size:r,disabled:i,radioRef:n,handleChange:u}}}),Ape=["aria-checked","aria-disabled","tabindex"],Dpe=K("span",{class:"el-radio__inner"},null,-1),Rpe=["value","name","disabled"];function Mpe(e,t,n,s,o,r){return R(),H("label",{class:Q(["el-radio",{[`el-radio--${e.size||""}`]:e.size,"is-disabled":e.disabled,"is-focus":e.focus,"is-bordered":e.border,"is-checked":e.modelValue===e.label}]),role:"radio","aria-checked":e.modelValue===e.label,"aria-disabled":e.disabled,tabindex:e.tabIndex,onKeydown:t[5]||(t[5]=qt(gt(i=>e.modelValue=e.disabled?e.modelValue:e.label,["stop","prevent"]),["space"]))},[K("span",{class:Q(["el-radio__input",{"is-disabled":e.disabled,"is-checked":e.modelValue===e.label}])},[Dpe,Ct(K("input",{ref:"radioRef","onUpdate:modelValue":t[0]||(t[0]=i=>e.modelValue=i),class:"el-radio__original",value:e.label,type:"radio","aria-hidden":"true",name:e.name,disabled:e.disabled,tabindex:"-1",onFocus:t[1]||(t[1]=i=>e.focus=!0),onBlur:t[2]||(t[2]=i=>e.focus=!1),onChange:t[3]||(t[3]=(...i)=>e.handleChange&&e.handleChange(...i))},null,40,Rpe),[[_F,e.modelValue]])],2),K("span",{class:"el-radio__label",onKeydown:t[4]||(t[4]=gt(()=>{},["stop"]))},[Pe(e.$slots,"default",{},()=>[Zt(ze(e.label),1)])],32)],42,Ape)}var Ope=Ge(Npe,[["render",Mpe]]);const Fpe=yt(Ut(dt({},RL),{name:{type:String,default:""}})),Ppe=$e({name:"ElRadioButton",props:Fpe,setup(e,{emit:t}){const{radioRef:n,isGroup:s,focus:o,size:r,disabled:i,tabIndex:a,modelValue:l,radioGroup:u}=OL(e,t),c=O(()=>({backgroundColor:(u==null?void 0:u.fill)||"",borderColor:(u==null?void 0:u.fill)||"",boxShadow:(u==null?void 0:u.fill)?`-1px 0 0 0 ${u.fill}`:"",color:(u==null?void 0:u.textColor)||""}));return{isGroup:s,size:r,disabled:i,tabIndex:a,modelValue:l,focus:o,activeStyle:c,radioRef:n}}}),Lpe=["aria-checked","aria-disabled","tabindex"],Bpe=["value","name","disabled"];function zpe(e,t,n,s,o,r){return R(),H("label",{class:Q(["el-radio-button",[e.size?"el-radio-button--"+e.size:"",{"is-active":e.modelValue===e.label,"is-disabled":e.disabled,"is-focus":e.focus}]]),role:"radio","aria-checked":e.modelValue===e.label,"aria-disabled":e.disabled,tabindex:e.tabIndex,onKeydown:t[4]||(t[4]=qt(gt(i=>e.modelValue=e.disabled?e.modelValue:e.label,["stop","prevent"]),["space"]))},[Ct(K("input",{ref:"radioRef","onUpdate:modelValue":t[0]||(t[0]=i=>e.modelValue=i),class:"el-radio-button__original-radio",value:e.label,type:"radio",name:e.name,disabled:e.disabled,tabindex:"-1",onFocus:t[1]||(t[1]=i=>e.focus=!0),onBlur:t[2]||(t[2]=i=>e.focus=!1)},null,40,Bpe),[[_F,e.modelValue]]),K("span",{class:"el-radio-button__inner",style:rt(e.modelValue===e.label?e.activeStyle:{}),onKeydown:t[3]||(t[3]=gt(()=>{},["stop"]))},[Pe(e.$slots,"default",{},()=>[Zt(ze(e.label),1)])],36)],42,Lpe)}var FL=Ge(Ppe,[["render",zpe]]);const Vpe=yt({size:_b,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},textColor:{type:String,default:""}}),Wpe=ML,Hpe=$e({name:"ElRadioGroup",props:Vpe,emits:Wpe,setup(e,t){const n=V(),{formItem:s}=cf(),o=i=>{t.emit(Bt,i),ft(()=>t.emit("change",i))},r=i=>{if(!n.value)return;const a=i.target,l=a.nodeName==="INPUT"?"[type=radio]":"[role=radio]",u=n.value.querySelectorAll(l),c=u.length,d=Array.from(u).indexOf(a),f=n.value.querySelectorAll("[role=radio]");let h=null;switch(i.code){case tt.left:case tt.up:i.stopPropagation(),i.preventDefault(),h=d===0?c-1:d-1;break;case tt.right:case tt.down:i.stopPropagation(),i.preventDefault(),h=d===c-1?0:d+1;break}h!==null&&(f[h].click(),f[h].focus())};return Ft(()=>{const i=n.value.querySelectorAll("[type=radio]"),a=i[0];!Array.from(i).some(l=>l.checked)&&a&&(a.tabIndex=0)}),jt(LF,En(Ut(dt({},ko(e)),{changeEvent:o}))),Le(()=>e.modelValue,()=>s==null?void 0:s.validate("change")),{radioGroupRef:n,handleKeydown:r}}});function Upe(e,t,n,s,o,r){return R(),H("div",{ref:"radioGroupRef",class:"el-radio-group",role:"radiogroup",onKeydown:t[0]||(t[0]=(...i)=>e.handleKeydown&&e.handleKeydown(...i))},[Pe(e.$slots,"default")],544)}var PL=Ge(Hpe,[["render",Upe]]);const LL=Gt(Ope,{RadioButton:FL,RadioGroup:PL}),jpe=cs(PL),Gpe=cs(FL);var Kpe=$e({name:"NodeContent",render(){const{node:e,panel:t}=this.$parent,{data:n,label:s}=e,{renderLabelFn:o}=t;return Ke("span",{class:"el-cascader-node__label"},o?o({node:e,data:n}):s)}});const sk=Symbol(),qpe=$e({name:"ElCascaderNode",components:{ElCheckbox:Si,ElRadio:LL,NodeContent:Kpe,ElIcon:Pt,Check:Sd,Loading:Oa,ArrowRight:ei},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const n=Qe(sk),s=O(()=>n.isHoverMenu),o=O(()=>n.config.multiple),r=O(()=>n.config.checkStrictly),i=O(()=>{var w;return(w=n.checkedNodes[0])==null?void 0:w.uid}),a=O(()=>e.node.isDisabled),l=O(()=>e.node.isLeaf),u=O(()=>r.value&&!l.value||!a.value),c=O(()=>f(n.expandingNode)),d=O(()=>r.value&&n.checkedNodes.some(f)),f=w=>{var C;const{level:x,uid:S}=e.node;return((C=w==null?void 0:w.pathNodes[x-1])==null?void 0:C.uid)===S},h=()=>{c.value||n.expandNode(e.node)},p=w=>{const{node:C}=e;w!==C.checked&&n.handleCheckChange(C,w)},g=()=>{n.lazyLoad(e.node,()=>{l.value||h()})},m=w=>{!s.value||(v(),!l.value&&t("expand",w))},v=()=>{const{node:w}=e;!u.value||w.loading||(w.loaded?h():g())},b=()=>{s.value&&!l.value||(l.value&&!a.value&&!r.value&&!o.value?y(!0):v())},$=w=>{r.value?(p(w),e.node.loaded&&h()):y(w)},y=w=>{e.node.loaded?(p(w),!r.value&&h()):g()};return{panel:n,isHoverMenu:s,multiple:o,checkStrictly:r,checkedNodeId:i,isDisabled:a,isLeaf:l,expandable:u,inExpandingPath:c,inCheckedPath:d,handleHoverExpand:m,handleExpand:v,handleClick:b,handleCheck:y,handleSelectCheck:$}}}),Ype=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Xpe=K("span",null,null,-1);function Zpe(e,t,n,s,o,r){const i=de("el-checkbox"),a=de("el-radio"),l=de("check"),u=de("el-icon"),c=de("node-content"),d=de("loading"),f=de("arrow-right");return R(),H("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:Q(["el-cascader-node",e.checkStrictly&&"is-selectable",e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path",e.node.checked&&"is-active",!e.expandable&&"is-disabled"]),onMouseenter:t[2]||(t[2]=(...h)=>e.handleHoverExpand&&e.handleHoverExpand(...h)),onFocus:t[3]||(t[3]=(...h)=>e.handleHoverExpand&&e.handleHoverExpand(...h)),onClick:t[4]||(t[4]=(...h)=>e.handleClick&&e.handleClick(...h))},[me(" prefix "),e.multiple?(R(),ke(i,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=gt(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(R(),ke(a,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=gt(()=>{},["stop"]))},{default:ce(()=>[me(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Xpe]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(R(),ke(u,{key:2,class:"el-cascader-node__prefix"},{default:ce(()=>[pe(l)]),_:1})):me("v-if",!0),me(" content "),pe(c),me(" postfix "),e.isLeaf?me("v-if",!0):(R(),H(ct,{key:3},[e.node.loading?(R(),ke(u,{key:0,class:"is-loading el-cascader-node__postfix"},{default:ce(()=>[pe(d)]),_:1})):(R(),ke(u,{key:1,class:"arrow-right el-cascader-node__postfix"},{default:ce(()=>[pe(f)]),_:1}))],2112))],42,Ype)}var Jpe=Ge(qpe,[["render",Zpe]]);const Qpe=$e({name:"ElCascaderMenu",components:{Loading:Oa,ElIcon:Pt,ElScrollbar:Fa,ElCascaderNode:Jpe},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=Wt(),{t:n}=Tn(),s=Qh();let o=null,r=null;const i=Qe(sk),a=V(null),l=O(()=>!e.nodes.length),u=O(()=>!i.initialLoaded),c=O(()=>`cascader-menu-${s}-${e.index}`),d=g=>{o=g.target},f=g=>{if(!(!i.isHoverMenu||!o||!a.value))if(o.contains(g.target)){h();const m=t.vnode.el,{left:v}=m.getBoundingClientRect(),{offsetWidth:b,offsetHeight:$}=m,y=g.clientX-v,w=o.offsetTop,C=w+o.offsetHeight;a.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${y} ${w} L${b} 0 V${w} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${y} ${C} L${b} ${$} V${C} Z" />
        `}else r||(r=window.setTimeout(p,i.config.hoverThreshold))},h=()=>{!r||(clearTimeout(r),r=null)},p=()=>{!a.value||(a.value.innerHTML="",h())};return{panel:i,hoverZone:a,isEmpty:l,isLoading:u,menuId:c,t:n,handleExpand:d,handleMouseMove:f,clearHoverZone:p}}}),ege={key:0,class:"el-cascader-menu__empty-text"},tge={key:1,class:"el-cascader-menu__empty-text"},nge={key:2,ref:"hoverZone",class:"el-cascader-menu__hover-zone"};function sge(e,t,n,s,o,r){const i=de("el-cascader-node"),a=de("loading"),l=de("el-icon"),u=de("el-scrollbar");return R(),ke(u,{key:e.menuId,tag:"ul",role:"menu",class:"el-cascader-menu","wrap-class":"el-cascader-menu__wrap","view-class":["el-cascader-menu__list",e.isEmpty&&"is-empty"],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:ce(()=>{var c;return[(R(!0),H(ct,null,en(e.nodes,d=>(R(),ke(i,{key:d.uid,node:d,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(R(),H("div",ege,[pe(l,{size:"14",class:"is-loading"},{default:ce(()=>[pe(a)]),_:1}),Zt(" "+ze(e.t("el.cascader.loading")),1)])):e.isEmpty?(R(),H("div",tge,ze(e.t("el.cascader.noData")),1)):((c=e.panel)==null?void 0:c.isHoverMenu)?(R(),H("svg",nge,null,512)):me("v-if",!0)]}),_:1},8,["view-class","onMousemove","onMouseleave"])}var oge=Ge(Qpe,[["render",sge]]),ok=(e=>(e.CLICK="click",e.HOVER="hover",e))(ok||{});let rge=0;const ige=e=>{const t=[e];let{parent:n}=e;for(;n;)t.unshift(n),n=n.parent;return t};class Ad{constructor(t,n,s,o=!1){this.data=t,this.config=n,this.parent=s,this.root=o,this.uid=rge++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:r,label:i,children:a}=n,l=t[a],u=ige(this);this.level=o?0:s?s.level+1:1,this.value=t[r],this.label=t[i],this.pathNodes=u,this.pathValues=u.map(c=>c.value),this.pathLabels=u.map(c=>c.label),this.childrenData=l,this.children=(l||[]).map(c=>new Ad(c,n,this)),this.loaded=!n.lazy||this.isLeaf||!tp(l)}get isDisabled(){const{data:t,parent:n,config:s}=this,{disabled:o,checkStrictly:r}=s;return(Vt(o)?o(t,this):!!t[o])||!r&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:t,config:n,childrenData:s,loaded:o}=this,{lazy:r,leaf:i}=n,a=Vt(i)?i(t,this):t[i];return ep(a)?r&&!o?!1:!(Array.isArray(s)&&s.length):!!a}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:n,children:s}=this,o=new Ad(t,this.config,this);return Array.isArray(n)?n.push(t):this.childrenData=[t],s.push(o),o}calcText(t,n){const s=t?this.pathLabels.join(n):this.label;return this.text=s,s}broadcast(t,...n){const s=`onParent${gr(t)}`;this.children.forEach(o=>{o&&(o.broadcast(t,...n),o[s]&&o[s](...n))})}emit(t,...n){const{parent:s}=this,o=`onChild${gr(t)}`;s&&(s[o]&&s[o](...n),s.emit(t,...n))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,n=t.filter(o=>!o.isDisabled),s=n.length?n.every(o=>o.checked):!1;this.setCheckState(s)}setCheckState(t){const n=this.children.length,s=this.children.reduce((o,r)=>{const i=r.checked?1:r.indeterminate?.5:0;return o+i},0);this.checked=this.loaded&&this.children.every(o=>o.loaded&&o.checked)&&t,this.indeterminate=this.loaded&&s!==n&&s>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:n,multiple:s}=this.config;n||!s?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const xC=(e,t)=>e.reduce((n,s)=>(s.isLeaf?n.push(s):(!t&&n.push(s),n=n.concat(xC(s.children,t))),n),[]);class IA{constructor(t,n){this.config=n;const s=(t||[]).map(o=>new Ad(o,this.config));this.nodes=s,this.allNodes=xC(s,!1),this.leafNodes=xC(s,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,n){const s=n?n.appendChild(t):new Ad(t,this.config);n||this.nodes.push(s),this.allNodes.push(s),s.isLeaf&&this.leafNodes.push(s)}appendNodes(t,n){t.forEach(s=>this.appendNode(s,n))}getNodeByValue(t,n=!1){return!t&&t!==0?null:this.getFlattedNodes(n).filter(o=>wi(o.value,t)||wi(o.pathValues,t))[0]||null}getSameNode(t){return t&&this.getFlattedNodes(!1).filter(({value:s,level:o})=>wi(t.value,s)&&t.level===o)[0]||null}}const BL={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},age={expandTrigger:ok.CLICK,multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:un,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},lge=e=>O(()=>dt(dt({},age),e.props)),EA=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},uge=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():bP(e)&&e.click()},cge=(e,t)=>{const n=t.slice(0),s=n.map(r=>r.uid),o=e.reduce((r,i)=>{const a=s.indexOf(i.uid);return a>-1&&(r.push(i),n.splice(a,1),s.splice(a,1)),r},[]);return o.push(...n),o},dge=$e({name:"ElCascaderPanel",components:{ElCascaderMenu:oge},props:Ut(dt({},BL),{border:{type:Boolean,default:!0},renderLabel:Function}),emits:[Bt,Zs,"close","expand-change"],setup(e,{emit:t,slots:n}){let s=!1;const o=lge(e);let r=null;const i=V(!0),a=V([]),l=V(null),u=V([]),c=V(null),d=V([]),f=O(()=>o.value.expandTrigger===ok.HOVER),h=O(()=>e.renderLabel||n.default),p=()=>{const{options:_}=e,N=o.value;s=!1,r=new IA(_,N),u.value=[r.getNodes()],N.lazy&&tp(e.options)?(i.value=!1,g(void 0,D=>{D&&(r=new IA(D,N),u.value=[r.getNodes()]),i.value=!0,x(!1,!0)})):x(!1,!0)},g=(_,N)=>{const D=o.value;_=_||new Ad({},D,void 0,!0),_.loading=!0;const F=P=>{const M=_,B=M.root?null:M;P&&(r==null||r.appendNodes(P,B)),M.loading=!1,M.loaded=!0,M.childrenData=M.childrenData||[],N&&N(P)};D.lazyLoad(_,F)},m=(_,N)=>{var D;const{level:F}=_,P=u.value.slice(0,F);let M;_.isLeaf?M=_.pathNodes[F-2]:(M=_,P.push(_.children)),((D=c.value)==null?void 0:D.uid)!==(M==null?void 0:M.uid)&&(c.value=_,u.value=P,!N&&t("expand-change",(_==null?void 0:_.pathValues)||[]))},v=(_,N,D=!0)=>{const{checkStrictly:F,multiple:P}=o.value,M=d.value[0];s=!0,!P&&(M==null||M.doCheck(!1)),_.doCheck(N),C(),D&&!P&&!F&&t("close"),!D&&!P&&!F&&b(_)},b=_=>{!_||(_=_.parent,b(_),_&&m(_))},$=_=>r==null?void 0:r.getFlattedNodes(_),y=_=>{var N;return(N=$(_))==null?void 0:N.filter(D=>D.checked!==!1)},w=()=>{d.value.forEach(_=>_.doCheck(!1)),C()},C=()=>{var _;const{checkStrictly:N,multiple:D}=o.value,F=d.value,P=y(!N),M=cge(F,P),B=M.map(j=>j.valueByOption);d.value=M,l.value=D?B:(_=B[0])!=null?_:null},x=(_=!1,N=!1)=>{const{modelValue:D}=e,{lazy:F,multiple:P,checkStrictly:M}=o.value,B=!M;if(!(!i.value||s||!N&&wi(D,l.value)))if(F&&!_){const X=MN(cP(Ru(D))).map(ae=>r==null?void 0:r.getNodeByValue(ae)).filter(ae=>!!ae&&!ae.loaded&&!ae.loading);X.length?X.forEach(ae=>{g(ae,()=>x(!1,N))}):x(!0,N)}else{const j=P?Ru(D):[D],X=MN(j.map(ae=>r==null?void 0:r.getNodeByValue(ae,B)));S(X,!1),l.value=D}},S=(_,N=!0)=>{const{checkStrictly:D}=o.value,F=d.value,P=_.filter(j=>!!j&&(D||j.isLeaf)),M=r==null?void 0:r.getSameNode(c.value),B=N&&M||P[0];B?B.pathNodes.forEach(j=>m(j,!0)):c.value=null,F.forEach(j=>j.doCheck(!1)),P.forEach(j=>j.doCheck(!0)),d.value=P,ft(T)},T=()=>{!Jt||a.value.forEach(_=>{const N=_==null?void 0:_.$el;if(N){const D=N.querySelector(".el-scrollbar__wrap"),F=N.querySelector(".el-cascader-node.is-active")||N.querySelector(".el-cascader-node.in-active-path");TL(D,F)}})},I=_=>{const N=_.target,{code:D}=_;switch(D){case tt.up:case tt.down:{_.preventDefault();const F=D===tt.up?-1:1;Av(yP(N,F,'.el-cascader-node[tabindex="-1"]'));break}case tt.left:{_.preventDefault();const F=a.value[EA(N)-1],P=F==null?void 0:F.$el.querySelector('.el-cascader-node[aria-expanded="true"]');Av(P);break}case tt.right:{_.preventDefault();const F=a.value[EA(N)+1],P=F==null?void 0:F.$el.querySelector('.el-cascader-node[tabindex="-1"]');Av(P);break}case tt.enter:uge(N);break;case tt.esc:case tt.tab:t("close");break}};return jt(sk,En({config:o,expandingNode:c,checkedNodes:d,isHoverMenu:f,initialLoaded:i,renderLabelFn:h,lazyLoad:g,expandNode:m,handleCheckChange:v})),Le([o,()=>e.options],p,{deep:!0,immediate:!0}),Le(()=>e.modelValue,()=>{s=!1,x()}),Le(l,_=>{wi(_,e.modelValue)||(t(Bt,_),t(Zs,_))}),rF(()=>a.value=[]),Ft(()=>!tp(e.modelValue)&&x()),{menuList:a,menus:u,checkedNodes:d,handleKeyDown:I,handleCheckChange:v,getFlattedNodes:$,getCheckedNodes:y,clearCheckedNodes:w,calculateCheckedValue:C,scrollToExpandingNode:T}}});function fge(e,t,n,s,o,r){const i=de("el-cascader-menu");return R(),H("div",{class:Q(["el-cascader-panel",e.border&&"is-bordered"]),onKeydown:t[0]||(t[0]=(...a)=>e.handleKeyDown&&e.handleKeyDown(...a))},[(R(!0),H(ct,null,en(e.menus,(a,l)=>(R(),ke(i,{key:l,ref_for:!0,ref:u=>e.menuList[l]=u,index:l,nodes:a},null,8,["index","nodes"]))),128))],34)}var Lv=Ge(dge,[["render",fge]]);Lv.install=e=>{e.component(Lv.name,Lv)};const zL=Lv,hge=zL,pge=yt({closable:Boolean,type:{type:String,values:["success","info","warning","danger",""],default:""},hit:Boolean,disableTransitions:Boolean,color:{type:String,default:""},size:{type:String,values:["large","default","small"]},effect:{type:String,values:["dark","light","plain"],default:"light"}}),gge={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},mge=$e({name:"ElTag",components:{ElIcon:Pt,Close:ki},props:pge,emits:gge,setup(e,{emit:t}){const n=Ss(),s=Mt("tag"),o=O(()=>{const{type:a,hit:l,effect:u,closable:c}=e;return[s.b(),s.is("closable",c),s.m(a),s.m(n.value),s.m(u),s.is("hit",l)]});return{ns:s,classes:o,handleClose:a=>{a.stopPropagation(),t("close",a)},handleClick:a=>{t("click",a)}}}});function vge(e,t,n,s,o,r){const i=de("close"),a=de("el-icon");return e.disableTransitions?(R(),ke(ks,{key:1,name:`${e.ns.namespace.value}-zoom-in-center`},{default:ce(()=>[K("span",{class:Q(e.classes),style:rt({backgroundColor:e.color}),onClick:t[1]||(t[1]=(...l)=>e.handleClick&&e.handleClick(...l))},[K("span",{class:Q(e.ns.e("content"))},[Pe(e.$slots,"default")],2),e.closable?(R(),ke(a,{key:0,class:Q(e.ns.e("close")),onClick:e.handleClose},{default:ce(()=>[pe(i)]),_:1},8,["class","onClick"])):me("v-if",!0)],6)]),_:3},8,["name"])):(R(),H("span",{key:0,class:Q(e.classes),style:rt({backgroundColor:e.color}),onClick:t[0]||(t[0]=(...l)=>e.handleClick&&e.handleClick(...l))},[K("span",{class:Q(e.ns.e("content"))},[Pe(e.$slots,"default")],2),e.closable?(R(),ke(a,{key:0,class:Q(e.ns.e("close")),onClick:e.handleClose},{default:ce(()=>[pe(i)]),_:1},8,["class","onClick"])):me("v-if",!0)],6))}var bge=Ge(mge,[["render",vge]]);const Pb=Gt(bge),yge=40,wge={large:36,default:32,small:28},$ge={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:e})=>{const{modifiersData:t,placement:n}=e;["right","left","bottom","top"].includes(n)||(t.arrow.x=35)},requires:["arrow"]}]},Cge=$e({name:"ElCascader",components:{ElCascaderPanel:zL,ElInput:ti,ElTooltip:lr,ElScrollbar:Fa,ElTag:Pb,ElIcon:Pt,CircleClose:_a,Check:Sd,ArrowDown:hc},directives:{Clickoutside:Nl},props:Ut(dt({},BL),{size:{type:String,validator:sr},placeholder:{type:String},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Function,default:(e,t)=>e.text.includes(t)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,debounce:{type:Number,default:300},beforeFilter:{type:Function,default:()=>!0},popperClass:{type:String,default:""},popperAppendToBody:{type:Boolean,default:!0}}),emits:[Bt,Zs,"focus","blur","visible-change","expand-change","remove-tag"],setup(e,{emit:t}){let n=0,s=0;const{t:o}=Tn(),r=Qe(ar,{}),i=Qe(Ai,{}),a=V(null),l=V(null),u=V(null),c=V(null),d=V(null),f=V(!1),h=V(!1),p=V(!1),g=V(""),m=V(""),v=V([]),b=V([]),$=V(!1),y=O(()=>e.disabled||r.disabled),w=O(()=>e.placeholder||o("el.cascader.placeholder")),C=Ss(),x=O(()=>["small"].includes(C.value)?"small":"default"),S=O(()=>!!e.props.multiple),T=O(()=>!e.filterable||S.value),I=O(()=>S.value?m.value:g.value),_=O(()=>{var q;return((q=c.value)==null?void 0:q.checkedNodes)||[]}),N=O(()=>!e.clearable||y.value||p.value||!h.value?!1:!!_.value.length),D=O(()=>{const{showAllLevels:q,separator:le}=e,xe=_.value;return xe.length?S.value?" ":xe[0].calcText(q,le):""}),F=O({get(){return e.modelValue},set(q){var le;t(Bt,q),t(Zs,q),(le=i.validate)==null||le.call(i,"change")}}),P=O(()=>{var q,le;return(le=(q=a.value)==null?void 0:q.popperRef)==null?void 0:le.contentRef}),M=q=>{var le,xe,oe;if(!y.value&&(q=q!=null?q:!f.value,q!==f.value)){if(f.value=q,(xe=(le=l.value)==null?void 0:le.input)==null||xe.setAttribute("aria-expanded",`${q}`),q)B(),ft((oe=c.value)==null?void 0:oe.scrollToExpandingNode);else if(e.filterable){const{value:Me}=D;g.value=Me,m.value=Me}t("visible-change",q)}},B=()=>{ft(()=>{var q;(q=a.value)==null||q.updatePopper()})},j=()=>{p.value=!1},X=q=>{const{showAllLevels:le,separator:xe}=e;return{node:q,key:q.uid,text:q.calcText(le,xe),hitState:!1,closable:!y.value&&!q.isDisabled}},ae=q=>{var le;const xe=q.node;xe.doCheck(!1),(le=c.value)==null||le.calculateCheckedValue(),t("remove-tag",xe.valueByOption)},be=()=>{if(!S.value)return;const q=_.value,le=[];if(q.length){const[xe,...oe]=q,Me=oe.length;le.push(X(xe)),Me&&(e.collapseTags?le.push({key:-1,text:`+ ${Me}`,closable:!1}):oe.forEach(Re=>le.push(X(Re))))}v.value=le},ie=()=>{var q,le;const{filterMethod:xe,showAllLevels:oe,separator:Me}=e,Re=(le=(q=c.value)==null?void 0:q.getFlattedNodes(!e.props.checkStrictly))==null?void 0:le.filter(ve=>ve.isDisabled?!1:(ve.calcText(oe,Me),xe(ve,I.value)));S.value&&v.value.forEach(ve=>{ve.hitState=!1}),p.value=!0,b.value=Re,B()},ye=()=>{var q;let le;p.value&&d.value?le=d.value.$el.querySelector(".el-cascader__suggestion-item"):le=(q=c.value)==null?void 0:q.$el.querySelector('.el-cascader-node[tabindex="-1"]'),le&&(le.focus(),!p.value&&le.click())},ue=()=>{var q,le;const xe=(q=l.value)==null?void 0:q.input,oe=u.value,Me=(le=d.value)==null?void 0:le.$el;if(!(!Jt||!xe)){if(Me){const Re=Me.querySelector(".el-cascader__suggestion-list");Re.style.minWidth=`${xe.offsetWidth}px`}if(oe){const{offsetHeight:Re}=oe,ve=v.value.length>0?`${Math.max(Re+6,n)}px`:`${n}px`;xe.style.height=ve,B()}}},Z=q=>{var le;return(le=c.value)==null?void 0:le.getCheckedNodes(q)},ee=q=>{B(),t("expand-change",q)},te=q=>{var le;const xe=(le=q.target)==null?void 0:le.value;if(q.type==="compositionend")$.value=!1,ft(()=>ne(xe));else{const oe=xe[xe.length-1]||"";$.value=!Mb(oe)}},fe=q=>{if(!$.value)switch(q.code){case tt.enter:M();break;case tt.down:M(!0),ft(ye),q.preventDefault();break;case tt.esc:case tt.tab:M(!1);break}},De=()=>{var q;(q=c.value)==null||q.clearCheckedNodes(),M(!1)},We=q=>{var le,xe;const{checked:oe}=q;S.value?(le=c.value)==null||le.handleCheckChange(q,!oe,!1):(!oe&&((xe=c.value)==null||xe.handleCheckChange(q,!0,!1)),M(!1))},He=q=>{const le=q.target,{code:xe}=q;switch(xe){case tt.up:case tt.down:{const oe=xe===tt.up?-1:1;Av(yP(le,oe,'.el-cascader__suggestion-item[tabindex="-1"]'));break}case tt.enter:le.click();break;case tt.esc:case tt.tab:M(!1);break}},Ve=()=>{const q=v.value,le=q[q.length-1];s=m.value?0:s+1,!(!le||!s)&&(le.hitState?ae(le):le.hitState=!0)},Y=nr(()=>{const{value:q}=I;if(!q)return;const le=e.beforeFilter(q);wd(le)?le.then(ie).catch(()=>{}):le!==!1?ie():j()},e.debounce),ne=(q,le)=>{!f.value&&M(!0),!(le==null?void 0:le.isComposing)&&(q?Y():j())};return Le(p,B),Le([_,y],be),Le(v,()=>{ft(()=>ue())}),Le(D,q=>g.value=q,{immediate:!0}),Ft(()=>{var q;const le=(q=l.value)==null?void 0:q.$el;n=(le==null?void 0:le.offsetHeight)||wge[C.value]||yge,Al(le,ue)}),us(()=>{var q;Dl((q=l.value)==null?void 0:q.$el,ue)}),{popperOptions:$ge,tooltipRef:a,popperPaneRef:P,input:l,tagWrapper:u,panel:c,suggestionPanel:d,popperVisible:f,inputHover:h,inputPlaceholder:w,filtering:p,presentText:D,checkedValue:F,inputValue:g,searchInputValue:m,presentTags:v,suggestions:b,isDisabled:y,isOnComposition:$,realSize:C,tagSize:x,multiple:S,readonly:T,clearBtnVisible:N,t:o,togglePopperVisible:M,hideSuggestionPanel:j,deleteTag:ae,focusFirstNode:ye,getCheckedNodes:Z,handleExpandChange:ee,handleKeyDown:fe,handleComposition:te,handleClear:De,handleSuggestionClick:We,handleSuggestionKeyDown:He,handleDelete:Ve,handleInput:ne}}}),xge={key:0,ref:"tagWrapper",class:"el-cascader__tags"},kge=["placeholder"],Sge=["onClick"],Ige={class:"el-cascader__empty-text"};function Ege(e,t,n,s,o,r){const i=de("circle-close"),a=de("el-icon"),l=de("arrow-down"),u=de("el-input"),c=de("el-tag"),d=de("el-cascader-panel"),f=de("check"),h=de("el-scrollbar"),p=de("el-tooltip"),g=Wo("clickoutside");return R(),ke(p,{ref:"tooltipRef",visible:e.popperVisible,"onUpdate:visible":t[17]||(t[17]=m=>e.popperVisible=m),"append-to-body":e.popperAppendToBody,"popper-class":`el-cascader__dropdown ${e.popperClass}`,"popper-options":e.popperOptions,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:"el-zoom-in-top",effect:"light",pure:"",persistent:"",onHide:e.hideSuggestionPanel},{default:ce(()=>[Ct((R(),H("div",{class:Q(["el-cascader",e.realSize&&`el-cascader--${e.realSize}`,{"is-disabled":e.isDisabled},e.$attrs.class]),style:rt(e.$attrs.style),onClick:t[11]||(t[11]=()=>e.togglePopperVisible(e.readonly?void 0:!0)),onKeydown:t[12]||(t[12]=(...m)=>e.handleKeyDown&&e.handleKeyDown(...m)),onMouseenter:t[13]||(t[13]=m=>e.inputHover=!0),onMouseleave:t[14]||(t[14]=m=>e.inputHover=!1)},[pe(u,{ref:"input",modelValue:e.inputValue,"onUpdate:modelValue":t[1]||(t[1]=m=>e.inputValue=m),placeholder:e.inputPlaceholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1,size:e.realSize,class:Q({"is-focus":e.popperVisible}),onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onFocus:t[2]||(t[2]=m=>e.$emit("focus",m)),onBlur:t[3]||(t[3]=m=>e.$emit("blur",m)),onInput:e.handleInput},{suffix:ce(()=>[e.clearBtnVisible?(R(),ke(a,{key:"clear",class:"el-input__icon icon-circle-close",onClick:gt(e.handleClear,["stop"])},{default:ce(()=>[pe(i)]),_:1},8,["onClick"])):(R(),ke(a,{key:"arrow-down",class:Q(["el-input__icon","icon-arrow-down",e.popperVisible&&"is-reverse"]),onClick:t[0]||(t[0]=gt(m=>e.togglePopperVisible(),["stop"]))},{default:ce(()=>[pe(l)]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","onCompositionstart","onCompositionupdate","onCompositionend","onInput"]),e.multiple?(R(),H("div",xge,[(R(!0),H(ct,null,en(e.presentTags,m=>(R(),ke(c,{key:m.key,type:"info",size:e.tagSize,hit:m.hitState,closable:m.closable,"disable-transitions":"",onClose:v=>e.deleteTag(m)},{default:ce(()=>[K("span",null,ze(m.text),1)]),_:2},1032,["size","hit","closable","onClose"]))),128)),e.filterable&&!e.isDisabled?Ct((R(),H("input",{key:0,"onUpdate:modelValue":t[4]||(t[4]=m=>e.searchInputValue=m),type:"text",class:"el-cascader__search-input",placeholder:e.presentText?"":e.inputPlaceholder,onInput:t[5]||(t[5]=m=>e.handleInput(e.searchInputValue,m)),onClick:t[6]||(t[6]=gt(m=>e.togglePopperVisible(!0),["stop"])),onKeydown:t[7]||(t[7]=qt((...m)=>e.handleDelete&&e.handleDelete(...m),["delete"])),onCompositionstart:t[8]||(t[8]=(...m)=>e.handleComposition&&e.handleComposition(...m)),onCompositionupdate:t[9]||(t[9]=(...m)=>e.handleComposition&&e.handleComposition(...m)),onCompositionend:t[10]||(t[10]=(...m)=>e.handleComposition&&e.handleComposition(...m))},null,40,kge)),[[I2,e.searchInputValue]]):me("v-if",!0)],512)):me("v-if",!0)],38)),[[g,()=>e.togglePopperVisible(!1),e.popperPaneRef]])]),content:ce(()=>[Ct(pe(d,{ref:"panel",modelValue:e.checkedValue,"onUpdate:modelValue":t[15]||(t[15]=m=>e.checkedValue=m),options:e.options,props:e.props,border:!1,"render-label":e.$slots.default,onExpandChange:e.handleExpandChange,onClose:t[16]||(t[16]=m=>e.$nextTick(()=>e.togglePopperVisible(!1)))},null,8,["modelValue","options","props","render-label","onExpandChange"]),[[sn,!e.filtering]]),e.filterable?Ct((R(),ke(h,{key:0,ref:"suggestionPanel",tag:"ul",class:"el-cascader__suggestion-panel","view-class":"el-cascader__suggestion-list",onKeydown:e.handleSuggestionKeyDown},{default:ce(()=>[e.suggestions.length?(R(!0),H(ct,{key:0},en(e.suggestions,m=>(R(),H("li",{key:m.uid,class:Q(["el-cascader__suggestion-item",m.checked&&"is-checked"]),tabindex:-1,onClick:v=>e.handleSuggestionClick(m)},[K("span",null,ze(m.text),1),m.checked?(R(),ke(a,{key:0},{default:ce(()=>[pe(f)]),_:1})):me("v-if",!0)],10,Sge))),128)):Pe(e.$slots,"empty",{key:1},()=>[K("li",Ige,ze(e.t("el.cascader.noMatch")),1)])]),_:3},8,["onKeydown"])),[[sn,e.filtering]]):me("v-if",!0)]),_:3},8,["visible","append-to-body","popper-class","popper-options","onHide"])}var Bv=Ge(Cge,[["render",Ege]]);Bv.install=e=>{e.component(Bv.name,Bv)};const Tge=Bv,_ge=Tge,Nge=yt({checked:{type:Boolean,default:!1}}),Age={"update:checked":e=>bi(e),change:e=>bi(e)},Dge=$e({name:"ElCheckTag",props:Nge,emits:Age,setup(e,{emit:t}){return{ns:Mt("check-tag"),onChange:()=>{const o=!e.checked;t("change",o),t("update:checked",o)}}}});function Rge(e,t,n,s,o,r){return R(),H("span",{class:Q([e.ns.b(),e.ns.is("checked",e.checked)]),onClick:t[0]||(t[0]=(...i)=>e.onChange&&e.onChange(...i))},[Pe(e.$slots,"default")],2)}var Mge=Ge(Dge,[["render",Rge]]);const Oge=Gt(Mge),Fge=yt({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:et([Number,Object]),default:()=>As({})},sm:{type:et([Number,Object]),default:()=>As({})},md:{type:et([Number,Object]),default:()=>As({})},lg:{type:et([Number,Object]),default:()=>As({})},xl:{type:et([Number,Object]),default:()=>As({})}});var Pge=$e({name:"ElCol",props:Fge,setup(e,{slots:t}){const{gutter:n}=Qe("ElRow",{gutter:{value:0}}),s=O(()=>n.value?{paddingLeft:`${n.value/2}px`,paddingRight:`${n.value/2}px`}:{}),o=O(()=>{const r=[];return["span","offset","pull","push"].forEach(l=>{const u=e[l];typeof u=="number"&&(l==="span"?r.push(`el-col-${e[l]}`):u>0&&r.push(`el-col-${l}-${e[l]}`))}),["xs","sm","md","lg","xl"].forEach(l=>{if(typeof e[l]=="number")r.push(`el-col-${l}-${e[l]}`);else if(typeof e[l]=="object"){const u=e[l];Object.keys(u).forEach(c=>{r.push(c!=="span"?`el-col-${l}-${c}-${u[c]}`:`el-col-${l}-${u[c]}`)})}}),n.value&&r.push("is-guttered"),r});return()=>Ke(e.tag,{class:["el-col",o.value],style:s.value},[Pe(t,"default")])}});const Lge=Gt(Pge),Bge=$e({name:"ElCollapse",props:{accordion:Boolean,modelValue:{type:[Array,String,Number],default:()=>[]}},emits:[Bt,Zs],setup(e,{emit:t}){const n=V([].concat(e.modelValue)),s=r=>{n.value=[].concat(r);const i=e.accordion?n.value[0]:n.value;t(Bt,i),t(Zs,i)},o=r=>{if(e.accordion)s((n.value[0]||n.value[0]===0)&&n.value[0]===r?"":r);else{const i=n.value.slice(0),a=i.indexOf(r);a>-1?i.splice(a,1):i.push(r),s(i)}};return Le(()=>e.modelValue,()=>{n.value=[].concat(e.modelValue)},{deep:!0}),jt("collapse",{activeNames:n,handleItemClick:o}),{activeNames:n,setActiveNames:s,handleItemClick:o}}}),zge={class:"el-collapse",role:"tablist","aria-multiselectable":"true"};function Vge(e,t,n,s,o,r){return R(),H("div",zge,[Pe(e.$slots,"default")])}var Wge=Ge(Bge,[["render",Vge]]);const Hge=$e({name:"ElCollapseTransition",setup(){return{on:{beforeEnter(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter(e){e.dataset.oldOverflow=e.style.overflow,e.scrollHeight!==0?(e.style.maxHeight=`${e.scrollHeight}px`,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.maxHeight=0,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},afterEnter(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow},beforeLeave(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.maxHeight=`${e.scrollHeight}px`,e.style.overflow="hidden"},leave(e){e.scrollHeight!==0&&(e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave(e){e.style.maxHeight="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom}}}}});function Uge(e,t,n,s,o,r){return R(),ke(ks,uo({name:"el-collapse-transition"},Cq(e.on)),{default:ce(()=>[Pe(e.$slots,"default")]),_:3},16)}var zv=Ge(Hge,[["render",Uge]]);zv.install=e=>{e.component(zv.name,zv)};const Lb=zv,jge=Lb,Gge=$e({name:"ElCollapseItem",components:{ElCollapseTransition:Lb,ElIcon:Pt,ArrowRight:ei},props:{title:{type:String,default:""},name:{type:[String,Number],default:()=>Qh()},disabled:Boolean},setup(e){const t=Qe("collapse"),n=V({height:"auto",display:"block"}),s=V(0),o=V(!1),r=V(!1),i=V(Qh());return{isActive:O(()=>(t==null?void 0:t.activeNames.value.indexOf(e.name))>-1),contentWrapStyle:n,contentHeight:s,focusing:o,isClick:r,id:i,handleFocus:()=>{setTimeout(()=>{r.value?r.value=!1:o.value=!0},50)},handleHeaderClick:()=>{e.disabled||(t==null||t.handleItemClick(e.name),o.value=!1,r.value=!0)},handleEnterClick:()=>{t==null||t.handleItemClick(e.name)},collapse:t}}}),Kge=["aria-expanded","aria-controls","aria-describedby"],qge=["id","tabindex"],Yge=["id","aria-hidden","aria-labelledby"],Xge={class:"el-collapse-item__content"};function Zge(e,t,n,s,o,r){const i=de("arrow-right"),a=de("el-icon"),l=de("el-collapse-transition");return R(),H("div",{class:Q(["el-collapse-item",{"is-active":e.isActive,"is-disabled":e.disabled}])},[K("div",{role:"tab","aria-expanded":e.isActive,"aria-controls":`el-collapse-content-${e.id}`,"aria-describedby":`el-collapse-content-${e.id}`},[K("div",{id:`el-collapse-head-${e.id}`,class:Q(["el-collapse-item__header",{focusing:e.focusing,"is-active":e.isActive}]),role:"button",tabindex:e.disabled?-1:0,onClick:t[0]||(t[0]=(...u)=>e.handleHeaderClick&&e.handleHeaderClick(...u)),onKeyup:t[1]||(t[1]=qt(gt((...u)=>e.handleEnterClick&&e.handleEnterClick(...u),["stop"]),["space","enter"])),onFocus:t[2]||(t[2]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onBlur:t[3]||(t[3]=u=>e.focusing=!1)},[Pe(e.$slots,"title",{},()=>[Zt(ze(e.title),1)]),pe(a,{class:Q(["el-collapse-item__arrow",{"is-active":e.isActive}])},{default:ce(()=>[pe(i)]),_:1},8,["class"])],42,qge)],8,Kge),pe(l,null,{default:ce(()=>[Ct(K("div",{id:`el-collapse-content-${e.id}`,class:"el-collapse-item__wrap",role:"tabpanel","aria-hidden":!e.isActive,"aria-labelledby":`el-collapse-head-${e.id}`},[K("div",Xge,[Pe(e.$slots,"default")])],8,Yge),[[sn,e.isActive]])]),_:3})],2)}var VL=Ge(Gge,[["render",Zge]]);const Jge=Gt(Wge,{CollapseItem:VL}),Qge=cs(VL);let Lw=!1;function rp(e,t){if(!Jt)return;const n=function(r){var i;(i=t.drag)==null||i.call(t,r)},s=function(r){var i;qn(document,"mousemove",n),qn(document,"mouseup",s),qn(document,"touchmove",n),qn(document,"touchend",s),document.onselectstart=null,document.ondragstart=null,Lw=!1,(i=t.end)==null||i.call(t,r)},o=function(r){var i;Lw||(r.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,wn(document,"mousemove",n),wn(document,"mouseup",s),wn(document,"touchmove",n),wn(document,"touchend",s),Lw=!0,(i=t.start)==null||i.call(t,r))};wn(e,"mousedown",o),wn(e,"touchstart",o)}const eme=$e({name:"ElColorAlphaSlider",props:{color:{type:Object,required:!0},vertical:{type:Boolean,default:!1}},setup(e){const t=Wt(),n=bo(null),s=bo(null),o=V(0),r=V(0),i=V(null);Le(()=>e.color.get("alpha"),()=>{f()}),Le(()=>e.color.value,()=>{f()});function a(){if(e.vertical)return 0;const h=t.vnode.el,p=e.color.get("alpha");return h?Math.round(p*(h.offsetWidth-n.value.offsetWidth/2)/100):0}function l(){const h=t.vnode.el;if(!e.vertical)return 0;const p=e.color.get("alpha");return h?Math.round(p*(h.offsetHeight-n.value.offsetHeight/2)/100):0}function u(){if(e.color&&e.color.value){const{r:h,g:p,b:g}=e.color.toRgb();return`linear-gradient(to right, rgba(${h}, ${p}, ${g}, 0) 0%, rgba(${h}, ${p}, ${g}, 1) 100%)`}return null}function c(h){h.target!==n.value&&d(h)}function d(h){const g=t.vnode.el.getBoundingClientRect(),{clientX:m,clientY:v}=V2(h);if(e.vertical){let b=v-g.top;b=Math.max(n.value.offsetHeight/2,b),b=Math.min(b,g.height-n.value.offsetHeight/2),e.color.set("alpha",Math.round((b-n.value.offsetHeight/2)/(g.height-n.value.offsetHeight)*100))}else{let b=m-g.left;b=Math.max(n.value.offsetWidth/2,b),b=Math.min(b,g.width-n.value.offsetWidth/2),e.color.set("alpha",Math.round((b-n.value.offsetWidth/2)/(g.width-n.value.offsetWidth)*100))}}function f(){o.value=a(),r.value=l(),i.value=u()}return Ft(()=>{const h={drag:p=>{d(p)},end:p=>{d(p)}};rp(s.value,h),rp(n.value,h),f()}),{thumb:n,bar:s,thumbLeft:o,thumbTop:r,background:i,handleClick:c,update:f}}});function tme(e,t,n,s,o,r){return R(),H("div",{class:Q(["el-color-alpha-slider",{"is-vertical":e.vertical}])},[K("div",{ref:"bar",class:"el-color-alpha-slider__bar",style:rt({background:e.background}),onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i))},null,4),K("div",{ref:"thumb",class:"el-color-alpha-slider__thumb",style:rt({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,4)],2)}var nme=Ge(eme,[["render",tme]]);const sme=$e({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(e){const t=Wt(),n=V(null),s=V(null),o=V(0),r=V(0),i=O(()=>e.color.get("hue"));Le(()=>i.value,()=>{d()});function a(f){f.target!==n.value&&l(f)}function l(f){const p=t.vnode.el.getBoundingClientRect(),{clientX:g,clientY:m}=V2(f);let v;if(e.vertical){let b=m-p.top;b=Math.min(b,p.height-n.value.offsetHeight/2),b=Math.max(n.value.offsetHeight/2,b),v=Math.round((b-n.value.offsetHeight/2)/(p.height-n.value.offsetHeight)*360)}else{let b=g-p.left;b=Math.min(b,p.width-n.value.offsetWidth/2),b=Math.max(n.value.offsetWidth/2,b),v=Math.round((b-n.value.offsetWidth/2)/(p.width-n.value.offsetWidth)*360)}e.color.set("hue",v)}function u(){const f=t.vnode.el;if(e.vertical)return 0;const h=e.color.get("hue");return f?Math.round(h*(f.offsetWidth-n.value.offsetWidth/2)/360):0}function c(){const f=t.vnode.el;if(!e.vertical)return 0;const h=e.color.get("hue");return f?Math.round(h*(f.offsetHeight-n.value.offsetHeight/2)/360):0}function d(){o.value=u(),r.value=c()}return Ft(()=>{const f={drag:h=>{l(h)},end:h=>{l(h)}};rp(s.value,f),rp(n.value,f),d()}),{bar:s,thumb:n,thumbLeft:o,thumbTop:r,hueValue:i,handleClick:a,update:d}}});function ome(e,t,n,s,o,r){return R(),H("div",{class:Q(["el-color-hue-slider",{"is-vertical":e.vertical}])},[K("div",{ref:"bar",class:"el-color-hue-slider__bar",onClick:t[0]||(t[0]=(...i)=>e.handleClick&&e.handleClick(...i))},null,512),K("div",{ref:"thumb",class:"el-color-hue-slider__thumb",style:rt({left:e.thumbLeft+"px",top:e.thumbTop+"px"})},null,4)],2)}var rme=Ge(sme,[["render",ome]]);const WL=Symbol(),ime=()=>Qe(WL),TA=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},ame=function(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1},lme=function(e){return typeof e=="string"&&e.indexOf("%")!==-1},fd=function(e,t){ame(e)&&(e="100%");const n=lme(e);return e=Math.min(t,Math.max(0,parseFloat(`${e}`))),n&&(e=parseInt(`${e*t}`,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)},_A={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Vv=function(e){e=Math.min(Math.round(e),255);const t=Math.floor(e/16),n=e%16;return`${_A[t]||t}${_A[n]||n}`},NA=function({r:e,g:t,b:n}){return isNaN(e)||isNaN(t)||isNaN(n)?"":`#${Vv(e)}${Vv(t)}${Vv(n)}`},Bw={A:10,B:11,C:12,D:13,E:14,F:15},eu=function(e){return e.length===2?(Bw[e[0].toUpperCase()]||+e[0])*16+(Bw[e[1].toUpperCase()]||+e[1]):Bw[e[1].toUpperCase()]||+e[1]},ume=function(e,t,n){t=t/100,n=n/100;let s=t;const o=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,s*=o<=1?o:2-o;const r=(n+t)/2,i=n===0?2*s/(o+s):2*t/(n+t);return{h:e,s:i*100,v:r*100}},AA=function(e,t,n){e=fd(e,255),t=fd(t,255),n=fd(n,255);const s=Math.max(e,t,n),o=Math.min(e,t,n);let r;const i=s,a=s-o,l=s===0?0:a/s;if(s===o)r=0;else{switch(s){case e:{r=(t-n)/a+(t<n?6:0);break}case t:{r=(n-e)/a+2;break}case n:{r=(e-t)/a+4;break}}r/=6}return{h:r*360,s:l*100,v:i*100}},zf=function(e,t,n){e=fd(e,360)*6,t=fd(t,100),n=fd(n,100);const s=Math.floor(e),o=e-s,r=n*(1-t),i=n*(1-o*t),a=n*(1-(1-o)*t),l=s%6,u=[n,i,r,r,a,n][l],c=[a,n,n,i,r,r][l],d=[r,r,a,n,n,i][l];return{r:Math.round(u*255),g:Math.round(c*255),b:Math.round(d*255)}};class Eh{constructor(t){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",t=t||{};for(const n in t)Kt(t,n)&&(this[n]=t[n]);t.value?this.fromString(t.value):this.doOnChange()}set(t,n){if(arguments.length===1&&typeof t=="object"){for(const s in t)Kt(t,s)&&this.set(s,t[s]);return}this[`_${t}`]=n,this.doOnChange()}get(t){return t==="alpha"?Math.floor(this[`_${t}`]):this[`_${t}`]}toRgb(){return zf(this._hue,this._saturation,this._value)}fromString(t){if(!t){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const n=(s,o,r)=>{this._hue=Math.max(0,Math.min(360,s)),this._saturation=Math.max(0,Math.min(100,o)),this._value=Math.max(0,Math.min(100,r)),this.doOnChange()};if(t.indexOf("hsl")!==-1){const s=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,r)=>r>2?parseFloat(o):parseInt(o,10));if(s.length===4?this._alpha=parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3){const{h:o,s:r,v:i}=ume(s[0],s[1],s[2]);n(o,r,i)}}else if(t.indexOf("hsv")!==-1){const s=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,r)=>r>2?parseFloat(o):parseInt(o,10));s.length===4?this._alpha=parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3&&n(s[0],s[1],s[2])}else if(t.indexOf("rgb")!==-1){const s=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(o=>o!=="").map((o,r)=>r>2?parseFloat(o):parseInt(o,10));if(s.length===4?this._alpha=parseFloat(s[3])*100:s.length===3&&(this._alpha=100),s.length>=3){const{h:o,s:r,v:i}=AA(s[0],s[1],s[2]);n(o,r,i)}}else if(t.indexOf("#")!==-1){const s=t.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(s))return;let o,r,i;s.length===3?(o=eu(s[0]+s[0]),r=eu(s[1]+s[1]),i=eu(s[2]+s[2])):(s.length===6||s.length===8)&&(o=eu(s.substring(0,2)),r=eu(s.substring(2,4)),i=eu(s.substring(4,6))),s.length===8?this._alpha=eu(s.substring(6))/255*100:(s.length===3||s.length===6)&&(this._alpha=100);const{h:a,s:l,v:u}=AA(o,r,i);n(a,l,u)}}compare(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1}doOnChange(){const{_hue:t,_saturation:n,_value:s,_alpha:o,format:r}=this;if(this.enableAlpha)switch(r){case"hsl":{const i=TA(t,n/100,s/100);this.value=`hsla(${t}, ${Math.round(i[1]*100)}%, ${Math.round(i[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${t}, ${Math.round(n)}%, ${Math.round(s)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${NA(zf(t,n,s))}${Vv(o*255/100)}`;break}default:{const{r:i,g:a,b:l}=zf(t,n,s);this.value=`rgba(${i}, ${a}, ${l}, ${this.get("alpha")/100})`}}else switch(r){case"hsl":{const i=TA(t,n/100,s/100);this.value=`hsl(${t}, ${Math.round(i[1]*100)}%, ${Math.round(i[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${t}, ${Math.round(n)}%, ${Math.round(s)}%)`;break}case"rgb":{const{r:i,g:a,b:l}=zf(t,n,s);this.value=`rgb(${i}, ${a}, ${l})`;break}default:this.value=NA(zf(t,n,s))}}}const cme=$e({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(e){const{currentColor:t}=ime(),n=V(o(e.colors,e.color));Le(()=>t.value,r=>{const i=new Eh;i.fromString(r),n.value.forEach(a=>{a.selected=i.compare(a)})}),ka(()=>{n.value=o(e.colors,e.color)});function s(r){e.color.fromString(e.colors[r])}function o(r,i){return r.map(a=>{const l=new Eh;return l.enableAlpha=!0,l.format="rgba",l.fromString(a),l.selected=l.value===i.value,l})}return{rgbaColors:n,handleSelect:s}}}),dme={class:"el-color-predefine"},fme={class:"el-color-predefine__colors"},hme=["onClick"];function pme(e,t,n,s,o,r){return R(),H("div",dme,[K("div",fme,[(R(!0),H(ct,null,en(e.rgbaColors,(i,a)=>(R(),H("div",{key:e.colors[a],class:Q(["el-color-predefine__color-selector",{selected:i.selected,"is-alpha":i._alpha<100}]),onClick:l=>e.handleSelect(a)},[K("div",{style:rt({backgroundColor:i.value})},null,4)],10,hme))),128))])])}var gme=Ge(cme,[["render",pme]]);const mme=$e({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(e){const t=Wt(),n=V(0),s=V(0),o=V("hsl(0, 100%, 50%)"),r=O(()=>{const l=e.color.get("hue"),u=e.color.get("value");return{hue:l,value:u}});function i(){const l=e.color.get("saturation"),u=e.color.get("value"),c=t.vnode.el,{clientWidth:d,clientHeight:f}=c;s.value=l*d/100,n.value=(100-u)*f/100,o.value=`hsl(${e.color.get("hue")}, 100%, 50%)`}function a(l){const c=t.vnode.el.getBoundingClientRect(),{clientX:d,clientY:f}=V2(l);let h=d-c.left,p=f-c.top;h=Math.max(0,h),h=Math.min(h,c.width),p=Math.max(0,p),p=Math.min(p,c.height),s.value=h,n.value=p,e.color.set({saturation:h/c.width*100,value:100-p/c.height*100})}return Le(()=>r.value,()=>{i()}),Ft(()=>{rp(t.vnode.el,{drag:l=>{a(l)},end:l=>{a(l)}}),i()}),{cursorTop:n,cursorLeft:s,background:o,colorValue:r,handleDrag:a,update:i}}}),vme=K("div",{class:"el-color-svpanel__white"},null,-1),bme=K("div",{class:"el-color-svpanel__black"},null,-1),yme=K("div",null,null,-1),wme=[yme];function $me(e,t,n,s,o,r){return R(),H("div",{class:"el-color-svpanel",style:rt({backgroundColor:e.background})},[vme,bme,K("div",{class:"el-color-svpanel__cursor",style:rt({top:e.cursorTop+"px",left:e.cursorLeft+"px"})},wme,4)],4)}var Cme=Ge(mme,[["render",$me]]);const xme=$e({name:"ElColorPicker",components:{ElButton:sa,ElTooltip:lr,ElInput:ti,ElIcon:Pt,Close:ki,ArrowDown:hc,SvPanel:Cme,HueSlider:rme,AlphaSlider:nme,Predefine:gme},directives:{ClickOutside:Nl},props:{modelValue:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:{type:String,validator:sr},popperClass:String,predefine:Array},emits:["change","active-change",Bt],setup(e,{emit:t}){const{t:n}=Tn(),s=Qe(ar,{}),o=Qe(Ai,{}),r=V(null),i=V(null),a=V(null),l=V(null),u=En(new Eh({enableAlpha:e.showAlpha,format:e.colorFormat,value:e.modelValue})),c=V(!1),d=V(!1),f=V(""),h=O(()=>!e.modelValue&&!d.value?"transparent":v(u,e.showAlpha)),p=Ss(),g=O(()=>e.disabled||s.disabled),m=O(()=>!e.modelValue&&!d.value?"":u.value);Le(()=>e.modelValue,I=>{I?I&&I!==u.value&&u.fromString(I):d.value=!1}),Le(()=>m.value,I=>{f.value=I,t("active-change",I)}),Le(()=>u.value,()=>{!e.modelValue&&!d.value&&(d.value=!0)});function v(I,_){if(!(I instanceof Eh))throw Error("color should be instance of _color Class");const{r:N,g:D,b:F}=I.toRgb();return _?`rgba(${N}, ${D}, ${F}, ${I.get("alpha")/100})`:`rgb(${N}, ${D}, ${F})`}function b(I){c.value=I}const $=nr(b,100);function y(){$(!1),w()}function w(){ft(()=>{e.modelValue?u.fromString(e.modelValue):d.value=!1})}function C(){g.value||$(!c.value)}function x(){u.fromString(f.value)}function S(){var I;const _=u.value;t(Bt,_),t("change",_),(I=o.validate)==null||I.call(o,"change"),$(!1),ft(()=>{const N=new Eh({enableAlpha:e.showAlpha,format:e.colorFormat,value:e.modelValue});u.compare(N)||w()})}function T(){var I;$(!1),t(Bt,null),t("change",null),e.modelValue!==null&&((I=o.validate)==null||I.call(o,"change")),w()}return Ft(()=>{e.modelValue&&(f.value=m.value)}),Le(()=>c.value,()=>{ft(()=>{var I,_,N;(I=r.value)==null||I.update(),(_=i.value)==null||_.update(),(N=a.value)==null||N.update()})}),jt(WL,{currentColor:m}),{color:u,colorDisabled:g,colorSize:p,displayedColor:h,showPanelColor:d,showPicker:c,customInput:f,handleConfirm:x,hide:y,handleTrigger:C,clear:T,confirmValue:S,t:n,hue:r,svPanel:i,alpha:a,popper:l}}}),kme={class:"el-color-dropdown__main-wrapper"},Sme={class:"el-color-dropdown__btns"},Ime={class:"el-color-dropdown__value"},Eme={key:0,class:"el-color-picker__mask"};function Tme(e,t,n,s,o,r){const i=de("hue-slider"),a=de("sv-panel"),l=de("alpha-slider"),u=de("predefine"),c=de("el-input"),d=de("el-button"),f=de("arrow-down"),h=de("el-icon"),p=de("close"),g=de("el-tooltip"),m=Wo("click-outside");return R(),ke(g,{ref:"popper",visible:e.showPicker,"onUpdate:visible":t[2]||(t[2]=v=>e.showPicker=v),"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":`el-color-picker__panel el-color-dropdown ${e.popperClass}`,"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:"el-zoom-in-top",persistent:""},{content:ce(()=>[Ct((R(),H("div",null,[K("div",kme,[pe(i,{ref:"hue",class:"hue-slider",color:e.color,vertical:""},null,8,["color"]),pe(a,{ref:"svPanel",color:e.color},null,8,["color"])]),e.showAlpha?(R(),ke(l,{key:0,ref:"alpha",color:e.color},null,8,["color"])):me("v-if",!0),e.predefine?(R(),ke(u,{key:1,ref:"predefine",color:e.color,colors:e.predefine},null,8,["color","colors"])):me("v-if",!0),K("div",Sme,[K("span",Ime,[pe(c,{modelValue:e.customInput,"onUpdate:modelValue":t[0]||(t[0]=v=>e.customInput=v),"validate-event":!1,size:"small",onKeyup:qt(e.handleConfirm,["enter"]),onBlur:e.handleConfirm},null,8,["modelValue","onKeyup","onBlur"])]),pe(d,{size:"small",type:"text",class:"el-color-dropdown__link-btn",onClick:e.clear},{default:ce(()=>[Zt(ze(e.t("el.colorpicker.clear")),1)]),_:1},8,["onClick"]),pe(d,{plain:"",size:"small",class:"el-color-dropdown__btn",onClick:e.confirmValue},{default:ce(()=>[Zt(ze(e.t("el.colorpicker.confirm")),1)]),_:1},8,["onClick"])])])),[[m,e.hide]])]),default:ce(()=>[K("div",{class:Q(["el-color-picker",e.colorDisabled?"is-disabled":"",e.colorSize?`el-color-picker--${e.colorSize}`:""])},[e.colorDisabled?(R(),H("div",Eme)):me("v-if",!0),K("div",{class:"el-color-picker__trigger",onClick:t[1]||(t[1]=(...v)=>e.handleTrigger&&e.handleTrigger(...v))},[K("span",{class:Q(["el-color-picker__color",{"is-alpha":e.showAlpha}])},[K("span",{class:"el-color-picker__color-inner",style:rt({backgroundColor:e.displayedColor})},[Ct(pe(h,{class:"el-color-picker__icon is-icon-arrow-down"},{default:ce(()=>[pe(f)]),_:1},512),[[sn,e.modelValue||e.showPanelColor]]),!e.modelValue&&!e.showPanelColor?(R(),ke(h,{key:0,class:"el-color-picker__empty is-icon-close"},{default:ce(()=>[pe(p)]),_:1})):me("v-if",!0)],4)],2)])],2)]),_:1},8,["visible","popper-class"])}var Wv=Ge(xme,[["render",Tme]]);Wv.install=e=>{e.component(Wv.name,Wv)};const _me=Wv,Nme=_me,kC={},Ame=yt({locale:{type:et(Object)},size:{type:String,values:["large","default","small"]},button:{type:et(Object)},message:{type:et(Object)},zIndex:{type:Number},namespace:{type:String,default:"el"}});var Dme=$e({name:"ElConfigProvider",props:Ame,setup(e,{slots:t}){Le(()=>e.message,s=>{Object.assign(kC,s!=null?s:{})},{immediate:!0,deep:!0});const n=fP(e);return()=>Pe(t,"default",{config:n==null?void 0:n.value})}});const Rme=Gt(Dme),Mme=$e({name:"ElContainer",props:{direction:{type:String,default:""}},setup(e,{slots:t}){const n=Mt("container");return{isVertical:O(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(r=>{const i=r.type.name;return i==="ElHeader"||i==="ElFooter"}):!1),ns:n}}});function Ome(e,t,n,s,o,r){return R(),H("section",{class:Q([e.ns.b(),e.ns.is("vertical",e.isVertical)])},[Pe(e.$slots,"default")],2)}var Fme=Ge(Mme,[["render",Ome]]);const Pme=$e({name:"ElAside",props:{width:{type:String,default:null}},setup(e){const t=Mt("aside");return{style:O(()=>e.width?{"--el-aside-width":e.width}:{}),ns:t}}});function Lme(e,t,n,s,o,r){return R(),H("aside",{class:Q(e.ns.b()),style:rt(e.style)},[Pe(e.$slots,"default")],6)}var HL=Ge(Pme,[["render",Lme]]);const Bme=$e({name:"ElFooter",props:{height:{type:String,default:null}},setup(e){const t=Mt("footer");return{style:O(()=>e.height?{"--el-footer-height":e.height}:{}),ns:t}}});function zme(e,t,n,s,o,r){return R(),H("footer",{class:Q(e.ns.b()),style:rt(e.style)},[Pe(e.$slots,"default")],6)}var UL=Ge(Bme,[["render",zme]]);const Vme=$e({name:"ElHeader",props:{height:{type:String,default:null}},setup(e){const t=Mt("header");return{style:O(()=>e.height?{"--el-header-height":e.height}:{}),ns:t}}});function Wme(e,t,n,s,o,r){return R(),H("header",{class:Q(e.ns.b()),style:rt(e.style)},[Pe(e.$slots,"default")],6)}var jL=Ge(Vme,[["render",Wme]]);const Hme=$e({name:"ElMain",setup(){return{ns:Mt("main")}}});function Ume(e,t,n,s,o,r){return R(),H("main",{class:Q(e.ns.b())},[Pe(e.$slots,"default")],2)}var GL=Ge(Hme,[["render",Ume]]);const jme=Gt(Fme,{Aside:HL,Footer:UL,Header:jL,Main:GL}),Gme=cs(HL),Kme=cs(UL),qme=cs(jL),Yme=cs(GL);var KL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(Fn,function(){return function(n,s,o){var r=s.prototype,i=r.format;o.en.ordinal=function(a){var l=["th","st","nd","rd"],u=a%100;return"["+a+(l[(u-20)%10]||l[u]||l[0])+"]"},r.format=function(a){var l=this,u=this.$locale();if(!this.isValid())return i.bind(this)(a);var c=this.$utils(),d=(a||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(f){switch(f){case"Q":return Math.ceil((l.$M+1)/3);case"Do":return u.ordinal(l.$D);case"gggg":return l.weekYear();case"GGGG":return l.isoWeekYear();case"wo":return u.ordinal(l.week(),"W");case"w":case"ww":return c.s(l.week(),f==="w"?1:2,"0");case"W":case"WW":return c.s(l.isoWeek(),f==="W"?1:2,"0");case"k":case"kk":return c.s(String(l.$H===0?24:l.$H),f==="k"?1:2,"0");case"X":return Math.floor(l.$d.getTime()/1e3);case"x":return l.$d.getTime();case"z":return"["+l.offsetName()+"]";case"zzz":return"["+l.offsetName("long")+"]";default:return f}});return i.bind(this)(d)}}})})(KL);var Xme=KL.exports,qL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(Fn,function(){var n="week",s="year";return function(o,r,i){var a=r.prototype;a.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var c=i(this).startOf(s).add(1,s).date(u),d=i(this).endOf(n);if(c.isBefore(d))return 1}var f=i(this).startOf(s).date(u).startOf(n).subtract(1,"millisecond"),h=this.diff(f,n,!0);return h<0?i(this).startOf("week").week():Math.ceil(h)},a.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(qL);var Zme=qL.exports,YL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(Fn,function(){return function(n,s){s.prototype.weekYear=function(){var o=this.month(),r=this.week(),i=this.year();return r===1&&o===11?i+1:o===0&&r>=52?i-1:i}}})})(YL);var Jme=YL.exports,XL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(Fn,function(){return function(n,s,o){s.prototype.dayOfYear=function(r){var i=Math.round((o(this).startOf("day")-o(this).startOf("year"))/864e5)+1;return r==null?i:this.add(r-i,"day")}}})})(XL);var Qme=XL.exports,ZL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(Fn,function(){return function(n,s){s.prototype.isSameOrAfter=function(o,r){return this.isSame(o,r)||this.isAfter(o,r)}}})})(ZL);var eve=ZL.exports,JL={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(Fn,function(){return function(n,s){s.prototype.isSameOrBefore=function(o,r){return this.isSame(o,r)||this.isBefore(o,r)}}})})(JL);var tve=JL.exports;const QL=Symbol();var nve=$e({name:"ElDatePickerCell",props:yt({cell:{type:et(Object)}}),setup(e){const t=Qe(QL);return()=>{const n=e.cell;if(t==null?void 0:t.ctx.slots.default){const s=t.ctx.slots.default(n).filter(o=>o.patchFlag!==-2&&o.type.toString()!=="Symbol(Comment)");if(s.length)return s}return Ke("div",{class:"el-date-table-cell"},[Ke("span",{class:"el-date-table-cell__text"},[n==null?void 0:n.text])])}}});const sve=$e({components:{ElDatePickerCell:nve},props:{date:{type:Object},minDate:{type:Object},maxDate:{type:Object},parsedValue:{type:[Object,Array]},selectionMode:{type:String,default:"day"},showWeekNumber:{type:Boolean,default:!1},disabledDate:{type:Function},cellClassName:{type:Function},rangeState:{type:Object,default:()=>({endDate:null,selecting:!1})}},emits:["changerange","pick","select"],setup(e,t){const{t:n,lang:s}=Tn(),o=V(null),r=V(null),i=V([[],[],[],[],[],[]]),a=e.date.$locale().weekStart||7,l=e.date.locale("en").localeData().weekdaysShort().map(y=>y.toLowerCase()),u=O(()=>a>3?7-a:-a),c=O(()=>{const y=e.date.startOf("month");return y.subtract(y.day()||7,"day")}),d=O(()=>l.concat(l).slice(a,a+7)),f=O(()=>{var y;const w=e.date.startOf("month"),C=w.day()||7,x=w.daysInMonth(),S=w.subtract(1,"month").daysInMonth(),T=u.value,I=i.value;let _=1;const N=e.selectionMode==="dates"?Ru(e.parsedValue):[],D=kt().locale(s.value).startOf("day");for(let F=0;F<6;F++){const P=I[F];e.showWeekNumber&&(P[0]||(P[0]={type:"week",text:c.value.add(F*7+1,"day").week()}));for(let M=0;M<7;M++){let B=P[e.showWeekNumber?M+1:M];B||(B={row:F,column:M,type:"normal",inRange:!1,start:!1,end:!1});const j=F*7+M,X=c.value.add(j-T,"day");B.dayjs=X,B.date=X.toDate(),B.timestamp=X.valueOf(),B.type="normal";const ae=e.rangeState.endDate||e.maxDate||e.rangeState.selecting&&e.minDate;if(B.inRange=e.minDate&&X.isSameOrAfter(e.minDate,"day")&&ae&&X.isSameOrBefore(ae,"day")||e.minDate&&X.isSameOrBefore(e.minDate,"day")&&ae&&X.isSameOrAfter(ae,"day"),((y=e.minDate)==null?void 0:y.isSameOrAfter(ae))?(B.start=ae&&X.isSame(ae,"day"),B.end=e.minDate&&X.isSame(e.minDate,"day")):(B.start=e.minDate&&X.isSame(e.minDate,"day"),B.end=ae&&X.isSame(ae,"day")),X.isSame(D,"day")&&(B.type="today"),F>=0&&F<=1){const ye=C+T<0?7+C+T:C+T;M+F*7>=ye?B.text=_++:(B.text=S-(ye-M%7)+1+F*7,B.type="prev-month")}else _<=x?B.text=_++:(B.text=_++-x,B.type="next-month");const ie=X.toDate();B.selected=N.find(ye=>ye.valueOf()===X.valueOf()),B.isSelected=!!B.selected,B.isCurrent=h(B),B.disabled=e.disabledDate&&e.disabledDate(ie),B.customClass=e.cellClassName&&e.cellClassName(ie),P[e.showWeekNumber?M+1:M]=B}if(e.selectionMode==="week"){const M=e.showWeekNumber?1:0,B=e.showWeekNumber?7:6,j=$(P[M+1]);P[M].inRange=j,P[M].start=j,P[B].inRange=j,P[B].end=j}}return I}),h=y=>e.selectionMode==="day"&&(y.type==="normal"||y.type==="today")&&p(y,e.parsedValue),p=(y,w)=>w?kt(w).locale(s.value).isSame(e.date.date(Number(y.text)),"day"):!1,g=y=>{const w=[];return(y.type==="normal"||y.type==="today")&&!y.disabled?(w.push("available"),y.type==="today"&&w.push("today")):w.push(y.type),h(y)&&w.push("current"),y.inRange&&(y.type==="normal"||y.type==="today"||e.selectionMode==="week")&&(w.push("in-range"),y.start&&w.push("start-date"),y.end&&w.push("end-date")),y.disabled&&w.push("disabled"),y.selected&&w.push("selected"),y.customClass&&w.push(y.customClass),w.join(" ")},m=(y,w)=>{const C=y*7+(w-(e.showWeekNumber?1:0))-u.value;return c.value.add(C,"day")},v=y=>{if(!e.rangeState.selecting)return;let w=y.target;if(w.tagName==="SPAN"&&(w=w.parentNode.parentNode),w.tagName==="DIV"&&(w=w.parentNode),w.tagName!=="TD")return;const C=w.parentNode.rowIndex-1,x=w.cellIndex;f.value[C][x].disabled||(C!==o.value||x!==r.value)&&(o.value=C,r.value=x,t.emit("changerange",{selecting:!0,endDate:m(C,x)}))},b=y=>{let w=y.target;for(;w&&w.tagName!=="TD";)w=w.parentNode;if(!w||w.tagName!=="TD")return;const C=w.parentNode.rowIndex-1,x=w.cellIndex,S=f.value[C][x];if(S.disabled||S.type==="week")return;const T=m(C,x);if(e.selectionMode==="range")e.rangeState.selecting?(T>=e.minDate?t.emit("pick",{minDate:e.minDate,maxDate:T}):t.emit("pick",{minDate:T,maxDate:e.minDate}),t.emit("select",!1)):(t.emit("pick",{minDate:T,maxDate:null}),t.emit("select",!0));else if(e.selectionMode==="day")t.emit("pick",T);else if(e.selectionMode==="week"){const I=T.week(),_=`${T.year()}w${I}`;t.emit("pick",{year:T.year(),week:I,value:_,date:T.startOf("week")})}else if(e.selectionMode==="dates"){const I=S.selected?Ru(e.parsedValue).filter(_=>_.valueOf()!==T.valueOf()):Ru(e.parsedValue).concat([T]);t.emit("pick",I)}},$=y=>{if(e.selectionMode!=="week")return!1;let w=e.date.startOf("day");if(y.type==="prev-month"&&(w=w.subtract(1,"month")),y.type==="next-month"&&(w=w.add(1,"month")),w=w.date(parseInt(y.text,10)),e.parsedValue&&!Array.isArray(e.parsedValue)){const C=(e.parsedValue.day()-a+7)%7-1;return e.parsedValue.subtract(C,"day").isSame(w,"day")}return!1};return{handleMouseMove:v,t:n,rows:f,isWeekActive:$,getCellClasses:g,WEEKS:d,handleClick:b}}}),ove={key:0};function rve(e,t,n,s,o,r){const i=de("el-date-picker-cell");return R(),H("table",{cellspacing:"0",cellpadding:"0",class:Q(["el-date-table",{"is-week-mode":e.selectionMode==="week"}]),onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a)),onMousemove:t[1]||(t[1]=(...a)=>e.handleMouseMove&&e.handleMouseMove(...a))},[K("tbody",null,[K("tr",null,[e.showWeekNumber?(R(),H("th",ove,ze(e.t("el.datepicker.week")),1)):me("v-if",!0),(R(!0),H(ct,null,en(e.WEEKS,(a,l)=>(R(),H("th",{key:l},ze(e.t("el.datepicker.weeks."+a)),1))),128))]),(R(!0),H(ct,null,en(e.rows,(a,l)=>(R(),H("tr",{key:l,class:Q(["el-date-table__row",{current:e.isWeekActive(a[1])}])},[(R(!0),H(ct,null,en(a,(u,c)=>(R(),H("td",{key:c,class:Q(e.getCellClasses(u))},[pe(i,{cell:u},null,8,["cell"])],2))),128))],2))),128))])],34)}var e4=Ge(sve,[["render",rve]]);const ive=(e,t,n)=>{const s=kt().locale(n).startOf("month").month(t).year(e),o=s.daysInMonth();return cl(o).map(r=>s.add(r,"day").toDate())},ave=$e({props:{disabledDate:{type:Function},selectionMode:{type:String,default:"month"},minDate:{type:Object},maxDate:{type:Object},date:{type:Object},parsedValue:{type:Object},rangeState:{type:Object,default:()=>({endDate:null,selecting:!1})}},emits:["changerange","pick","select"],setup(e,t){const{t:n,lang:s}=Tn(),o=V(e.date.locale("en").localeData().monthsShort().map(f=>f.toLowerCase())),r=V([[],[],[]]),i=V(null),a=V(null),l=O(()=>{var f;const h=r.value,p=kt().locale(s.value).startOf("month");for(let g=0;g<3;g++){const m=h[g];for(let v=0;v<4;v++){let b=m[v];b||(b={row:g,column:v,type:"normal",inRange:!1,start:!1,end:!1}),b.type="normal";const $=g*4+v,y=e.date.startOf("year").month($),w=e.rangeState.endDate||e.maxDate||e.rangeState.selecting&&e.minDate;b.inRange=e.minDate&&y.isSameOrAfter(e.minDate,"month")&&w&&y.isSameOrBefore(w,"month")||e.minDate&&y.isSameOrBefore(e.minDate,"month")&&w&&y.isSameOrAfter(w,"month"),((f=e.minDate)==null?void 0:f.isSameOrAfter(w))?(b.start=w&&y.isSame(w,"month"),b.end=e.minDate&&y.isSame(e.minDate,"month")):(b.start=e.minDate&&y.isSame(e.minDate,"month"),b.end=w&&y.isSame(w,"month")),p.isSame(y)&&(b.type="today"),b.text=$;const x=y.toDate();b.disabled=e.disabledDate&&e.disabledDate(x),m[v]=b}}return h});return{handleMouseMove:f=>{if(!e.rangeState.selecting)return;let h=f.target;if(h.tagName==="A"&&(h=h.parentNode.parentNode),h.tagName==="DIV"&&(h=h.parentNode),h.tagName!=="TD")return;const p=h.parentNode.rowIndex,g=h.cellIndex;l.value[p][g].disabled||(p!==i.value||g!==a.value)&&(i.value=p,a.value=g,t.emit("changerange",{selecting:!0,endDate:e.date.startOf("year").month(p*4+g)}))},handleMonthTableClick:f=>{let h=f.target;if(h.tagName==="A"&&(h=h.parentNode.parentNode),h.tagName==="DIV"&&(h=h.parentNode),h.tagName!=="TD"||yi(h,"disabled"))return;const p=h.cellIndex,m=h.parentNode.rowIndex*4+p,v=e.date.startOf("year").month(m);e.selectionMode==="range"?e.rangeState.selecting?(v>=e.minDate?t.emit("pick",{minDate:e.minDate,maxDate:v}):t.emit("pick",{minDate:v,maxDate:e.minDate}),t.emit("select",!1)):(t.emit("pick",{minDate:v,maxDate:null}),t.emit("select",!0)):t.emit("pick",m)},rows:l,getCellStyle:f=>{const h={},p=e.date.year(),g=new Date,m=f.text;return h.disabled=e.disabledDate?ive(p,m,s.value).every(e.disabledDate):!1,h.current=Ru(e.parsedValue).findIndex(v=>v.year()===p&&v.month()===m)>=0,h.today=g.getFullYear()===p&&g.getMonth()===m,f.inRange&&(h["in-range"]=!0,f.start&&(h["start-date"]=!0),f.end&&(h["end-date"]=!0)),h},t:n,months:o}}}),lve={class:"cell"};function uve(e,t,n,s,o,r){return R(),H("table",{class:"el-month-table",onClick:t[0]||(t[0]=(...i)=>e.handleMonthTableClick&&e.handleMonthTableClick(...i)),onMousemove:t[1]||(t[1]=(...i)=>e.handleMouseMove&&e.handleMouseMove(...i))},[K("tbody",null,[(R(!0),H(ct,null,en(e.rows,(i,a)=>(R(),H("tr",{key:a},[(R(!0),H(ct,null,en(i,(l,u)=>(R(),H("td",{key:u,class:Q(e.getCellStyle(l))},[K("div",null,[K("a",lve,ze(e.t("el.datepicker.months."+e.months[l.text])),1)])],2))),128))]))),128))])],32)}var t4=Ge(ave,[["render",uve]]);const cve=(e,t)=>{const n=kt(String(e)).locale(t).startOf("year"),o=n.endOf("year").dayOfYear();return cl(o).map(r=>n.add(r,"day").toDate())},dve=$e({props:{disabledDate:{type:Function},parsedValue:{type:Object},date:{type:Object}},emits:["pick"],setup(e,t){const{lang:n}=Tn();return{startYear:O(()=>Math.floor(e.date.year()/10)*10),getCellStyle:i=>{const a={},l=kt().locale(n.value);return a.disabled=e.disabledDate?cve(i,n.value).every(e.disabledDate):!1,a.current=Ru(e.parsedValue).findIndex(u=>u.year()===i)>=0,a.today=l.year()===i,a},handleYearTableClick:i=>{const a=i.target;if(a.tagName==="A"){if(yi(a.parentNode,"disabled"))return;const l=a.textContent||a.innerText;t.emit("pick",Number(l))}}}}}),fve={class:"cell"},hve={class:"cell"},pve={class:"cell"},gve={class:"cell"},mve={class:"cell"},vve={class:"cell"},bve={class:"cell"},yve={class:"cell"},wve={class:"cell"},$ve={class:"cell"},Cve=K("td",null,null,-1),xve=K("td",null,null,-1);function kve(e,t,n,s,o,r){return R(),H("table",{class:"el-year-table",onClick:t[0]||(t[0]=(...i)=>e.handleYearTableClick&&e.handleYearTableClick(...i))},[K("tbody",null,[K("tr",null,[K("td",{class:Q(["available",e.getCellStyle(e.startYear+0)])},[K("a",fve,ze(e.startYear),1)],2),K("td",{class:Q(["available",e.getCellStyle(e.startYear+1)])},[K("a",hve,ze(e.startYear+1),1)],2),K("td",{class:Q(["available",e.getCellStyle(e.startYear+2)])},[K("a",pve,ze(e.startYear+2),1)],2),K("td",{class:Q(["available",e.getCellStyle(e.startYear+3)])},[K("a",gve,ze(e.startYear+3),1)],2)]),K("tr",null,[K("td",{class:Q(["available",e.getCellStyle(e.startYear+4)])},[K("a",mve,ze(e.startYear+4),1)],2),K("td",{class:Q(["available",e.getCellStyle(e.startYear+5)])},[K("a",vve,ze(e.startYear+5),1)],2),K("td",{class:Q(["available",e.getCellStyle(e.startYear+6)])},[K("a",bve,ze(e.startYear+6),1)],2),K("td",{class:Q(["available",e.getCellStyle(e.startYear+7)])},[K("a",yve,ze(e.startYear+7),1)],2)]),K("tr",null,[K("td",{class:Q(["available",e.getCellStyle(e.startYear+8)])},[K("a",wve,ze(e.startYear+8),1)],2),K("td",{class:Q(["available",e.getCellStyle(e.startYear+9)])},[K("a",$ve,ze(e.startYear+9),1)],2),Cve,xve])])])}var Sve=Ge(dve,[["render",kve]]);const Ive=(e,t,n)=>!0,Eve=$e({components:{DateTable:e4,ElInput:ti,ElButton:sa,ElIcon:Pt,TimePickPanel:nk,MonthTable:t4,YearTable:Sve,DArrowLeft:Ab,ArrowLeft:pc,DArrowRight:Db,ArrowRight:ei},directives:{clickoutside:Nl},props:{visible:{type:Boolean,default:!1},parsedValue:{type:[Object,Array]},format:{type:String,default:""},type:{type:String,required:!0,validator:mL}},emits:["pick","set-picker-option","panel-change"],setup(e,t){const{t:n,lang:s}=Tn(),o=Qe("EP_PICKER_BASE"),r=Qe(Fb),{shortcuts:i,disabledDate:a,cellClassName:l,defaultTime:u,arrowControl:c}=o.props,d=yo(o.props,"defaultValue"),f=V(kt().locale(s.value)),h=O(()=>kt(u).locale(s.value)),p=O(()=>f.value.month()),g=O(()=>f.value.year()),m=V([]),v=V(null),b=V(null),$=ve=>m.value.length>0?Ive(ve,m.value,e.format||"HH:mm:ss"):!0,y=ve=>u&&!ee.value?h.value.year(ve.year()).month(ve.month()).date(ve.date()):ae.value?ve.millisecond(0):ve.startOf("day"),w=(ve,...Ae)=>{if(!ve)t.emit("pick",ve,...Ae);else if(Array.isArray(ve)){const it=ve.map(y);t.emit("pick",it,...Ae)}else t.emit("pick",y(ve),...Ae);v.value=null,b.value=null},C=ve=>{if(F.value==="day"){let Ae=e.parsedValue?e.parsedValue.year(ve.year()).month(ve.month()).date(ve.date()):ve;$(Ae)||(Ae=m.value[0][0].year(ve.year()).month(ve.month()).date(ve.date())),f.value=Ae,w(Ae,ae.value)}else F.value==="week"?w(ve.date):F.value==="dates"&&w(ve,!0)},x=()=>{f.value=f.value.subtract(1,"month"),Re("month")},S=()=>{f.value=f.value.add(1,"month"),Re("month")},T=()=>{_.value==="year"?f.value=f.value.subtract(10,"year"):f.value=f.value.subtract(1,"year"),Re("year")},I=()=>{_.value==="year"?f.value=f.value.add(10,"year"):f.value=f.value.add(1,"year"),Re("year")},_=V("date"),N=O(()=>{const ve=n("el.datepicker.year");if(_.value==="year"){const Ae=Math.floor(g.value/10)*10;return ve?`${Ae} ${ve} - ${Ae+9} ${ve}`:`${Ae} - ${Ae+9}`}return`${g.value} ${ve}`}),D=ve=>{const Ae=typeof ve.value=="function"?ve.value():ve.value;if(Ae){w(kt(Ae).locale(s.value));return}ve.onClick&&ve.onClick(t)},F=O(()=>["week","month","year","dates"].includes(e.type)?e.type:"day");Le(()=>F.value,ve=>{if(["month","year"].includes(ve)){_.value=ve;return}_.value="date"},{immediate:!0}),Le(()=>_.value,()=>{r==null||r.updatePopper()});const P=O(()=>!!i.length),M=ve=>{f.value=f.value.startOf("month").month(ve),F.value==="month"?w(f.value):_.value="date",Re("month")},B=ve=>{F.value==="year"?(f.value=f.value.startOf("year").year(ve),w(f.value)):(f.value=f.value.year(ve),_.value="month"),Re("year")},j=()=>{_.value="month"},X=()=>{_.value="year"},ae=O(()=>e.type==="datetime"||e.type==="datetimerange"),be=O(()=>ae.value||F.value==="dates"),ie=()=>{if(F.value==="dates")w(e.parsedValue);else{let ve=e.parsedValue;if(!ve){const Ae=kt(u).locale(s.value),it=xe();ve=Ae.year(it.year()).month(it.month()).date(it.date())}f.value=ve,w(ve)}},ye=()=>{const Ae=kt().locale(s.value).toDate();(!a||!a(Ae))&&$(Ae)&&(f.value=kt().locale(s.value),w(f.value))},ue=O(()=>IL(e.format)),Z=O(()=>SL(e.format)),ee=O(()=>{if(b.value)return b.value;if(!(!e.parsedValue&&!d.value))return(e.parsedValue||f.value).format(ue.value)}),te=O(()=>{if(v.value)return v.value;if(!(!e.parsedValue&&!d.value))return(e.parsedValue||f.value).format(Z.value)}),fe=V(!1),De=()=>{fe.value=!0},We=()=>{fe.value=!1},He=(ve,Ae,it)=>{const Je=e.parsedValue?e.parsedValue.hour(ve.hour()).minute(ve.minute()).second(ve.second()):ve;f.value=Je,w(f.value,!0),it||(fe.value=Ae)},Ve=ve=>{const Ae=kt(ve,ue.value).locale(s.value);Ae.isValid()&&$(Ae)&&(f.value=Ae.year(f.value.year()).month(f.value.month()).date(f.value.date()),b.value=null,fe.value=!1,w(f.value,!0))},Y=ve=>{const Ae=kt(ve,Z.value).locale(s.value);if(Ae.isValid()){if(a&&a(Ae.toDate()))return;f.value=Ae.hour(f.value.hour()).minute(f.value.minute()).second(f.value.second()),v.value=null,w(f.value,!0)}},ne=ve=>kt.isDayjs(ve)&&ve.isValid()&&(a?!a(ve.toDate()):!0),q=ve=>F.value==="dates"?ve.map(Ae=>Ae.format(e.format)):ve.format(e.format),le=ve=>kt(ve,e.format).locale(s.value),xe=()=>{const ve=kt(d.value).locale(s.value);if(!d.value){const Ae=h.value;return kt().hour(Ae.hour()).minute(Ae.minute()).second(Ae.second()).locale(s.value)}return ve},oe=ve=>{const{code:Ae,keyCode:it}=ve,Je=[tt.up,tt.down,tt.left,tt.right];e.visible&&!fe.value&&(Je.includes(Ae)&&(Me(it),ve.stopPropagation(),ve.preventDefault()),Ae===tt.enter&&v.value===null&&b.value===null&&w(f,!1))},Me=ve=>{const Ae={year:{38:-4,40:4,37:-1,39:1,offset:(Je,st)=>Je.setFullYear(Je.getFullYear()+st)},month:{38:-4,40:4,37:-1,39:1,offset:(Je,st)=>Je.setMonth(Je.getMonth()+st)},week:{38:-1,40:1,37:-1,39:1,offset:(Je,st)=>Je.setDate(Je.getDate()+st*7)},day:{38:-7,40:7,37:-1,39:1,offset:(Je,st)=>Je.setDate(Je.getDate()+st)}},it=f.value.toDate();for(;Math.abs(f.value.diff(it,"year",!0))<1;){const Je=Ae[F.value];if(Je.offset(it,Je[ve]),a&&a(it))continue;const st=kt(it).locale(s.value);f.value=st,t.emit("pick",st,!0);break}},Re=ve=>{t.emit("panel-change",f.value.toDate(),ve,_.value)};return t.emit("set-picker-option",["isValidValue",ne]),t.emit("set-picker-option",["formatToString",q]),t.emit("set-picker-option",["parseUserInput",le]),t.emit("set-picker-option",["handleKeydown",oe]),Le(()=>d.value,ve=>{ve&&(f.value=xe())},{immediate:!0}),Le(()=>e.parsedValue,ve=>{if(ve){if(F.value==="dates"||Array.isArray(ve))return;f.value=ve}else f.value=xe()},{immediate:!0}),{handleTimePick:He,handleTimePickClose:We,onTimePickerInputFocus:De,timePickerVisible:fe,visibleTime:ee,visibleDate:te,showTime:ae,changeToNow:ye,onConfirm:ie,footerVisible:be,handleYearPick:B,showMonthPicker:j,showYearPicker:X,handleMonthPick:M,hasShortcuts:P,shortcuts:i,arrowControl:c,disabledDate:a,cellClassName:l,selectionMode:F,handleShortcutClick:D,prevYear_:T,nextYear_:I,prevMonth_:x,nextMonth_:S,innerDate:f,t:n,yearLabel:N,currentView:_,month:p,handleDatePick:C,handleVisibleTimeChange:Ve,handleVisibleDateChange:Y,timeFormat:ue,userInputTime:b,userInputDate:v}}}),Tve={class:"el-picker-panel__body-wrapper"},_ve={key:0,class:"el-picker-panel__sidebar"},Nve=["onClick"],Ave={class:"el-picker-panel__body"},Dve={key:0,class:"el-date-picker__time-header"},Rve={class:"el-date-picker__editor-wrap"},Mve={class:"el-date-picker__editor-wrap"},Ove=["aria-label"],Fve=["aria-label"],Pve=["aria-label"],Lve=["aria-label"],Bve={class:"el-picker-panel__content"},zve={class:"el-picker-panel__footer"};function Vve(e,t,n,s,o,r){const i=de("el-input"),a=de("time-pick-panel"),l=de("d-arrow-left"),u=de("el-icon"),c=de("arrow-left"),d=de("d-arrow-right"),f=de("arrow-right"),h=de("date-table"),p=de("year-table"),g=de("month-table"),m=de("el-button"),v=Wo("clickoutside");return R(),H("div",{class:Q(["el-picker-panel el-date-picker",[{"has-sidebar":e.$slots.sidebar||e.hasShortcuts,"has-time":e.showTime}]])},[K("div",Tve,[Pe(e.$slots,"sidebar",{class:"el-picker-panel__sidebar"}),e.hasShortcuts?(R(),H("div",_ve,[(R(!0),H(ct,null,en(e.shortcuts,(b,$)=>(R(),H("button",{key:$,type:"button",class:"el-picker-panel__shortcut",onClick:y=>e.handleShortcutClick(b)},ze(b.text),9,Nve))),128))])):me("v-if",!0),K("div",Ave,[e.showTime?(R(),H("div",Dve,[K("span",Rve,[pe(i,{placeholder:e.t("el.datepicker.selectDate"),"model-value":e.visibleDate,size:"small",onInput:t[0]||(t[0]=b=>e.userInputDate=b),onChange:e.handleVisibleDateChange},null,8,["placeholder","model-value","onChange"])]),Ct((R(),H("span",Mve,[pe(i,{placeholder:e.t("el.datepicker.selectTime"),"model-value":e.visibleTime,size:"small",onFocus:e.onTimePickerInputFocus,onInput:t[1]||(t[1]=b=>e.userInputTime=b),onChange:e.handleVisibleTimeChange},null,8,["placeholder","model-value","onFocus","onChange"]),pe(a,{visible:e.timePickerVisible,format:e.timeFormat,"time-arrow-control":e.arrowControl,"parsed-value":e.innerDate,onPick:e.handleTimePick},null,8,["visible","format","time-arrow-control","parsed-value","onPick"])])),[[v,e.handleTimePickClose]])])):me("v-if",!0),Ct(K("div",{class:Q(["el-date-picker__header",{"el-date-picker__header--bordered":e.currentView==="year"||e.currentView==="month"}])},[K("button",{type:"button","aria-label":e.t("el.datepicker.prevYear"),class:"el-picker-panel__icon-btn el-date-picker__prev-btn d-arrow-left",onClick:t[2]||(t[2]=(...b)=>e.prevYear_&&e.prevYear_(...b))},[pe(u,null,{default:ce(()=>[pe(l)]),_:1})],8,Ove),Ct(K("button",{type:"button","aria-label":e.t("el.datepicker.prevMonth"),class:"el-picker-panel__icon-btn el-date-picker__prev-btn arrow-left",onClick:t[3]||(t[3]=(...b)=>e.prevMonth_&&e.prevMonth_(...b))},[pe(u,null,{default:ce(()=>[pe(c)]),_:1})],8,Fve),[[sn,e.currentView==="date"]]),K("span",{role:"button",class:"el-date-picker__header-label",onClick:t[4]||(t[4]=(...b)=>e.showYearPicker&&e.showYearPicker(...b))},ze(e.yearLabel),1),Ct(K("span",{role:"button",class:Q(["el-date-picker__header-label",{active:e.currentView==="month"}]),onClick:t[5]||(t[5]=(...b)=>e.showMonthPicker&&e.showMonthPicker(...b))},ze(e.t(`el.datepicker.month${e.month+1}`)),3),[[sn,e.currentView==="date"]]),K("button",{type:"button","aria-label":e.t("el.datepicker.nextYear"),class:"el-picker-panel__icon-btn el-date-picker__next-btn d-arrow-right",onClick:t[6]||(t[6]=(...b)=>e.nextYear_&&e.nextYear_(...b))},[pe(u,null,{default:ce(()=>[pe(d)]),_:1})],8,Pve),Ct(K("button",{type:"button","aria-label":e.t("el.datepicker.nextMonth"),class:"el-picker-panel__icon-btn el-date-picker__next-btn arrow-right",onClick:t[7]||(t[7]=(...b)=>e.nextMonth_&&e.nextMonth_(...b))},[pe(u,null,{default:ce(()=>[pe(f)]),_:1})],8,Lve),[[sn,e.currentView==="date"]])],2),[[sn,e.currentView!=="time"]]),K("div",Bve,[e.currentView==="date"?(R(),ke(h,{key:0,"selection-mode":e.selectionMode,date:e.innerDate,"parsed-value":e.parsedValue,"disabled-date":e.disabledDate,onPick:e.handleDatePick},null,8,["selection-mode","date","parsed-value","disabled-date","onPick"])):me("v-if",!0),e.currentView==="year"?(R(),ke(p,{key:1,date:e.innerDate,"disabled-date":e.disabledDate,"parsed-value":e.parsedValue,onPick:e.handleYearPick},null,8,["date","disabled-date","parsed-value","onPick"])):me("v-if",!0),e.currentView==="month"?(R(),ke(g,{key:2,date:e.innerDate,"parsed-value":e.parsedValue,"disabled-date":e.disabledDate,onPick:e.handleMonthPick},null,8,["date","parsed-value","disabled-date","onPick"])):me("v-if",!0)])])]),Ct(K("div",zve,[Ct(pe(m,{size:"small",type:"text",class:"el-picker-panel__link-btn",onClick:e.changeToNow},{default:ce(()=>[Zt(ze(e.t("el.datepicker.now")),1)]),_:1},8,["onClick"]),[[sn,e.selectionMode!=="dates"]]),pe(m,{plain:"",size:"small",class:"el-picker-panel__link-btn",onClick:e.onConfirm},{default:ce(()=>[Zt(ze(e.t("el.datepicker.confirm")),1)]),_:1},8,["onClick"])],512),[[sn,e.footerVisible&&e.currentView==="date"]])],2)}var Wve=Ge(Eve,[["render",Vve]]);const Hve=$e({directives:{clickoutside:Nl},components:{TimePickPanel:nk,DateTable:e4,ElInput:ti,ElButton:sa,ElIcon:Pt,DArrowLeft:Ab,ArrowLeft:pc,DArrowRight:Db,ArrowRight:ei},props:{unlinkPanels:Boolean,parsedValue:{type:Array},type:{type:String,required:!0,validator:mL}},emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,t){const{t:n,lang:s}=Tn(),o=V(kt().locale(s.value)),r=V(kt().locale(s.value).add(1,"month")),i=V(null),a=V(null),l=V({min:null,max:null}),u=V({min:null,max:null}),c=O(()=>`${o.value.year()} ${n("el.datepicker.year")} ${n(`el.datepicker.month${o.value.month()+1}`)}`),d=O(()=>`${r.value.year()} ${n("el.datepicker.year")} ${n(`el.datepicker.month${r.value.month()+1}`)}`),f=O(()=>o.value.year()),h=O(()=>o.value.month()),p=O(()=>r.value.year()),g=O(()=>r.value.month()),m=O(()=>!!it.length),v=O(()=>l.value.min!==null?l.value.min:i.value?i.value.format(C.value):""),b=O(()=>l.value.max!==null?l.value.max:a.value||i.value?(a.value||i.value).format(C.value):""),$=O(()=>u.value.min!==null?u.value.min:i.value?i.value.format(w.value):""),y=O(()=>u.value.max!==null?u.value.max:a.value||i.value?(a.value||i.value).format(w.value):""),w=O(()=>IL(vt)),C=O(()=>SL(vt)),x=()=>{o.value=o.value.subtract(1,"year"),e.unlinkPanels||(r.value=o.value.add(1,"month")),P("year")},S=()=>{o.value=o.value.subtract(1,"month"),e.unlinkPanels||(r.value=o.value.add(1,"month")),P("month")},T=()=>{e.unlinkPanels?r.value=r.value.add(1,"year"):(o.value=o.value.add(1,"year"),r.value=o.value.add(1,"month")),P("year")},I=()=>{e.unlinkPanels?r.value=r.value.add(1,"month"):(o.value=o.value.add(1,"month"),r.value=o.value.add(1,"month")),P("month")},_=()=>{o.value=o.value.add(1,"year"),P("year")},N=()=>{o.value=o.value.add(1,"month"),P("month")},D=()=>{r.value=r.value.subtract(1,"year"),P("year")},F=()=>{r.value=r.value.subtract(1,"month"),P("month")},P=G=>{t.emit("panel-change",[o.value.toDate(),r.value.toDate()],G)},M=O(()=>{const G=(h.value+1)%12,he=h.value+1>=12?1:0;return e.unlinkPanels&&new Date(f.value+he,G)<new Date(p.value,g.value)}),B=O(()=>e.unlinkPanels&&p.value*12+g.value-(f.value*12+h.value+1)>=12),j=G=>Array.isArray(G)&&G[0]&&G[1]&&G[0].valueOf()<=G[1].valueOf(),X=V({endDate:null,selecting:!1}),ae=O(()=>!(i.value&&a.value&&!X.value.selecting&&j([i.value,a.value]))),be=G=>{X.value=G},ie=G=>{X.value.selecting=G,G||(X.value.endDate=null)},ye=O(()=>e.type==="datetime"||e.type==="datetimerange"),ue=(G=!1)=>{j([i.value,a.value])&&t.emit("pick",[i.value,a.value],G)},Z=(G,he)=>{if(!!G)return z?kt(z[he]||z).locale(s.value).year(G.year()).month(G.month()).date(G.date()):G},ee=(G,he=!0)=>{const _e=G.minDate,ht=G.maxDate,Dt=Z(_e,0),xt=Z(ht,1);a.value===xt&&i.value===Dt||(t.emit("calendar-change",[_e.toDate(),ht&&ht.toDate()]),a.value=xt,i.value=Dt,!(!he||ye.value)&&ue())},te=G=>{const he=typeof G.value=="function"?G.value():G.value;if(he){t.emit("pick",[kt(he[0]).locale(s.value),kt(he[1]).locale(s.value)]);return}G.onClick&&G.onClick(t)},fe=V(!1),De=V(!1),We=()=>{fe.value=!1},He=()=>{De.value=!1},Ve=(G,he)=>{l.value[he]=G;const _e=kt(G,C.value).locale(s.value);if(_e.isValid()){if(Je&&Je(_e.toDate()))return;he==="min"?(o.value=_e,i.value=(i.value||o.value).year(_e.year()).month(_e.month()).date(_e.date()),e.unlinkPanels||(r.value=_e.add(1,"month"),a.value=i.value.add(1,"month"))):(r.value=_e,a.value=(a.value||r.value).year(_e.year()).month(_e.month()).date(_e.date()),e.unlinkPanels||(o.value=_e.subtract(1,"month"),i.value=a.value.subtract(1,"month")))}},Y=(G,he)=>{l.value[he]=null},ne=(G,he)=>{u.value[he]=G;const _e=kt(G,w.value).locale(s.value);_e.isValid()&&(he==="min"?(fe.value=!0,i.value=(i.value||o.value).hour(_e.hour()).minute(_e.minute()).second(_e.second()),(!a.value||a.value.isBefore(i.value))&&(a.value=i.value)):(De.value=!0,a.value=(a.value||r.value).hour(_e.hour()).minute(_e.minute()).second(_e.second()),r.value=a.value,a.value&&a.value.isBefore(i.value)&&(i.value=a.value)))},q=(G,he)=>{u.value[he]=null,he==="min"?(o.value=i.value,fe.value=!1):(r.value=a.value,De.value=!1)},le=(G,he,_e)=>{u.value.min||(G&&(o.value=G,i.value=(i.value||o.value).hour(G.hour()).minute(G.minute()).second(G.second())),_e||(fe.value=he),(!a.value||a.value.isBefore(i.value))&&(a.value=i.value,r.value=G))},xe=(G,he,_e)=>{u.value.max||(G&&(r.value=G,a.value=(a.value||r.value).hour(G.hour()).minute(G.minute()).second(G.second())),_e||(De.value=he),a.value&&a.value.isBefore(i.value)&&(i.value=a.value))},oe=()=>{o.value=ve()[0],r.value=o.value.add(1,"month"),t.emit("pick",null)},Me=G=>Array.isArray(G)?G.map(he=>he.format(vt)):G.format(vt),Re=G=>Array.isArray(G)?G.map(he=>kt(he,vt).locale(s.value)):kt(G,vt).locale(s.value),ve=()=>{let G;if(Array.isArray(W.value)){const he=kt(W.value[0]);let _e=kt(W.value[1]);return e.unlinkPanels||(_e=he.add(1,"month")),[he,_e]}else W.value?G=kt(W.value):G=kt();return G=G.locale(s.value),[G,G.add(1,"month")]};t.emit("set-picker-option",["isValidValue",j]),t.emit("set-picker-option",["parseUserInput",Re]),t.emit("set-picker-option",["formatToString",Me]),t.emit("set-picker-option",["handleClear",oe]);const Ae=Qe("EP_PICKER_BASE"),{shortcuts:it,disabledDate:Je,cellClassName:st,format:vt,defaultTime:z,arrowControl:k,clearable:E}=Ae.props,W=yo(Ae.props,"defaultValue");return Le(()=>W.value,G=>{if(G){const he=ve();i.value=null,a.value=null,o.value=he[0],r.value=he[1]}},{immediate:!0}),Le(()=>e.parsedValue,G=>{if(G&&G.length===2)if(i.value=G[0],a.value=G[1],o.value=i.value,e.unlinkPanels&&a.value){const he=i.value.year(),_e=i.value.month(),ht=a.value.year(),Dt=a.value.month();r.value=he===ht&&_e===Dt?a.value.add(1,"month"):a.value}else r.value=o.value.add(1,"month"),a.value&&(r.value=r.value.hour(a.value.hour()).minute(a.value.minute()).second(a.value.second()));else{const he=ve();i.value=null,a.value=null,o.value=he[0],r.value=he[1]}},{immediate:!0}),{shortcuts:it,disabledDate:Je,cellClassName:st,minTimePickerVisible:fe,maxTimePickerVisible:De,handleMinTimeClose:We,handleMaxTimeClose:He,handleShortcutClick:te,rangeState:X,minDate:i,maxDate:a,handleRangePick:ee,onSelect:ie,handleChangeRange:be,btnDisabled:ae,enableYearArrow:B,enableMonthArrow:M,rightPrevMonth:F,rightPrevYear:D,rightNextMonth:I,rightNextYear:T,leftPrevMonth:S,leftPrevYear:x,leftNextMonth:N,leftNextYear:_,hasShortcuts:m,leftLabel:c,rightLabel:d,leftDate:o,rightDate:r,showTime:ye,t:n,minVisibleDate:v,maxVisibleDate:b,minVisibleTime:$,maxVisibleTime:y,arrowControl:k,handleDateInput:Ve,handleDateChange:Y,handleTimeInput:ne,handleTimeChange:q,handleMinTimePick:le,handleMaxTimePick:xe,handleClear:oe,handleConfirm:ue,timeFormat:w,clearable:E}}}),Uve={class:"el-picker-panel__body-wrapper"},jve={key:0,class:"el-picker-panel__sidebar"},Gve=["onClick"],Kve={class:"el-picker-panel__body"},qve={key:0,class:"el-date-range-picker__time-header"},Yve={class:"el-date-range-picker__editors-wrap"},Xve={class:"el-date-range-picker__time-picker-wrap"},Zve={class:"el-date-range-picker__time-picker-wrap"},Jve={class:"el-date-range-picker__editors-wrap is-right"},Qve={class:"el-date-range-picker__time-picker-wrap"},e0e={class:"el-date-range-picker__time-picker-wrap"},t0e={class:"el-picker-panel__content el-date-range-picker__content is-left"},n0e={class:"el-date-range-picker__header"},s0e=["disabled"],o0e=["disabled"],r0e={class:"el-picker-panel__content el-date-range-picker__content is-right"},i0e={class:"el-date-range-picker__header"},a0e=["disabled"],l0e=["disabled"],u0e={key:0,class:"el-picker-panel__footer"};function c0e(e,t,n,s,o,r){const i=de("el-input"),a=de("time-pick-panel"),l=de("arrow-right"),u=de("el-icon"),c=de("d-arrow-left"),d=de("arrow-left"),f=de("d-arrow-right"),h=de("date-table"),p=de("el-button"),g=Wo("clickoutside");return R(),H("div",{class:Q(["el-picker-panel el-date-range-picker",[{"has-sidebar":e.$slots.sidebar||e.hasShortcuts,"has-time":e.showTime}]])},[K("div",Uve,[Pe(e.$slots,"sidebar",{class:"el-picker-panel__sidebar"}),e.hasShortcuts?(R(),H("div",jve,[(R(!0),H(ct,null,en(e.shortcuts,(m,v)=>(R(),H("button",{key:v,type:"button",class:"el-picker-panel__shortcut",onClick:b=>e.handleShortcutClick(m)},ze(m.text),9,Gve))),128))])):me("v-if",!0),K("div",Kve,[e.showTime?(R(),H("div",qve,[K("span",Yve,[K("span",Xve,[pe(i,{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startDate"),class:"el-date-range-picker__editor","model-value":e.minVisibleDate,onInput:t[0]||(t[0]=m=>e.handleDateInput(m,"min")),onChange:t[1]||(t[1]=m=>e.handleDateChange(m,"min"))},null,8,["disabled","placeholder","model-value"])]),Ct((R(),H("span",Zve,[pe(i,{size:"small",class:"el-date-range-picker__editor",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startTime"),"model-value":e.minVisibleTime,onFocus:t[2]||(t[2]=m=>e.minTimePickerVisible=!0),onInput:t[3]||(t[3]=m=>e.handleTimeInput(m,"min")),onChange:t[4]||(t[4]=m=>e.handleTimeChange(m,"min"))},null,8,["disabled","placeholder","model-value"]),pe(a,{visible:e.minTimePickerVisible,format:e.timeFormat,"datetime-role":"start","time-arrow-control":e.arrowControl,"parsed-value":e.leftDate,onPick:e.handleMinTimePick},null,8,["visible","format","time-arrow-control","parsed-value","onPick"])])),[[g,e.handleMinTimeClose]])]),K("span",null,[pe(u,null,{default:ce(()=>[pe(l)]),_:1})]),K("span",Jve,[K("span",Qve,[pe(i,{size:"small",class:"el-date-range-picker__editor",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endDate"),"model-value":e.maxVisibleDate,readonly:!e.minDate,onInput:t[5]||(t[5]=m=>e.handleDateInput(m,"max")),onChange:t[6]||(t[6]=m=>e.handleDateChange(m,"max"))},null,8,["disabled","placeholder","model-value","readonly"])]),Ct((R(),H("span",e0e,[pe(i,{size:"small",class:"el-date-range-picker__editor",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endTime"),"model-value":e.maxVisibleTime,readonly:!e.minDate,onFocus:t[7]||(t[7]=m=>e.minDate&&(e.maxTimePickerVisible=!0)),onInput:t[8]||(t[8]=m=>e.handleTimeInput(m,"max")),onChange:t[9]||(t[9]=m=>e.handleTimeChange(m,"max"))},null,8,["disabled","placeholder","model-value","readonly"]),pe(a,{"datetime-role":"end",visible:e.maxTimePickerVisible,format:e.timeFormat,"time-arrow-control":e.arrowControl,"parsed-value":e.rightDate,onPick:e.handleMaxTimePick},null,8,["visible","format","time-arrow-control","parsed-value","onPick"])])),[[g,e.handleMaxTimeClose]])])])):me("v-if",!0),K("div",t0e,[K("div",n0e,[K("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-left",onClick:t[10]||(t[10]=(...m)=>e.leftPrevYear&&e.leftPrevYear(...m))},[pe(u,null,{default:ce(()=>[pe(c)]),_:1})]),K("button",{type:"button",class:"el-picker-panel__icon-btn arrow-left",onClick:t[11]||(t[11]=(...m)=>e.leftPrevMonth&&e.leftPrevMonth(...m))},[pe(u,null,{default:ce(()=>[pe(d)]),_:1})]),e.unlinkPanels?(R(),H("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:Q([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-right"]),onClick:t[12]||(t[12]=(...m)=>e.leftNextYear&&e.leftNextYear(...m))},[pe(u,null,{default:ce(()=>[pe(f)]),_:1})],10,s0e)):me("v-if",!0),e.unlinkPanels?(R(),H("button",{key:1,type:"button",disabled:!e.enableMonthArrow,class:Q([{"is-disabled":!e.enableMonthArrow},"el-picker-panel__icon-btn arrow-right"]),onClick:t[13]||(t[13]=(...m)=>e.leftNextMonth&&e.leftNextMonth(...m))},[pe(u,null,{default:ce(()=>[pe(l)]),_:1})],10,o0e)):me("v-if",!0),K("div",null,ze(e.leftLabel),1)]),pe(h,{"selection-mode":"range",date:e.leftDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onPick","onSelect"])]),K("div",r0e,[K("div",i0e,[e.unlinkPanels?(R(),H("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:Q([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-left"]),onClick:t[14]||(t[14]=(...m)=>e.rightPrevYear&&e.rightPrevYear(...m))},[pe(u,null,{default:ce(()=>[pe(c)]),_:1})],10,a0e)):me("v-if",!0),e.unlinkPanels?(R(),H("button",{key:1,type:"button",disabled:!e.enableMonthArrow,class:Q([{"is-disabled":!e.enableMonthArrow},"el-picker-panel__icon-btn arrow-left"]),onClick:t[15]||(t[15]=(...m)=>e.rightPrevMonth&&e.rightPrevMonth(...m))},[pe(u,null,{default:ce(()=>[pe(d)]),_:1})],10,l0e)):me("v-if",!0),K("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-right",onClick:t[16]||(t[16]=(...m)=>e.rightNextYear&&e.rightNextYear(...m))},[pe(u,null,{default:ce(()=>[pe(f)]),_:1})]),K("button",{type:"button",class:"el-picker-panel__icon-btn arrow-right",onClick:t[17]||(t[17]=(...m)=>e.rightNextMonth&&e.rightNextMonth(...m))},[pe(u,null,{default:ce(()=>[pe(l)]),_:1})]),K("div",null,ze(e.rightLabel),1)]),pe(h,{"selection-mode":"range",date:e.rightDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onPick","onSelect"])])])]),e.showTime?(R(),H("div",u0e,[e.clearable?(R(),ke(p,{key:0,size:"small",type:"text",class:"el-picker-panel__link-btn",onClick:e.handleClear},{default:ce(()=>[Zt(ze(e.t("el.datepicker.clear")),1)]),_:1},8,["onClick"])):me("v-if",!0),pe(p,{plain:"",size:"small",class:"el-picker-panel__link-btn",disabled:e.btnDisabled,onClick:t[18]||(t[18]=m=>e.handleConfirm(!1))},{default:ce(()=>[Zt(ze(e.t("el.datepicker.confirm")),1)]),_:1},8,["disabled"])])):me("v-if",!0)],2)}var d0e=Ge(Hve,[["render",c0e]]);const f0e=$e({components:{MonthTable:t4,ElIcon:Pt,DArrowLeft:Ab,DArrowRight:Db},props:{unlinkPanels:Boolean,parsedValue:{type:Array}},emits:["pick","set-picker-option"],setup(e,t){const{t:n,lang:s}=Tn(),o=V(kt().locale(s.value)),r=V(kt().locale(s.value).add(1,"year")),i=O(()=>!!N.length),a=M=>{const B=typeof M.value=="function"?M.value():M.value;if(B){t.emit("pick",[kt(B[0]).locale(s.value),kt(B[1]).locale(s.value)]);return}M.onClick&&M.onClick(t)},l=()=>{o.value=o.value.subtract(1,"year"),e.unlinkPanels||(r.value=r.value.subtract(1,"year"))},u=()=>{e.unlinkPanels||(o.value=o.value.add(1,"year")),r.value=r.value.add(1,"year")},c=()=>{o.value=o.value.add(1,"year")},d=()=>{r.value=r.value.subtract(1,"year")},f=O(()=>`${o.value.year()} ${n("el.datepicker.year")}`),h=O(()=>`${r.value.year()} ${n("el.datepicker.year")}`),p=O(()=>o.value.year()),g=O(()=>r.value.year()===o.value.year()?o.value.year()+1:r.value.year()),m=O(()=>e.unlinkPanels&&g.value>p.value+1),v=V(null),b=V(null),$=V({endDate:null,selecting:!1}),y=M=>{$.value=M},w=(M,B=!0)=>{const j=M.minDate,X=M.maxDate;b.value===X&&v.value===j||(b.value=X,v.value=j,!!B&&x())},C=M=>Array.isArray(M)&&M&&M[0]&&M[1]&&M[0].valueOf()<=M[1].valueOf(),x=(M=!1)=>{C([v.value,b.value])&&t.emit("pick",[v.value,b.value],M)},S=M=>{$.value.selecting=M,M||($.value.endDate=null)},T=M=>M.map(B=>B.format(F)),I=()=>{let M;if(Array.isArray(P.value)){const B=kt(P.value[0]);let j=kt(P.value[1]);return e.unlinkPanels||(j=B.add(1,"year")),[B,j]}else P.value?M=kt(P.value):M=kt();return M=M.locale(s.value),[M,M.add(1,"year")]};t.emit("set-picker-option",["formatToString",T]);const _=Qe("EP_PICKER_BASE"),{shortcuts:N,disabledDate:D,format:F}=_.props,P=yo(_.props,"defaultValue");return Le(()=>P.value,M=>{if(M){const B=I();o.value=B[0],r.value=B[1]}},{immediate:!0}),Le(()=>e.parsedValue,M=>{if(M&&M.length===2)if(v.value=M[0],b.value=M[1],o.value=v.value,e.unlinkPanels&&b.value){const B=v.value.year(),j=b.value.year();r.value=B===j?b.value.add(1,"year"):b.value}else r.value=o.value.add(1,"year");else{const B=I();v.value=null,b.value=null,o.value=B[0],r.value=B[1]}},{immediate:!0}),{shortcuts:N,disabledDate:D,onSelect:S,handleRangePick:w,rangeState:$,handleChangeRange:y,minDate:v,maxDate:b,enableYearArrow:m,leftLabel:f,rightLabel:h,leftNextYear:c,leftPrevYear:l,rightNextYear:u,rightPrevYear:d,t:n,leftDate:o,rightDate:r,hasShortcuts:i,handleShortcutClick:a}}}),h0e={class:"el-picker-panel__body-wrapper"},p0e={key:0,class:"el-picker-panel__sidebar"},g0e=["onClick"],m0e={class:"el-picker-panel__body"},v0e={class:"el-picker-panel__content el-date-range-picker__content is-left"},b0e={class:"el-date-range-picker__header"},y0e=["disabled"],w0e={class:"el-picker-panel__content el-date-range-picker__content is-right"},$0e={class:"el-date-range-picker__header"},C0e=["disabled"];function x0e(e,t,n,s,o,r){const i=de("d-arrow-left"),a=de("el-icon"),l=de("d-arrow-right"),u=de("month-table");return R(),H("div",{class:Q(["el-picker-panel el-date-range-picker",[{"has-sidebar":e.$slots.sidebar||e.hasShortcuts}]])},[K("div",h0e,[Pe(e.$slots,"sidebar",{class:"el-picker-panel__sidebar"}),e.hasShortcuts?(R(),H("div",p0e,[(R(!0),H(ct,null,en(e.shortcuts,(c,d)=>(R(),H("button",{key:d,type:"button",class:"el-picker-panel__shortcut",onClick:f=>e.handleShortcutClick(c)},ze(c.text),9,g0e))),128))])):me("v-if",!0),K("div",m0e,[K("div",v0e,[K("div",b0e,[K("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-left",onClick:t[0]||(t[0]=(...c)=>e.leftPrevYear&&e.leftPrevYear(...c))},[pe(a,null,{default:ce(()=>[pe(i)]),_:1})]),e.unlinkPanels?(R(),H("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:Q([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-right"]),onClick:t[1]||(t[1]=(...c)=>e.leftNextYear&&e.leftNextYear(...c))},[pe(a,null,{default:ce(()=>[pe(l)]),_:1})],10,y0e)):me("v-if",!0),K("div",null,ze(e.leftLabel),1)]),pe(u,{"selection-mode":"range",date:e.leftDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onPick","onSelect"])]),K("div",w0e,[K("div",$0e,[e.unlinkPanels?(R(),H("button",{key:0,type:"button",disabled:!e.enableYearArrow,class:Q([{"is-disabled":!e.enableYearArrow},"el-picker-panel__icon-btn d-arrow-left"]),onClick:t[2]||(t[2]=(...c)=>e.rightPrevYear&&e.rightPrevYear(...c))},[pe(a,null,{default:ce(()=>[pe(i)]),_:1})],10,C0e)):me("v-if",!0),K("button",{type:"button",class:"el-picker-panel__icon-btn d-arrow-right",onClick:t[3]||(t[3]=(...c)=>e.rightNextYear&&e.rightNextYear(...c))},[pe(a,null,{default:ce(()=>[pe(l)]),_:1})]),K("div",null,ze(e.rightLabel),1)]),pe(u,{"selection-mode":"range",date:e.rightDate,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,onChangerange:e.handleChangeRange,onPick:e.handleRangePick,onSelect:e.onSelect},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onPick","onSelect"])])])])],2)}var k0e=Ge(f0e,[["render",x0e]]);kt.extend(pL);kt.extend(Xme);kt.extend(ek);kt.extend(Zme);kt.extend(Jme);kt.extend(Qme);kt.extend(eve);kt.extend(tve);const S0e=function(e){return e==="daterange"||e==="datetimerange"?d0e:e==="monthrange"?k0e:Wve};var I0e=$e({name:"ElDatePicker",install:null,props:Ut(dt({},tk),{type:{type:String,default:"date"}}),emits:["update:modelValue"],setup(e,t){jt("ElPopperOptions",e.popperOptions),jt(QL,{ctx:t});const n=V(null),s=Ut(dt({},e),{focus:(o=!0)=>{var r;(r=n.value)==null||r.focus(o)}});return t.expose(s),()=>{var o;const r=(o=e.format)!=null?o:Dde[e.type]||ih;return Ke(vL,Ut(dt({},e),{format:r,type:e.type,ref:n,"onUpdate:modelValue":i=>t.emit("update:modelValue",i)}),{default:i=>Ke(S0e(e.type),i),"range-separator":()=>Pe(t.slots,"range-separator")})}}});const Hv=I0e;Hv.install=e=>{e.component(Hv.name,Hv)};const E0e=Hv;var Fr=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Fr||{});const n4=e=>Ds(e)&&e.type===ct,T0e=e=>e.type===xr,_0e=e=>Ds(e)&&!n4(e)&&!T0e(e),N0e=e=>{if(!Ds(e))return;const t=e.props||{},n=e.type.props||{},s={};return Object.keys(n).forEach(o=>{Kt(n[o],"default")&&(s[o]=n[o].default)}),Object.keys(t).forEach(o=>{s[qr(o)]=t[o]}),s},rk="elDescriptions";var DA=$e({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:Qe(rk,{})}},render(){var e,t,n,s,o,r;const i=N0e(this.cell),{border:a,direction:l}=this.descriptions,u=l==="vertical",c=((n=(t=(e=this.cell)==null?void 0:e.children)==null?void 0:t.label)==null?void 0:n.call(t))||i.label,d=(r=(o=(s=this.cell)==null?void 0:s.children)==null?void 0:o.default)==null?void 0:r.call(o),f=i.span,h=i.align?`is-${i.align}`:"",p=i.labelAlign?`is-${i.labelAlign}`:h,g=i.className,m=i.labelClassName,v={width:Ta(i.width),minWidth:Ta(i.minWidth)},b=Mt("descriptions");switch(this.type){case"label":return Ke(this.tag,{style:v,class:[b.e("cell"),b.e("label"),b.is("bordered-label",a),b.is("vertical-label",u),p,m],colSpan:u?f:1},c);case"content":return Ke(this.tag,{style:v,class:[b.e("cell"),b.e("content"),b.is("bordered-content",a),b.is("vertical-content",u),h,g],colSpan:u?f:f*2-1},d);default:return Ke("td",{style:v,class:[b.e("cell"),h],colSpan:f},[Ke("span",{class:[b.e("label"),m]},c),Ke("span",{class:[b.e("content"),g]},d)])}}});const A0e=$e({name:"ElDescriptionsRow",components:{[DA.name]:DA},props:{row:{type:Array}},setup(){return{descriptions:Qe(rk,{})}}}),D0e={key:1};function R0e(e,t,n,s,o,r){const i=de("el-descriptions-cell");return e.descriptions.direction==="vertical"?(R(),H(ct,{key:0},[K("tr",null,[(R(!0),H(ct,null,en(e.row,(a,l)=>(R(),ke(i,{key:`tr1-${l}`,cell:a,tag:"th",type:"label"},null,8,["cell"]))),128))]),K("tr",null,[(R(!0),H(ct,null,en(e.row,(a,l)=>(R(),ke(i,{key:`tr2-${l}`,cell:a,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(R(),H("tr",D0e,[(R(!0),H(ct,null,en(e.row,(a,l)=>(R(),H(ct,{key:`tr3-${l}`},[e.descriptions.border?(R(),H(ct,{key:0},[pe(i,{cell:a,tag:"td",type:"label"},null,8,["cell"]),pe(i,{cell:a,tag:"td",type:"content"},null,8,["cell"])],64)):(R(),ke(i,{key:1,cell:a,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}var RA=Ge(A0e,[["render",R0e]]);const M0e=$e({name:"ElDescriptions",components:{[RA.name]:RA},props:{border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,default:"horizontal"},size:{type:String,validator:sr},title:{type:String,default:""},extra:{type:String,default:""}},setup(e,{slots:t}){jt(rk,e);const n=Ss(),s=Mt("descriptions"),o=O(()=>[s.b(),s.is(s.m(n.value),!!n.value)]),r=l=>{const u=Array.isArray(l)?l:[l],c=[];return u.forEach(d=>{Array.isArray(d.children)?c.push(...r(d.children)):c.push(d)}),c},i=(l,u,c,d=!1)=>(l.props||(l.props={}),u>c&&(l.props.span=c),d&&(l.props.span=u),l);return{descriptionKls:o,getRows:()=>{var l;const u=r((l=t.default)==null?void 0:l.call(t)).filter(p=>{var g;return((g=p==null?void 0:p.type)==null?void 0:g.name)==="ElDescriptionsItem"}),c=[];let d=[],f=e.column,h=0;return u.forEach((p,g)=>{var m;const v=((m=p.props)==null?void 0:m.span)||1;if(g<u.length-1&&(h+=v>f?f:v),g===u.length-1){const b=e.column-h%e.column;d.push(i(p,b,f,!0)),c.push(d);return}v<f?(f-=v,d.push(p)):(d.push(i(p,v,f)),c.push(d),f=e.column,d=[])}),c},ns:s}}});function O0e(e,t,n,s,o,r){const i=de("el-descriptions-row");return R(),H("div",{class:Q(e.descriptionKls)},[e.title||e.extra||e.$slots.title||e.$slots.extra?(R(),H("div",{key:0,class:Q(e.ns.e("header"))},[K("div",{class:Q(e.ns.e("title"))},[Pe(e.$slots,"title",{},()=>[Zt(ze(e.title),1)])],2),K("div",{class:Q(e.ns.e("extra"))},[Pe(e.$slots,"extra",{},()=>[Zt(ze(e.extra),1)])],2)],2)):me("v-if",!0),K("div",{class:Q(e.ns.e("body"))},[K("table",{class:Q([e.ns.e("table"),e.ns.is("bordered",e.border)])},[K("tbody",null,[(R(!0),H(ct,null,en(e.getRows(),(a,l)=>(R(),ke(i,{key:l,row:a},null,8,["row"]))),128))])],2)],2)],2)}var F0e=Ge(M0e,[["render",O0e]]),s4=$e({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const P0e=Gt(F0e,{DescriptionsItem:s4}),L0e=cs(s4),B0e=yt({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:et([String,Array,Object])},zIndex:{type:et([String,Number])}}),z0e={click:e=>e instanceof MouseEvent};var V0e=$e({name:"ElOverlay",props:B0e,emits:z0e,setup(e,{slots:t,emit:n}){const s=a=>{n("click",a)},{onClick:o,onMousedown:r,onMouseup:i}=xP(e.customMaskEvent?void 0:s);return()=>e.mask?pe("div",{class:["el-overlay",e.overlayClass],style:{zIndex:e.zIndex},onClick:o,onMousedown:r,onMouseup:i},[Pe(t,"default")],Fr.STYLE|Fr.CLASS|Fr.PROPS,["onClick","onMouseup","onMousedown"]):Ke("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Pe(t,"default")])}});const ik=V0e,o4=yt({appendToBody:{type:Boolean,default:!1},beforeClose:{type:et(Function)},destroyOnClose:{type:Boolean,default:!1},center:{type:Boolean,default:!1},customClass:{type:String,default:""},closeIcon:{type:et([String,Object]),default:""},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},title:{type:String,default:""},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number}}),r4={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Bt]:e=>typeof e=="boolean"},i4=(e,{emit:t},n)=>{const s=V(!1),o=V(!1),r=V(!1),i=V(e.zIndex||ys.nextZIndex());let a,l;const u=O(()=>Sn(e.width)?`${e.width}px`:e.width),c=O(()=>{const w={},C="--el-dialog";return e.fullscreen||(e.top&&(w[`${C}-margin-top`]=e.top),e.width&&(w[`${C}-width`]=u.value)),w});function d(){t("opened")}function f(){t("closed"),t(Bt,!1),e.destroyOnClose&&(r.value=!1)}function h(){t("close")}function p(){l==null||l(),a==null||a(),e.openDelay&&e.openDelay>0?{stop:a}=kd(()=>$(),e.openDelay):$()}function g(){a==null||a(),l==null||l(),e.closeDelay&&e.closeDelay>0?{stop:l}=kd(()=>y(),e.closeDelay):y()}function m(w){w||(o.value=!0,s.value=!1)}function v(){e.beforeClose?e.beforeClose(m):g()}function b(){e.closeOnClickModal&&v()}function $(){!Jt||(s.value=!0)}function y(){s.value=!1}return e.lockScroll&&vP(s),e.closeOnPressEscape&&wP({handleClose:v},s),CP(s),Le(()=>e.modelValue,w=>{w?(o.value=!1,p(),r.value=!0,t("open"),i.value=e.zIndex?i.value++:ys.nextZIndex(),ft(()=>{n.value&&(n.value.scrollTop=0)})):s.value&&g()}),Ft(()=>{e.modelValue&&(s.value=!0,r.value=!0,p())}),{afterEnter:d,afterLeave:f,beforeLeave:h,handleClose:v,onModalClick:b,close:g,doClose:y,closed:o,style:c,rendered:r,visible:s,zIndex:i}},W0e=$e({name:"ElDialog",components:dt({ElOverlay:ik,ElIcon:Pt},Tae),directives:{TrapFocus:U2},props:o4,emits:r4,setup(e,t){const n=V(),s=i4(e,t,n),o=xP(s.onModalClick);return dt({dialogRef:n,overlayEvent:o},s)}}),H0e=["aria-label"],U0e={class:"el-dialog__header"},j0e={class:"el-dialog__title"},G0e={key:0,class:"el-dialog__body"},K0e={key:1,class:"el-dialog__footer"};function q0e(e,t,n,s,o,r){const i=de("el-icon"),a=de("el-overlay"),l=Wo("trap-focus");return R(),ke(wb,{to:"body",disabled:!e.appendToBody},[pe(ks,{name:"dialog-fade",onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave},{default:ce(()=>[Ct(pe(a,{"custom-mask-event":"",mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex},{default:ce(()=>[K("div",{class:"el-overlay-dialog",onClick:t[2]||(t[2]=(...u)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...u)),onMousedown:t[3]||(t[3]=(...u)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...u)),onMouseup:t[4]||(t[4]=(...u)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...u))},[Ct((R(),H("div",{ref:"dialogRef",class:Q(["el-dialog",{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass]),"aria-modal":"true",role:"dialog","aria-label":e.title||"dialog",style:rt(e.style),onClick:t[1]||(t[1]=gt(()=>{},["stop"]))},[K("div",U0e,[Pe(e.$slots,"title",{},()=>[K("span",j0e,ze(e.title),1)]),e.showClose?(R(),H("button",{key:0,"aria-label":"close",class:"el-dialog__headerbtn",type:"button",onClick:t[0]||(t[0]=(...u)=>e.handleClose&&e.handleClose(...u))},[pe(i,{class:"el-dialog__close"},{default:ce(()=>[(R(),ke(on(e.closeIcon||"close")))]),_:1})])):me("v-if",!0)]),e.rendered?(R(),H("div",G0e,[Pe(e.$slots,"default")])):me("v-if",!0),e.$slots.footer?(R(),H("div",K0e,[Pe(e.$slots,"footer")])):me("v-if",!0)],14,H0e)),[[l]])],32)]),_:3},8,["mask","overlay-class","z-index"]),[[sn,e.visible]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var Y0e=Ge(W0e,[["render",q0e]]);const X0e=Gt(Y0e),Z0e=yt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:et(String),default:"solid"}}),J0e=$e({name:"ElDivider",props:Z0e,setup(e){const t=Mt("divider"),n=O(()=>({"--el-border-style":e.borderStyle}));return{ns:t,dividerStyle:n}}});function Q0e(e,t,n,s,o,r){return R(),H("div",{class:Q([e.ns.b(),e.ns.m(e.direction)]),style:rt(e.dividerStyle)},[e.$slots.default&&e.direction!=="vertical"?(R(),H("div",{key:0,class:Q([e.ns.e("text"),e.ns.is(e.contentPosition)])},[Pe(e.$slots,"default")],2)):me("v-if",!0)],6)}var ebe=Ge(J0e,[["render",Q0e]]);const tbe=Gt(ebe),nbe=yt(Ut(dt({},o4),{direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0}})),sbe=r4,obe=$e({name:"ElDrawer",components:{ElOverlay:ik,ElIcon:Pt,Close:ki},directives:{TrapFocus:U2},props:nbe,emits:sbe,setup(e,t){const n=V(),s=Mt("drawer"),o=O(()=>e.direction==="rtl"||e.direction==="ltr"),r=O(()=>typeof e.size=="number"?`${e.size}px`:e.size);return Ut(dt({},i4(e,t,n)),{drawerRef:n,isHorizontal:o,drawerSize:r,ns:s})}}),rbe=["aria-labelledby","aria-label"],ibe=["id"],abe=["title"],lbe=["aria-label"];function ube(e,t,n,s,o,r){const i=de("close"),a=de("el-icon"),l=de("el-overlay"),u=Wo("trap-focus");return R(),ke(wb,{to:"body",disabled:!e.appendToBody},[pe(ks,{name:e.ns.b("fade"),onAfterEnter:e.afterEnter,onAfterLeave:e.afterLeave,onBeforeLeave:e.beforeLeave},{default:ce(()=>[Ct(pe(l,{mask:e.modal,"overlay-class":e.modalClass,"z-index":e.zIndex,onClick:e.onModalClick},{default:ce(()=>[Ct((R(),H("div",{ref:"drawerRef","aria-modal":"true","aria-labelledby":e.ns.e("title"),"aria-label":e.title,class:Q([e.ns.b(),e.direction,e.visible&&"open",e.customClass]),style:rt(e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize),role:"dialog",onClick:t[1]||(t[1]=gt(()=>{},["stop"]))},[e.withHeader?(R(),H("header",{key:0,id:e.ns.e("title"),class:Q(e.ns.e("header"))},[Pe(e.$slots,"title",{},()=>[K("span",{role:"heading",title:e.title},ze(e.title),9,abe)]),e.showClose?(R(),H("button",{key:0,"aria-label":"close "+(e.title||"drawer"),class:Q(e.ns.e("close-btn")),type:"button",onClick:t[0]||(t[0]=(...c)=>e.handleClose&&e.handleClose(...c))},[pe(a,{class:Q(e.ns.e("close"))},{default:ce(()=>[pe(i)]),_:1},8,["class"])],10,lbe)):me("v-if",!0)],10,ibe)):me("v-if",!0),e.rendered?(R(),H("section",{key:1,class:Q(e.ns.e("body"))},[Pe(e.$slots,"default")],2)):me("v-if",!0),e.$slots.footer?(R(),H("div",{key:2,class:Q(e.ns.e("footer"))},[Pe(e.$slots,"footer")],2)):me("v-if",!0)],14,rbe)),[[u]])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[sn,e.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var cbe=Ge(obe,[["render",ube]]);const dbe=Gt(cbe),a4=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const o=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||o?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},MA=(e,t)=>{for(const n of e)if(!fbe(n,t))return n},fbe=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},hbe=e=>{const t=a4(e),n=MA(t,e),s=MA(t.reverse(),e);return[n,s]},pbe=e=>e instanceof HTMLInputElement&&"select"in e,cu=(e,t)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&pbe(e)&&t&&e.select()}};function OA(e,t){const n=[...e],s=e.indexOf(t);return s!==-1&&n.splice(s,1),n}const gbe=()=>{let e=[];return{push:s=>{const o=e[0];o&&s!==o&&o.pause(),e=OA(e,s),e.unshift(s)},remove:s=>{var o,r;e=OA(e,s),(r=(o=e[0])==null?void 0:o.resume)==null||r.call(o)}}},mbe=(e,t=!1)=>{const n=document.activeElement;for(const s of e)if(cu(s,t),document.activeElement!==n)return},FA=gbe(),zw="focus-trap.focus-on-mount",Vw="focus-trap.focus-on-unmount",PA={cancelable:!0,bubbles:!1},LA="mountOnFocus",BA="unmountOnFocus",l4=Symbol("elFocusTrap"),vbe=$e({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean},emits:[LA,BA],setup(e,{emit:t}){const n=V(),s=V(null);let o,r;const i={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=f=>{if(!e.loop&&!e.trapped||i.paused)return;const{key:h,altKey:p,ctrlKey:g,metaKey:m,currentTarget:v,shiftKey:b}=f,{loop:$}=e,y=h===tt.tab&&!p&&!g&&!m,w=document.activeElement;if(y&&w){const C=v,[x,S]=hbe(C);x&&S?!b&&w===S?(f.preventDefault(),$&&cu(x,!0)):b&&w===x&&(f.preventDefault(),$&&cu(S,!0)):w===C&&f.preventDefault()}};jt(l4,{focusTrapRef:s,onKeydown:a});const l=f=>{t(LA,f)},u=f=>t(BA,f),c=f=>{const h=Xe(s);if(i.paused||!h)return;const p=f.target;p&&h.contains(p)?r=p:cu(r,!0)},d=f=>{const h=Xe(s);i.paused||!h||h.contains(f.relatedTarget)||cu(r,!0)};return Ft(()=>{const f=Xe(s);if(f){FA.push(i);const h=document.activeElement;if(o=h,!f.contains(h)){const g=new Event(zw,PA);wn(f,zw,l),f.dispatchEvent(g),g.defaultPrevented||(mbe(a4(f),!0),document.activeElement===h&&cu(f))}}Le(()=>e.trapped,h=>{h?(wn(document,"focusin",c),wn(document,"focusout",d)):(qn(document,"focusin",c),qn(document,"focusout",d))},{immediate:!0})}),us(()=>{const f=Xe(s);if(f){qn(f,zw,l);const h=new Event(Vw,PA);wn(f,Vw,u),f.dispatchEvent(h),h.defaultPrevented||cu(o!=null?o:document.body,!0),qn(f,Vw,u),FA.remove(i)}}),{focusTrapRef:n,forwardRef:s,onKeydown:a}}});function bbe(e,t,n,s,o,r){return Pe(e.$slots,"default")}var ybe=Ge(vbe,[["render",bbe]]);const wbe=$e({inheritAttrs:!1});function $be(e,t,n,s,o,r){return Pe(e.$slots,"default")}var Cbe=Ge(wbe,[["render",$be]]);const xbe=$e({name:"ElCollectionItem",inheritAttrs:!1});function kbe(e,t,n,s,o,r){return Pe(e.$slots,"default")}var Sbe=Ge(xbe,[["render",kbe]]);const u4="data-el-collection-item",c4=e=>{const t=`El${e}Collection`,n=`${t}Item`,s=Symbol(t),o=Symbol(n),r=Ut(dt({},Cbe),{name:t,setup(){const a=V(null),l=new Map;jt(s,{itemMap:l,getItems:()=>{const c=Xe(a);if(!c)return[];const d=Array.from(c.querySelectorAll(`[${u4}]`));return[...l.values()].sort((p,g)=>d.indexOf(p.ref)-d.indexOf(g.ref))},collectionRef:a})}}),i=Ut(dt({},Sbe),{name:n,setup(a,{attrs:l}){const u=V(null),c=Qe(s,void 0);jt(o,{collectionItemRef:u}),Ft(()=>{const d=Xe(u);d&&c.itemMap.set(d,dt({ref:d},l))}),us(()=>{const d=Xe(u);c.itemMap.delete(d)})}});return{COLLECTION_INJECTION_KEY:s,COLLECTION_ITEM_INJECTION_KEY:o,ElCollection:r,ElCollectionItem:i}},Ibe=yt({style:{type:et([String,Array,Object])},currentTabId:{type:et(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:et(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Ebe,ElCollectionItem:Tbe,COLLECTION_INJECTION_KEY:ak,COLLECTION_ITEM_INJECTION_KEY:_be}=c4("RovingFocusGroup"),lk=Symbol("elRovingFocusGroup"),d4=Symbol("elRovingFocusGroupItem"),Nbe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Abe=(e,t)=>{if(t!=="rtl")return e;switch(e){case tt.right:return tt.left;case tt.left:return tt.right;default:return e}},Dbe=(e,t,n)=>{const s=Abe(e.key,n);if(!(t==="vertical"&&[tt.left,tt.right].includes(s))&&!(t==="horizontal"&&[tt.up,tt.down].includes(s)))return Nbe[s]},Rbe=(e,t)=>e.map((n,s)=>e[(s+t)%e.length]),uk=e=>{const{activeElement:t}=document;for(const n of e)if(n===t||(n.focus(),t!==document.activeElement))return},zA="currentTabIdChange",Ww="rovingFocusGroup.entryFocus",Mbe={bubbles:!1,cancelable:!0},Obe=$e({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Ibe,emits:[zA,"entryFocus"],setup(e,{emit:t}){var n;const s=V((n=e.currentTabId||e.defaultCurrentTabId)!=null?n:null),o=V(!1),r=V(!1),i=V(null),{getItems:a}=Qe(ak,void 0),l=O(()=>[{outline:"none"},e.style]),u=g=>{t(zA,g)},c=()=>{o.value=!0},d=Ls(g=>{var m;(m=e.onMousedown)==null||m.call(e,g)},()=>{r.value=!0}),f=Ls(g=>{var m;(m=e.onFocus)==null||m.call(e,g)},g=>{const m=!Xe(r),{target:v,currentTarget:b}=g;if(v===b&&m&&!Xe(o)){const $=new Event(Ww,Mbe);if(b==null||b.dispatchEvent($),!$.defaultPrevented){const y=a().filter(T=>T.focusable),w=y.find(T=>T.active),C=y.find(T=>T.id===Xe(s)),S=[w,C,...y].filter(Boolean).map(T=>T.ref);uk(S)}}r.value=!1}),h=Ls(g=>{var m;(m=e.onBlur)==null||m.call(e,g)},()=>{o.value=!1}),p=(...g)=>{t("entryFocus",...g)};jt(lk,{currentTabbedId:Rp(s),loop:yo(e,"loop"),tabIndex:O(()=>Xe(o)?-1:0),rovingFocusGroupRef:i,rovingFocusGroupRootStyle:l,orientation:yo(e,"orientation"),dir:yo(e,"dir"),onItemFocus:u,onItemShiftTab:c,onBlur:h,onFocus:f,onMousedown:d}),Le(()=>e.currentTabId,g=>{s.value=g!=null?g:null}),Ft(()=>{const g=Xe(i);wn(g,Ww,p)}),us(()=>{const g=Xe(i);qn(g,Ww,p)})}});function Fbe(e,t,n,s,o,r){return Pe(e.$slots,"default")}var Pbe=Ge(Obe,[["render",Fbe]]);const Lbe=$e({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Ebe,ElRovingFocusGroupImpl:Pbe}});function Bbe(e,t,n,s,o,r){const i=de("el-roving-focus-group-impl"),a=de("el-focus-group-collection");return R(),ke(a,null,{default:ce(()=>[pe(i,Wu(Hu(e.$attrs)),{default:ce(()=>[Pe(e.$slots,"default")]),_:3},16)]),_:3})}var zbe=Ge(Lbe,[["render",Bbe]]);const Vbe=$e({components:{ElRovingFocusCollectionItem:Tbe},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:t}){const{currentTabbedId:n,loop:s,onItemFocus:o,onItemShiftTab:r}=Qe(lk,void 0),{getItems:i}=Qe(ak,void 0),a=kP(),l=V(null),u=Ls(h=>{t("mousedown",h)},h=>{e.focusable?o(Xe(a)):h.preventDefault()}),c=Ls(h=>{t("focus",h)},()=>{o(Xe(a))}),d=Ls(h=>{t("keydown",h)},h=>{const{key:p,shiftKey:g,target:m,currentTarget:v}=h;if(p===tt.tab&&g){r();return}if(m!==v)return;const b=Dbe(h);if(b){h.preventDefault();let y=i().filter(w=>w.focusable).map(w=>w.ref);switch(b){case"last":{y.reverse();break}case"prev":case"next":{b==="prev"&&y.reverse();const w=y.indexOf(v);y=s.value?Rbe(y,w+1):y.slice(w+1);break}}ft(()=>{uk(y)})}}),f=O(()=>n.value===Xe(a));return jt(d4,{rovingFocusGroupItemRef:l,tabIndex:O(()=>Xe(f)?0:-1),handleMousedown:u,handleFocus:c,handleKeydown:d}),{id:a,handleKeydown:d,handleFocus:c,handleMousedown:u}}});function Wbe(e,t,n,s,o,r){const i=de("el-roving-focus-collection-item");return R(),ke(i,{id:e.id,focusable:e.focusable,active:e.active},{default:ce(()=>[Pe(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Hbe=Ge(Vbe,[["render",Wbe]]);const Ube=dt({trigger:Q2.trigger,effect:Ut(dt({},sl.effect),{default:"light"})},yt({type:{type:et(String)},placement:{type:et(String),default:"bottom"},popperOptions:{type:et(Object),default:()=>({})},size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:et([Number,String]),default:0},maxHeight:{type:et([Number,String]),default:""},popperClass:{type:String,default:""}})),f4=yt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:et([String,Object])}}),jbe=yt({onKeydown:{type:et(Function)}}),Gbe=[tt.down,tt.pageDown,tt.home],h4=[tt.up,tt.pageUp,tt.end],Kbe=[...Gbe,...h4],{ElCollection:qbe,ElCollectionItem:Ybe,COLLECTION_INJECTION_KEY:Xbe,COLLECTION_ITEM_INJECTION_KEY:Zbe}=c4("Dropdown"),ck=Symbol("elDropdown"),{ButtonGroup:Jbe}=sa,Qbe=$e({name:"ElDropdown",components:{ElButton:sa,ElFocusTrap:ybe,ElButtonGroup:Jbe,ElScrollbar:Fa,ElDropdownCollection:qbe,ElTooltip:lr,ElRovingFocusGroup:zbe,ElIcon:Pt,ArrowDown:hc},props:Ube,emits:["visible-change","click","command"],setup(e,{emit:t}){const n=Wt(),s=V(),o=V(),r=V(null),i=V(null),a=V(null),l=V(null),u=V(!1),c=O(()=>({maxHeight:Ta(e.maxHeight)})),d=O(()=>[[g.value?`el-dropdown--${g.value}`:""]]);function f(){h()}function h(){var x;(x=r.value)==null||x.onClose()}function p(){var x;(x=r.value)==null||x.onOpen()}const g=Ss();function m(...x){t("command",...x)}function v(){}function b(){const x=Xe(i);x==null||x.focus(),l.value=null}function $(x){l.value=x}function y(x){u.value||(x.preventDefault(),x.stopImmediatePropagation())}return jt(ck,{contentRef:i,isUsingKeyboard:u,onItemEnter:v,onItemLeave:b}),jt("elDropdown",{instance:n,dropdownSize:g,handleClick:f,commandHandler:m,trigger:yo(e,"trigger"),hideOnClick:yo(e,"hideOnClick")}),{scrollbar:a,wrapStyle:c,dropdownTriggerKls:d,dropdownSize:g,currentTabId:l,handleCurrentTabIdChange:$,handlerMainButtonClick:x=>{t("click",x)},handleEntryFocus:y,handleClose:h,handleOpen:p,onMountOnFocus:x=>{var S,T;x.preventDefault(),(T=(S=i.value)==null?void 0:S.focus)==null||T.call(S,{preventScroll:!0})},popperRef:r,triggeringElementRef:s,referenceElementRef:o}}}),eye={class:"el-dropdown"};function tye(e,t,n,s,o,r){var i;const a=de("el-dropdown-collection"),l=de("el-roving-focus-group"),u=de("el-focus-trap"),c=de("el-scrollbar"),d=de("el-tooltip"),f=de("el-button"),h=de("arrow-down"),p=de("el-icon"),g=de("el-button-group");return R(),H("div",eye,[pe(d,{ref:"popperRef",effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.hideTimeout,"manual-mode":!0,placement:e.placement,"popper-class":`el-dropdown__popper ${e.popperClass}`,"reference-element":(i=e.referenceElementRef)==null?void 0:i.$el,trigger:e.trigger,"show-after":e.showTimeout,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,"append-to-body":"",pure:"",transition:"el-zoom-in-top",persistent:"",onShow:t[0]||(t[0]=m=>e.$emit("visible-change",!0)),onHide:t[1]||(t[1]=m=>e.$emit("visible-change",!1))},qh({content:ce(()=>[pe(c,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"ul","view-class":"el-dropdown__list"},{default:ce(()=>[pe(u,{trapped:"",onMountOnFocus:e.onMountOnFocus},{default:ce(()=>[pe(l,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:ce(()=>[pe(a,null,{default:ce(()=>[Pe(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["onMountOnFocus"])]),_:3},8,["wrap-style"])]),_:2},[e.splitButton?void 0:{name:"default",fn:ce(()=>[K("div",{class:Q(e.dropdownTriggerKls)},[Pe(e.$slots,"default")],2)])}]),1032,["effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","show-after","virtual-ref","virtual-triggering"]),e.splitButton?(R(),ke(g,{key:0},{default:ce(()=>[pe(f,{ref:"referenceElementRef",size:e.dropdownSize,type:e.type,onClick:e.handlerMainButtonClick},{default:ce(()=>[Pe(e.$slots,"default")]),_:3},8,["size","type","onClick"]),pe(f,{ref:"triggeringElementRef",size:e.dropdownSize,type:e.type,class:"el-dropdown__caret-button"},{default:ce(()=>[pe(p,{class:"el-dropdown__icon"},{default:ce(()=>[pe(h)]),_:1})]),_:1},8,["size","type"])]),_:3})):me("v-if",!0)])}var nye=Ge(Qbe,[["render",tye]]);const sye=$e({name:"DropdownItemImpl",components:{ElIcon:Pt},props:f4,emits:["pointermove","pointerleave","click"],setup(e,{emit:t}){const{collectionItemRef:n}=Qe(Zbe,void 0),{collectionItemRef:s}=Qe(_be,void 0),{rovingFocusGroupItemRef:o,tabIndex:r,handleFocus:i,handleKeydown:a,handleMousedown:l}=Qe(d4,void 0),u=mP(n,s,o),c=Ls(d=>{const{code:f}=d;if(f===tt.enter||f===tt.space)return d.preventDefault(),d.stopImmediatePropagation(),t("click",d),!0},a);return{itemRef:u,dataset:{[u4]:""},tabIndex:r,handleFocus:i,handleKeydown:c,handleMousedown:l}}}),oye={key:0,class:"el-dropdown-menu__item--divided"},rye=["aria-disabled","tabindex"];function iye(e,t,n,s,o,r){const i=de("el-icon");return R(),H(ct,null,[e.divided?(R(),H("div",oye)):me("v-if",!0),K("div",uo({ref:e.itemRef},e.dataset,{"aria-disabled":e.disabled,class:{"el-dropdown-menu__item":!0,"is-disabled":e.disabled},tabindex:e.tabIndex,role:"menuitem",onClick:t[0]||(t[0]=a=>e.$emit("click",a)),onFocus:t[1]||(t[1]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onKeydown:t[2]||(t[2]=(...a)=>e.handleKeydown&&e.handleKeydown(...a)),onMousedown:t[3]||(t[3]=(...a)=>e.handleMousedown&&e.handleMousedown(...a)),onPointermove:t[4]||(t[4]=a=>e.$emit("pointermove",a)),onPointerleave:t[5]||(t[5]=a=>e.$emit("pointerleave",a))}),[e.icon?(R(),ke(i,{key:0},{default:ce(()=>[(R(),ke(on(e.icon)))]),_:1})):me("v-if",!0),Pe(e.$slots,"default")],16,rye)],64)}var aye=Ge(sye,[["render",iye]]);const p4=()=>{const e=Qe("elDropdown",{}),t=O(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:t}},lye=$e({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Ybe,ElRovingFocusItem:Hbe,ElDropdownItemImpl:aye},props:f4,emits:["pointermove","pointerleave","click"],setup(e,{emit:t}){const{elDropdown:n}=p4(),s=Wt(),o=V(null),r=O(()=>{var d,f;return(f=(d=Xe(o))==null?void 0:d.textContent)!=null?f:""}),{onItemEnter:i,onItemLeave:a}=Qe(ck,void 0),l=Ls(d=>(t("pointermove",d),d.defaultPrevented),BN(d=>{var f;e.disabled?a(d):(i(d),d.defaultPrevented||(f=d.currentTarget)==null||f.focus())})),u=Ls(d=>(t("pointerleave",d),d.defaultPrevented),BN(d=>{a(d)}));return{handleClick:Ls(d=>(t("click",d),d.defaultPrevented),d=>{var f,h,p;if(e.disabled){d.stopImmediatePropagation();return}((f=n==null?void 0:n.hideOnClick)==null?void 0:f.value)&&((h=n.handleClick)==null||h.call(n)),(p=n.commandHandler)==null||p.call(n,e.command,s,d)}),handlePointerMove:l,handlePointerLeave:u,textContent:r}}});function uye(e,t,n,s,o,r){var i;const a=de("el-dropdown-item-impl"),l=de("el-roving-focus-item"),u=de("el-dropdown-collection-item");return R(),ke(u,{disabled:e.disabled,"text-value":(i=e.textValue)!=null?i:e.textContent},{default:ce(()=>[pe(l,{focusable:!e.disabled},{default:ce(()=>[pe(a,uo(e.$props,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClick:e.handleClick}),{default:ce(()=>[Pe(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClick"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var g4=Ge(lye,[["render",uye]]);const cye=$e({name:"ElDropdownMenu",props:jbe,setup(e){const{_elDropdownSize:t}=p4(),n=t.value,{focusTrapRef:s,onKeydown:o}=Qe(l4,void 0),{contentRef:r}=Qe(ck,void 0),{collectionRef:i,getItems:a}=Qe(Xbe,void 0),{rovingFocusGroupRef:l,rovingFocusGroupRootStyle:u,tabIndex:c,onBlur:d,onFocus:f,onMousedown:h}=Qe(lk,void 0),{collectionRef:p}=Qe(ak,void 0),g=O(()=>["el-dropdown-menu",n.value&&`el-dropdown-menu--${n.value}`]),m=mP(r,i,s,l,p),v=Ls($=>{var y;(y=e.onKeydown)==null||y.call(e,$)},$=>{const{currentTarget:y,code:w,target:C}=$;if(y.contains(C),tt.tab===w&&$.stopImmediatePropagation(),$.preventDefault(),C!==Xe(r)||!Kbe.includes(w))return;const S=a().filter(T=>!T.disabled).map(T=>T.ref);h4.includes(w)&&S.reverse(),uk(S)});return{size:n,rovingFocusGroupRootStyle:u,tabIndex:c,dropdownKls:g,dropdownListWrapperRef:m,handleKeydown:$=>{v($),o($)},onBlur:d,onFocus:f,onMousedown:h}}});function dye(e,t,n,s,o,r){return R(),H("ul",{ref:e.dropdownListWrapperRef,class:Q(e.dropdownKls),style:rt(e.rovingFocusGroupRootStyle),tabindex:-1,role:"menu",onBlur:t[0]||(t[0]=(...i)=>e.onBlur&&e.onBlur(...i)),onFocus:t[1]||(t[1]=(...i)=>e.onFocus&&e.onFocus(...i)),onKeydown:t[2]||(t[2]=(...i)=>e.handleKeydown&&e.handleKeydown(...i)),onMousedown:t[3]||(t[3]=(...i)=>e.onMousedown&&e.onMousedown(...i))},[Pe(e.$slots,"default")],38)}var m4=Ge(cye,[["render",dye]]);const fye=Gt(nye,{DropdownItem:g4,DropdownMenu:m4}),hye=cs(g4),pye=cs(m4);let gye=0;const mye=$e({name:"ImgEmpty",setup(){return{id:++gye}}}),vye={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},bye=["id"],yye=K("stop",{"stop-color":"var(--el-empty-fill-color-1)",offset:"0%"},null,-1),wye=K("stop",{"stop-color":"var(--el-empty-fill-color-4)",offset:"100%"},null,-1),$ye=[yye,wye],Cye=["id"],xye=K("stop",{"stop-color":"var(--el-empty-fill-color-1)",offset:"0%"},null,-1),kye=K("stop",{"stop-color":"var(--el-empty-fill-color-6)",offset:"100%"},null,-1),Sye=[xye,kye],Iye=["id"],Eye={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},Tye={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},_ye={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},Nye=K("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:"var(--el-empty-fill-color-3)"},null,-1),Aye=K("polygon",{id:"Rectangle-Copy-14",fill:"var(--el-empty-fill-color-7)",transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,-1),Dye={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},Rye=K("polygon",{id:"Rectangle-Copy-10",fill:"var(--el-empty-fill-color-7)",transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,-1),Mye=K("polygon",{id:"Rectangle-Copy-11",fill:"var(--el-empty-fill-color-5)",points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,-1),Oye=["fill"],Fye=K("polygon",{id:"Rectangle-Copy-13",fill:"var(--el-empty-fill-color-2)",transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,-1),Pye=["fill"],Lye={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},Bye=["id"],zye=["xlink:href"],Vye=["xlink:href"],Wye=["mask"],Hye=K("polygon",{id:"Rectangle-Copy-18",fill:"var(--el-empty-fill-color-2)",transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,-1);function Uye(e,t,n,s,o,r){return R(),H("svg",vye,[K("defs",null,[K("linearGradient",{id:`linearGradient-1-${e.id}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},$ye,8,bye),K("linearGradient",{id:`linearGradient-2-${e.id}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},Sye,8,Cye),K("rect",{id:`path-3-${e.id}`,x:"0",y:"0",width:"17",height:"36"},null,8,Iye)]),K("g",Eye,[K("g",Tye,[K("g",_ye,[Nye,Aye,K("g",Dye,[Rye,Mye,K("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${e.id})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,Oye),Fye]),K("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${e.id})`,x:"13",y:"45",width:"40",height:"36"},null,8,Pye),K("g",Lye,[K("mask",{id:`mask-4-${e.id}`,fill:"var(--el-empty-fill-color-0)"},[K("use",{"xlink:href":`#path-3-${e.id}`},null,8,zye)],8,Bye),K("use",{id:"Mask",fill:"var(--el-empty-fill-color-8)",transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${e.id}`},null,8,Vye),K("polygon",{id:"Rectangle-Copy",fill:"var(--el-empty-fill-color-9)",mask:`url(#mask-4-${e.id})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 -1.70530257e-13 16"},null,8,Wye)]),Hye])])])])}var jye=Ge(mye,[["render",Uye]]);const Gye={image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}},Kye=$e({name:"ElEmpty",components:{ImgEmpty:jye},props:Gye,setup(e){const{t}=Tn(),n=Mt("empty"),s=O(()=>e.description||t("el.table.emptyText")),o=O(()=>({width:e.imageSize?`${e.imageSize}px`:""}));return{ns:n,emptyDescription:s,imageStyle:o}}}),qye=["src"],Yye={key:1};function Xye(e,t,n,s,o,r){const i=de("img-empty");return R(),H("div",{class:Q(e.ns.b())},[K("div",{class:Q(e.ns.e("image")),style:rt(e.imageStyle)},[e.image?(R(),H("img",{key:0,src:e.image,ondragstart:"return false"},null,8,qye)):Pe(e.$slots,"image",{key:1},()=>[pe(i)])],6),K("div",{class:Q(e.ns.e("description"))},[e.$slots.description?Pe(e.$slots,"description",{key:0}):(R(),H("p",Yye,ze(e.emptyDescription),1))],2),e.$slots.default?(R(),H("div",{key:0,class:Q(e.ns.e("bottom"))},[Pe(e.$slots,"default")],2)):me("v-if",!0)],2)}var Zye=Ge(Kye,[["render",Xye]]);const Jye=Gt(Zye);function Qye(){const e=V([]),t=O(()=>{if(!e.value.length)return"0";const r=Math.max(...e.value);return r?`${r}px`:""});function n(r){return e.value.indexOf(r)}function s(r,i){if(r&&i){const a=n(i);e.value.splice(a,1,r)}else r&&e.value.push(r)}function o(r){const i=n(r);i>-1&&e.value.splice(i,1)}return{autoLabelWidth:t,registerLabelWidth:s,deregisterLabelWidth:o}}const e1e=$e({name:"ElForm",props:{model:Object,rules:Object,labelPosition:String,labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:Boolean},emits:["validate"],setup(e,{emit:t}){const n=[];Le(()=>e.rules,()=>{n.forEach(p=>{p.evaluateValidationEnabled()}),e.validateOnRuleChange&&c(()=>({}))});const s=Ss(),o="el-form",r=O(()=>{const{labelPosition:p,inline:g}=e;return[o,`${o}--${s.value}`,p?`${o}--label-${p}`:"",g?`${o}--inline`:""]}),i=p=>{p&&n.push(p)},a=p=>{p.prop&&n.splice(n.indexOf(p),1)},l=()=>{!e.model||n.forEach(p=>{p.resetField()})},u=(p=[])=>{(p.length?typeof p=="string"?n.filter(m=>p===m.prop):n.filter(m=>p.indexOf(m.prop)>-1):n).forEach(m=>{m.clearValidate()})},c=p=>{if(!e.model)return;let g;typeof p!="function"&&(g=new Promise((y,w)=>{p=function(C,x){C?y(!0):w(x)}})),n.length===0&&p(!0);let m=!0,v=0,b={},$;for(const y of n)y.validate("",(w,C)=>{w&&(m=!1,$||($=C)),b=dt(dt({},b),C),++v===n.length&&p(m,b)});return!m&&e.scrollToError&&f(Object.keys($)[0]),g},d=(p,g)=>{p=[].concat(p);const m=n.filter(v=>p.indexOf(v.prop)!==-1);!n.length||m.forEach(v=>{v.validate("",g)})},f=p=>{n.forEach(g=>{g.prop===p&&g.$el.scrollIntoView()})},h=En(dt(Ut(dt({},ko(e)),{resetFields:l,clearValidate:u,validateField:d,emit:t,addField:i,removeField:a}),Qye()));return jt(ar,h),{formKls:r,validate:c,resetFields:l,clearValidate:u,validateField:d,scrollToField:f}}});function t1e(e,t,n,s,o,r){return R(),H("form",{class:Q(e.formKls)},[Pe(e.$slots,"default")],2)}var n1e=Ge(e1e,[["render",t1e]]);function ku(){return ku=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ku.apply(this,arguments)}function s1e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ip(e,t)}function SC(e){return SC=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},SC(e)}function ip(e,t){return ip=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},ip(e,t)}function o1e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Uv(e,t,n){return o1e()?Uv=Reflect.construct:Uv=function(o,r,i){var a=[null];a.push.apply(a,r);var l=Function.bind.apply(o,a),u=new l;return i&&ip(u,i.prototype),u},Uv.apply(null,arguments)}function r1e(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function IC(e){var t=typeof Map=="function"?new Map:void 0;return IC=function(s){if(s===null||!r1e(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(s))return t.get(s);t.set(s,o)}function o(){return Uv(s,arguments,SC(this).constructor)}return o.prototype=Object.create(s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),ip(o,s)},IC(e)}var i1e=/%[sdj%]/g,a1e=function(){};typeof process!="undefined"&&process.env;function EC(e){if(!e||!e.length)return null;var t={};return e.forEach(function(n){var s=n.field;t[s]=t[s]||[],t[s].push(n)}),t}function yr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];var o=0,r=n.length;if(typeof e=="function")return e.apply(null,n);if(typeof e=="string"){var i=e.replace(i1e,function(a){if(a==="%%")return"%";if(o>=r)return a;switch(a){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch{return"[Circular]"}break;default:return a}});return i}return e}function l1e(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function Js(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||l1e(t)&&typeof e=="string"&&!e)}function u1e(e,t,n){var s=[],o=0,r=e.length;function i(a){s.push.apply(s,a||[]),o++,o===r&&n(s)}e.forEach(function(a){t(a,i)})}function VA(e,t,n){var s=0,o=e.length;function r(i){if(i&&i.length){n(i);return}var a=s;s=s+1,a<o?t(e[a],r):n([])}r([])}function c1e(e){var t=[];return Object.keys(e).forEach(function(n){t.push.apply(t,e[n]||[])}),t}var WA=function(e){s1e(t,e);function t(n,s){var o;return o=e.call(this,"Async Validation Error")||this,o.errors=n,o.fields=s,o}return t}(IC(Error));function d1e(e,t,n,s,o){if(t.first){var r=new Promise(function(f,h){var p=function(v){return s(v),v.length?h(new WA(v,EC(v))):f(o)},g=c1e(e);VA(g,n,p)});return r.catch(function(f){return f}),r}var i=t.firstFields===!0?Object.keys(e):t.firstFields||[],a=Object.keys(e),l=a.length,u=0,c=[],d=new Promise(function(f,h){var p=function(m){if(c.push.apply(c,m),u++,u===l)return s(c),c.length?h(new WA(c,EC(c))):f(o)};a.length||(s(c),f(o)),a.forEach(function(g){var m=e[g];i.indexOf(g)!==-1?VA(m,n,p):u1e(m,n,p)})});return d.catch(function(f){return f}),d}function f1e(e){return!!(e&&e.message!==void 0)}function h1e(e,t){for(var n=e,s=0;s<t.length;s++){if(n==null)return n;n=n[t[s]]}return n}function HA(e,t){return function(n){var s;return e.fullFields?s=h1e(t,e.fullFields):s=t[n.field||e.fullField],f1e(n)?(n.field=n.field||e.fullField,n.fieldValue=s,n):{message:typeof n=="function"?n():n,fieldValue:s,field:n.field||e.fullField}}}function UA(e,t){if(t){for(var n in t)if(t.hasOwnProperty(n)){var s=t[n];typeof s=="object"&&typeof e[n]=="object"?e[n]=ku({},e[n],s):e[n]=s}}return e}var v4=function(t,n,s,o,r,i){t.required&&(!s.hasOwnProperty(t.field)||Js(n,i||t.type))&&o.push(yr(r.messages.required,t.fullField))},p1e=function(t,n,s,o,r){(/^\s+$/.test(n)||n==="")&&o.push(yr(r.messages.whitespace,t.fullField))},Hw={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},ah={integer:function(t){return ah.number(t)&&parseInt(t,10)===t},float:function(t){return ah.number(t)&&!ah.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!ah.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(Hw.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(Hw.url)},hex:function(t){return typeof t=="string"&&!!t.match(Hw.hex)}},g1e=function(t,n,s,o,r){if(t.required&&n===void 0){v4(t,n,s,o,r);return}var i=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=t.type;i.indexOf(a)>-1?ah[a](n)||o.push(yr(r.messages.types[a],t.fullField,t.type)):a&&typeof n!==t.type&&o.push(yr(r.messages.types[a],t.fullField,t.type))},m1e=function(t,n,s,o,r){var i=typeof t.len=="number",a=typeof t.min=="number",l=typeof t.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=n,d=null,f=typeof n=="number",h=typeof n=="string",p=Array.isArray(n);if(f?d="number":h?d="string":p&&(d="array"),!d)return!1;p&&(c=n.length),h&&(c=n.replace(u,"_").length),i?c!==t.len&&o.push(yr(r.messages[d].len,t.fullField,t.len)):a&&!l&&c<t.min?o.push(yr(r.messages[d].min,t.fullField,t.min)):l&&!a&&c>t.max?o.push(yr(r.messages[d].max,t.fullField,t.max)):a&&l&&(c<t.min||c>t.max)&&o.push(yr(r.messages[d].range,t.fullField,t.min,t.max))},Wc="enum",v1e=function(t,n,s,o,r){t[Wc]=Array.isArray(t[Wc])?t[Wc]:[],t[Wc].indexOf(n)===-1&&o.push(yr(r.messages[Wc],t.fullField,t[Wc].join(", ")))},b1e=function(t,n,s,o,r){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(n)||o.push(yr(r.messages.pattern.mismatch,t.fullField,n,t.pattern));else if(typeof t.pattern=="string"){var i=new RegExp(t.pattern);i.test(n)||o.push(yr(r.messages.pattern.mismatch,t.fullField,n,t.pattern))}}},$n={required:v4,whitespace:p1e,type:g1e,range:m1e,enum:v1e,pattern:b1e},y1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Js(n,"string")&&!t.required)return s();$n.required(t,n,o,i,r,"string"),Js(n,"string")||($n.type(t,n,o,i,r),$n.range(t,n,o,i,r),$n.pattern(t,n,o,i,r),t.whitespace===!0&&$n.whitespace(t,n,o,i,r))}s(i)},w1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Js(n)&&!t.required)return s();$n.required(t,n,o,i,r),n!==void 0&&$n.type(t,n,o,i,r)}s(i)},$1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(n===""&&(n=void 0),Js(n)&&!t.required)return s();$n.required(t,n,o,i,r),n!==void 0&&($n.type(t,n,o,i,r),$n.range(t,n,o,i,r))}s(i)},C1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Js(n)&&!t.required)return s();$n.required(t,n,o,i,r),n!==void 0&&$n.type(t,n,o,i,r)}s(i)},x1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Js(n)&&!t.required)return s();$n.required(t,n,o,i,r),Js(n)||$n.type(t,n,o,i,r)}s(i)},k1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Js(n)&&!t.required)return s();$n.required(t,n,o,i,r),n!==void 0&&($n.type(t,n,o,i,r),$n.range(t,n,o,i,r))}s(i)},S1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Js(n)&&!t.required)return s();$n.required(t,n,o,i,r),n!==void 0&&($n.type(t,n,o,i,r),$n.range(t,n,o,i,r))}s(i)},I1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(n==null&&!t.required)return s();$n.required(t,n,o,i,r,"array"),n!=null&&($n.type(t,n,o,i,r),$n.range(t,n,o,i,r))}s(i)},E1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Js(n)&&!t.required)return s();$n.required(t,n,o,i,r),n!==void 0&&$n.type(t,n,o,i,r)}s(i)},T1e="enum",_1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Js(n)&&!t.required)return s();$n.required(t,n,o,i,r),n!==void 0&&$n[T1e](t,n,o,i,r)}s(i)},N1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Js(n,"string")&&!t.required)return s();$n.required(t,n,o,i,r),Js(n,"string")||$n.pattern(t,n,o,i,r)}s(i)},A1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Js(n,"date")&&!t.required)return s();if($n.required(t,n,o,i,r),!Js(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),$n.type(t,l,o,i,r),l&&$n.range(t,l.getTime(),o,i,r)}}s(i)},D1e=function(t,n,s,o,r){var i=[],a=Array.isArray(n)?"array":typeof n;$n.required(t,n,o,i,r,a),s(i)},Uw=function(t,n,s,o,r){var i=t.type,a=[],l=t.required||!t.required&&o.hasOwnProperty(t.field);if(l){if(Js(n,i)&&!t.required)return s();$n.required(t,n,o,a,r,i),Js(n,i)||$n.type(t,n,o,a,r)}s(a)},R1e=function(t,n,s,o,r){var i=[],a=t.required||!t.required&&o.hasOwnProperty(t.field);if(a){if(Js(n)&&!t.required)return s();$n.required(t,n,o,i,r)}s(i)},Th={string:y1e,method:w1e,number:$1e,boolean:C1e,regexp:x1e,integer:k1e,float:S1e,array:I1e,object:E1e,enum:_1e,pattern:N1e,date:A1e,url:Uw,hex:Uw,email:Uw,required:D1e,any:R1e};function TC(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var _C=TC(),Hp=function(){function e(n){this.rules=null,this._messages=_C,this.define(n)}var t=e.prototype;return t.define=function(s){var o=this;if(!s)throw new Error("Cannot configure a schema with no rules");if(typeof s!="object"||Array.isArray(s))throw new Error("Rules must be an object");this.rules={},Object.keys(s).forEach(function(r){var i=s[r];o.rules[r]=Array.isArray(i)?i:[i]})},t.messages=function(s){return s&&(this._messages=UA(TC(),s)),this._messages},t.validate=function(s,o,r){var i=this;o===void 0&&(o={}),r===void 0&&(r=function(){});var a=s,l=o,u=r;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,a),Promise.resolve(a);function c(g){var m=[],v={};function b(y){if(Array.isArray(y)){var w;m=(w=m).concat.apply(w,y)}else m.push(y)}for(var $=0;$<g.length;$++)b(g[$]);m.length?(v=EC(m),u(m,v)):u(null,a)}if(l.messages){var d=this.messages();d===_C&&(d=TC()),UA(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(g){var m=i.rules[g],v=a[g];m.forEach(function(b){var $=b;typeof $.transform=="function"&&(a===s&&(a=ku({},a)),v=a[g]=$.transform(v)),typeof $=="function"?$={validator:$}:$=ku({},$),$.validator=i.getValidationMethod($),!!$.validator&&($.field=g,$.fullField=$.fullField||g,$.type=i.getType($),f[g]=f[g]||[],f[g].push({rule:$,value:v,source:a,field:g}))})});var p={};return d1e(f,l,function(g,m){var v=g.rule,b=(v.type==="object"||v.type==="array")&&(typeof v.fields=="object"||typeof v.defaultField=="object");b=b&&(v.required||!v.required&&g.value),v.field=g.field;function $(C,x){return ku({},x,{fullField:v.fullField+"."+C,fullFields:v.fullFields?[].concat(v.fullFields,[C]):[C]})}function y(C){C===void 0&&(C=[]);var x=Array.isArray(C)?C:[C];!l.suppressWarning&&x.length&&e.warning("async-validator:",x),x.length&&v.message!==void 0&&(x=[].concat(v.message));var S=x.map(HA(v,a));if(l.first&&S.length)return p[v.field]=1,m(S);if(!b)m(S);else{if(v.required&&!g.value)return v.message!==void 0?S=[].concat(v.message).map(HA(v,a)):l.error&&(S=[l.error(v,yr(l.messages.required,v.field))]),m(S);var T={};v.defaultField&&Object.keys(g.value).map(function(N){T[N]=v.defaultField}),T=ku({},T,g.rule.fields);var I={};Object.keys(T).forEach(function(N){var D=T[N],F=Array.isArray(D)?D:[D];I[N]=F.map($.bind(null,N))});var _=new e(I);_.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),_.validate(g.value,g.rule.options||l,function(N){var D=[];S&&S.length&&D.push.apply(D,S),N&&N.length&&D.push.apply(D,N),m(D.length?D:null)})}}var w;v.asyncValidator?w=v.asyncValidator(v,g.value,y,g.source,l):v.validator&&(w=v.validator(v,g.value,y,g.source,l),w===!0?y():w===!1?y(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||(v.fullField||v.field)+" fails"):w instanceof Array?y(w):w instanceof Error&&y(w.message)),w&&w.then&&w.then(function(){return y()},function(C){return y(C)})},function(g){c(g)},a)},t.getType=function(s){if(s.type===void 0&&s.pattern instanceof RegExp&&(s.type="pattern"),typeof s.validator!="function"&&s.type&&!Th.hasOwnProperty(s.type))throw new Error(yr("Unknown rule type %s",s.type));return s.type||"string"},t.getValidationMethod=function(s){if(typeof s.validator=="function")return s.validator;var o=Object.keys(s),r=o.indexOf("message");return r!==-1&&o.splice(r,1),o.length===1&&o[0]==="required"?Th.required:Th[this.getType(s)]||void 0},e}();Hp.register=function(t,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");Th[t]=n};Hp.warning=a1e;Hp.messages=_C;Hp.validators=Th;var M1e=$e({name:"ElLabelWrap",props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:t}){const n=V(null),s=Qe(ar),o=Qe(Ai),r=V(0);Le(r,(c,d)=>{e.updateAll&&(s.registerLabelWidth(c,d),o.updateComputedLabelWidth(c))});const i=()=>{var c;if((c=n.value)==null?void 0:c.firstElementChild){const d=window.getComputedStyle(n.value.firstElementChild).width;return Math.ceil(parseFloat(d))}else return 0},a=(c="update")=>{ft(()=>{t.default&&e.isAutoWidth&&(c==="update"?r.value=i():c==="remove"&&s.deregisterLabelWidth(r.value))})},l=()=>a("update");Ft(()=>{Al(n.value.firstElementChild,l),l()}),Ni(l),us(()=>{var c;a("remove"),Dl((c=n.value)==null?void 0:c.firstElementChild,l)});function u(){var c,d;if(!t)return null;if(e.isAutoWidth){const f=s.autoLabelWidth,h={};if(f&&f!=="auto"){const p=Math.max(0,parseInt(f,10)-r.value),g=s.labelPosition==="left"?"marginRight":"marginLeft";p&&(h[g]=`${p}px`)}return Ke("div",{ref:n,class:["el-form-item__label-wrap"],style:h},(c=t.default)==null?void 0:c.call(t))}else return Ke(ct,{ref:n},(d=t.default)==null?void 0:d.call(t))}return u}});const O1e=$e({name:"ElFormItem",componentName:"ElFormItem",components:{LabelWrap:M1e},props:{label:String,labelWidth:{type:[String,Number],default:""},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,validator:sr}},setup(e,{slots:t}){const n=Qe(ar,{}),s=V(""),o=V(""),r=V(!1),i=V(""),a=V(),l=Wt(),u=O(()=>{let N=l.parent;for(;N&&N.type.name!=="ElForm";){if(N.type.name==="ElFormItem")return!0;N=N.parent}return!1});let c;Le(()=>e.error,N=>{o.value=N,s.value=N?"error":""},{immediate:!0}),Le(()=>e.validateStatus,N=>{s.value=N});const d=O(()=>e.for||e.prop),f=O(()=>{const N={};if(n.labelPosition==="top")return N;const D=Ta(e.labelWidth||n.labelWidth);return D&&(N.width=D),N}),h=O(()=>{const N={};if(n.labelPosition==="top"||n.inline||!e.label&&!e.labelWidth&&u.value)return N;const D=Ta(e.labelWidth||n.labelWidth);return!e.label&&!t.label&&(N.marginLeft=D),N}),p=O(()=>{const N=n.model;if(!N||!e.prop)return;let D=e.prop;return D.indexOf(":")!==-1&&(D=D.replace(/:/,".")),_v(N,D,!0).v}),g=O(()=>{const N=y();let D=!1;return N&&N.length&&N.every(F=>F.required?(D=!0,!1):!0),D}),m=Ss(void 0,{formItem:!1}),v=(N,D=un)=>{if(!r.value){D();return}const F=w(N);if((!F||F.length===0)&&e.required===void 0){D();return}s.value="validating";const P={};F&&F.length>0&&F.forEach(j=>{delete j.trigger}),P[e.prop]=F;const M=new Hp(P),B={};B[e.prop]=p.value,M.validate(B,{firstFields:!0},(j,X)=>{var ae;s.value=j?"error":"success",o.value=j?j[0].message||`${e.prop} is required`:"",D(o.value,j?X:{}),(ae=n.emit)==null||ae.call(n,"validate",e.prop,!j,o.value||null)})},b=()=>{s.value="",o.value=""},$=()=>{const N=n.model,D=p.value;let F=e.prop;F.indexOf(":")!==-1&&(F=F.replace(/:/,"."));const P=_v(N,F,!0);Array.isArray(D)?P.o[P.k]=[].concat(c):P.o[P.k]=c,ft(()=>{b()})},y=()=>{const N=n.rules,D=e.rules,F=e.required!==void 0?{required:!!e.required}:[],P=_v(N,e.prop||"",!1),M=N?P.o[e.prop||""]||P.v:[];return[].concat(D||M||[]).concat(F)},w=N=>y().filter(F=>!F.trigger||N===""?!0:Array.isArray(F.trigger)?F.trigger.indexOf(N)>-1:F.trigger===N).map(F=>dt({},F)),C=()=>{var N;r.value=!!((N=y())==null?void 0:N.length)},x=N=>{i.value=N?`${N}px`:""},S=En(Ut(dt({},ko(e)),{size:m,validateState:s,$el:a,evaluateValidationEnabled:C,resetField:$,clearValidate:b,validate:v,updateComputedLabelWidth:x}));Ft(()=>{if(e.prop){n==null||n.addField(S);const N=p.value;c=Array.isArray(N)?[...N]:N,C()}}),us(()=>{n==null||n.removeField(S)}),jt(Ai,S);const T=O(()=>[{"el-form-item--feedback":n.statusIcon,"is-error":s.value==="error","is-validating":s.value==="validating","is-success":s.value==="success","is-required":g.value||e.required,"is-no-asterisk":n.hideRequiredAsterisk},m.value?`el-form-item--${m.value}`:""]),I=O(()=>s.value==="error"&&e.showMessage&&n.showMessage),_=O(()=>(e.label||"")+(n.labelSuffix||""));return{formItemRef:a,formItemClass:T,shouldShowError:I,elForm:n,labelStyle:f,contentStyle:h,validateMessage:o,labelFor:d,resetField:$,clearValidate:b,currentLabel:_}}}),F1e=["for"];function P1e(e,t,n,s,o,r){const i=de("LabelWrap");return R(),H("div",{ref:"formItemRef",class:Q(["el-form-item",e.formItemClass])},[pe(i,{"is-auto-width":e.labelStyle.width==="auto","update-all":e.elForm.labelWidth==="auto"},{default:ce(()=>[e.label||e.$slots.label?(R(),H("label",{key:0,for:e.labelFor,class:"el-form-item__label",style:rt(e.labelStyle)},[Pe(e.$slots,"label",{label:e.currentLabel},()=>[Zt(ze(e.currentLabel),1)])],12,F1e)):me("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),K("div",{class:"el-form-item__content",style:rt(e.contentStyle)},[Pe(e.$slots,"default"),pe(ks,{name:"el-zoom-in-top"},{default:ce(()=>[e.shouldShowError?Pe(e.$slots,"error",{key:0,error:e.validateMessage},()=>[K("div",{class:Q(["el-form-item__error",{"el-form-item__error--inline":typeof e.inlineMessage=="boolean"?e.inlineMessage:e.elForm.inlineMessage||!1}])},ze(e.validateMessage),3)]):me("v-if",!0)]),_:3})],4)],2)}var b4=Ge(O1e,[["render",P1e]]);const L1e=Gt(n1e,{FormItem:b4}),B1e=cs(b4),z1e=yt({urlList:{type:et(Array),default:()=>As([])},zIndex:{type:Number,default:2e3},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1}}),V1e={close:()=>!0,switch:e=>typeof e=="number"},Vf={CONTAIN:{name:"contain",icon:Hh(Ore)},ORIGINAL:{name:"original",icon:Hh(Lie)}},W1e=uP()?"DOMMouseScroll":"mousewheel",H1e=$e({name:"ElImageViewer",components:{ElIcon:Pt,Close:ki,ArrowLeft:pc,ArrowRight:ei,ZoomOut:Eae,ZoomIn:RP,RefreshLeft:Iie,RefreshRight:Die},props:z1e,emits:V1e,setup(e,{emit:t}){const{t:n}=Tn(),s=Mt("image-viewer"),o=V(),r=V([]),i=Y9(),a=V(!0),l=V(e.initialIndex),u=V(Vf.CONTAIN),c=V({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),d=O(()=>{const{urlList:_}=e;return _.length<=1}),f=O(()=>l.value===0),h=O(()=>l.value===e.urlList.length-1),p=O(()=>e.urlList[l.value]),g=O(()=>{const{scale:_,deg:N,offsetX:D,offsetY:F,enableTransition:P}=c.value;let M=D/_,B=F/_;switch(N%360){case 90:case-270:[M,B]=[B,-M];break;case 180:case-180:[M,B]=[-M,-B];break;case 270:case-90:[M,B]=[-B,M];break}const j={transform:`scale(${_}) rotate(${N}deg) translate(${M}px, ${B}px)`,transition:P?"transform .3s":""};return u.value.name===Vf.CONTAIN.name&&(j.maxWidth=j.maxHeight="100%"),j});function m(){b(),t("close")}function v(){const _=Tw(D=>{switch(D.code){case tt.esc:m();break;case tt.space:x();break;case tt.left:S();break;case tt.up:I("zoomIn");break;case tt.right:T();break;case tt.down:I("zoomOut");break}}),N=Tw(D=>{(D.wheelDelta?D.wheelDelta:-D.detail)>0?I("zoomIn",{zoomRate:1.2,enableTransition:!1}):I("zoomOut",{zoomRate:1.2,enableTransition:!1})});i.run(()=>{Bs(document,"keydown",_),Bs(document,W1e,N)})}function b(){i.stop()}function $(){a.value=!1}function y(_){a.value=!1,_.target.alt=n("el.image.error")}function w(_){if(a.value||_.button!==0||!o.value)return;c.value.enableTransition=!1;const{offsetX:N,offsetY:D}=c.value,F=_.pageX,P=_.pageY,M=Tw(j=>{c.value=Ut(dt({},c.value),{offsetX:N+j.pageX-F,offsetY:D+j.pageY-P})}),B=Bs(document,"mousemove",M);Bs(document,"mouseup",()=>{B()}),_.preventDefault()}function C(){c.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function x(){if(a.value)return;const _=Object.keys(Vf),N=Object.values(Vf),D=u.value.name,P=(N.findIndex(M=>M.name===D)+1)%_.length;u.value=Vf[_[P]],C()}function S(){if(f.value&&!e.infinite)return;const _=e.urlList.length;l.value=(l.value-1+_)%_}function T(){if(h.value&&!e.infinite)return;const _=e.urlList.length;l.value=(l.value+1)%_}function I(_,N={}){if(a.value)return;const{zoomRate:D,rotateDeg:F,enableTransition:P}=dt({zoomRate:1.4,rotateDeg:90,enableTransition:!0},N);switch(_){case"zoomOut":c.value.scale>.2&&(c.value.scale=parseFloat((c.value.scale/D).toFixed(3)));break;case"zoomIn":c.value.scale<7&&(c.value.scale=parseFloat((c.value.scale*D).toFixed(3)));break;case"clockwise":c.value.deg+=F;break;case"anticlockwise":c.value.deg-=F;break}c.value.enableTransition=P}return Le(p,()=>{ft(()=>{const _=r.value[0];(_==null?void 0:_.complete)||(a.value=!0)})}),Le(l,_=>{C(),t("switch",_)}),Ft(()=>{var _,N;v(),(N=(_=o.value)==null?void 0:_.focus)==null||N.call(_)}),{index:l,wrapper:o,imgRefs:r,isSingle:d,isFirst:f,isLast:h,currentImg:p,imgStyle:g,mode:u,handleActions:I,prev:S,next:T,hide:m,toggleMode:x,handleImgLoad:$,handleImgError:y,handleMouseDown:w,ns:s}}}),U1e=["src"];function j1e(e,t,n,s,o,r){const i=de("close"),a=de("el-icon"),l=de("arrow-left"),u=de("arrow-right"),c=de("zoom-out"),d=de("zoom-in"),f=de("refresh-left"),h=de("refresh-right");return R(),ke(ks,{name:"viewer-fade"},{default:ce(()=>[K("div",{ref:"wrapper",tabindex:-1,class:Q(e.ns.e("wrapper")),style:rt({zIndex:e.zIndex})},[K("div",{class:Q(e.ns.e("mask")),onClick:t[0]||(t[0]=gt(p=>e.hideOnClickModal&&e.hide(),["self"]))},null,2),me(" CLOSE "),K("span",{class:Q([e.ns.e("btn"),e.ns.e("close")]),onClick:t[1]||(t[1]=(...p)=>e.hide&&e.hide(...p))},[pe(a,null,{default:ce(()=>[pe(i)]),_:1})],2),me(" ARROW "),e.isSingle?me("v-if",!0):(R(),H(ct,{key:0},[K("span",{class:Q([e.ns.e("btn"),e.ns.e("prev"),e.ns.is("disabled",!e.infinite&&e.isFirst)]),onClick:t[2]||(t[2]=(...p)=>e.prev&&e.prev(...p))},[pe(a,null,{default:ce(()=>[pe(l)]),_:1})],2),K("span",{class:Q([e.ns.e("btn"),e.ns.e("next"),e.ns.is("disabled",!e.infinite&&e.isLast)]),onClick:t[3]||(t[3]=(...p)=>e.next&&e.next(...p))},[pe(a,null,{default:ce(()=>[pe(u)]),_:1})],2)],64)),me(" ACTIONS "),K("div",{class:Q([e.ns.e("btn"),e.ns.e("actions")])},[K("div",{class:Q(e.ns.e("actions__inner"))},[pe(a,{onClick:t[4]||(t[4]=p=>e.handleActions("zoomOut"))},{default:ce(()=>[pe(c)]),_:1}),pe(a,{onClick:t[5]||(t[5]=p=>e.handleActions("zoomIn"))},{default:ce(()=>[pe(d)]),_:1}),K("i",{class:Q(e.ns.e("actions__divider"))},null,2),pe(a,{onClick:e.toggleMode},{default:ce(()=>[(R(),ke(on(e.mode.icon)))]),_:1},8,["onClick"]),K("i",{class:Q(e.ns.e("actions__divider"))},null,2),pe(a,{onClick:t[6]||(t[6]=p=>e.handleActions("anticlockwise"))},{default:ce(()=>[pe(f)]),_:1}),pe(a,{onClick:t[7]||(t[7]=p=>e.handleActions("clockwise"))},{default:ce(()=>[pe(h)]),_:1})],2)],2),me(" CANVAS "),K("div",{class:Q(e.ns.e("canvas"))},[(R(!0),H(ct,null,en(e.urlList,(p,g)=>Ct((R(),H("img",{ref_for:!0,ref:m=>e.imgRefs[g]=m,key:p,src:p,style:rt(e.imgStyle),class:Q(e.ns.e("img")),onLoad:t[8]||(t[8]=(...m)=>e.handleImgLoad&&e.handleImgLoad(...m)),onError:t[9]||(t[9]=(...m)=>e.handleImgError&&e.handleImgError(...m)),onMousedown:t[10]||(t[10]=(...m)=>e.handleMouseDown&&e.handleMouseDown(...m))},null,46,U1e)),[[sn,g===e.index]])),128))],2),Pe(e.$slots,"default")],6)]),_:3})}var G1e=Ge(H1e,[["render",j1e]]);const y4=Gt(G1e),K1e=yt({appendToBody:{type:Boolean,default:!1},hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:et([String,Object])},previewSrcList:{type:et(Array),default:()=>As([])},zIndex:{type:Number,default:2e3},initialIndex:{type:Number,default:0}}),q1e={error:e=>e instanceof Event,switch:e=>Sn(e),close:()=>!0},Y1e=e=>e&&e.nodeType===Node.ELEMENT_NODE;let jA="";const X1e=$e({name:"ElImage",components:{ImageViewer:y4},inheritAttrs:!1,props:K1e,emits:q1e,setup(e,{emit:t,attrs:n}){const{t:s}=Tn(),o=Mt("image"),r=E2(),i=V(!1),a=V(!0),l=V(0),u=V(0),c=V(!1),d=V(),f=V();let h,p;const g=O(()=>n.style),m=O(()=>{const{fit:F}=e;return Jt&&F?{objectFit:F}:{}}),v=O(()=>{const{previewSrcList:F}=e;return Array.isArray(F)&&F.length>0}),b=O(()=>{const{previewSrcList:F,initialIndex:P}=e;let M=P;return P>F.length-1&&(M=0),M}),$=()=>{if(!Jt)return;a.value=!0,i.value=!1;const F=new Image,P=e.src;F.addEventListener("load",M=>{P===e.src&&y(M,F)}),F.addEventListener("error",M=>{P===e.src&&w(M)}),Object.entries(r.value).forEach(([M,B])=>{M.toLowerCase()!=="onload"&&F.setAttribute(M,B)}),F.src=P};function y(F,P){l.value=P.width,u.value=P.height,a.value=!1,i.value=!1}function w(F){a.value=!1,i.value=!0,t("error",F)}function C(){Zne(d.value,f.value)&&($(),T())}const x=lP(C,200);async function S(){var F;if(!Jt)return;await ft();const{scrollContainer:P}=e;Y1e(P)?f.value=P:Qt(P)&&P!==""?f.value=(F=document.querySelector(P))!=null?F:void 0:d.value&&(f.value=z2(d.value)),f.value&&(h=Bs(f,"scroll",x),setTimeout(()=>C(),100))}function T(){!Jt||!f.value||!x||(h(),f.value=void 0)}function I(F){if(!!F.ctrlKey){if(F.deltaY<0)return F.preventDefault(),!1;if(F.deltaY>0)return F.preventDefault(),!1}}function _(){!v.value||(p=Bs("wheel",I,{passive:!1}),jA=document.body.style.overflow,document.body.style.overflow="hidden",c.value=!0)}function N(){p==null||p(),document.body.style.overflow=jA,c.value=!1,t("close")}function D(F){t("switch",F)}return Le(()=>e.src,()=>{e.lazy?(a.value=!0,i.value=!1,T(),S()):$()}),Ft(()=>{e.lazy?S():$()}),{attrs:r,loading:a,hasLoadError:i,showViewer:c,containerStyle:g,imageStyle:m,preview:v,imageIndex:b,container:d,ns:o,clickHandler:_,closeViewer:N,switchViewer:D,t:s}}}),Z1e=["src"],J1e={key:0};function Q1e(e,t,n,s,o,r){const i=de("image-viewer");return R(),H("div",{ref:"container",class:Q([e.ns.b(),e.$attrs.class]),style:rt(e.containerStyle)},[e.loading?Pe(e.$slots,"placeholder",{key:0},()=>[K("div",{class:Q(e.ns.e("placeholder"))},null,2)]):e.hasLoadError?Pe(e.$slots,"error",{key:1},()=>[K("div",{class:Q(e.ns.e("error"))},ze(e.t("el.image.error")),3)]):(R(),H("img",uo({key:2},e.attrs,{src:e.src,style:e.imageStyle,class:[e.ns.e("inner"),e.preview?e.ns.e("preview"):""],onClick:t[0]||(t[0]=(...a)=>e.clickHandler&&e.clickHandler(...a))}),null,16,Z1e)),(R(),ke(wb,{to:"body",disabled:!e.appendToBody},[e.preview?(R(),H(ct,{key:0},[e.showViewer?(R(),ke(i,{key:0,"z-index":e.zIndex,"initial-index":e.imageIndex,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,onClose:e.closeViewer,onSwitch:e.switchViewer},{default:ce(()=>[e.$slots.viewer?(R(),H("div",J1e,[Pe(e.$slots,"viewer")])):me("v-if",!0)]),_:3},8,["z-index","initial-index","url-list","hide-on-click-modal","onClose","onSwitch"])):me("v-if",!0)],2112)):me("v-if",!0)],8,["disabled"]))],6)}var ewe=Ge(X1e,[["render",Q1e]]);const twe=Gt(ewe),nwe=yt({step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},modelValue:{type:Number},disabled:{type:Boolean,default:!1},size:{type:String,values:T2},controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===parseInt(`${e}`,10)}}),swe={change:(e,t)=>e!==t,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,input:e=>Sn(e),"update:modelValue":e=>Sn(e)||e===void 0},owe=$e({name:"ElInputNumber",components:{ElInput:ti,ElIcon:Pt,ArrowUp:zp,ArrowDown:hc,Plus:NP,Minus:Zre},directives:{RepeatClick:OP},props:nwe,emits:swe,setup(e,{emit:t}){const n=V(),s=En({currentValue:e.modelValue,userInput:null}),{formItem:o}=cf(),r=Mt("input-number"),i=O(()=>m(e.modelValue)<e.min),a=O(()=>g(e.modelValue)>e.max),l=O(()=>{const I=p(e.step);return e.precision!==void 0?(I>e.precision,e.precision):Math.max(p(e.modelValue),I)}),u=O(()=>e.controls&&e.controlsPosition==="right"),c=Ss(),d=Bp(),f=O(()=>{if(s.userInput!==null)return s.userInput;let I=s.currentValue;if(Sn(I)){if(Number.isNaN(I))return"";e.precision!==void 0&&(I=I.toFixed(e.precision))}return I}),h=(I,_)=>(_===void 0&&(_=l.value),parseFloat(`${Math.round(I*Math.pow(10,_))/Math.pow(10,_)}`)),p=I=>{if(I===void 0)return 0;const _=I.toString(),N=_.indexOf(".");let D=0;return N!==-1&&(D=_.length-N-1),D},g=I=>{if(!Sn(I))return s.currentValue;const _=Math.pow(10,l.value);return I=Sn(I)?I:NaN,h((_*I+_*e.step)/_)},m=I=>{if(!Sn(I))return s.currentValue;const _=Math.pow(10,l.value);return I=Sn(I)?I:NaN,h((_*I-_*e.step)/_)},v=()=>{if(d.value||a.value)return;const I=e.modelValue||0,_=g(I);$(_)},b=()=>{if(d.value||i.value)return;const I=e.modelValue||0,_=m(I);$(_)},$=I=>{var _;const N=s.currentValue;typeof I=="number"&&e.precision!==void 0&&(I=h(I,e.precision)),I!==void 0&&I>=e.max&&(I=e.max),I!==void 0&&I<=e.min&&(I=e.min),N!==I&&(Sn(I)||(I=void 0),s.userInput=null,t("update:modelValue",I),t("input",I),t("change",I,N),(_=o==null?void 0:o.validate)==null||_.call(o,"change"),s.currentValue=I)},y=I=>s.userInput=I,w=I=>{const _=I!==""?Number(I):"";(Sn(_)&&!Number.isNaN(_)||I==="")&&$(_),s.userInput=null},C=()=>{var I,_;(_=(I=n.value)==null?void 0:I.focus)==null||_.call(I)},x=()=>{var I,_;(_=(I=n.value)==null?void 0:I.blur)==null||_.call(I)},S=I=>{t("focus",I)},T=I=>{var _;t("blur",I),(_=o==null?void 0:o.validate)==null||_.call(o,"blur")};return Le(()=>e.modelValue,I=>{let _=Number(I);if(I===null&&(_=Number.NaN),!isNaN(_)){if(e.stepStrictly){const N=p(e.step),D=Math.pow(10,N);_=Math.round(_/e.step)*D*e.step/D}e.precision!==void 0&&(_=h(_,e.precision)),_>e.max&&(_=e.max,t("update:modelValue",_)),_<e.min&&(_=e.min,t("update:modelValue",_))}s.currentValue=_,s.userInput=null},{immediate:!0}),Ft(()=>{var I;const _=(I=n.value)==null?void 0:I.input;if(_.setAttribute("role","spinbutton"),_.setAttribute("aria-valuemax",String(e.max)),_.setAttribute("aria-valuemin",String(e.min)),_.setAttribute("aria-valuenow",String(s.currentValue)),_.setAttribute("aria-disabled",String(d.value)),!Sn(e.modelValue)){let N=Number(e.modelValue);isNaN(N)&&(N=void 0),t("update:modelValue",N)}}),Ni(()=>{var I;((I=n.value)==null?void 0:I.input).setAttribute("aria-valuenow",s.currentValue)}),{input:n,displayValue:f,handleInput:y,handleInputChange:w,controlsAtRight:u,decrease:b,increase:v,inputNumberSize:c,inputNumberDisabled:d,maxDisabled:a,minDisabled:i,focus:C,blur:x,handleFocus:S,handleBlur:T,ns:r}}});function rwe(e,t,n,s,o,r){const i=de("arrow-down"),a=de("minus"),l=de("el-icon"),u=de("arrow-up"),c=de("plus"),d=de("el-input"),f=Wo("repeat-click");return R(),H("div",{class:Q([e.ns.b(),e.ns.m(e.inputNumberSize),e.ns.is("disabled",e.inputNumberDisabled),e.ns.is("without-controls",!e.controls),e.ns.is("controls-right",e.controlsAtRight)]),onDragstart:t[2]||(t[2]=gt(()=>{},["prevent"]))},[e.controls?Ct((R(),H("span",{key:0,role:"button",class:Q([e.ns.e("decrease"),e.ns.is("disabled",e.minDisabled)]),onKeydown:t[0]||(t[0]=qt((...h)=>e.decrease&&e.decrease(...h),["enter"]))},[pe(l,null,{default:ce(()=>[e.controlsAtRight?(R(),ke(i,{key:0})):(R(),ke(a,{key:1}))]),_:1})],34)),[[f,e.decrease]]):me("v-if",!0),e.controls?Ct((R(),H("span",{key:1,role:"button",class:Q([e.ns.e("increase"),e.ns.is("disabled",e.maxDisabled)]),onKeydown:t[1]||(t[1]=qt((...h)=>e.increase&&e.increase(...h),["enter"]))},[pe(l,null,{default:ce(()=>[e.controlsAtRight?(R(),ke(u,{key:0})):(R(),ke(c,{key:1}))]),_:1})],34)),[[f,e.increase]]):me("v-if",!0),pe(d,{ref:"input",type:"number",step:e.step,"model-value":e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[qt(gt(e.increase,["prevent"]),["up"]),qt(gt(e.decrease,["prevent"]),["down"])],onBlur:e.handleBlur,onFocus:e.handleFocus,onInput:e.handleInput,onChange:e.handleInputChange},null,8,["step","model-value","placeholder","disabled","size","max","min","name","label","onKeydown","onBlur","onFocus","onInput","onChange"])],34)}var iwe=Ge(owe,[["render",rwe]]);const w4=Gt(iwe),awe=yt({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:et([String,Object]),default:""}}),lwe={click:e=>e instanceof MouseEvent},uwe=$e({name:"ElLink",components:{ElIcon:Pt},props:awe,emits:lwe,setup(e,{emit:t}){const n=Mt("link");function s(o){e.disabled||t("click",o)}return{ns:n,handleClick:s}}}),cwe=["href"];function dwe(e,t,n,s,o,r){const i=de("el-icon");return R(),H("a",{class:Q([e.ns.b(),e.type?e.ns.m(e.type):"",e.ns.is("disabled",e.disabled),e.ns.is("underline",e.underline&&!e.disabled)]),href:e.disabled||!e.href?void 0:e.href,onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},[e.icon?(R(),ke(i,{key:0},{default:ce(()=>[(R(),ke(on(e.icon)))]),_:1})):me("v-if",!0),e.$slots.default?(R(),H("span",{key:1,class:Q(e.ns.m("inner"))},[Pe(e.$slots,"default")],2)):me("v-if",!0),e.$slots.icon?Pe(e.$slots,"icon",{key:2}):me("v-if",!0)],10,cwe)}var fwe=Ge(uwe,[["render",dwe]]);const hwe=Gt(fwe);class pwe{constructor(t,n){this.parent=t,this.domNode=n,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t}addListeners(){const t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener("keydown",s=>{let o=!1;switch(s.code){case tt.down:{this.gotoSubIndex(this.subIndex+1),o=!0;break}case tt.up:{this.gotoSubIndex(this.subIndex-1),o=!0;break}case tt.tab:{Nv(t,"mouseleave");break}case tt.enter:case tt.space:{o=!0,s.currentTarget.click();break}}return o&&(s.preventDefault(),s.stopPropagation()),!1})})}}class gwe{constructor(t){this.domNode=t,this.submenu=null,this.submenu=null,this.init()}init(){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(".el-menu");t&&(this.submenu=new pwe(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",t=>{let n=!1;switch(t.code){case tt.down:{Nv(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break}case tt.up:{Nv(t.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break}case tt.tab:{Nv(t.currentTarget,"mouseleave");break}case tt.enter:case tt.space:{n=!0,t.currentTarget.click();break}}n&&t.preventDefault()})}}class mwe{constructor(t){this.domNode=t,this.init()}init(){const t=this.domNode.childNodes;Array.from(t,n=>{n.nodeType===1&&new gwe(n)})}}const vwe=$e({name:"ElMenuCollapseTransition",setup(){return{listeners:{onBeforeEnter:t=>t.style.opacity="0.2",onEnter(t,n){Zo(t,"el-opacity-transition"),t.style.opacity="1",n()},onAfterEnter(t){wo(t,"el-opacity-transition"),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),yi(t,"el-menu--collapse")?(wo(t,"el-menu--collapse"),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),Zo(t,"el-menu--collapse")):(Zo(t,"el-menu--collapse"),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),wo(t,"el-menu--collapse")),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(t){Zo(t,"horizontal-collapse-transition"),t.style.width=`${t.dataset.scrollWidth}px`}}}}});function bwe(e,t,n,s,o,r){return R(),ke(ks,uo({mode:"out-in"},e.listeners),{default:ce(()=>[Pe(e.$slots,"default")]),_:3},16)}var ywe=Ge(vwe,[["render",bwe]]);function $4(e,t){const n=Qe("rootMenu");n||So("useMenu","can not inject root menu");const s=O(()=>{let i=e.parent;const a=[t.value];for(;i.type.name!=="ElMenu";)i.props.index&&a.unshift(i.props.index),i=i.parent;return a}),o=O(()=>{let i=e.parent;for(;i&&!["ElMenu","ElSubMenu"].includes(i.type.name);)i=i.parent;return i}),r=O(()=>{let i=e.parent;if(n.props.mode!=="vertical")return{};let a=20;if(n.props.collapse)a=20;else for(;i&&i.type.name!=="ElMenu";)i.type.name==="ElSubMenu"&&(a+=20),i=i.parent;return{paddingLeft:`${a}px`}});return{parentMenu:o,paddingStyle:r,indexPath:s}}function wwe(e){return O(()=>{const n=e.backgroundColor;return n?new rh(n).shade(20).toString():""})}const C4=e=>O(()=>({"--el-menu-text-color":e.textColor||"","--el-menu-hover-text-color":e.textColor||"","--el-menu-bg-color":e.backgroundColor||"","--el-menu-hover-bg-color":wwe(e).value||"","--el-menu-active-color":e.activeTextColor||""})),$we=yt({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0}}),jw="ElSubMenu";var dk=$e({name:jw,props:$we,setup(e,{slots:t,expose:n}){const s=Wt(),{paddingStyle:o,indexPath:r,parentMenu:i}=$4(s,O(()=>e.index)),a=Qe("rootMenu");a||So(jw,"can not inject root menu");const l=Qe(`subMenu:${i.value.uid}`);l||So(jw,"can not inject sub menu");const u=V({}),c=V({});let d;const f=V(!1),h=V(),p=V(null),g=O(()=>I.value==="horizontal"&&v.value?"bottom-start":"right-start"),m=O(()=>I.value==="horizontal"&&v.value||I.value==="vertical"&&!a.props.collapse?hc:ei),v=O(()=>{let j=!0,X=s.parent;for(;X&&X.type.name!=="ElMenu";)if(["ElSubMenu","ElMenuItemGroup"].includes(X.type.name)){j=!1;break}else X=X.parent;return j}),b=O(()=>e.popperAppendToBody===void 0?v.value:Boolean(e.popperAppendToBody)),$=O(()=>a.props.collapse?"el-zoom-in-left":"el-zoom-in-top"),y=O(()=>I.value==="horizontal"&&v.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","left-start","bottom-start","bottom-end","top-start","top-end"]),w=O(()=>a.openedMenus.includes(e.index)),C=O(()=>{let j=!1;return Object.values(u.value).forEach(X=>{X.active&&(j=!0)}),Object.values(c.value).forEach(X=>{X.active&&(j=!0)}),j}),x=O(()=>a.props.backgroundColor||""),S=O(()=>a.props.activeTextColor||""),T=O(()=>a.props.textColor||""),I=O(()=>a.props.mode),_=En({index:e.index,indexPath:r,active:C}),N=O(()=>I.value!=="horizontal"?{color:T.value}:{borderBottomColor:C.value?a.props.activeTextColor?S.value:"":"transparent",color:C.value?S.value:T.value}),D=()=>{var j,X,ae;return(ae=(X=(j=p.value)==null?void 0:j.popperRef)==null?void 0:X.popperInstanceRef)==null?void 0:ae.destroy()},F=j=>{j||D()},P=()=>{a.props.menuTrigger==="hover"&&a.props.mode==="horizontal"||a.props.collapse&&a.props.mode==="vertical"||e.disabled||a.handleSubMenuClick({index:e.index,indexPath:r.value,active:C.value})},M=(j,X=e.showTimeout)=>{var ae;j.type==="focus"&&!j.relatedTarget||a.props.menuTrigger==="click"&&a.props.mode==="horizontal"||!a.props.collapse&&a.props.mode==="vertical"||e.disabled||(l.mouseInChild.value=!0,d==null||d(),{stop:d}=kd(()=>{a.openMenu(e.index,r.value)},X),b.value&&((ae=i.value.vnode.el)==null||ae.dispatchEvent(new MouseEvent("mouseenter"))))},B=(j=!1)=>{var X,ae;a.props.menuTrigger==="click"&&a.props.mode==="horizontal"||!a.props.collapse&&a.props.mode==="vertical"||(d==null||d(),l.mouseInChild.value=!1,{stop:d}=kd(()=>!f.value&&a.closeMenu(e.index,r.value),e.hideTimeout),b.value&&j&&((X=s.parent)==null?void 0:X.type.name)==="ElSubMenu"&&((ae=l.handleMouseleave)==null||ae.call(l,!0)))};Le(()=>a.props.collapse,j=>F(Boolean(j)));{const j=ae=>{c.value[ae.index]=ae},X=ae=>{delete c.value[ae.index]};jt(`subMenu:${s.uid}`,{addSubMenu:j,removeSubMenu:X,handleMouseleave:B,mouseInChild:f})}return n({opened:w}),Ft(()=>{a.addSubMenu(_),l.addSubMenu(_)}),us(()=>{l.removeSubMenu(_),a.removeSubMenu(_)}),()=>{var j;const X=[(j=t.title)==null?void 0:j.call(t),Ke(Pt,{class:["el-sub-menu__icon-arrow"]},{default:()=>Ke(m.value)})],ae=C4(a.props),be=a.isMenuPopup?Ke(lr,{ref:p,visible:w.value,effect:"light",pure:!0,offset:6,showArrow:!1,persistent:!0,popperClass:e.popperClass,placement:g.value,teleported:b.value,fallbackPlacements:y.value,transition:$.value,gpuAcceleration:!1},{content:()=>{var ie;return Ke("div",{class:[`el-menu--${I.value}`,e.popperClass],onMouseenter:ye=>M(ye,100),onMouseleave:()=>B(!0),onFocus:ye=>M(ye,100)},[Ke("ul",{class:["el-menu el-menu--popup",`el-menu--popup-${g.value}`],style:ae.value},[(ie=t.default)==null?void 0:ie.call(t)])])},default:()=>Ke("div",{class:"el-sub-menu__title",style:[o.value,N.value,{backgroundColor:x.value}],onClick:P},X)}):Ke(ct,{},[Ke("div",{class:"el-sub-menu__title",style:[o.value,N.value,{backgroundColor:x.value}],ref:h,onClick:P},X),Ke(Lb,{},{default:()=>{var ie;return Ct(Ke("ul",{role:"menu",class:"el-menu el-menu--inline",style:ae.value},[(ie=t.default)==null?void 0:ie.call(t)]),[[sn,w.value]])}})]);return Ke("li",{class:["el-sub-menu",{"is-active":C.value,"is-opened":w.value,"is-disabled":e.disabled}],role:"menuitem",ariaHaspopup:!0,ariaExpanded:w.value,onMouseenter:M,onMouseleave:()=>B(!0),onFocus:M},[be])}}});const Cwe=yt({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:et(Array),default:()=>As([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0}}),Gw=e=>Array.isArray(e)&&e.every(t=>Qt(t)),xwe={close:(e,t)=>Qt(e)&&Gw(t),open:(e,t)=>Qt(e)&&Gw(t),select:(e,t,n,s)=>Qt(e)&&Gw(t)&&cn(n)&&(s===void 0||s instanceof Promise)};var kwe=$e({name:"ElMenu",props:Cwe,emits:xwe,setup(e,{emit:t,slots:n,expose:s}){const o=Wt(),r=o.appContext.config.globalProperties.$router,i=V(),a=V(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),l=V(e.defaultActive),u=V({}),c=V({}),d=V(!1),f=O(()=>e.mode==="horizontal"||e.mode==="vertical"&&e.collapse),h=()=>{const C=l.value&&u.value[l.value];if(!C||e.mode==="horizontal"||e.collapse)return;C.indexPath.forEach(S=>{const T=c.value[S];T&&p(S,T.indexPath)})},p=(C,x)=>{a.value.includes(C)||(e.uniqueOpened&&(a.value=a.value.filter(S=>x.includes(S))),a.value.push(C),t("open",C,x))},g=(C,x)=>{const S=a.value.indexOf(C);S!==-1&&a.value.splice(S,1),t("close",C,x)},m=({index:C,indexPath:x})=>{a.value.includes(C)?g(C,x):p(C,x)},v=C=>{(e.mode==="horizontal"||e.collapse)&&(a.value=[]);const{index:x,indexPath:S}=C;if(!(x===void 0||S===void 0))if(e.router&&r){const T=C.route||x,I=r.push(T).then(_=>(_||(l.value=x),_));t("select",x,S,{index:x,indexPath:S,route:T},I)}else l.value=x,t("select",x,S,{index:x,indexPath:S})},b=C=>{const x=u.value,S=x[C]||l.value&&x[l.value]||x[e.defaultActive];S?(l.value=S.index,h()):d.value?d.value=!1:l.value=void 0},$=()=>{ft(()=>o.proxy.$forceUpdate())};Le(()=>e.defaultActive,C=>{u.value[C]||(l.value=""),b(C)}),Le(u.value,()=>h()),Le(()=>e.collapse,(C,x)=>{C!==x&&(d.value=!0),C&&(a.value=[])});{const C=I=>{c.value[I.index]=I},x=I=>{delete c.value[I.index]};jt("rootMenu",En({props:e,openedMenus:a,items:u,subMenus:c,activeIndex:l,isMenuPopup:f,addMenuItem:I=>{u.value[I.index]=I},removeMenuItem:I=>{delete u.value[I.index]},addSubMenu:C,removeSubMenu:x,openMenu:p,closeMenu:g,handleMenuItemClick:v,handleSubMenuClick:m})),jt(`subMenu:${o.uid}`,{addSubMenu:C,removeSubMenu:x,mouseInChild:V(!1)})}Ft(()=>{h(),e.mode==="horizontal"&&new mwe(o.vnode.el)}),s({open:x=>{const{indexPath:S}=c.value[x];S.forEach(T=>p(T,S))},close:g,handleResize:$});const y=C=>{const x=Array.isArray(C)?C:[C],S=[];return x.forEach(T=>{Array.isArray(T.children)?S.push(...y(T.children)):S.push(T)}),S},w=C=>e.mode==="horizontal"?Ct(C,[[hle,$]]):C;return()=>{var C,x,S,T;let I=(x=(C=n.default)==null?void 0:C.call(n))!=null?x:[];const _=[];if(e.mode==="horizontal"&&i.value){const P=Array.from((T=(S=i.value)==null?void 0:S.childNodes)!=null?T:[]).filter(Z=>Z.nodeName!=="#text"||Z.nodeValue),M=y(I),B=64,j=parseInt(getComputedStyle(i.value).paddingLeft,10),X=parseInt(getComputedStyle(i.value).paddingRight,10),ae=i.value.clientWidth-j-X;let be=0,ie=0;P.forEach((Z,ee)=>{be+=Z.offsetWidth||0,be<=ae-B&&(ie=ee+1)});const ye=M.slice(0,ie),ue=M.slice(ie);(ue==null?void 0:ue.length)&&e.ellipsis&&(I=ye,_.push(Ke(dk,{index:"sub-menu-more",class:"el-sub-menu__hide-arrow"},{title:()=>Ke(Pt,{class:["el-sub-menu__icon-more"]},{default:()=>Ke(uie)}),default:()=>ue})))}const N=C4(e),D=P=>e.ellipsis?w(P):P,F=D(Ke("ul",{key:String(e.collapse),role:"menubar",ref:i,style:N.value,class:{"el-menu":!0,"el-menu--horizontal":e.mode==="horizontal","el-menu--collapse":e.collapse}},[...I.map(P=>D(P)),..._]));return e.collapseTransition&&e.mode==="vertical"?Ke(ywe,()=>F):F}}});const Swe=yt({index:{type:et([String,null]),default:null},route:{type:et([String,Object])},disabled:Boolean}),Iwe={click:e=>Qt(e.index)&&Array.isArray(e.indexPath)},Kw="ElMenuItem",Ewe=$e({name:Kw,components:{ElTooltip:lr},props:Swe,emits:Iwe,setup(e,{emit:t}){const n=Wt(),s=Qe("rootMenu");s||So(Kw,"can not inject root menu");const{parentMenu:o,paddingStyle:r,indexPath:i}=$4(n,yo(e,"index")),a=Qe(`subMenu:${o.value.uid}`);a||So(Kw,"can not inject sub menu");const l=O(()=>e.index===s.activeIndex),u=En({index:e.index,indexPath:i,active:l}),c=()=>{e.disabled||(s.handleMenuItemClick({index:e.index,indexPath:i.value,route:e.route}),t("click",u))};return Ft(()=>{a.addSubMenu(u),s.addMenuItem(u)}),us(()=>{a.removeSubMenu(u),s.removeMenuItem(u)}),{Effect:eL,parentMenu:o,rootMenu:s,paddingStyle:r,active:l,handleClick:c}}}),Twe={style:{position:"absolute",left:0,top:0,height:"100%",width:"100%",display:"inline-block",boxSizing:"border-box",padding:"0 20px"}};function _we(e,t,n,s,o,r){const i=de("el-tooltip");return R(),H("li",{class:Q(["el-menu-item",{"is-active":e.active,"is-disabled":e.disabled}]),role:"menuitem",tabindex:"-1",style:rt(e.paddingStyle),onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},[e.parentMenu.type.name==="ElMenu"&&e.rootMenu.props.collapse&&e.$slots.title?(R(),ke(i,{key:0,effect:e.Effect.DARK,placement:"right",persistent:""},{content:ce(()=>[Pe(e.$slots,"title")]),default:ce(()=>[K("div",Twe,[Pe(e.$slots,"default")])]),_:3},8,["effect"])):(R(),H(ct,{key:1},[Pe(e.$slots,"default"),Pe(e.$slots,"title")],64))],6)}var x4=Ge(Ewe,[["render",_we]]);const Nwe={title:String},GA="ElMenuItemGroup",Awe=$e({name:GA,props:Nwe,setup(){const e=Wt(),t=Qe("rootMenu");return t||So(GA,"can not inject root menu"),{levelPadding:O(()=>{if(t.props.collapse)return 20;let s=20,o=e.parent;for(;o&&o.type.name!=="ElMenu";)o.type.name==="ElSubMenu"&&(s+=20),o=o.parent;return s})}}}),Dwe={class:"el-menu-item-group"};function Rwe(e,t,n,s,o,r){return R(),H("li",Dwe,[K("div",{class:"el-menu-item-group__title",style:rt({paddingLeft:`${e.levelPadding}px`})},[e.$slots.title?Pe(e.$slots,"title",{key:1}):(R(),H(ct,{key:0},[Zt(ze(e.title),1)],2112))],4),K("ul",null,[Pe(e.$slots,"default")])])}var k4=Ge(Awe,[["render",Rwe]]);const Mwe=Gt(kwe,{MenuItem:x4,MenuItemGroup:k4,SubMenu:dk}),Owe=cs(x4),Fwe=cs(k4);cs(dk);const Pwe={icon:{type:[String,Object],default:ooe},title:String,content:{type:String,default:""}},Lwe={back:()=>!0},Bwe=$e({name:"ElPageHeader",components:{ElIcon:Pt},props:Pwe,emits:Lwe,setup(e,{emit:t}){const{t:n}=Tn();function s(){t("back")}return{handleClick:s,t:n}}}),zwe={class:"el-page-header"},Vwe={key:0,class:"el-page-header__icon"},Wwe={class:"el-page-header__title"},Hwe={class:"el-page-header__content"};function Uwe(e,t,n,s,o,r){const i=de("el-icon");return R(),H("div",zwe,[K("div",{class:"el-page-header__left",onClick:t[0]||(t[0]=(...a)=>e.handleClick&&e.handleClick(...a))},[e.icon||e.$slots.icon?(R(),H("div",Vwe,[Pe(e.$slots,"icon",{},()=>[e.icon?(R(),ke(i,{key:0},{default:ce(()=>[(R(),ke(on(e.icon)))]),_:1})):me("v-if",!0)])])):me("v-if",!0),K("div",Wwe,[Pe(e.$slots,"title",{},()=>[Zt(ze(e.title||e.t("el.pageHeader.title")),1)])])]),K("div",Hwe,[Pe(e.$slots,"content",{},()=>[Zt(ze(e.content),1)])])])}var jwe=Ge(Bwe,[["render",Uwe]]);const Gwe=Gt(jwe),Kwe={disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String,default:""}},qwe=$e({name:"ElPaginationPrev",components:{ElIcon:Pt,ArrowLeft:pc},props:Kwe,emits:["click"],setup(e){return{internalDisabled:O(()=>e.disabled||e.currentPage<=1)}}}),Ywe=["disabled","aria-disabled"],Xwe={key:0};function Zwe(e,t,n,s,o,r){const i=de("arrow-left"),a=de("el-icon");return R(),H("button",{type:"button",class:"btn-prev",disabled:e.internalDisabled,"aria-disabled":e.internalDisabled,onClick:t[0]||(t[0]=l=>e.$emit("click",l))},[e.prevText?(R(),H("span",Xwe,ze(e.prevText),1)):(R(),ke(a,{key:1},{default:ce(()=>[pe(i)]),_:1}))],8,Ywe)}var Jwe=Ge(qwe,[["render",Zwe]]);const Qwe={disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String,default:""}},e$e=$e({name:"ElPaginationNext",components:{ElIcon:Pt,ArrowRight:ei},props:Qwe,emits:["click"],setup(e){return{internalDisabled:O(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0)}}}),t$e=["disabled","aria-disabled"],n$e={key:0};function s$e(e,t,n,s,o,r){const i=de("arrow-right"),a=de("el-icon");return R(),H("button",{type:"button",class:"btn-next",disabled:e.internalDisabled,"aria-disabled":e.internalDisabled,onClick:t[0]||(t[0]=l=>e.$emit("click",l))},[e.nextText?(R(),H("span",n$e,ze(e.nextText),1)):(R(),ke(a,{key:1},{default:ce(()=>[pe(i)]),_:1}))],8,t$e)}var o$e=Ge(e$e,[["render",s$e]]);const S4="ElSelectGroup",Bb="ElSelect";function r$e(e,t){const n=Qe(Bb),s=Qe(S4,{disabled:!1}),o=O(()=>Object.prototype.toString.call(e.value).toLowerCase()==="[object object]"),r=O(()=>n.props.multiple?d(n.props.modelValue,e.value):f(e.value,n.props.modelValue)),i=O(()=>{if(n.props.multiple){const g=n.props.modelValue||[];return!r.value&&g.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),a=O(()=>e.label||(o.value?"":e.value)),l=O(()=>e.value||e.label||""),u=O(()=>e.disabled||t.groupDisabled||i.value),c=Wt(),d=(g=[],m)=>{if(o.value){const v=n.props.valueKey;return g&&g.some(b=>Ps(b,v)===Ps(m,v))}else return g&&g.indexOf(m)>-1},f=(g,m)=>{if(o.value){const{valueKey:v}=n.props;return Ps(g,v)===Ps(m,v)}else return g===m},h=()=>{!e.disabled&&!s.disabled&&(n.hoverIndex=n.optionsArray.indexOf(c.proxy))};Le(()=>a.value,()=>{!e.created&&!n.props.remote&&n.setSelected()}),Le(()=>e.value,(g,m)=>{const{remote:v,valueKey:b}=n.props;if(!e.created&&!v){if(b&&typeof g=="object"&&typeof m=="object"&&g[b]===m[b])return;n.setSelected()}}),Le(()=>s.disabled,()=>{t.groupDisabled=s.disabled},{immediate:!0});const{queryChange:p}=xn(n);return Le(p,g=>{const{query:m}=Xe(g),v=new RegExp(Kte(m),"i");t.visible=v.test(a.value)||e.created,t.visible||n.filteredOptionsCount--}),{select:n,currentLabel:a,currentValue:l,itemSelected:r,isDisabled:u,hoverItem:h}}const i$e=$e({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(e){const t=En({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:n,itemSelected:s,isDisabled:o,select:r,hoverItem:i}=r$e(e,t),{visible:a,hover:l}=ko(t),u=Wt().proxy,c=u.value;r.onOptionCreate(u),us(()=>{const{selected:f}=r,h=r.props.multiple?f:[f],p=r.cachedOptions.has(c),g=h.some(m=>m.value===u.value);p&&!g&&r.cachedOptions.delete(c),r.onOptionDestroy(c)});function d(){e.disabled!==!0&&t.groupDisabled!==!0&&r.handleOptionSelect(u,!0)}return{currentLabel:n,itemSelected:s,isDisabled:o,select:r,hoverItem:i,visible:a,hover:l,selectOptionClick:d,states:t}}});function a$e(e,t,n,s,o,r){return Ct((R(),H("li",{class:Q(["el-select-dropdown__item",{selected:e.itemSelected,"is-disabled":e.isDisabled,hover:e.hover}]),onMouseenter:t[0]||(t[0]=(...i)=>e.hoverItem&&e.hoverItem(...i)),onClick:t[1]||(t[1]=gt((...i)=>e.selectOptionClick&&e.selectOptionClick(...i),["stop"]))},[Pe(e.$slots,"default",{},()=>[K("span",null,ze(e.currentLabel),1)])],34)),[[sn,e.visible]])}var fk=Ge(i$e,[["render",a$e]]);const l$e=$e({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=Qe(Bb),t=O(()=>e.props.popperClass),n=O(()=>e.props.multiple),s=O(()=>e.props.fitInputWidth),o=V("");function r(){var i;o.value=`${(i=e.selectWrapper)==null?void 0:i.getBoundingClientRect().width}px`}return Ft(()=>{r(),Al(e.selectWrapper,r)}),us(()=>{Dl(e.selectWrapper,r)}),{minWidth:o,popperClass:t,isMultiple:n,isFitInputWidth:s}}});function u$e(e,t,n,s,o,r){return R(),H("div",{class:Q(["el-select-dropdown",[{"is-multiple":e.isMultiple},e.popperClass]]),style:rt({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[Pe(e.$slots,"default")],6)}var c$e=Ge(l$e,[["render",u$e]]);function d$e(e){const{t}=Tn();return En({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:e.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:t("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1,prefixWidth:0,tagInMultiLine:!1})}const f$e=(e,t,n)=>{const{t:s}=Tn(),o=V(null),r=V(null),i=V(null),a=V(null),l=V(null),u=V(null),c=V(-1),d=bo({query:""}),f=bo(""),h=Qe(ar,{}),p=Qe(Ai,{}),g=O(()=>!e.filterable||e.multiple||!t.visible),m=O(()=>e.disabled||h.disabled),v=O(()=>{const k=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!=="";return e.clearable&&!m.value&&t.inputHovering&&k}),b=O(()=>e.remote&&e.filterable?"":e.suffixIcon),$=O(()=>b.value&&t.visible?"is-reverse":""),y=O(()=>e.remote?300:0),w=O(()=>e.loading?e.loadingText||s("el.select.loading"):e.remote&&t.query===""&&t.options.size===0?!1:e.filterable&&t.query&&t.options.size>0&&t.filteredOptionsCount===0?e.noMatchText||s("el.select.noMatch"):t.options.size===0?e.noDataText||s("el.select.noData"):null),C=O(()=>Array.from(t.options.values())),x=O(()=>Array.from(t.cachedOptions.values())),S=O(()=>{const k=C.value.filter(E=>!E.created).some(E=>E.currentLabel===t.query);return e.filterable&&e.allowCreate&&t.query!==""&&!k}),T=Ss(),I=O(()=>["small"].indexOf(T.value)>-1?"small":"default"),_=O({get(){return t.visible&&w.value!==!1},set(k){t.visible=k}});Le(()=>m.value,()=>{ft(()=>{N()})}),Le(()=>e.placeholder,k=>{t.cachedPlaceHolder=t.currentPlaceholder=k}),Le(()=>e.modelValue,(k,E)=>{var W;e.multiple&&(N(),k&&k.length>0||r.value&&t.query!==""?t.currentPlaceholder="":t.currentPlaceholder=t.cachedPlaceHolder,e.filterable&&!e.reserveKeyword&&(t.query="",D(t.query))),M(),e.filterable&&!e.multiple&&(t.inputLength=20),wi(k,E)||(W=p.validate)==null||W.call(p,"change")},{flush:"post",deep:!0}),Le(()=>t.visible,k=>{var E,W,G;k?((W=(E=i.value)==null?void 0:E.updatePopper)==null||W.call(E),e.filterable&&(t.filteredOptionsCount=t.optionsCount,t.query=e.remote?"":t.selectedLabel,e.multiple?(G=r.value)==null||G.focus():t.selectedLabel&&(t.currentPlaceholder=t.selectedLabel,t.selectedLabel=""),D(t.query),!e.multiple&&!e.remote&&(d.value.query="",Of(d),Of(f)))):(r.value&&r.value.blur(),t.query="",t.previousQuery=null,t.selectedLabel="",t.inputLength=20,t.menuVisibleOnFocus=!1,j(),ft(()=>{r.value&&r.value.value===""&&t.selected.length===0&&(t.currentPlaceholder=t.cachedPlaceHolder)}),e.multiple||(t.selected&&(e.filterable&&e.allowCreate&&t.createdSelected&&t.createdLabel?t.selectedLabel=t.createdLabel:t.selectedLabel=t.selected.currentLabel,e.filterable&&(t.query=t.selectedLabel)),e.filterable&&(t.currentPlaceholder=t.cachedPlaceHolder))),n.emit("visible-change",k)}),Le(()=>t.options.entries(),()=>{var k,E,W;if(!Jt)return;(E=(k=i.value)==null?void 0:k.updatePopper)==null||E.call(k),e.multiple&&N();const G=((W=l.value)==null?void 0:W.querySelectorAll("input"))||[];Array.from(G).indexOf(document.activeElement)===-1&&M(),e.defaultFirstOption&&(e.filterable||e.remote)&&t.filteredOptionsCount&&P()},{flush:"post"}),Le(()=>t.hoverIndex,k=>{typeof k=="number"&&k>-1&&(c.value=C.value[k]||{}),C.value.forEach(E=>{E.hover=c.value===E})});const N=()=>{e.collapseTags&&!e.filterable||ft(()=>{var k,E;if(!o.value)return;const W=o.value.$el.childNodes,G=Array.from(W).filter(ht=>ht.tagName==="INPUT")[0],he=a.value,_e=t.initialInputHeight||40;G.style.height=t.selected.length===0?`${_e}px`:`${Math.max(he?he.clientHeight+(he.clientHeight>_e?6:0):0,_e)}px`,t.tagInMultiLine=parseFloat(G.style.height)>_e,t.visible&&w.value!==!1&&((E=(k=i.value)==null?void 0:k.updatePopper)==null||E.call(k))})},D=k=>{if(!(t.previousQuery===k||t.isOnComposition)){if(t.previousQuery===null&&(typeof e.filterMethod=="function"||typeof e.remoteMethod=="function")){t.previousQuery=k;return}t.previousQuery=k,ft(()=>{var E,W;t.visible&&((W=(E=i.value)==null?void 0:E.updatePopper)==null||W.call(E))}),t.hoverIndex=-1,e.multiple&&e.filterable&&ft(()=>{const E=r.value.value.length*15+20;t.inputLength=e.collapseTags?Math.min(50,E):E,F(),N()}),e.remote&&typeof e.remoteMethod=="function"?(t.hoverIndex=-1,e.remoteMethod(k)):typeof e.filterMethod=="function"?(e.filterMethod(k),Of(f)):(t.filteredOptionsCount=t.optionsCount,d.value.query=k,Of(d),Of(f)),e.defaultFirstOption&&(e.filterable||e.remote)&&t.filteredOptionsCount&&P()}},F=()=>{t.currentPlaceholder!==""&&(t.currentPlaceholder=r.value.value?"":t.cachedPlaceHolder)},P=()=>{const k=C.value.filter(G=>G.visible&&!G.disabled&&!G.states.groupDisabled),E=k.filter(G=>G.created)[0],W=k[0];t.hoverIndex=De(C.value,E||W)},M=()=>{var k;if(!e.multiple){const W=B(e.modelValue);((k=W.props)==null?void 0:k.created)?(t.createdLabel=W.props.value,t.createdSelected=!0):t.createdSelected=!1,t.selectedLabel=W.currentLabel,t.selected=W,e.filterable&&(t.query=t.selectedLabel);return}const E=[];Array.isArray(e.modelValue)&&e.modelValue.forEach(W=>{E.push(B(W))}),t.selected=E,ft(()=>{N()})},B=k=>{let E;const W=kv(k).toLowerCase()==="object",G=kv(k).toLowerCase()==="null",he=kv(k).toLowerCase()==="undefined";for(let Dt=t.cachedOptions.size-1;Dt>=0;Dt--){const xt=x.value[Dt];if(W?Ps(xt.value,e.valueKey)===Ps(k,e.valueKey):xt.value===k){E={value:k,currentLabel:xt.currentLabel,isDisabled:xt.isDisabled};break}}if(E)return E;const ht={value:k,currentLabel:!W&&!G&&!he?k:""};return e.multiple&&(ht.hitState=!1),ht},j=()=>{setTimeout(()=>{const k=e.valueKey;e.multiple?t.selected.length>0?t.hoverIndex=Math.min.apply(null,t.selected.map(E=>C.value.findIndex(W=>Ps(W,k)===Ps(E,k)))):t.hoverIndex=-1:t.hoverIndex=C.value.findIndex(E=>st(E)===st(t.selected))},300)},X=()=>{var k,E;ae(),(E=(k=i.value)==null?void 0:k.updatePopper)==null||E.call(k),e.multiple&&N()},ae=()=>{var k;t.inputWidth=(k=o.value)==null?void 0:k.$el.getBoundingClientRect().width},be=()=>{e.filterable&&t.query!==t.selectedLabel&&(t.query=t.selectedLabel,D(t.query))},ie=nr(()=>{be()},y.value),ye=nr(k=>{D(k.target.value)},y.value),ue=k=>{wi(e.modelValue,k)||n.emit(Zs,k)},Z=k=>{if(k.target.value.length<=0&&!q()){const E=e.modelValue.slice();E.pop(),n.emit(Bt,E),ue(E)}k.target.value.length===1&&e.modelValue.length===0&&(t.currentPlaceholder=t.cachedPlaceHolder)},ee=(k,E)=>{const W=t.selected.indexOf(E);if(W>-1&&!m.value){const G=e.modelValue.slice();G.splice(W,1),n.emit(Bt,G),ue(G),n.emit("remove-tag",E.value)}k.stopPropagation()},te=k=>{k.stopPropagation();const E=e.multiple?[]:"";if(typeof E!="string")for(const W of t.selected)W.isDisabled&&E.push(W.value);n.emit(Bt,E),ue(E),t.visible=!1,n.emit("clear")},fe=(k,E)=>{var W;if(e.multiple){const G=(e.modelValue||[]).slice(),he=De(G,k.value);he>-1?G.splice(he,1):(e.multipleLimit<=0||G.length<e.multipleLimit)&&G.push(k.value),n.emit(Bt,G),ue(G),k.created&&(t.query="",D(""),t.inputLength=20),e.filterable&&((W=r.value)==null||W.focus())}else n.emit(Bt,k.value),ue(k.value),t.visible=!1;t.isSilentBlur=E,We(),!t.visible&&ft(()=>{He(k)})},De=(k=[],E)=>{if(!cn(E))return k.indexOf(E);const W=e.valueKey;let G=-1;return k.some((he,_e)=>Ps(he,W)===Ps(E,W)?(G=_e,!0):!1),G},We=()=>{t.softFocus=!0;const k=r.value||o.value;k&&(k==null||k.focus())},He=k=>{var E,W,G,he,_e;const ht=Array.isArray(k)?k[0]:k;let Dt=null;if(ht==null?void 0:ht.value){const xt=C.value.filter(zt=>zt.value===ht.value);xt.length>0&&(Dt=xt[0].$el)}if(i.value&&Dt){const xt=(he=(G=(W=(E=i.value)==null?void 0:E.popperRef)==null?void 0:W.contentRef)==null?void 0:G.querySelector)==null?void 0:he.call(G,".el-select-dropdown__wrap");xt&&TL(xt,Dt)}(_e=u.value)==null||_e.handleScroll()},Ve=k=>{t.optionsCount++,t.filteredOptionsCount++,t.options.set(k.value,k),t.cachedOptions.set(k.value,k)},Y=k=>{t.optionsCount--,t.filteredOptionsCount--,t.options.delete(k)},ne=k=>{k.code!==tt.backspace&&q(!1),t.inputLength=r.value.value.length*15+20,N()},q=k=>{if(!Array.isArray(t.selected))return;const E=t.selected[t.selected.length-1];if(!!E)return k===!0||k===!1?(E.hitState=k,k):(E.hitState=!E.hitState,E.hitState)},le=k=>{const E=k.target.value;if(k.type==="compositionend")t.isOnComposition=!1,ft(()=>D(E));else{const W=E[E.length-1]||"";t.isOnComposition=!Mb(W)}},xe=()=>{ft(()=>He(t.selected))},oe=k=>{t.softFocus?t.softFocus=!1:((e.automaticDropdown||e.filterable)&&(t.visible=!0,e.filterable&&(t.menuVisibleOnFocus=!0)),n.emit("focus",k))},Me=()=>{var k;t.visible=!1,(k=o.value)==null||k.blur()},Re=k=>{ft(()=>{t.isSilentBlur?t.isSilentBlur=!1:n.emit("blur",k)}),t.softFocus=!1},ve=k=>{te(k)},Ae=()=>{t.visible=!1},it=()=>{var k;e.automaticDropdown||m.value||(t.menuVisibleOnFocus?t.menuVisibleOnFocus=!1:t.visible=!t.visible,t.visible&&((k=r.value||o.value)==null||k.focus()))},Je=()=>{t.visible?C.value[t.hoverIndex]&&fe(C.value[t.hoverIndex],void 0):it()},st=k=>cn(k.value)?Ps(k.value,e.valueKey):k.value,vt=O(()=>C.value.filter(k=>k.visible).every(k=>k.disabled)),z=k=>{if(!t.visible){t.visible=!0;return}if(!(t.options.size===0||t.filteredOptionsCount===0)&&!t.isOnComposition&&!vt.value){k==="next"?(t.hoverIndex++,t.hoverIndex===t.options.size&&(t.hoverIndex=0)):k==="prev"&&(t.hoverIndex--,t.hoverIndex<0&&(t.hoverIndex=t.options.size-1));const E=C.value[t.hoverIndex];(E.disabled===!0||E.states.groupDisabled===!0||!E.visible)&&z(k),ft(()=>He(c.value))}};return{optionsArray:C,selectSize:T,handleResize:X,debouncedOnInputChange:ie,debouncedQueryChange:ye,deletePrevTag:Z,deleteTag:ee,deleteSelected:te,handleOptionSelect:fe,scrollToOption:He,readonly:g,resetInputHeight:N,showClose:v,iconComponent:b,iconReverse:$,showNewOption:S,collapseTagSize:I,setSelected:M,managePlaceholder:F,selectDisabled:m,emptyText:w,toggleLastOptionHitState:q,resetInputState:ne,handleComposition:le,onOptionCreate:Ve,onOptionDestroy:Y,handleMenuEnter:xe,handleFocus:oe,blur:Me,handleBlur:Re,handleClearClick:ve,handleClose:Ae,toggleMenu:it,selectOption:Je,getValueKey:st,navigateOptions:z,dropMenuVisible:_,queryChange:d,groupQueryChange:f,reference:o,input:r,tooltipRef:i,tags:a,selectWrapper:l,scrollbar:u}},h$e=$e({name:"ElSelect",componentName:"ElSelect",components:{ElInput:ti,ElSelectMenu:c$e,ElOption:fk,ElTag:Pb,ElScrollbar:Fa,ElTooltip:lr,ElIcon:Pt},directives:{ClickOutside:Nl},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:sr},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:_a},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:[String,Object],default:zp},tagType:{type:String,default:"info"}},emits:[Bt,Zs,"remove-tag","clear","visible-change","focus","blur"],setup(e,t){const{t:n}=Tn(),s=d$e(e),{optionsArray:o,selectSize:r,readonly:i,handleResize:a,collapseTagSize:l,debouncedOnInputChange:u,debouncedQueryChange:c,deletePrevTag:d,deleteTag:f,deleteSelected:h,handleOptionSelect:p,scrollToOption:g,setSelected:m,resetInputHeight:v,managePlaceholder:b,showClose:$,selectDisabled:y,iconComponent:w,iconReverse:C,showNewOption:x,emptyText:S,toggleLastOptionHitState:T,resetInputState:I,handleComposition:_,onOptionCreate:N,onOptionDestroy:D,handleMenuEnter:F,handleFocus:P,blur:M,handleBlur:B,handleClearClick:j,handleClose:X,toggleMenu:ae,selectOption:be,getValueKey:ie,navigateOptions:ye,dropMenuVisible:ue,reference:Z,input:ee,tooltipRef:te,tags:fe,selectWrapper:De,scrollbar:We,queryChange:He,groupQueryChange:Ve}=f$e(e,s,t),{focus:Y}=Xte(Z),{inputWidth:ne,selected:q,inputLength:le,filteredOptionsCount:xe,visible:oe,softFocus:Me,selectedLabel:Re,hoverIndex:ve,query:Ae,inputHovering:it,currentPlaceholder:Je,menuVisibleOnFocus:st,isOnComposition:vt,isSilentBlur:z,options:k,cachedOptions:E,optionsCount:W,prefixWidth:G,tagInMultiLine:he}=ko(s),_e=O(()=>{const xt=["el-select"],zt=Xe(r);return zt&&xt.push(`el-select--${zt}`),e.disabled&&xt.push("el-select--disabled"),xt}),ht=O(()=>({maxWidth:`${Xe(ne)-32}px`,width:"100%"}));jt(Bb,En({props:e,options:k,optionsArray:o,cachedOptions:E,optionsCount:W,filteredOptionsCount:xe,hoverIndex:ve,handleOptionSelect:p,onOptionCreate:N,onOptionDestroy:D,selectWrapper:De,selected:q,setSelected:m,queryChange:He,groupQueryChange:Ve})),Ft(()=>{if(s.cachedPlaceHolder=Je.value=e.placeholder||n("el.select.placeholder"),e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0&&(Je.value=""),Al(De.value,a),Z.value&&Z.value.$el){const xt={large:36,default:32,small:28},zt=Z.value.input;s.initialInputHeight=zt.getBoundingClientRect().height||xt[r.value]}e.remote&&e.multiple&&v(),ft(()=>{if(!!Z.value&&(Z.value.$el&&(ne.value=Z.value.$el.getBoundingClientRect().width),t.slots.prefix)){const xt=Z.value.$el.childNodes,zt=Array.from(xt).filter(ai=>ai.tagName==="INPUT")[0],ln=Z.value.$el.querySelector(".el-input__prefix");G.value=Math.max(ln.getBoundingClientRect().width+5,30),s.prefixWidth&&(zt.style.paddingLeft=`${Math.max(s.prefixWidth,30)}px`)}}),m()}),us(()=>{Dl(De.value,a)}),e.multiple&&!Array.isArray(e.modelValue)&&t.emit(Bt,[]),!e.multiple&&Array.isArray(e.modelValue)&&t.emit(Bt,"");const Dt=O(()=>{var xt,zt;return(zt=(xt=te.value)==null?void 0:xt.popperRef)==null?void 0:zt.contentRef});return{tagInMultiLine:he,prefixWidth:G,selectSize:r,readonly:i,handleResize:a,collapseTagSize:l,debouncedOnInputChange:u,debouncedQueryChange:c,deletePrevTag:d,deleteTag:f,deleteSelected:h,handleOptionSelect:p,scrollToOption:g,inputWidth:ne,selected:q,inputLength:le,filteredOptionsCount:xe,visible:oe,softFocus:Me,selectedLabel:Re,hoverIndex:ve,query:Ae,inputHovering:it,currentPlaceholder:Je,menuVisibleOnFocus:st,isOnComposition:vt,isSilentBlur:z,options:k,resetInputHeight:v,managePlaceholder:b,showClose:$,selectDisabled:y,iconComponent:w,iconReverse:C,showNewOption:x,emptyText:S,toggleLastOptionHitState:T,resetInputState:I,handleComposition:_,handleMenuEnter:F,handleFocus:P,blur:M,handleBlur:B,handleClearClick:j,handleClose:X,toggleMenu:ae,selectOption:be,getValueKey:ie,navigateOptions:ye,dropMenuVisible:ue,focus:Y,reference:Z,input:ee,tooltipRef:te,popperPaneRef:Dt,tags:fe,selectWrapper:De,scrollbar:We,wrapperKls:_e,selectTagsStyle:ht}}}),p$e={class:"select-trigger"},g$e={key:0},m$e={class:"el-select__tags-text"},v$e=["disabled","autocomplete"],b$e={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}},y$e={key:1,class:"el-select-dropdown__empty"};function w$e(e,t,n,s,o,r){const i=de("el-tag"),a=de("el-icon"),l=de("el-input"),u=de("el-option"),c=de("el-scrollbar"),d=de("el-select-menu"),f=de("el-tooltip"),h=Wo("click-outside");return Ct((R(),H("div",{ref:"selectWrapper",class:Q(e.wrapperKls),onClick:t[24]||(t[24]=gt((...p)=>e.toggleMenu&&e.toggleMenu(...p),["stop"]))},[pe(f,{ref:"tooltipRef",visible:e.dropMenuVisible,"onUpdate:visible":t[23]||(t[23]=p=>e.dropMenuVisible=p),placement:"bottom-start","append-to-body":e.popperAppendToBody,"popper-class":`el-select__popper ${e.popperClass}`,"fallback-placements":["bottom-start","top-start","right","left"],effect:"light",pure:"",trigger:"click",transition:"el-zoom-in-top","stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:"",onShow:e.handleMenuEnter},{default:ce(()=>[K("div",p$e,[e.multiple?(R(),H("div",{key:0,ref:"tags",class:"el-select__tags",style:rt(e.selectTagsStyle)},[e.collapseTags&&e.selected.length?(R(),H("span",g$e,[pe(i,{closable:!e.selectDisabled&&!e.selected[0].isDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:e.tagType,"disable-transitions":"",onClose:t[0]||(t[0]=p=>e.deleteTag(p,e.selected[0]))},{default:ce(()=>[K("span",{class:"el-select__tags-text",style:rt({maxWidth:e.inputWidth-123+"px"})},ze(e.selected[0].currentLabel),5)]),_:1},8,["closable","size","hit","type"]),e.selected.length>1?(R(),ke(i,{key:0,closable:!1,size:e.collapseTagSize,type:e.tagType,"disable-transitions":""},{default:ce(()=>[K("span",m$e,"+ "+ze(e.selected.length-1),1)]),_:1},8,["size","type"])):me("v-if",!0)])):me("v-if",!0),me(" <div> "),e.collapseTags?me("v-if",!0):(R(),ke(ks,{key:1,onAfterLeave:e.resetInputHeight},{default:ce(()=>[K("span",{style:rt({marginLeft:e.prefixWidth&&e.selected.length?`${e.prefixWidth}px`:null})},[(R(!0),H(ct,null,en(e.selected,p=>(R(),ke(i,{key:e.getValueKey(p),closable:!e.selectDisabled&&!p.isDisabled,size:e.collapseTagSize,hit:p.hitState,type:e.tagType,"disable-transitions":"",onClose:g=>e.deleteTag(g,p)},{default:ce(()=>[K("span",{class:"el-select__tags-text",style:rt({maxWidth:e.inputWidth-75+"px"})},ze(p.currentLabel),5)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],4)]),_:1},8,["onAfterLeave"])),me(" </div> "),e.filterable?Ct((R(),H("input",{key:2,ref:"input","onUpdate:modelValue":t[1]||(t[1]=p=>e.query=p),type:"text",class:Q(["el-select__input",[e.selectSize?`is-${e.selectSize}`:""]]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:rt({marginLeft:e.prefixWidth&&!e.selected.length||e.tagInMultiLine?`${e.prefixWidth}px`:null,flexGrow:"1",width:`${e.inputLength/(e.inputWidth-32)}%`,maxWidth:`${e.inputWidth-42}px`}),onFocus:t[2]||(t[2]=(...p)=>e.handleFocus&&e.handleFocus(...p)),onBlur:t[3]||(t[3]=(...p)=>e.handleBlur&&e.handleBlur(...p)),onKeyup:t[4]||(t[4]=(...p)=>e.managePlaceholder&&e.managePlaceholder(...p)),onKeydown:[t[5]||(t[5]=(...p)=>e.resetInputState&&e.resetInputState(...p)),t[6]||(t[6]=qt(gt(p=>e.navigateOptions("next"),["prevent"]),["down"])),t[7]||(t[7]=qt(gt(p=>e.navigateOptions("prev"),["prevent"]),["up"])),t[8]||(t[8]=qt(gt(p=>e.visible=!1,["stop","prevent"]),["esc"])),t[9]||(t[9]=qt(gt((...p)=>e.selectOption&&e.selectOption(...p),["stop","prevent"]),["enter"])),t[10]||(t[10]=qt((...p)=>e.deletePrevTag&&e.deletePrevTag(...p),["delete"])),t[11]||(t[11]=qt(p=>e.visible=!1,["tab"]))],onCompositionstart:t[12]||(t[12]=(...p)=>e.handleComposition&&e.handleComposition(...p)),onCompositionupdate:t[13]||(t[13]=(...p)=>e.handleComposition&&e.handleComposition(...p)),onCompositionend:t[14]||(t[14]=(...p)=>e.handleComposition&&e.handleComposition(...p)),onInput:t[15]||(t[15]=(...p)=>e.debouncedQueryChange&&e.debouncedQueryChange(...p))},null,46,v$e)),[[I2,e.query]]):me("v-if",!0)],4)):me("v-if",!0),pe(l,{id:e.id,ref:"reference",modelValue:e.selectedLabel,"onUpdate:modelValue":t[16]||(t[16]=p=>e.selectedLabel=p),type:"text",placeholder:e.currentPlaceholder,name:e.name,autocomplete:e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,class:Q({"is-focus":e.visible}),tabindex:e.multiple&&e.filterable?-1:void 0,onFocus:e.handleFocus,onBlur:e.handleBlur,onInput:e.debouncedOnInputChange,onPaste:e.debouncedOnInputChange,onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onKeydown:[t[17]||(t[17]=qt(gt(p=>e.navigateOptions("next"),["stop","prevent"]),["down"])),t[18]||(t[18]=qt(gt(p=>e.navigateOptions("prev"),["stop","prevent"]),["up"])),qt(gt(e.selectOption,["stop","prevent"]),["enter"]),t[19]||(t[19]=qt(gt(p=>e.visible=!1,["stop","prevent"]),["esc"])),t[20]||(t[20]=qt(p=>e.visible=!1,["tab"]))],onMouseenter:t[21]||(t[21]=p=>e.inputHovering=!0),onMouseleave:t[22]||(t[22]=p=>e.inputHovering=!1)},qh({suffix:ce(()=>[e.iconComponent?Ct((R(),ke(a,{key:0,class:Q(["el-select__caret","el-input__icon",e.iconReverse])},{default:ce(()=>[(R(),ke(on(e.iconComponent)))]),_:1},8,["class"])),[[sn,!e.showClose]]):me("v-if",!0),e.showClose&&e.clearIcon?(R(),ke(a,{key:1,class:"el-select__caret el-input__icon",onClick:e.handleClearClick},{default:ce(()=>[(R(),ke(on(e.clearIcon)))]),_:1},8,["onClick"])):me("v-if",!0)]),_:2},[e.$slots.prefix?{name:"prefix",fn:ce(()=>[K("div",b$e,[Pe(e.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])])]),content:ce(()=>[pe(d,null,{default:ce(()=>[Ct(pe(c,{ref:"scrollbar",tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list",class:Q({"is-empty":!e.allowCreate&&e.query&&e.filteredOptionsCount===0})},{default:ce(()=>[e.showNewOption?(R(),ke(u,{key:0,value:e.query,created:!0},null,8,["value"])):me("v-if",!0),Pe(e.$slots,"default")]),_:3},8,["class"]),[[sn,e.options.size>0&&!e.loading]]),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&e.options.size===0)?(R(),H(ct,{key:0},[e.$slots.empty?Pe(e.$slots,"empty",{key:0}):(R(),H("p",y$e,ze(e.emptyText),1))],2112)):me("v-if",!0)]),_:3})]),_:3},8,["visible","append-to-body","popper-class","onShow"])],2)),[[h,e.handleClose,e.popperPaneRef]])}var $$e=Ge(h$e,[["render",w$e]]);const C$e=$e({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(e){const t=V(!0),n=Wt(),s=V([]);jt(S4,En(dt({},ko(e))));const o=Qe(Bb);Ft(()=>{s.value=r(n.subTree)});const r=a=>{const l=[];return Array.isArray(a.children)&&a.children.forEach(u=>{var c;u.type&&u.type.name==="ElOption"&&u.component&&u.component.proxy?l.push(u.component.proxy):((c=u.children)==null?void 0:c.length)&&l.push(...r(u))}),l},{groupQueryChange:i}=xn(o);return Le(i,()=>{t.value=s.value.some(a=>a.visible===!0)}),{visible:t}}}),x$e={class:"el-select-group__wrap"},k$e={class:"el-select-group__title"},S$e={class:"el-select-group"};function I$e(e,t,n,s,o,r){return Ct((R(),H("ul",x$e,[K("li",k$e,ze(e.label),1),K("li",null,[K("ul",S$e,[Pe(e.$slots,"default")])])],512)),[[sn,e.visible]])}var I4=Ge(C$e,[["render",I$e]]);const zb=Gt($$e,{Option:fk,OptionGroup:I4}),E4=cs(fk),E$e=cs(I4),hk=()=>Qe(FF,{}),T$e=yt({pageSize:{type:Number,required:!0},pageSizes:{type:et(Array),default:()=>As([10,20,30,40,50,100])},popperClass:{type:String,default:""},disabled:Boolean,size:{type:String,default:"default"}}),_$e=$e({name:"ElPaginationSizes",components:{ElSelect:zb,ElOption:E4},props:T$e,emits:["page-size-change"],setup(e,{emit:t}){const{t:n}=Tn(),s=hk(),o=V(e.pageSize);Le(()=>e.pageSizes,(a,l)=>{if(!wi(a,l)&&Array.isArray(a)){const u=a.indexOf(e.pageSize)>-1?e.pageSize:e.pageSizes[0];t("page-size-change",u)}}),Le(()=>e.pageSize,a=>{o.value=a});const r=O(()=>e.pageSizes);function i(a){var l;a!==o.value&&(o.value=a,(l=s.handleSizeChange)==null||l.call(s,Number(a)))}return{innerPagesizes:r,innerPageSize:o,t:n,handleChange:i}}}),N$e={class:"el-pagination__sizes"};function A$e(e,t,n,s,o,r){const i=de("el-option"),a=de("el-select");return R(),H("span",N$e,[pe(a,{"model-value":e.innerPageSize,disabled:e.disabled,"popper-class":e.popperClass,size:e.size,onChange:e.handleChange},{default:ce(()=>[(R(!0),H(ct,null,en(e.innerPagesizes,l=>(R(),ke(i,{key:l,value:l,label:l+e.t("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","onChange"])])}var D$e=Ge(_$e,[["render",A$e]]);const R$e=$e({name:"ElPaginationJumper",components:{ElInput:ti},setup(){const{t:e}=Tn(),{pageCount:t,disabled:n,currentPage:s,changeEvent:o}=hk(),r=V(),i=O(()=>{var u;return(u=r.value)!=null?u:s==null?void 0:s.value});function a(u){r.value=+u}function l(u){u=Math.trunc(+u),o==null||o(+u),r.value=void 0}return{pageCount:t,disabled:n,innerValue:i,t:e,handleInput:a,handleChange:l}}}),M$e=["disabled"];function O$e(e,t,n,s,o,r){const i=de("el-input");return R(),H("span",{class:"el-pagination__jump",disabled:e.disabled},[Zt(ze(e.t("el.pagination.goto"))+" ",1),pe(i,{size:"small",class:"el-pagination__editor is-in-pagination",min:1,max:e.pageCount,disabled:e.disabled,"model-value":e.innerValue,type:"number","onUpdate:modelValue":e.handleInput,onChange:e.handleChange},null,8,["max","disabled","model-value","onUpdate:modelValue","onChange"]),Zt(" "+ze(e.t("el.pagination.pageClassifier")),1)],8,M$e)}var F$e=Ge(R$e,[["render",O$e]]);const P$e={total:{type:Number,default:1e3}},L$e=$e({name:"ElPaginationTotal",props:P$e,setup(){const{t:e}=Tn(),{disabled:t}=hk();return{t:e,disabled:t}}}),B$e=["disabled"];function z$e(e,t,n,s,o,r){return R(),H("span",{class:"el-pagination__total",disabled:e.disabled},ze(e.t("el.pagination.total",{total:e.total})),9,B$e)}var V$e=Ge(L$e,[["render",z$e]]);const W$e={currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean},H$e=$e({name:"ElPaginationPager",components:{DArrowLeft:Ab,DArrowRight:Db,MoreFilled:sie},props:W$e,emits:["change"],setup(e,{emit:t}){const n=V(!1),s=V(!1),o=V(!1),r=V(!1),i=O(()=>{const c=e.pagerCount,d=(c-1)/2,f=Number(e.currentPage),h=Number(e.pageCount);let p=!1,g=!1;h>c&&(f>c-d&&(p=!0),f<h-d&&(g=!0));const m=[];if(p&&!g){const v=h-(c-2);for(let b=v;b<h;b++)m.push(b)}else if(!p&&g)for(let v=2;v<c;v++)m.push(v);else if(p&&g){const v=Math.floor(c/2)-1;for(let b=f-v;b<=f+v;b++)m.push(b)}else for(let v=2;v<h;v++)m.push(v);return m});ka(()=>{const c=(e.pagerCount-1)/2;n.value=!1,s.value=!1,e.pageCount>e.pagerCount&&(e.currentPage>e.pagerCount-c&&(n.value=!0),e.currentPage<e.pageCount-c&&(s.value=!0))});function a(c){e.disabled||(c==="left"?o.value=!0:r.value=!0)}function l(c){const d=c.target;if(d.tagName.toLowerCase()==="li"&&Array.from(d.classList).includes("number")){const f=Number(d.textContent);f!==e.currentPage&&t("change",f)}}function u(c){const d=c.target;if(d.tagName.toLowerCase()==="ul"||e.disabled)return;let f=Number(d.textContent);const h=e.pageCount,p=e.currentPage,g=e.pagerCount-2;d.className.includes("more")&&(d.className.includes("quickprev")?f=p-g:d.className.includes("quicknext")&&(f=p+g)),isNaN(f)||(f<1&&(f=1),f>h&&(f=h)),f!==p&&t("change",f)}return{showPrevMore:n,showNextMore:s,quickPrevHover:o,quickNextHover:r,pagers:i,onMouseenter:a,onPagerClick:u,onEnter:l}}}),U$e=["aria-current"],j$e=["aria-current"],G$e=["aria-current"];function K$e(e,t,n,s,o,r){const i=de("d-arrow-left"),a=de("more-filled"),l=de("d-arrow-right");return R(),H("ul",{class:"el-pager",onClick:t[4]||(t[4]=(...u)=>e.onPagerClick&&e.onPagerClick(...u)),onKeyup:t[5]||(t[5]=qt((...u)=>e.onEnter&&e.onEnter(...u),["enter"]))},[e.pageCount>0?(R(),H("li",{key:0,class:Q([{active:e.currentPage===1,disabled:e.disabled},"number"]),"aria-current":e.currentPage===1,tabindex:"0"}," 1 ",10,U$e)):me("v-if",!0),e.showPrevMore?(R(),H("li",{key:1,class:Q(["el-icon more btn-quickprev",{disabled:e.disabled}]),onMouseenter:t[0]||(t[0]=u=>e.onMouseenter("left")),onMouseleave:t[1]||(t[1]=u=>e.quickPrevHover=!1)},[e.quickPrevHover?(R(),ke(i,{key:0})):(R(),ke(a,{key:1}))],34)):me("v-if",!0),(R(!0),H(ct,null,en(e.pagers,u=>(R(),H("li",{key:u,class:Q([{active:e.currentPage===u,disabled:e.disabled},"number"]),"aria-current":e.currentPage===u,tabindex:"0"},ze(u),11,j$e))),128)),e.showNextMore?(R(),H("li",{key:2,class:Q(["el-icon more btn-quicknext",{disabled:e.disabled}]),onMouseenter:t[2]||(t[2]=u=>e.onMouseenter("right")),onMouseleave:t[3]||(t[3]=u=>e.quickNextHover=!1)},[e.quickNextHover?(R(),ke(l,{key:0})):(R(),ke(a,{key:1}))],34)):me("v-if",!0),e.pageCount>1?(R(),H("li",{key:3,class:Q([{active:e.currentPage===e.pageCount,disabled:e.disabled},"number"]),"aria-current":e.currentPage===e.pageCount,tabindex:"0"},ze(e.pageCount),11,G$e)):me("v-if",!0)],32)}var q$e=Ge(H$e,[["render",K$e]]);const Fo=e=>typeof e!="number",Y$e=yt({total:Number,pageSize:Number,defaultPageSize:Number,currentPage:Number,defaultCurrentPage:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>typeof e=="number"&&(e|0)===e&&e>4&&e<22&&e%2===1,default:7},layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:et(Array),default:()=>As([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},nextText:{type:String,default:""},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),X$e={"update:current-page":e=>typeof e=="number","update:page-size":e=>typeof e=="number","size-change":e=>typeof e=="number","current-change":e=>typeof e=="number","prev-click":e=>typeof e=="number","next-click":e=>typeof e=="number"},KA="ElPagination";var Z$e=$e({name:KA,props:Y$e,emits:X$e,setup(e,{emit:t,slots:n}){const{t:s}=Tn(),o=Wt().vnode.props||{},r="onUpdate:currentPage"in o||"onUpdate:current-page"in o||"onCurrentChange"in o,i="onUpdate:pageSize"in o||"onUpdate:page-size"in o||"onSizeChange"in o,a=O(()=>{if(Fo(e.total)&&Fo(e.pageCount)||!Fo(e.currentPage)&&!r)return!1;if(e.layout.includes("sizes")){if(Fo(e.pageCount)){if(!Fo(e.total)&&!Fo(e.pageSize)&&!i)return!1}else if(!i)return!1}return!0}),l=V(Fo(e.defaultPageSize)?10:e.defaultPageSize),u=V(Fo(e.defaultCurrentPage)?1:e.defaultCurrentPage),c=O({get(){return Fo(e.pageSize)?l.value:e.pageSize},set(b){Fo(e.pageSize)&&(l.value=b),i&&(t("update:page-size",b),t("size-change",b))}}),d=O(()=>{let b=0;return Fo(e.pageCount)?Fo(e.total)||(b=Math.max(1,Math.ceil(e.total/c.value))):b=e.pageCount,b}),f=O({get(){return Fo(e.currentPage)?u.value:e.currentPage},set(b){let $=b;b<1?$=1:b>d.value&&($=d.value),Fo(e.currentPage)&&(u.value=$),r&&(t("update:current-page",$),t("current-change",$))}});Le(d,b=>{f.value>b&&(f.value=b)});function h(b){f.value=b}function p(b){c.value=b;const $=d.value;f.value>$&&(f.value=$)}function g(){e.disabled||(f.value-=1,t("prev-click",f.value))}function m(){e.disabled||(f.value+=1,t("next-click",f.value))}function v(b,$){b&&(b.props||(b.props={}),b.props.class=[b.props.class,$].join(" "))}return jt(FF,{pageCount:d,disabled:O(()=>e.disabled),currentPage:f,changeEvent:h,handleSizeChange:p}),()=>{var b,$;if(!a.value)return s("el.pagination.deprecationWarning"),null;if(!e.layout||e.hideOnSinglePage&&d.value<=1)return null;const y=[],w=[],C=Ke("div",{class:"el-pagination__rightwrapper"},w),x={prev:Ke(Jwe,{disabled:e.disabled,currentPage:f.value,prevText:e.prevText,onClick:g}),jumper:Ke(F$e),pager:Ke(q$e,{currentPage:f.value,pageCount:d.value,pagerCount:e.pagerCount,onChange:h,disabled:e.disabled}),next:Ke(o$e,{disabled:e.disabled,currentPage:f.value,pageCount:d.value,nextText:e.nextText,onClick:m}),sizes:Ke(D$e,{pageSize:c.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,size:e.small?"small":"default"}),slot:($=(b=n==null?void 0:n.default)==null?void 0:b.call(n))!=null?$:null,total:Ke(V$e,{total:Fo(e.total)?0:e.total})},S=e.layout.split(",").map(I=>I.trim());let T=!1;return S.forEach(I=>{if(I==="->"){T=!0;return}T?w.push(x[I]):y.push(x[I])}),T&&w.length>0&&y.unshift(C),v(y[0],"is-first"),v(y[y.length-1],"is-last"),Ke("div",{role:"pagination","aria-label":"pagination",class:["el-pagination",{"is-background":e.background,"el-pagination--small":e.small}]},y)}}});const J$e=Gt(Z$e),Q$e=yt({title:{type:String},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonType:{type:String,values:wC,default:"primary"},cancelButtonType:{type:String,values:wC,default:"text"},icon:{type:et([String,Object]),default:wie},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},onConfirm:{type:et(Function)},onCancel:{type:et(Function)}}),eCe=$e({name:"ElPopconfirm",components:{ElButton:sa,ElTooltip:lr,ElIcon:Pt},props:Q$e,setup(e){const{t}=Tn(),n=V(),s=()=>{var u,c;(c=(u=Xe(n))==null?void 0:u.onClose)==null||c.call(u)},o=()=>{s()},r=u=>{var c;(c=e.onConfirm)==null||c.call(e,u),o()},i=u=>{var c;(c=e.onCancel)==null||c.call(e,u),o()},a=O(()=>e.confirmButtonText||t("el.popconfirm.confirmButtonText")),l=O(()=>e.cancelButtonText||t("el.popconfirm.cancelButtonText"));return{finalConfirmButtonText:a,finalCancelButtonText:l,tooltipRef:n,confirm:r,cancel:i}}}),tCe={class:"el-popconfirm"},nCe={class:"el-popconfirm__main"},sCe={class:"el-popconfirm__action"};function oCe(e,t,n,s,o,r){const i=de("el-icon"),a=de("el-button"),l=de("el-tooltip");return R(),ke(l,uo({ref:"tooltipRef"},e.$attrs,{trigger:"click",effect:"light","popper-class":"el-popover","append-to-body":"","fallback-placements":["bottom","top","right","left"],"hide-after":e.hideAfter,persistent:""}),{content:ce(()=>[K("div",tCe,[K("div",nCe,[!e.hideIcon&&e.icon?(R(),ke(i,{key:0,class:"el-popconfirm__icon",style:rt({color:e.iconColor})},{default:ce(()=>[(R(),ke(on(e.icon)))]),_:1},8,["style"])):me("v-if",!0),Zt(" "+ze(e.title),1)]),K("div",sCe,[pe(a,{size:"small",type:e.cancelButtonType,onClick:e.cancel},{default:ce(()=>[Zt(ze(e.finalCancelButtonText),1)]),_:1},8,["type","onClick"]),pe(a,{size:"small",type:e.confirmButtonType,onClick:e.confirm},{default:ce(()=>[Zt(ze(e.finalConfirmButtonText),1)]),_:1},8,["type","onClick"])])])]),default:ce(()=>[e.$slots.reference?Pe(e.$slots,"reference",{key:0}):me("v-if",!0)]),_:3},16,["hide-after"])}var rCe=Ge(eCe,[["render",oCe]]);const iCe=Gt(rCe),aCe=dt({content:sl.content,popperStyle:sl.popperStyle,popperClass:sl.popperClass,enterable:Ut(dt({},sl.enterable),{default:!0}),effect:Ut(dt({},sl.effect),{default:"light"})},yt({title:String,width:{type:[String,Number],default:150}})),lCe=["update:visible","after-enter","after-leave"],uCe="ElPopover",cCe=$e({name:uCe,components:{ElTooltip:lr},props:aCe,emits:lCe,setup(e,{emit:t}){const n=V(null),s=O(()=>{var c;return(c=Xe(n))==null?void 0:c.popperRef}),o=O(()=>Qt(e.width)?e.width:`${e.width}px`),r=O(()=>[{width:o.value},e.popperStyle]);return{kls:O(()=>[{"el-popover--plain":!!e.content},"el-popover",e.popperClass]),style:r,tooltipRef:n,popperRef:s,hide:()=>{var c;(c=n.value)==null||c.hide()},afterEnter:()=>{t("after-enter")},afterLeave:()=>{t("after-leave")}}}}),dCe={key:0,class:"el-popover__title",role:"title"};function fCe(e,t,n,s,o,r){const i=de("el-tooltip");return R(),ke(i,uo({ref:"tooltipRef"},e.$attrs,{"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":e.kls,"popper-style":e.style,persistent:"",onShow:e.afterEnter,onHide:e.afterLeave}),{content:ce(()=>[e.title?(R(),H("div",dCe,ze(e.title),1)):me("v-if",!0),Pe(e.$slots,"default",{},()=>[Zt(ze(e.content),1)])]),default:ce(()=>[e.$slots.reference?Pe(e.$slots,"reference",{key:0}):me("v-if",!0)]),_:3},16,["aria-label","effect","enterable","popper-class","popper-style","onShow","onHide"])}var _h=Ge(cCe,[["render",fCe]]);const qA=(e,t)=>{const n=t.arg||t.value,s=n==null?void 0:n.popperRef;s&&(s.triggerRef=e)};var NC={mounted(e,t){qA(e,t)},updated(e,t){qA(e,t)}};const hCe="popover";_h.install=e=>{e.component(_h.name,_h)};NC.install=e=>{e.directive(hCe,NC)};const T4=NC;_h.directive=T4;const pCe=_h,gCe=pCe,mCe=T4,vCe=yt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:et(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:et([String,Array,Function]),default:""},format:{type:et(Function),default:e=>`${e}%`}}),bCe=$e({name:"ElProgress",components:{ElIcon:Pt,CircleCheck:w0,CircleClose:_a,Check:Sd,Close:ki,WarningFilled:np},props:vCe,setup(e){const t=O(()=>({width:`${e.percentage}%`,animationDuration:`${e.duration}s`,backgroundColor:p(e.percentage)})),n=O(()=>(e.strokeWidth/e.width*100).toFixed(1)),s=O(()=>e.type==="circle"||e.type==="dashboard"?parseInt(`${50-parseFloat(n.value)/2}`,10):0),o=O(()=>{const m=s.value,v=e.type==="dashboard";return`
          M 50 50
          m 0 ${v?"":"-"}${m}
          a ${m} ${m} 0 1 1 0 ${v?"-":""}${m*2}
          a ${m} ${m} 0 1 1 0 ${v?"":"-"}${m*2}
          `}),r=O(()=>2*Math.PI*s.value),i=O(()=>e.type==="dashboard"?.75:1),a=O(()=>`${-1*r.value*(1-i.value)/2}px`),l=O(()=>({strokeDasharray:`${r.value*i.value}px, ${r.value}px`,strokeDashoffset:a.value})),u=O(()=>({strokeDasharray:`${r.value*i.value*(e.percentage/100)}px, ${r.value}px`,strokeDashoffset:a.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"})),c=O(()=>{let m;if(e.color)m=p(e.percentage);else switch(e.status){case"success":m="#13ce66";break;case"exception":m="#ff4949";break;case"warning":m="#e6a23c";break;default:m="#20a0ff"}return m}),d=O(()=>e.status==="warning"?np:e.type==="line"?e.status==="success"?w0:_a:e.status==="success"?Sd:ki),f=O(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),h=O(()=>e.format(e.percentage)),p=m=>{var v;const{color:b}=e;if(typeof b=="function")return b(m);if(typeof b=="string")return b;{const $=100/b.length,w=b.map((C,x)=>typeof C=="string"?{color:C,percentage:(x+1)*$}:C).sort((C,x)=>C.percentage-x.percentage);for(const C of w)if(C.percentage>m)return C.color;return(v=w[w.length-1])==null?void 0:v.color}},g=O(()=>({percentage:e.percentage}));return{barStyle:t,relativeStrokeWidth:n,radius:s,trackPath:o,perimeter:r,rate:i,strokeDashoffset:a,trailPathStyle:l,circlePathStyle:u,stroke:c,statusIcon:d,progressTextSize:f,content:h,slotData:g}}}),yCe=["aria-valuenow"],wCe={key:0,class:"el-progress-bar"},$Ce={key:0,class:"el-progress-bar__innerText"},CCe={viewBox:"0 0 100 100"},xCe=["d","stroke-width"],kCe=["d","stroke","stroke-linecap","stroke-width"],SCe={key:0};function ICe(e,t,n,s,o,r){const i=de("el-icon");return R(),H("div",{class:Q(["el-progress",[`el-progress--${e.type}`,e.status?`is-${e.status}`:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}]]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[e.type==="line"?(R(),H("div",wCe,[K("div",{class:"el-progress-bar__outer",style:rt({height:`${e.strokeWidth}px`})},[K("div",{class:Q(["el-progress-bar__inner",{"el-progress-bar__inner--indeterminate":e.indeterminate}]),style:rt(e.barStyle)},[(e.showText||e.$slots.default)&&e.textInside?(R(),H("div",$Ce,[Pe(e.$slots,"default",Wu(Hu(e.slotData)),()=>[K("span",null,ze(e.content),1)])])):me("v-if",!0)],6)],4)])):(R(),H("div",{key:1,class:"el-progress-circle",style:rt({height:`${e.width}px`,width:`${e.width}px`})},[(R(),H("svg",CCe,[K("path",{class:"el-progress-circle__track",d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none",style:rt(e.trailPathStyle)},null,12,xCe),K("path",{class:"el-progress-circle__path",d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0,style:rt(e.circlePathStyle)},null,12,kCe)]))],4)),(e.showText||e.$slots.default)&&!e.textInside?(R(),H("div",{key:2,class:"el-progress__text",style:rt({fontSize:`${e.progressTextSize}px`})},[Pe(e.$slots,"default",Wu(Hu(e.slotData)),()=>[e.status?(R(),ke(i,{key:1},{default:ce(()=>[(R(),ke(on(e.statusIcon)))]),_:1})):(R(),H("span",SCe,ze(e.content),1))])],4)):me("v-if",!0)],10,yCe)}var ECe=Ge(bCe,[["render",ICe]]);const _4=Gt(ECe),TCe=yt({modelValue:{type:Number,default:0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:et([Array,Object]),default:()=>As(["var(--el-rate-star-color)","var(--el-rate-star-color)","var(--el-rate-star-color)"])},voidColor:{type:String,default:"var(--el-rate-void-color)"},disabledVoidColor:{type:String,default:"var(--el-rate-disable-void-color)"},icons:{type:et([Array,Object]),default:()=>[oh,oh,oh]},voidIcon:{type:et([String,Object]),default:()=>AP},disabledvoidIcon:{type:et([String,Object]),default:()=>oh},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:"var(--el-rate-text-color)"},texts:{type:et(Array),default:()=>As(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:{type:String,validator:sr}}),_Ce={change:e=>typeof e=="number",[Bt]:e=>typeof e=="number"};function qw(e,t){const n=r=>cn(r),s=Object.keys(t).map(r=>+r).filter(r=>{const i=t[r];return(n(i)?i.excluded:!1)?e<r:e<=r}).sort((r,i)=>r-i),o=t[s[0]];return n(o)&&o.value||o}const NCe=$e({name:"ElRate",components:{ElIcon:Pt,StarFilled:oh,Star:AP},props:TCe,emits:_Ce,setup(e,{emit:t}){const n=Qe(ar,{}),s=Ss(),o=Mt("rate"),r=V(e.modelValue),i=V(-1),a=V(!0),l=O(()=>[o.b(),o.m(s.value)]),u=O(()=>e.disabled||n.disabled),c=O(()=>{let I="";return e.showScore?I=e.scoreTemplate.replace(/\{\s*value\s*\}/,u.value?`${e.modelValue}`:`${r.value}`):e.showText&&(I=e.texts[Math.ceil(r.value)-1]),I}),d=O(()=>e.modelValue*100-Math.floor(e.modelValue)*100),f=O(()=>At(e.colors)?{[e.lowThreshold]:e.colors[0],[e.highThreshold]:{value:e.colors[1],excluded:!0},[e.max]:e.colors[2]}:e.colors),h=O(()=>qw(r.value,f.value)),p=O(()=>{let I="";return u.value?I=`${d.value}%`:e.allowHalf&&(I="50%"),{color:h.value,width:I}}),g=O(()=>At(e.icons)?{[e.lowThreshold]:e.icons[0],[e.highThreshold]:{value:e.icons[1],excluded:!0},[e.max]:e.icons[2]}:e.icons),m=O(()=>qw(e.modelValue,g.value)),v=O(()=>u.value?e.disabledvoidIcon:e.voidIcon),b=O(()=>qw(r.value,g.value)),$=O(()=>{const I=Array(e.max),_=r.value;return I.fill(b.value,0,_),I.fill(v.value,_,e.max),I});function y(I){const _=u.value&&d.value>0&&I-1<e.modelValue&&I>e.modelValue,N=e.allowHalf&&a.value&&I-.5<=r.value&&I>r.value;return _||N}function w(I){const _=u.value?e.disabledVoidColor:e.voidColor;return{color:I<=r.value?h.value:_}}function C(I){u.value||(e.allowHalf&&a.value?(t(Bt,r.value),e.modelValue!==r.value&&t("change",r.value)):(t(Bt,I),e.modelValue!==I&&t("change",I)))}function x(I){if(u.value)return;let _=r.value;const N=I.code;return N===tt.up||N===tt.right?(e.allowHalf?_+=.5:_+=1,I.stopPropagation(),I.preventDefault()):(N===tt.left||N===tt.down)&&(e.allowHalf?_-=.5:_-=1,I.stopPropagation(),I.preventDefault()),_=_<0?0:_,_=_>e.max?e.max:_,t(Bt,_),t("change",_),_}function S(I,_){if(!u.value){if(e.allowHalf){let N=_.target;yi(N,o.e("item"))&&(N=N.querySelector(`.${o.e("icon")}`)),(N.clientWidth===0||yi(N,o.e("decimal")))&&(N=N.parentNode),a.value=_.offsetX*2<=N.clientWidth,r.value=a.value?I-.5:I}else r.value=I;i.value=I}}function T(){u.value||(e.allowHalf&&(a.value=e.modelValue!==Math.floor(e.modelValue)),r.value=e.modelValue,i.value=-1)}return Le(()=>e.modelValue,I=>{r.value=I,a.value=e.modelValue!==Math.floor(e.modelValue)}),e.modelValue||t(Bt,0),{ns:o,hoverIndex:i,currentValue:r,rateDisabled:u,text:c,decimalStyle:p,decimalIconComponent:m,iconComponents:$,rateKls:l,showDecimalIcon:y,getIconStyle:w,selectValue:C,handleKey:x,setCurrentValue:S,resetCurrentValue:T}}}),ACe=["aria-valuenow","aria-valuetext","aria-valuemax"],DCe=["onMousemove","onClick"];function RCe(e,t,n,s,o,r){const i=de("el-icon");return R(),H("div",{class:Q(e.rateKls),role:"slider","aria-valuenow":e.currentValue,"aria-valuetext":e.text,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0",onKeydown:t[1]||(t[1]=(...a)=>e.handleKey&&e.handleKey(...a))},[(R(!0),H(ct,null,en(e.max,(a,l)=>(R(),H("span",{key:l,class:Q(e.ns.e("item")),style:rt({cursor:e.rateDisabled?"auto":"pointer"}),onMousemove:u=>e.setCurrentValue(a,u),onMouseleave:t[0]||(t[0]=(...u)=>e.resetCurrentValue&&e.resetCurrentValue(...u)),onClick:u=>e.selectValue(a)},[pe(i,{class:Q([e.ns.e("icon"),{hover:e.hoverIndex===a}]),style:rt(e.getIconStyle(a))},{default:ce(()=>[(R(),ke(on(e.iconComponents[a-1]))),e.showDecimalIcon(a)?(R(),ke(i,{key:0,style:rt(e.decimalStyle),class:Q([e.ns.e("icon"),e.ns.e("decimal")])},{default:ce(()=>[(R(),ke(on(e.decimalIconComponent)))]),_:1},8,["style","class"])):me("v-if",!0)]),_:2},1032,["class","style"])],46,DCe))),128)),e.showText||e.showScore?(R(),H("span",{key:0,class:Q(e.ns.e("text")),style:rt({color:e.textColor})},ze(e.text),7)):me("v-if",!0)],42,ACe)}var MCe=Ge(NCe,[["render",RCe]]);const OCe=Gt(MCe),rd={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},YA={[rd.success]:Doe,[rd.warning]:np,[rd.error]:W2,[rd.info]:H2},FCe=yt({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{values:["success","warning","info","error"],default:"info"}}),PCe=$e({name:"ElResult",props:FCe,setup(e){const t=Mt("result"),n=O(()=>{const s=e.icon,o=s&&rd[s]?rd[s]:"icon-info",r=YA[o]||YA["icon-info"];return{class:o,component:r}});return{ns:t,resultIcon:n}}});function LCe(e,t,n,s,o,r){return R(),H("div",{class:Q(e.ns.b())},[K("div",{class:Q(e.ns.e("icon"))},[Pe(e.$slots,"icon",{},()=>[e.resultIcon.component?(R(),ke(on(e.resultIcon.component),{key:0,class:Q(e.resultIcon.class)},null,8,["class"])):me("v-if",!0)])],2),e.title||e.$slots.title?(R(),H("div",{key:0,class:Q(e.ns.e("title"))},[Pe(e.$slots,"title",{},()=>[K("p",null,ze(e.title),1)])],2)):me("v-if",!0),e.subTitle||e.$slots.subTitle?(R(),H("div",{key:1,class:Q(e.ns.e("subtitle"))},[Pe(e.$slots,"subTitle",{},()=>[K("p",null,ze(e.subTitle),1)])],2)):me("v-if",!0),e.$slots.extra?(R(),H("div",{key:2,class:Q(e.ns.e("extra"))},[Pe(e.$slots,"extra")],2)):me("v-if",!0)],2)}var BCe=Ge(PCe,[["render",LCe]]);const zCe=Gt(BCe),VCe=yt({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:["start","center","end","space-around","space-between"],default:"start"},align:{type:String,values:["top","middle","bottom"],default:"top"}}),WCe=$e({name:"ElRow",props:VCe,setup(e,{slots:t}){const n=Mt("row"),s=O(()=>e.gutter);jt("ElRow",{gutter:s});const o=O(()=>{const r={marginLeft:"",marginRight:""};return e.gutter&&(r.marginLeft=`-${e.gutter/2}px`,r.marginRight=r.marginLeft),r});return()=>{var r;return Ke(e.tag,{class:[n.b(),n.is(`justify-${e.justify}`,e.justify!=="start"),n.is(`align-${e.align}`,e.align!=="top")],style:o.value},(r=t.default)==null?void 0:r.call(t))}}}),HCe=Gt(WCe);var XA=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function UCe(e,t){return!!(e===t||XA(e)&&XA(t))}function jCe(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!UCe(e[n],t[n]))return!1;return!0}function GCe(e,t){t===void 0&&(t=jCe);var n=null;function s(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];if(n&&n.lastThis===this&&t(o,n.lastArgs))return n.lastResult;var i=e.apply(this,o);return n={lastResult:i,lastArgs:o,lastThis:this},i}return s.clear=function(){n=null},s}const KCe=()=>{const t=Wt().proxy.$props;return O(()=>{const n=(s,o,r)=>({});return t.perfMode?pP(n):GCe(n)})};let pk=e=>setTimeout(e,16),gk=e=>clearTimeout(e);Jt&&(pk=e=>window.requestAnimationFrame(e),gk=e=>window.cancelAnimationFrame(e));const qCe=50,ZA="item-rendered",JA="scroll",N4="forward",A4="backward",ap="auto",D4="smart",R4="start",x0="center",M4="end",Dd="horizontal",mk="vertical",YCe="ltr",jv="rtl",O4="negative",XCe="positive-ascending",F4="positive-descending",ZCe={[Dd]:"left",[mk]:"top"},JCe=20,Yw=(e,t)=>e<t?N4:A4,lp=e=>e===YCe||e===jv||e===Dd;let Hc=null;function QA(e=!1){if(Hc===null||e){const t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";const s=document.createElement("div"),o=s.style;return o.width="100px",o.height="100px",t.appendChild(s),document.body.appendChild(t),t.scrollLeft>0?Hc=F4:(t.scrollLeft=1,t.scrollLeft===0?Hc=O4:Hc=XCe),document.body.removeChild(t),Hc}return Hc}function QCe({move:e,size:t,bar:n},s){const o={},r=`translate${n.axis}(${e}px)`;return o[n.size]=t,o.transform=r,o.msTransform=r,o.webkitTransform=r,s==="horizontal"?o.height="100%":o.width="100%",o}const exe=typeof navigator!="undefined"&&cn(navigator)&&/Firefox/i.test(navigator.userAgent),txe={[Dd]:"deltaX",[mk]:"deltaY"},nxe=({atEndEdge:e,atStartEdge:t,layout:n},s)=>{let o,r=0;const i=l=>l<0&&t.value||l>0&&e.value;return{hasReachedEdge:i,onWheel:l=>{gk(o);const u=l[txe[n.value]];i(r)&&i(r+u)||(r+=u,exe||l.preventDefault(),o=pk(()=>{s(r),r=0}))}}},AC=xi({type:et([Number,Function]),required:!0}),DC=xi({type:Number}),RC=xi({type:Number,default:2}),sxe=xi({type:String,values:["ltr","rtl"],default:"ltr"}),MC=xi({type:Number,default:0}),k0=xi({type:Number,required:!0}),P4=xi({type:String,values:["horizontal","vertical"],default:mk}),L4=yt({className:{type:String,default:""},containerElement:{type:et([String,Object]),default:"div"},data:{type:et(Array),default:()=>As([])},direction:sxe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:et([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),oxe=yt(dt({cache:RC,estimatedItemSize:DC,layout:P4,initScrollOffset:MC,total:k0,itemSize:AC},L4));yt(dt({columnCache:RC,columnWidth:AC,estimatedColumnWidth:DC,estimatedRowHeight:DC,initScrollLeft:MC,initScrollTop:MC,rowCache:RC,rowHeight:AC,totalColumn:k0,totalRow:k0},L4));const rxe=yt({layout:P4,total:k0,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},visible:Boolean}),ixe=$e({name:"ElVirtualScrollBar",props:rxe,emits:["scroll","start-move","stop-move"],setup(e,{emit:t}){const s=V(),o=V();let r=null,i=null;const a=En({isDragging:!1,traveled:0}),l=O(()=>HP[e.layout]),u=O(()=>e.clientSize-4),c=O(()=>({position:"absolute",width:Dd===e.layout?`${u.value}px`:"6px",height:Dd===e.layout?"6px":`${u.value}px`,[ZCe[e.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),d=O(()=>{const w=e.ratio,C=e.clientSize;if(w>=100)return Number.POSITIVE_INFINITY;if(w>=50)return w*C/100;const x=C/3;return Math.floor(Math.min(Math.max(w*C,JCe),x))}),f=O(()=>{if(!Number.isFinite(d.value))return{display:"none"};const w=`${d.value}px`;return QCe({bar:l.value,size:w,move:a.traveled},e.layout)}),h=O(()=>Math.floor(e.clientSize-d.value-4)),p=()=>{wn(window,"mousemove",b),wn(window,"mouseup",v);const w=Xe(o);!w||(i=document.onselectstart,document.onselectstart=()=>!1,wn(w,"touchmove",b),wn(w,"touchend",v))},g=()=>{qn(window,"mousemove",b),qn(window,"mouseup",v),document.onselectstart=i,i=null;const w=Xe(o);!w||(qn(w,"touchmove",b),qn(w,"touchend",v))},m=w=>{w.stopImmediatePropagation(),!(w.ctrlKey||[1,2].includes(w.button))&&(a.isDragging=!0,a[l.value.axis]=w.currentTarget[l.value.offset]-(w[l.value.client]-w.currentTarget.getBoundingClientRect()[l.value.direction]),t("start-move"),p())},v=()=>{a.isDragging=!1,a[l.value.axis]=0,t("stop-move"),g()},b=w=>{const{isDragging:C}=a;if(!C||!o.value||!s.value)return;const x=a[l.value.axis];if(!x)return;gk(r);const S=(s.value.getBoundingClientRect()[l.value.direction]-w[l.value.client])*-1,T=o.value[l.value.offset]-x,I=S-T;r=pk(()=>{a.traveled=Math.max(0,Math.min(I,h.value)),t("scroll",I,h.value)})},$=w=>{const C=Math.abs(w.target.getBoundingClientRect()[l.value.direction]-w[l.value.client]),x=o.value[l.value.offset]/2,S=C-x;a.traveled=Math.max(0,Math.min(S,h.value)),t("scroll",S,h.value)},y=w=>w.preventDefault();return Le(()=>e.scrollFrom,w=>{a.isDragging||(a.traveled=Math.ceil(w*h.value))}),Ft(()=>{!Jt||(wn(s.value,"touchstart",y),wn(o.value,"touchstart",m))}),us(()=>{qn(s.value,"touchstart",y),g()}),()=>Ke("div",{role:"presentation",ref:s,class:"el-virtual-scrollbar",style:c.value,onMousedown:gt($,["stop","prevent"])},Ke("div",{ref:o,class:"el-scrollbar__thumb",style:f.value,onMousedown:m},[]))}}),B4=({name:e,getOffset:t,getItemSize:n,getItemOffset:s,getEstimatedTotalSize:o,getStartIndexForOffset:r,getStopIndexForStartIndex:i,initCache:a,clearCache:l,validateProps:u})=>$e({name:e!=null?e:"ElVirtualList",props:oxe,emits:[ZA,JA],setup(c,{emit:d,expose:f}){u(c);const h=Wt(),p=V(a(c,h)),g=KCe(),m=V(),v=V(),b=V(),$=V({isScrolling:!1,scrollDir:"forward",scrollOffset:Sn(c.initScrollOffset)?c.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:c.scrollbarAlwaysOn}),y=O(()=>{const{total:ie,cache:ye}=c,{isScrolling:ue,scrollDir:Z,scrollOffset:ee}=Xe($);if(ie===0)return[0,0,0,0];const te=r(c,ee,Xe(p)),fe=i(c,te,ee,Xe(p)),De=!ue||Z===A4?Math.max(1,ye):1,We=!ue||Z===N4?Math.max(1,ye):1;return[Math.max(0,te-De),Math.max(0,Math.min(ie-1,fe+We)),te,fe]}),w=O(()=>o(c,Xe(p))),C=O(()=>lp(c.layout)),x=O(()=>[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:c.direction,height:Sn(c.height)?`${c.height}px`:c.height,width:Sn(c.width)?`${c.width}px`:c.width},c.style]),S=O(()=>{const ie=Xe(w),ye=Xe(C);return{height:ye?"100%":`${ie}px`,pointerEvents:Xe($).isScrolling?"none":void 0,width:ye?`${ie}px`:"100%"}}),T=O(()=>C.value?c.width:c.height),{onWheel:I}=nxe({atStartEdge:O(()=>$.value.scrollOffset<=0),atEndEdge:O(()=>$.value.scrollOffset>=w.value),layout:O(()=>c.layout)},ie=>{var ye,ue;(ue=(ye=b.value).onMouseUp)==null||ue.call(ye),M(Math.min($.value.scrollOffset+ie,w.value-T.value))}),_=()=>{const{total:ie}=c;if(ie>0){const[ee,te,fe,De]=Xe(y);d(ZA,ee,te,fe,De)}const{scrollDir:ye,scrollOffset:ue,updateRequested:Z}=Xe($);d(JA,ye,ue,Z)},N=ie=>{const{clientHeight:ye,scrollHeight:ue,scrollTop:Z}=ie.currentTarget,ee=Xe($);if(ee.scrollOffset===Z)return;const te=Math.max(0,Math.min(Z,ue-ye));$.value=Ut(dt({},ee),{isScrolling:!0,scrollDir:Yw(ee.scrollOffset,te),scrollOffset:te,updateRequested:!1}),ft(X)},D=ie=>{const{clientWidth:ye,scrollLeft:ue,scrollWidth:Z}=ie.currentTarget,ee=Xe($);if(ee.scrollOffset===ue)return;const{direction:te}=c;let fe=ue;if(te===jv)switch(QA()){case O4:{fe=-ue;break}case F4:{fe=Z-ye-ue;break}}fe=Math.max(0,Math.min(fe,Z-ye)),$.value=Ut(dt({},ee),{isScrolling:!0,scrollDir:Yw(ee.scrollOffset,fe),scrollOffset:fe,updateRequested:!1}),ft(X)},F=ie=>{Xe(C)?D(ie):N(ie),_()},P=(ie,ye)=>{const ue=(w.value-T.value)/ye*ie;M(Math.min(w.value-T.value,ue))},M=ie=>{ie=Math.max(ie,0),ie!==Xe($).scrollOffset&&($.value=Ut(dt({},Xe($)),{scrollOffset:ie,scrollDir:Yw(Xe($).scrollOffset,ie),updateRequested:!0}),ft(X))},B=(ie,ye=ap)=>{const{scrollOffset:ue}=Xe($);ie=Math.max(0,Math.min(ie,c.total-1)),M(t(c,ie,ye,ue,Xe(p)))},j=ie=>{const{direction:ye,itemSize:ue,layout:Z}=c,ee=g.value(l&&ue,l&&Z,l&&ye);let te;if(Kt(ee,String(ie)))te=ee[ie];else{const fe=s(c,ie,Xe(p)),De=n(c,ie,Xe(p)),We=Xe(C),He=ye===jv,Ve=We?fe:0;ee[ie]=te={position:"absolute",left:He?void 0:`${Ve}px`,right:He?`${Ve}px`:void 0,top:We?0:`${fe}px`,height:We?"100%":`${De}px`,width:We?`${De}px`:"100%"}}return te},X=()=>{$.value.isScrolling=!1,ft(()=>{g.value(-1,null,null)})},ae=()=>{const ie=m.value;ie&&(ie.scrollTop=0)};Ft(()=>{if(!Jt)return;const{initScrollOffset:ie}=c,ye=Xe(m);Sn(ie)&&ye&&(Xe(C)?ye.scrollLeft=ie:ye.scrollTop=ie),_()}),Ni(()=>{const{direction:ie,layout:ye}=c,{scrollOffset:ue,updateRequested:Z}=Xe($),ee=Xe(m);if(Z&&ee)if(ye===Dd)if(ie===jv)switch(QA()){case"negative":{ee.scrollLeft=-ue;break}case"positive-ascending":{ee.scrollLeft=ue;break}default:{const{clientWidth:te,scrollWidth:fe}=ee;ee.scrollLeft=fe-te-ue;break}}else ee.scrollLeft=ue;else ee.scrollTop=ue});const be={clientSize:T,estimatedTotalSize:w,windowStyle:x,windowRef:m,innerRef:v,innerStyle:S,itemsToRender:y,scrollbarRef:b,states:$,getItemStyle:j,onScroll:F,onScrollbarScroll:P,onWheel:I,scrollTo:M,scrollToItem:B,resetScrollTop:ae};return f({windowRef:m,innerRef:v,getItemStyleCache:g,scrollTo:M,scrollToItem:B,resetScrollTop:ae,states:$}),be},render(c){var d;const{$slots:f,className:h,clientSize:p,containerElement:g,data:m,getItemStyle:v,innerElement:b,itemsToRender:$,innerStyle:y,layout:w,total:C,onScroll:x,onScrollbarScroll:S,onWheel:T,states:I,useIsScrolling:_,windowStyle:N}=c,[D,F]=$,P=on(g),M=on(b),B=[];if(C>0)for(let be=D;be<=F;be++)B.push((d=f.default)==null?void 0:d.call(f,{data:m,key:be,index:be,isScrolling:_?I.isScrolling:void 0,style:v(be)}));const j=[Ke(M,{style:y,ref:"innerRef"},Qt(M)?B:{default:()=>B})],X=Ke(ixe,{ref:"scrollbarRef",clientSize:p,layout:w,onScroll:S,ratio:p*100/this.estimatedTotalSize,scrollFrom:I.scrollOffset/(this.estimatedTotalSize-p),total:C}),ae=Ke(P,{class:h,style:N,onScroll:x,onWheel:T,ref:"windowRef",key:0},Qt(P)?[j]:{default:()=>[j]});return Ke("div",{key:0,class:["el-vl__wrapper",I.scrollbarAlwaysOn?"always-on":""]},[ae,X])}}),z4=B4({name:"ElFixedSizeList",getItemOffset:({itemSize:e},t)=>t*e,getItemSize:({itemSize:e})=>e,getEstimatedTotalSize:({total:e,itemSize:t})=>t*e,getOffset:({height:e,total:t,itemSize:n,layout:s,width:o},r,i,a)=>{const l=lp(s)?o:e,u=Math.max(0,t*n-l),c=Math.min(u,r*n),d=Math.max(0,(r+1)*n-l);switch(i===D4&&(a>=d-l&&a<=c+l?i=ap:i=x0),i){case R4:return c;case M4:return d;case x0:{const f=Math.round(d+(c-d)/2);return f<Math.ceil(l/2)?0:f>u+Math.floor(l/2)?u:f}case ap:default:return a>=d&&a<=c?a:a<d?d:c}},getStartIndexForOffset:({total:e,itemSize:t},n)=>Math.max(0,Math.min(e-1,Math.floor(n/t))),getStopIndexForStartIndex:({height:e,total:t,itemSize:n,layout:s,width:o},r,i)=>{const a=r*n,l=lp(s)?o:e,u=Math.ceil((l+i-a)/n);return Math.max(0,Math.min(t-1,r+u-1))},initCache(){},clearCache:!0,validateProps(){}}),id=(e,t,n)=>{const{itemSize:s}=e,{items:o,lastVisitedIndex:r}=n;if(t>r){let i=0;if(r>=0){const a=o[r];i=a.offset+a.size}for(let a=r+1;a<=t;a++){const l=s(a);o[a]={offset:i,size:l},i+=l}n.lastVisitedIndex=t}return o[t]},axe=(e,t,n)=>{const{items:s,lastVisitedIndex:o}=t;return(o>0?s[o].offset:0)>=n?V4(e,t,0,o,n):lxe(e,t,Math.max(0,o),n)},V4=(e,t,n,s,o)=>{for(;n<=s;){const r=n+Math.floor((s-n)/2),i=id(e,r,t).offset;if(i===o)return r;i<o?n=r+1:i>o&&(s=r-1)}return Math.max(0,n-1)},lxe=(e,t,n,s)=>{const{total:o}=e;let r=1;for(;n<o&&id(e,n,t).offset<s;)n+=r,r*=2;return V4(e,t,Math.floor(n/2),Math.min(n,o-1),s)},eD=({total:e},{items:t,estimatedItemSize:n,lastVisitedIndex:s})=>{let o=0;if(s>=e&&(s=e-1),s>=0){const a=t[s];o=a.offset+a.size}const i=(e-s-1)*n;return o+i},uxe=B4({name:"ElDynamicSizeList",getItemOffset:(e,t,n)=>id(e,t,n).offset,getItemSize:(e,t,{items:n})=>n[t].size,getEstimatedTotalSize:eD,getOffset:(e,t,n,s,o)=>{const{height:r,layout:i,width:a}=e,l=lp(i)?a:r,u=id(e,t,o),c=eD(e,o),d=Math.max(0,Math.min(c-l,u.offset)),f=Math.max(0,u.offset-l+u.size);switch(n===D4&&(s>=f-l&&s<=d+l?n=ap:n=x0),n){case R4:return d;case M4:return f;case x0:return Math.round(f+(d-f)/2);case ap:default:return s>=f&&s<=d?s:s<f?f:d}},getStartIndexForOffset:(e,t,n)=>axe(e,n,t),getStopIndexForStartIndex:(e,t,n,s)=>{const{height:o,total:r,layout:i,width:a}=e,l=lp(i)?a:o,u=id(e,t,s),c=n+l;let d=u.offset+u.size,f=t;for(;f<r-1&&d<c;)f++,d+=id(e,f,s).size;return f},initCache({estimatedItemSize:e=qCe},t){const n={items:{},estimatedItemSize:e,lastVisitedIndex:-1};return n.clearCacheAfterIndex=(s,o=!0)=>{var r,i;n.lastVisitedIndex=Math.min(n.lastVisitedIndex,s-1),(r=t.exposed)==null||r.getItemStyleCache(-1),o&&((i=t.proxy)==null||i.$forceUpdate())},n},clearCache:!1,validateProps:({itemSize:e})=>{}}),cxe=$e({props:{item:{type:Object,required:!0},style:Object,height:Number}});function dxe(e,t,n,s,o,r){return e.item.isTitle?(R(),H("div",{key:0,class:"el-select-group__title",style:rt([e.style,{lineHeight:`${e.height}px`}])},ze(e.item.label),5)):(R(),H("div",{key:1,class:"el-select-group__split",style:rt(e.style)},[K("span",{class:"el-select-group__split-dash",style:rt({top:`${e.height/2}px`})},null,4)],4))}var fxe=Ge(cxe,[["render",dxe]]);function hxe(e,{emit:t}){return{hoverItem:()=>{e.disabled||t("hover",e.index)},selectOptionClick:()=>{e.disabled||t("select",e.item,e.index)}}}const pxe={allowCreate:Boolean,autocomplete:{type:String,default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:_a},collapseTags:Boolean,defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},popperAppendToBody:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:sr},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1}},gxe={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,created:Boolean},mxe=$e({props:gxe,emits:["select","hover"],setup(e,{emit:t}){const{hoverItem:n,selectOptionClick:s}=hxe(e,{emit:t});return{hoverItem:n,selectOptionClick:s}}}),vxe=["aria-selected"];function bxe(e,t,n,s,o,r){return R(),H("li",{"aria-selected":e.selected,style:rt(e.style),class:Q({"el-select-dropdown__option-item":!0,"is-selected":e.selected,"is-disabled":e.disabled,"is-created":e.created,hover:e.hovering}),onMouseenter:t[0]||(t[0]=(...i)=>e.hoverItem&&e.hoverItem(...i)),onClick:t[1]||(t[1]=gt((...i)=>e.selectOptionClick&&e.selectOptionClick(...i),["stop"]))},[Pe(e.$slots,"default",{item:e.item,index:e.index,disabled:e.disabled},()=>[K("span",null,ze(e.item.label),1)])],46,vxe)}var yxe=Ge(mxe,[["render",bxe]]);const W4="ElSelectV2Injection",wxe=$e({name:"ElSelectDropdown",props:{data:Array,hoveringIndex:Number,width:Number},setup(e){const t=Qe(W4),n=V([]),s=V(null),o=O(()=>ep(t.props.estimatedOptionHeight)),r=O(()=>o.value?{itemSize:t.props.itemHeight}:{estimatedSize:t.props.estimatedOptionHeight,itemSize:h=>n.value[h]}),i=(h=[],p)=>{const{props:{valueKey:g}}=t;return cn(p)?h&&h.some(m=>Ps(m,g)===Ps(p,g)):h.includes(p)},a=(h,p)=>{if(cn(p)){const{valueKey:g}=t.props;return Ps(h,g)===Ps(p,g)}else return h===p};return{select:t,listProps:r,listRef:s,isSized:o,isItemDisabled:(h,p)=>{const{disabled:g,multiple:m,multipleLimit:v}=t.props;return g||!p&&(m?v>0&&h.length>=v:!1)},isItemHovering:h=>e.hoveringIndex===h,isItemSelected:(h,p)=>t.props.multiple?i(h,p.value):a(h,p.value),scrollToItem:h=>{const p=s.value;p&&p.scrollToItem(h)},resetScrollTop:()=>{const h=s.value;h&&h.resetScrollTop()}}},render(e,t){var n;const{$slots:s,data:o,listProps:r,select:i,isSized:a,width:l,isItemDisabled:u,isItemHovering:c,isItemSelected:d}=e,f=a?z4:uxe,{props:h,onSelect:p,onHover:g,onKeyboardNavigate:m,onKeyboardSelect:v}=i,{height:b,modelValue:$,multiple:y}=h;if(o.length===0)return Ke("div",{class:"el-select-dropdown",style:{width:`${l}px`}},(n=s.empty)==null?void 0:n.call(s));const w=ce(x=>{const{index:S,data:T}=x,I=T[S];if(T[S].type==="Group")return Ke(fxe,{item:I,style:x.style,height:a?r.itemSize:r.estimatedSize});const _=d($,I),N=u($,_);return Ke(yxe,Ut(dt({},x),{selected:_,disabled:I.disabled||N,created:!!I.created,hovering:c(S),item:I,onSelect:p,onHover:g}),{default:ce(D=>Pe(s,"default",D,()=>[Ke("span",I.label)]))})}),C=Ke(f,dt({ref:"listRef",className:"el-select-dropdown__list",data:o,height:b,width:l,total:o.length,scrollbarAlwaysOn:h.scrollbarAlwaysOn,onKeydown:[t[1]||(t[1]=qt(gt(()=>m("forward"),["stop","prevent"]),["down"])),t[2]||(t[2]=qt(gt(()=>m("backward"),["stop","prevent"]),["up"])),t[3]||(t[3]=qt(gt(v,["stop","prevent"]),["enter"])),t[4]||(t[4]=qt(gt(()=>i.expanded=!1,["stop","prevent"]),["esc"])),t[5]||(t[5]=qt(()=>i.expanded=!1,["tab"]))]},r),{default:w});return Ke("div",{class:{"is-multiple":y,"el-select-dropdown":!0}},[C])}});function $xe(e,t){const n=V(0),s=V(null),o=O(()=>e.allowCreate&&e.filterable);function r(c){const d=f=>f.value===c;return e.options&&e.options.some(d)||t.createdOptions.some(d)}function i(c){!o.value||(e.multiple&&c.created?n.value++:s.value=c)}function a(c){if(o.value)if(c&&c.length>0&&!r(c)){const d={value:c,label:c,created:!0,disabled:!1};t.createdOptions.length>=n.value?t.createdOptions[n.value]=d:t.createdOptions.push(d)}else if(e.multiple)t.createdOptions.length=n.value;else{const d=s.value;t.createdOptions.length=0,d&&d.created&&t.createdOptions.push(d)}}function l(c){if(!o.value||!c||!c.created)return;const d=t.createdOptions.findIndex(f=>f.value===c.value);~d&&(t.createdOptions.splice(d,1),n.value--)}function u(){o.value&&(t.createdOptions.length=0,n.value=0)}return{createNewOption:a,removeNewOption:l,selectNewOption:i,clearAllNewOption:u}}const Cxe=e=>{const t=[];return e.map(n=>{At(n.options)?(t.push({label:n.label,isTitle:!0,type:"Group"}),n.options.forEach(s=>{t.push(s)}),t.push({type:"Group"})):t.push(n)}),t};function xxe(e){const t=V(!1);return{handleCompositionStart:()=>{t.value=!0},handleCompositionUpdate:r=>{const i=r.target.value,a=i[i.length-1]||"";t.value=!Mb(a)},handleCompositionEnd:r=>{t.value&&(t.value=!1,Vt(e)&&e(r))}}}const tD="",nD=11,kxe={larget:51,default:42,small:33},Sxe=(e,t)=>{const{t:n}=Tn(),{form:s,formItem:o}=cf(),r=En({inputValue:tD,displayInputValue:tD,calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:"",query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),i=V(-1),a=V(-1),l=V(null),u=V(null),c=V(null),d=V(null),f=V(null),h=V(null),p=V(null),g=V(!1),m=O(()=>e.disabled||(s==null?void 0:s.disabled)),v=O(()=>{const Ue=I.value.length*34;return Ue>e.height?e.height:Ue}),b=O(()=>e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!==""),$=O(()=>{const Ue=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:b.value;return e.clearable&&!m.value&&r.comboBoxHovering&&Ue}),y=O(()=>e.remote&&e.filterable?"":zp),w=O(()=>y.value&&g.value?"is-reverse":""),C=O(()=>(o==null?void 0:o.validateState)||""),x=O(()=>MP[C.value]),S=O(()=>e.remote?300:0),T=O(()=>{const Ue=I.value;return e.loading?e.loadingText||n("el.select.loading"):e.remote&&r.inputValue===""&&Ue.length===0?!1:e.filterable&&r.inputValue&&Ue.length>0?e.noMatchText||n("el.select.noMatch"):Ue.length===0?e.noDataText||n("el.select.noData"):null}),I=O(()=>{const Ue=mt=>{const tn=r.inputValue;return tn?mt.label.includes(tn):!0};return e.loading?[]:Cxe(e.options.concat(r.createdOptions).map(mt=>{if(At(mt.options)){const tn=mt.options.filter(Ue);if(tn.length>0)return Ut(dt({},mt),{options:tn})}else if(e.remote||Ue(mt))return mt;return null}).filter(mt=>mt!==null))}),_=O(()=>I.value.every(Ue=>Ue.disabled)),N=Ss(),D=O(()=>N.value==="small"?"small":"default"),F=O(()=>{const Ue=h.value,mt=D.value||"default",tn=Ue?parseInt(getComputedStyle(Ue).paddingLeft):0,ds=Ue?parseInt(getComputedStyle(Ue).paddingRight):0;return r.selectWidth-ds-tn-kxe[mt]}),P=()=>{var Ue,mt,tn;a.value=((tn=(mt=(Ue=f.value)==null?void 0:Ue.getBoundingClientRect)==null?void 0:mt.call(Ue))==null?void 0:tn.width)||200},M=O(()=>({width:`${r.calculatedWidth===0?nD:Math.ceil(r.calculatedWidth)+nD}px`})),B=O(()=>At(e.modelValue)?e.modelValue.length===0&&!r.displayInputValue:e.filterable?r.displayInputValue.length===0:!0),j=O(()=>{const Ue=e.placeholder||n("el.select.placeholder");return e.multiple?Ue:r.selectedLabel||Ue}),X=O(()=>{var Ue,mt;return(mt=(Ue=d.value)==null?void 0:Ue.popperRef)==null?void 0:mt.contentRef}),ae=O(()=>{if(e.multiple){const Ue=e.modelValue.length;if(e.modelValue.length>0)return I.value.findIndex(mt=>mt.value===e.modelValue[Ue-1])}else if(e.modelValue)return I.value.findIndex(Ue=>Ue.value===e.modelValue);return-1}),be=O(()=>g.value&&T.value!==!1),{createNewOption:ie,removeNewOption:ye,selectNewOption:ue,clearAllNewOption:Z}=$xe(e,r),{handleCompositionStart:ee,handleCompositionUpdate:te,handleCompositionEnd:fe}=xxe(Ue=>Dt(Ue)),De=()=>{var Ue,mt,tn;(mt=(Ue=u.value).focus)==null||mt.call(Ue),(tn=d.value)==null||tn.updatePopper()},We=()=>{if(!e.automaticDropdown&&!m.value)return r.isComposing&&(r.softFocus=!0),ft(()=>{var Ue,mt;g.value=!g.value,(mt=(Ue=u.value)==null?void 0:Ue.focus)==null||mt.call(Ue)})},He=()=>(e.filterable&&r.inputValue!==r.selectedLabel&&(r.query=r.selectedLabel),Y(r.inputValue),ft(()=>{ie(r.inputValue)})),Ve=nr(He,S.value),Y=Ue=>{r.previousQuery!==Ue&&(r.previousQuery=Ue,e.filterable&&Vt(e.filterMethod)?e.filterMethod(Ue):e.filterable&&e.remote&&Vt(e.remoteMethod)&&e.remoteMethod(Ue))},ne=Ue=>{wi(e.modelValue,Ue)||t(Zs,Ue)},q=Ue=>{t(Bt,Ue),ne(Ue),r.previousValue=Ue.toString()},le=(Ue=[],mt)=>{if(!cn(mt))return Ue.indexOf(mt);const tn=e.valueKey;let ds=-1;return Ue.some((aa,Tr)=>Ps(aa,tn)===Ps(mt,tn)?(ds=Tr,!0):!1),ds},xe=Ue=>cn(Ue)?Ps(Ue,e.valueKey):Ue,oe=Ue=>cn(Ue)?Ue.label:Ue,Me=()=>{if(!(e.collapseTags&&!e.filterable))return ft(()=>{var Ue,mt;if(!u.value)return;const tn=h.value;f.value.height=tn.offsetHeight,g.value&&T.value!==!1&&((mt=(Ue=d.value)==null?void 0:Ue.updatePopper)==null||mt.call(Ue))})},Re=()=>{var Ue,mt;if(ve(),P(),(mt=(Ue=d.value)==null?void 0:Ue.updatePopper)==null||mt.call(Ue),e.multiple)return Me()},ve=()=>{const Ue=h.value;Ue&&(r.selectWidth=Ue.getBoundingClientRect().width)},Ae=(Ue,mt,tn=!0)=>{var ds,aa;if(e.multiple){let Tr=e.modelValue.slice();const _c=le(Tr,xe(Ue));_c>-1?(Tr=[...Tr.slice(0,_c),...Tr.slice(_c+1)],r.cachedOptions.splice(_c,1),ye(Ue)):(e.multipleLimit<=0||Tr.length<e.multipleLimit)&&(Tr=[...Tr,xe(Ue)],r.cachedOptions.push(Ue),ue(Ue),he(mt)),q(Tr),Ue.created&&(r.query="",Y(""),r.inputLength=20),e.filterable&&!e.reserveKeyword&&((aa=(ds=u.value).focus)==null||aa.call(ds),E("")),e.filterable&&(r.calculatedWidth=p.value.getBoundingClientRect().width),Me(),ht()}else i.value=mt,r.selectedLabel=Ue.label,q(xe(Ue)),g.value=!1,r.isComposing=!1,r.isSilentBlur=tn,ue(Ue),Ue.created||Z(),he(mt)},it=(Ue,mt)=>{const tn=e.modelValue.indexOf(mt.value);if(tn>-1&&!m.value){const ds=[...e.modelValue.slice(0,tn),...e.modelValue.slice(tn+1)];return r.cachedOptions.splice(tn,1),q(ds),t("remove-tag",mt.value),r.softFocus=!0,ye(mt),ft(De)}Ue.stopPropagation()},Je=Ue=>{const mt=r.isComposing;r.isComposing=!0,r.softFocus?r.softFocus=!1:mt||t("focus",Ue)},st=()=>(r.softFocus=!1,ft(()=>{var Ue,mt;(mt=(Ue=u.value)==null?void 0:Ue.blur)==null||mt.call(Ue),p.value&&(r.calculatedWidth=p.value.getBoundingClientRect().width),r.isSilentBlur?r.isSilentBlur=!1:r.isComposing&&t("blur"),r.isComposing=!1})),vt=()=>{r.displayInputValue.length>0?E(""):g.value=!1},z=Ue=>{if(r.displayInputValue.length===0){Ue.preventDefault();const mt=e.modelValue.slice();mt.pop(),ye(r.cachedOptions.pop()),q(mt)}},k=()=>{let Ue;return At(e.modelValue)?Ue=[]:Ue="",r.softFocus=!0,e.multiple?r.cachedOptions=[]:r.selectedLabel="",g.value=!1,q(Ue),t("clear"),Z(),ft(De)},E=Ue=>{r.displayInputValue=Ue,r.inputValue=Ue},W=(Ue,mt=void 0)=>{const tn=I.value;if(!["forward","backward"].includes(Ue)||m.value||tn.length<=0||_.value)return;if(!g.value)return We();mt===void 0&&(mt=r.hoveringIndex);let ds=-1;Ue==="forward"?(ds=mt+1,ds>=tn.length&&(ds=0)):Ue==="backward"&&(ds=mt-1,ds<0&&(ds=tn.length-1));const aa=tn[ds];if(aa.disabled||aa.type==="Group")return W(Ue,ds);he(ds),ln(ds)},G=()=>{if(g.value)~r.hoveringIndex&&Ae(I.value[r.hoveringIndex],r.hoveringIndex,!1);else return We()},he=Ue=>{r.hoveringIndex=Ue},_e=()=>{r.hoveringIndex=-1},ht=()=>{var Ue;const mt=u.value;mt&&((Ue=mt.focus)==null||Ue.call(mt))},Dt=Ue=>{const mt=Ue.target.value;if(E(mt),r.displayInputValue.length>0&&!g.value&&(g.value=!0),r.calculatedWidth=p.value.getBoundingClientRect().width,e.multiple&&Me(),e.remote)Ve();else return He()},xt=()=>(g.value=!1,st()),zt=()=>(r.inputValue=r.displayInputValue,ft(()=>{~ae.value&&(he(ae.value),ln(r.hoveringIndex))})),ln=Ue=>{c.value.scrollToItem(Ue)},ai=()=>{if(_e(),e.multiple)if(e.modelValue.length>0){let Ue=!1;r.cachedOptions.length=0,r.previousValue=e.modelValue.toString(),e.modelValue.map(mt=>{const tn=I.value.findIndex(ds=>xe(ds)===mt);~tn&&(r.cachedOptions.push(I.value[tn]),Ue||he(tn),Ue=!0)})}else r.cachedOptions=[],r.previousValue="";else if(b.value){r.previousValue=e.modelValue;const Ue=I.value,mt=Ue.findIndex(tn=>xe(tn)===e.modelValue);~mt?(r.selectedLabel=Ue[mt].label,he(mt)):r.selectedLabel=`${e.modelValue}`}else r.selectedLabel="",r.previousValue="";P()};return Le(g,Ue=>{var mt,tn;t("visible-change",Ue),Ue?(tn=(mt=d.value).update)==null||tn.call(mt):(r.displayInputValue="",ie(""))}),Le(()=>e.modelValue,(Ue,mt)=>{var tn;(!Ue||Ue.toString()!==r.previousValue)&&ai(),wi(Ue,mt)||(tn=o==null?void 0:o.validate)==null||tn.call(o,"change")},{deep:!0}),Le(()=>e.options,()=>{const Ue=u.value;(!Ue||Ue&&document.activeElement!==Ue)&&ai()},{deep:!0}),Le(I,()=>ft(c.value.resetScrollTop)),Ft(()=>{ai(),Al(f.value,Re)}),Mp(()=>{Dl(f.value,Re)}),{collapseTagSize:D,currentPlaceholder:j,expanded:g,emptyText:T,popupHeight:v,debounce:S,filteredOptions:I,iconComponent:y,iconReverse:w,inputWrapperStyle:M,popperSize:a,dropdownMenuVisible:be,hasModelValue:b,shouldShowPlaceholder:B,selectDisabled:m,selectSize:N,showClearBtn:$,states:r,tagMaxWidth:F,calculatorRef:p,controlRef:l,inputRef:u,menuRef:c,popper:d,selectRef:f,selectionRef:h,popperRef:X,validateState:C,validateIcon:x,Effect:eL,debouncedOnInputChange:Ve,deleteTag:it,getLabel:oe,getValueKey:xe,handleBlur:st,handleClear:k,handleClickOutside:xt,handleDel:z,handleEsc:vt,handleFocus:Je,handleMenuEnter:zt,handleResize:Re,toggleMenu:We,scrollTo:ln,onInput:Dt,onKeyboardNavigate:W,onKeyboardSelect:G,onSelect:Ae,onHover:he,onUpdateInputValue:E,handleCompositionStart:ee,handleCompositionEnd:fe,handleCompositionUpdate:te}},Ixe=$e({name:"ElSelectV2",components:{ElSelectMenu:wxe,ElTag:Pb,ElTooltip:lr,ElIcon:Pt},directives:{ClickOutside:Nl,ModelText:I2},props:pxe,emits:[Bt,Zs,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const n=Sxe(e,t);return jt(W4,{props:En(Ut(dt({},ko(e)),{height:n.popupHeight})),onSelect:n.onSelect,onHover:n.onHover,onKeyboardNavigate:n.onKeyboardNavigate,onKeyboardSelect:n.onKeyboardSelect}),n}}),Exe={key:0},Txe={key:1,class:"el-select-v2__selection"},_xe={key:0,class:"el-select-v2__selected-item"},Nxe=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],Axe=["textContent"],Dxe={class:"el-select-v2__selected-item el-select-v2__input-wrapper"},Rxe=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],Mxe=["textContent"],Oxe={class:"el-select-v2__suffix"},Fxe={class:"el-select-v2__empty"};function Pxe(e,t,n,s,o,r){const i=de("el-tag"),a=de("el-icon"),l=de("el-select-menu"),u=de("el-tooltip"),c=Wo("model-text"),d=Wo("click-outside");return Ct((R(),H("div",{ref:"selectRef",class:Q([[e.selectSize?"el-select-v2--"+e.selectSize:""],"el-select-v2"]),onClick:t[24]||(t[24]=gt((...f)=>e.toggleMenu&&e.toggleMenu(...f),["stop"])),onMouseenter:t[25]||(t[25]=f=>e.states.comboBoxHovering=!0),onMouseleave:t[26]||(t[26]=f=>e.states.comboBoxHovering=!1)},[pe(u,{ref:"popper",visible:e.dropdownMenuVisible,"onUpdate:visible":t[22]||(t[22]=f=>e.dropdownMenuVisible=f),"append-to-body":e.popperAppendToBody,"popper-class":`el-select-v2__popper ${e.popperClass}`,"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":e.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:"light",placement:"bottom-start",pure:"",transition:"el-zoom-in-top",trigger:"click",persistent:"",onShow:e.handleMenuEnter,onHide:t[23]||(t[23]=f=>e.states.inputValue=e.states.displayInputValue)},{default:ce(()=>{var f;return[K("div",{ref:"selectionRef",class:Q(["el-select-v2__wrapper",{"is-focused":e.states.isComposing,"is-hovering":e.states.comboBoxHovering,"is-filterable":e.filterable,"is-disabled":e.disabled}])},[e.$slots.prefix?(R(),H("div",Exe,[Pe(e.$slots,"prefix")])):me("v-if",!0),e.multiple?(R(),H("div",Txe,[e.collapseTags&&e.modelValue.length>0?(R(),H("div",_xe,[pe(i,{closable:!e.selectDisabled&&!((f=e.states.cachedOptions[0])==null?void 0:f.disable),size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:t[0]||(t[0]=h=>e.deleteTag(h,e.states.cachedOptions[0]))},{default:ce(()=>{var h;return[K("span",{class:"el-select-v2__tags-text",style:rt({maxWidth:`${e.tagMaxWidth}px`})},ze((h=e.states.cachedOptions[0])==null?void 0:h.label),5)]}),_:1},8,["closable","size"]),e.modelValue.length>1?(R(),ke(i,{key:0,closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""},{default:ce(()=>[K("span",{class:"el-select-v2__tags-text",style:rt({maxWidth:`${e.tagMaxWidth}px`})},"+ "+ze(e.modelValue.length-1),5)]),_:1},8,["size"])):me("v-if",!0)])):(R(!0),H(ct,{key:1},en(e.states.cachedOptions,(h,p)=>(R(),H("div",{key:p,class:"el-select-v2__selected-item"},[(R(),ke(i,{key:e.getValueKey(h),closable:!e.selectDisabled&&!h.disabled,size:e.collapseTagSize,type:"info","disable-transitions":"",onClose:g=>e.deleteTag(g,h)},{default:ce(()=>[K("span",{class:"el-select-v2__tags-text",style:rt({maxWidth:`${e.tagMaxWidth}px`})},ze(e.getLabel(h)),5)]),_:2},1032,["closable","size","onClose"]))]))),128)),K("div",{class:"el-select-v2__selected-item el-select-v2__input-wrapper",style:rt(e.inputWrapperStyle)},[Ct(K("input",{id:e.id,ref:"inputRef",autocomplete:e.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":e.expanded,"aria-labelledby":e.label,class:Q(["el-select-v2__combobox-input",[e.selectSize?`is-${e.selectSize}`:""]]),disabled:e.disabled,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",name:e.name,unselectable:e.expanded?"on":void 0,"onUpdate:modelValue":t[1]||(t[1]=(...h)=>e.onUpdateInputValue&&e.onUpdateInputValue(...h)),onFocus:t[2]||(t[2]=(...h)=>e.handleFocus&&e.handleFocus(...h)),onInput:t[3]||(t[3]=(...h)=>e.onInput&&e.onInput(...h)),onCompositionstart:t[4]||(t[4]=(...h)=>e.handleCompositionStart&&e.handleCompositionStart(...h)),onCompositionupdate:t[5]||(t[5]=(...h)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...h)),onCompositionend:t[6]||(t[6]=(...h)=>e.handleCompositionEnd&&e.handleCompositionEnd(...h)),onKeydown:[t[7]||(t[7]=qt(gt(h=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),t[8]||(t[8]=qt(gt(h=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),t[9]||(t[9]=qt(gt((...h)=>e.onKeyboardSelect&&e.onKeyboardSelect(...h),["stop","prevent"]),["enter"])),t[10]||(t[10]=qt(gt((...h)=>e.handleEsc&&e.handleEsc(...h),["stop","prevent"]),["esc"])),t[11]||(t[11]=qt(gt((...h)=>e.handleDel&&e.handleDel(...h),["stop"]),["delete"]))]},null,42,Nxe),[[c,e.states.displayInputValue]]),e.filterable?(R(),H("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:"el-select-v2__input-calculator",textContent:ze(e.states.displayInputValue)},null,8,Axe)):me("v-if",!0)],4)])):(R(),H(ct,{key:2},[K("div",Dxe,[Ct(K("input",{id:e.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":e.label,"aria-expanded":e.expanded,autocapitalize:"off",autocomplete:e.autocomplete,class:"el-select-v2__combobox-input",disabled:e.disabled,name:e.name,role:"combobox",readonly:!e.filterable,spellcheck:"false",type:"text",unselectable:e.expanded?"on":void 0,onCompositionstart:t[12]||(t[12]=(...h)=>e.handleCompositionStart&&e.handleCompositionStart(...h)),onCompositionupdate:t[13]||(t[13]=(...h)=>e.handleCompositionUpdate&&e.handleCompositionUpdate(...h)),onCompositionend:t[14]||(t[14]=(...h)=>e.handleCompositionEnd&&e.handleCompositionEnd(...h)),onFocus:t[15]||(t[15]=(...h)=>e.handleFocus&&e.handleFocus(...h)),onInput:t[16]||(t[16]=(...h)=>e.onInput&&e.onInput(...h)),onKeydown:[t[17]||(t[17]=qt(gt(h=>e.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),t[18]||(t[18]=qt(gt(h=>e.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),t[19]||(t[19]=qt(gt((...h)=>e.onKeyboardSelect&&e.onKeyboardSelect(...h),["stop","prevent"]),["enter"])),t[20]||(t[20]=qt(gt((...h)=>e.handleEsc&&e.handleEsc(...h),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":t[21]||(t[21]=(...h)=>e.onUpdateInputValue&&e.onUpdateInputValue(...h))},null,40,Rxe),[[c,e.states.displayInputValue]])]),e.filterable?(R(),H("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:"el-select-v2__selected-item el-select-v2__input-calculator",textContent:ze(e.states.displayInputValue)},null,8,Mxe)):me("v-if",!0)],64)),e.shouldShowPlaceholder?(R(),H("span",{key:3,class:Q({"el-select-v2__placeholder":!0,"is-transparent":e.states.isComposing||(e.placeholder&&e.multiple?e.modelValue.length===0:!e.hasModelValue)})},ze(e.currentPlaceholder),3)):me("v-if",!0),K("span",Oxe,[e.iconComponent?Ct((R(),ke(a,{key:0,class:Q(["el-select-v2__caret","el-input__icon",e.iconReverse])},{default:ce(()=>[(R(),ke(on(e.iconComponent)))]),_:1},8,["class"])),[[sn,!e.showClearBtn]]):me("v-if",!0),e.showClearBtn&&e.clearIcon?(R(),ke(a,{key:1,class:"el-select-v2__caret el-input__icon",onClick:gt(e.handleClear,["prevent","stop"])},{default:ce(()=>[(R(),ke(on(e.clearIcon)))]),_:1},8,["onClick"])):me("v-if",!0),e.validateState&&e.validateIcon?(R(),ke(a,{key:2,class:"el-input__icon el-input__validateIcon"},{default:ce(()=>[(R(),ke(on(e.validateIcon)))]),_:1})):me("v-if",!0)])],2)]}),content:ce(()=>[pe(l,{ref:"menuRef",data:e.filteredOptions,width:e.popperSize,"hovering-index":e.states.hoveringIndex,"scrollbar-always-on":e.scrollbarAlwaysOn},{default:ce(f=>[Pe(e.$slots,"default",Wu(Hu(f)))]),empty:ce(()=>[Pe(e.$slots,"empty",{},()=>[K("p",Fxe,ze(e.emptyText?e.emptyText:""),1)])]),_:3},8,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","append-to-body","popper-class","popper-options","onShow"])],34)),[[d,e.handleClickOutside,e.popperRef]])}var Gv=Ge(Ixe,[["render",Pxe]]);Gv.install=e=>{e.component(Gv.name,Gv)};const Lxe=Gv,Bxe=Lxe,zxe=$e({name:"ImgPlaceholder"}),Vxe={viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},Wxe=K("path",{d:"M64 896V128h896v768H64z m64-128l192-192 116.352 116.352L640 448l256 307.2V192H128v576z m224-480a96 96 0 1 1-0.064 192.064A96 96 0 0 1 352 288z"},null,-1),Hxe=[Wxe];function Uxe(e,t,n,s,o,r){return R(),H("svg",Vxe,Hxe)}var jxe=Ge(zxe,[["render",Uxe]]);const Gxe=yt({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),Kxe=$e({name:"ElSkeletonItem",components:{ImgPlaceholder:jxe},props:Gxe,setup(){return{ns:Mt("skeleton")}}});function qxe(e,t,n,s,o,r){const i=de("img-placeholder");return R(),H("div",{class:Q([e.ns.e("item"),e.ns.e(e.variant)])},[e.variant==="image"?(R(),ke(i,{key:0})):me("v-if",!0)],2)}var S0=Ge(Kxe,[["render",qxe]]);const Yxe=yt({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),Xxe=$e({name:"ElSkeleton",components:{[S0.name]:S0},props:Yxe,setup(e){const t=Mt("skeleton"),n=O(()=>e.loading),s=ose(n,e.throttle);return{ns:t,uiLoading:s}}});function Zxe(e,t,n,s,o,r){const i=de("el-skeleton-item");return e.uiLoading?(R(),H("div",uo({key:0,class:[e.ns.b(),e.ns.is("animated",e.animated)]},e.$attrs),[(R(!0),H(ct,null,en(e.count,a=>(R(),H(ct,{key:a},[e.loading?Pe(e.$slots,"template",{key:a},()=>[pe(i,{class:Q(e.ns.is("first")),variant:"p"},null,8,["class"]),(R(!0),H(ct,null,en(e.rows,l=>(R(),ke(i,{key:l,class:Q([e.ns.e("paragraph"),e.ns.is("last",l===e.rows&&e.rows>1)]),variant:"p"},null,8,["class"]))),128))]):me("v-if",!0)],64))),128))],16)):Pe(e.$slots,"default",Wu(uo({key:1},e.$attrs)))}var Jxe=Ge(Xxe,[["render",Zxe]]);const Qxe=Gt(Jxe,{SkeletonItem:S0}),e2e=cs(S0),t2e=(e,t,n)=>{const s=V(null),o=V(!1),r=O(()=>t.value instanceof Function),i=O(()=>r.value&&t.value(e.modelValue)||e.modelValue),a=nr(()=>{n.value&&(o.value=!0)},50),l=nr(()=>{n.value&&(o.value=!1)},50);return{tooltip:s,tooltipVisible:o,formatValue:i,displayTooltip:a,hideTooltip:l}},n2e=(e,t,n)=>{const{disabled:s,min:o,max:r,step:i,showTooltip:a,precision:l,sliderSize:u,formatTooltip:c,emitChange:d,resetSize:f,updateDragging:h}=Qe("SliderProvider"),{tooltip:p,tooltipVisible:g,formatValue:m,displayTooltip:v,hideTooltip:b}=t2e(e,c,a),$=O(()=>`${(e.modelValue-o.value)/(r.value-o.value)*100}%`),y=O(()=>e.vertical?{bottom:$.value}:{left:$.value}),w=()=>{t.hovering=!0,v()},C=()=>{t.hovering=!1,t.dragging||b()},x=P=>{s.value||(P.preventDefault(),_(P),wn(window,"mousemove",N),wn(window,"touchmove",N),wn(window,"mouseup",D),wn(window,"touchend",D),wn(window,"contextmenu",D))},S=()=>{s.value||(t.newPosition=parseFloat($.value)-i.value/(r.value-o.value)*100,F(t.newPosition),d())},T=()=>{s.value||(t.newPosition=parseFloat($.value)+i.value/(r.value-o.value)*100,F(t.newPosition),d())},I=P=>{let M,B;return P.type.startsWith("touch")?(B=P.touches[0].clientY,M=P.touches[0].clientX):(B=P.clientY,M=P.clientX),{clientX:M,clientY:B}},_=P=>{t.dragging=!0,t.isClick=!0;const{clientX:M,clientY:B}=I(P);e.vertical?t.startY=B:t.startX=M,t.startPosition=parseFloat($.value),t.newPosition=t.startPosition},N=P=>{if(t.dragging){t.isClick=!1,v(),f();let M;const{clientX:B,clientY:j}=I(P);e.vertical?(t.currentY=j,M=(t.startY-t.currentY)/u.value*100):(t.currentX=B,M=(t.currentX-t.startX)/u.value*100),t.newPosition=t.startPosition+M,F(t.newPosition)}},D=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||b(),t.isClick||(F(t.newPosition),d())},0),qn(window,"mousemove",N),qn(window,"touchmove",N),qn(window,"mouseup",D),qn(window,"touchend",D),qn(window,"contextmenu",D))},F=async P=>{if(P===null||isNaN(P))return;P<0?P=0:P>100&&(P=100);const M=100/((r.value-o.value)/i.value);let j=Math.round(P/M)*M*(r.value-o.value)*.01+o.value;j=parseFloat(j.toFixed(l.value)),n(Bt,j),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await ft(),t.dragging&&v(),p.value.updatePopper()};return Le(()=>t.dragging,P=>{h(P)}),{tooltip:p,tooltipVisible:g,showTooltip:a,wrapperStyle:y,formatValue:m,handleMouseEnter:w,handleMouseLeave:C,onButtonDown:x,onLeftKeyDown:S,onRightKeyDown:T,setPosition:F}},s2e=$e({name:"ElSliderButton",components:{ElTooltip:lr},props:{modelValue:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:{type:String,default:""}},emits:[Bt],setup(e,{emit:t}){const n=En({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:e.modelValue}),{tooltip:s,showTooltip:o,tooltipVisible:r,wrapperStyle:i,formatValue:a,handleMouseEnter:l,handleMouseLeave:u,onButtonDown:c,onLeftKeyDown:d,onRightKeyDown:f,setPosition:h}=n2e(e,n,t),{hovering:p,dragging:g}=ko(n);return{tooltip:s,tooltipVisible:r,showTooltip:o,wrapperStyle:i,formatValue:a,handleMouseEnter:l,handleMouseLeave:u,onButtonDown:c,onLeftKeyDown:d,onRightKeyDown:f,setPosition:h,hovering:p,dragging:g}}});function o2e(e,t,n,s,o,r){const i=de("el-tooltip");return R(),H("div",{ref:"button",class:Q(["el-slider__button-wrapper",{hover:e.hovering,dragging:e.dragging}]),style:rt(e.wrapperStyle),tabindex:"0",onMouseenter:t[1]||(t[1]=(...a)=>e.handleMouseEnter&&e.handleMouseEnter(...a)),onMouseleave:t[2]||(t[2]=(...a)=>e.handleMouseLeave&&e.handleMouseLeave(...a)),onMousedown:t[3]||(t[3]=(...a)=>e.onButtonDown&&e.onButtonDown(...a)),onTouchstart:t[4]||(t[4]=(...a)=>e.onButtonDown&&e.onButtonDown(...a)),onFocus:t[5]||(t[5]=(...a)=>e.handleMouseEnter&&e.handleMouseEnter(...a)),onBlur:t[6]||(t[6]=(...a)=>e.handleMouseLeave&&e.handleMouseLeave(...a)),onKeydown:[t[7]||(t[7]=qt((...a)=>e.onLeftKeyDown&&e.onLeftKeyDown(...a),["left"])),t[8]||(t[8]=qt((...a)=>e.onRightKeyDown&&e.onRightKeyDown(...a),["right"])),t[9]||(t[9]=qt(gt((...a)=>e.onLeftKeyDown&&e.onLeftKeyDown(...a),["prevent"]),["down"])),t[10]||(t[10]=qt(gt((...a)=>e.onRightKeyDown&&e.onRightKeyDown(...a),["prevent"]),["up"]))]},[pe(i,{ref:"tooltip",visible:e.tooltipVisible,"onUpdate:visible":t[0]||(t[0]=a=>e.tooltipVisible=a),placement:"top","stop-popper-mouse-event":!1,"popper-class":e.tooltipClass,disabled:!e.showTooltip,persistent:""},{content:ce(()=>[K("span",null,ze(e.formatValue),1)]),default:ce(()=>[K("div",{class:Q(["el-slider__button",{hover:e.hovering,dragging:e.dragging}])},null,2)]),_:1},8,["visible","popper-class","disabled"])],38)}var r2e=Ge(s2e,[["render",o2e]]);const i2e=$e({name:"ElMarker",props:{mark:{type:[String,Object],default:()=>{}}},setup(e){return{label:O(()=>typeof e.mark=="string"?e.mark:e.mark.label)}},render(){var e;return Ke("div",{class:"el-slider__marks-text",style:(e=this.mark)==null?void 0:e.style},this.label)}}),a2e=e=>O(()=>e.marks?Object.keys(e.marks).map(parseFloat).sort((n,s)=>n-s).filter(n=>n<=e.max&&n>=e.min).map(n=>({point:n,position:(n-e.min)*100/(e.max-e.min),mark:e.marks[n]})):[]),l2e=(e,t,n)=>{const s=Qe(ar,{}),o=Qe(Ai,{}),r=bo(null),i=V(null),a=V(null),l={firstButton:i,secondButton:a},u=O(()=>e.disabled||s.disabled||!1),c=O(()=>Math.min(t.firstValue,t.secondValue)),d=O(()=>Math.max(t.firstValue,t.secondValue)),f=O(()=>e.range?`${100*(d.value-c.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),h=O(()=>e.range?`${100*(c.value-e.min)/(e.max-e.min)}%`:"0%"),p=O(()=>e.vertical?{height:e.height}:{}),g=O(()=>e.vertical?{height:f.value,bottom:h.value}:{width:f.value,left:h.value}),m=()=>{r.value&&(t.sliderSize=r.value[`client${e.vertical?"Height":"Width"}`])},v=x=>{const S=e.min+x*(e.max-e.min)/100;if(!e.range){i.value.setPosition(x);return}let T;Math.abs(c.value-S)<Math.abs(d.value-S)?T=t.firstValue<t.secondValue?"firstButton":"secondButton":T=t.firstValue>t.secondValue?"firstButton":"secondButton",l[T].value.setPosition(x)},b=x=>{t.firstValue=x,y(e.range?[c.value,d.value]:x)},$=x=>{t.secondValue=x,e.range&&y([c.value,d.value])},y=x=>{n(Bt,x),n(vl,x)},w=async()=>{await ft(),n(Zs,e.range?[c.value,d.value]:e.modelValue)};return{elFormItem:o,slider:r,firstButton:i,secondButton:a,sliderDisabled:u,minValue:c,maxValue:d,runwayStyle:p,barStyle:g,resetSize:m,setPosition:v,emitChange:w,onSliderClick:x=>{if(!(u.value||t.dragging)){if(m(),e.vertical){const S=r.value.getBoundingClientRect().bottom;v((S-x.clientY)/t.sliderSize*100)}else{const S=r.value.getBoundingClientRect().left;v((x.clientX-S)/t.sliderSize*100)}w()}},setFirstValue:b,setSecondValue:$}},u2e=(e,t,n,s)=>({stops:O(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const i=(e.max-e.min)/e.step,a=100*e.step/(e.max-e.min),l=Array.from({length:i-1}).map((u,c)=>(c+1)*a);return e.range?l.filter(u=>u<100*(n.value-e.min)/(e.max-e.min)||u>100*(s.value-e.min)/(e.max-e.min)):l.filter(u=>u>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:i=>e.vertical?{bottom:`${i}%`}:{left:`${i}%`}}),c2e=$e({name:"ElSlider",components:{ElInputNumber:w4,SliderButton:r2e,SliderMarker:i2e},props:{modelValue:{type:[Number,Array],default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},size:{type:String,validator:sr},inputSize:{type:String,validator:sr},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Function,default:void 0},disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String,default:""},debounce:{type:Number,default:300},label:{type:String,default:void 0},tooltipClass:{type:String,default:void 0},marks:Object},emits:[Bt,Zs,vl],setup(e,{emit:t}){const n=En({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:s,slider:o,firstButton:r,secondButton:i,sliderDisabled:a,minValue:l,maxValue:u,runwayStyle:c,barStyle:d,resetSize:f,emitChange:h,onSliderClick:p,setFirstValue:g,setSecondValue:m}=l2e(e,n,t),{stops:v,getStopStyle:b}=u2e(e,n,l,u),$=Ss(),y=O(()=>e.inputSize||$.value),w="el-slider",C=O(()=>[w,`${w}--${$.value}`,e.vertical?"is-vertical":"",e.showInput?"el-slider--with-input":""]),x=a2e(e);d2e(e,n,l,u,t,s);const S=O(()=>{const M=[e.min,e.max,e.step].map(B=>{const j=`${B}`.split(".")[1];return j?j.length:0});return Math.max.apply(null,M)}),{sliderWrapper:T}=f2e(e,n,f),{firstValue:I,secondValue:_,oldValue:N,dragging:D,sliderSize:F}=ko(n),P=M=>{n.dragging=M};return jt("SliderProvider",Ut(dt({},ko(e)),{sliderSize:F,disabled:a,precision:S,emitChange:h,resetSize:f,updateDragging:P})),{firstValue:I,secondValue:_,oldValue:N,dragging:D,sliderSize:F,slider:o,firstButton:r,secondButton:i,sliderDisabled:a,runwayStyle:c,barStyle:d,emitChange:h,onSliderClick:p,getStopStyle:b,setFirstValue:g,setSecondValue:m,stops:v,markList:x,sliderWrapper:T,sliderWrapperSize:$,sliderInputSize:y,sliderKls:C}}}),d2e=(e,t,n,s,o,r)=>{const i=u=>{o(Bt,u),o(vl,u)},a=()=>e.range?![n.value,s.value].every((u,c)=>u===t.oldValue[c]):e.modelValue!==t.oldValue,l=()=>{var u,c;if(e.min>e.max){So("Slider","min should not be greater than max.");return}const d=e.modelValue;e.range&&Array.isArray(d)?d[1]<e.min?i([e.min,e.min]):d[0]>e.max?i([e.max,e.max]):d[0]<e.min?i([e.min,d[1]]):d[1]>e.max?i([d[0],e.max]):(t.firstValue=d[0],t.secondValue=d[1],a()&&((u=r.validate)==null||u.call(r,"change"),t.oldValue=d.slice())):!e.range&&typeof d=="number"&&!isNaN(d)&&(d<e.min?i(e.min):d>e.max?i(e.max):(t.firstValue=d,a()&&((c=r.validate)==null||c.call(r,"change"),t.oldValue=d)))};l(),Le(()=>t.dragging,u=>{u||l()}),Le(()=>e.modelValue,(u,c)=>{t.dragging||Array.isArray(u)&&Array.isArray(c)&&u.every((d,f)=>d===c[f])||l()}),Le(()=>[e.min,e.max],()=>{l()})},f2e=(e,t,n)=>{const s=V(null);return Ft(async()=>{let o;e.range?(Array.isArray(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue],o=`${t.firstValue}-${t.secondValue}`):(typeof e.modelValue!="number"||isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue,o=t.firstValue),s.value.setAttribute("aria-valuetext",o),s.value.setAttribute("aria-label",e.label?e.label:`slider between ${e.min} and ${e.max}`),wn(window,"resize",n),await ft(),n()}),us(()=>{qn(window,"resize",n)}),{sliderWrapper:s}},h2e=["aria-valuemin","aria-valuemax","aria-orientation","aria-disabled"],p2e={key:1},g2e={class:"el-slider__marks"};function m2e(e,t,n,s,o,r){const i=de("slider-button"),a=de("slider-marker"),l=de("el-input-number");return R(),H("div",{ref:"sliderWrapper",class:Q(e.sliderKls),role:"slider","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled},[K("div",{ref:"slider",class:Q(["el-slider__runway",{"show-input":e.showInput&&!e.range,disabled:e.sliderDisabled}]),style:rt(e.runwayStyle),onClick:t[0]||(t[0]=(...u)=>e.onSliderClick&&e.onSliderClick(...u))},[K("div",{class:"el-slider__bar",style:rt(e.barStyle)},null,4),pe(i,{ref:"firstButton","model-value":e.firstValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,"onUpdate:modelValue":e.setFirstValue},null,8,["model-value","vertical","tooltip-class","onUpdate:modelValue"]),e.range?(R(),ke(i,{key:0,ref:"secondButton","model-value":e.secondValue,vertical:e.vertical,"tooltip-class":e.tooltipClass,"onUpdate:modelValue":e.setSecondValue},null,8,["model-value","vertical","tooltip-class","onUpdate:modelValue"])):me("v-if",!0),e.showStops?(R(),H("div",p2e,[(R(!0),H(ct,null,en(e.stops,(u,c)=>(R(),H("div",{key:c,class:"el-slider__stop",style:rt(e.getStopStyle(u))},null,4))),128))])):me("v-if",!0),e.markList.length>0?(R(),H(ct,{key:2},[K("div",null,[(R(!0),H(ct,null,en(e.markList,(u,c)=>(R(),H("div",{key:c,style:rt(e.getStopStyle(u.position)),class:"el-slider__stop el-slider__marks-stop"},null,4))),128))]),K("div",g2e,[(R(!0),H(ct,null,en(e.markList,(u,c)=>(R(),ke(a,{key:c,mark:u.mark,style:rt(e.getStopStyle(u.position))},null,8,["mark","style"]))),128))])],64)):me("v-if",!0)],6),e.showInput&&!e.range?(R(),ke(l,{key:0,ref:"input","model-value":e.firstValue,class:"el-slider__input",step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.sliderInputSize,"onUpdate:modelValue":e.setFirstValue,onChange:e.emitChange},null,8,["model-value","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):me("v-if",!0)],10,h2e)}var Kv=Ge(c2e,[["render",m2e]]);Kv.install=e=>{e.component(Kv.name,Kv)};const v2e=Kv,b2e=v2e,y2e=yt({prefixCls:{type:String,default:"el-space"}}),w2e=$e({props:y2e,setup(e){return{classes:O(()=>[`${e.prefixCls}__item`])}}});function $2e(e,t,n,s,o,r){return R(),H("div",{class:Q(e.classes)},[Pe(e.$slots,"default")],2)}var sD=Ge(w2e,[["render",$2e]]);const oD={small:8,default:12,large:16};function C2e(e){const t=O(()=>["el-space",`el-space--${e.direction}`,e.class]),n=V(0),s=V(0),o=O(()=>{const i=e.wrap||e.fill?{flexWrap:"wrap",marginBottom:`-${s.value}px`}:{},a={alignItems:e.alignment};return[i,a,e.style]}),r=O(()=>{const i={paddingBottom:`${s.value}px`,marginRight:`${n.value}px`},a=e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{};return[i,a]});return ka(()=>{const{size:i="small",wrap:a,direction:l,fill:u}=e;if(Array.isArray(i)){const[c=0,d=0]=i;n.value=c,s.value=d}else{let c;Sn(i)?c=i:c=oD[i]||oD.small,(a||u)&&l==="horizontal"?n.value=s.value=c:l==="horizontal"?(n.value=c,s.value=0):(s.value=c,n.value=0)}}),{classes:t,containerStyle:o,itemStyle:r}}const x2e=yt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:et([String,Object,Array]),default:""},style:{type:et([String,Array,Object]),default:""},alignment:{type:et(String),default:"center"},prefixCls:{type:String},spacer:{type:et([Object,String,Number,Array]),default:null,validator:e=>Ds(e)||Sn(e)||Qt(e)},wrap:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:T2,validator:e=>Sn(e)||At(e)&&e.length===2&&e.every(t=>Sn(t))}});var k2e=$e({name:"ElSpace",props:x2e,setup(e,{slots:t}){const{classes:n,containerStyle:s,itemStyle:o}=C2e(e);return()=>{var r;const{spacer:i,prefixCls:a,direction:l}=e,u=Pe(t,"default",{key:0},()=>[]);if(((r=u.children)!=null?r:[]).length===0)return null;if(At(u.children)){let c=[];if(u.children.forEach((d,f)=>{n4(d)?At(d.children)&&d.children.forEach((h,p)=>{c.push(pe(sD,{style:o.value,prefixCls:a,key:`nested-${p}`},{default:()=>[h]},Fr.PROPS|Fr.STYLE,["style","prefixCls"]))}):_0e(d)&&c.push(pe(sD,{style:o.value,prefixCls:a,key:`LoopKey${f}`},{default:()=>[d]},Fr.PROPS|Fr.STYLE,["style","prefixCls"]))}),i){const d=c.length-1;c=c.reduce((f,h,p)=>{const g=[...f,h];return p!==d&&g.push(pe("span",{style:[o.value,l==="vertical"?"width: 100%":null],key:p},[Ds(i)?i:Zt(i,Fr.TEXT)],Fr.STYLE)),g},[])}return pe("div",{class:n.value,style:s.value},c,Fr.STYLE|Fr.CLASS)}return u.children}}});const S2e=Gt(k2e),I2e=$e({name:"ElSteps",props:{space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},alignCenter:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},finishStatus:{type:String,default:"finish",validator:e=>["wait","process","finish","error","success"].includes(e)},processStatus:{type:String,default:"process",validator:e=>["wait","process","finish","error","success"].includes(e)}},emits:[Zs],setup(e,{emit:t}){const n=V([]);return Le(n,()=>{n.value.forEach((s,o)=>{s.setIndex(o)})}),jt("ElSteps",{props:e,steps:n}),Le(()=>e.active,(s,o)=>{t(Zs,s,o)}),{steps:n}}});function E2e(e,t,n,s,o,r){return R(),H("div",{class:Q(["el-steps",e.simple?"el-steps--simple":`el-steps--${e.direction}`])},[Pe(e.$slots,"default")],2)}var T2e=Ge(I2e,[["render",E2e]]);const _2e=$e({name:"ElStep",components:{ElIcon:Pt,Close:ki,Check:Sd},props:{title:{type:String,default:""},icon:{type:[String,Object],default:""},description:{type:String,default:""},status:{type:String,default:"",validator:e=>["","wait","process","finish","error","success"].includes(e)}},setup(e){const t=V(-1),n=V({}),s=V(""),o=Qe("ElSteps"),r=Wt();Ft(()=>{Le([()=>o.props.active,()=>o.props.processStatus,()=>o.props.finishStatus],([$])=>{v($)},{immediate:!0})}),us(()=>{o.steps.value=o.steps.value.filter($=>$.uid!==r.uid)});const i=O(()=>e.status||s.value),a=O(()=>{const $=o.steps.value[t.value-1];return $?$.currentStatus:"wait"}),l=O(()=>o.props.alignCenter),u=O(()=>o.props.direction==="vertical"),c=O(()=>o.props.simple),d=O(()=>o.steps.value.length),f=O(()=>{var $;return(($=o.steps.value[d.value-1])==null?void 0:$.uid)===r.uid}),h=O(()=>c.value?"":o.props.space),p=O(()=>{const $={flexBasis:typeof h.value=="number"?`${h.value}px`:h.value?h.value:`${100/(d.value-(l.value?0:1))}%`};return u.value||f.value&&($.maxWidth=`${100/d.value}%`),$}),g=$=>{t.value=$},m=$=>{let y=100;const w={};w.transitionDelay=`${150*t.value}ms`,$===o.props.processStatus?y=0:$==="wait"&&(y=0,w.transitionDelay=`${-150*t.value}ms`),w.borderWidth=y&&!c.value?"1px":0,w[o.props.direction==="vertical"?"height":"width"]=`${y}%`,n.value=w},v=$=>{$>t.value?s.value=o.props.finishStatus:$===t.value&&a.value!=="error"?s.value=o.props.processStatus:s.value="wait";const y=o.steps.value[d.value-1];y&&y.calcProgress(s.value)},b=En({uid:O(()=>r.uid),currentStatus:i,setIndex:g,calcProgress:m});return o.steps.value=[...o.steps.value,b],{index:t,lineStyle:n,currentStatus:i,isCenter:l,isVertical:u,isSimple:c,isLast:f,space:h,style:p,parent:o,setIndex:g,calcProgress:m,updateStatus:v}}}),N2e={key:0,class:"el-step__line"},A2e={key:1,class:"el-step__icon-inner"},D2e={class:"el-step__main"},R2e={key:0,class:"el-step__arrow"};function M2e(e,t,n,s,o,r){const i=de("el-icon"),a=de("check"),l=de("close");return R(),H("div",{style:rt(e.style),class:Q(["el-step",e.isSimple?"is-simple":`is-${e.parent.props.direction}`,e.isLast&&!e.space&&!e.isCenter&&"is-flex",e.isCenter&&!e.isVertical&&!e.isSimple&&"is-center"])},[me(" icon & line "),K("div",{class:Q(["el-step__head",`is-${e.currentStatus}`])},[e.isSimple?me("v-if",!0):(R(),H("div",N2e,[K("i",{class:"el-step__line-inner",style:rt(e.lineStyle)},null,4)])),K("div",{class:Q(["el-step__icon",`is-${e.icon?"icon":"text"}`])},[e.currentStatus!=="success"&&e.currentStatus!=="error"?Pe(e.$slots,"icon",{key:0},()=>[e.icon?(R(),ke(i,{key:0,class:"el-step__icon-inner"},{default:ce(()=>[(R(),ke(on(e.icon)))]),_:1})):me("v-if",!0),!e.icon&&!e.isSimple?(R(),H("div",A2e,ze(e.index+1),1)):me("v-if",!0)]):(R(),ke(i,{key:1,class:"el-step__icon-inner is-status"},{default:ce(()=>[e.currentStatus==="success"?(R(),ke(a,{key:0})):(R(),ke(l,{key:1}))]),_:1}))],2)],2),me(" title & description "),K("div",D2e,[K("div",{class:Q(["el-step__title",`is-${e.currentStatus}`])},[Pe(e.$slots,"title",{},()=>[Zt(ze(e.title),1)])],2),e.isSimple?(R(),H("div",R2e)):(R(),H("div",{key:1,class:Q(["el-step__description",`is-${e.currentStatus}`])},[Pe(e.$slots,"description",{},()=>[Zt(ze(e.description),1)])],2))])],6)}var H4=Ge(_2e,[["render",M2e]]);const O2e=Gt(T2e,{Step:H4}),F2e=cs(H4),P2e=yt({modelValue:{type:[Boolean,String,Number],default:!1},value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},inlinePrompt:{type:Boolean,default:!1},activeIcon:{type:et([String,Object,Function]),default:""},inactiveIcon:{type:et([String,Object,Function]),default:""},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String,loading:{type:Boolean,default:!1},beforeChange:{type:et(Function)},size:{type:String,validator:sr}}),L2e={[Bt]:e=>bi(e)||Qt(e)||Sn(e),[Zs]:e=>bi(e)||Qt(e)||Sn(e),[vl]:e=>bi(e)||Qt(e)||Sn(e)},rD="ElSwitch",B2e=$e({name:rD,components:{ElIcon:Pt,Loading:Oa},props:P2e,emits:L2e,setup(e,{emit:t}){const{formItem:n}=cf(),s=Bp(O(()=>e.loading)),o=Mt("switch"),r=Ss(),i=V(e.modelValue!==!1),a=V(),l=V(),u=O(()=>[o.b(),o.m(r.value),o.is("disabled",s.value),o.is("checked",d.value)]);Le(()=>e.modelValue,()=>{i.value=!0}),Le(()=>e.value,()=>{i.value=!1});const c=O(()=>i.value?e.modelValue:e.value),d=O(()=>c.value===e.activeValue);[e.activeValue,e.inactiveValue].includes(c.value)||(t(Bt,e.inactiveValue),t(Zs,e.inactiveValue),t(vl,e.inactiveValue)),Le(d,()=>{var m;a.value.checked=d.value,(e.activeColor||e.inactiveColor)&&p(),e.validateEvent&&((m=n==null?void 0:n.validate)==null||m.call(n,"change"))});const f=()=>{const m=d.value?e.inactiveValue:e.activeValue;t(Bt,m),t(Zs,m),t(vl,m),ft(()=>{a.value.checked=d.value})},h=()=>{if(s.value)return;const{beforeChange:m}=e;if(!m){f();return}const v=m();[wd(v),bi(v)].some($=>$)||So(rD,"beforeChange must return type `Promise<boolean>` or `boolean`"),wd(v)?v.then($=>{$&&f()}).catch($=>{}):v&&f()},p=()=>{const m=d.value?e.activeColor:e.inactiveColor,v=l.value;e.borderColor?v.style.borderColor=e.borderColor:e.borderColor||(v.style.borderColor=m),v.style.backgroundColor=m,v.children[0].style.color=m},g=()=>{var m,v;(v=(m=a.value)==null?void 0:m.focus)==null||v.call(m)};return Ft(()=>{(e.activeColor||e.inactiveColor||e.borderColor)&&p(),a.value.checked=d.value}),{ns:o,input:a,core:l,switchDisabled:s,checked:d,switchKls:u,handleChange:f,switchValue:h,focus:g}}}),z2e=["aria-checked","aria-disabled"],V2e=["id","name","true-value","false-value","disabled"],W2e=["aria-hidden"],H2e=["aria-hidden"],U2e=["aria-hidden"],j2e=["aria-hidden"];function G2e(e,t,n,s,o,r){const i=de("el-icon"),a=de("loading");return R(),H("div",{class:Q(e.switchKls),role:"switch","aria-checked":e.checked,"aria-disabled":e.switchDisabled,onClick:t[2]||(t[2]=gt((...l)=>e.switchValue&&e.switchValue(...l),["prevent"]))},[K("input",{id:e.id,ref:"input",class:Q(e.ns.e("input")),type:"checkbox",name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:e.switchDisabled,onChange:t[0]||(t[0]=(...l)=>e.handleChange&&e.handleChange(...l)),onKeydown:t[1]||(t[1]=qt((...l)=>e.switchValue&&e.switchValue(...l),["enter"]))},null,42,V2e),!e.inlinePrompt&&(e.inactiveIcon||e.inactiveText)?(R(),H("span",{key:0,class:Q([e.ns.e("label"),e.ns.em("label","left"),e.ns.is("active",!e.checked)])},[e.inactiveIcon?(R(),ke(i,{key:0},{default:ce(()=>[(R(),ke(on(e.inactiveIcon)))]),_:1})):me("v-if",!0),!e.inactiveIcon&&e.inactiveText?(R(),H("span",{key:1,"aria-hidden":e.checked},ze(e.inactiveText),9,W2e)):me("v-if",!0)],2)):me("v-if",!0),K("span",{ref:"core",class:Q(e.ns.e("core")),style:rt({width:(e.width||40)+"px"})},[e.inlinePrompt?(R(),H("div",{key:0,class:Q(e.ns.e("inner"))},[e.activeIcon||e.inactiveIcon?(R(),H(ct,{key:0},[e.activeIcon?(R(),ke(i,{key:0,class:Q([e.ns.is("icon"),e.checked?e.ns.is("show"):e.ns.is("hide")])},{default:ce(()=>[(R(),ke(on(e.activeIcon)))]),_:1},8,["class"])):me("v-if",!0),e.inactiveIcon?(R(),ke(i,{key:1,class:Q([e.ns.is("icon"),e.checked?e.ns.is("hide"):e.ns.is("show")])},{default:ce(()=>[(R(),ke(on(e.inactiveIcon)))]),_:1},8,["class"])):me("v-if",!0)],64)):e.activeText||e.inactiveIcon?(R(),H(ct,{key:1},[e.activeText?(R(),H("span",{key:0,class:Q([e.ns.is("text"),e.checked?e.ns.is("show"):e.ns.is("hide")]),"aria-hidden":!e.checked},ze(e.activeText.substr(0,1)),11,H2e)):me("v-if",!0),e.inactiveText?(R(),H("span",{key:1,class:Q([e.ns.is("text"),e.checked?e.ns.is("hide"):e.ns.is("show")]),"aria-hidden":e.checked},ze(e.inactiveText.substr(0,1)),11,U2e)):me("v-if",!0)],64)):me("v-if",!0)],2)):me("v-if",!0),K("div",{class:Q(e.ns.e("action"))},[e.loading?(R(),ke(i,{key:0,class:Q(e.ns.is("loading"))},{default:ce(()=>[pe(a)]),_:1},8,["class"])):me("v-if",!0)],2)],6),!e.inlinePrompt&&(e.activeIcon||e.activeText)?(R(),H("span",{key:1,class:Q([e.ns.e("label"),e.ns.em("label","right"),e.ns.is("active",e.checked)])},[e.activeIcon?(R(),ke(i,{key:0},{default:ce(()=>[(R(),ke(on(e.activeIcon)))]),_:1})):me("v-if",!0),!e.activeIcon&&e.activeText?(R(),H("span",{key:1,"aria-hidden":!e.checked},ze(e.activeText),9,j2e)):me("v-if",!0)],2)):me("v-if",!0)],10,z2e)}var K2e=Ge(B2e,[["render",G2e]]);const q2e=Gt(K2e),Xw=function(e){let t=e.target;for(;t&&t.tagName.toUpperCase()!=="HTML";){if(t.tagName.toUpperCase()==="TD")return t;t=t.parentNode}return null},iD=function(e){return e!==null&&typeof e=="object"},Y2e=function(e,t,n,s,o){if(!t&&!s&&(!o||Array.isArray(o)&&!o.length))return e;typeof n=="string"?n=n==="descending"?-1:1:n=n&&n<0?-1:1;const r=s?null:function(a,l){return o?(Array.isArray(o)||(o=[o]),o.map(function(u){return typeof u=="string"?Ps(a,u):u(a,l,e)})):(t!=="$key"&&iD(a)&&"$value"in a&&(a=a.$value),[iD(a)?Ps(a,t):a])},i=function(a,l){if(s)return s(a.value,l.value);for(let u=0,c=a.key.length;u<c;u++){if(a.key[u]<l.key[u])return-1;if(a.key[u]>l.key[u])return 1}return 0};return e.map(function(a,l){return{value:a,index:l,key:r?r(a,l):null}}).sort(function(a,l){let u=i(a,l);return u||(u=a.index-l.index),u*+n}).map(a=>a.value)},U4=function(e,t){let n=null;return e.columns.forEach(function(s){s.id===t&&(n=s)}),n},X2e=function(e,t){let n=null;for(let s=0;s<e.columns.length;s++){const o=e.columns[s];if(o.columnKey===t){n=o;break}}return n},aD=function(e,t,n){const s=(t.className||"").match(new RegExp(`${n}-table_[^\\s]+`,"gm"));return s?U4(e,s[0]):null},vo=(e,t)=>{if(!e)throw new Error("Row is required when get row identity");if(typeof t=="string"){if(t.indexOf(".")<0)return`${e[t]}`;const n=t.split(".");let s=e;for(let o=0;o<n.length;o++)s=s[n[o]];return`${s}`}else if(typeof t=="function")return t.call(null,e)},Su=function(e,t){const n={};return(e||[]).forEach((s,o)=>{n[vo(s,t)]={row:s,index:o}}),n};function Z2e(e,t){const n={};let s;for(s in e)n[s]=e[s];for(s in t)if(Kt(t,s)){const o=t[s];typeof o!="undefined"&&(n[s]=o)}return n}function vk(e){return e===""||e!==void 0&&(e=parseInt(e,10),Number.isNaN(e)&&(e="")),e}function j4(e){return e===""||e!==void 0&&(e=vk(e),Number.isNaN(e)&&(e=80)),e}function qv(e){return typeof e=="number"?e:typeof e=="string"?/^\d+(?:px)?$/.test(e)?parseInt(e,10):e:null}function J2e(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function Yv(e,t,n){let s=!1;const o=e.indexOf(t),r=o!==-1,i=()=>{e.push(t),s=!0},a=()=>{e.splice(o,1),s=!0};return typeof n=="boolean"?n&&!r?i():!n&&r&&a():r?a():i(),s}function Q2e(e,t,n="children",s="hasChildren"){const o=i=>!(Array.isArray(i)&&i.length);function r(i,a,l){t(i,a,l),a.forEach(u=>{if(u[s]){t(u,null,l+1);return}const c=u[n];o(c)||r(u,c,l+1)})}e.forEach(i=>{if(i[s]){t(i,null,0);return}const a=i[n];o(a)||r(i,a,0)})}let I0;function eke(e,t,n,s){function o(){const c=s==="light",d=document.createElement("div");return d.className=`el-popper ${c?"is-light":"is-dark"}`,d.innerHTML=t,d.style.zIndex=String(ys.nextZIndex()),document.body.appendChild(d),d}function r(){const c=document.createElement("div");return c.className="el-popper__arrow",c}function i(){a&&a.update()}I0=function c(){try{a&&a.destroy(),l&&document.body.removeChild(l),qn(e,"mouseenter",i),qn(e,"mouseleave",c)}catch{}};let a=null;const l=o(),u=r();return l.appendChild(u),a=QP(e,l,dt({modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"arrow",options:{element:u,padding:10}}]},n)),wn(e,"mouseenter",i),wn(e,"mouseleave",I0),a}const G4=(e,t,n,s)=>{let o=0,r=e;if(s){for(let l=0;l<e;l++)o+=s[l].colSpan;r=o+s[e].colSpan-1}else o=e;let i;const a=n.states.columns;switch(t){case"left":r<n.states.fixedLeafColumnsLength.value&&(i="left");break;case"right":o>=a.value.length-n.states.rightFixedLeafColumnsLength.value&&(i="right");break;default:r<n.states.fixedLeafColumnsLength.value?i="left":o>=a.value.length-n.states.rightFixedLeafColumnsLength.value&&(i="right")}return i?{direction:i,start:o,after:r}:{}},bk=(e,t,n,s,o)=>{const r=[],{direction:i,start:a}=G4(t,n,s,o);if(i){const l=i==="left";r.push(`${e}-fixed-column--${i}`),l&&a===s.states.fixedLeafColumnsLength.value-1?r.push("is-last-column"):!l&&a===s.states.columns.value.length-s.states.rightFixedLeafColumnsLength.value&&r.push("is-first-column")}return r};function lD(e,t){return e+(t.realWidth===null||Number.isNaN(t.realWidth)?Number(t.width):t.realWidth)}const yk=(e,t,n,s)=>{const{direction:o,start:r=0}=G4(e,t,n,s);if(!o)return;const i={},a=o==="left",l=n.states.columns.value;return a?i.left=l.slice(0,e).reduce(lD,0):i.right=l.slice(r+1).reverse().reduce(lD,0),i},Rd=(e,t)=>{!e||Number.isNaN(e[t])||(e[t]=`${e[t]}px`)};function tke(e){const t=Wt(),n=V(!1),s=V([]);return{updateExpandRows:()=>{const l=e.data.value||[],u=e.rowKey.value;if(n.value)s.value=l.slice();else if(u){const c=Su(s.value,u);s.value=l.reduce((d,f)=>{const h=vo(f,u);return c[h]&&d.push(f),d},[])}else s.value=[]},toggleRowExpansion:(l,u)=>{Yv(s.value,l,u)&&(t.emit("expand-change",l,s.value.slice()),t.store.scheduleLayout())},setExpandRowKeys:l=>{t.store.assertRowKey();const u=e.data.value||[],c=e.rowKey.value,d=Su(u,c);s.value=l.reduce((f,h)=>{const p=d[h];return p&&f.push(p.row),f},[])},isRowExpanded:l=>{const u=e.rowKey.value;return u?!!Su(s.value,u)[vo(l,u)]:s.value.indexOf(l)!==-1},states:{expandRows:s,defaultExpandAll:n}}}function nke(e){const t=Wt(),n=V(null),s=V(null),o=u=>{t.store.assertRowKey(),n.value=u,i(u)},r=()=>{n.value=null},i=u=>{const{data:c,rowKey:d}=e;let f=null;d.value&&(f=(Xe(c)||[]).find(h=>vo(h,d.value)===u)),s.value=f};return{setCurrentRowKey:o,restoreCurrentRowKey:r,setCurrentRowByKey:i,updateCurrentRow:u=>{const c=s.value;if(u&&u!==c){s.value=u,t.emit("current-change",s.value,c);return}!u&&c&&(s.value=null,t.emit("current-change",null,c))},updateCurrentRowData:()=>{const u=e.rowKey.value,c=e.data.value||[],d=s.value;if(c.indexOf(d)===-1&&d){if(u){const f=vo(d,u);i(f)}else s.value=null;s.value===null&&t.emit("current-change",null,d)}else n.value&&(i(n.value),r())},states:{_currentRowKey:n,currentRow:s}}}function ske(e){const t=V([]),n=V({}),s=V(16),o=V(!1),r=V({}),i=V("hasChildren"),a=V("children"),l=Wt(),u=O(()=>{if(!e.rowKey.value)return{};const v=e.data.value||[];return d(v)}),c=O(()=>{const v=e.rowKey.value,b=Object.keys(r.value),$={};return b.length&&b.forEach(y=>{if(r.value[y].length){const w={children:[]};r.value[y].forEach(C=>{const x=vo(C,v);w.children.push(x),C[i.value]&&!$[x]&&($[x]={children:[]})}),$[y]=w}}),$}),d=v=>{const b=e.rowKey.value,$={};return Q2e(v,(y,w,C)=>{const x=vo(y,b);Array.isArray(w)?$[x]={children:w.map(S=>vo(S,b)),level:C}:o.value&&($[x]={children:[],lazy:!0,level:C})},a.value,i.value),$},f=(v=!1,b=($=>($=l.store)==null?void 0:$.states.defaultExpandAll.value)())=>{var $;const y=u.value,w=c.value,C=Object.keys(y),x={};if(C.length){const S=Xe(n),T=[],I=(N,D)=>{if(v)return t.value?b||t.value.includes(D):!!(b||(N==null?void 0:N.expanded));{const F=b||t.value&&t.value.includes(D);return!!((N==null?void 0:N.expanded)||F)}};C.forEach(N=>{const D=S[N],F=dt({},y[N]);if(F.expanded=I(D,N),F.lazy){const{loaded:P=!1,loading:M=!1}=D||{};F.loaded=!!P,F.loading=!!M,T.push(N)}x[N]=F});const _=Object.keys(w);o.value&&_.length&&T.length&&_.forEach(N=>{const D=S[N],F=w[N].children;if(T.indexOf(N)!==-1){if(x[N].children.length!==0)throw new Error("[ElTable]children must be an empty array.");x[N].children=F}else{const{loaded:P=!1,loading:M=!1}=D||{};x[N]={lazy:!0,loaded:!!P,loading:!!M,expanded:I(D,N),children:F,level:""}}})}n.value=x,($=l.store)==null||$.updateTableScrollY()};Le(()=>t.value,()=>{f(!0)}),Le(()=>u.value,()=>{f()}),Le(()=>c.value,()=>{f()});const h=v=>{t.value=v,f()},p=(v,b)=>{l.store.assertRowKey();const $=e.rowKey.value,y=vo(v,$),w=y&&n.value[y];if(y&&w&&"expanded"in w){const C=w.expanded;b=typeof b=="undefined"?!w.expanded:b,n.value[y].expanded=b,C!==b&&l.emit("expand-change",v,b),l.store.updateTableScrollY()}},g=v=>{l.store.assertRowKey();const b=e.rowKey.value,$=vo(v,b),y=n.value[$];o.value&&y&&"loaded"in y&&!y.loaded?m(v,$,y):p(v,void 0)},m=(v,b,$)=>{const{load:y}=l.props;y&&!n.value[b].loaded&&(n.value[b].loading=!0,y(v,$,w=>{if(!Array.isArray(w))throw new Error("[ElTable] data must be an array");n.value[b].loading=!1,n.value[b].loaded=!0,n.value[b].expanded=!0,w.length&&(r.value[b]=w),l.emit("expand-change",v,!0)}))};return{loadData:m,loadOrToggle:g,toggleTreeExpansion:p,updateTreeExpandKeys:h,updateTreeData:f,normalize:d,states:{expandRowKeys:t,treeData:n,indent:s,lazy:o,lazyTreeNodeMap:r,lazyColumnIdentifier:i,childrenColumnName:a}}}const oke=(e,t)=>{const n=t.sortingColumn;return!n||typeof n.sortable=="string"?e:Y2e(e,t.sortProp,t.sortOrder,n.sortMethod,n.sortBy)},Xv=e=>{const t=[];return e.forEach(n=>{n.children?t.push.apply(t,Xv(n.children)):t.push(n)}),t};function rke(){var e;const t=Wt(),{size:n}=ko((e=t.proxy)==null?void 0:e.$props),s=V(null),o=V([]),r=V([]),i=V(!1),a=V([]),l=V([]),u=V([]),c=V([]),d=V([]),f=V([]),h=V([]),p=V([]),g=V(0),m=V(0),v=V(0),b=V(!1),$=V([]),y=V(!1),w=V(!1),C=V(null),x=V({}),S=V(null),T=V(null),I=V(null),_=V(null),N=V(null);Le(o,()=>t.state&&P(!1),{deep:!0});const D=()=>{if(!s.value)throw new Error("[ElTable] prop row-key is required")},F=()=>{c.value=a.value.filter(G=>G.fixed===!0||G.fixed==="left"),d.value=a.value.filter(G=>G.fixed==="right"),c.value.length>0&&a.value[0]&&a.value[0].type==="selection"&&!a.value[0].fixed&&(a.value[0].fixed=!0,c.value.unshift(a.value[0]));const z=a.value.filter(G=>!G.fixed);l.value=[].concat(c.value).concat(z).concat(d.value);const k=Xv(z),E=Xv(c.value),W=Xv(d.value);g.value=k.length,m.value=E.length,v.value=W.length,u.value=[].concat(E).concat(k).concat(W),i.value=c.value.length>0||d.value.length>0},P=(z,k=!1)=>{z&&F(),k?t.state.doLayout():t.state.debouncedUpdateLayout()},M=z=>$.value.indexOf(z)>-1,B=()=>{b.value=!1,$.value.length&&($.value=[],t.emit("selection-change",[]))},j=()=>{let z;if(s.value){z=[];const k=Su($.value,s.value),E=Su(o.value,s.value);for(const W in k)Kt(k,W)&&!E[W]&&z.push(k[W].row)}else z=$.value.filter(k=>o.value.indexOf(k)===-1);if(z.length){const k=$.value.filter(E=>z.indexOf(E)===-1);$.value=k,t.emit("selection-change",k.slice())}},X=(z,k=void 0,E=!0)=>{if(Yv($.value,z,k)){const G=($.value||[]).slice();E&&t.emit("select",G,z),t.emit("selection-change",G)}},ae=()=>{var z,k;const E=w.value?!b.value:!(b.value||$.value.length);b.value=E;let W=!1,G=0;const he=(k=(z=t==null?void 0:t.store)==null?void 0:z.states)==null?void 0:k.rowKey.value;o.value.forEach((_e,ht)=>{const Dt=ht+G;C.value?C.value.call(null,_e,Dt)&&Yv($.value,_e,E)&&(W=!0):Yv($.value,_e,E)&&(W=!0),G+=ye(vo(_e,he))}),W&&t.emit("selection-change",$.value?$.value.slice():[]),t.emit("select-all",$.value)},be=()=>{const z=Su($.value,s.value);o.value.forEach(k=>{const E=vo(k,s.value),W=z[E];W&&($.value[W.index]=k)})},ie=()=>{var z,k,E;if(((z=o.value)==null?void 0:z.length)===0){b.value=!1;return}let W;s.value&&(W=Su($.value,s.value));const G=function(Dt){return W?!!W[vo(Dt,s.value)]:$.value.indexOf(Dt)!==-1};let he=!0,_e=0,ht=0;for(let Dt=0,xt=(o.value||[]).length;Dt<xt;Dt++){const zt=(E=(k=t==null?void 0:t.store)==null?void 0:k.states)==null?void 0:E.rowKey.value,ln=Dt+ht,ai=o.value[Dt],Ue=C.value&&C.value.call(null,ai,ln);if(G(ai))_e++;else if(!C.value||Ue){he=!1;break}ht+=ye(vo(ai,zt))}_e===0&&(he=!1),b.value=he},ye=z=>{var k;if(!t||!t.store)return 0;const{treeData:E}=t.store.states;let W=0;const G=(k=E.value[z])==null?void 0:k.children;return G&&(W+=G.length,G.forEach(he=>{W+=ye(he)})),W},ue=(z,k)=>{Array.isArray(z)||(z=[z]);const E={};return z.forEach(W=>{x.value[W.id]=k,E[W.columnKey||W.id]=k}),E},Z=(z,k,E)=>{T.value&&T.value!==z&&(T.value.order=null),T.value=z,I.value=k,_.value=E},ee=()=>{let z=Xe(r);Object.keys(x.value).forEach(k=>{const E=x.value[k];if(!E||E.length===0)return;const W=U4({columns:u.value},k);W&&W.filterMethod&&(z=z.filter(G=>E.some(he=>W.filterMethod.call(null,he,G,W))))}),S.value=z},te=()=>{o.value=oke(S.value,{sortingColumn:T.value,sortProp:I.value,sortOrder:_.value})},fe=(z=void 0)=>{z&&z.filter||ee(),te()},De=z=>{const{tableHeader:k,fixedTableHeader:E,rightFixedTableHeader:W}=t.refs;let G={};k&&(G=Object.assign(G,k.filterPanels)),E&&(G=Object.assign(G,E.filterPanels)),W&&(G=Object.assign(G,W.filterPanels));const he=Object.keys(G);if(!!he.length)if(typeof z=="string"&&(z=[z]),Array.isArray(z)){const _e=z.map(ht=>X2e({columns:u.value},ht));he.forEach(ht=>{const Dt=_e.find(xt=>xt.id===ht);Dt&&(Dt.filteredValue=[])}),t.store.commit("filterChange",{column:_e,values:[],silent:!0,multi:!0})}else he.forEach(_e=>{const ht=u.value.find(Dt=>Dt.id===_e);ht&&(ht.filteredValue=[])}),x.value={},t.store.commit("filterChange",{column:{},values:[],silent:!0})},We=()=>{!T.value||(Z(null,null,null),t.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:He,toggleRowExpansion:Ve,updateExpandRows:Y,states:ne,isRowExpanded:q}=tke({data:o,rowKey:s}),{updateTreeExpandKeys:le,toggleTreeExpansion:xe,updateTreeData:oe,loadOrToggle:Me,states:Re}=ske({data:o,rowKey:s}),{updateCurrentRowData:ve,updateCurrentRow:Ae,setCurrentRowKey:it,states:Je}=nke({data:o,rowKey:s});return{assertRowKey:D,updateColumns:F,scheduleLayout:P,isSelected:M,clearSelection:B,cleanSelection:j,toggleRowSelection:X,_toggleAllSelection:ae,toggleAllSelection:null,updateSelectionByRowKey:be,updateAllSelected:ie,updateFilters:ue,updateCurrentRow:Ae,updateSort:Z,execFilter:ee,execSort:te,execQuery:fe,clearFilter:De,clearSort:We,toggleRowExpansion:Ve,setExpandRowKeysAdapter:z=>{He(z),le(z)},setCurrentRowKey:it,toggleRowExpansionAdapter:(z,k)=>{u.value.some(({type:W})=>W==="expand")?Ve(z,k):xe(z,k)},isRowExpanded:q,updateExpandRows:Y,updateCurrentRowData:ve,loadOrToggle:Me,updateTreeData:oe,states:dt(dt(dt({tableSize:n,rowKey:s,data:o,_data:r,isComplex:i,_columns:a,originColumns:l,columns:u,fixedColumns:c,rightFixedColumns:d,leafColumns:f,fixedLeafColumns:h,rightFixedLeafColumns:p,leafColumnsLength:g,fixedLeafColumnsLength:m,rightFixedLeafColumnsLength:v,isAllSelected:b,selection:$,reserveSelection:y,selectOnIndeterminate:w,selectable:C,filters:x,filteredData:S,sortingColumn:T,sortProp:I,sortOrder:_,hoverRow:N},ne),Re),Je)}}function OC(e,t){return e.map(n=>{var s;return n.id===t.id?t:(((s=n.children)==null?void 0:s.length)&&(n.children=OC(n.children,t)),n)})}function K4(e){e.forEach(t=>{var n,s;t.no=(n=t.getColumnIndex)==null?void 0:n.call(t),((s=t.children)==null?void 0:s.length)&&K4(t.children)}),e.sort((t,n)=>t.no-n.no)}function ike(){const e=Wt(),t=rke(),n=Mt("table"),s={setData(i,a){const l=Xe(i._data)!==a;i.data.value=a,i._data.value=a,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),Xe(i.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):l?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn(i,a,l){const u=Xe(i._columns);let c=[];l?(l&&!l.children&&(l.children=[]),l.children.push(a),c=OC(u,l)):(u.push(a),c=u),K4(c),i._columns.value=c,a.type==="selection"&&(i.selectable.value=a.selectable,i.reserveSelection.value=a.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},removeColumn(i,a,l){const u=Xe(i._columns)||[];if(l)l.children.splice(l.children.findIndex(c=>c.id===a.id),1),l.children.length===0&&delete l.children,i._columns.value=OC(u,l);else{const c=u.indexOf(a);c>-1&&(u.splice(c,1),i._columns.value=u)}e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort(i,a){const{prop:l,order:u,init:c}=a;if(l){const d=Xe(i.columns).find(f=>f.property===l);d&&(d.order=u,e.store.updateSort(d,l,u),e.store.commit("changeSortCondition",{init:c}))}},changeSortCondition(i,a){const{sortingColumn:l,sortProp:u,sortOrder:c}=i;Xe(c)===null&&(i.sortingColumn.value=null,i.sortProp.value=null);const d={filter:!0};e.store.execQuery(d),(!a||!(a.silent||a.init))&&e.emit("sort-change",{column:Xe(l),prop:Xe(u),order:Xe(c)}),e.store.updateTableScrollY()},filterChange(i,a){const{column:l,values:u,silent:c}=a,d=e.store.updateFilters(l,u);e.store.execQuery(),c||e.emit("filter-change",d),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged(i,a){e.store.toggleRowSelection(a),e.store.updateAllSelected()},setHoverRow(i,a){i.hoverRow.value=a},setCurrentRow(i,a){e.store.updateCurrentRow(a)}},o=function(i,...a){const l=e.store.mutations;if(l[i])l[i].apply(e,[e.store.states].concat(a));else throw new Error(`Action not found: ${i}`)},r=function(){ft(()=>e.layout.updateScrollY.apply(e.layout))};return Ut(dt({ns:n},t),{mutations:s,commit:o,updateTableScrollY:r})}const Nh={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data",["treeProps.hasChildren"]:{key:"lazyColumnIdentifier",default:"hasChildren"},["treeProps.children"]:{key:"childrenColumnName",default:"children"}};function ake(e,t){if(!e)throw new Error("Table is required.");const n=ike();return n.toggleAllSelection=nr(n._toggleAllSelection,10),Object.keys(Nh).forEach(s=>{q4(Y4(t,s),s,n)}),lke(n,t),n}function lke(e,t){Object.keys(Nh).forEach(n=>{Le(()=>Y4(t,n),s=>{q4(s,n,e)})})}function q4(e,t,n){let s=e,o=Nh[t];typeof Nh[t]=="object"&&(o=o.key,s=s||Nh[t].default),n.states[o].value=s}function Y4(e,t){if(t.includes(".")){const n=t.split(".");let s=e;return n.forEach(o=>{s=s[o]}),s}else return e[t]}class uke{constructor(t){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=V(null),this.scrollX=V(!1),this.scrollY=V(!1),this.bodyWidth=V(null),this.fixedWidth=V(null),this.rightFixedWidth=V(null),this.tableHeight=V(null),this.headerHeight=V(44),this.appendHeight=V(0),this.footerHeight=V(44),this.viewportHeight=V(null),this.bodyHeight=V(null),this.bodyScrollHeight=V(0),this.fixedBodyHeight=V(null),this.gutterWidth=0;for(const n in t)Kt(t,n)&&(vs(this[n])?this[n].value=t[n]:this[n]=t[n]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const n=this.table.refs.bodyWrapper;if(this.table.vnode.el&&n){let s=!0;const o=this.scrollY.value;return this.bodyHeight.value===null?s=!1:s=n.scrollHeight>this.bodyHeight.value,this.scrollY.value=s,o!==s}return!1}setHeight(t,n="height"){if(!Jt)return;const s=this.table.vnode.el;if(t=qv(t),this.height.value=Number(t),!s&&(t||t===0))return ft(()=>this.setHeight(t,n));typeof t=="number"?(s.style[n]=`${t}px`,this.updateElsHeight()):typeof t=="string"&&(s.style[n]=t,this.updateElsHeight())}setMaxHeight(t){this.setHeight(t,"max-height")}getFlattenColumns(){const t=[];return this.table.store.states.columns.value.forEach(s=>{s.isColumnGroup?t.push.apply(t,s.columns):t.push(s)}),t}updateElsHeight(){var t,n;if(!this.table.$ready)return ft(()=>this.updateElsHeight());const{headerWrapper:s,appendWrapper:o,footerWrapper:r,tableHeader:i,tableBody:a}=this.table.refs;if(this.appendHeight.value=o?o.offsetHeight:0,this.showHeader&&!s)return;const l=i?i.$el:null,u=this.headerDisplayNone(l),c=this.headerHeight.value=this.showHeader?s.offsetHeight:0;if(this.showHeader&&!u&&s.offsetWidth>0&&(this.table.store.states.columns.value||[]).length>0&&c<2)return ft(()=>this.updateElsHeight());const d=this.tableHeight.value=(n=(t=this.table)==null?void 0:t.vnode.el)==null?void 0:n.clientHeight,f=this.footerHeight.value=r?r.offsetHeight:0;this.height.value!==null&&(this.bodyHeight.value===null&&requestAnimationFrame(()=>this.updateElsHeight()),this.bodyHeight.value=d-c-f+(r?1:0),this.bodyScrollHeight.value=a==null?void 0:a.$el.scrollHeight),this.fixedBodyHeight.value=this.scrollX.value?this.bodyHeight.value-this.gutterWidth:this.bodyHeight.value,this.viewportHeight.value=this.scrollX.value?d-this.gutterWidth:d,this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(t){if(!t)return!0;let n=t;for(;n.tagName!=="DIV";){if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}updateColumnsWidth(){if(!Jt)return;const t=this.fit,n=this.table.vnode.el.clientWidth;let s=0;const o=this.getFlattenColumns(),r=o.filter(l=>typeof l.width!="number");if(o.forEach(l=>{typeof l.width=="number"&&l.realWidth&&(l.realWidth=null)}),r.length>0&&t){o.forEach(u=>{s+=Number(u.width||u.minWidth||80)});const l=this.scrollY.value?this.gutterWidth:0;if(s<=n-l){this.scrollX.value=!1;const u=n-l-s;if(r.length===1)r[0].realWidth=Number(r[0].minWidth||80)+u;else{const c=r.reduce((h,p)=>h+Number(p.minWidth||80),0),d=u/c;let f=0;r.forEach((h,p)=>{if(p===0)return;const g=Math.floor(Number(h.minWidth||80)*d);f+=g,h.realWidth=Number(h.minWidth||80)+g}),r[0].realWidth=Number(r[0].minWidth||80)+u-f}}else this.scrollX.value=!0,r.forEach(function(u){u.realWidth=Number(u.minWidth)});this.bodyWidth.value=Math.max(s,n),this.table.state.resizeState.value.width=this.bodyWidth.value}else o.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),s+=l.realWidth}),this.scrollX.value=s>n,this.bodyWidth.value=s;const i=this.store.states.fixedColumns.value;if(i.length>0){let l=0;i.forEach(function(u){l+=Number(u.realWidth||u.width)}),this.fixedWidth.value=l}const a=this.store.states.rightFixedColumns.value;if(a.length>0){let l=0;a.forEach(function(u){l+=Number(u.realWidth||u.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(t){this.observers.push(t)}removeObserver(t){const n=this.observers.indexOf(t);n!==-1&&this.observers.splice(n,1)}notifyObservers(t){this.observers.forEach(s=>{var o,r;switch(t){case"columns":(o=s.state)==null||o.onColumnsChange(this);break;case"scrollable":(r=s.state)==null||r.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${t}.`)}})}}const{CheckboxGroup:cke}=Si,dke=$e({name:"ElTableFilterPanel",components:{ElCheckbox:Si,ElCheckboxGroup:cke,ElScrollbar:Fa,ElTooltip:lr,ElIcon:Pt,ArrowDown:hc,ArrowUp:zp},directives:{ClickOutside:Nl},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(e){const t=Wt(),{t:n}=Tn(),s=Mt("table-filter"),o=t==null?void 0:t.parent;o.filterPanels.value[e.column.id]||(o.filterPanels.value[e.column.id]=t);const r=V(!1),i=V(null),a=O(()=>e.column&&e.column.filters),l=O({get:()=>{var y;return(((y=e.column)==null?void 0:y.filteredValue)||[])[0]},set:y=>{u.value&&(typeof y!="undefined"&&y!==null?u.value.splice(0,1,y):u.value.splice(0,1))}}),u=O({get(){return e.column?e.column.filteredValue||[]:[]},set(y){e.column&&e.upDataColumn("filteredValue",y)}}),c=O(()=>e.column?e.column.filterMultiple:!0),d=y=>y.value===l.value,f=()=>{r.value=!1},h=y=>{y.stopPropagation(),r.value=!r.value},p=()=>{r.value=!1},g=()=>{b(u.value),f()},m=()=>{u.value=[],b(u.value),f()},v=y=>{l.value=y,b(typeof y!="undefined"&&y!==null?u.value:[]),f()},b=y=>{e.store.commit("filterChange",{column:e.column,values:y}),e.store.updateAllSelected()};Le(r,y=>{e.column&&e.upDataColumn("filterOpened",y)},{immediate:!0});const $=O(()=>{var y,w;return(w=(y=i.value)==null?void 0:y.popperRef)==null?void 0:w.contentRef});return{tooltipVisible:r,multiple:c,filteredValue:u,filterValue:l,filters:a,handleConfirm:g,handleReset:m,handleSelect:v,isActive:d,t:n,ns:s,showFilterPanel:h,hideFilterPanel:p,popperPaneRef:$,tooltip:i}}}),fke={key:0},hke=["disabled"],pke=["label","onClick"];function gke(e,t,n,s,o,r){const i=de("el-checkbox"),a=de("el-checkbox-group"),l=de("el-scrollbar"),u=de("arrow-up"),c=de("arrow-down"),d=de("el-icon"),f=de("el-tooltip"),h=Wo("click-outside");return R(),ke(f,{ref:"tooltip",visible:e.tooltipVisible,"onUpdate:visible":t[5]||(t[5]=p=>e.tooltipVisible=p),offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,"append-to-body":"",effect:"light",pure:"","popper-class":e.ns.b(),persistent:""},{content:ce(()=>[e.multiple?(R(),H("div",fke,[K("div",{class:Q(e.ns.e("content"))},[pe(l,{"wrap-class":e.ns.e("wrap")},{default:ce(()=>[pe(a,{modelValue:e.filteredValue,"onUpdate:modelValue":t[0]||(t[0]=p=>e.filteredValue=p),class:Q(e.ns.e("checkbox-group"))},{default:ce(()=>[(R(!0),H(ct,null,en(e.filters,p=>(R(),ke(i,{key:p.value,label:p.value},{default:ce(()=>[Zt(ze(p.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),K("div",{class:Q(e.ns.e("bottom"))},[K("button",{class:Q({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:t[1]||(t[1]=(...p)=>e.handleConfirm&&e.handleConfirm(...p))},ze(e.t("el.table.confirmFilter")),11,hke),K("button",{type:"button",onClick:t[2]||(t[2]=(...p)=>e.handleReset&&e.handleReset(...p))},ze(e.t("el.table.resetFilter")),1)],2)])):(R(),H("ul",{key:1,class:Q(e.ns.e("list"))},[K("li",{class:Q([e.ns.e("list-item"),{[e.ns.is("active")]:e.filterValue===void 0||e.filterValue===null}]),onClick:t[3]||(t[3]=p=>e.handleSelect(null))},ze(e.t("el.table.clearFilter")),3),(R(!0),H(ct,null,en(e.filters,p=>(R(),H("li",{key:p.value,class:Q([e.ns.e("list-item"),e.ns.is("active",e.isActive(p))]),label:p.value,onClick:g=>e.handleSelect(p.value)},ze(p.text),11,pke))),128))],2))]),default:ce(()=>[Ct((R(),H("span",{class:Q([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:t[4]||(t[4]=(...p)=>e.showFilterPanel&&e.showFilterPanel(...p))},[pe(d,null,{default:ce(()=>[e.column.filterOpened?(R(),ke(u,{key:0})):(R(),ke(c,{key:1}))]),_:1})],2)),[[h,e.hideFilterPanel,e.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var mke=Ge(dke,[["render",gke]]);function X4(e){const t=Wt();Mp(()=>{n.value.addObserver(t)}),Ft(()=>{s(n.value),o(n.value)}),Ni(()=>{s(n.value),o(n.value)}),Op(()=>{n.value.removeObserver(t)});const n=O(()=>{const r=e.layout;if(!r)throw new Error("Can not find table layout.");return r}),s=r=>{var i;const a=((i=e.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const l=r.getFlattenColumns(),u={};l.forEach(c=>{u[c.id]=c});for(let c=0,d=a.length;c<d;c++){const f=a[c],h=f.getAttribute("name"),p=u[h];p&&f.setAttribute("width",p.realWidth||p.width)}},o=r=>{var i,a;const l=((i=e.vnode.el)==null?void 0:i.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let c=0,d=l.length;c<d;c++)l[c].setAttribute("width",r.scrollY.value?r.gutterWidth:"0");const u=((a=e.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let c=0,d=u.length;c<d;c++){const f=u[c];f.style.width=r.scrollY.value?`${r.gutterWidth}px`:"0",f.style.display=r.scrollY.value?"":"none"}};return{tableLayout:n.value,onColumnsChange:s,onScrollableChange:o}}function wk(e){return Ke("colgroup",{},[...e.map(t=>Ke("col",{name:t.id,key:t.id}))])}const oa=Symbol("ElTable");function vke(e,t){const n=Wt(),s=Qe(oa),o=g=>{g.stopPropagation()},r=(g,m)=>{!m.filters&&m.sortable?p(g,m,!1):m.filterable&&!m.sortable&&o(g),s==null||s.emit("header-click",m,g)},i=(g,m)=>{s==null||s.emit("header-contextmenu",m,g)},a=V(null),l=V(!1),u=V({}),c=(g,m)=>{if(!!Jt&&!(m.children&&m.children.length>0)&&a.value&&e.border){l.value=!0;const v=s;t("set-drag-visible",!0);const $=(v==null?void 0:v.vnode.el).getBoundingClientRect().left,y=n.vnode.el.querySelector(`th.${m.id}`),w=y.getBoundingClientRect(),C=w.left-$+30;Zo(y,"noclick"),u.value={startMouseLeft:g.clientX,startLeft:w.right-$,startColumnLeft:w.left-$,tableLeft:$};const x=v==null?void 0:v.refs.resizeProxy;x.style.left=`${u.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const S=I=>{const _=I.clientX-u.value.startMouseLeft,N=u.value.startLeft+_;x.style.left=`${Math.max(C,N)}px`},T=()=>{if(l.value){const{startColumnLeft:I,startLeft:_}=u.value,D=parseInt(x.style.left,10)-I;m.width=m.realWidth=D,v==null||v.emit("header-dragend",m.width,_-I,m,g),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,a.value=null,u.value={},t("set-drag-visible",!1)}document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",T),document.onselectstart=null,document.ondragstart=null,setTimeout(function(){wo(y,"noclick")},0)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",T)}},d=(g,m)=>{if(m.children&&m.children.length>0)return;let v=g.target;for(;v&&v.tagName!=="TH";)v=v.parentNode;if(!(!m||!m.resizable)&&!l.value&&e.border){const b=v.getBoundingClientRect(),$=document.body.style;b.width>12&&b.right-g.pageX<8?($.cursor="col-resize",yi(v,"is-sortable")&&(v.style.cursor="col-resize"),a.value=m):l.value||($.cursor="",yi(v,"is-sortable")&&(v.style.cursor="pointer"),a.value=null)}},f=()=>{!Jt||(document.body.style.cursor="")},h=({order:g,sortOrders:m})=>{if(g==="")return m[0];const v=m.indexOf(g||null);return m[v>m.length-2?0:v+1]},p=(g,m,v)=>{g.stopPropagation();const b=m.order===v?null:v||h(m);let $=g.target;for(;$&&$.tagName!=="TH";)$=$.parentNode;if($&&$.tagName==="TH"&&yi($,"noclick")){wo($,"noclick");return}if(!m.sortable)return;const y=e.store.states;let w=y.sortProp.value,C;const x=y.sortingColumn.value;(x!==m||x===m&&x.order===null)&&(x&&(x.order=null),y.sortingColumn.value=m,w=m.property),b?C=m.order=b:C=m.order=null,y.sortProp.value=w,y.sortOrder.value=C,s==null||s.store.commit("changeSortCondition")};return{handleHeaderClick:r,handleHeaderContextMenu:i,handleMouseDown:c,handleMouseMove:d,handleMouseOut:f,handleSortClick:p,handleFilterClick:o}}function bke(e){const t=Qe(oa),n=Mt("table");return{getHeaderRowStyle:a=>{const l=t==null?void 0:t.props.headerRowStyle;return typeof l=="function"?l.call(null,{rowIndex:a}):l},getHeaderRowClass:a=>{const l=[],u=t==null?void 0:t.props.headerRowClassName;return typeof u=="string"?l.push(u):typeof u=="function"&&l.push(u.call(null,{rowIndex:a})),l.join(" ")},getHeaderCellStyle:(a,l,u,c)=>{var d;let f=(d=t==null?void 0:t.props.headerCellStyle)!=null?d:{};typeof f=="function"&&(f=f.call(null,{rowIndex:a,columnIndex:l,row:u,column:c}));const h=yk(l,c.fixed,e.store,u);return Rd(h,"left"),Rd(h,"right"),Object.assign({},f,h)},getHeaderCellClass:(a,l,u,c)=>{const d=c.isSubColumn?[]:bk(n.b(),l,c.fixed,e.store,u),f=[c.id,c.order,c.headerAlign,c.className,c.labelClassName,...d];c.children||f.push("is-leaf"),c.sortable&&f.push("is-sortable");const h=t==null?void 0:t.props.headerCellClassName;return typeof h=="string"?f.push(h):typeof h=="function"&&f.push(h.call(null,{rowIndex:a,columnIndex:l,row:u,column:c})),f.push(n.e("cell")),f.join(" ")}}}const Z4=e=>{const t=[];return e.forEach(n=>{n.children?(t.push(n),t.push.apply(t,Z4(n.children))):t.push(n)}),t},yke=e=>{let t=1;const n=(r,i)=>{if(i&&(r.level=i.level+1,t<r.level&&(t=r.level)),r.children){let a=0;r.children.forEach(l=>{n(l,r),a+=l.colSpan}),r.colSpan=a}else r.colSpan=1};e.forEach(r=>{r.level=1,n(r,void 0)});const s=[];for(let r=0;r<t;r++)s.push([]);return Z4(e).forEach(r=>{r.children?(r.rowSpan=1,r.children.forEach(i=>i.isSubColumn=!0)):r.rowSpan=t-r.level+1,s[r.level-1].push(r)}),s};function wke(e){const t=Qe(oa),n=O(()=>yke(e.store.states.originColumns.value));return{isGroup:O(()=>{const r=n.value.length>1;return r&&t&&(t.state.isGroup.value=!0),r}),toggleAllSelection:r=>{r.stopPropagation(),t==null||t.store.commit("toggleAllSelection")},columnRows:n}}var $ke=$e({name:"ElTableHeader",components:{ElCheckbox:Si},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e,{emit:t}){const n=Wt(),s=Qe(oa),o=Mt("table"),r=s==null?void 0:s.store.states,i=V({}),{onColumnsChange:a,onScrollableChange:l}=X4(s);Ft(()=>{ft(()=>{const{prop:x,order:S}=e.defaultSort,T=!0;s==null||s.store.commit("sort",{prop:x,order:S,init:T})})});const{handleHeaderClick:u,handleHeaderContextMenu:c,handleMouseDown:d,handleMouseMove:f,handleMouseOut:h,handleSortClick:p,handleFilterClick:g}=vke(e,t),{getHeaderRowStyle:m,getHeaderRowClass:v,getHeaderCellStyle:b,getHeaderCellClass:$}=bke(e),{isGroup:y,toggleAllSelection:w,columnRows:C}=wke(e);return n.state={onColumnsChange:a,onScrollableChange:l},n.filterPanels=i,{ns:o,columns:r.columns,filterPanels:i,onColumnsChange:a,onScrollableChange:l,columnRows:C,getHeaderRowClass:v,getHeaderRowStyle:m,getHeaderCellClass:$,getHeaderCellStyle:b,handleHeaderClick:u,handleHeaderContextMenu:c,handleMouseDown:d,handleMouseMove:f,handleMouseOut:h,handleSortClick:p,handleFilterClick:g,isGroup:y,toggleAllSelection:w}},render(){const{ns:e,columns:t,isGroup:n,columnRows:s,getHeaderCellStyle:o,getHeaderCellClass:r,getHeaderRowClass:i,getHeaderRowStyle:a,handleHeaderClick:l,handleHeaderContextMenu:u,handleMouseDown:c,handleMouseMove:d,handleSortClick:f,handleMouseOut:h,store:p,$parent:g}=this;let m=1;return Ke("table",{border:"0",cellpadding:"0",cellspacing:"0",class:e.e("header")},[wk(t),Ke("thead",{class:{[e.is("group")]:n}},s.map((v,b)=>Ke("tr",{class:i(b),key:b,style:a(b)},v.map(($,y)=>($.rowSpan>m&&(m=$.rowSpan),Ke("th",{class:r(b,y,v,$),colspan:$.colSpan,key:`${$.id}-thead`,rowSpan:$.rowSpan,style:o(b,y,v,$),onClick:w=>l(w,$),onContextmenu:w=>u(w,$),onMousedown:w=>c(w,$),onMousemove:w=>d(w,$),onMouseout:h},[Ke("div",{class:["cell",$.filteredValue&&$.filteredValue.length>0?"highlight":"",$.labelClassName]},[$.renderHeader?$.renderHeader({column:$,$index:y,store:p,_self:g}):$.label,$.sortable&&Ke("span",{onClick:w=>f(w,$),class:"caret-wrapper"},[Ke("i",{onClick:w=>f(w,$,"ascending"),class:"sort-caret ascending"}),Ke("i",{onClick:w=>f(w,$,"descending"),class:"sort-caret descending"})]),$.filterable&&Ke(mke,{store:g.store,placement:$.filterPlacement||"bottom-start",column:$,upDataColumn:(w,C)=>{$[w]=C}})])]))))))])}});function Cke(e){const t=Qe(oa),n=V(""),s=V(Ke("div")),o=(f,h,p)=>{var g;const m=t,v=Xw(f);let b;const $=(g=m==null?void 0:m.vnode.el)==null?void 0:g.dataset.prefix;v&&(b=aD({columns:e.store.states.columns.value},v,$),b&&(m==null||m.emit(`cell-${p}`,h,b,v,f))),m==null||m.emit(`row-${p}`,h,b,f)},r=(f,h)=>{o(f,h,"dblclick")},i=(f,h)=>{e.store.commit("setCurrentRow",h),o(f,h,"click")},a=(f,h)=>{o(f,h,"contextmenu")},l=nr(function(f){e.store.commit("setHoverRow",f)},30),u=nr(function(){e.store.commit("setHoverRow",null)},30);return{handleDoubleClick:r,handleClick:i,handleContextMenu:a,handleMouseEnter:l,handleMouseLeave:u,handleCellMouseEnter:(f,h)=>{var p;const g=t,m=Xw(f),v=(p=g==null?void 0:g.vnode.el)==null?void 0:p.dataset.prefix;if(m){const C=aD({columns:e.store.states.columns.value},m,v),x=g.hoverState={cell:m,column:C,row:h};g==null||g.emit("cell-mouse-enter",x.row,x.column,x.cell,f)}const b=f.target.querySelector(".cell");if(!(yi(b,`${v}-tooltip`)&&b.childNodes.length))return;const $=document.createRange();$.setStart(b,0),$.setEnd(b,b.childNodes.length);const y=$.getBoundingClientRect().width,w=(parseInt(Lr(b,"paddingLeft"),10)||0)+(parseInt(Lr(b,"paddingRight"),10)||0);(y+w>b.offsetWidth||b.scrollWidth>b.offsetWidth)&&eke(m,m.innerText||m.textContent,{placement:"top",strategy:"fixed"},h.tooltipEffect)},handleCellMouseLeave:f=>{if(!Xw(f))return;const p=t==null?void 0:t.hoverState;t==null||t.emit("cell-mouse-leave",p==null?void 0:p.row,p==null?void 0:p.column,p==null?void 0:p.cell,f)},tooltipContent:n,tooltipTrigger:s}}function xke(e){const t=Qe(oa),n=Mt("table");return{getRowStyle:(u,c)=>{const d=t==null?void 0:t.props.rowStyle;return typeof d=="function"?d.call(null,{row:u,rowIndex:c}):d||null},getRowClass:(u,c)=>{const d=[n.e("row")];(t==null?void 0:t.props.highlightCurrentRow)&&u===e.store.states.currentRow.value&&d.push("current-row"),e.stripe&&c%2===1&&d.push(n.em("row","striped"));const f=t==null?void 0:t.props.rowClassName;return typeof f=="string"?d.push(f):typeof f=="function"&&d.push(f.call(null,{row:u,rowIndex:c})),e.store.states.expandRows.value.indexOf(u)>-1&&d.push("expanded"),d},getCellStyle:(u,c,d,f)=>{const h=t==null?void 0:t.props.cellStyle;let p=h!=null?h:{};typeof h=="function"&&(p=h.call(null,{rowIndex:u,columnIndex:c,row:d,column:f}));const g=yk(c,e==null?void 0:e.fixed,e.store);return Rd(g,"left"),Rd(g,"right"),Object.assign({},p,g)},getCellClass:(u,c,d,f)=>{const h=f.isSubColumn?[]:bk(n.b(),c,e==null?void 0:e.fixed,e.store),p=[f.id,f.align,f.className,...h],g=t==null?void 0:t.props.cellClassName;return typeof g=="string"?p.push(g):typeof g=="function"&&p.push(g.call(null,{rowIndex:u,columnIndex:c,row:d,column:f})),p.push(n.e("cell")),p.join(" ")},getSpan:(u,c,d,f)=>{let h=1,p=1;const g=t==null?void 0:t.props.spanMethod;if(typeof g=="function"){const m=g({row:u,column:c,rowIndex:d,columnIndex:f});Array.isArray(m)?(h=m[0],p=m[1]):typeof m=="object"&&(h=m.rowspan,p=m.colspan)}return{rowspan:h,colspan:p}},getColspanRealWidth:(u,c,d)=>{if(c<1)return u[d].realWidth;const f=u.map(({realWidth:h,width:p})=>h||p).slice(d,d+c);return Number(f.reduce((h,p)=>Number(h)+Number(p),-1))}}}function kke(e){const t=Qe(oa),{handleDoubleClick:n,handleClick:s,handleContextMenu:o,handleMouseEnter:r,handleMouseLeave:i,handleCellMouseEnter:a,handleCellMouseLeave:l,tooltipContent:u,tooltipTrigger:c}=Cke(e),{getRowStyle:d,getRowClass:f,getCellStyle:h,getCellClass:p,getSpan:g,getColspanRealWidth:m}=xke(e),v=O(()=>e.store.states.columns.value.findIndex(({type:C})=>C==="default")),b=(C,x)=>{const S=t.props.rowKey;return S?vo(C,S):x},$=(C,x,S)=>{const{tooltipEffect:T,store:I}=e,{indent:_,columns:N}=I.states,D=f(C,x);let F=!0;return S&&(D.push(`el-table__row--level-${S.level}`),F=S.display),Ke("tr",{style:[F?null:{display:"none"},d(C,x)],class:D,key:b(C,x),onDblclick:M=>n(M,C),onClick:M=>s(M,C),onContextmenu:M=>o(M,C),onMouseenter:()=>r(x),onMouseleave:i},N.value.map((M,B)=>{const{rowspan:j,colspan:X}=g(C,M,x,B);if(!j||!X)return null;const ae=dt({},M);ae.realWidth=m(N.value,X,B);const be={store:e.store,_self:e.context||t,column:ae,row:C,$index:x};B===v.value&&S&&(be.treeNode={indent:S.level*_.value,level:S.level},typeof S.expanded=="boolean"&&(be.treeNode.expanded=S.expanded,"loading"in S&&(be.treeNode.loading=S.loading),"noLazyChildren"in S&&(be.treeNode.noLazyChildren=S.noLazyChildren)));const ie=`${x},${B}`,ye=ae.columnKey||ae.rawColumnKey||"",ue=y(B,M,be);return Ke("td",{style:h(x,B,C,M),class:p(x,B,C,M),key:`${ye}${ie}`,rowspan:j,colspan:X,onMouseenter:Z=>a(Z,Ut(dt({},C),{tooltipEffect:T})),onMouseleave:l},[ue])}))},y=(C,x,S)=>x.renderCell(S);return{wrappedRowRender:(C,x)=>{const S=e.store,{isRowExpanded:T,assertRowKey:I}=S,{treeData:_,lazyTreeNodeMap:N,childrenColumnName:D,rowKey:F}=S.states;if(S.states.columns.value.some(({type:M})=>M==="expand")&&T(C)){const M=t.renderExpanded,B=$(C,x,void 0);return M?[[B,Ke("tr",{key:`expanded-row__${B.key}`},[Ke("td",{colspan:S.states.columns.value.length,class:"el-table__cell el-table__expanded-cell"},[M({row:C,$index:x,store:S})])])]]:(console.error("[Element Error]renderExpanded is required."),B)}else if(Object.keys(_.value).length){I();const M=vo(C,F.value);let B=_.value[M],j=null;B&&(j={expanded:B.expanded,level:B.level,display:!0},typeof B.lazy=="boolean"&&(typeof B.loaded=="boolean"&&B.loaded&&(j.noLazyChildren=!(B.children&&B.children.length)),j.loading=B.loading));const X=[$(C,x,j)];if(B){let ae=0;const be=(ye,ue)=>{!(ye&&ye.length&&ue)||ye.forEach(Z=>{const ee={display:ue.display&&ue.expanded,level:ue.level+1,expanded:!1,noLazyChildren:!1,loading:!1},te=vo(Z,F.value);if(te==null)throw new Error("For nested data item, row-key is required.");if(B=dt({},_.value[te]),B&&(ee.expanded=B.expanded,B.level=B.level||ee.level,B.display=!!(B.expanded&&ee.display),typeof B.lazy=="boolean"&&(typeof B.loaded=="boolean"&&B.loaded&&(ee.noLazyChildren=!(B.children&&B.children.length)),ee.loading=B.loading)),ae++,X.push($(Z,x+ae,ee)),B){const fe=N.value[te]||Z[D.value];be(fe,B)}})};B.display=!0;const ie=N.value[M]||C[D.value];be(ie,B)}return X}else return $(C,x,void 0)},tooltipContent:u,tooltipTrigger:c}}const Ske={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var Ike=$e({name:"ElTableBody",props:Ske,setup(e){const t=Wt(),n=Qe(oa),s=Mt("table"),{wrappedRowRender:o,tooltipContent:r,tooltipTrigger:i}=kke(e),{onColumnsChange:a,onScrollableChange:l}=X4(n);return Le(e.store.states.hoverRow,(u,c)=>{if(!e.store.states.isComplex.value||!Jt)return;let d=window.requestAnimationFrame;d||(d=f=>window.setTimeout(f,16)),d(()=>{var f;const h=(f=t==null?void 0:t.vnode.el)==null?void 0:f.querySelectorAll(`.${s.e("row")}`),p=h[c],g=h[u];p&&wo(p,"hover-row"),g&&Zo(g,"hover-row")})}),Op(()=>{var u;(u=I0)==null||u()}),Ni(()=>{var u;(u=I0)==null||u()}),{ns:s,onColumnsChange:a,onScrollableChange:l,wrappedRowRender:o,tooltipContent:r,tooltipTrigger:i}},render(){const{ns:e,wrappedRowRender:t,store:n}=this,s=n.states.data.value||[],o=n.states.columns.value;return Ke("table",{class:e.e("body"),cellspacing:"0",cellpadding:"0",border:"0"},[wk(o),Ke("tbody",{},[s.reduce((r,i)=>r.concat(t(i,r.length)),[])])])}});function Eke(){const e=Qe(oa),t=e==null?void 0:e.store,n=O(()=>t.states.fixedLeafColumnsLength.value),s=O(()=>t.states.rightFixedColumns.value.length),o=O(()=>t.states.columns.value.length),r=O(()=>t.states.fixedColumns.value.length),i=O(()=>t.states.rightFixedColumns.value.length);return{leftFixedLeafCount:n,rightFixedLeafCount:s,columnsCount:o,leftFixedCount:r,rightFixedCount:i,columns:t.states.columns}}function Tke(e){const{columns:t}=Eke(),n=Mt("table");return{getCellClasses:(r,i)=>{const a=r[i],l=[n.e("cell"),a.id,a.align,a.labelClassName,...bk(n.b(),i,a.fixed,e.store)];return a.className&&l.push(a.className),a.children||l.push(n.is("leaf")),l},getCellStyles:(r,i)=>{const a=yk(i,r.fixed,e.store);return Rd(a,"left"),Rd(a,"right"),a},columns:t}}var _ke=$e({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:t,getCellStyles:n,columns:s}=Tke(e);return{ns:Mt("table"),getCellClasses:t,getCellStyles:n,columns:s}},render(){const{columns:e,getCellStyles:t,getCellClasses:n,summaryMethod:s,sumText:o,ns:r}=this,i=this.store.states.data.value;let a=[];return s?a=s({columns:e,data:i}):e.forEach((l,u)=>{if(u===0){a[u]=o;return}const c=i.map(p=>Number(p[l.property])),d=[];let f=!0;c.forEach(p=>{if(!isNaN(p)){f=!1;const g=`${p}`.split(".")[1];d.push(g?g.length:0)}});const h=Math.max.apply(null,d);f?a[u]="":a[u]=c.reduce((p,g)=>{const m=Number(g);return isNaN(m)?p:parseFloat((p+g).toFixed(Math.min(h,20)))},0)}),Ke("table",{class:r.e("footer"),cellspacing:"0",cellpadding:"0",border:"0"},[wk(e),Ke("tbody",[Ke("tr",{},[...e.map((l,u)=>Ke("td",{key:u,colspan:l.colSpan,rowspan:l.rowSpan,class:n(e,u),style:t(l,u)},[Ke("div",{class:["cell",l.labelClassName]},[a[u]])]))])])])}});function Nke(e){return{setCurrentRow:u=>{e.commit("setCurrentRow",u)},toggleRowSelection:(u,c)=>{e.toggleRowSelection(u,c,!1),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:u=>{e.clearFilter(u)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(u,c)=>{e.toggleRowExpansionAdapter(u,c)},clearSort:()=>{e.clearSort()},sort:(u,c)=>{e.commit("sort",{prop:u,order:c})}}}function Ake(e,t,n,s){const o=V(!1),r=V(null),i=V(!1),a=D=>{i.value=D},l=V({width:null,height:null}),u=V(!1);ka(()=>{t.setHeight(e.height)}),ka(()=>{t.setMaxHeight(e.maxHeight)}),Le(()=>[e.currentRowKey,n.states.rowKey],([D,F])=>{!Xe(F)||n.setCurrentRowKey(`${D}`)},{immediate:!0}),Le(()=>e.data,D=>{s.store.commit("setData",D)},{immediate:!0,deep:!0}),ka(()=>{e.expandRowKeys&&n.setExpandRowKeysAdapter(e.expandRowKeys)});const c=()=>{s.store.commit("setHoverRow",null),s.hoverState&&(s.hoverState=null)},d=(D,F)=>{const{pixelX:P,pixelY:M}=F;Math.abs(P)>=Math.abs(M)&&(s.refs.bodyWrapper.scrollLeft+=F.pixelX/5)},f=O(()=>e.height||e.maxHeight||n.states.fixedColumns.value.length>0||n.states.rightFixedColumns.value.length>0),h=O(()=>({width:t.bodyWidth.value?`${t.bodyWidth.value}px`:""})),p=()=>{f.value&&t.updateElsHeight(),t.updateColumnsWidth(),requestAnimationFrame(v)};Ft(async()=>{m("is-scrolling-left"),n.updateColumns(),await ft(),b(),requestAnimationFrame(p),l.value={width:s.vnode.el.offsetWidth,height:s.vnode.el.offsetHeight},n.states.columns.value.forEach(D=>{D.filteredValue&&D.filteredValue.length&&s.store.commit("filterChange",{column:D,values:D.filteredValue,silent:!0})}),s.$ready=!0});const g=(D,F)=>{if(!D)return;const P=Array.from(D.classList).filter(M=>!M.startsWith("is-scrolling-"));P.push(t.scrollX.value?F:"is-scrolling-none"),D.className=P.join(" ")},m=D=>{const{tableWrapper:F}=s.refs;g(F,D)},v=function(){if(!s.refs.scrollWrapper)return;const D=s.refs.scrollWrapper.wrap$;if(!D)return;const{scrollLeft:F,offsetWidth:P,scrollWidth:M}=D,{headerWrapper:B,footerWrapper:j}=s.refs;B&&(B.scrollLeft=F),j&&(j.scrollLeft=F);const X=M-P-1;F>=X?m("is-scrolling-right"):m(F===0?"is-scrolling-left":"is-scrolling-middle")},b=()=>{var D;(D=s.refs.scrollWrapper.wrap$)==null||D.addEventListener("scroll",v,{passive:!0}),e.fit?Al(s.vnode.el,y):wn(window,"resize",p)};us(()=>{$()});const $=()=>{var D;(D=s.refs.scrollWrapper.wrap$)==null||D.removeEventListener("scroll",v,!0),e.fit?Dl(s.vnode.el,y):qn(window,"resize",p)},y=()=>{if(!s.$ready)return;let D=!1;const F=s.vnode.el,{width:P,height:M}=l.value,B=F.offsetWidth;P!==B&&(D=!0);const j=F.offsetHeight;(e.height||f.value)&&M!==j&&(D=!0),D&&(l.value={width:B,height:j},p())},w=Ss(),C=O(()=>{const{bodyWidth:D,scrollY:F,gutterWidth:P}=t;return D.value?`${D.value-(F.value?P:0)}px`:""}),x=O(()=>{const D=t.headerHeight.value||0,F=t.bodyHeight.value,P=t.footerHeight.value||0;if(e.height)return F||void 0;if(e.maxHeight)return qv(e.maxHeight)-P-(e.showHeader?D:0)}),S=O(()=>{const D=t.headerHeight.value||0,F=t.bodyHeight.value,P=t.footerHeight.value||0;if(e.height)return{height:F?`${F}px`:""};if(e.maxHeight){const M=qv(e.maxHeight);if(typeof M=="number")return{"max-height":`${M-P-(e.showHeader?D:0)}px`}}return{}}),T=O(()=>{if(e.data&&e.data.length)return null;let D="100%";return t.appendHeight.value&&(D=`calc(100% - ${t.appendHeight.value}px)`),{width:C.value,height:D}}),I=(D,F)=>{const P=s.refs.bodyWrapper;if(Math.abs(F.spinY)>0){const M=P.scrollTop;F.pixelY<0&&M!==0&&D.preventDefault(),F.pixelY>0&&P.scrollHeight-P.clientHeight>M&&D.preventDefault(),P.scrollTop+=Math.ceil(F.pixelY/5)}else P.scrollLeft+=Math.ceil(F.pixelX/5)},_=O(()=>e.maxHeight?e.showSummary?{bottom:0}:{bottom:t.scrollX.value&&e.data.length?`${t.gutterWidth}px`:""}:e.showSummary?{height:t.tableHeight.value?`${t.tableHeight.value}px`:""}:{height:t.viewportHeight.value?`${t.viewportHeight.value}px`:""}),N=O(()=>{if(e.height)return{height:t.fixedBodyHeight.value?`${t.fixedBodyHeight.value}px`:""};if(e.maxHeight){let D=qv(e.maxHeight);if(typeof D=="number")return D=t.scrollX.value?D-t.gutterWidth:D,e.showHeader&&(D-=t.headerHeight.value),D-=t.footerHeight.value,{"max-height":`${D}px`}}return{}});return{isHidden:o,renderExpanded:r,setDragVisible:a,isGroup:u,handleMouseLeave:c,handleHeaderFooterMousewheel:d,tableSize:w,bodyHeight:S,height:x,emptyBlockStyle:T,handleFixedMousewheel:I,fixedHeight:_,fixedBodyHeight:N,resizeProxyVisible:i,bodyWidth:C,resizeState:l,doLayout:p,tableBodyStyles:h}}var Dke={data:{type:Array,default:()=>[]},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""}};let Rke=1;const Mke=$e({name:"ElTable",directives:{Mousewheel:dle},components:{TableHeader:$ke,TableBody:Ike,TableFooter:_ke,ElScrollbar:Fa},props:Dke,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(e){const{t}=Tn(),n=Mt("table"),s=Wt();jt(oa,s);const o=ake(s,e);s.store=o;const r=new uke({store:s.store,table:s,fit:e.fit,showHeader:e.showHeader});s.layout=r;const i=O(()=>(o.states.data.value||[]).length===0),{setCurrentRow:a,toggleRowSelection:l,clearSelection:u,clearFilter:c,toggleAllSelection:d,toggleRowExpansion:f,clearSort:h,sort:p}=Nke(o),{isHidden:g,renderExpanded:m,setDragVisible:v,isGroup:b,handleMouseLeave:$,handleHeaderFooterMousewheel:y,tableSize:w,bodyHeight:C,height:x,emptyBlockStyle:S,handleFixedMousewheel:T,fixedHeight:I,fixedBodyHeight:_,resizeProxyVisible:N,bodyWidth:D,resizeState:F,doLayout:P,tableBodyStyles:M}=Ake(e,r,o,s),B=nr(P,50),j=`el-table_${Rke++}`;s.tableId=j,s.state={isGroup:b,resizeState:F,doLayout:P,debouncedUpdateLayout:B};const X=O(()=>e.sumText||t("el.table.sumText")),ae=O(()=>e.emptyText||t("el.table.emptyText"));return{ns:n,layout:r,store:o,handleHeaderFooterMousewheel:y,handleMouseLeave:$,tableId:j,tableSize:w,isHidden:g,isEmpty:i,renderExpanded:m,resizeProxyVisible:N,resizeState:F,isGroup:b,bodyWidth:D,bodyHeight:C,height:x,tableBodyStyles:M,emptyBlockStyle:S,debouncedUpdateLayout:B,handleFixedMousewheel:T,fixedHeight:I,fixedBodyHeight:_,setCurrentRow:a,toggleRowSelection:l,clearSelection:u,clearFilter:c,toggleAllSelection:d,toggleRowExpansion:f,clearSort:h,doLayout:P,sort:p,t,setDragVisible:v,context:s,computedSumText:X,computedEmptyText:ae}}}),Oke=["data-prefix"],Fke={ref:"hiddenColumns",class:"hidden-columns"};function Pke(e,t,n,s,o,r){const i=de("table-header"),a=de("table-body"),l=de("el-scrollbar"),u=de("table-footer"),c=Wo("mousewheel");return R(),H("div",{ref:"tableWrapper",class:Q([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b()]),style:rt(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:t[0]||(t[0]=d=>e.handleMouseLeave())},[K("div",{class:Q(e.ns.e("inner-wrapper"))},[K("div",Fke,[Pe(e.$slots,"default")],512),e.showHeader?Ct((R(),H("div",{key:0,ref:"headerWrapper",class:Q(e.ns.e("header-wrapper"))},[pe(i,{ref:"tableHeader",border:e.border,"default-sort":e.defaultSort,store:e.store,style:rt(e.tableBodyStyles),onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","style","onSetDragVisible"])],2)),[[c,e.handleHeaderFooterMousewheel]]):me("v-if",!0),K("div",{ref:"bodyWrapper",style:rt(e.bodyHeight),class:Q(e.ns.e("body-wrapper"))},[pe(l,{ref:"scrollWrapper",height:e.maxHeight?void 0:e.height,"max-height":e.maxHeight?e.height:void 0},{default:ce(()=>[pe(a,{ref:"tableBody",context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"row-style":e.rowStyle,store:e.store,stripe:e.stripe,style:rt({width:e.bodyWidth})},null,8,["context","highlight","row-class-name","tooltip-effect","row-style","store","stripe","style"]),e.isEmpty?(R(),H("div",{key:0,ref:"emptyBlock",style:rt(e.emptyBlockStyle),class:Q(e.ns.e("empty-block"))},[K("span",{class:Q(e.ns.e("empty-text"))},[Pe(e.$slots,"empty",{},()=>[Zt(ze(e.computedEmptyText),1)])],2)],6)):me("v-if",!0),e.$slots.append?(R(),H("div",{key:1,ref:"appendWrapper",class:Q(e.ns.e("append-wrapper"))},[Pe(e.$slots,"append")],2)):me("v-if",!0)]),_:3},8,["height","max-height"])],6),e.border||e.isGroup?(R(),H("div",{key:1,class:Q(e.ns.e("border-left-patch"))},null,2)):me("v-if",!0)],2),e.showSummary?Ct((R(),H("div",{key:0,ref:"footerWrapper",class:Q(e.ns.e("footer-wrapper"))},[pe(u,{border:e.border,"default-sort":e.defaultSort,store:e.store,style:rt(e.tableBodyStyles),"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","style","sum-text","summary-method"])],2)),[[sn,!e.isEmpty],[c,e.handleHeaderFooterMousewheel]]):me("v-if",!0),Ct(K("div",{ref:"resizeProxy",class:Q(e.ns.e("column-resize-proxy"))},null,2),[[sn,e.resizeProxyVisible]])],46,Oke)}var Lke=Ge(Mke,[["render",Pke]]);const Bke={selection:"table-column--selection",expand:"table__expand-column"},zke={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Vke=e=>Bke[e]||"",Wke={selection:{renderHeader({store:e}){function t(){return e.states.data.value&&e.states.data.value.length===0}return Ke(Si,{disabled:t(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value})},renderCell({row:e,column:t,store:n,$index:s}){return Ke(Si,{disabled:t.selectable?!t.selectable.call(null,e,s):!1,size:n.states.tableSize.value,onChange:()=>{n.commit("rowSelectedChanged",e)},onClick:o=>o.stopPropagation(),modelValue:n.isSelected(e)})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:t}){let n=t+1;const s=e.index;return typeof s=="number"?n=t+s:typeof s=="function"&&(n=s(t)),Ke("div",{},[n])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:t}){const{ns:n}=t,s=[n.e("expand-icon")];return t.states.expandRows.value.indexOf(e)>-1&&s.push(n.em("expand-icon","expanded")),Ke("div",{class:s,onClick:function(r){r.stopPropagation(),t.toggleRowExpansion(e)}},{default:()=>[Ke(Pt,null,{default:()=>[Ke(ei)]})]})},sortable:!1,resizable:!1}};function Hke({row:e,column:t,$index:n}){var s;const o=t.property,r=o&&_v(e,o,!1).v;return t&&t.formatter?t.formatter(e,t,r,n):((s=r==null?void 0:r.toString)==null?void 0:s.call(r))||""}function Uke({row:e,treeNode:t,store:n}){if(!t)return null;const s=[],o=function(i){i.stopPropagation(),n.loadOrToggle(e)},{ns:r}=n;if(t.indent&&s.push(Ke("span",{class:r.e("indent"),style:{"padding-left":`${t.indent}px`}})),typeof t.expanded=="boolean"&&!t.noLazyChildren){const i=[r.e("expand-icon"),t.expanded?r.em("expand-icon","expanded"):""];let a=ei;t.loading&&(a=Oa),s.push(Ke("div",{class:i,onClick:o},{default:()=>[Ke(Pt,{class:{[r.is("loading")]:t.loading}},{default:()=>[Ke(a)]})]}))}else s.push(Ke("span",{class:r.e("placeholder")}));return s}function jke(e,t){const n=Wt();return{registerComplexWatchers:()=>{const r=["fixed"],i={realWidth:"width",realMinWidth:"minWidth"},a=r.reduce((l,u)=>(l[u]=u,l),i);Object.keys(a).forEach(l=>{const u=i[l];Kt(t,u)&&Le(()=>t[u],c=>{let d=c;u==="width"&&l==="realWidth"&&(d=vk(c)),u==="minWidth"&&l==="realMinWidth"&&(d=j4(c)),n.columnConfig.value[u]=d,n.columnConfig.value[l]=d;const f=u==="fixed";e.value.store.scheduleLayout(f)})})},registerNormalWatchers:()=>{const r=["label","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],i={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},a=r.reduce((l,u)=>(l[u]=u,l),i);Object.keys(a).forEach(l=>{const u=i[l];Kt(t,u)&&Le(()=>t[u],c=>{n.columnConfig.value[l]=c})})}}}function Gke(e,t,n){const s=Wt(),o=V(""),r=V(!1),i=V(),a=V(),l=Mt("table");ka(()=>{i.value=e.align?`is-${e.align}`:null,i.value}),ka(()=>{a.value=e.headerAlign?`is-${e.headerAlign}`:i.value,a.value});const u=O(()=>{let b=s.vnode.vParent||s.parent;for(;b&&!b.tableId&&!b.columnId;)b=b.vnode.vParent||b.parent;return b}),c=V(vk(e.width)),d=V(j4(e.minWidth)),f=b=>(c.value&&(b.width=c.value),d.value&&(b.minWidth=d.value),b.minWidth||(b.minWidth=80),b.realWidth=Number(b.width===void 0?b.minWidth:b.width),b),h=b=>{const $=b.type,y=Wke[$]||{};Object.keys(y).forEach(C=>{const x=y[C];C!=="className"&&x!==void 0&&(b[C]=x)});const w=Vke($);if(w){const C=`${Xe(l.namespace)}-${w}`;b.className=b.className?`${b.className} ${C}`:C}return b},p=b=>{b instanceof Array?b.forEach(y=>$(y)):$(b);function $(y){var w;((w=y==null?void 0:y.type)==null?void 0:w.name)==="ElTableColumn"&&(y.vParent=s)}};return{columnId:o,realAlign:i,isSubColumn:r,realHeaderAlign:a,columnOrTableParent:u,setColumnWidth:f,setColumnForcedProps:h,setColumnRenders:b=>{e.renderHeader||b.type!=="selection"&&(b.renderHeader=y=>{s.columnConfig.value.label;const w=t.header;return w?w(y):b.label});let $=b.renderCell;return b.type==="expand"?(b.renderCell=y=>Ke("div",{class:"cell"},[$(y)]),n.value.renderExpanded=y=>t.default?t.default(y):t.default):($=$||Hke,b.renderCell=y=>{let w=null;t.default?w=t.default(y):w=$(y);const C=Uke(y),x={class:"cell",style:{}};return b.showOverflowTooltip&&(x.class=`${x.class} ${Xe(l.namespace)}-tooltip`,x.style={width:`${(y.column.realWidth||Number(y.column.width))-1}px`}),p(w),Ke("div",x,[C,w])}),b},getPropsData:(...b)=>b.reduce(($,y)=>(Array.isArray(y)&&y.forEach(w=>{$[w]=e[w]}),$),{}),getColumnElIndex:(b,$)=>[].indexOf.call(b,$)}}var Kke={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(t=>["ascending","descending",null].indexOf(t)>-1)}};let qke=1;var J4=$e({name:"ElTableColumn",components:{ElCheckbox:Si},props:Kke,setup(e,{slots:t}){const n=Wt(),s=V({}),o=O(()=>{let b=n.parent;for(;b&&!b.tableId;)b=b.parent;return b}),{registerNormalWatchers:r,registerComplexWatchers:i}=jke(o,e),{columnId:a,isSubColumn:l,realHeaderAlign:u,columnOrTableParent:c,setColumnWidth:d,setColumnForcedProps:f,setColumnRenders:h,getPropsData:p,getColumnElIndex:g,realAlign:m}=Gke(e,t,o),v=c.value;a.value=`${v.tableId||v.columnId}_column_${qke++}`,Mp(()=>{l.value=o.value!==v;const b=e.type||"default",$=e.sortable===""?!0:e.sortable,y=Ut(dt({},zke[b]),{id:a.value,type:b,property:e.prop||e.property,align:m,headerAlign:u,showOverflowTooltip:e.showOverflowTooltip||e.showTooltipWhenOverflow,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:$,index:e.index,rawColumnKey:n.vnode.key});let T=p(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);T=Z2e(y,T),T=J2e(h,d,f)(T),s.value=T,r(),i()}),Ft(()=>{var b;const $=c.value,y=l.value?$.vnode.el.children:(b=$.refs.hiddenColumns)==null?void 0:b.children,w=()=>g(y||[],n.vnode.el);s.value.getColumnIndex=w,w()>-1&&o.value.store.commit("insertColumn",s.value,l.value?$.columnConfig.value:null)}),us(()=>{o.value.store.commit("removeColumn",s.value,l.value?v.columnConfig.value:null)}),n.columnId=a.value,n.columnConfig=s},render(){var e,t,n;let s=[];try{const o=(t=(e=this.$slots).default)==null?void 0:t.call(e,{row:{},column:{},$index:-1});if(o instanceof Array)for(const r of o)((n=r.type)==null?void 0:n.name)==="ElTableColumn"||r.shapeFlag&2?s.push(r):r.type===ct&&r.children instanceof Array&&s.push(...r.children)}catch{s=[]}return Ke("div",s)}});const Yke=Gt(Lke,{TableColumn:J4}),Xke=cs(J4),Zke=yt({tabs:{type:et(Array),default:()=>As([])}}),uD="ElTabBar",Jke=$e({name:uD,props:Zke,setup(e){const t=Wt(),n=Qe(Cb);n||So(uD,"must use with ElTabs");const s=V(),o=V(),r=()=>{let a=0,l=0;const u=["top","bottom"].includes(n.props.tabPosition)?"width":"height",c=u==="width"?"x":"y";return e.tabs.every(d=>{var f,h,p,g;const m=(h=(f=t.parent)==null?void 0:f.refs)==null?void 0:h[`tab-${d.paneName}`];if(!m)return!1;if(!d.active)return!0;l=m[`client${gr(u)}`];const v=c==="x"?"left":"top";a=m.getBoundingClientRect()[v]-((g=(p=m.parentElement)==null?void 0:p.getBoundingClientRect()[v])!=null?g:0);const b=window.getComputedStyle(m);return u==="width"&&(e.tabs.length>1&&(l-=parseFloat(b.paddingLeft)+parseFloat(b.paddingRight)),a+=parseFloat(b.paddingLeft)),!1}),{[u]:`${l}px`,transform:`translate${gr(c)}(${a}px)`}},i=()=>o.value=r();return Le(()=>e.tabs,async()=>{await ft(),i()},{immediate:!0}),Jh(s,()=>i()),{bar$:s,rootTabs:n,barStyle:o,update:i}}});function Qke(e,t,n,s,o,r){return R(),H("div",{ref:"bar$",class:Q(["el-tabs__active-bar",`is-${e.rootTabs.props.tabPosition}`]),style:rt(e.barStyle)},null,6)}var eSe=Ge(Jke,[["render",Qke]]);const tSe=yt({panes:{type:et(Array),default:()=>As([])},currentName:{type:String,default:""},editable:Boolean,onTabClick:{type:et(Function),default:un},onTabRemove:{type:et(Function),default:un},type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),cD="ElTabNav";var nSe=$e({name:cD,props:tSe,setup(e,{expose:t}){const n=Fte(),s=jte(),o=Qe(Cb);o||So(cD,"ElTabNav must be nested inside ElTabs");const r=V(!1),i=V(0),a=V(!1),l=V(!0),u=V(),c=V(),d=V(),f=O(()=>["top","bottom"].includes(o.props.tabPosition)?"width":"height"),h=O(()=>({transform:`translate${f.value==="width"?"X":"Y"}(-${i.value}px)`})),p=()=>{if(!u.value)return;const w=u.value[`offset${gr(f.value)}`],C=i.value;if(!C)return;const x=C>w?C-w:0;i.value=x},g=()=>{if(!u.value||!c.value)return;const w=c.value[`offset${gr(f.value)}`],C=u.value[`offset${gr(f.value)}`],x=i.value;if(w-x<=C)return;const S=w-x>C*2?x+C:w-C;i.value=S},m=()=>{const w=c.value;if(!r.value||!d.value||!u.value||!w)return;const C=d.value.querySelector(".is-active");if(!C)return;const x=u.value,S=["top","bottom"].includes(o.props.tabPosition),T=C.getBoundingClientRect(),I=x.getBoundingClientRect(),_=S?w.offsetWidth-I.width:w.offsetHeight-I.height,N=i.value;let D=N;S?(T.left<I.left&&(D=N-(I.left-T.left)),T.right>I.right&&(D=N+T.right-I.right)):(T.top<I.top&&(D=N-(I.top-T.top)),T.bottom>I.bottom&&(D=N+(T.bottom-I.bottom))),D=Math.max(D,0),i.value=Math.min(D,_)},v=()=>{if(!c.value||!u.value)return;const w=c.value[`offset${gr(f.value)}`],C=u.value[`offset${gr(f.value)}`],x=i.value;if(C<w){const S=i.value;r.value=r.value||{},r.value.prev=S,r.value.next=S+C<w,w-S<C&&(i.value=w-C)}else r.value=!1,x>0&&(i.value=0)},b=w=>{const C=w.code,{up:x,down:S,left:T,right:I}=tt;if(![x,S,T,I].includes(C))return;const _=Array.from(w.currentTarget.querySelectorAll("[role=tab]")),N=_.indexOf(w.target);let D;C===T||C===x?N===0?D=_.length-1:D=N-1:N<_.length-1?D=N+1:D=0,_[D].focus(),_[D].click(),$()},$=()=>{l.value&&(a.value=!0)},y=()=>a.value=!1;return Le(n,w=>{w==="hidden"?l.value=!1:w==="visible"&&setTimeout(()=>l.value=!0,50)}),Le(s,w=>{w?setTimeout(()=>l.value=!0,50):l.value=!1}),Jh(d,v),Ft(()=>setTimeout(()=>m(),0)),Ni(()=>v()),t({scrollToActiveTab:m,removeFocus:y}),()=>{const w=r.value?[Ke("span",{class:["el-tabs__nav-prev",r.value.prev?"":"is-disabled"],onClick:p},[Ke(Pt,{},{default:()=>Ke(pc)})]),Ke("span",{class:["el-tabs__nav-next",r.value.next?"":"is-disabled"],onClick:g},[Ke(Pt,{},{default:()=>Ke(ei)})])]:null,C=e.panes.map((x,S)=>{var T,I;const _=x.props.name||x.index||`${S}`,N=x.isClosable||e.editable;x.index=`${S}`;const D=N?Ke(Pt,{class:"is-icon-close",onClick:M=>e.onTabRemove(x,M)},{default:()=>Ke(ki)}):null,F=((I=(T=x.instance.slots).label)==null?void 0:I.call(T))||x.props.label,P=x.active?0:-1;return Ke("div",{class:{"el-tabs__item":!0,[`is-${o.props.tabPosition}`]:!0,"is-active":x.active,"is-disabled":x.props.disabled,"is-closable":N,"is-focus":a},id:`tab-${_}`,key:`tab-${_}`,"aria-controls":`pane-${_}`,role:"tab","aria-selected":x.active,ref:`tab-${_}`,tabindex:P,onFocus:()=>$(),onBlur:()=>y(),onClick:M=>{y(),e.onTabClick(x,_,M)},onKeydown:M=>{N&&(M.code===tt.delete||M.code===tt.backspace)&&e.onTabRemove(x,M)}},[F,D])});return Ke("div",{ref:d,class:["el-tabs__nav-wrap",r.value?"is-scrollable":"",`is-${o.props.tabPosition}`]},[w,Ke("div",{class:"el-tabs__nav-scroll",ref:u},[Ke("div",{class:["el-tabs__nav",`is-${o.props.tabPosition}`,e.stretch&&["top","bottom"].includes(o.props.tabPosition)?"is-stretch":""],ref:c,style:h.value,role:"tablist",onKeydown:b},[e.type?null:Ke(eSe,{tabs:[...e.panes]}),C])])])}}});const sSe=yt({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:String,default:""},closable:Boolean,addable:Boolean,modelValue:{type:String,default:""},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:et(Function),default:()=>!0},stretch:Boolean}),oSe={[Bt]:e=>typeof e=="string",[vl]:e=>typeof e=="string","tab-click":(e,t)=>t instanceof Event,edit:(e,t)=>t==="remove"||t==="add","tab-remove":e=>typeof e=="string","tab-add":()=>!0},Q4=(e,t=[])=>{const n=e.children||[];return Array.from(n).forEach(s=>{let o=s.type;o=o.name||o,o==="ElTabPane"&&s.component?t.push(s.component):(o===ct||o==="template")&&Q4(s,t)}),t};var rSe=$e({name:"ElTabs",props:sSe,emits:oSe,setup(e,{emit:t,slots:n,expose:s}){const o=Wt(),r=V(),i=V([]),a=V(e.modelValue||e.activeName||"0"),l={},u=(g=!1)=>{if(n.default){const m=o.subTree.children,v=Array.from(m).find(({props:y})=>(y==null?void 0:y.class)==="el-tabs__content");if(!v)return;const b=Q4(v).map(y=>l[y.uid]),$=!(b.length===i.value.length&&b.every((y,w)=>y.uid===i.value[w].uid));(g||$)&&(i.value=b)}else i.value.length!==0&&(i.value=[])},c=g=>{a.value=g,t(vl,g),t(Bt,g)},d=g=>{var m;if(a.value===g)return;const v=(m=e.beforeLeave)==null?void 0:m.call(e,g,a.value);wd(v)?v.then(()=>{var b,$;c(g),($=(b=r.value)==null?void 0:b.removeFocus)==null||$.call(b)},un):v!==!1&&c(g)},f=(g,m,v)=>{g.props.disabled||(d(m),t("tab-click",g,v))},h=(g,m)=>{g.props.disabled||(m.stopPropagation(),t("edit",g.props.name,"remove"),t("tab-remove",g.props.name))},p=()=>{t("edit",null,"add"),t("tab-add")};return Ni(()=>u()),Ft(()=>u()),Le(()=>e.activeName,g=>d(g)),Le(()=>e.modelValue,g=>d(g)),Le(a,async()=>{var g,m;u(!0),await ft(),await((g=r.value)==null?void 0:g.$nextTick()),(m=r.value)==null||m.scrollToActiveTab()}),jt(Cb,{props:e,currentName:a,updatePaneState:g=>l[g.uid]=g}),s({currentName:a}),()=>{const g=e.editable||e.addable?Ke("span",{class:"el-tabs__new-tab",tabindex:"0",onClick:p,onKeydown:b=>{b.code===tt.enter&&p()}},[Ke(Pt,{class:"is-icon-plus"},{default:()=>Ke(NP)})]):null,m=Ke("div",{class:["el-tabs__header",`is-${e.tabPosition}`]},[g,Ke(nSe,{currentName:a.value,editable:e.editable,type:e.type,panes:i.value,stretch:e.stretch,ref:r,onTabClick:f,onTabRemove:h})]),v=Ke("div",{class:"el-tabs__content"},[Pe(n,"default")]);return Ke("div",{class:{"el-tabs":!0,"el-tabs--card":e.type==="card",[`el-tabs--${e.tabPosition}`]:!0,"el-tabs--border-card":e.type==="border-card"}},e.tabPosition!=="bottom"?[m,v]:[v,m])}}});const iSe=yt({label:{type:String,default:""},name:{type:String,default:""},closable:Boolean,disabled:Boolean,lazy:Boolean}),dD="ElTabPane",aSe=$e({name:dD,props:iSe,setup(e){const t=Wt(),n=Qe(Cb);n||So(dD,"must use with ElTabs");const s=V(),o=V(!1),r=O(()=>e.closable||n.props.closable),i=TN(()=>n.currentName.value===(e.name||s.value)),a=O(()=>e.name||s.value),l=TN(()=>!e.lazy||o.value||i.value);return Le(i,u=>{u&&(o.value=!0)}),n.updatePaneState(En({uid:t.uid,instance:Hh(t),props:e,paneName:a,active:i,index:s,isClosable:r})),{active:i,paneName:a,shouldBeRender:l}}}),lSe=["id","aria-hidden","aria-labelledby"];function uSe(e,t,n,s,o,r){return e.shouldBeRender?Ct((R(),H("div",{key:0,id:`pane-${e.paneName}`,class:"el-tab-pane",role:"tabpanel","aria-hidden":!e.active,"aria-labelledby":`tab-${e.paneName}`},[Pe(e.$slots,"default")],8,lSe)),[[sn,e.active]]):me("v-if",!0)}var eB=Ge(aSe,[["render",uSe]]);const cSe=Gt(rSe,{TabPane:eB}),dSe=cs(eB);kt.extend(ek);const{Option:fSe}=zb,va=e=>{const t=(e||"").split(":");if(t.length>=2){let n=parseInt(t[0],10);const s=parseInt(t[1],10),o=e.toUpperCase();return o.includes("AM")&&n===12?n=0:o.includes("PM")&&n!==12&&(n+=12),{hours:n,minutes:s}}return null},Zw=(e,t)=>{const n=va(e),s=va(t),o=n.minutes+n.hours*60,r=s.minutes+s.hours*60;return o===r?0:o>r?1:-1},fD=e=>`${e}`.padStart(2,"0"),Qc=e=>`${fD(e.hours)}:${fD(e.minutes)}`,hSe=(e,t)=>{const n=va(e),s=va(t),o={hours:n.hours,minutes:n.minutes};return o.minutes+=s.minutes,o.hours+=s.hours,o.hours+=Math.floor(o.minutes/60),o.minutes=o.minutes%60,Qc(o)},pSe=$e({name:"ElTimeSelect",components:{ElSelect:zb,ElOption:fSe,ElIcon:Pt},model:{prop:"value",event:"change"},props:{format:{type:String,default:"HH:mm"},modelValue:String,disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},size:{type:String,default:"default",validator:e=>!e||["large","default","small"].indexOf(e)!==-1},placeholder:{type:String,default:""},start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:{type:String,default:""},maxTime:{type:String,default:""},name:{type:String,default:""},prefixIcon:{type:[String,Object],default:_P},clearIcon:{type:[String,Object],default:_a}},emits:["change","blur","focus","update:modelValue"],setup(e){const t=V(null),n=O(()=>e.modelValue),s=O(()=>{const d=va(e.start);return Qc(d)}),o=O(()=>{const d=va(e.end);return Qc(d)}),r=O(()=>{const d=va(e.step);return Qc(d)}),i=O(()=>{const d=va(e.minTime);return d?Qc(d):null}),a=O(()=>{const d=va(e.maxTime);return d?Qc(d):null}),l=O(()=>{const d=[];if(e.start&&e.end&&e.step){let f=s.value,h;for(;Zw(f,o.value)<=0;)h=kt(f,"HH:mm").format(e.format),d.push({value:h,disabled:Zw(f,i.value||"-1:-1")<=0||Zw(f,a.value||"100:100")>=0}),f=hSe(f,r.value)}return d});return{select:t,value:n,items:l,blur:()=>{var d,f;(f=(d=t.value)==null?void 0:d.blur)==null||f.call(d)},focus:()=>{var d,f;(f=(d=t.value)==null?void 0:d.focus)==null||f.call(d)}}}});function gSe(e,t,n,s,o,r){const i=de("el-option"),a=de("el-icon"),l=de("el-select");return R(),ke(l,{ref:"select","model-value":e.value,disabled:e.disabled,clearable:e.clearable,"clear-icon":e.clearIcon,size:e.size,placeholder:e.placeholder,"default-first-option":"",filterable:e.editable,"onUpdate:modelValue":t[0]||(t[0]=u=>e.$emit("update:modelValue",u)),onChange:t[1]||(t[1]=u=>e.$emit("change",u)),onBlur:t[2]||(t[2]=u=>e.$emit("blur",u)),onFocus:t[3]||(t[3]=u=>e.$emit("focus",u))},{prefix:ce(()=>[e.prefixIcon?(R(),ke(a,{key:0,class:"el-input__prefix-icon"},{default:ce(()=>[(R(),ke(on(e.prefixIcon)))]),_:1})):me("v-if",!0)]),default:ce(()=>[(R(!0),H(ct,null,en(e.items,u=>(R(),ke(i,{key:u.value,label:u.value,value:u.value,disabled:u.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","placeholder","filterable"])}var Zv=Ge(pSe,[["render",gSe]]);Zv.install=e=>{e.component(Zv.name,Zv)};const mSe=Zv,vSe=mSe,bSe=$e({name:"ElTimeline",setup(e,{slots:t}){const n=Mt("timeline");return jt("timeline",t),()=>Ke("ul",{class:[n.b()]},[Pe(t,"default")])}}),ySe=yt({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},type:{type:String,default:""},color:{type:String,default:""},size:{type:String,default:"normal"},icon:{type:et([String,Object]),default:""},hollow:{type:Boolean,default:!1}}),wSe=$e({name:"ElTimelineItem",components:{ElIcon:Pt},props:ySe,setup(){return{ns:Mt("timeline-item")}}});function $Se(e,t,n,s,o,r){const i=de("el-icon");return R(),H("li",{class:Q([e.ns.b(),{[e.ns.e("center")]:e.center}])},[K("div",{class:Q(e.ns.e("tail"))},null,2),e.$slots.dot?me("v-if",!0):(R(),H("div",{key:0,class:Q([e.ns.e("node"),e.ns.em("node",e.size||""),e.ns.em("node",e.type||""),e.ns.is("hollow",e.hollow)]),style:rt({backgroundColor:e.color})},[e.icon?(R(),ke(i,{key:0,class:Q(e.ns.e("icon"))},{default:ce(()=>[(R(),ke(on(e.icon)))]),_:1},8,["class"])):me("v-if",!0)],6)),e.$slots.dot?(R(),H("div",{key:1,class:Q(e.ns.e("dot"))},[Pe(e.$slots,"dot")],2)):me("v-if",!0),K("div",{class:Q(e.ns.e("wrapper"))},[!e.hideTimestamp&&e.placement==="top"?(R(),H("div",{key:0,class:Q([e.ns.e("timestamp"),e.ns.is("top")])},ze(e.timestamp),3)):me("v-if",!0),K("div",{class:Q(e.ns.e("content"))},[Pe(e.$slots,"default")],2),!e.hideTimestamp&&e.placement==="bottom"?(R(),H("div",{key:1,class:Q([e.ns.e("timestamp"),e.ns.is("bottom")])},ze(e.timestamp),3)):me("v-if",!0)],2)],2)}var tB=Ge(wSe,[["render",$Se]]);const CSe=Gt(bSe,{TimelineItem:tB}),xSe=cs(tB),FC="checked-change",kSe={data:{type:Array,default(){return[]}},optionRender:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},SSe=(e,t)=>{const{emit:n}=Wt(),s=O(()=>e.props.label||"label"),o=O(()=>e.props.key||"key"),r=O(()=>e.props.disabled||"disabled"),i=O(()=>e.data.filter(f=>typeof e.filterMethod=="function"?e.filterMethod(t.query,f):(f[s.value]||f[o.value].toString()).toLowerCase().includes(t.query.toLowerCase()))),a=O(()=>i.value.filter(f=>!f[r.value])),l=O(()=>{const f=t.checked.length,h=e.data.length,{noChecked:p,hasChecked:g}=e.format;return p&&g?f>0?g.replace(/\${checked}/g,f.toString()).replace(/\${total}/g,h.toString()):p.replace(/\${total}/g,h.toString()):`${f}/${h}`}),u=O(()=>{const f=t.checked.length;return f>0&&f<a.value.length}),c=()=>{const f=a.value.map(h=>h[o.value]);t.allChecked=f.length>0&&f.every(h=>t.checked.includes(h))},d=f=>{t.checked=f?a.value.map(h=>h[o.value]):[]};return Le(()=>t.checked,(f,h)=>{if(c(),t.checkChangeByUser){const p=f.concat(h).filter(g=>!f.includes(g)||!h.includes(g));n(FC,f,p)}else n(FC,f),t.checkChangeByUser=!0}),Le(a,()=>{c()}),Le(()=>e.data,()=>{const f=[],h=i.value.map(p=>p[o.value]);t.checked.forEach(p=>{h.includes(p)&&f.push(p)}),t.checkChangeByUser=!1,t.checked=f}),Le(()=>e.defaultChecked,(f,h)=>{if(h&&f.length===h.length&&f.every(m=>h.includes(m)))return;const p=[],g=a.value.map(m=>m[o.value]);f.forEach(m=>{g.includes(m)&&p.push(m)}),t.checkChangeByUser=!1,t.checked=p},{immediate:!0}),{labelProp:s,keyProp:o,disabledProp:r,filteredData:i,checkableData:a,checkedSummary:l,isIndeterminate:u,updateAllChecked:c,handleAllCheckedChange:d}},ISe=$e({name:"ElTransferPanel",components:{ElCheckboxGroup:DL,ElCheckbox:Si,ElInput:ti,OptionContent:({option:e})=>e},props:kSe,emits:[FC],setup(e,{slots:t}){const{t:n}=Tn(),s=En({checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}),{labelProp:o,keyProp:r,disabledProp:i,filteredData:a,checkedSummary:l,isIndeterminate:u,handleAllCheckedChange:c}=SSe(e,s),d=O(()=>s.query.length>0&&a.value.length===0),f=O(()=>!!t.default()[0].children.length),{checked:h,allChecked:p,query:g,inputHover:m,checkChangeByUser:v}=ko(s);return{labelProp:o,keyProp:r,disabledProp:i,filteredData:a,checkedSummary:l,isIndeterminate:u,handleAllCheckedChange:c,checked:h,allChecked:p,query:g,inputHover:m,checkChangeByUser:v,hasNoMatch:d,SearchIcon:Uie,hasFooter:f,t:n}}}),ESe={class:"el-transfer-panel"},TSe={class:"el-transfer-panel__header"},_Se={key:0,class:"el-transfer-panel__footer"};function NSe(e,t,n,s,o,r){const i=de("el-checkbox"),a=de("el-input"),l=de("option-content"),u=de("el-checkbox-group");return R(),H("div",ESe,[K("p",TSe,[pe(i,{modelValue:e.allChecked,"onUpdate:modelValue":t[0]||(t[0]=c=>e.allChecked=c),indeterminate:e.isIndeterminate,onChange:e.handleAllCheckedChange},{default:ce(()=>[Zt(ze(e.title)+" ",1),K("span",null,ze(e.checkedSummary),1)]),_:1},8,["modelValue","indeterminate","onChange"])]),K("div",{class:Q(["el-transfer-panel__body",e.hasFooter?"is-with-footer":""])},[e.filterable?(R(),ke(a,{key:0,modelValue:e.query,"onUpdate:modelValue":t[1]||(t[1]=c=>e.query=c),class:"el-transfer-panel__filter",size:"default",placeholder:e.placeholder,"prefix-icon":e.SearchIcon,clearable:"",onMouseenter:t[2]||(t[2]=c=>e.inputHover=!0),onMouseleave:t[3]||(t[3]=c=>e.inputHover=!1)},null,8,["modelValue","placeholder","prefix-icon"])):me("v-if",!0),Ct(pe(u,{modelValue:e.checked,"onUpdate:modelValue":t[4]||(t[4]=c=>e.checked=c),class:Q([{"is-filterable":e.filterable},"el-transfer-panel__list"])},{default:ce(()=>[(R(!0),H(ct,null,en(e.filteredData,c=>(R(),ke(i,{key:c[e.keyProp],class:"el-transfer-panel__item",label:c[e.keyProp],disabled:c[e.disabledProp]},{default:ce(()=>[pe(l,{option:e.optionRender(c)},null,8,["option"])]),_:2},1032,["label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[sn,!e.hasNoMatch&&e.data.length>0]]),Ct(K("p",{class:"el-transfer-panel__empty"},ze(e.hasNoMatch?e.t("el.transfer.noMatch"):e.t("el.transfer.noData")),513),[[sn,e.hasNoMatch||e.data.length===0]])],2),e.hasFooter?(R(),H("p",_Se,[Pe(e.$slots,"default")])):me("v-if",!0)])}var ASe=Ge(ISe,[["render",NSe]]);const DSe=e=>{const t=O(()=>e.props.key),n=O(()=>e.data.reduce((r,i)=>(r[i[t.value]]=i)&&r,{})),s=O(()=>e.data.filter(r=>!e.modelValue.includes(r[t.value]))),o=O(()=>e.targetOrder==="original"?e.data.filter(r=>e.modelValue.includes(r[t.value])):e.modelValue.reduce((r,i)=>{const a=n.value[i];return a&&r.push(a),r},[]));return{propsKey:t,sourceData:s,targetData:o}},nB="left-check-change",sB="right-check-change",RSe=(e,t)=>({onSourceCheckedChange:(o,r)=>{e.leftChecked=o,r!==void 0&&t(nB,o,r)},onTargetCheckedChange:(o,r)=>{e.rightChecked=o,r!==void 0&&t(sB,o,r)}}),MSe=(e,t,n,s)=>{const o=(a,l,u)=>{s(Bt,a),s(Zs,a,l,u)};return{addToLeft:()=>{const a=e.modelValue.slice();t.rightChecked.forEach(l=>{const u=a.indexOf(l);u>-1&&a.splice(u,1)}),o(a,"left",t.rightChecked)},addToRight:()=>{let a=e.modelValue.slice();const l=e.data.filter(u=>{const c=u[n.value];return t.leftChecked.includes(c)&&!e.modelValue.includes(c)}).map(u=>u[n.value]);a=e.targetOrder==="unshift"?l.concat(a):a.concat(l),e.targetOrder==="original"&&(a=e.data.filter(u=>a.includes(u[n.value])).map(u=>u[n.value])),o(a,"right",t.leftChecked)}}},OSe=$e({name:"ElTransfer",components:{TransferPanel:ASe,ElButton:sa,ElIcon:Pt,ArrowLeft:pc,ArrowRight:ei},props:{data:{type:Array,default:()=>[]},titles:{type:Array,default:()=>[]},buttonTexts:{type:Array,default:()=>[]},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:()=>[]},rightDefaultChecked:{type:Array,default:()=>[]},renderContent:Function,modelValue:{type:Array,default:()=>[]},format:{type:Object,default:()=>({})},filterable:{type:Boolean,default:!1},props:{type:Object,default:()=>({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,default:"original",validator:e=>["original","push","unshift"].includes(e)}},emits:[Bt,Zs,nB,sB],setup(e,{emit:t,slots:n}){const{t:s}=Tn(),o=Qe(Ai,{}),r=En({leftChecked:[],rightChecked:[]}),{propsKey:i,sourceData:a,targetData:l}=DSe(e),{onSourceCheckedChange:u,onTargetCheckedChange:c}=RSe(r,t),{addToLeft:d,addToRight:f}=MSe(e,r,i,t),h=V(),p=V(),g=w=>{switch(w){case"left":h.value.query="";break;case"right":p.value.query="";break}},m=O(()=>e.buttonTexts.length===2),v=O(()=>e.titles[0]||s("el.transfer.titles.0")),b=O(()=>e.titles[1]||s("el.transfer.titles.1")),$=O(()=>e.filterPlaceholder||s("el.transfer.filterPlaceholder"));Le(()=>e.modelValue,()=>{var w;(w=o.validate)==null||w.call(o,"change")});const y=O(()=>w=>e.renderContent?e.renderContent(Ke,w):n.default?n.default({option:w}):Ke("span",w[e.props.label]||w[e.props.key]));return Ut(dt({sourceData:a,targetData:l,onSourceCheckedChange:u,onTargetCheckedChange:c,addToLeft:d,addToRight:f},ko(r)),{hasButtonTexts:m,leftPanelTitle:v,rightPanelTitle:b,panelFilterPlaceholder:$,clearQuery:g,leftPanel:h,rightPanel:p,optionRender:y})}}),FSe={class:"el-transfer"},PSe={class:"el-transfer__buttons"},LSe={key:0},BSe={key:0};function zSe(e,t,n,s,o,r){const i=de("transfer-panel"),a=de("arrow-left"),l=de("el-icon"),u=de("el-button"),c=de("arrow-right");return R(),H("div",FSe,[pe(i,{ref:"leftPanel",data:e.sourceData,"option-render":e.optionRender,placeholder:e.panelFilterPlaceholder,title:e.leftPanelTitle,filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,"default-checked":e.leftDefaultChecked,props:e.props,onCheckedChange:e.onSourceCheckedChange},{default:ce(()=>[Pe(e.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),K("div",PSe,[pe(u,{type:"primary",class:Q(["el-transfer__button",e.hasButtonTexts?"is-with-texts":""]),disabled:e.rightChecked.length===0,onClick:e.addToLeft},{default:ce(()=>[pe(l,null,{default:ce(()=>[pe(a)]),_:1}),e.buttonTexts[0]!==void 0?(R(),H("span",LSe,ze(e.buttonTexts[0]),1)):me("v-if",!0)]),_:1},8,["class","disabled","onClick"]),pe(u,{type:"primary",class:Q(["el-transfer__button",e.hasButtonTexts?"is-with-texts":""]),disabled:e.leftChecked.length===0,onClick:e.addToRight},{default:ce(()=>[e.buttonTexts[1]!==void 0?(R(),H("span",BSe,ze(e.buttonTexts[1]),1)):me("v-if",!0),pe(l,null,{default:ce(()=>[pe(c)]),_:1})]),_:1},8,["class","disabled","onClick"])]),pe(i,{ref:"rightPanel",data:e.targetData,"option-render":e.optionRender,placeholder:e.panelFilterPlaceholder,filterable:e.filterable,format:e.format,"filter-method":e.filterMethod,title:e.rightPanelTitle,"default-checked":e.rightDefaultChecked,props:e.props,onCheckedChange:e.onTargetCheckedChange},{default:ce(()=>[Pe(e.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])])}var Jv=Ge(OSe,[["render",zSe]]);Jv.install=e=>{e.component(Jv.name,Jv)};const VSe=Jv,WSe=VSe,hd="$treeNodeId",hD=function(e,t){!t||t[hd]||Object.defineProperty(t,hd,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},$k=function(e,t){return e?t[e]:t[hd]},PC=e=>{let t=!0,n=!0,s=!0;for(let o=0,r=e.length;o<r;o++){const i=e[o];(i.checked!==!0||i.indeterminate)&&(t=!1,i.disabled||(s=!1)),(i.checked!==!1||i.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:s,half:!t&&!n}},Qv=function(e){if(e.childNodes.length===0)return;const{all:t,none:n,half:s}=PC(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):s?(e.checked=!1,e.indeterminate=!0):n&&(e.checked=!1,e.indeterminate=!1);const o=e.parent;!o||o.level===0||e.store.checkStrictly||Qv(o)},Km=function(e,t){const n=e.store.props,s=e.data||{},o=n[t];if(typeof o=="function")return o(s,e);if(typeof o=="string")return s[o];if(typeof o=="undefined"){const r=s[t];return r===void 0?"":r}};let HSe=0;class Ou{constructor(t){this.id=HSe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in t)Kt(t,n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const n=t.props;if(n&&typeof n.isLeaf!="undefined"){const r=Km(this,"isLeaf");typeof r=="boolean"&&(this.isLeafByUser=r)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&this.expand(),Array.isArray(this.data)||hD(this,this.data),!this.data)return;const s=t.defaultExpandedKeys,o=t.key;o&&s&&s.indexOf(this.key)!==-1&&this.expand(null,t.autoExpandParent),o&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(t){Array.isArray(t)||hD(this,t),this.data=t,this.childNodes=[];let n;this.level===0&&this.data instanceof Array?n=this.data:n=Km(this,"children")||[];for(let s=0,o=n.length;s<o;s++)this.insertChild({data:n[s]})}get label(){return Km(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return Km(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return t.childNodes[n+1]}return null}get previousSibling(){const t=this.parent;if(t){const n=t.childNodes.indexOf(this);if(n>-1)return n>0?t.childNodes[n-1]:null}return null}contains(t,n=!0){return(this.childNodes||[]).some(s=>s===t||n&&s.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,n,s){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof Ou)){if(!s){const o=this.getChildren(!0);o.indexOf(t.data)===-1&&(typeof n=="undefined"||n<0?o.push(t.data):o.splice(n,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=En(new Ou(t)),t instanceof Ou&&t.initialize()}t.level=this.level+1,typeof n=="undefined"||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()}insertBefore(t,n){let s;n&&(s=this.childNodes.indexOf(n)),this.insertChild(t,s)}insertAfter(t,n){let s;n&&(s=this.childNodes.indexOf(n),s!==-1&&(s+=1)),this.insertChild(t,s)}removeChild(t){const n=this.getChildren()||[],s=n.indexOf(t.data);s>-1&&n.splice(s,1);const o=this.childNodes.indexOf(t);o>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(o,1)),this.updateLeafState()}removeChildByData(t){let n=null;for(let s=0;s<this.childNodes.length;s++)if(this.childNodes[s].data===t){n=this.childNodes[s];break}n&&this.removeChild(n)}expand(t,n){const s=()=>{if(n){let o=this.parent;for(;o.level>0;)o.expanded=!0,o=o.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(o=>{o.canFocus=!0})};this.shouldLoadData()?this.loadData(o=>{Array.isArray(o)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Qv(this),s())}):s()}doCreateChildren(t,n={}){t.forEach(s=>{this.insertChild(Object.assign({data:s},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser!="undefined"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,n,s,o){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:i,allWithoutDisable:a}=PC(this.childNodes);!this.isLeaf&&!i&&a&&(this.checked=!1,t=!1);const l=()=>{if(n){const u=this.childNodes;for(let f=0,h=u.length;f<h;f++){const p=u[f];o=o||t!==!1;const g=p.disabled?p.checked:o;p.setChecked(g,n,!0,o)}const{half:c,all:d}=PC(u);d||(this.checked=d,this.indeterminate=c)}};if(this.shouldLoadData()){this.loadData(()=>{l(),Qv(this)},{checked:t!==!1});return}else l()}const r=this.parent;!r||r.level===0||s||Qv(r)}getChildren(t=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const s=this.store.props;let o="children";return s&&(o=s.children||"children"),n[o]===void 0&&(n[o]=null),t&&!n[o]&&(n[o]=[]),n[o]}updateChildren(){const t=this.getChildren()||[],n=this.childNodes.map(r=>r.data),s={},o=[];t.forEach((r,i)=>{const a=r[hd];!!a&&n.findIndex(u=>u[hd]===a)>=0?s[a]={index:i,data:r}:o.push({index:i,data:r})}),this.store.lazy||n.forEach(r=>{s[r[hd]]||this.removeChildByData(r)}),o.forEach(({index:r,data:i})=>{this.insertChild({data:i},r)}),this.updateLeafState()}loadData(t,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const s=o=>{this.loaded=!0,this.loading=!1,this.childNodes=[],this.doCreateChildren(o,n),this.updateLeafState(),t&&t.call(this,o)};this.store.load(this,s)}else t&&t.call(this)}}class USe{constructor(t){this.currentNode=null,this.currentNodeKey=null;for(const n in t)Kt(t,n)&&(this[n]=t[n]);this.nodesMap={}}initialize(){this.root=new Ou({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load?this.load(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()}):this._initDefaultCheckedNodes()}filter(t){const n=this.filterNodeMethod,s=this.lazy,o=function(r){const i=r.root?r.root.childNodes:r.childNodes;if(i.forEach(a=>{a.visible=n.call(a,t,a.data,a),o(a)}),!r.visible&&i.length){let a=!0;a=!i.some(l=>l.visible),r.root?r.root.visible=a===!1:r.visible=a===!1}!t||r.visible&&!r.isLeaf&&!s&&r.expand()};o(this)}setData(t){t!==this.root.data?(this.root.setData(t),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(t){if(t instanceof Ou)return t;const n=typeof t!="object"?t:$k(this.key,t);return this.nodesMap[n]||null}insertBefore(t,n){const s=this.getNode(n);s.parent.insertBefore({data:t},s)}insertAfter(t,n){const s=this.getNode(n);s.parent.insertAfter({data:t},s)}remove(t){const n=this.getNode(t);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(t,n){const s=n?this.getNode(n):this.root;s&&s.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach(s=>{const o=n[s];o&&o.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){(this.defaultCheckedKeys||[]).indexOf(t.key)!==-1&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const n=this.key;!t||!t.data||(n?t.key!==void 0&&(this.nodesMap[t.key]=t):this.nodesMap[t.id]=t)}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(s=>{this.deregisterNode(s)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,n=!1){const s=[],o=function(r){(r.root?r.root.childNodes:r.childNodes).forEach(a=>{(a.checked||n&&a.indeterminate)&&(!t||t&&a.isLeaf)&&s.push(a.data),o(a)})};return o(this),s}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const t=[],n=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(r=>{r.indeterminate&&t.push(r.data),n(r)})};return n(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],n=this.nodesMap;for(const s in n)Kt(n,s)&&t.push(n[s]);return t}updateChildren(t,n){const s=this.nodesMap[t];if(!s)return;const o=s.childNodes;for(let r=o.length-1;r>=0;r--){const i=o[r];this.remove(i.data)}for(let r=0,i=n.length;r<i;r++){const a=n[r];this.append(a,s.data)}}_setCheckedKeys(t,n=!1,s){const o=this._getAllNodes().sort((a,l)=>l.level-a.level),r=Object.create(null),i=Object.keys(s);o.forEach(a=>a.setChecked(!1,!1));for(let a=0,l=o.length;a<l;a++){const u=o[a],c=u.data[t].toString();if(!(i.indexOf(c)>-1)){u.checked&&!r[c]&&u.setChecked(!1,!1);continue}let f=u.parent;for(;f&&f.level>0;)r[f.data[t]]=!0,f=f.parent;if(u.isLeaf||this.checkStrictly){u.setChecked(!0,!1);continue}if(u.setChecked(!0,!0),n){u.setChecked(!1,!1);const h=function(p){p.childNodes.forEach(m=>{m.isLeaf||m.setChecked(!1,!1),h(m)})};h(u)}}}setCheckedNodes(t,n=!1){const s=this.key,o={};t.forEach(r=>{o[(r||{})[s]]=!0}),this._setCheckedKeys(s,n,o)}setCheckedKeys(t,n=!1){this.defaultCheckedKeys=t;const s=this.key,o={};t.forEach(r=>{o[r]=!0}),this._setCheckedKeys(s,n,o)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(n=>{const s=this.getNode(n);s&&s.expand(null,this.autoExpandParent)})}setChecked(t,n,s){const o=this.getNode(t);o&&o.setChecked(!!n,s)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,n=!0){const s=t[this.key],o=this.nodesMap[s];this.setCurrentNode(o),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(t,n=!0){if(t==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const s=this.getNode(t);s&&(this.setCurrentNode(s),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const jSe=$e({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=Qe("NodeInstance"),n=Qe("RootTree");return()=>{const s=e.node,{data:o,store:r}=s;return e.renderContent?e.renderContent(Ke,{_self:t,node:s,data:o,store:r}):n.ctx.slots.default?n.ctx.slots.default({node:s,data:o}):Ke("span",{class:"el-tree-node__label"},[s.label])}}});function oB(e){const t=Qe("TreeNodeMap",null),n={treeNodeExpand:s=>{e.node!==s&&e.node.collapse()},children:[]};return t&&t.children.push(n),jt("TreeNodeMap",n),{broadcastExpanded:s=>{if(!!e.accordion)for(const o of n.children)o.treeNodeExpand(s)}}}const rB=Symbol("dragEvents");function GSe({props:e,ctx:t,el$:n,dropIndicator$:s,store:o}){const r=V({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return jt(rB,{treeNodeDragStart:({event:u,treeNode:c})=>{if(typeof e.allowDrag=="function"&&!e.allowDrag(c.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}r.value.draggingNode=c,t.emit("node-drag-start",c.node,u)},treeNodeDragOver:({event:u,treeNode:c})=>{const d=c,f=r.value.dropNode;f&&f!==d&&wo(f.$el,"is-drop-inner");const h=r.value.draggingNode;if(!h||!d)return;let p=!0,g=!0,m=!0,v=!0;typeof e.allowDrop=="function"&&(p=e.allowDrop(h.node,d.node,"prev"),v=g=e.allowDrop(h.node,d.node,"inner"),m=e.allowDrop(h.node,d.node,"next")),u.dataTransfer.dropEffect=g||p||m?"move":"none",(p||g||m)&&f!==d&&(f&&t.emit("node-drag-leave",h.node,f.node,u),t.emit("node-drag-enter",h.node,d.node,u)),(p||g||m)&&(r.value.dropNode=d),d.node.nextSibling===h.node&&(m=!1),d.node.previousSibling===h.node&&(p=!1),d.node.contains(h.node,!1)&&(g=!1),(h.node===d.node||h.node.contains(d.node))&&(p=!1,g=!1,m=!1);const b=d.$el.getBoundingClientRect(),$=n.value.getBoundingClientRect();let y;const w=p?g?.25:m?.45:1:-1,C=m?g?.75:p?.55:0:1;let x=-9999;const S=u.clientY-b.top;S<b.height*w?y="before":S>b.height*C?y="after":g?y="inner":y="none";const T=d.$el.querySelector(".el-tree-node__expand-icon").getBoundingClientRect(),I=s.value;y==="before"?x=T.top-$.top:y==="after"&&(x=T.bottom-$.top),I.style.top=`${x}px`,I.style.left=`${T.right-$.left}px`,y==="inner"?Zo(d.$el,"is-drop-inner"):wo(d.$el,"is-drop-inner"),r.value.showDropIndicator=y==="before"||y==="after",r.value.allowDrop=r.value.showDropIndicator||v,r.value.dropType=y,t.emit("node-drag-over",h.node,d.node,u)},treeNodeDragEnd:u=>{const{draggingNode:c,dropType:d,dropNode:f}=r.value;if(u.preventDefault(),u.dataTransfer.dropEffect="move",c&&f){const h={data:c.node.data};d!=="none"&&c.node.remove(),d==="before"?f.node.parent.insertBefore(h,f.node):d==="after"?f.node.parent.insertAfter(h,f.node):d==="inner"&&f.node.insertChild(h),d!=="none"&&o.value.registerNode(h),wo(f.$el,"is-drop-inner"),t.emit("node-drag-end",c.node,f.node,d,u),d!=="none"&&t.emit("node-drop",c.node,f.node,d,u)}c&&!f&&t.emit("node-drag-end",c.node,null,d,u),r.value.showDropIndicator=!1,r.value.draggingNode=null,r.value.dropNode=null,r.value.allowDrop=!0}}),{dragState:r}}const KSe=$e({name:"ElTreeNode",components:{ElCollapseTransition:Lb,ElCheckbox:Si,NodeContent:jSe,ElIcon:Pt,Loading:Oa},props:{node:{type:Ou,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const{broadcastExpanded:n}=oB(e),s=Qe("RootTree"),o=V(!1),r=V(!1),i=V(null),a=V(null),l=V(null),u=Qe(rB),c=Wt();jt("NodeInstance",c),e.node.expanded&&(o.value=!0,r.value=!0);const d=s.props.children||"children";Le(()=>{const S=e.node.data[d];return S&&[...S]},()=>{e.node.updateChildren()}),Le(()=>e.node.indeterminate,S=>{p(e.node.checked,S)}),Le(()=>e.node.checked,S=>{p(S,e.node.indeterminate)}),Le(()=>e.node.expanded,S=>{ft(()=>o.value=S),S&&(r.value=!0)});const f=S=>$k(s.props.nodeKey,S.data),h=S=>{const T=e.props.class;if(!T)return{};let I;if(Vt(T)){const{data:_}=S;I=T(_,S)}else I=T;return Qt(I)?{[I]:!0}:I},p=(S,T)=>{(i.value!==S||a.value!==T)&&s.ctx.emit("check-change",e.node.data,S,T),i.value=S,a.value=T},g=S=>{const T=s.store.value;T.setCurrentNode(e.node),s.ctx.emit("current-change",T.currentNode?T.currentNode.data:null,T.currentNode),s.currentNode.value=e.node,s.props.expandOnClickNode&&v(),s.props.checkOnClickNode&&!e.node.disabled&&b(null,{target:{checked:!e.node.checked}}),s.ctx.emit("node-click",e.node.data,e.node,c,S)},m=S=>{s.instance.vnode.props.onNodeContextmenu&&(S.stopPropagation(),S.preventDefault()),s.ctx.emit("node-contextmenu",S,e.node.data,e.node,c)},v=()=>{e.node.isLeaf||(o.value?(s.ctx.emit("node-collapse",e.node.data,e.node,c),e.node.collapse()):(e.node.expand(),t.emit("node-expand",e.node.data,e.node,c)))},b=(S,T)=>{e.node.setChecked(T.target.checked,!s.props.checkStrictly),ft(()=>{const I=s.store.value;s.ctx.emit("check",e.node.data,{checkedNodes:I.getCheckedNodes(),checkedKeys:I.getCheckedKeys(),halfCheckedNodes:I.getHalfCheckedNodes(),halfCheckedKeys:I.getHalfCheckedKeys()})})};return{node$:l,tree:s,expanded:o,childNodeRendered:r,oldChecked:i,oldIndeterminate:a,getNodeKey:f,getNodeClass:h,handleSelectChange:p,handleClick:g,handleContextMenu:m,handleExpandIconClick:v,handleCheckChange:b,handleChildNodeExpand:(S,T,I)=>{n(T),s.ctx.emit("node-expand",S,T,I)},handleDragStart:S=>{!s.props.draggable||u.treeNodeDragStart({event:S,treeNode:e})},handleDragOver:S=>{S.preventDefault(),!!s.props.draggable&&u.treeNodeDragOver({event:S,treeNode:{$el:l.value,node:e.node}})},handleDrop:S=>{S.preventDefault()},handleDragEnd:S=>{!s.props.draggable||u.treeNodeDragEnd(S)},CaretRight:TP}}}),qSe=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],YSe=["aria-expanded"];function XSe(e,t,n,s,o,r){const i=de("el-icon"),a=de("el-checkbox"),l=de("loading"),u=de("node-content"),c=de("el-tree-node"),d=de("el-collapse-transition");return Ct((R(),H("div",{ref:"node$",class:Q(["el-tree-node",dt({"is-expanded":e.expanded,"is-current":e.node.isCurrent,"is-hidden":!e.node.visible,"is-focusable":!e.node.disabled,"is-checked":!e.node.disabled&&e.node.checked},e.getNodeClass(e.node))]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:t[1]||(t[1]=gt((...f)=>e.handleClick&&e.handleClick(...f),["stop"])),onContextmenu:t[2]||(t[2]=(...f)=>e.handleContextMenu&&e.handleContextMenu(...f)),onDragstart:t[3]||(t[3]=gt((...f)=>e.handleDragStart&&e.handleDragStart(...f),["stop"])),onDragover:t[4]||(t[4]=gt((...f)=>e.handleDragOver&&e.handleDragOver(...f),["stop"])),onDragend:t[5]||(t[5]=gt((...f)=>e.handleDragEnd&&e.handleDragEnd(...f),["stop"])),onDrop:t[6]||(t[6]=gt((...f)=>e.handleDrop&&e.handleDrop(...f),["stop"]))},[K("div",{class:"el-tree-node__content",style:rt({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(R(),ke(i,{key:0,class:Q([{"is-leaf":e.node.isLeaf,expanded:!e.node.isLeaf&&e.expanded},"el-tree-node__expand-icon"]),onClick:gt(e.handleExpandIconClick,["stop"])},{default:ce(()=>[(R(),ke(on(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):me("v-if",!0),e.showCheckbox?(R(),ke(a,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:t[0]||(t[0]=gt(()=>{},["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):me("v-if",!0),e.node.loading?(R(),ke(i,{key:2,class:"el-tree-node__loading-icon is-loading"},{default:ce(()=>[pe(l)]),_:1})):me("v-if",!0),pe(u,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],4),pe(d,null,{default:ce(()=>[!e.renderAfterExpand||e.childNodeRendered?Ct((R(),H("div",{key:0,class:"el-tree-node__children",role:"group","aria-expanded":e.expanded},[(R(!0),H(ct,null,en(e.node.childNodes,f=>(R(),ke(c,{key:e.getNodeKey(f),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:f,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],8,YSe)),[[sn,e.expanded]]):me("v-if",!0)]),_:1})],42,qSe)),[[sn,e.node.visible]])}var ZSe=Ge(KSe,[["render",XSe]]);function JSe({el$:e},t){const n=bo([]),s=bo([]);Ft(()=>{r(),wn(e.value,"keydown",o)}),us(()=>{qn(e.value,"keydown",o)}),Ni(()=>{n.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),s.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))}),Le(s,i=>{i.forEach(a=>{a.setAttribute("tabindex","-1")})});const o=i=>{const a=i.target;if(a.className.indexOf("el-tree-node")===-1)return;const l=i.code;n.value=Array.from(e.value.querySelectorAll(".is-focusable[role=treeitem]"));const u=n.value.indexOf(a);let c;if([tt.up,tt.down].indexOf(l)>-1){if(i.preventDefault(),l===tt.up){c=u===-1?0:u!==0?u-1:n.value.length-1;const f=c;for(;!t.value.getNode(n.value[c].dataset.key).canFocus;){if(c--,c===f){c=-1;break}c<0&&(c=n.value.length-1)}}else{c=u===-1?0:u<n.value.length-1?u+1:0;const f=c;for(;!t.value.getNode(n.value[c].dataset.key).canFocus;){if(c++,c===f){c=-1;break}c>=n.value.length&&(c=0)}}c!==-1&&n.value[c].focus()}[tt.left,tt.right].indexOf(l)>-1&&(i.preventDefault(),a.click());const d=a.querySelector('[type="checkbox"]');[tt.enter,tt.space].indexOf(l)>-1&&d&&(i.preventDefault(),d.click())},r=()=>{var i;n.value=Array.from(e.value.querySelectorAll(".is-focusable[role=treeitem]")),s.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const a=e.value.querySelectorAll(".is-checked[role=treeitem]");if(a.length){a[0].setAttribute("tabindex","0");return}(i=n.value[0])==null||i.setAttribute("tabindex","0")}}const QSe=$e({name:"ElTree",components:{ElTreeNode:ZSe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:[String,Object]},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:n}=Tn(),s=V(new USe({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));s.value.initialize();const o=V(s.value.root),r=V(null),i=V(null),a=V(null),{broadcastExpanded:l}=oB(e),{dragState:u}=GSe({props:e,ctx:t,el$:i,dropIndicator$:a,store:s});JSe({el$:i},s);const c=O(()=>{const{childNodes:M}=o.value;return!M||M.length===0||M.every(({visible:B})=>!B)});Le(()=>e.defaultCheckedKeys,M=>{s.value.setDefaultCheckedKey(M)}),Le(()=>e.defaultExpandedKeys,M=>{s.value.defaultExpandedKeys=M,s.value.setDefaultExpandedKeys(M)}),Le(()=>e.data,M=>{s.value.setData(M)},{deep:!0}),Le(()=>e.checkStrictly,M=>{s.value.checkStrictly=M});const d=M=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");s.value.filter(M)},f=M=>$k(e.nodeKey,M.data),h=M=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const B=s.value.getNode(M);if(!B)return[];const j=[B.data];let X=B.parent;for(;X&&X!==o.value;)j.push(X.data),X=X.parent;return j.reverse()},p=(M,B)=>s.value.getCheckedNodes(M,B),g=M=>s.value.getCheckedKeys(M),m=()=>{const M=s.value.getCurrentNode();return M?M.data:null},v=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const M=m();return M?M[e.nodeKey]:null},b=(M,B)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");s.value.setCheckedNodes(M,B)},$=(M,B)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");s.value.setCheckedKeys(M,B)},y=(M,B,j)=>{s.value.setChecked(M,B,j)},w=()=>s.value.getHalfCheckedNodes(),C=()=>s.value.getHalfCheckedKeys(),x=(M,B=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");s.value.setUserCurrentNode(M,B)},S=(M,B=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");s.value.setCurrentNodeKey(M,B)},T=M=>s.value.getNode(M),I=M=>{s.value.remove(M)},_=(M,B)=>{s.value.append(M,B)},N=(M,B)=>{s.value.insertBefore(M,B)},D=(M,B)=>{s.value.insertAfter(M,B)},F=(M,B,j)=>{l(B),t.emit("node-expand",M,B,j)},P=(M,B)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");s.value.updateChildren(M,B)};return jt("RootTree",{ctx:t,props:e,store:s,root:o,currentNode:r,instance:Wt()}),{store:s,root:o,currentNode:r,dragState:u,el$:i,dropIndicator$:a,isEmpty:c,filter:d,getNodeKey:f,getNodePath:h,getCheckedNodes:p,getCheckedKeys:g,getCurrentNode:m,getCurrentKey:v,setCheckedNodes:b,setCheckedKeys:$,setChecked:y,getHalfCheckedNodes:w,getHalfCheckedKeys:C,setCurrentNode:x,setCurrentKey:S,t:n,getNode:T,remove:I,append:_,insertBefore:N,insertAfter:D,handleNodeExpand:F,updateKeyChildren:P}}}),eIe={key:0,class:"el-tree__empty-block"},tIe={class:"el-tree__empty-text"},nIe={ref:"dropIndicator$",class:"el-tree__drop-indicator"};function sIe(e,t,n,s,o,r){var i;const a=de("el-tree-node");return R(),H("div",{ref:"el$",class:Q(["el-tree",{"el-tree--highlight-current":e.highlightCurrent,"is-dragging":!!e.dragState.draggingNode,"is-drop-not-allow":!e.dragState.allowDrop,"is-drop-inner":e.dragState.dropType==="inner"}]),role:"tree"},[(R(!0),H(ct,null,en(e.root.childNodes,l=>(R(),ke(a,{key:e.getNodeKey(l),node:l,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(R(),H("div",eIe,[K("span",tIe,ze((i=e.emptyText)!=null?i:e.t("el.tree.emptyText")),1)])):me("v-if",!0),Ct(K("div",nIe,null,512),[[sn,e.dragState.showDropIndicator]])],2)}var e0=Ge(QSe,[["render",sIe]]);e0.install=e=>{e.component(e0.name,e0)};const oIe=e0,rIe=oIe,Ck=Symbol(),iIe={key:-1,level:-1,data:{}};var lh=(e=>(e.KEY="id",e.LABEL="label",e.CHILDREN="children",e.DISABLED="disabled",e))(lh||{}),LC=(e=>(e.ADD="add",e.DELETE="delete",e))(LC||{});const aIe=yt({data:{type:et(Array),default:()=>As([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:et(Object),default:()=>As({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:et(Array),default:()=>As([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:et(Array),default:()=>As([])},indent:{type:Number,default:16},icon:{type:String},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:et([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:et(Function)},perfMode:{type:Boolean,default:!0}}),lIe=yt({node:{type:et(Object),default:()=>As(iIe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1}}),uIe=yt({node:{type:et(Object),required:!0}}),iB="node-click",aB="node-expand",lB="node-collapse",uB="current-change",cB="check",dB="check-change",fB="node-contextmenu",cIe={[iB]:(e,t,n)=>e&&t&&n,[aB]:(e,t)=>e&&t,[lB]:(e,t)=>e&&t,[uB]:(e,t)=>e&&t,[cB]:(e,t)=>e&&t,[dB]:(e,t)=>e&&typeof t=="boolean",[fB]:(e,t,n)=>e&&t&&n},dIe={click:(e,t)=>!!(e&&t),toggle:e=>!!e,check:(e,t)=>e&&typeof t=="boolean"};function fIe(e,t){const n=V(new Set),s=V(new Set),{emit:o}=Wt();Le(()=>t.value,()=>ft(()=>{b(e.defaultCheckedKeys)}),{immediate:!0});const r=()=>{if(!t.value||!e.showCheckbox||e.checkStrictly)return;const{levelTreeNodeMap:$,maxLevel:y}=t.value,w=n.value,C=new Set;for(let x=y-1;x>=1;--x){const S=$.get(x);!S||S.forEach(T=>{const I=T.children;if(I){let _=!0,N=!1;for(let D=0;D<I.length;++D){const P=I[D].key;if(w.has(P))N=!0;else if(C.has(P)){_=!1,N=!0;break}else _=!1}_?w.add(T.key):N?(C.add(T.key),w.delete(T.key)):(w.delete(T.key),C.delete(T.key))}})}s.value=C},i=$=>n.value.has($.key),a=$=>s.value.has($.key),l=($,y,w=!0)=>{const C=n.value,x=(S,T)=>{C[T?LC.ADD:LC.DELETE](S.key);const I=S.children;!e.checkStrictly&&I&&I.forEach(_=>{_.disabled||x(_,T)})};x($,y),r(),w&&u($,y)},u=($,y)=>{const{checkedNodes:w,checkedKeys:C}=p(),{halfCheckedNodes:x,halfCheckedKeys:S}=g();o(cB,$.data,{checkedKeys:C,checkedNodes:w,halfCheckedKeys:S,halfCheckedNodes:x}),o(dB,$.data,y)};function c($=!1){return p($).checkedKeys}function d($=!1){return p($).checkedNodes}function f(){return g().halfCheckedKeys}function h(){return g().halfCheckedNodes}function p($=!1){const y=[],w=[];if((t==null?void 0:t.value)&&e.showCheckbox){const{treeNodeMap:C}=t.value;n.value.forEach(x=>{const S=C.get(x);S&&(!$||$&&S.isLeaf)&&(w.push(x),y.push(S.data))})}return{checkedKeys:w,checkedNodes:y}}function g(){const $=[],y=[];if((t==null?void 0:t.value)&&e.showCheckbox){const{treeNodeMap:w}=t.value;s.value.forEach(C=>{const x=w.get(C);x&&(y.push(C),$.push(x.data))})}return{halfCheckedNodes:$,halfCheckedKeys:y}}function m($){n.value.clear(),b($)}function v($,y){if((t==null?void 0:t.value)&&e.showCheckbox){const w=t.value.treeNodeMap.get($);w&&l(w,y,!1)}}function b($){if(t==null?void 0:t.value){const{treeNodeMap:y}=t.value;if(e.showCheckbox&&y&&$)for(let w=0;w<$.length;++w){const C=$[w],x=y.get(C);x&&!i(x)&&l(x,!0,!1)}}}return{updateCheckedKeys:r,toggleCheckbox:l,isChecked:i,isIndeterminate:a,getCheckedKeys:c,getCheckedNodes:d,getHalfCheckedKeys:f,getHalfCheckedNodes:h,setChecked:v,setCheckedKeys:m}}function hIe(e,t){const n=V(new Set([])),s=V(new Set([])),o=O(()=>Vt(e.filterMethod));function r(a){var l;if(!o.value)return;const u=new Set,c=s.value,d=n.value,f=[],h=((l=t.value)==null?void 0:l.treeNodes)||[],p=e.filterMethod;d.clear();function g(m){m.forEach(v=>{f.push(v),(p==null?void 0:p(a,v.data))?f.forEach($=>{u.add($.key)}):v.isLeaf&&d.add(v.key);const b=v.children;if(b&&g(b),!v.isLeaf){if(!u.has(v.key))d.add(v.key);else if(b){let $=!0;for(let y=0;y<b.length;++y){const w=b[y];if(!d.has(w.key)){$=!1;break}}$?c.add(v.key):c.delete(v.key)}}f.pop()})}return g(h),u}function i(a){return s.value.has(a.key)}return{hiddenExpandIconKeySet:s,hiddenNodeKeySet:n,doFilter:r,isForceHiddenExpandIcon:i}}function pIe(e,t){const n=V(new Set(e.defaultExpandedKeys)),s=V(),o=bo();Le(()=>e.currentNodeKey,ee=>{s.value=ee},{immediate:!0}),Le(()=>e.data,ee=>{Z(ee)},{immediate:!0});const{isIndeterminate:r,isChecked:i,toggleCheckbox:a,getCheckedKeys:l,getCheckedNodes:u,getHalfCheckedKeys:c,getHalfCheckedNodes:d,setChecked:f,setCheckedKeys:h}=fIe(e,o),{doFilter:p,hiddenNodeKeySet:g,isForceHiddenExpandIcon:m}=hIe(e,o),v=O(()=>{var ee;return((ee=e.props)==null?void 0:ee.value)||lh.KEY}),b=O(()=>{var ee;return((ee=e.props)==null?void 0:ee.children)||lh.CHILDREN}),$=O(()=>{var ee;return((ee=e.props)==null?void 0:ee.disabled)||lh.DISABLED}),y=O(()=>{var ee;return((ee=e.props)==null?void 0:ee.label)||lh.LABEL}),w=O(()=>{const ee=n.value,te=g.value,fe=[],De=o.value&&o.value.treeNodes||[];function We(){const He=[];for(let Ve=De.length-1;Ve>=0;--Ve)He.push(De[Ve]);for(;He.length;){const Ve=He.pop();if(!!Ve&&(te.has(Ve.key)||fe.push(Ve),ee.has(Ve.key))){const Y=Ve.children;if(Y){const ne=Y.length;for(let q=ne-1;q>=0;--q)He.push(Y[q])}}}}return We(),fe}),C=O(()=>w.value.length>0);function x(ee){const te=new Map,fe=new Map;let De=1;function We(Ve,Y=1,ne=void 0){var q;const le=[];for(let xe=0;xe<Ve.length;++xe){const oe=Ve[xe],Me=I(oe),Re={level:Y,key:Me,data:oe};Re.label=N(oe),Re.parent=ne;const ve=T(oe);Re.disabled=_(oe),Re.isLeaf=!ve||ve.length===0,ve&&ve.length&&(Re.children=We(ve,Y+1,Re)),le.push(Re),te.set(Me,Re),fe.has(Y)||fe.set(Y,[]),(q=fe.get(Y))==null||q.push(Re)}return Y>De&&(De=Y),le}const He=We(ee);return{treeNodeMap:te,levelTreeNodeMap:fe,maxLevel:De,treeNodes:He}}function S(ee){const te=p(ee);te&&(n.value=te)}function T(ee){return ee[b.value]}function I(ee){return ee?ee[v.value]:""}function _(ee){return ee[$.value]}function N(ee){return ee[y.value]}function D(ee){n.value.has(ee.key)?j(ee):B(ee)}function F(ee,te){t(iB,ee.data,ee,te),P(ee),e.expandOnClickNode&&D(ee),e.showCheckbox&&e.checkOnClickNode&&!ee.disabled&&a(ee,!i(ee),!0)}function P(ee){be(ee)||(s.value=ee.key,t(uB,ee.data,ee))}function M(ee,te){a(ee,te)}function B(ee){const te=n.value;if((o==null?void 0:o.value)&&e.accordion){const{treeNodeMap:fe}=o.value;te.forEach(De=>{const We=fe.get(De);We&&We.level===We.level&&te.delete(De)})}te.add(ee.key),t(aB,ee.data,ee)}function j(ee){n.value.delete(ee.key),t(lB,ee.data,ee)}function X(ee){return n.value.has(ee.key)}function ae(ee){return!!ee.disabled}function be(ee){const te=s.value;return!!te&&te===ee.key}function ie(){var ee,te;if(!!s.value)return(te=(ee=o==null?void 0:o.value)==null?void 0:ee.treeNodeMap.get(s.value))==null?void 0:te.data}function ye(){return s.value}function ue(ee){s.value=ee}function Z(ee){ft(()=>o.value=x(ee))}return{tree:o,flattenTree:w,isNotEmpty:C,getKey:I,getChildren:T,toggleExpand:D,toggleCheckbox:a,isExpanded:X,isChecked:i,isIndeterminate:r,isDisabled:ae,isCurrent:be,isForceHiddenExpandIcon:m,handleNodeClick:F,handleNodeCheck:M,getCurrentNode:ie,getCurrentKey:ye,setCurrentKey:ue,getCheckedKeys:l,getCheckedNodes:u,getHalfCheckedKeys:c,getHalfCheckedNodes:d,setChecked:f,setCheckedKeys:h,filter:S,setData:Z}}var gIe=$e({name:"ElTreeNodeContent",props:uIe,setup(e){const t=Qe(Ck);return()=>{const n=e.node,{data:s}=n;return(t==null?void 0:t.ctx.slots.default)?t.ctx.slots.default({node:n,data:s}):Ke("span",{class:"el-tree-node__label"},[n==null?void 0:n.label])}}});const mIe="caret-right",vIe=$e({name:"ElTreeNode",components:{ElIcon:Pt,CaretRight:TP,ElCheckbox:Si,ElNodeContent:gIe},props:lIe,emits:dIe,setup(e,{emit:t}){const n=Qe(Ck),s=O(()=>{var u;return(u=n==null?void 0:n.props.indent)!=null?u:16}),o=O(()=>{var u;return(u=n==null?void 0:n.props.icon)!=null?u:mIe});return{indent:s,icon:o,handleClick:u=>{t("click",e.node,u)},handleExpandIconClick:()=>{t("toggle",e.node)},handleCheckChange:u=>{t("check",e.node,u)},handleContextMenu:u=>{var c,d,f,h;((f=(d=(c=n==null?void 0:n.instance)==null?void 0:c.vnode)==null?void 0:d.props)==null?void 0:f.onNodeContextmenu)&&(u.stopPropagation(),u.preventDefault()),n==null||n.ctx.emit(fB,u,(h=e.node)==null?void 0:h.data,e.node)}}}}),bIe=["aria-expanded","aria-disabled","aria-checked","data-key"];function yIe(e,t,n,s,o,r){var i,a,l;const u=de("el-icon"),c=de("el-checkbox"),d=de("el-node-content");return R(),H("div",{ref:"node$",class:Q(["el-tree-node",{"is-expanded":e.expanded,"is-current":e.current,"is-focusable":!e.disabled,"is-checked":!e.disabled&&e.checked}]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.disabled,"aria-checked":e.checked,"data-key":(i=e.node)==null?void 0:i.key,onClick:t[1]||(t[1]=gt((...f)=>e.handleClick&&e.handleClick(...f),["stop"])),onContextmenu:t[2]||(t[2]=(...f)=>e.handleContextMenu&&e.handleContextMenu(...f))},[K("div",{class:"el-tree-node__content",style:rt({paddingLeft:`${(e.node.level-1)*e.indent}px`})},[e.icon?(R(),ke(u,{key:0,class:Q([{"is-leaf":(a=e.node)==null?void 0:a.isLeaf,"is-hidden":e.hiddenExpandIcon,expanded:!((l=e.node)==null?void 0:l.isLeaf)&&e.expanded},"el-tree-node__expand-icon"]),onClick:gt(e.handleExpandIconClick,["stop"])},{default:ce(()=>[(R(),ke(on(e.icon)))]),_:1},8,["class","onClick"])):me("v-if",!0),e.showCheckbox?(R(),ke(c,{key:1,"model-value":e.checked,indeterminate:e.indeterminate,disabled:e.disabled,onChange:e.handleCheckChange,onClick:t[0]||(t[0]=gt(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled","onChange"])):me("v-if",!0),pe(d,{node:e.node},null,8,["node"])],4)],42,bIe)}var wIe=Ge(vIe,[["render",yIe]]);const $Ie=$e({name:"ElTreeV2",components:{ElTreeNode:wIe,FixedSizeList:z4},props:aIe,emits:cIe,setup(e,t){jt(Ck,{ctx:t,props:e,instance:Wt()});const{t:n}=Tn(),{flattenTree:s,isNotEmpty:o,toggleExpand:r,isExpanded:i,isIndeterminate:a,isChecked:l,isDisabled:u,isCurrent:c,isForceHiddenExpandIcon:d,toggleCheckbox:f,handleNodeClick:h,handleNodeCheck:p,getCurrentNode:g,getCurrentKey:m,setCurrentKey:v,getCheckedKeys:b,getCheckedNodes:$,getHalfCheckedKeys:y,getHalfCheckedNodes:w,setChecked:C,setCheckedKeys:x,filter:S,setData:T}=pIe(e,t.emit);return t.expose({getCurrentNode:g,getCurrentKey:m,setCurrentKey:v,getCheckedKeys:b,getCheckedNodes:$,getHalfCheckedKeys:y,getHalfCheckedNodes:w,setChecked:C,setCheckedKeys:x,filter:S,setData:T}),{t:n,flattenTree:s,itemSize:26,isNotEmpty:o,toggleExpand:r,toggleCheckbox:f,isExpanded:i,isIndeterminate:a,isChecked:l,isDisabled:u,isCurrent:c,isForceHiddenExpandIcon:d,handleNodeClick:h,handleNodeCheck:p}}}),CIe={key:1,class:"el-tree__empty-block"},xIe={class:"el-tree__empty-text"};function kIe(e,t,n,s,o,r){var i;const a=de("el-tree-node"),l=de("fixed-size-list");return R(),H("div",{class:Q(["el-tree",{"el-tree--highlight-current":e.highlightCurrent}]),role:"tree"},[e.isNotEmpty?(R(),ke(l,{key:0,"class-name":"el-tree-virtual-list",data:e.flattenTree,total:e.flattenTree.length,height:e.height,"item-size":e.itemSize,"perf-mode":e.perfMode},{default:ce(({data:u,index:c,style:d})=>[(R(),ke(a,{key:u[c].key,style:rt(d),node:u[c],expanded:e.isExpanded(u[c]),"show-checkbox":e.showCheckbox,checked:e.isChecked(u[c]),indeterminate:e.isIndeterminate(u[c]),disabled:e.isDisabled(u[c]),current:e.isCurrent(u[c]),"hidden-expand-icon":e.isForceHiddenExpandIcon(u[c]),onClick:e.handleNodeClick,onToggle:e.toggleExpand,onCheck:e.handleNodeCheck},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["data","total","height","item-size","perf-mode"])):(R(),H("div",CIe,[K("span",xIe,ze((i=e.emptyText)!=null?i:e.t("el.tree.emptyText")),1)]))],2)}var SIe=Ge($Ie,[["render",kIe]]);const IIe=Gt(SIe);function pD(e,t,n){let s;n.response?s=`${n.response.error||n.response}`:n.responseText?s=`${n.responseText}`:s=`fail to ${t.method} ${e} ${n.status}`;const o=new Error(s);return o.status=n.status,o.method=t.method,o.url=e,o}function EIe(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}function hB(e){if(typeof XMLHttpRequest=="undefined")return;const t=new XMLHttpRequest,n=e.action;t.upload&&(t.upload.onprogress=function(i){i.total>0&&(i.percent=i.loaded/i.total*100),e.onProgress(i)});const s=new FormData;e.data&&Object.keys(e.data).forEach(r=>{s.append(r,e.data[r])}),s.append(e.filename,e.file,e.file.name),t.onerror=function(){e.onError(pD(n,e,t))},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(pD(n,e,t));e.onSuccess(EIe(t))},t.open(e.method,n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const o=e.headers||{};for(const r in o)Kt(o,r)&&o[r]!==null&&t.setRequestHeader(r,o[r]);return o instanceof Headers&&o.forEach((r,i)=>{t.setRequestHeader(i,r)}),t.send(s),t}const TIe=$e({name:"ElUploadList",components:{ElProgress:_4,ElIcon:Pt,Document:_re,Delete:xre,Close:ki,ZoomIn:RP,Check:Sd,CircleCheck:w0},props:{files:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},handlePreview:{type:Function,default:()=>un},listType:{type:String,default:"text"}},emits:["remove"],setup(e,{emit:t}){const{t:n}=Tn(),s=i=>{e.handlePreview(i)},o=i=>{i.target.focus()},r=i=>{t("remove",i)};return{focusing:V(!1),handleClick:s,handleRemove:r,onFileClicked:o,t:n}}}),_Ie=["onKeydown"],NIe=["src"],AIe=["onClick"],DIe={class:"el-upload-list__item-status-label"},RIe={key:2,class:"el-icon--close-tip"},MIe={key:4,class:"el-upload-list__item-actions"},OIe=["onClick"],FIe=["onClick"];function PIe(e,t,n,s,o,r){const i=de("document"),a=de("el-icon"),l=de("circle-check"),u=de("check"),c=de("close"),d=de("el-progress"),f=de("zoom-in"),h=de("delete");return R(),ke(nY,{tag:"ul",class:Q(["el-upload-list","el-upload-list--"+e.listType,{"is-disabled":e.disabled}]),name:"el-list"},{default:ce(()=>[(R(!0),H(ct,null,en(e.files,p=>(R(),H("li",{key:p.uid||p,class:Q(["el-upload-list__item","is-"+p.status,e.focusing?"focusing":""]),tabindex:"0",onKeydown:qt(g=>!e.disabled&&e.handleRemove(p),["delete"]),onFocus:t[0]||(t[0]=g=>e.focusing=!0),onBlur:t[1]||(t[1]=g=>e.focusing=!1),onClick:t[2]||(t[2]=(...g)=>e.onFileClicked&&e.onFileClicked(...g))},[Pe(e.$slots,"default",{file:p},()=>[p.status!=="uploading"&&["picture-card","picture"].includes(e.listType)?(R(),H("img",{key:0,class:"el-upload-list__item-thumbnail",src:p.url,alt:""},null,8,NIe)):me("v-if",!0),K("a",{class:"el-upload-list__item-name",onClick:g=>e.handleClick(p)},[pe(a,{class:"el-icon--document"},{default:ce(()=>[pe(i)]),_:1}),Zt(" "+ze(p.name),1)],8,AIe),K("label",DIe,[e.listType==="text"?(R(),ke(a,{key:0,class:"el-icon--upload-success el-icon--circle-check"},{default:ce(()=>[pe(l)]),_:1})):["picture-card","picture"].includes(e.listType)?(R(),ke(a,{key:1,class:"el-icon--upload-success el-icon--check"},{default:ce(()=>[pe(u)]),_:1})):me("v-if",!0)]),e.disabled?me("v-if",!0):(R(),ke(a,{key:1,class:"el-icon--close",onClick:g=>e.handleRemove(p)},{default:ce(()=>[pe(c)]),_:2},1032,["onClick"])),me(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),me(" This is a bug which needs to be fixed "),me(" TODO: Fix the incorrect navigation interaction "),e.disabled?me("v-if",!0):(R(),H("i",RIe,ze(e.t("el.upload.deleteTip")),1)),p.status==="uploading"?(R(),ke(d,{key:3,type:e.listType==="picture-card"?"circle":"line","stroke-width":e.listType==="picture-card"?6:2,percentage:+p.percentage,style:{"margin-top":"0.5rem"}},null,8,["type","stroke-width","percentage"])):me("v-if",!0),e.listType==="picture-card"?(R(),H("span",MIe,[K("span",{class:"el-upload-list__item-preview",onClick:g=>e.handlePreview(p)},[pe(a,{class:"el-icon--zoom-in"},{default:ce(()=>[pe(f)]),_:1})],8,OIe),e.disabled?me("v-if",!0):(R(),H("span",{key:0,class:"el-upload-list__item-delete",onClick:g=>e.handleRemove(p)},[pe(a,{class:"el-icon--delete"},{default:ce(()=>[pe(h)]),_:1})],8,FIe))])):me("v-if",!0)])],42,_Ie))),128))]),_:3},8,["class"])}var gD=Ge(TIe,[["render",PIe]]);const LIe=$e({name:"ElUploadDrag",props:{disabled:{type:Boolean,default:!1}},emits:["file"],setup(e,{emit:t}){const n=Qe("uploader",{}),s=V(!1);function o(i){var a;if(e.disabled||!n)return;const l=((a=n.props)==null?void 0:a.accept)||n.accept;if(s.value=!1,!l){t("file",i.dataTransfer.files);return}t("file",Array.from(i.dataTransfer.files).filter(u=>{const{type:c,name:d}=u,f=d.indexOf(".")>-1?`.${d.split(".").pop()}`:"",h=c.replace(/\/.*$/,"");return l.split(",").map(p=>p.trim()).filter(p=>p).some(p=>p.startsWith(".")?f===p:/\/\*$/.test(p)?h===p.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(p)?c===p:!1)}))}function r(){e.disabled||(s.value=!0)}return{dragover:s,onDrop:o,onDragover:r}}});function BIe(e,t,n,s,o,r){return R(),H("div",{class:Q({"el-upload-dragger":!0,"is-dragover":e.dragover}),onDrop:t[0]||(t[0]=gt((...i)=>e.onDrop&&e.onDrop(...i),["prevent"])),onDragover:t[1]||(t[1]=gt((...i)=>e.onDragover&&e.onDragover(...i),["prevent"])),onDragleave:t[2]||(t[2]=gt(i=>e.dragover=!1,["prevent"]))},[Pe(e.$slots,"default")],34)}var zIe=Ge(LIe,[["render",BIe]]);const VIe=$e({components:{UploadDragger:zIe},props:{type:{type:String,default:""},action:{type:String,required:!0},name:{type:String,default:"file"},data:{type:Object,default:()=>null},headers:{type:Object,default:()=>null},method:{type:String,default:"post"},withCredentials:{type:Boolean,default:!1},multiple:{type:Boolean,default:null},accept:{type:String,default:""},onStart:{type:Function,default:un},onProgress:{type:Function,default:un},onSuccess:{type:Function,default:un},onError:{type:Function,default:un},beforeUpload:{type:Function,default:un},drag:{type:Boolean,default:!1},onPreview:{type:Function,default:un},onRemove:{type:Function,default:un},fileList:{type:Array,default:()=>[]},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:{type:Function,default:()=>hB},disabled:Boolean,limit:{type:Number,default:null},onExceed:{type:Function,default:un}},setup(e){const t=V({}),n=V(!1),s=V(null);function o(d){if(e.limit&&e.fileList.length+d.length>e.limit){e.onExceed(d,e.fileList);return}let f=Array.from(d);e.multiple||(f=f.slice(0,1)),f.length!==0&&f.forEach(h=>{e.onStart(h),e.autoUpload&&r(h)})}function r(d){if(s.value.value=null,!e.beforeUpload)return a(d);const f=e.beforeUpload(d);f instanceof Promise?f.then(h=>{const p=Object.prototype.toString.call(h);if(p==="[object File]"||p==="[object Blob]"){p==="[object Blob]"&&(h=new File([h],d.name,{type:d.type}));for(const g in d)Kt(d,g)&&(h[g]=d[g]);a(h)}else a(d)}).catch(()=>{e.onRemove(null,d)}):f!==!1?a(d):e.onRemove(null,d)}function i(d){const f=t.value;if(d){let h=d;d.uid&&(h=d.uid),f[h]&&f[h].abort()}else Object.keys(f).forEach(h=>{f[h]&&f[h].abort(),delete f[h]})}function a(d){const{uid:f}=d,h={headers:e.headers,withCredentials:e.withCredentials,file:d,data:e.data,method:e.method,filename:e.name,action:e.action,onProgress:g=>{e.onProgress(g,d)},onSuccess:g=>{e.onSuccess(g,d),delete t.value[f]},onError:g=>{e.onError(g,d),delete t.value[f]}},p=e.httpRequest(h);t.value[f]=p,p instanceof Promise&&p.then(h.onSuccess,h.onError)}function l(d){const f=d.target.files;!f||o(f)}function u(){e.disabled||(s.value.value=null,s.value.click())}function c(){u()}return{reqs:t,mouseover:n,inputRef:s,abort:i,post:a,handleChange:l,handleClick:u,handleKeydown:c,upload:r,uploadFiles:o}}}),WIe=["name","multiple","accept"];function HIe(e,t,n,s,o,r){const i=de("upload-dragger");return R(),H("div",{class:Q(["el-upload",`el-upload--${e.listType}`]),tabindex:"0",onClick:t[1]||(t[1]=(...a)=>e.handleClick&&e.handleClick(...a)),onKeydown:t[2]||(t[2]=qt(gt((...a)=>e.handleKeydown&&e.handleKeydown(...a),["self"]),["enter","space"]))},[e.drag?(R(),ke(i,{key:0,disabled:e.disabled,onFile:e.uploadFiles},{default:ce(()=>[Pe(e.$slots,"default")]),_:3},8,["disabled","onFile"])):Pe(e.$slots,"default",{key:1}),K("input",{ref:"inputRef",class:"el-upload__input",type:"file",name:e.name,multiple:e.multiple,accept:e.accept,onChange:t[0]||(t[0]=(...a)=>e.handleChange&&e.handleChange(...a))},null,40,WIe)],34)}var mD=Ge(VIe,[["render",HIe]]);function UIe(e,t){for(var n=-1,s=e==null?0:e.length;++n<s&&t(e[n],n,e)!==!1;);return e}var jIe=UIe,vD=kL;function GIe(e,t,n){t=="__proto__"&&vD?vD(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var pB=GIe,KIe=pB,qIe=_2,YIe=Object.prototype,XIe=YIe.hasOwnProperty;function ZIe(e,t,n){var s=e[t];(!(XIe.call(e,t)&&qIe(s,n))||n===void 0&&!(t in e))&&KIe(e,t,n)}var gB=ZIe,JIe=gB,QIe=pB;function eEe(e,t,n,s){var o=!n;n||(n={});for(var r=-1,i=t.length;++r<i;){var a=t[r],l=s?s(n[a],e[a],a,n,e):void 0;l===void 0&&(l=e[a]),o?QIe(n,a,l):JIe(n,a,l)}return n}var Vb=eEe,tEe=Vb,nEe=L2;function sEe(e,t){return e&&tEe(t,nEe(t),e)}var oEe=sEe;function rEe(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var iEe=rEe,aEe=El,lEe=F2,uEe=iEe,cEe=Object.prototype,dEe=cEe.hasOwnProperty;function fEe(e){if(!aEe(e))return uEe(e);var t=lEe(e),n=[];for(var s in e)s=="constructor"&&(t||!dEe.call(e,s))||n.push(s);return n}var hEe=fEe,pEe=nP,gEe=hEe,mEe=P2;function vEe(e){return mEe(e)?pEe(e,!0):gEe(e)}var xk=vEe,bEe=Vb,yEe=xk;function wEe(e,t){return e&&bEe(t,yEe(t),e)}var $Ee=wEe,BC={exports:{}};(function(e,t){var n=Di,s=t&&!t.nodeType&&t,o=s&&!0&&e&&!e.nodeType&&e,r=o&&o.exports===s,i=r?n.Buffer:void 0,a=i?i.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var d=u.length,f=a?a(d):new u.constructor(d);return u.copy(f),f}e.exports=l})(BC,BC.exports);function CEe(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}var xEe=CEe,kEe=Vb,SEe=M2;function IEe(e,t){return kEe(e,SEe(e),t)}var EEe=IEe,TEe=sP,_Ee=TEe(Object.getPrototypeOf,Object),mB=_Ee,NEe=R2,AEe=mB,DEe=M2,REe=ZF,MEe=Object.getOwnPropertySymbols,OEe=MEe?function(e){for(var t=[];e;)NEe(t,DEe(e)),e=AEe(e);return t}:REe,vB=OEe,FEe=Vb,PEe=vB;function LEe(e,t){return FEe(e,PEe(e),t)}var BEe=LEe,zEe=XF,VEe=vB,WEe=xk;function HEe(e){return zEe(e,WEe,VEe)}var UEe=HEe,jEe=Object.prototype,GEe=jEe.hasOwnProperty;function KEe(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&GEe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var qEe=KEe,bD=YF;function YEe(e){var t=new e.constructor(e.byteLength);return new bD(t).set(new bD(e)),t}var kk=YEe,XEe=kk;function ZEe(e,t){var n=t?XEe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var JEe=ZEe,QEe=/\w*$/;function eTe(e){var t=new e.constructor(e.source,QEe.exec(e));return t.lastIndex=e.lastIndex,t}var tTe=eTe,yD=sf,wD=yD?yD.prototype:void 0,$D=wD?wD.valueOf:void 0;function nTe(e){return $D?Object($D.call(e)):{}}var sTe=nTe,oTe=kk;function rTe(e,t){var n=t?oTe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var iTe=rTe,aTe=kk,lTe=JEe,uTe=tTe,cTe=sTe,dTe=iTe,fTe="[object Boolean]",hTe="[object Date]",pTe="[object Map]",gTe="[object Number]",mTe="[object RegExp]",vTe="[object Set]",bTe="[object String]",yTe="[object Symbol]",wTe="[object ArrayBuffer]",$Te="[object DataView]",CTe="[object Float32Array]",xTe="[object Float64Array]",kTe="[object Int8Array]",STe="[object Int16Array]",ITe="[object Int32Array]",ETe="[object Uint8Array]",TTe="[object Uint8ClampedArray]",_Te="[object Uint16Array]",NTe="[object Uint32Array]";function ATe(e,t,n){var s=e.constructor;switch(t){case wTe:return aTe(e);case fTe:case hTe:return new s(+e);case $Te:return lTe(e,n);case CTe:case xTe:case kTe:case STe:case ITe:case ETe:case TTe:case _Te:case NTe:return dTe(e,n);case pTe:return new s;case gTe:case bTe:return new s(e);case mTe:return uTe(e);case vTe:return new s;case yTe:return cTe(e)}}var DTe=ATe,RTe=El,CD=Object.create,MTe=function(){function e(){}return function(t){if(!RTe(t))return{};if(CD)return CD(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),OTe=MTe,FTe=OTe,PTe=mB,LTe=F2;function BTe(e){return typeof e.constructor=="function"&&!LTe(e)?FTe(PTe(e)):{}}var zTe=BTe,VTe=Eb,WTe=_l,HTe="[object Map]";function UTe(e){return WTe(e)&&VTe(e)==HTe}var jTe=UTe,GTe=jTe,KTe=O2,xD=Zh.exports,kD=xD&&xD.isMap,qTe=kD?KTe(kD):GTe,YTe=qTe,XTe=Eb,ZTe=_l,JTe="[object Set]";function QTe(e){return ZTe(e)&&XTe(e)==JTe}var e_e=QTe,t_e=e_e,n_e=O2,SD=Zh.exports,ID=SD&&SD.isSet,s_e=ID?n_e(ID):t_e,o_e=s_e,r_e=jF,i_e=jIe,a_e=gB,l_e=oEe,u_e=$Ee,c_e=BC.exports,d_e=xEe,f_e=EEe,h_e=BEe,p_e=oP,g_e=UEe,m_e=Eb,v_e=qEe,b_e=DTe,y_e=zTe,w_e=Tl,$_e=Xh.exports,C_e=YTe,x_e=El,k_e=o_e,S_e=L2,I_e=xk,E_e=1,T_e=2,__e=4,bB="[object Arguments]",N_e="[object Array]",A_e="[object Boolean]",D_e="[object Date]",R_e="[object Error]",yB="[object Function]",M_e="[object GeneratorFunction]",O_e="[object Map]",F_e="[object Number]",wB="[object Object]",P_e="[object RegExp]",L_e="[object Set]",B_e="[object String]",z_e="[object Symbol]",V_e="[object WeakMap]",W_e="[object ArrayBuffer]",H_e="[object DataView]",U_e="[object Float32Array]",j_e="[object Float64Array]",G_e="[object Int8Array]",K_e="[object Int16Array]",q_e="[object Int32Array]",Y_e="[object Uint8Array]",X_e="[object Uint8ClampedArray]",Z_e="[object Uint16Array]",J_e="[object Uint32Array]",os={};os[bB]=os[N_e]=os[W_e]=os[H_e]=os[A_e]=os[D_e]=os[U_e]=os[j_e]=os[G_e]=os[K_e]=os[q_e]=os[O_e]=os[F_e]=os[wB]=os[P_e]=os[L_e]=os[B_e]=os[z_e]=os[Y_e]=os[X_e]=os[Z_e]=os[J_e]=!0;os[R_e]=os[yB]=os[V_e]=!1;function t0(e,t,n,s,o,r){var i,a=t&E_e,l=t&T_e,u=t&__e;if(n&&(i=o?n(e,s,o,r):n(e)),i!==void 0)return i;if(!x_e(e))return e;var c=w_e(e);if(c){if(i=v_e(e),!a)return d_e(e,i)}else{var d=m_e(e),f=d==yB||d==M_e;if($_e(e))return c_e(e,a);if(d==wB||d==bB||f&&!o){if(i=l||f?{}:y_e(e),!a)return l?h_e(e,u_e(i,e)):f_e(e,l_e(i,e))}else{if(!os[d])return o?e:{};i=b_e(e,d,a)}}r||(r=new r_e);var h=r.get(e);if(h)return h;r.set(e,i),k_e(e)?e.forEach(function(m){i.add(t0(m,t,n,m,e,r))}):C_e(e)&&e.forEach(function(m,v){i.set(v,t0(m,t,n,v,e,r))});var p=u?l?g_e:p_e:l?I_e:S_e,g=c?void 0:p(e);return i_e(g||e,function(m,v){g&&(v=m,m=e[v]),a_e(i,v,t0(m,t,n,v,e,r))}),i}var Q_e=t0,eNe=Q_e,tNe=1,nNe=4;function sNe(e){return eNe(e,tNe|nNe)}var oNe=sNe;function qm(e,t){return t.find(n=>n.uid===e.uid)}function ED(e){return Date.now()+e}var rNe=e=>{const t=V([]),n=V(null);let s=1;function o(f){n.value.abort(f)}function r(f=["ready","uploading","success","fail"]){t.value=t.value.filter(h=>!f.includes(h.status))}function i(f,h){const p=qm(h,t.value);p.status="fail",t.value.splice(t.value.indexOf(p),1),e.onError(f,p,t.value),e.onChange(p,t.value)}function a(f,h){const p=qm(h,t.value);e.onProgress(f,p,t.value),p.status="uploading",p.percentage=f.percent||0}function l(f,h){const p=qm(h,t.value);p&&(p.status="success",p.response=f,e.onSuccess(f,p,t.value),e.onChange(p,t.value))}function u(f){const h=ED(s++);f.uid=h;const p={name:f.name,percentage:0,status:"ready",size:f.size,raw:f,uid:h};if(e.listType==="picture-card"||e.listType==="picture")try{p.url=URL.createObjectURL(f)}catch(g){console.error("[Element Error][Upload]",g),e.onError(g,p,t.value)}t.value.push(p),e.onChange(p,t.value)}function c(f,h){h&&(f=qm(h,t.value));const p=()=>{f.url&&f.url.indexOf("blob:")===0&&URL.revokeObjectURL(f.url)},g=()=>{o(f);const m=t.value;m.splice(m.indexOf(f),1),e.onRemove(f,m),p()};if(!e.beforeRemove)g();else if(typeof e.beforeRemove=="function"){const m=e.beforeRemove(f,t.value);m instanceof Promise?m.then(()=>{g()}).catch(un):m!==!1&&g()}}function d(){t.value.filter(f=>f.status==="ready").forEach(f=>{n.value.upload(f.raw)})}return Le(()=>e.listType,f=>{(f==="picture-card"||f==="picture")&&(t.value=t.value.map(h=>{if(!h.url&&h.raw)try{h.url=URL.createObjectURL(h.raw)}catch(p){e.onError(p,h,t.value)}return h}))}),Le(()=>e.fileList,f=>{t.value=f.map(h=>{const p=oNe(h);return Ut(dt({},p),{uid:h.uid||ED(s++),status:h.status||"success"})})},{immediate:!0,deep:!0}),{abort:o,clearFiles:r,handleError:i,handleProgress:a,handleStart:u,handleSuccess:l,handleRemove:c,submit:d,uploadFiles:t,uploadRef:n}};const n0=$e({name:"ElUpload",components:{Upload:mD,UploadList:gD},props:{action:{type:String,required:!0},headers:{type:Object,default:()=>({})},method:{type:String,default:"post"},data:{type:Object,default:()=>({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},beforeUpload:{type:Function,default:un},beforeRemove:{type:Function,default:un},onRemove:{type:Function,default:un},onChange:{type:Function,default:un},onPreview:{type:Function,default:un},onSuccess:{type:Function,default:un},onProgress:{type:Function,default:un},onError:{type:Function,default:un},fileList:{type:Array,default:()=>[]},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:{type:Function,default:hB},disabled:Boolean,limit:{type:Number,default:null},onExceed:{type:Function,default:()=>un}},setup(e){const t=Qe(ar,{}),n=O(()=>e.disabled||t.disabled),{abort:s,clearFiles:o,handleError:r,handleProgress:i,handleStart:a,handleSuccess:l,handleRemove:u,submit:c,uploadRef:d,uploadFiles:f}=rNe(e);return jt("uploader",Wt()),us(()=>{f.value.forEach(h=>{h.url&&h.url.indexOf("blob:")===0&&URL.revokeObjectURL(h.url)})}),{abort:s,dragOver:V(!1),draging:V(!1),handleError:r,handleProgress:i,handleRemove:u,handleStart:a,handleSuccess:l,uploadDisabled:n,uploadFiles:f,uploadRef:d,submit:c,clearFiles:o}},render(){var e,t;let n;this.showFileList?n=Ke(gD,{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,onRemove:this.handleRemove,handlePreview:this.onPreview},this.$slots.file?{default:i=>this.$slots.file({file:i.file})}:null):n=null;const s={type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,method:this.method,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest,ref:"uploadRef"},o=this.$slots.trigger||this.$slots.default,r=Ke(mD,s,{default:()=>o==null?void 0:o()});return Ke("div",[this.listType==="picture-card"?n:null,this.$slots.trigger?[r,this.$slots.default()]:r,(t=(e=this.$slots).tip)==null?void 0:t.call(e),this.listType!=="picture-card"?n:null])}});n0.install=e=>{e.component(n0.name,n0)};const iNe=n0,aNe=iNe;var lNe=[Ese,Oae,Oce,Wce,Yce,aL,ude,cde,sa,dL,jhe,Xhe,lpe,upe,_ge,hge,Oge,Si,Tpe,DL,Lge,Jge,Qge,jge,Nme,Rme,jme,Gme,Kme,qme,Yme,E0e,P0e,L0e,X0e,tbe,dbe,fye,hye,pye,Jye,L1e,B1e,Pt,twe,y4,ti,w4,hwe,Mwe,Owe,Fwe,Gwe,J$e,iCe,gCe,iL,_4,LL,Gpe,jpe,OCe,zCe,HCe,Fa,zb,E4,E$e,Bxe,Qxe,e2e,b2e,S2e,O2e,F2e,q2e,Yke,Xke,cSe,dSe,Pb,_he,vSe,CSe,xSe,lr,WSe,rIe,IIe,aNe];const pi="ElInfiniteScroll",uNe=50,cNe=200,dNe=0,fNe={delay:{type:Number,default:cNe},distance:{type:Number,default:dNe},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Sk=(e,t)=>Object.entries(fNe).reduce((n,[s,o])=>{var r,i;const{type:a,default:l}=o,u=e.getAttribute(`infinite-scroll-${s}`);let c=(i=(r=t[u])!=null?r:u)!=null?i:l;return c=c==="false"?!1:c,c=a(c),n[s]=Number.isNaN(c)?l:c,n},{}),$B=e=>{const{observer:t}=e[pi];t&&(t.disconnect(),delete e[pi].observer)},hNe=(e,t)=>{const{container:n,containerEl:s,instance:o,observer:r,lastScrollTop:i}=e[pi],{disabled:a,distance:l}=Sk(e,o),{clientHeight:u,scrollHeight:c,scrollTop:d}=s,f=d-i;if(e[pi].lastScrollTop=d,r||a||f<0)return;let h=!1;if(n===e)h=c-(u+d)<=l;else{const{clientTop:p,scrollHeight:g}=e,m=Jne(e,s);h=d+u>=m+p+g-l}h&&t.call(o)};function Jw(e,t){const{containerEl:n,instance:s}=e[pi],{disabled:o}=Sk(e,s);o||n.clientHeight===0||(n.scrollHeight<=n.clientHeight?t.call(s):$B(e))}const pNe={async mounted(e,t){const{instance:n,value:s}=t;Vt(s)||So(pi,"'v-infinite-scroll' binding value must be a function"),await ft();const{delay:o,immediate:r}=Sk(e,n),i=z2(e,!0),a=i===window?document.documentElement:i,l=C0(hNe.bind(null,e,s),o);if(!!i){if(e[pi]={instance:n,container:i,containerEl:a,delay:o,cb:s,onScroll:l,lastScrollTop:a.scrollTop},r){const u=new MutationObserver(C0(Jw.bind(null,e,s),uNe));e[pi].observer=u,u.observe(e,{childList:!0,subtree:!0}),Jw(e,s)}i.addEventListener("scroll",l)}},unmounted(e){const{container:t,onScroll:n}=e[pi];t==null||t.removeEventListener("scroll",n),$B(e)},async updated(e){e[pi]||await ft();const{containerEl:t,cb:n,observer:s}=e[pi];t.clientHeight&&s&&Jw(e,n)}},zC=pNe;zC.install=e=>{e.directive("InfiniteScroll",zC)};const gNe=zC;function mNe(e){let t;const n=V(!1),s=En(Ut(dt({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function o(d){s.text=d}function r(){const d=s.parent;if(!d.vLoadingAddClassList){let f=d.getAttribute("loading-number");f=Number.parseInt(f)-1,f?d.setAttribute("loading-number",f.toString()):(wo(d,"el-loading-parent--relative"),d.removeAttribute("loading-number")),wo(d,"el-loading-parent--hidden")}i()}function i(){var d,f;(f=(d=c.$el)==null?void 0:d.parentNode)==null||f.removeChild(c.$el)}function a(){var d;if(e.beforeClose&&!e.beforeClose())return;const f=s.parent;f.vLoadingAddClassList=void 0,n.value=!0,clearTimeout(t),t=window.setTimeout(()=>{n.value&&(n.value=!1,r())},400),s.visible=!1,(d=e.closed)==null||d.call(e)}function l(){!n.value||(n.value=!1,r())}const c=hY({name:"ElLoading",setup(){return()=>{const d=s.spinner||s.svg,f=Ke("svg",dt({class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"25 25 50 50"},d?{innerHTML:d}:{}),[Ke("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),h=s.text?Ke("p",{class:"el-loading-text"},[s.text]):void 0;return Ke(ks,{name:"el-loading-fade",onAfterLeave:l},{default:ce(()=>[Ct(pe("div",{style:{backgroundColor:s.background||""},class:["el-loading-mask",s.customClass,s.fullscreen?"is-fullscreen":""]},[Ke("div",{class:"el-loading-spinner"},[f,h])]),[[sn,s.visible]])])})}}}).mount(document.createElement("div"));return Ut(dt({},ko(s)),{setText:o,remvoeElLoadingChild:i,close:a,handleAfterLeave:l,vm:c,get $el(){return c.$el}})}let Wf;const VC=function(e={}){if(!Jt)return;const t=vNe(e);t.fullscreen&&Wf&&(Wf.remvoeElLoadingChild(),Wf.close());const n=mNe(Ut(dt({},t),{closed:()=>{var o;(o=t.closed)==null||o.call(t),t.fullscreen&&(Wf=void 0)}}));bNe(t,t.parent,n),TD(t,t.parent,n),t.parent.vLoadingAddClassList=()=>TD(t,t.parent,n);let s=t.parent.getAttribute("loading-number");return s?s=`${Number.parseInt(s)+1}`:s="1",t.parent.setAttribute("loading-number",s),t.parent.appendChild(n.$el),ft(()=>n.visible.value=t.visible),t.fullscreen&&(Wf=n),n},vNe=e=>{var t,n,s,o;let r;return Qt(e.target)?r=(t=document.querySelector(e.target))!=null?t:document.body:r=e.target||document.body,{parent:r===document.body||e.body?document.body:r,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:r===document.body&&((n=e.fullscreen)!=null?n:!0),lock:(s=e.lock)!=null?s:!1,customClass:e.customClass||"",visible:(o=e.visible)!=null?o:!0,target:r}},bNe=async(e,t,n)=>{const s={};if(e.fullscreen)n.originalPosition.value=Lr(document.body,"position"),n.originalOverflow.value=Lr(document.body,"overflow"),s.zIndex=ys.nextZIndex();else if(e.parent===document.body){n.originalPosition.value=Lr(document.body,"position"),await ft();for(const o of["top","left"]){const r=o==="top"?"scrollTop":"scrollLeft";s[o]=`${e.target.getBoundingClientRect()[o]+document.body[r]+document.documentElement[r]-parseInt(Lr(document.body,`margin-${o}`),10)}px`}for(const o of["height","width"])s[o]=`${e.target.getBoundingClientRect()[o]}px`}else n.originalPosition.value=Lr(t,"position");for(const[o,r]of Object.entries(s))n.$el.style[o]=r},TD=(e,t,n)=>{n.originalPosition.value!=="absolute"&&n.originalPosition.value!=="fixed"?Zo(t,"el-loading-parent--relative"):wo(t,"el-loading-parent--relative"),e.fullscreen&&e.lock?Zo(t,"el-loading-parent--hidden"):wo(t,"el-loading-parent--hidden")},WC=Symbol("ElLoading"),_D=(e,t)=>{var n,s,o,r;const i=t.instance,a=f=>cn(t.value)?t.value[f]:void 0,l=f=>{const h=Qt(f)&&(i==null?void 0:i[f])||f;return h&&V(h)},u=f=>l(a(f)||e.getAttribute(`element-loading-${Il(f)}`)),c=(n=a("fullscreen"))!=null?n:t.modifiers.fullscreen,d={text:u("text"),svg:u("svg"),svgViewBox:u("svgViewBox"),spinner:u("spinner"),background:u("background"),customClass:u("customClass"),fullscreen:c,target:(s=a("target"))!=null?s:c?void 0:e,body:(o=a("body"))!=null?o:t.modifiers.body,lock:(r=a("lock"))!=null?r:t.modifiers.lock};e[WC]={options:d,instance:VC(d)}},yNe=(e,t)=>{for(const n of Object.keys(t))vs(t[n])&&(t[n].value=e[n])},ND={mounted(e,t){t.value&&_D(e,t)},updated(e,t){const n=e[WC];t.oldValue!==t.value&&(t.value&&!t.oldValue?_D(e,t):t.value&&t.oldValue?cn(t.value)&&yNe(t.value,n.options):n==null||n.instance.close())},unmounted(e){var t;(t=e[WC])==null||t.instance.close()}},wNe={install(e){e.directive("loading",ND),e.config.globalProperties.$loading=VC},directive:ND,service:VC},CB=["success","info","warning","error"],$Ne=yt({customClass:{type:String,default:""},center:{type:Boolean,default:!1},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:3e3},icon:{type:et([String,Object]),default:""},id:{type:String,default:""},message:{type:et([String,Object]),default:""},onClose:{type:et(Function),required:!1},showClose:{type:Boolean,default:!1},type:{type:String,values:CB,default:"info"},offset:{type:Number,default:20},zIndex:{type:Number,default:0},grouping:{type:Boolean,default:!1},repeatNum:{type:Number,default:1}}),CNe={destroy:()=>!0},xNe=$e({name:"ElMessage",components:dt({ElBadge:aL,ElIcon:Pt},Rb),props:$Ne,emits:CNe,setup(e){const t=V(!1),n=V(e.type?e.type==="error"?"danger":e.type:"info");let s;const o=O(()=>{const d=e.type;return d&&Na[d]?`el-message-icon--${d}`:""}),r=O(()=>e.icon||Na[e.type]||""),i=O(()=>({top:`${e.offset}px`,zIndex:e.zIndex}));function a(){e.duration>0&&({stop:s}=kd(()=>{t.value&&u()},e.duration))}function l(){s==null||s()}function u(){t.value=!1}function c({code:d}){d===tt.esc?t.value&&u():a()}return Ft(()=>{a(),t.value=!0}),Le(()=>e.repeatNum,()=>{l(),a()}),Bs(document,"keydown",c),{typeClass:o,iconComponent:r,customStyle:i,visible:t,badgeType:n,close:u,clearTimer:l,startTimer:a}}}),kNe=["id"],SNe={key:0,class:"el-message__content"},INe=["innerHTML"];function ENe(e,t,n,s,o,r){const i=de("el-badge"),a=de("el-icon"),l=de("close");return R(),ke(ks,{name:"el-message-fade",onBeforeLeave:e.onClose,onAfterLeave:t[2]||(t[2]=u=>e.$emit("destroy"))},{default:ce(()=>[Ct(K("div",{id:e.id,class:Q(["el-message",e.type&&!e.icon?`el-message--${e.type}`:"",e.center?"is-center":"",e.showClose?"is-closable":"",e.customClass]),style:rt(e.customStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...u)=>e.clearTimer&&e.clearTimer(...u)),onMouseleave:t[1]||(t[1]=(...u)=>e.startTimer&&e.startTimer(...u))},[e.repeatNum>1?(R(),ke(i,{key:0,value:e.repeatNum,type:e.badgeType,class:"el-message__badge"},null,8,["value","type"])):me("v-if",!0),e.iconComponent?(R(),ke(a,{key:1,class:Q(["el-message__icon",e.typeClass])},{default:ce(()=>[(R(),ke(on(e.iconComponent)))]),_:1},8,["class"])):me("v-if",!0),Pe(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(R(),H(ct,{key:1},[me(" Caution here, message could've been compromised, never use user's input as message "),K("p",{class:"el-message__content",innerHTML:e.message},null,8,INe)],2112)):(R(),H("p",SNe,ze(e.message),1))]),e.showClose?(R(),ke(a,{key:2,class:"el-message__closeBtn",onClick:gt(e.close,["stop"])},{default:ce(()=>[pe(l)]),_:1},8,["onClick"])):me("v-if",!0)],46,kNe),[[sn,e.visible]])]),_:3},8,["onBeforeLeave"])}var TNe=Ge(xNe,[["render",ENe]]);const pr=[];let _Ne=1;const E0=function(e={}){if(!Jt)return{close:()=>{}};if(Sn(kC.max)&&pr.length>=kC.max)return{close:()=>{}};if(!Ds(e)&&typeof e=="object"&&e.grouping&&!Ds(e.message)&&pr.length){const u=pr.find(c=>{var d,f,h;return`${(f=(d=c.vm.props)==null?void 0:d.message)!=null?f:""}`==`${(h=e.message)!=null?h:""}`});if(u)return u.vm.component.props.repeatNum+=1,u.vm.component.props.type=e==null?void 0:e.type,{close:()=>l.component.proxy.visible=!1}}(typeof e=="string"||Ds(e))&&(e={message:e});let t=e.offset||20;pr.forEach(({vm:u})=>{var c;t+=(((c=u.el)==null?void 0:c.offsetHeight)||0)+16}),t+=16;const n=`message_${_Ne++}`,s=e.onClose,o=Ut(dt({zIndex:ys.nextZIndex(),offset:t},e),{id:n,onClose:()=>{NNe(n,s)}});let r=document.body;e.appendTo instanceof HTMLElement?r=e.appendTo:typeof e.appendTo=="string"&&(r=document.querySelector(e.appendTo)),r instanceof HTMLElement||(r=document.body);const i=document.createElement("div");i.className=`container_${n}`;const a=o.message,l=pe(TNe,o,Ds(o.message)?{default:()=>a}:null);return l.props.onDestroy=()=>{xd(null,i)},xd(l,i),pr.push({vm:l}),r.appendChild(i.firstElementChild),{close:()=>l.component.proxy.visible=!1}};CB.forEach(e=>{E0[e]=(t={})=>((typeof t=="string"||Ds(t))&&(t={message:t}),E0(Ut(dt({},t),{type:e})))});function NNe(e,t){const n=pr.findIndex(({vm:i})=>e===i.component.props.id);if(n===-1)return;const{vm:s}=pr[n];if(!s)return;t==null||t(s);const o=s.el.offsetHeight;pr.splice(n,1);const r=pr.length;if(!(r<1))for(let i=n;i<r;i++){const a=parseInt(pr[i].vm.el.style.top,10)-o-16;pr[i].vm.component.props.offset=a}}function ANe(){var e;for(let t=pr.length-1;t>=0;t--){const n=pr[t].vm.component;(e=n==null?void 0:n.proxy)==null||e.close()}}E0.closeAll=ANe;const DNe=EP(E0,"$message"),RNe=$e({name:"ElMessageBox",directives:{TrapFocus:U2},components:dt({ElButton:sa,ElInput:ti,ElOverlay:ik,ElIcon:Pt},Rb),inheritAttrs:!1,props:{buttonSize:{type:String,validator:sr},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{t:n}=Tn(),s=V(!1),o=En({beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:ys.nextZIndex()}),r=O(()=>{const $=o.type;return $&&Na[$]?`el-message-box-icon--${$}`:""}),i=Ss(O(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),a=O(()=>o.icon||Na[o.type]||""),l=O(()=>!!o.message),u=V(null),c=V(null),d=O(()=>o.confirmButtonClass);Le(()=>o.inputValue,async $=>{await ft(),e.boxType==="prompt"&&$!==null&&m()},{immediate:!0}),Le(()=>s.value,$=>{$&&((e.boxType==="alert"||e.boxType==="confirm")&&ft().then(()=>{var y,w,C;(C=(w=(y=c.value)==null?void 0:y.$el)==null?void 0:w.focus)==null||C.call(w)}),o.zIndex=ys.nextZIndex()),e.boxType==="prompt"&&($?ft().then(()=>{u.value&&u.value.$el&&v().focus()}):(o.editorErrorMessage="",o.validateError=!1))}),Ft(async()=>{await ft(),e.closeOnHashChange&&wn(window,"hashchange",f)}),us(()=>{e.closeOnHashChange&&qn(window,"hashchange",f)});function f(){!s.value||(s.value=!1,ft(()=>{o.action&&t("action",o.action)}))}const h=()=>{e.closeOnClickModal&&g(o.distinguishCancelAndClose?"close":"cancel")},p=()=>{if(o.inputType!=="textarea")return g("confirm")},g=$=>{var y;e.boxType==="prompt"&&$==="confirm"&&!m()||(o.action=$,o.beforeClose?(y=o.beforeClose)==null||y.call(o,$,o,f):f())},m=()=>{if(e.boxType==="prompt"){const $=o.inputPattern;if($&&!$.test(o.inputValue||""))return o.editorErrorMessage=o.inputErrorMessage||n("el.messagebox.error"),o.validateError=!0,!1;const y=o.inputValidator;if(typeof y=="function"){const w=y(o.inputValue);if(w===!1)return o.editorErrorMessage=o.inputErrorMessage||n("el.messagebox.error"),o.validateError=!0,!1;if(typeof w=="string")return o.editorErrorMessage=w,o.validateError=!0,!1}}return o.editorErrorMessage="",o.validateError=!1,!0},v=()=>{const $=u.value.$refs;return $.input||$.textarea},b=()=>{g("close")};return e.closeOnPressEscape?wP({handleClose:b},s):sse(s,"keydown",$=>$.code===tt.esc),e.lockScroll&&vP(s),CP(s),Ut(dt({},ko(o)),{visible:s,hasMessage:l,typeClass:r,btnSize:i,iconComponent:a,confirmButtonClasses:d,inputRef:u,confirmRef:c,doClose:f,handleClose:b,handleWrapperClick:h,handleInputEnter:p,handleAction:g,t:n})}}),MNe=["aria-label"],ONe={key:0,class:"el-message-box__header"},FNe={class:"el-message-box__title"},PNe={class:"el-message-box__content"},LNe={class:"el-message-box__container"},BNe={key:1,class:"el-message-box__message"},zNe={key:0},VNe=["innerHTML"],WNe={class:"el-message-box__input"},HNe={class:"el-message-box__btns"};function UNe(e,t,n,s,o,r){const i=de("el-icon"),a=de("close"),l=de("el-input"),u=de("el-button"),c=de("el-overlay"),d=Wo("trap-focus");return R(),ke(ks,{name:"fade-in-linear",onAfterLeave:t[7]||(t[7]=f=>e.$emit("vanish"))},{default:ce(()=>[Ct(pe(c,{"z-index":e.zIndex,"overlay-class":["is-message-box",e.modalClass],mask:e.modal,onClick:gt(e.handleWrapperClick,["self"])},{default:ce(()=>[Ct((R(),H("div",{ref:"root",role:"dialog","aria-label":e.title||"dialog","aria-modal":"true",class:Q(["el-message-box",e.customClass,{"el-message-box--center":e.center}]),style:rt(e.customStyle)},[e.title!==null&&e.title!==void 0?(R(),H("div",ONe,[K("div",FNe,[e.iconComponent&&e.center?(R(),ke(i,{key:0,class:Q(["el-message-box__status",e.typeClass])},{default:ce(()=>[(R(),ke(on(e.iconComponent)))]),_:1},8,["class"])):me("v-if",!0),K("span",null,ze(e.title),1)]),e.showClose?(R(),H("button",{key:0,type:"button",class:"el-message-box__headerbtn","aria-label":"Close",onClick:t[0]||(t[0]=f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=qt(gt(f=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[pe(i,{class:"el-message-box__close"},{default:ce(()=>[pe(a)]),_:1})],32)):me("v-if",!0)])):me("v-if",!0),K("div",PNe,[K("div",LNe,[e.iconComponent&&!e.center&&e.hasMessage?(R(),ke(i,{key:0,class:Q(["el-message-box__status",e.typeClass])},{default:ce(()=>[(R(),ke(on(e.iconComponent)))]),_:1},8,["class"])):me("v-if",!0),e.hasMessage?(R(),H("div",BNe,[Pe(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(R(),H("p",{key:1,innerHTML:e.message},null,8,VNe)):(R(),H("p",zNe,ze(e.message),1))])])):me("v-if",!0)]),Ct(K("div",WNe,[pe(l,{ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=f=>e.inputValue=f),type:e.inputType,placeholder:e.inputPlaceholder,class:Q({invalid:e.validateError}),onKeydown:qt(gt(e.handleInputEnter,["prevent"]),["enter"])},null,8,["modelValue","type","placeholder","class","onKeydown"]),K("div",{class:"el-message-box__errormsg",style:rt({visibility:e.editorErrorMessage?"visible":"hidden"})},ze(e.editorErrorMessage),5)],512),[[sn,e.showInput]])]),K("div",HNe,[e.showCancelButton?(R(),ke(u,{key:0,loading:e.cancelButtonLoading,class:Q([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=f=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=qt(gt(f=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:ce(()=>[Zt(ze(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):me("v-if",!0),Ct(pe(u,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:Q([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=f=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=qt(gt(f=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:ce(()=>[Zt(ze(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[sn,e.showConfirmButton]])])],14,MNe)),[[d]])]),_:3},8,["z-index","overlay-class","mask","onClick"]),[[sn,e.visible]])]),_:3})}var jNe=Ge(RNe,[["render",UNe]]);const up=new Map,GNe=(e,t)=>{const n=Ke(jNe,e);return xd(n,t),document.body.appendChild(t.firstElementChild),n.component},KNe=()=>document.createElement("div"),qNe=e=>{const t=KNe();e.onVanish=()=>{xd(null,t),up.delete(s)},e.onAction=o=>{const r=up.get(s);let i;e.showInput?i={value:s.inputValue,action:o}:i=o,e.callback?e.callback(i,n.proxy):o==="cancel"||o==="close"?e.distinguishCancelAndClose&&o!=="cancel"?r.reject("close"):r.reject("cancel"):r.resolve(i)};const n=GNe(e,t),s=n.proxy;for(const o in e)Kt(e,o)&&!Kt(s.$props,o)&&(s[o]=e[o]);return Le(()=>s.message,(o,r)=>{Ds(o)?n.slots.default=()=>[o]:Ds(r)&&!Ds(o)&&delete n.slots.default},{immediate:!0}),s.visible=!0,s};function bl(e){if(!Jt)return;let t;return Qt(e)||Ds(e)?e={message:e}:t=e.callback,new Promise((n,s)=>{const o=qNe(e);up.set(o,{options:e,callback:t,resolve:n,reject:s})})}bl.alert=(e,t,n)=>(typeof t=="object"?(n=t,t=""):t===void 0&&(t=""),bl(Object.assign({title:t,message:e,type:"",closeOnPressEscape:!1,closeOnClickModal:!1},n,{boxType:"alert"})));bl.confirm=(e,t,n)=>(typeof t=="object"?(n=t,t=""):t===void 0&&(t=""),bl(Object.assign({title:t,message:e,type:"",showCancelButton:!0},n,{boxType:"confirm"})));bl.prompt=(e,t,n)=>(typeof t=="object"?(n=t,t=""):t===void 0&&(t=""),bl(Object.assign({title:t,message:e,showCancelButton:!0,showInput:!0,type:""},n,{boxType:"prompt"})));bl.close=()=>{up.forEach((e,t)=>{t.doClose()}),up.clear()};const du=bl;du.install=e=>{e.config.globalProperties.$msgbox=du,e.config.globalProperties.$messageBox=du,e.config.globalProperties.$alert=du.alert,e.config.globalProperties.$confirm=du.confirm,e.config.globalProperties.$prompt=du.prompt};const YNe=du,xB=["success","info","warning","error"],XNe=yt({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:et([String,Object]),default:""},id:{type:String,default:""},message:{type:et([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:et(Function),default:()=>{}},onClose:{type:et(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...xB,""],default:""},zIndex:{type:Number,default:0}}),ZNe={destroy:()=>!0},JNe=$e({name:"ElNotification",components:dt({ElIcon:Pt},Rb),props:XNe,emits:ZNe,setup(e){const t=V(!1);let n;const s=O(()=>{const f=e.type;return f&&Na[e.type]?`el-notification--${f}`:""}),o=O(()=>Na[e.type]||e.icon||""),r=O(()=>e.position.endsWith("right")?"right":"left"),i=O(()=>e.position.startsWith("top")?"top":"bottom"),a=O(()=>({[i.value]:`${e.offset}px`,zIndex:e.zIndex}));function l(){e.duration>0&&({stop:n}=kd(()=>{t.value&&c()},e.duration))}function u(){n==null||n()}function c(){t.value=!1}function d({code:f}){f===tt.delete||f===tt.backspace?u():f===tt.esc?t.value&&c():l()}return Ft(()=>{l(),t.value=!0}),Bs(document,"keydown",d),{horizontalClass:r,typeClass:s,iconComponent:o,positionStyle:a,visible:t,close:c,clearTimer:u,startTimer:l}}}),QNe=["id"],eAe={class:"el-notification__group"},tAe=["textContent"],nAe={key:0},sAe=["innerHTML"];function oAe(e,t,n,s,o,r){const i=de("el-icon"),a=de("close");return R(),ke(ks,{name:"el-notification-fade",onBeforeLeave:e.onClose,onAfterLeave:t[3]||(t[3]=l=>e.$emit("destroy"))},{default:ce(()=>[Ct(K("div",{id:e.id,class:Q(["el-notification",e.customClass,e.horizontalClass]),style:rt(e.positionStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...l)=>e.clearTimer&&e.clearTimer(...l)),onMouseleave:t[1]||(t[1]=(...l)=>e.startTimer&&e.startTimer(...l)),onClick:t[2]||(t[2]=(...l)=>e.onClick&&e.onClick(...l))},[e.iconComponent?(R(),ke(i,{key:0,class:Q(["el-notification__icon",e.typeClass])},{default:ce(()=>[(R(),ke(on(e.iconComponent)))]),_:1},8,["class"])):me("v-if",!0),K("div",eAe,[K("h2",{class:"el-notification__title",textContent:ze(e.title)},null,8,tAe),Ct(K("div",{class:"el-notification__content",style:rt(e.title?void 0:{margin:0})},[Pe(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(R(),H(ct,{key:1},[me(" Caution here, message could've been compromized, nerver use user's input as message "),me(" eslint-disable-next-line "),K("p",{innerHTML:e.message},null,8,sAe)],2112)):(R(),H("p",nAe,ze(e.message),1))])],4),[[sn,e.message]]),e.showClose?(R(),ke(i,{key:0,class:"el-notification__closeBtn",onClick:gt(e.close,["stop"])},{default:ce(()=>[pe(a)]),_:1},8,["onClick"])):me("v-if",!0)])],46,QNe),[[sn,e.visible]])]),_:3},8,["onBeforeLeave"])}var rAe=Ge(JNe,[["render",oAe]]);const T0={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},HC=16;let iAe=1;const _0=function(e={}){if(!Jt)return{close:()=>{}};(typeof e=="string"||Ds(e))&&(e={message:e});const t=e.position||"top-right";let n=e.offset||0;T0[t].forEach(({vm:u})=>{var c;n+=(((c=u.el)==null?void 0:c.offsetHeight)||0)+HC}),n+=HC;const s=`notification_${iAe++}`,o=e.onClose,r=Ut(dt({zIndex:ys.nextZIndex(),offset:n},e),{id:s,onClose:()=>{aAe(s,t,o)}});let i=document.body;e.appendTo instanceof HTMLElement?i=e.appendTo:typeof e.appendTo=="string"&&(i=document.querySelector(e.appendTo)),i instanceof HTMLElement||(i=document.body);const a=document.createElement("div"),l=pe(rAe,r,Ds(r.message)?{default:()=>r.message}:null);return l.props.onDestroy=()=>{xd(null,a)},xd(l,a),T0[t].push({vm:l}),i.appendChild(a.firstElementChild),{close:()=>{l.component.proxy.visible=!1}}};xB.forEach(e=>{_0[e]=(t={})=>((typeof t=="string"||Ds(t))&&(t={message:t}),_0(Ut(dt({},t),{type:e})))});function aAe(e,t,n){const s=T0[t],o=s.findIndex(({vm:u})=>{var c;return((c=u.component)==null?void 0:c.props.id)===e});if(o===-1)return;const{vm:r}=s[o];if(!r)return;n==null||n(r);const i=r.el.offsetHeight,a=t.split("-")[0];s.splice(o,1);const l=s.length;if(!(l<1))for(let u=o;u<l;u++){const{el:c,component:d}=s[u].vm,f=parseInt(c.style[a],10)-i-HC;d.props.offset=f}}function lAe(){for(const e of Object.values(T0))e.forEach(({vm:t})=>{t.component.proxy.visible=!1})}_0.closeAll=lAe;const uAe=EP(_0,"$notify");var cAe=[gNe,wNe,DNe,YNe,uAe,mCe],wct=$se([...lNe,...cAe]);/**
  * vue-class-component v8.0.0-rc.1
  * (c) 2015-present Evan You
  * @license MIT
  */function AD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DD(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function dAe(e,t,n){return t&&DD(e.prototype,t),n&&DD(e,n),e}function fAe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,s)}return n}function Qw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RD(Object(n),!0).forEach(function(s){fAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RD(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function hAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UC(e,t)}function N0(e){return N0=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},N0(e)}function UC(e,t){return UC=Object.setPrototypeOf||function(s,o){return s.__proto__=o,s},UC(e,t)}function pAe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function gAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mAe(e,t){return t&&(typeof t=="object"||typeof t=="function")?t:gAe(e)}function vAe(e){var t=pAe();return function(){var s=N0(e),o;if(t){var r=N0(this).constructor;o=Reflect.construct(s,arguments,r)}else o=s.apply(this,arguments);return mAe(this,o)}}function bAe(e){return yAe(e)||wAe(e)||$Ae(e)||CAe()}function yAe(e){if(Array.isArray(e))return jC(e)}function wAe(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function $Ae(e,t){if(!!e){if(typeof e=="string")return jC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jC(e,t)}}function jC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function CAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ym(e,t,n){Object.defineProperty(e,t,{get:n,enumerable:!1,configurable:!0})}function xAe(e,t,n){Object.defineProperty(e,t,{get:function(){return n[t].value},set:function(o){n[t].value=o},enumerable:!0,configurable:!0})}function kAe(e){var t=Object.getPrototypeOf(e.prototype);if(!!t)return t.constructor}function Xm(e,t){return e.hasOwnProperty(t)?e[t]:void 0}var kB=function(){function e(t,n){var s=this;AD(this,e),Ym(this,"$props",function(){return t}),Ym(this,"$attrs",function(){return n.attrs}),Ym(this,"$slots",function(){return n.slots}),Ym(this,"$emit",function(){return n.emit}),Object.keys(t).forEach(function(o){Object.defineProperty(s,o,{enumerable:!1,configurable:!0,writable:!0,value:t[o]})})}return dAe(e,null,[{key:"registerHooks",value:function(n){var s;(s=this.__h).push.apply(s,bAe(n))}},{key:"with",value:function(n){var s=new n,o={};Object.keys(s).forEach(function(i){var a=s[i];o[i]=a!=null?a:null});var r=function(i){hAe(l,i);var a=vAe(l);function l(){return AD(this,l),a.apply(this,arguments)}return l}(this);return r.__b={props:o},r}},{key:"__vccOpts",get:function(){if(this===SAe)return{};var n=this,s=Xm(n,"__c");if(s)return s;var o=Qw({},Xm(n,"__o"));n.__c=o;var r=kAe(n);r&&(o.extends=r.__vccOpts);var i=Xm(n,"__b");i&&(o.mixins=o.mixins||[],o.mixins.unshift(i)),o.methods=Qw({},o.methods),o.computed=Qw({},o.computed);var a=n.prototype;Object.getOwnPropertyNames(a).forEach(function(c){if(c!=="constructor"){if(n.__h.indexOf(c)>-1){o[c]=a[c];return}var d=Object.getOwnPropertyDescriptor(a,c);if(typeof d.value=="function"){o.methods[c]=d.value;return}if(d.get||d.set){o.computed[c]={get:d.get,set:d.set};return}}}),o.setup=function(c,d){var f,h=new n(c,d),p=Object.keys(h),g={},m=null;return p.forEach(function(v){h[v]===void 0||h[v]&&h[v].__s||(g[v]=V(h[v]),xAe(h,v,g))}),p.forEach(function(v){if(h[v]&&h[v].__s){var b=h[v].__s();b instanceof Promise?(m||(m=Promise.resolve(g)),m=m.then(function(){return b.then(function($){return g[v]=d0($),g})})):g[v]=d0(b)}}),(f=m)!==null&&f!==void 0?f:g};var l=Xm(n,"__d");l&&l.forEach(function(c){return c(o)});var u=["render","ssrRender","__file","__cssModules","__scopeId","__hmrId"];return u.forEach(function(c){n[c]&&(o[c]=n[c])}),o}}]),e}();kB.__h=["data","beforeCreate","created","beforeMount","mounted","beforeUnmount","unmounted","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];var SAe=kB;function $ct(e){return function(t){return t.__o=e,t}}function IAe(e){return function(t,n,s){var o=typeof t=="function"?t:t.constructor;o.__d||(o.__d=[]),typeof s!="number"&&(s=void 0),o.__d.push(function(r){return e(r,n,s)})}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EAe=1e-7,TAe=1e-4;class SB{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class Ik{refCount(t){return dr("refCount")}incRef(t){return dr("incRef")}timerAvailable(){return!0}time(t){return dr("time")}read(t){return dr("read")}readSync(t){return dr("readSync")}readToGPU(t,n){return dr("readToGPU")}numDataIds(){return dr("numDataIds")}disposeData(t,n){return dr("disposeData")}write(t,n,s){return dr("write")}move(t,n,s,o,r){return dr("move")}memory(){return dr("memory")}floatPrecision(){return dr("floatPrecision")}epsilon(){return this.floatPrecision()===32?EAe:TAe}dispose(){return dr("dispose")}}function dr(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ae(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,ed(e,t,n)}function ju(e,t,n){return Math.max(e,Math.min(t,n))}function IB(e){return e%2===0?e:e+1}function ed(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function NAe(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function J(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function ni(e,t,n=""){J(Pn(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function EB(e){J(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Md(e,t=[],n=!1){if(t==null&&(t=[]),Array.isArray(e)||Qi(e)&&!n)for(let s=0;s<e.length;++s)Md(e[s],t,n);else t.push(e);return t}function qe(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function Pn(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Od(e){return e%1===0}function GC(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function pd(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function MD(e,t=s=>0,n){return new Promise((s,o)=>{let r=0;const i=()=>{if(e()){s();return}r++;const a=t(r);if(n!=null&&r>=n){o();return}setTimeout(i,a)};i()})}function TB(e,t){let n=1,s=-1;for(let r=0;r<e.length;++r)if(e[r]>=0)n*=e[r];else if(e[r]===-1){if(s!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${s} and dim ${r}`);s=r}else if(e[r]<0)throw Error(`Shapes can not be < 0. Found ${e[r]} at dim ${r}`);if(s===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const o=e.slice();return o[s]=t/n,o}function fn(e,t){const n=t.length;return e=e==null?t.map((s,o)=>o):[].concat(e),J(e.every(s=>s>=-n&&s<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),J(e.every(s=>Od(s)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(s=>s<0?n+s:s)}function Ml(e,t){const n=[],s=[],o=t!=null&&Array.isArray(t)&&t.length===0,r=t==null||o?null:fn(t,e).sort();let i=0;for(let a=0;a<e.length;++a){if(r!=null){if(r[i]===a&&e[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${e[a]}' is not 1`);(r[i]==null||r[i]>a)&&e[a]===1&&(n.push(e[a]),s.push(a)),r[i]<=a&&i++}e[a]!==1&&(n.push(e[a]),s.push(a))}return{newShape:n,keptDims:s}}function co(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else throw new Error(`Unknown data type ${e}`);return n}function Vo(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function AAe(e,t){for(let n=0;n<e.length;n++){const s=e[n];if(isNaN(s)||!isFinite(s))throw Error(`A tensor of type ${t} being uploaded contains ${s}.`)}}function DAe(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function _B(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function Qi(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function KC(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function RAe(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function Up(e){return typeof e=="string"||e instanceof String}function MAe(e){return typeof e=="boolean"}function qC(e){return typeof e=="number"}function jp(e){return Array.isArray(e)?jp(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":qC(e)?"float32":Up(e)?"string":MAe(e)?"bool":"float32"}function YC(e){return!!(e&&e.constructor&&e.call&&e.apply)}function XC(e,t){for(let n=t;n<e;++n)if(e%n===0)return n;return e}function Ot(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let s=t-3;s>=0;--s)n[s]=n[s+1]*e[s+1];return n}function NB(e,t,n,s=!1){const o=new Array;if(t.length===1){const r=t[0]*(s?2:1);for(let i=0;i<r;i++)o[i]=n[e+i]}else{const r=t[0],i=t.slice(1),a=i.reduce((l,u)=>l*u)*(s?2:1);for(let l=0;l<r;l++)o[l]=NB(e+l*a,i,n,s)}return o}function $i(e,t,n=!1){if(e.length===0)return t[0];const s=e.reduce((o,r)=>o*r)*(n?2:1);if(s===0)return[];if(s!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return NB(0,e,t,n)}function AB(e,t){const n=Io(e,t);for(let s=0;s<n.length;s++)n[s]=1;return n}function Io(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function DB(e,t){const n=e.reduce((s,o)=>s*o,1);if(t==null||t==="float32")return $i(e,new Float32Array(n));if(t==="int32")return $i(e,new Int32Array(n));if(t==="bool")return $i(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function RB(e){e.forEach(t=>{J(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function Ki(e,t,n){if(t===0)return 0;if(t===1)return e[0];let s=e[e.length-1];for(let o=0;o<e.length-1;++o)s+=n[o]*e[o];return s}function Gp(e,t,n){if(t===0)return[];if(t===1)return[e];const s=new Array(t);for(let o=0;o<s.length-1;++o)s[o]=Math.floor(e/n[o]),e-=s[o]*n[o];return s[s.length-1]=e,s}function MB(e){return e&&e.then&&typeof e.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OD="tfjsflags";class OAe{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=FAe,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(Ye().getBool("IS_TEST")||Ye().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${n}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,s){if(this.flagRegistry[t]={evaluationFn:n,setHook:s},this.urlFlags[t]!=null){const o=this.urlFlags[t];Ye().getBool("IS_TEST")||Ye().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${o}.`),this.set(t,o)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const n=this.evaluateFlag(t);if(MB(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global=="undefined"||typeof this.global.location=="undefined"||typeof this.global.location.search=="undefined")return;const t=this.getQueryParams(this.global.location.search);OD in t&&t[OD].split(",").forEach(s=>{const[o,r]=s.split(":");this.urlFlags[o]=LAe(o,r)})}}function FAe(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...s)=>(PAe(t,s[0],s[1]),s.join("="))),t}function PAe(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function LAe(e,t){if(t=t.toLowerCase(),t==="true"||t==="false")return t==="true";if(`${+t}`===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}function Ye(){return OB}let OB=null;function BAe(e){OB=e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e$;function FB(){if(e$==null){let e;if(typeof window!="undefined")e=window;else if(typeof global!="undefined")e=global;else if(typeof process!="undefined")e=process;else if(typeof self!="undefined")e=self;else throw new Error("Could not find a global object");e$=e}return e$}function zAe(){const e=FB();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function Ek(e,t){const n=zAe();if(n.has(e))return n.get(e);{const s=t();return n.set(e,s),n.get(e)}}const Wb="Abs",Kp="Acos",qp="Acosh",ff="Add",Tk="AddN",_k="All",Nk="Any",Hb="ArgMax",Ub="ArgMin",Yp="Asin",Xp="Asinh",Zp="Atan",Jp="Atanh",Qp="Atan2",jb="AvgPool",Ak="AvgPoolGrad",Gb="AvgPool3D",Dk="AvgPool3DGrad",Kb="BatchMatMul",qb="BatchToSpaceND",Rk="Bincount",VAe="BroadcastTo",PB="BroadcastArgs",eg="Cast",tg="Ceil",ng="ClipByValue",Mk="Complex",Yb="ComplexAbs",Xb="Concat",Zb="Conv2D",Ok="Conv2DBackpropFilter",Jb="Conv2DBackpropInput",Qb="Conv3D",Fk="Conv3DBackpropFilterV2",Pk="Conv3DBackpropInputV2",sg="Cos",og="Cosh",ey="Cumsum",Lk="CropAndResize",LB="DenseBincount",Bk="DepthToSpace",ty="DepthwiseConv2dNative",zk="DepthwiseConv2dNativeBackpropFilter",Vk="DepthwiseConv2dNativeBackpropInput",BB="Diag",ny="Dilation2D",ZC="Dilation2DBackpropInput",JC="Dilation2DBackpropFilter",rg="RealDiv",zB="Einsum",ig="Elu",Wk="EluGrad",ag="Erf",sy="Equal",lg="Exp",oy="ExpandDims",ug="Expm1",Hk="FFT",Uk="Fill",jk="FlipLeftRight",cg="Floor",dg="FloorDiv",ry="FusedBatchNorm",iy="GatherV2",VB="GatherNd",ay="Greater",fg="GreaterEqual",hg="Identity",Gk="IFFT",Kk="Imag",pg="IsFinite",gg="IsInf",mg="IsNan",ly="LeakyRelu",uy="Less",cy="LessEqual",qk="LinSpace",vg="Log",bg="Log1p",dy="LogicalAnd",fy="LogicalNot",hy="LogicalOr",WAe="LogSoftmax",py="LRN",Yk="LRNGrad",gy="Max",yg="Maximum",my="MaxPool",Xk="MaxPoolGrad",vy="MaxPool3D",Zk="MaxPool3DGrad",WB="MaxPoolWithArgmax",by="Mean",yy="Min",wg="Minimum",wy="MirrorPad",$g="Mod",HB="Multinomial",Cg="Multiply",$y="Neg",Cy="NotEqual",Jk="NonMaxSuppressionV3",Qk="NonMaxSuppressionV4",eS="NonMaxSuppressionV5",xy="OnesLike",ky="OneHot",Sy="Pack",Iy="PadV2",xg="Pow",Ey="Prelu",tS="Prod",nS="Range",sS="Real",kg="Reciprocal",Sg="Relu",Ty="Reshape",_y="ResizeNearestNeighbor",oS="ResizeNearestNeighborGrad",Ny="ResizeBilinear",rS="ResizeBilinearGrad",Ig="Relu6",Ay="Reverse",Eg="Round",Tg="Rsqrt",UB="ScatterNd",Dy="Select",_g="Selu",Ry="Slice",Ng="Sin",Ag="Sinh",Dg="Sign",Rg="Sigmoid",Mg="Softplus",Og="Sqrt",My="Sum",Oy="SpaceToBatchND",Fy="SplitV",Py="Softmax",iS="SparseFillEmptyRows",aS="SparseReshape",lS="SparseSegmentMean",uS="SparseSegmentSum",jB="SparseToDense",Fg="SquaredDifference",cS="Square",dS="StridedSlice",fS="StringNGrams",hS="StringSplit",pS="StringToHashBucketFast",Pg="Sub",Lg="Tan",Bg="Tanh",zg="Tile",gS="TopK",mS="Transform",Ly="Transpose",vS="Unique",By="Unpack",zy="UnsortedSegmentSum",Vy="ZerosLike",Vg="Step",HAe="FromPixels",bS="RotateWithOffset",A0="_FusedMatMul",D0="FusedConv2D",GB="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vr(...e){Ye().getBool("IS_TEST")||Ye().getBool("PROD")||console.warn(...e)}function UAe(...e){Ye().getBool("IS_TEST")||Ye().getBool("PROD")||console.log(...e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R0=Ek("kernelRegistry",()=>new Map),QC=Ek("gradRegistry",()=>new Map);function FD(e,t){const n=qB(e,t);return R0.get(n)}function PD(e){return QC.get(e)}function LD(e){const t=R0.entries(),n=[];for(;;){const{done:s,value:o}=t.next();if(s)break;const[r,i]=o,[a]=r.split("_");a===e&&n.push(i)}return n}function KB(e){const{kernelName:t,backendName:n}=e,s=qB(t,n);R0.has(s)&&vr(`The kernel '${t}' for backend '${n}' is already registered`),R0.set(s,e)}function jAe(e){const{kernelName:t}=e;QC.has(t)&&Ye().getBool("DEBUG")&&vr(`Overriding the gradient for '${t}'`),QC.set(t,e)}function qB(e,t){return`${t}_${e}`}var ex=as,Vr=null;try{Vr=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function as(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}as.prototype.__isLong__;Object.defineProperty(as.prototype,"__isLong__",{value:!0});function ur(e){return(e&&e.__isLong__)===!0}as.isLong=ur;var BD={},zD={};function gc(e,t){var n,s,o;return t?(e>>>=0,(o=0<=e&&e<256)&&(s=zD[e],s)?s:(n=ls(e,(e|0)<0?-1:0,!0),o&&(zD[e]=n),n)):(e|=0,(o=-128<=e&&e<128)&&(s=BD[e],s)?s:(n=ls(e,e<0?-1:0,!1),o&&(BD[e]=n),n))}as.fromInt=gc;function Wr(e,t){if(isNaN(e))return t?Iu:Hr;if(t){if(e<0)return Iu;if(e>=YB)return JB}else{if(e<=-WD)return Jo;if(e+1>=WD)return ZB}return e<0?Wr(-e,t).neg():ls(e%Fd|0,e/Fd|0,t)}as.fromNumber=Wr;function ls(e,t,n){return new as(e,t,n)}as.fromBits=ls;var M0=Math.pow;function yS(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return Hr;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var s;if((s=e.indexOf("-"))>0)throw Error("interior hyphen");if(s===0)return yS(e.substring(1),t,n).neg();for(var o=Wr(M0(n,8)),r=Hr,i=0;i<e.length;i+=8){var a=Math.min(8,e.length-i),l=parseInt(e.substring(i,i+a),n);if(a<8){var u=Wr(M0(n,a));r=r.mul(u).add(Wr(l))}else r=r.mul(o),r=r.add(Wr(l))}return r.unsigned=t,r}as.fromString=yS;function Mi(e,t){return typeof e=="number"?Wr(e,t):typeof e=="string"?yS(e,t):ls(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}as.fromValue=Mi;var VD=1<<16,GAe=1<<24,Fd=VD*VD,YB=Fd*Fd,WD=YB/2,HD=gc(GAe),Hr=gc(0);as.ZERO=Hr;var Iu=gc(0,!0);as.UZERO=Iu;var ad=gc(1);as.ONE=ad;var XB=gc(1,!0);as.UONE=XB;var tx=gc(-1);as.NEG_ONE=tx;var ZB=ls(-1,2147483647,!1);as.MAX_VALUE=ZB;var JB=ls(-1,-1,!0);as.MAX_UNSIGNED_VALUE=JB;var Jo=ls(0,-2147483648,!1);as.MIN_VALUE=Jo;var pt=as.prototype;pt.toInt=function(){return this.unsigned?this.low>>>0:this.low};pt.toNumber=function(){return this.unsigned?(this.high>>>0)*Fd+(this.low>>>0):this.high*Fd+(this.low>>>0)};pt.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Jo)){var n=Wr(t),s=this.div(n),o=s.mul(n).sub(this);return s.toString(t)+o.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var r=Wr(M0(t,6),this.unsigned),i=this,a="";;){var l=i.div(r),u=i.sub(l.mul(r)).toInt()>>>0,c=u.toString(t);if(i=l,i.isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}};pt.getHighBits=function(){return this.high};pt.getHighBitsUnsigned=function(){return this.high>>>0};pt.getLowBits=function(){return this.low};pt.getLowBitsUnsigned=function(){return this.low>>>0};pt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Jo)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&(t&1<<n)==0;n--);return this.high!=0?n+33:n+1};pt.isZero=function(){return this.high===0&&this.low===0};pt.eqz=pt.isZero;pt.isNegative=function(){return!this.unsigned&&this.high<0};pt.isPositive=function(){return this.unsigned||this.high>=0};pt.isOdd=function(){return(this.low&1)===1};pt.isEven=function(){return(this.low&1)===0};pt.equals=function(t){return ur(t)||(t=Mi(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};pt.eq=pt.equals;pt.notEquals=function(t){return!this.eq(t)};pt.neq=pt.notEquals;pt.ne=pt.notEquals;pt.lessThan=function(t){return this.comp(t)<0};pt.lt=pt.lessThan;pt.lessThanOrEqual=function(t){return this.comp(t)<=0};pt.lte=pt.lessThanOrEqual;pt.le=pt.lessThanOrEqual;pt.greaterThan=function(t){return this.comp(t)>0};pt.gt=pt.greaterThan;pt.greaterThanOrEqual=function(t){return this.comp(t)>=0};pt.gte=pt.greaterThanOrEqual;pt.ge=pt.greaterThanOrEqual;pt.compare=function(t){if(ur(t)||(t=Mi(t)),this.eq(t))return 0;var n=this.isNegative(),s=t.isNegative();return n&&!s?-1:!n&&s?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};pt.comp=pt.compare;pt.negate=function(){return!this.unsigned&&this.eq(Jo)?Jo:this.not().add(ad)};pt.neg=pt.negate;pt.add=function(t){ur(t)||(t=Mi(t));var n=this.high>>>16,s=this.high&65535,o=this.low>>>16,r=this.low&65535,i=t.high>>>16,a=t.high&65535,l=t.low>>>16,u=t.low&65535,c=0,d=0,f=0,h=0;return h+=r+u,f+=h>>>16,h&=65535,f+=o+l,d+=f>>>16,f&=65535,d+=s+a,c+=d>>>16,d&=65535,c+=n+i,c&=65535,ls(f<<16|h,c<<16|d,this.unsigned)};pt.subtract=function(t){return ur(t)||(t=Mi(t)),this.add(t.neg())};pt.sub=pt.subtract;pt.multiply=function(t){if(this.isZero())return Hr;if(ur(t)||(t=Mi(t)),Vr){var n=Vr.mul(this.low,this.high,t.low,t.high);return ls(n,Vr.get_high(),this.unsigned)}if(t.isZero())return Hr;if(this.eq(Jo))return t.isOdd()?Jo:Hr;if(t.eq(Jo))return this.isOdd()?Jo:Hr;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(HD)&&t.lt(HD))return Wr(this.toNumber()*t.toNumber(),this.unsigned);var s=this.high>>>16,o=this.high&65535,r=this.low>>>16,i=this.low&65535,a=t.high>>>16,l=t.high&65535,u=t.low>>>16,c=t.low&65535,d=0,f=0,h=0,p=0;return p+=i*c,h+=p>>>16,p&=65535,h+=r*c,f+=h>>>16,h&=65535,h+=i*u,f+=h>>>16,h&=65535,f+=o*c,d+=f>>>16,f&=65535,f+=r*u,d+=f>>>16,f&=65535,f+=i*l,d+=f>>>16,f&=65535,d+=s*c+o*u+r*l+i*a,d&=65535,ls(h<<16|p,d<<16|f,this.unsigned)};pt.mul=pt.multiply;pt.divide=function(t){if(ur(t)||(t=Mi(t)),t.isZero())throw Error("division by zero");if(Vr){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?Vr.div_u:Vr.div_s)(this.low,this.high,t.low,t.high);return ls(n,Vr.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Iu:Hr;var s,o,r;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Iu;if(t.gt(this.shru(1)))return XB;r=Iu}else{if(this.eq(Jo)){if(t.eq(ad)||t.eq(tx))return Jo;if(t.eq(Jo))return ad;var i=this.shr(1);return s=i.div(t).shl(1),s.eq(Hr)?t.isNegative()?ad:tx:(o=this.sub(t.mul(s)),r=s.add(o.div(t)),r)}else if(t.eq(Jo))return this.unsigned?Iu:Hr;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();r=Hr}for(o=this;o.gte(t);){s=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(s)/Math.LN2),l=a<=48?1:M0(2,a-48),u=Wr(s),c=u.mul(t);c.isNegative()||c.gt(o);)s-=l,u=Wr(s,this.unsigned),c=u.mul(t);u.isZero()&&(u=ad),r=r.add(u),o=o.sub(c)}return r};pt.div=pt.divide;pt.modulo=function(t){if(ur(t)||(t=Mi(t)),Vr){var n=(this.unsigned?Vr.rem_u:Vr.rem_s)(this.low,this.high,t.low,t.high);return ls(n,Vr.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};pt.mod=pt.modulo;pt.rem=pt.modulo;pt.not=function(){return ls(~this.low,~this.high,this.unsigned)};pt.and=function(t){return ur(t)||(t=Mi(t)),ls(this.low&t.low,this.high&t.high,this.unsigned)};pt.or=function(t){return ur(t)||(t=Mi(t)),ls(this.low|t.low,this.high|t.high,this.unsigned)};pt.xor=function(t){return ur(t)||(t=Mi(t)),ls(this.low^t.low,this.high^t.high,this.unsigned)};pt.shiftLeft=function(t){return ur(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?ls(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):ls(0,this.low<<t-32,this.unsigned)};pt.shl=pt.shiftLeft;pt.shiftRight=function(t){return ur(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?ls(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):ls(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};pt.shr=pt.shiftRight;pt.shiftRightUnsigned=function(t){if(ur(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var s=this.low;return ls(s>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?ls(n,0,this.unsigned):ls(n>>>t-32,0,this.unsigned)};pt.shru=pt.shiftRightUnsigned;pt.shr_u=pt.shiftRightUnsigned;pt.toSigned=function(){return this.unsigned?ls(this.low,this.high,!1):this};pt.toUnsigned=function(){return this.unsigned?this:ls(this.low,this.high,!0)};pt.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};pt.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};pt.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};as.fromBytes=function(t,n,s){return s?as.fromBytesLE(t,n):as.fromBytesBE(t,n)};as.fromBytesLE=function(t,n){return new as(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};as.fromBytesBE=function(t,n){return new as(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};var KAe=Object.freeze(F9({__proto__:null,[Symbol.toStringTag]:"Module",default:ex},[ex]));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bu=ex||KAe;function Wy(e){return bu.fromString(e,!0,16)}const QB=Wy("c3a5c85c97cb3127"),fu=Wy("b492b66fbe98f273"),No=Wy("9ae16a3b2f90404f");function nx(e){return e.xor(e.shru(47))}function ez(e,t,n){const s=e.slice(t,t+n);return bu.fromBytes(Array.from(s),!0,!0)}function Qn(e,t){return ez(e,t,8)}function UD(e,t){return ez(e,t,4)}function qs(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function dl(e,t,n=Wy("9ddfea08eb382d69")){let s=e.xor(t).mul(n);s=s.xor(s.shru(47));let o=t.xor(s).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function qAe(e,t,n,s,o,r){o=o.add(e),r=qs(r.add(o).add(s),21);const i=o;return o=o.add(t),o=o.add(n),r=r.add(qs(o,44)),[o.add(s),r.add(i)]}function Zm(e,t,n,s){return qAe(Qn(e,t),Qn(e,t+8),Qn(e,t+16),Qn(e,t+24),n,s)}function YAe(e,t=e.length){if(t>=8){const n=No.add(t*2),s=Qn(e,0).add(No),o=Qn(e,t-8),r=qs(o,37).mul(n).add(s),i=qs(s,25).add(o).mul(n);return dl(r,i,n)}if(t>=4){const n=No.add(t*2),s=UD(e,0);return dl(s.shl(3).add(t),UD(e,t-4),n)}if(t>0){const n=e[0],s=e[t>>1],o=e[t-1],r=n+(s<<8),i=t+(o<<2);return nx(No.mul(r).xor(QB.mul(i))).mul(No)}return No}function XAe(e,t=e.length){const n=No.add(t*2),s=Qn(e,0).mul(fu),o=Qn(e,8),r=Qn(e,t-8).mul(n),i=Qn(e,t-16).mul(No);return dl(qs(s.add(o),43).add(qs(r,30)).add(i),s.add(qs(o.add(No),18)).add(r),n)}function ZAe(e,t=e.length){const n=No.add(t*2),s=Qn(e,0).mul(No),o=Qn(e,8),r=Qn(e,t-8).mul(n),i=Qn(e,t-16).mul(No),a=qs(s.add(o),43).add(qs(r,30)).add(i),l=dl(a,s.add(qs(o.add(No),18)).add(r),n),u=Qn(e,16).mul(n),c=Qn(e,24),d=a.add(Qn(e,t-32)).mul(n),f=l.add(Qn(e,t-24)).mul(n);return dl(qs(u.add(c),43).add(qs(d,30)).add(f),u.add(qs(c.add(s),18)).add(d),n)}function JAe(e,t=e.length){const n=bu.fromNumber(81,!0);if(t<=32)return t<=16?YAe(e,t):XAe(e,t);if(t<=64)return ZAe(e,t);let s=n,o=n.mul(fu).add(113),r=nx(o.mul(No).add(113)).mul(No),i=[bu.UZERO,bu.UZERO],a=[bu.UZERO,bu.UZERO];s=s.mul(No).add(Qn(e,0));let l=0;const u=(t-1>>6)*64,c=u+(t-1&63)-63;do s=qs(s.add(o).add(i[0]).add(Qn(e,l+8)),37).mul(fu),o=qs(o.add(i[1]).add(Qn(e,l+48)),42).mul(fu),s=s.xor(a[1]),o=o.add(i[0]).add(Qn(e,l+40)),r=qs(r.add(a[0]),33).mul(fu),i=Zm(e,l,i[1].mul(fu),s.add(a[0])),a=Zm(e,l+32,r.add(a[1]),o.add(Qn(e,l+16))),[r,s]=[s,r],l+=64;while(l!==u);const d=fu.add(r.and(255).shl(1));return l=c,a[0]=a[0].add(t-1&63),i[0]=i[0].add(a[0]),a[0]=a[0].add(i[0]),s=qs(s.add(o).add(i[0]).add(Qn(e,l+8)),37).mul(d),o=qs(o.add(i[1]).add(Qn(e,l+48)),42).mul(d),s=s.xor(a[1].mul(9)),o=o.add(i[0].mul(9).add(Qn(e,l+40))),r=qs(r.add(a[0]),33).mul(d),i=Zm(e,l,i[1].mul(d),s.add(a[0])),a=Zm(e,l+32,r.add(a[1]),o.add(Qn(e,l+16))),[r,s]=[s,r],dl(dl(i[0],a[0],d).add(nx(o).mul(QB)).add(r),dl(i[1],a[1],d).add(s),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ol(e,t){return t==="string"?fl(e):mc([e],t)}function QAe(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function mc(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Md(e)),Ye().getBool("DEBUG")&&AAe(e,t),QAe(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){const n=new Uint8Array(e.length);for(let s=0;s<n.length;++s)Math.round(e[s])!==0&&(n[s]=1);return n}else throw new Error(`Unknown data type ${t}`)}function Lo(){return Ye().platform.now()}function fl(e,t="utf-8"){return t=t||"utf-8",Ye().platform.encode(e,t)}function Pd(e,t="utf-8"){return t=t||"utf-8",Ye().platform.decode(e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eDe{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new nDe)}profileKernel(t,n,s){let o;const r=()=>{o=s()};let i;const a=Lo();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(r);else{r();for(const u of o)u.dataSync();i=Promise.resolve({kernelMs:Lo()-a})}if(Ye().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let u=0;u<o.length;u++){const c=o[u];c.data().then(d=>{tDe(d,c.dtype,t)})}return{kernelName:t,outputs:o,inputs:n,timeMs:i.then(u=>u.kernelMs),extraInfo:i.then(u=>u.getExtraProfileInfo!=null?u.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:n,outputs:s,timeMs:o,inputs:r,extraInfo:i}=t;s.forEach(a=>{Promise.all([a.data(),o,i]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],r,l[2])})})}}function tDe(e,t,n){if(t!=="float32")return!1;for(let s=0;s<e.length;s++){const o=e[s];if(isNaN(o)||!isFinite(o))return console.warn(`Found ${o} in the result of '${n}'`),!0}return!1}class nDe{logKernelProfile(t,n,s,o,r,i){const a=typeof o=="number"?pd(`${o}ms`,9):o.error,l=pd(t,25),u=n.rank,c=n.size,d=pd(n.shape.toString(),14);let f="";for(const h in r){const p=r[h];if(p!=null){const g=p.shape||n.shape,m=g.length;f+=`${h}: ${m}D ${m>0?g:""} `}}console.log(`%c${l}	%c${a}	%c${u}D ${d}	%c${c}	%c${f}	%c${i}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sDe(e,t,n){const s={},o={};for(let l=0;l<t.length;l++)s[t[l].id]=!0;for(let l=0;l<e.length;l++){const u=e[l],c=u.inputs;for(const d in c){const f=c[d];let h=!1;for(let p=0;p<t.length;p++)if(s[f.id]){u.outputs.forEach(g=>s[g.id]=!0),h=!0,o[u.id]=!0;break}if(h)break}}const r={};r[n.id]=!0;const i={};for(let l=e.length-1;l>=0;l--){const u=e[l],c=u.inputs;for(let d=0;d<u.outputs.length;d++)if(r[u.outputs[d].id]){for(const f in c)r[c[f].id]=!0,i[u.id]=!0;break}}const a=[];for(let l=0;l<e.length;l++){const u=e[l];if(o[u.id]&&i[u.id]){const c={};for(const f in u.inputs){const h=u.inputs[f];s[h.id]&&(c[f]=h)}const d=Object.assign({},u);d.inputs=c,d.outputs=u.outputs,a.push(d)}}return a}function oDe(e,t,n,s){for(let o=t.length-1;o>=0;o--){const r=t[o],i=[];if(r.outputs.forEach(l=>{const u=e[l.id];u!=null?i.push(u):i.push(null)}),r.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${r.kernelName}.`);const a=r.gradient(i);for(const l in r.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const u=n(()=>a[l]());if(u.dtype!=="float32")throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${u.dtype}'`);const c=r.inputs[l];if(!Pn(u.shape,c.shape))throw new Error(`Error in gradient for op ${r.kernelName}. The gradient of input '${l}' has shape '${u.shape}', which does not match the shape of the input '${c.shape}'`);if(e[c.id]==null)e[c.id]=u;else{const d=e[c.id];e[c.id]=s(d,u),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jD=20,Hf=3,t$=7;function rDe(e,t,n,s){const o=Ot(t),r=iDe(e,t,n,o),i=t.length,a=s0(e,t,n,o,r),l=["Tensor"];return s&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${i}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(a.map(u=>"    "+u).join(`
`)),l.join(`
`)}function iDe(e,t,n,s){const o=qe(t),r=s[s.length-1],i=new Array(r).fill(0),a=t.length,l=n==="complex64"?ch(e):e;if(a>1)for(let u=0;u<o/r;u++){const c=u*r;for(let d=0;d<r;d++)i[d]=Math.max(i[d],uh(l[c+d],0,n).length)}return i}function uh(e,t,n){let s;return Array.isArray(e)?s=`${parseFloat(e[0].toFixed(t$))} + ${parseFloat(e[1].toFixed(t$))}j`:Up(e)?s=`'${e}'`:n==="bool"?s=tz(e):s=parseFloat(e.toFixed(t$)).toString(),pd(s,t)}function tz(e){return e===0?"false":"true"}function s0(e,t,n,s,o,r=!0){const i=n==="complex64"?2:1,a=t[0],l=t.length;if(l===0){if(n==="complex64"){const g=ch(e);return[uh(g[0],0,n)]}return n==="bool"?[tz(e[0])]:[e[0].toString()]}if(l===1){if(a>jD){const m=Hf*i;let v=Array.from(e.slice(0,m)),b=Array.from(e.slice((a-Hf)*i,a*i));return n==="complex64"&&(v=ch(v),b=ch(b)),["["+v.map(($,y)=>uh($,o[y],n)).join(", ")+", ..., "+b.map(($,y)=>uh($,o[a-Hf+y],n)).join(", ")+"]"]}const g=n==="complex64"?ch(e):Array.from(e);return["["+g.map((m,v)=>uh(m,o[v],n)).join(", ")+"]"]}const u=t.slice(1),c=s.slice(1),d=s[0]*i,f=[];if(a>jD){for(let g=0;g<Hf;g++){const m=g*d,v=m+d;f.push(...s0(e.slice(m,v),u,n,c,o,!1))}f.push("...");for(let g=a-Hf;g<a;g++){const m=g*d,v=m+d;f.push(...s0(e.slice(m,v),u,n,c,o,g===a-1))}}else for(let g=0;g<a;g++){const m=g*d,v=m+d;f.push(...s0(e.slice(m,v),u,n,c,o,g===a-1))}const h=l===2?",":"";f[0]="["+f[0]+h;for(let g=1;g<f.length-1;g++)f[g]=" "+f[g]+h;let p=`,
`;for(let g=2;g<l;g++)p+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(r?"":p),f}function ch(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Co{constructor(t,n,s){if(this.dtype=n,this.shape=t.slice(),this.size=qe(t),s!=null){const o=s.length;J(o===this.size,()=>`Length of values '${o}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=s||Vo(n,this.size),this.strides=Ot(t)}set(t,...n){n.length===0&&(n=[0]),J(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const s=this.locToIndex(n);this.values[s]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(const o of t){if(o<0||o>=this.shape[n]){const r=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(r)}n++}let s=t[t.length-1];for(let o=0;o<t.length-1;++o)s+=this.strides[o]*t[o];return this.values[s]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let s=0;s<t.length-1;++s)n+=this.strides[s]*t[s];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const n=new Array(this.shape.length);for(let s=0;s<n.length-1;++s)n[s]=Math.floor(t/this.strides[s]),t-=n[s]*this.strides[s];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return gi().makeTensor(this.values,this.shape,this.dtype)}}let gi=null,td=null;function aDe(e){gi=e}function lDe(e){td=e}class Ns{constructor(t,n,s,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=qe(t),this.strides=Ot(t),this.dataId=s,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return td.buffer(this.shape,this.dtype,t)}bufferSync(){return td.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return $i(this.shape,t,this.dtype==="complex64")}arraySync(){return $i(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=gi().read(this.dataId);if(this.dtype==="string"){const n=await t;try{return n.map(s=>Pd(s))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),gi().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=gi().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>Pd(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await gi().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(gi().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return td.print(this,t)}clone(){return this.throwIfDisposed(),td.clone(this)}toString(t=!1){const n=this.dataSync();return rDe(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),td.cast(this,t)}variable(t=!0,n,s){return this.throwIfDisposed(),gi().makeVariable(this,t,n,s)}}Object.defineProperty(Ns,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function je(){return Ek("Tensor",()=>Ns)}je();class O0 extends Ns{constructor(t,n,s,o){super(t.shape,t.dtype,t.dataId,o);this.trainable=n,this.name=s}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!Pn(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);gi().disposeTensor(this),this.dataId=t.dataId,gi().incRef(this,null)}dispose(){gi().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(O0,Symbol.hasInstance,{value:e=>e instanceof Ns&&e.assign!=null&&e.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var GD;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(GD||(GD={}));var sx;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(sx||(sx={}));var ox;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(ox||(ox={}));var rx;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(rx||(rx={}));var ix;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(ix||(ix={}));const uDe={float32:rx,int32:sx,bool:ox,complex64:ix};function kr(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return uDe[e][t]}function wS(e){return kr(e,"int32")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Is(e,t){if(e.dtype===t.dtype)return[e,t];const n=kr(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function nz(e){const t=[];return sz(e,t,new Set),t}function sz(e,t,n){if(e==null)return;if(e instanceof Ns){t.push(e);return}if(!cDe(e))return;const s=e;for(const o in s){const r=s[o];n.has(r)||(n.add(r),sz(r,t,n))}}function cDe(e){return Array.isArray(e)||typeof e=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n$(e){return e.kernelName!=null}class KD{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class Ld{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new KD}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const s=t[n];if(await this.initializeBackend(s).success){await this.setBackend(s);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:n}=this.initializeBackend(t);if(n)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,n,s=1){return t in this.registryFactory?(vr(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:n,priority:s},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:n,asyncInit:s}=this.initializeBackend(t);if(!(s?await n:n))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new eDe(this.backendInstance),!0}setupRegisteredKernels(){LD(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){LD(t).forEach(s=>{s.disposeFunc!=null&&s.disposeFunc(this.registry[t])})}initializeBackend(t){const n=this.registryFactory[t];if(n==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const s=n.factory();if(s&&!(s instanceof Ik)&&typeof s.then=="function"){const o=++this.pendingBackendInitId,r=s.then(i=>o<this.pendingBackendInitId?!1:(this.registry[t]=i,this.pendingBackendInit=null,!0)).catch(i=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,vr(`Initialization of backend ${t} failed`),vr(i.stack||i.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}else return this.registry[t]=s,{success:!0,asyncInit:!1}}catch(s){return vr(`Initialization of backend ${t} failed`),vr(s.stack||s.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,n)=>this.registryFactory[n].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const s=t[n],{success:o,asyncInit:r}=this.initializeBackend(s);if(r||o)return{name:s,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,n){const s=this.state.tensorInfo.get(n),o=s.backend,r=this.readSync(n),i=o.refCount(n);o.disposeData(n,!0),s.backend=t,t.move(n,r,s.shape,s.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,n){let s=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");s=t}let o;return this.scopedRun(()=>this.startScope(s),()=>this.endScope(o),()=>(o=n(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(t,n,s){t();try{const o=s();return n(),o}catch(o){throw n(),o}}nextTensorId(){return Ld.nextTensorId++}nextVariableId(){return Ld.nextVariableId++}clone(t){const n=Ee.runKernel(hg,{x:t}),s={x:t},o=i=>({x:()=>{const a="float32",l={x:i},u={dtype:a};return Ee.runKernel(eg,l,u)}}),r=[];return this.addTapeNode(this.state.activeScope.name,s,[n],o,r,{}),n}runKernel(t,n,s){if(this.backendName==null&&this.backend,!(FD(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:n,attrs:s})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,n,s){const o=this.backend.numDataIds();let r=0;s.forEach(l=>{r+=l.dtype==="complex64"?3:1});const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=o-n-r-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${t}'`)}runKernelFunc(t){let n,s=[];const o=this.isTapeOn(),r=this.state.numBytes,i=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const u=n$(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(n$(t)){const{kernelName:p,inputs:g,attrs:m}=t;this.backendName==null&&this.backend;const v=FD(p,this.backendName);J(v!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const b=this.backend.numDataIds();l=v.kernelFunc({inputs:g,attrs:m,backend:this.backend});const $=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,b,$);const y=$.map(w=>{if(w.rank!=null)return w;const{dataId:C,shape:x,dtype:S}=w;return this.makeTensorFromDataId(C,x,S)});if(o){const w=this.getTensorsForGradient(p,g,y);s=this.saveTensorsForBackwardMode(w)}return y}}else{const{forwardFunc:p}=t,g=m=>{!o||(s=m.map(v=>this.keep(this.clone(v))))};a=()=>{const m=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,g));const v=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,m,v),v}}const{inputs:c,attrs:d}=t,f=n$(t)?null:t.backwardsFunc;let h;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(h=this.profiler.profileKernel(u,c,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(h),n=h.outputs)}),o&&this.addTapeNode(u,c,n,f,s,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(p=>c[p]!=null?c[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:h.timeMs,extraInfo:h.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(t){return t.map(s=>this.keep(this.clone(s)))}getTensorsForGradient(t,n,s){const o=PD(t);if(o!=null){const r=o.inputsToSave||[],i=o.outputsToSave||[];let a;o.saveAllInputs?(J(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(u=>n[u])):a=r.map(u=>n[u]);const l=s.filter((u,c)=>i[c]);return a.concat(l)}return[]}makeTensor(t,n,s,o){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");s=s||"float32",o=o||this.backend;let r=t;s==="string"&&Up(t[0])&&(r=t.map(l=>fl(l)));const i=o.write(r,n,s),a=new Ns(n,s,i,this.nextTensorId());if(this.trackTensor(a,o),s==="string"){const l=this.state.tensorInfo.get(i),u=RAe(r);this.state.numBytes+=u-l.bytes,l.bytes=u}return a}makeTensorFromDataId(t,n,s,o){s=s||"float32";const r=new Ns(n,s,t,this.nextTensorId());return this.trackTensor(r,o),r}makeVariable(t,n=!0,s,o){s=s||this.nextVariableId().toString(),o!=null&&o!==t.dtype&&(t=t.cast(o));const r=new O0(t,n,s,this.nextTensorId());if(this.state.registeredVariables[r.name]!=null)throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let s=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(s=t.size*KC(t.dtype)),this.state.numBytes+=s,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:s})),t instanceof O0||this.track(t)}incRef(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)}removeDataId(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const s=t.size*KC(t.dtype);this.state.numBytes-=s}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const n=this.state.registeredVariables[t];this.disposeVariable(n)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const n=this.state.numBytes,s=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-s;for(const o of this.state.activeProfile.kernels)o.kernelTimeMs=await o.kernelTimeMs,o.extraInfo=await o.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,n,s,o,r,i){const a={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:s,saved:r},l=PD(t);l!=null&&(o=l.gradFunc),o!=null&&(a.gradient=u=>(u=u.map((c,d)=>{if(c==null){const f=s[d],h=Io(f.size,f.dtype);return this.makeTensor(h,f.shape,f.dtype)}return c}),o(u.length>1?u:u[0],r,i))),this.state.activeTape.push(a)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(t){const n=nz(t),s=new Set(n.map(r=>r.id));for(let r=0;r<this.state.activeScope.track.length;r++){const i=this.state.activeScope.track[r];!i.kept&&!s.has(i.id)&&i.dispose()}const o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(r=>{!r.kept&&r.scopeId===o.id&&this.track(r)})}gradients(t,n,s,o=!1){if(J(n.length>0,()=>"gradients() received an empty list of xs."),s!=null&&s.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${s.dtype}'`);const r=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));J(r instanceof Ns,()=>"The result y returned by f() must be a tensor.");const i=sDe(this.state.activeTape,n,r);if(!o&&i.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[r.id]=s==null?dDe(r.shape):s,oDe(a,i,u=>this.tidy(u),fDe);const l=n.map(u=>a[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(const c of u.saved)c.dispose()}),this.state.activeTape=null),{value:r,grads:l}})}customGrad(t){return J(YC(t),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{J(n.every(a=>a instanceof Ns),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let s;const o={};n.forEach((a,l)=>{o[l]=a});const r=(a,l)=>(s=t(...n,l),J(s.value instanceof Ns,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),J(YC(s.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),s.value),i=(a,l)=>{const u=s.gradFunc(a,l),c=Array.isArray(u)?u:[u];J(c.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),J(c.every(f=>f instanceof Ns),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return c.forEach((f,h)=>{d[h]=()=>f}),d};return this.runKernelFunc({forwardFunc:r,backwardsFunc:i,inputs:o})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,n){return this.state.tensorInfo.get(t).backend.readToGPU(t,n)}async time(t){const n=Lo(),s=await this.backend.time(t);return s.wallMs=Lo()-n,s}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new KD;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Ld.nextTensorId=0;Ld.nextVariableId=0;function dDe(e){const t=AB(qe(e),"float32");return Ee.makeTensor(t,e,"float32")}function oz(){const e=FB();if(e._tfengine==null){const t=new OAe(e);e._tfengine=new Ld(t)}return BAe(e._tfengine.ENV),aDe(()=>e._tfengine),e._tfengine}const Ee=oz();function fDe(e,t){const n={a:e,b:t};return Ee.runKernel(ff,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hDe(){return typeof navigator!="undefined"&&navigator!=null}function rz(e){if(e||hDe()){if(e||(e=navigator),e.product==="ReactNative")return!0;const t=e.userAgent||e.vendor||(typeof window!="undefined"?window.opera:"");if(!t){const n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function iz(){return typeof window!="undefined"&&window.document!=null||typeof WorkerGlobalScope!="undefined"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ii=Ye();Ii.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Ii.registerFlag("IS_BROWSER",()=>iz());Ii.registerFlag("IS_NODE",()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined");Ii.registerFlag("IS_CHROME",()=>typeof navigator!="undefined"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Ii.registerFlag("PROD",()=>!1);Ii.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Ii.getBool("DEBUG"));Ii.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Ii.registerFlag("IS_TEST",()=>!1);Ii.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);Ii.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hy(e,t){let n=e;if(Qi(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];const s=[];for(;Array.isArray(n)||Qi(n)&&t!=="string";)s.push(n.length),n=n[0];return Array.isArray(e)&&Ye().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&az(e,s,[]),s}function az(e,t,n){if(n=n||[],!Array.isArray(e)&&!Qi(e)){J(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}J(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),J(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const s=t.slice(1);for(let o=0;o<e.length;++o)az(e[o],s,n.concat(o))}function qD(e,t,n,s){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${s}' must be ${e} tensor, but got ${t} tensor`)}}function se(e,t,n,s="numeric"){if(e instanceof Ns)return qD(s,e.dtype,t,n),e;let o=jp(e);if(o!=="string"&&["bool","int32","float32"].indexOf(s)>=0&&(o=s),qD(s,o,t,n),e==null||!Qi(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){const l=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const r=Hy(e,o);!Qi(e)&&!Array.isArray(e)&&(e=[e]);const a=o!=="string"?mc(e,o):Md(e,[],!0);return Ee.makeTensor(a,r,o)}function lz(e,t,n,s="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((r,i)=>se(r,`${t}[${i}]`,n,s))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pDe="__op";function Te(e){const t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const s=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+pDe;const o=(...r)=>{Ee.startScope(n);try{const i=s(...r);return MB(i)&&console.error("Cannot return a Promise inside of tidy."),Ee.endScope(i),i}catch(i){throw Ee.endScope(null),i}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gDe(e,t){const n=se(e,"real","complex"),s=se(t,"imag","complex");ni(n.shape,s.shape,`real and imag shapes, ${n.shape} and ${s.shape}, must match in call to tf.complex().`);const o={real:n,imag:s};return Ee.runKernel(Mk,o)}const cp=Te({complex_:gDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uy(e,t,n,s){if(s==null&&(s=jp(e)),s==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Qi(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){RB(t);const o=qe(t),r=qe(n);J(o===r,()=>`Based on the provided shape, [${t}], the tensor should have ${o} values but has ${r}`);for(let i=0;i<n.length;++i){const a=n[i],l=i===n.length-1?a!==qe(t.slice(i)):!0;J(n[i]===t[i]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!Qi(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=s!=="string"?mc(e,s):Md(e,[],!0),Ee.makeTensor(e,t,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mDe(e,t,n){const s=Hy(e,n);return Uy(e,t,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YD=4;async function XD(e,t){const n=[],s=[],o=Array.isArray(e)?e.map(i=>i.name):Object.keys(e);for(let i=0;i<o.length;++i){const a=o[i],l=Array.isArray(e)?e[i].tensor:e[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const u={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const c=new Promise(async d=>{const f=await l.bytes(),h=f.reduce((m,v)=>m+v.length,0)+YD*f.length,p=new Uint8Array(h);let g=0;for(let m=0;m<f.length;m++){const v=f[m],b=new Uint8Array(new Uint32Array([v.length]).buffer);p.set(b,g),g+=YD,p.set(v,g),g+=v.length}d(p)});s.push(c)}else s.push(l.data());t!=null&&(u.group=t),n.push(u)}const r=await Promise.all(s);return{data:vDe(r),specs:n}}function vDe(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(r=>{if(t+=r.byteLength,n.push(r.byteLength===r.buffer.byteLength?r:new r.constructor(r)),!(r instanceof Float32Array||r instanceof Int32Array||r instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${r.constructor.name}`)});const s=new Uint8Array(t);let o=0;return n.forEach(r=>{s.set(new Uint8Array(r.buffer),o),o+=r.byteLength}),s.buffer}const $S=typeof Buffer!="undefined"&&(typeof Blob=="undefined"||typeof atob=="undefined"||typeof btoa=="undefined");function ZD(e){return $S?Buffer.byteLength(e):new Blob([e]).size}function bDe(e){if($S)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let s=0,o=t.length;s<o;s++)n+=String.fromCharCode(t[s]);return btoa(n)}function yDe(e){if($S){const s=Buffer.from(e,"base64");return s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;++s)n.set([t.charCodeAt(s)],s);return n.buffer}function uz(e){if(e.length===1)return e[0];let t=0;e.forEach(o=>{t+=o.byteLength});const n=new Uint8Array(t);let s=0;return e.forEach(o=>{n.set(new Uint8Array(o),s),s+=o.byteLength}),n.buffer}function cz(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}async function wDe(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),e.weightsManifest!=null){const[s,o]=await t(e.weightsManifest);n.weightSpecs=s,n.weightData=o}return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),n}function jy(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:ZD(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:ZD(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Gs{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return Gs.instance==null&&(Gs.instance=new Gs),Gs.instance}static registerSaveRouter(t){Gs.getInstance().saveRouters.push(t)}static registerLoadRouter(t){Gs.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return Gs.getHandlers(t,"save")}static getLoadHandlers(t,n){return Gs.getHandlers(t,"load",n)}static getHandlers(t,n,s){const o=[];return(n==="load"?Gs.getInstance().loadRouters:Gs.getInstance().saveRouters).forEach(i=>{const a=i(t,s);a!==null&&o.push(a)}),o}}const $De=e=>Gs.getSaveHandlers(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ax="tensorflowjs",lx=1,Eu="models_store",il="model_info_store";function dz(){if(!Ye().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e=typeof window=="undefined"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function ux(e){const t=e.result;t.createObjectStore(Eu,{keyPath:"modelPath"}),t.createObjectStore(il,{keyPath:"modelPath"})}class Gu{constructor(t){if(this.indexedDB=dz(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,n){return new Promise((s,o)=>{const r=this.indexedDB.open(ax,lx);r.onupgradeneeded=()=>ux(r),r.onsuccess=()=>{const i=r.result;if(n==null){const a=i.transaction(Eu,"readonly"),u=a.objectStore(Eu).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return i.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));s(u.result.modelArtifacts)},u.onerror=c=>(i.close(),o(u.error)),a.oncomplete=()=>i.close()}else{const a=jy(n),l=i.transaction(il,"readwrite");let u=l.objectStore(il);const c=u.put({modelPath:this.modelPath,modelArtifactsInfo:a});let d;c.onsuccess=()=>{d=i.transaction(Eu,"readwrite");const h=d.objectStore(Eu).put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a});h.onsuccess=()=>s({modelArtifactsInfo:a}),h.onerror=p=>{u=l.objectStore(il);const g=u.delete(this.modelPath);g.onsuccess=()=>(i.close(),o(h.error)),g.onerror=m=>(i.close(),o(h.error))}},c.onerror=f=>(i.close(),o(c.error)),l.oncomplete=()=>{d==null?i.close():d.oncomplete=()=>i.close()}}},r.onerror=i=>o(r.error)})}}Gu.URL_SCHEME="indexeddb://";const fz=e=>Ye().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Gu.URL_SCHEME)?CDe(e.slice(Gu.URL_SCHEME.length)):null;Gs.registerSaveRouter(fz);Gs.registerLoadRouter(fz);function CDe(e){return new Gu(e)}function xDe(e){return e.startsWith(Gu.URL_SCHEME)?e.slice(Gu.URL_SCHEME.length):e}class kDe{constructor(){this.indexedDB=dz()}async listModels(){return new Promise((t,n)=>{const s=this.indexedDB.open(ax,lx);s.onupgradeneeded=()=>ux(s),s.onsuccess=()=>{const o=s.result,r=o.transaction(il,"readonly"),a=r.objectStore(il).getAll();a.onsuccess=()=>{const l={};for(const u of a.result)l[u.modelPath]=u.modelArtifactsInfo;t(l)},a.onerror=l=>(o.close(),n(a.error)),r.oncomplete=()=>o.close()},s.onerror=o=>n(s.error)})}async removeModel(t){return t=xDe(t),new Promise((n,s)=>{const o=this.indexedDB.open(ax,lx);o.onupgradeneeded=()=>ux(o),o.onsuccess=()=>{const r=o.result,i=r.transaction(il,"readwrite"),a=i.objectStore(il),l=a.get(t);let u;l.onsuccess=()=>{if(l.result==null)return r.close(),s(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const c=a.delete(t),d=()=>{u=r.transaction(Eu,"readwrite");const h=u.objectStore(Eu).delete(t);h.onsuccess=()=>n(l.result.modelArtifactsInfo),h.onerror=p=>s(l.error)};c.onsuccess=d,c.onerror=f=>(d(),r.close(),s(l.error))}},l.onerror=c=>(r.close(),s(l.error)),i.oncomplete=()=>{u==null?r.close():u.oncomplete=()=>r.close()}},o.onerror=r=>s(o.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ba="/",nd="tensorflowjs_models",hz="info",SDe="model_topology",IDe="weight_specs",EDe="weight_data",TDe="model_metadata";function pz(e){return{info:[nd,e,hz].join(ba),topology:[nd,e,SDe].join(ba),weightSpecs:[nd,e,IDe].join(ba),weightData:[nd,e,EDe].join(ba),modelMetadata:[nd,e,TDe].join(ba)}}function gz(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function _De(e){const t=e.split(ba);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(ba)}function NDe(e){return e.startsWith(Ku.URL_SCHEME)?e.slice(Ku.URL_SCHEME.length):e}class Ku{constructor(t){if(!Ye().getBool("IS_BROWSER")||typeof window=="undefined"||typeof window.localStorage=="undefined")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=pz(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),s=JSON.stringify(t.weightSpecs),o=jy(t);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,s),this.LS.setItem(this.keys.weightData,bDe(t.weightData));const r={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(r)),{modelArtifactsInfo:o}}catch{throw gz(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},s=JSON.parse(this.LS.getItem(this.keys.topology));if(s==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=s;const o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=o;const r=this.LS.getItem(this.keys.modelMetadata);if(r!=null){const a=JSON.parse(r);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const i=this.LS.getItem(this.keys.weightData);if(i==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=yDe(i),n}}Ku.URL_SCHEME="localstorage://";const mz=e=>Ye().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ku.URL_SCHEME)?ADe(e.slice(Ku.URL_SCHEME.length)):null;Gs.registerSaveRouter(mz);Gs.registerLoadRouter(mz);function ADe(e){return new Ku(e)}class DDe{constructor(){J(Ye().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),J(typeof window=="undefined"||typeof window.localStorage!="undefined",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},n=nd+ba,s=ba+hz;for(let o=0;o<this.LS.length;++o){const r=this.LS.key(o);if(r.startsWith(n)&&r.endsWith(s)){const i=_De(r);t[i]=JSON.parse(this.LS.getItem(r))}}return t}async removeModel(t){t=NDe(t);const n=pz(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);const s=JSON.parse(this.LS.getItem(n.info));return gz(n),s}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JD="://";class ol{constructor(){this.managers={}}static getInstance(){return ol.instance==null&&(ol.instance=new ol),ol.instance}static registerManager(t,n){J(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(JD)&&(t=t.slice(0,t.indexOf(JD))),J(t.length>0,()=>"scheme must not be an empty string.");const s=ol.getInstance();J(s.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),s.managers[t]=n}static getManager(t){const n=this.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(this.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RDe{fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}}if(Ye().get("IS_BROWSER")){Ye().setPlatform("browser",new RDe);try{ol.registerManager(Ku.URL_SCHEME,new DDe)}catch{}try{ol.registerManager(Gu.URL_SCHEME,new kDe)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MDe={importFetch:()=>require("node-fetch")};let s$;class ODe{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return Ye().global.fetch!=null?Ye().global.fetch(t,n):(s$==null&&(s$=MDe.importFetch()),s$(t,n))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}}Ye().get("IS_NODE")&&Ye().setPlatform("node",new ODe);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vn(e,t="float32",n){return t=t||"float32",RB(e),new Co(e,t,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FDe(e,t){const n=se(e,"x","cast");if(!DAe(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const s={x:n},o={dtype:t};return Ee.runKernel(eg,s,o)}const bt=Te({cast_:FDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PDe(e){const n={x:se(e,"x","clone","string_or_numeric")};return Ee.runKernel(hg,n)}const Fu=Te({clone_:PDe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LDe(e,t=!1){console.log(e.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */oz();const BDe={buffer:vn,cast:bt,clone:Fu,print:LDe};lDe(BDe);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zDe="model",VDe=".json",WDe=".weights.bin";function QD(e){return new Promise(t=>setTimeout(t)).then(e)}class qu{constructor(t){if(!Ye().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(qu.URL_SCHEME)&&(t=t.slice(qu.URL_SCHEME.length)),(t==null||t.length===0)&&(t=zDe),this.modelJsonFileName=t+VDe,this.weightDataFileName=t+WDe}async save(t){if(typeof document=="undefined")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],o=cz(t,s),r=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),i=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=r,await QD(()=>i.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){const a=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;a.download=this.weightDataFileName,a.href=n,await QD(()=>a.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:jy(t)}}}}qu.URL_SCHEME="downloads://";const HDe=e=>Ye().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(qu.URL_SCHEME)?UDe(e.slice(qu.URL_SCHEME.length)):null;Gs.registerSaveRouter(HDe);function UDe(e="model"){return new qu(e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eR(e,t,n,s){i(e),n=n==null?0:n,s=s==null?1:s,a(n,s);let o=0;const r=l=>(l.then(u=>{const c=n+ ++o/e.length*(s-n);return t(c),u}),l);function i(l){J(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,u){J(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),J(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${u}`),J(u>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${u}`)}return Promise.all(e.map(r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function jDe(e,t){t==null&&(t={});const n=t.fetchFunc==null?Ye().platform.fetch:t.fetchFunc,s=e.map(d=>n(d,t.requestInit,{isBinary:!0})),o=0,r=.5,a=(t.onProgress==null?await Promise.all(s):await eR(s,t.onProgress,o,r)).map(d=>d.arrayBuffer()),l=.5,u=1;return t.onProgress==null?await Promise.all(a):await eR(a,t.onProgress,l,u)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GDe="application/octet-stream",KDe="application/json";class CS{constructor(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(J(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Ye().platform.fetch,J(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&J(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const s=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],o=cz(t,s);n.body.append("model.json",new Blob([JSON.stringify(o)],{type:KDe}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:GDe}),"model.weights.bin");const r=await this.fetch(this.path,n);if(r.ok)return{modelArtifactsInfo:jy(t),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await t.json()}catch{let i=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?i+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":i+=" Please make sure the server is serving valid JSON for this request.",new Error(i)}const s=n.modelTopology,o=n.weightsManifest;if(s==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return wDe(n,r=>this.loadWeights(r))}async loadWeights(t){const n=Array.isArray(this.path)?this.path[1]:this.path,[s,o]=qDe(n),r=this.weightPathPrefix||s,i=[];for(const c of t)i.push(...c.weights);const a=[],l=[];for(const c of t)for(const d of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(d)):a.push(r+d+o);this.weightUrlConverter&&a.push(...await Promise.all(l));const u=await jDe(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[i,uz(u)]}}CS.URL_SCHEME_REGEX=/^https?:\/\//;function qDe(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),s=e.substring(0,t),o=n>t?e.substring(n):"";return[s+"/",o]}function tR(e){return e.match(CS.URL_SCHEME_REGEX)!=null}const vz=(e,t)=>{if(typeof fetch=="undefined"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(s=>tR(s)):n=tR(e),n)return YDe(e,t)}return null};Gs.registerSaveRouter(vz);Gs.registerLoadRouter(vz);function YDe(e,t){return new CS(e,t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XDe(e,t,n=!1,s=!1){let o=se(e,"a","matMul"),r=se(t,"b","matMul");[o,r]=Is(o,r);const i={a:o,b:r},a={transposeA:n,transposeB:s};return Ee.runKernel(Kb,i,a)}const Mn=Te({matMul_:XDe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZDe(e,t,n=1,s=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const r={indices:se(e,"indices","oneHot","int32")},i={depth:t,onValue:n,offValue:s};return Ee.runKernel(ky,r,i)}const bz=Te({oneHot_:ZDe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JDe(e,t){const n=se(e,"x","transpose");if(t==null&&(t=n.shape.map((r,i)=>i).reverse()),J(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`),t.forEach(r=>{J(r>=0&&r<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1} but got ${t}`)}),n.rank<=1)return n.clone();const s={x:n},o={perm:t};return Ee.runKernel(Ly,s,o)}const Rn=Te({transpose_:JDe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bd(e,t){const n=e.length,s=[];for(let o=0;o<n;o++){const r=n-1-o,i=e[r]||1;(t[t.length-1-o]||1)>1&&i===1&&s.unshift(r)}return s}function Us(e,t){const n=[];for(let s=0;s<t.length;s++){const o=e[e.length-s-1],r=t.length-s-1,i=t[r];(o==null||o===1&&i>1)&&n.unshift(r)}return n}function rn(e,t){const n=[],s=Math.max(e.length,t.length);for(let o=0;o<s;o++){let r=e[e.length-o-1];r==null&&(r=1);let i=t[t.length-o-1];if(i==null&&(i=1),r===1)n.unshift(i);else if(i===1)n.unshift(r);else if(r!==i){const a=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(a)}else n.unshift(r)}return n}function xS(e,t){const n=e.shape.length,s=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(s<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${s}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[s-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[s-1]} vs. ${n}`);if(qe(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const o=t.shape,r=o[o.length-1];let i=1;for(let d=0;d<o.length-1;++d)i*=o[d];const a=e.shape,l=o.slice();l.pop();let u=1;for(let d=r;d<n;++d)u*=a[d],l.push(a[d]);const c=[...Ot(e.shape).map(d=>d/u),1].slice(0,r);return[l,i,u,c]}function yz(e,t,n){const s=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,r=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${s}, and batchDim: ${o}.`;if(n.rank<o)throw new Error(r+` update.rank < ${o}. `);if(e.length<s+(n.rank-o))throw new Error(r+` Output shape length < ${s+(n.rank-o)}`);if(n.rank!==o+e.length-s)throw new Error(r+` update.rank != ${o+e.length-s}`);for(let i=0;i<o;++i)if(n.shape[i]!==t.shape[i])throw new Error(r+` updates.shape[${i}] (${n.shape[i]}) != indices.shape[${i}] (${t.shape[i]}).`);for(let i=0;i<n.rank-o;++i)if(n.shape[i+o]!==e[i+s])throw new Error(r+` updates.shape[${i+o}] (${n.shape[i+o]}) != shape[${i+o}] (${e[i+o]})`)}function QDe(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}yz(n,t,e)}function Wg(e,t,n){const s=t.shape.length,o=s>1?t.shape[s-1]:1,r=n.length;let i=1;for(let d=o;d<r;++d)i*=n[d];const a=o<1?1:o,l=qe(t.shape)/a,u=[...Ot(n.slice(0,o)),1],c=qe(n);return{sliceRank:o,numUpdates:l,sliceSize:i,strides:u,outputSize:c}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cx=-2,eRe=-1;function kS(e,t,n){const s=e.shape.length;J(s===t.length,()=>`Error in slice${s}D: Length of begin ${t} must match the rank of the array (${s}).`),J(s===n.length,()=>`Error in slice${s}D: Length of size ${n} must match the rank of the array (${s}).`);for(let o=0;o<s;++o)J(t[o]+n[o]<=e.shape[o],()=>`Error in slice${s}D: begin[${o}] + size[${o}] (${t[o]+n[o]}) would overflow input.shape[${o}] (${e.shape[o]})`)}function tRe(e){const t=[];let n=0;for(;e>0;)e&1&&t.push(n),e/=2,n++;return t}function SS(e,t,n){const s=[];for(let o=0;o<e.length;o++)s[o]=Math.ceil((t[o]-e[o])/n[o]);return s}function wz(e,t,n,s){const o=[...e];for(let r=o.length;r<s.length;r++)o.push(1);for(let r=0;r<n;r++)r===0?o[t]=1:(o.splice(t,0,1),o.pop());return o}function $z(e,t,n){return n<=e?n:n-(t-1)}function Cz(e,t){const n=[];for(let s=0;s<e;s++)n.push(t+s);return n}function nRe(e,t,n,s,o,r,i,a,l){const u=e.length;let c=new Array(u),d=new Array(u),f=new Array(u);if(t.length&&n>0){const h=t[0],p=n+1;c=xz(i,h,p,s,e),d=kz(a,h,p,o,e),f=wz(r,h,p,e)}else for(let h=0;h<u;h++)c[h]=Iz(i,s,r,e,h,l),d[h]=Ez(a,o,r,e,h,l),f[h]=Sz(r,h,l);return{begin:c,end:d,strides:f}}function xz(e,t,n,s,o){const r=[...o],i=Cz(n,t);for(let a=0;a<r.length;a++)if(i.indexOf(a)>-1)r[a]=0;else{const l=$z(t,n,a);let u=s[l];e&1<<l&&(u=0),r[a]=u}return r}function kz(e,t,n,s,o){const r=[...o],i=Cz(n,t);for(let a=0;a<r.length;a++)if(i.indexOf(a)>-1)r[a]=Number.MAX_SAFE_INTEGER;else{const l=$z(t,n,a);let u=s[l];e&1<<l&&(u=Number.MAX_SAFE_INTEGER),r[a]=u}for(let a=0;a<r.length;a++){const l=o[a];r[a]<0&&(r[a]+=l),r[a]=ju(0,r[a],o[a])}return r}function Sz(e,t,n){let s=e[t];return(n&1<<t||s==null)&&(s=1),s}function Iz(e,t,n,s,o,r){let i=t[o];const a=n[o]||1;(e&1<<o||r&1<<o||i==null)&&(a>0?i=Number.MIN_SAFE_INTEGER:i=Number.MAX_SAFE_INTEGER);const l=s[o];return i<0&&(i+=l),i=ju(0,i,l-1),i}function Ez(e,t,n,s,o,r){let i=t[o];const a=n[o]||1;(e&1<<o||r&1<<o||i==null)&&(a>0?i=Number.MAX_SAFE_INTEGER:i=Number.MIN_SAFE_INTEGER);const l=s[o];return i<0&&(i+=l),a>0?i=ju(0,i,l):i=ju(-1,i,l-1),i}function IS(e,t,n){let s=n.length;for(let o=0;o<n.length;o++)if(n[o]>1){s=o;break}for(let o=s+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function ES(e,t){let n=e.length>0?e[e.length-1]:1;for(let s=0;s<e.length-1;s++)n+=e[s]*t[s];return n}function Gy(e,t,n){let s;const o=e.shape.length;typeof t=="number"?s=[t,...new Array(o-1).fill(0)]:t.length<o?s=t.concat(new Array(o-t.length).fill(0)):s=t.slice(),s.forEach(i=>{J(i!==-1,()=>"slice() does not support negative begin indexing.")});let r;return n==null?r=new Array(o).fill(-1):typeof n=="number"?r=[n,...new Array(o-1).fill(-1)]:n.length<o?r=n.concat(new Array(o-n.length).fill(-1)):r=n,r=r.map((i,a)=>i>=0?i:(J(i===-1,()=>`Negative size values should be exactly -1 but got ${i} for the slice() size at index ${a}.`),e.shape[a]-s[a])),[s,r]}function TS(e,t,n,s,o,r,i,a,l){let u;if(s==null?(u=new Array(t.length),u.fill(1)):u=s,i!=null&&(i&i-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const d={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:o,endMask:r,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};for(let $=0;$<d.dims;$++)c&&(1<<$&a)!==0&&d.numAddAxisAfterEllipsis++,1<<$&i&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};sRe(d,f);let h=!0,p=!0,g=!0;const m=[],v=[];for(let $=0;$<e.length;++$){if(f.strides[$]===0)throw Error(`strides[${$}] must be non-zero`);const y=!!(f.shrinkAxisMask&1<<$),w=e[$];if(w===-1){m.push(y?1:-1);continue}const C=[f.beginMask&1<<$,f.endMask&1<<$],x=[f.strides[$]>0?0:-1,f.strides[$]>0?w:w-1];if(y&&f.strides[$]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&f.strides[$]===1;const S=!!(f.beginMask&1<<$&&f.endMask&1<<$);if(f.beginValid&&f.endValid){if(y){const N=f.begin[$]<0?w+f.begin[$]:f.begin[$];if(f.begin[$]=N,f.end[$]=f.begin[$]+1,N<0||N>=w)throw Error(`slice index ${f.begin[$]} of dimension ${$} out of bounds.`)}else f.begin[$]=nR(f.begin[$],0,f.strides[$],w,C,x),f.end[$]=nR(f.end[$],1,f.strides[$],w,C,x);const _=f.strides[$]===1&&f.begin[$]===0&&f.end[$]===w;h=h&&_,p=p&&($===0&&f.strides[$]===1||_)}else h=h&&f.strides[$]===1&&S,p=p&&($===0&&f.strides[$]===1||S);let T,I=!1;if(f.beginValid&&f.endValid?(T=f.end[$]-f.begin[$],I=!0):y?(T=1,I=!0):S&&w>=0&&(f.strides[$]<0?T=-w:T=w,I=!0),I){let _;T===0||T<0!=f.strides[$]<0?_=0:_=Math.trunc(T/f.strides[$])+(T%f.strides[$]!==0?1:0),m.push(_)}else m.push(-1)}for(let $=0;$<f.finalShapeGatherIndices.length;++$){const y=f.finalShapeGatherIndices[$];y>=0?v.push(m[y]):y===cx&&v.push(1)}return{finalShapeSparse:v.filter(($,y)=>f.finalShapeGatherIndices[y]!==cx),finalShape:v,isIdentity:h,sliceDim0:p,isSimpleSlice:g,begin:f.begin,end:f.end,strides:f.strides}}function sRe(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let s=0;s<e.dims;s++)if(1<<s&e.ellipsisMask){const o=Math.min(t.dims-(e.dims-s)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<o;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=s}else if(1<<s&e.newAxisMask)t.finalShapeGatherIndices.push(cx),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[s]),e.end!=null&&(t.end[n]=e.end[s]),t.strides[n]=e.strides[s],e.beginMask&1<<s&&(t.beginMask|=1<<n),e.endMask&1<<s&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<s?(t.finalShapeGatherIndices.push(eRe),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(s)),t.inputShapeGatherIndicesSparse[n]=s,n++}}function nR(e,t,n,s,o,r){if(o[t])return n>0?r[t]:r[t+1&1];{const i=e<0?s+e:e;return i<r[0]?r[0]:i>r[1]?r[1]:i}}var oRe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",assertParamsValid:kS,maskToAxes:tRe,computeOutShape:SS,stridesWithElidedDims:wz,getNormalizedAxes:nRe,startIndicesWithElidedDims:xz,stopIndicesWithElidedDims:kz,stridesForAxis:Sz,startForAxis:Iz,stopForAxis:Ez,isSliceContinous:IS,computeFlatOffset:ES,parseSliceParams:Gy,sliceInfo:TS});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hf{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}}class Br{constructor(){this.classNameMap={}}static getMap(){return Br.instance==null&&(Br.instance=new Br),Br.instance}static register(t){Br.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function nt(e){J(e.className!=null,()=>"Class being registered does not have the static className property defined."),J(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),J(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),Br.register(e)}/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function el(){return Ee}function dx(){return Ee.memory()}function Be(e,t){return Ee.tidy(e,t)}function gn(e){nz(e).forEach(n=>n.dispose())}function ea(e){return Ee.keep(e)}function Tz(e,t,n=1){return Ee.registerBackend(e,t,n)}function rRe(){return Ee.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iRe(e,t){let n=se(e,"a","add"),s=se(t,"b","add");[n,s]=Is(n,s);const o={a:n,b:s};return Ee.runKernel(ff,o)}const at=Te({add_:iRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRe(e,t){let n=se(e,"a","floorDiv"),s=se(t,"b","floorDiv");[n,s]=Is(n,s);const o={a:n,b:s};return Ee.runKernel(dg,o)}const _z=Te({floorDiv_:aRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRe(e,t){let n=se(e,"a","div"),s=se(t,"b","div");if([n,s]=Is(n,s),n.dtype==="int32"&&s.dtype==="int32")return _z(n,s);const o={a:n,b:s},r={};return Ee.runKernel(rg,o,r)}const Rt=Te({div_:lRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uRe(e,t){let n=se(e,"a","mul"),s=se(t,"b","mul");[n,s]=Is(n,s);const o={a:n,b:s};return Ee.runKernel(Cg,o)}const Ce=Te({mul_:uRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cRe(e){const t=se(e,"x","abs");if(t.dtype==="complex64"){const n={x:t};return Ee.runKernel(Yb,n)}else{const n={x:t};return Ee.runKernel(Wb,n)}}const Ks=Te({abs_:cRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dRe(e){const n={x:se(e,"x","acos")};return Ee.runKernel(Kp,n)}const fRe=Te({acos_:dRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hRe(e){const n={x:se(e,"x","acosh")};return Ee.runKernel(qp,n)}const pRe=Te({acosh_:hRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gRe(e,t=null,n=!1){const o={x:se(e,"x","all","bool")},r={axis:t,keepDims:n};return Ee.runKernel(_k,o,r)}const Nz=Te({all_:gRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mRe(e,t=null,n=!1){const o={x:se(e,"x","any","bool")},r={axis:t,keepDims:n};return Ee.runKernel(Nk,o,r)}const fx=Te({any_:mRe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vRe(e,t=0){const s={x:se(e,"x","argMax")},o={axis:t};return Ee.runKernel(Hb,s,o)}const dp=Te({argMax_:vRe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bRe(e,t=0){const s={x:se(e,"x","argMin")},o={axis:t};return Ee.runKernel(Ub,s,o)}const yRe=Te({argMin_:bRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wRe(e){const n={x:se(e,"x","asin")};return Ee.runKernel(Yp,n)}const $Re=Te({asin_:wRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CRe(e){const n={x:se(e,"x","asinh")};return Ee.runKernel(Xp,n)}const xRe=Te({asinh_:CRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kRe(e){const n={x:se(e,"x","atan")};return Ee.runKernel(Zp,n)}const SRe=Te({atan_:kRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IRe(e,t){let n=se(e,"a","atan2"),s=se(t,"b","atan2");[n,s]=Is(n,s);const o={a:n,b:s};return Ee.runKernel(Qp,o)}const ERe=Te({atan2_:IRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TRe(e){const n={x:se(e,"x","atanh")};return Ee.runKernel(Jp,n)}const _Re=Te({atanh_:TRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hg(e,t,n,s,o="NHWC",r){const i=e[3],a=[...t,i],l=La(o);return fo(e,a,n,r,s,null,null,l)}function si(e,t,n,s,o,r,i="channelsLast"){const[a,l]=F0(t);let u;if(i==="channelsLast")u=[a,l,e[3],e[3]];else if(i==="channelsFirst")u=[a,l,e[1],e[1]];else throw new Error(`Unknown dataFormat ${i}`);return fo(e,u,n,s,o,r,!1,i)}function Pa(e,t,n,s,o,r,i="NDHWC"){const[a,l,u]=hx(t);let c,d;if(i==="NDHWC")d="channelsLast",c=[a,l,u,e[4],e[4]];else if(i==="NCDHW")d="channelsFirst",c=[a,l,u,e[1],e[1]];else throw new Error(`Unknown dataFormat ${i}`);return Fl(e,c,n,s,o,!1,d,r)}function fo(e,t,n,s,o,r,i=!1,a="channelsLast"){let[l,u,c,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,u,c,d]=e;else if(a==="channelsFirst")[l,d,u,c]=e;else throw new Error(`Unknown dataFormat ${a}`);const[f,h,,p]=t,[g,m]=F0(n),[v,b]=F0(s),$=gd(f,v),y=gd(h,b),{padInfo:w,outHeight:C,outWidth:x}=DRe(o,u,c,g,m,$,y,r,a),S=i?p*d:p;let T;return a==="channelsFirst"?T=[l,S,C,x]:a==="channelsLast"&&(T=[l,C,x,S]),{batchSize:l,dataFormat:a,inHeight:u,inWidth:c,inChannels:d,outHeight:C,outWidth:x,outChannels:S,padInfo:w,strideHeight:g,strideWidth:m,filterHeight:f,filterWidth:h,effectiveFilterHeight:$,effectiveFilterWidth:y,dilationHeight:v,dilationWidth:b,inShape:e,outShape:T,filterShape:t}}function Fl(e,t,n,s,o,r=!1,i="channelsLast",a){let[l,u,c,d,f]=[-1,-1,-1,-1,-1];if(i==="channelsLast")[l,u,c,d,f]=e;else if(i==="channelsFirst")[l,f,u,c,d]=e;else throw new Error(`Unknown dataFormat ${i}`);const[h,p,g,,m]=t,[v,b,$]=hx(n),[y,w,C]=hx(s),x=gd(h,y),S=gd(p,w),T=gd(g,C),{padInfo:I,outDepth:_,outHeight:N,outWidth:D}=RRe(o,u,c,d,v,b,$,x,S,T,a),F=r?m*f:m;let P;return i==="channelsFirst"?P=[l,F,_,N,D]:i==="channelsLast"&&(P=[l,_,N,D,F]),{batchSize:l,dataFormat:i,inDepth:u,inHeight:c,inWidth:d,inChannels:f,outDepth:_,outHeight:N,outWidth:D,outChannels:F,padInfo:I,strideDepth:v,strideHeight:b,strideWidth:$,filterDepth:h,filterHeight:p,filterWidth:g,effectiveFilterDepth:x,effectiveFilterHeight:S,effectiveFilterWidth:T,dilationDepth:y,dilationHeight:w,dilationWidth:C,inShape:e,outShape:P,filterShape:t}}function NRe(e,t,n,s,o){s==null&&(s=_S(e,t,n));const r=e[0],i=e[1],a=Pu((r-t+2*s)/n+1,o),l=Pu((i-t+2*s)/n+1,o);return[a,l]}function ARe(e,t,n,s,o,r){o==null&&(o=_S(e,t,s));const i=e[0],a=e[1],l=e[2],u=Pu((i-t+2*o)/s+1,r),c=Pu((a-t+2*o)/s+1,r),d=Pu((l-t+2*o)/s+1,r);return[u,c,d,n]}function _S(e,t,n,s=1){const o=gd(t,s);return Math.floor((e[0]*(n-1)-n+o)/2)}function F0(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function hx(e){return typeof e=="number"?[e,e,e]:e}function gd(e,t){return t<=1?e:e+(e-1)*(t-1)}function DRe(e,t,n,s,o,r,i,a,l){let u,c,d;if(typeof e=="number"){u={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};const h=NRe([t,n],r,s,e,a);c=h[0],d=h[1]}else if(e==="same"){c=Math.ceil(t/s),d=Math.ceil(n/o);const f=Math.max(0,(c-1)*s+r-t),h=Math.max(0,(d-1)*o+i-n),p=Math.floor(f/2),g=f-p,m=Math.floor(h/2),v=h-m;u={top:p,bottom:g,left:m,right:v,type:"SAME"}}else if(e==="valid")u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-r+1)/s),d=Math.ceil((n-i+1)/o);else if(typeof e=="object"){const f=l==="channelsLast"?e[1][0]:e[2][0],h=l==="channelsLast"?e[1][1]:e[2][1],p=l==="channelsLast"?e[2][0]:e[3][0],g=l==="channelsLast"?e[2][1]:e[3][1];u={top:f,bottom:h,left:p,right:g,type:f===0&&h===0&&p===0&&g===0?"VALID":"EXPLICIT"},c=Pu((t-r+f+h)/s+1,a),d=Pu((n-i+p+g)/o+1,a)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:u,outHeight:c,outWidth:d}}function RRe(e,t,n,s,o,r,i,a,l,u,c){let d,f,h,p;if(typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};const m=ARe([t,n,s,1],a,1,o,e,c);f=m[0],h=m[1],p=m[2]}else if(e==="same"){f=Math.ceil(t/o),h=Math.ceil(n/r),p=Math.ceil(s/i);const g=(f-1)*o+a-t,m=(h-1)*r+l-n,v=(p-1)*i+u-s,b=Math.floor(g/2),$=g-b,y=Math.floor(m/2),w=m-y,C=Math.floor(v/2),x=v-C;d={top:y,bottom:w,left:C,right:x,front:b,back:$,type:"SAME"}}else if(e==="valid")d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-a+1)/o),h=Math.ceil((n-l+1)/r),p=Math.ceil((s-u+1)/i);else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:f,outHeight:h,outWidth:p}}function Pu(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function Yu(e){const[t,n,s]=F0(e);return t===1&&n===1&&s===1}function Eo(e,t){return Yu(e)||Yu(t)}function La(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function Ho(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")J(Od(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(s=>{s.forEach(o=>{J(Od(o),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${o}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MRe(e,t){const s={x:se(e,"x","reshape","string_or_numeric")},o={shape:t};return Ee.runKernel(Ty,s,o)}const Ne=Te({reshape_:MRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ORe(e,t,n,s,o){const r=se(e,"x","avgPool","float32"),i=1;J(Eo(n,i),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);let a=r,l=!1;r.rank===3&&(l=!0,a=Ne(r,[1,r.shape[0],r.shape[1],r.shape[2]])),J(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Ho("avgPool",s,o);const u={x:a},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o};let d=Ee.runKernel(jb,u,c);return d=bt(d,r.dtype),l?Ne(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const NS=Te({avgPool_:ORe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FRe(e,t,n,s,o,r="NDHWC"){const i=se(e,"x","avgPool3d","float32");let a=i,l=!1;i.rank===4&&(l=!0,a=Ne(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),J(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),J(r==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),Ho("avgPool3d",s,o);const u={x:a},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o,dataFormat:r};let d=Ee.runKernel(Gb,u,c);return d=bt(d,a.dtype),l?Ne(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const PRe=Te({avgPool3d_:FRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LRe(e,t=0){J(e.length>=1,()=>"Pass at least one tensor to concat");const n=lz(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(r=>{if(r.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${r.dtype}. `)}),n.length===1)return Fu(n[0]);const s=n,o={axis:t};return Ee.runKernel(Xb,s,o)}const xo=Te({concat_:LRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BRe(e){const n={x:se(e,"x","sigmoid","float32")};return Ee.runKernel(Rg,n)}const pf=Te({sigmoid_:BRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zRe(e,t,n){const s=se(e,"x","slice","string_or_numeric");if(s.rank===0)throw new Error("Slicing scalar is not possible");const o={x:s},r={begin:t,size:n};return Ee.runKernel(Ry,o,r)}const Kn=Te({slice_:zRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VRe(e){const n={x:se(e,"x","tanh","float32")};return Ee.runKernel(Bg,n)}const AS=Te({tanh_:VRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WRe(e,t,n){const s=se(e,"x","batchToSpaceND"),o=t.reduce((a,l)=>a*l);J(s.rank>=1+t.length,()=>`input rank is ${s.rank} but should be > than blockShape.length ${t.length}`),J(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),J(s.shape[0]%o===0,()=>`input tensor batch is ${s.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${o}`);const r={x:s},i={blockShape:t,crops:n};return Ee.runKernel(qb,r,i)}const DS=Te({batchToSpaceND_:WRe});function HRe(e){let t;return e.rank===0||e.rank===1?t=Ne(e,[1,1,1,e.size]):e.rank===2?t=Ne(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=Ne(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function URe(e,t,n,s,o,r){r==null&&(r=.001);const i=se(e,"x","batchNorm"),a=se(t,"mean","batchNorm"),l=se(n,"variance","batchNorm");let u;o!=null&&(u=se(o,"scale","batchNorm"));let c;s!=null&&(c=se(s,"offset","batchNorm")),J(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),J(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),J(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:HRe(i),scale:u,offset:c,mean:a,variance:l},h={varianceEpsilon:r},p=Ee.runKernel(ry,f,h);return Ne(p,i.shape)}const Ky=Te({batchNorm_:URe});function jRe(e,t,n,s,o,r){const i=se(e,"x","batchNorm"),a=se(t,"mean","batchNorm"),l=se(n,"variance","batchNorm");let u;o!=null&&(u=se(o,"scale","batchNorm"));let c;return s!=null&&(c=se(s,"offset","batchNorm")),J(i.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${i.rank}.`),J(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),J(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),u!=null&&J(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&J(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`),Ky(i,a,l,c,u,r)}const GRe=Te({batchNorm2d_:jRe});function KRe(e,t,n,s,o,r){const i=se(e,"x","batchNorm"),a=se(t,"mean","batchNorm"),l=se(n,"variance","batchNorm");let u;o!=null&&(u=se(o,"scale","batchNorm"));let c;return s!=null&&(c=se(s,"offset","batchNorm")),J(i.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${i.rank}.`),J(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),J(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),u!=null&&J(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&J(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`),Ky(i,a,l,c,u,r)}const qRe=Te({batchNorm3d_:KRe});function YRe(e,t,n,s,o,r){const i=se(e,"x","batchNorm"),a=se(t,"mean","batchNorm"),l=se(n,"variance","batchNorm");let u;o!=null&&(u=se(o,"scale","batchNorm"));let c;return s!=null&&(c=se(s,"offset","batchNorm")),J(i.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${i.rank}.`),J(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),J(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),u!=null&&J(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&J(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`),Ky(i,a,l,c,u,r)}const XRe=Te({batchNorm4d_:YRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZRe(e,t,n){const s=se(e,"x","bincount"),o=se(t,"weights","bincount");J(s.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${s.dtype}`),J(n>=0,()=>`size must be non-negative, but got ${n}.`),J(o.size===s.size||o.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${s.shape}, weights shape: ${o.shape}.`);const r={x:s,weights:o},i={size:n};return Ee.runKernel(Rk,r,i)}const JRe=Te({bincount_:ZRe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QRe(e,t){let n=se(e,"broadcastTo","x");const s=n.shape;if(t.some(u=>!(u>0)||u%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const u=n.shape.slice();for(;u.length<t.length;)u.unshift(1);n=Ne(n,u)}const o=n.shape,r=Array.from(t);for(let u=t.length-1;u>=0;u--)if(o[u]===t[u])r[u]=1;else if(n.shape[u]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${t}].`);if(r.map((u,c)=>u>1?c:-1).filter(u=>u>=0).length===0)return Fu(n);const a={x:n},l={reps:r};return Ee.runKernel(zg,a,l)}const o0=Te({broadcastTo_:QRe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eMe(e){const n={x:se(e,"x","ceil","float32")};return Ee.runKernel(tg,n)}const tMe=Te({ceil_:eMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nMe(e,t,n){const s=se(e,"x","clipByValue");J(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`);const o={x:s},r={clipValueMin:t,clipValueMax:n};return Ee.runKernel(ng,o,r)}const Sr=Te({clipByValue_:nMe});function sMe(e){return xo(e,0)}const oMe=Te({concat1d_:sMe});function rMe(e,t){return xo(e,t)}const iMe=Te({concat2d_:rMe});function aMe(e,t){return xo(e,t)}const lMe=Te({concat3d_:aMe});function uMe(e,t){return xo(e,t)}const cMe=Te({concat4d_:uMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dMe(e,t,n,s,o="NHWC",r=[1,1],i){const a=se(e,"x","conv2d","float32"),l=se(t,"filter","conv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=Ne(a,[1,a.shape[0],a.shape[1],a.shape[2]])),J(u.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),J(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Ho("conv2d",s,i);const d=o==="NHWC"?u.shape[3]:u.shape[1];J(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),J(Eo(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`);const f={x:u,filter:l},h={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i},p=Ee.runKernel(Zb,f,h);return c?Ne(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Xu=Te({conv2d_:dMe});function fMe(e,t,n,s,o="NWC",r=1,i){const a=se(e,"x","conv1d"),l=se(t,"filter","conv1d");let u=a,c=!1;a.rank===2&&(c=!0,u=Ne(a,[1,a.shape[0],a.shape[1]])),J(u.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),J(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Ho("conv1d",s,i),J(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),J(Eo(n,r),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${r}'`),J(o==="NWC",()=>`Error in conv1d: got dataFormat of ${o} but only NWC is currently supported.`);const d=Ne(l,[1,l.shape[0],l.shape[1],l.shape[2]]),f=Ne(u,[u.shape[0],1,u.shape[1],u.shape[2]]),m=Xu(f,d,[1,n],s,"NHWC",[1,r],i);return c?Ne(m,[m.shape[2],m.shape[3]]):Ne(m,[m.shape[0],m.shape[2],m.shape[3]])}const Az=Te({conv1d_:fMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hMe(e,t,n,s,o,r="NHWC",i){J(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let a=e,l=t,u=!1;t.rank===3&&(u=!0,l=Ne(t,[1,t.shape[0],t.shape[1],t.shape[2]]),a=[1,e[0],e[1],e[2]]),J(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),J(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),J(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const c=r==="NHWC"?a[3]:a[1],d=r==="NHWC"?l.shape[3]:l.shape[1];J(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),J(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Ho("conv2dDerInput",o,i);const f={dy:l,filter:n},h={strides:s,pad:o,dataFormat:r,dimRoundingMode:i,inputShape:a},p=Ee.runKernel(Jb,f,h);return u?Ne(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const RS=Te({conv2DBackpropInput_:hMe});function pMe(e,t,n,s,o,r){const i=se(e,"x","conv2dTranspose"),a=se(t,"filter","conv2dTranspose");return RS(n,i,a,s,o,"NHWC",r)}const Dz=Te({conv2dTranspose_:pMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gMe(e,t,n,s,o="NDHWC",r=[1,1,1]){const i=se(e,"x","conv3d"),a=se(t,"filter","conv3d");let l=i,u=!1;i.rank===4&&(u=!0,l=Ne(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),J(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),J(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),J(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),J(Eo(n,r),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),J(o==="NDHWC",()=>`Error in conv3d: got dataFormat of ${o} but only NDHWC is currently supported.`);const c={x:l,filter:a},d={strides:n,pad:s,dataFormat:o,dilations:r},f=Ee.runKernel(Qb,c,d);return u?Ne(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const mMe=Te({conv3d_:gMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vMe(e,t,n,s,o){J(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let r=e,i=t,a=!1;t.rank===4&&(a=!0,i=Ne(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),r=[1,e[0],e[1],e[2],e[3]]);const l=r[4],u=i.shape[4];J(r.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${r.length}.`),J(i.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${i.rank}`),J(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),J(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),J(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);const c={dy:i,filter:n},d={pad:o,strides:s,inputShape:r},f=Ee.runKernel(Pk,c,d);return a?Ne(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Rz=Te({conv3DBackpropInput_:vMe});function bMe(e,t,n,s,o){const r=se(e,"x","conv3dTranspose"),i=se(t,"filter","conv3dTranspose");return Rz(n,r,i,s,o)}const yMe=Te({conv3dTranspose_:bMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wMe(e){const n={x:se(e,"x","cos","float32")};return Ee.runKernel(sg,n)}const MS=Te({cos_:wMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Me(e){const n={x:se(e,"x","cosh","float32")};return Ee.runKernel(og,n)}const Mz=Te({cosh_:$Me});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CMe(e,t=0,n=!1,s=!1){const r={x:se(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:s};return Ee.runKernel(ey,r,i)}const Oz=Te({cumsum_:CMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xMe(e,t,n="NHWC"){const s=se(e,"x","depthToSpace","float32"),o=n==="NHWC"?s.shape[1]:s.shape[2],r=n==="NHWC"?s.shape[2]:s.shape[3],i=n==="NHWC"?s.shape[3]:s.shape[1];J(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),J(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t}  for depthToSpace with input shape
    ${s.shape}`),J(r*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${t} for depthToSpace with input shape
        ${s.shape}`),J(i%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${i} for depthToSpace with input shape ${s.shape}`);const a={x:s},l={blockSize:t,dataFormat:n};return Ee.runKernel(Bk,a,l)}const kMe=Te({depthToSpace_:xMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SMe(e,t,n,s,o="NHWC",r=[1,1],i){const a=se(e,"x","depthwiseConv2d","float32"),l=se(t,"filter","depthwiseConv2d","float32");let u=a,c=!1;a.rank===3&&(c=!0,u=Ne(a,[1,a.shape[0],a.shape[1],a.shape[2]])),J(u.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),J(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`),J(u.shape[3]===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`),Ho("depthwiseConv2d",s,i);const d={x:u,filter:l},f={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i},h=Ee.runKernel(ty,d,f);return c?Ne(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const OS=Te({depthwiseConv2d_:SMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IMe(e,t,n,s,o=[1,1],r="NHWC"){const i=se(e,"x","dilation2d"),a=se(t,"filter","dilation2d");J(i.rank===3||i.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${i.rank}.`),J(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),J(r==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${r}`);let l=i,u=!1;i.rank===3&&(l=Ne(i,[1,i.shape[0],i.shape[1],i.shape[2]]),u=!0);const c={x:l,filter:a},d={strides:n,pad:s,dilations:o},f=Ee.runKernel(ny,c,d);return u?Ne(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const EMe=Te({dilation2d_:IMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TMe(e,t){let n=se(e,"a","equal","string_or_numeric"),s=se(t,"b","equal","string_or_numeric");[n,s]=Is(n,s),rn(n.shape,s.shape);const o={a:n,b:s};return Ee.runKernel(sy,o)}const ta=Te({equal_:TMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Me(e,t,n){const s=se(t,"a","where"),o=se(n,"b","where"),r=se(e,"condition","where","bool"),i=rn(rn(r.shape,s.shape),o.shape),a=o0(r,i),l=o0(s,i),u=o0(o,i),c={condition:a,t:l,e:u};return Ee.runKernel(Dy,c)}const or=Te({where_:_Me});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NMe(e){const n={x:se(e,"x","zerosLike")};return Ee.runKernel(Vy,n)}const In=Te({zerosLike_:NMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AMe(e,t){let n=se(e,"a","div"),s=se(t,"b","div");[n,s]=Is(n,s);const o=Rt(n,s),r=In(o),i=ta(s,r);return or(i,r,o)}const DMe=Te({divNoNan_:AMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RMe(e,t){const n=se(e,"t1","dot"),s=se(t,"t2","dot");J((n.rank===1||n.rank===2)&&(s.rank===1||s.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${s.rank}.`);const o=n.rank===1?n.size:n.shape[1],r=s.rank===1?s.size:s.shape[0];if(J(o===r,()=>`Error in dot: inner dimensions of inputs must match, but got ${o} and ${r}.`),n.rank===1&&s.rank===1){const i=Ne(n,[1,-1]),a=Ne(s,[-1,1]),l=Mn(i,a);return Ne(l,[])}else if(n.rank===1&&s.rank===2){const i=Ne(n,[1,-1]),a=Ne(s,[s.shape[0],s.shape[1]]),l=Mn(i,a);return Ne(l,[l.size])}else if(n.rank===2&&s.rank===1){const i=Ne(s,[-1,1]),a=Mn(n,i);return Ne(a,[a.size])}else{const i=Ne(s,[s.shape[0],s.shape[1]]);return Mn(n,i)}}const MMe=Te({dot_:RMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OMe(e){const n={x:se(e,"x","elu","float32")};return Ee.runKernel(ig,n)}const qy=Te({elu_:OMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FMe(e){let t=se(e,"x","erf");J(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=bt(t,"float32"));const n={x:t};return Ee.runKernel(ag,n)}const PMe=Te({erf_:FMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LMe(e){const n={x:se(e,"x","exp")};return Ee.runKernel(lg,n)}const Zr=Te({exp_:LMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BMe(e,t=0){const n=se(e,"x","expandDims","string_or_numeric");J(t<=n.rank,()=>"Axis must be <= rank of the tensor");const s={input:n},o={dim:t};return Ee.runKernel(oy,s,o)}const Pr=Te({expandDims_:BMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zMe(e){const n={x:se(e,"x","expm1")};return Ee.runKernel(ug,n)}const VMe=Te({expm1_:zMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WMe(e,t){const n=se(e,"x","tile","string_or_numeric");J(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);const s={x:n},o={reps:t};return Ee.runKernel(zg,s,o)}const vi=Te({tile_:WMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HMe(e,t,n,s="float32"){t==null&&(t=e);const o=vn([e,t],s),r=e<=t?e:t;for(let a=0;a<r;++a)o.set(1,a,a);const i=Ne(o.toTensor(),[e,t]);if(n==null)return i;if(n.length===1)return vi(Pr(i,0),[n[0],1,1]);if(n.length===2)return vi(Pr(Pr(i,0),0),[n[0],n[1],1,1]);if(n.length===3)return vi(Pr(Pr(Pr(i,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const Fz=Te({eye_:HMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yy(e,t,n){const s={shape:e,value:t,dtype:n};return Ee.runKernel(Uk,{},s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UMe(e){const n={x:se(e,"x","floor","float32")};return Ee.runKernel(cg,n)}const Xy=Te({floor_:UMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jMe(e,t,n=0,s=0){const o=se(e,"x","gather"),r=se(t,"indices","gather","int32"),i={x:o,indices:r},a={axis:n,batchDims:s};return Ee.runKernel(iy,i,a)}const FS=Te({gather_:jMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GMe(e,t){let n=se(e,"a","greater","string_or_numeric"),s=se(t,"b","greater","string_or_numeric");[n,s]=Is(n,s),rn(n.shape,s.shape);const o={a:n,b:s};return Ee.runKernel(ay,o)}const oi=Te({greater_:GMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KMe(e,t){let n=se(e,"a","greaterEqual","string_or_numeric"),s=se(t,"b","greaterEqual","string_or_numeric");[n,s]=Is(n,s),rn(n.shape,s.shape);const o={a:n,b:s};return Ee.runKernel(fg,o)}const gf=Te({greaterEqual_:KMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qMe(e){const n={input:se(e,"input","imag")};return Ee.runKernel(Kk,n)}const Pz=Te({imag_:qMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YMe(e){const n={x:se(e,"x","isFinite")};return Ee.runKernel(pg,n)}const XMe=Te({isFinite_:YMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZMe(e){const n={x:se(e,"x","isInf")};return Ee.runKernel(gg,n)}const JMe=Te({isInf_:ZMe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QMe(e){const n={x:se(e,"x","isNaN")};return Ee.runKernel(mg,n)}const eOe=Te({isNaN_:QMe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tOe(e,t=.2){const s={x:se(e,"x","leakyRelu")},o={alpha:t};return Ee.runKernel(ly,s,o)}const PS=Te({leakyRelu_:tOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nOe(e,t){let n=se(e,"a","less","string_or_numeric"),s=se(t,"b","less","string_or_numeric");[n,s]=Is(n,s),rn(n.shape,s.shape);const o={a:n,b:s};return Ee.runKernel(uy,o)}const Lz=Te({less_:nOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sOe(e,t){let n=se(e,"a","lessEqual","string_or_numeric"),s=se(t,"b","lessEqual","string_or_numeric");[n,s]=Is(n,s),rn(n.shape,s.shape);const o={a:n,b:s};return Ee.runKernel(cy,o)}const mf=Te({lessEqual_:sOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cct(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const s={start:e,stop:t,num:n};return Ee.runKernel(qk,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oOe(e,t=5,n=1,s=1,o=.5){const r=se(e,"x","localResponseNormalization");J(r.rank===4||r.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${r.rank}.`),J(Od(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let i=r,a=!1;r.rank===3&&(a=!0,i=Ne(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const l={x:i},u={depthRadius:t,bias:n,alpha:s,beta:o},c=Ee.runKernel(py,l,u);return a?Ne(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const rOe=Te({localResponseNormalization_:oOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iOe(e){const n={x:se(e,"x","log","float32")};return Ee.runKernel(vg,n)}const Jr=Te({log_:iOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aOe(e){const n={x:se(e,"x","log1p")};return Ee.runKernel(bg,n)}const LS=Te({log1p_:aOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lOe(e,t){J(YC(e),()=>"The f passed in variableGrads(f) must be a function"),J(t==null||Array.isArray(t)&&t.every(u=>u instanceof O0),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=t!=null;if(!n){t=[];for(const u in Ee.registeredVariables)t.push(Ee.registeredVariables[u])}const s=n?t.filter(u=>!u.trainable):null,o=t.length;t=t.filter(u=>u.trainable),J(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${o} variables is trainable.`);const r=!0,{value:i,grads:a}=Ee.gradients(e,t,null,r);J(a.some(u=>u!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),J(i.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${i.rank} tensor`);const l={};return t.forEach((u,c)=>{a[c]!=null&&(l[u.name]=a[c])}),s!=null&&s.forEach(u=>l[u.name]=null),{value:i,grads:l}}function Zu(e){return Ee.customGrad(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uOe(e){const n={x:se(e,"x","neg")};return Ee.runKernel($y,n)}const ws=Te({neg_:uOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cOe(e){const n={x:se(e,"x","softplus")};return Ee.runKernel(Mg,n)}const Ug=Te({softplus_:cOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dOe(e){const t=se(e,"x","logSigmoid");return Zu(s=>({value:ws(Ug(ws(s))),gradFunc:i=>Ce(i,pf(ws(s)))}))(t)}const fOe=Te({logSigmoid_:dOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hOe(e,t=null,n=!1){const o={x:se(e,"x","max")},r={reductionIndices:t,keepDims:n};return Ee.runKernel(gy,o,r)}const qi=Te({max_:hOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pOe(e,t){let n=se(e,"a","sub"),s=se(t,"b","sub");[n,s]=Is(n,s);const o={a:n,b:s};return Ee.runKernel(Pg,o)}const Nt=Te({sub_:pOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gOe(e,t=null,n=!1){let s=se(e,"x","sum");s.dtype==="bool"&&(s=bt(s,"int32"));const o={x:s},r={axis:t,keepDims:n};return Ee.runKernel(My,o,r)}const _t=Te({sum_:gOe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mOe(e,t=-1){const n=se(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Zu((o,r)=>{const a=qi(o,t,!0),l=Nt(o,a),u=Nt(bt(l,"float32"),Jr(_t(Zr(l),t,!0)));return r([u]),{value:u,gradFunc:(d,f)=>{const[h]=f,p=!0,g=Zr(h);return Nt(d,Ce(_t(d,t,p),g))}}})(n)}const Bz=Te({logSoftmax_:mOe});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BS(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function zz(e,t,n){const s=e.length+t.length,o=[];let r=0,i=0;for(let a=0;a<s;a++)n.indexOf(a)===-1?o.push(e[r++]):o.push(t[i++]);return o}function eo(e,t){const n=[],s=e.length;for(let r=0;r<s;r++)t.indexOf(r)===-1&&n.push(e[r]);const o=t.map(r=>e[r]);return[n,o]}function Es(e,t){const n=t.map(s=>1);return zz(e,n,t)}function ho(e,t,n){J(BS(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function Ts(e,t){if(BS(e,t))return null;const n=[];for(let s=0;s<t;++s)e.indexOf(s)===-1&&n.push(s);return e.forEach(s=>n.push(s)),n}function vf(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function Ms(e,t){const n=[];for(let s=t-e;s<t;++s)n.push(s);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vOe(e,t=null,n=!1){const s=se(e,"x","logSumExp"),o=fn(t,s.shape),r=qi(s,o,!0),i=Nt(s,r),a=Zr(i),l=_t(a,o),u=Jr(l),c=at(Ne(r,u.shape),u);if(n){const d=Es(c.shape,o);return Ne(c,d)}return c}const Vz=Te({logSumExp_:vOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bOe(e,t){const n=se(e,"a","logicalAnd","bool"),s=se(t,"b","logicalAnd","bool");rn(n.shape,s.shape);const o={a:n,b:s};return Ee.runKernel(dy,o)}const Da=Te({logicalAnd_:bOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yOe(e){const n={x:se(e,"x","logicalNot","bool")};return Ee.runKernel(fy,n)}const zS=Te({logicalNot_:yOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wOe(e,t){const n=se(e,"a","logicalOr","bool"),s=se(t,"b","logicalOr","bool");rn(n.shape,s.shape);const o={a:n,b:s};return Ee.runKernel(hy,o)}const Wz=Te({logicalOr_:wOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Oe(e,t){const n=se(e,"a","logicalXor","bool"),s=se(t,"b","logicalXor","bool");return rn(n.shape,s.shape),Da(Wz(e,t),zS(Da(e,t)))}const COe=Te({logicalXor_:$Oe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xOe(e,t,n,s,o){const r=se(e,"x","maxPool"),i=1;let a=r,l=!1;r.rank===3&&(l=!0,a=Ne(r,[1,r.shape[0],r.shape[1],r.shape[2]])),J(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),J(Eo(n,i),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Ho("maxPool",s,o);const u={x:a},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o},d=Ee.runKernel(my,u,c);return l?Ne(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const VS=Te({maxPool_:xOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kOe(e,t=[1,1,1],n,s,o,r="NDHWC"){const i=se(e,"x","maxPool3d");let a=i,l=!1;i.rank===4&&(l=!0,a=Ne(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),J(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),J(r==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${r}`),Ho("maxPool3d",s,o);const u={x:a},c={filterSize:t,strides:n,pad:s,dimRoundingMode:o,dataFormat:r},d=Ee.runKernel(vy,u,c);return l?Ne(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const SOe=Te({maxPool3d_:kOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IOe(e,t){let n=se(e,"a","maximum"),s=se(t,"b","maximum");[n,s]=Is(n,s),n.dtype==="bool"&&(n=bt(n,"int32"),s=bt(s,"int32")),rn(n.shape,s.shape);const o={a:n,b:s};return Ee.runKernel(yg,o)}const Pl=Te({maximum_:IOe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EOe(e,t=null,n=!1){const o={x:se(e,"x","mean")},r={axis:t,keepDims:n};return Ee.runKernel(by,o,r)}const Cs=Te({mean_:EOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ys(e,t="float32"){if(t==="complex64"){const s=Ys(e,"float32"),o=Ys(e,"float32");return cp(s,o)}const n=Io(qe(e),t);return Ee.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ll(e,t="float32"){if(t==="complex64"){const s=Ll(e,"float32"),o=Ys(e,"float32");return cp(s,o)}const n=AB(qe(e),t);return Ee.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TOe(e,t=null,n=!1){const o={x:se(e,"x","min")},r={axis:t,keepDims:n};return Ee.runKernel(yy,o,r)}const px=Te({min_:TOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Oe(e,t){let n=se(e,"a","minimum"),s=se(t,"b","minimum");[n,s]=Is(n,s),n.dtype==="bool"&&(n=bt(n,"int32"),s=bt(s,"int32")),rn(n.shape,s.shape);const o={a:n,b:s};return Ee.runKernel(wg,o)}const Zy=Te({minimum_:_Oe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NOe(e,t,n){J(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const s=se(e,"x","mirrorPad");if(s.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");J(t.length===s.rank,()=>`Padding doesn't match input. Must be ${s.rank}. Got ${t.length}.`);const o=n==="reflect"?1:0;for(let a=0;a<s.rank;a++)J(t[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),J(t[a][0]>=0&&t[a][0]<=s.shape[a]-o&&t[a][1]>=0&&t[a][1]<=s.shape[a]-o,()=>`Padding in dimension ${a} cannot be greater than or equal to ${s.shape[a]-o} or less than 0 for input of shape ${s.shape}`);const r={paddings:t,mode:n},i={x:s};return Ee.runKernel(wy,i,r)}const AOe=Te({mirrorPad_:NOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DOe(e,t){let n=se(e,"a","mod"),s=se(t,"b","mod");[n,s]=Is(n,s);const o={a:n,b:s};return Ee.runKernel($g,o)}const ROe=Te({mod_:DOe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MOe(e){const t=se(e,"x","square"),n={};return Ee.runKernel("Square",{x:t},n)}const ts=Te({square_:MOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OOe(e,t=null,n=!1){e=se(e,"x","moments");const s=fn(t,e.shape),o=Cs(e,s,n);let r=o.shape;n||(r=Es(o.shape,s));const i=ts(Nt(bt(e,"float32"),Ne(o,r))),a=Cs(i,s,n);return{mean:o,variance:a}}const WS=Te({moments_:OOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FOe(e,t){let n=se(e,"a","notEqual","string_or_numeric"),s=se(t,"b","notEqual","string_or_numeric");[n,s]=Is(n,s),rn(n.shape,s.shape);const o={a:n,b:s};return Ee.runKernel(Cy,o)}const fp=Te({notEqual_:FOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function POe(e){const n={x:se(e,"x","onesLike")};return Ee.runKernel(xy,n)}const Qr=Te({onesLike_:POe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LOe(e,t,n=0){const s=se(e,"x","pad");if(s.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const o={paddings:t,constantValue:n},r={x:s};return Ee.runKernel(Iy,r,o)}const HS=Te({pad_:LOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BOe(e,t,n){const s=se(e,"x","spaceToBatchND");J(s.rank>=1+t.length,()=>`input rank ${s.rank} should be > than [blockShape] ${t.length}`),J(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),J(s.shape.reduce((i,a,l)=>l>0&&l<=t.length?i&&(a+n[l-1][0]+n[l-1][1])%t[l-1]===0:i,!0),()=>`input spatial dimensions ${s.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);const o={x:s},r={blockShape:t,paddings:n};return Ee.runKernel(Oy,o,r)}const US=Te({spaceToBatchND_:BOe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zOe(e,t,n,s,o,r,i){o==null&&(o=[1,1]),r==null&&(r=1),s===0&&(s="valid");const a=se(e,"x","maxPool");let l=a,u=!1;a.rank===3&&(u=!0,l=Ne(a,[1,a.shape[0],a.shape[1],a.shape[2]])),J(Eo(r,o),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${r} and dilations '${o}'`);const c=si(l.shape,t,r,o,s),d=[c.dilationHeight,c.dilationWidth];let f;s==="same"?f=WOe([c.filterHeight,c.filterWidth],d):f=[[0,0],[0,0]];const h=d[0]===1&&d[1]===1,[p,g]=VOe([c.inHeight,c.inWidth],d,f),m=h?s:"valid",v=h?l:US(l,d,p),$=(n==="avg"?()=>NS(v,t,r,m,i):()=>VS(v,t,r,m,i))(),y=h?$:DS($,d,g);return u?Ne(y,[y.shape[1],y.shape[2],y.shape[3]]):y}function VOe(e,t,n){const s=n.map(c=>c[0]),o=n.map(c=>c[1]),r=e.concat(s,o),i=t.map((c,d)=>(c-r[d]%c)%c),a=o.map((c,d)=>c+i[d]),l=t.map((c,d)=>[s[d],a[d]]),u=t.map((c,d)=>[0,i[d]]);return[l,u]}function WOe(e,t){const s=e.map((i,a)=>i+(i-1)*(t[a]-1)).map(i=>i-1),o=s.map(i=>Math.floor(i/2)),r=s.map((i,a)=>i-o[a]);return s.map((i,a)=>[o[a],r[a]])}const HOe=Te({pool_:zOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UOe(e,t){let n=se(e,"base","pow"),s=se(t,"exp","pow");[n,s]=Is(n,s);const o={a:n,b:s};return Ee.runKernel(xg,o)}const zd=Te({pow_:UOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jOe(e,t){const n=se(e,"x","prelu"),s=se(t,"alpha","prelu"),o={x:n,alpha:s};return Ee.runKernel(Ey,o)}const jS=Te({prelu_:jOe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GOe(e,t=null,n=!1){let s=se(e,"x","prod");s.dtype==="bool"&&(s=bt(s,"int32"));const o={x:s},r={axis:t,keepDims:n};return Ee.runKernel(tS,o,r)}const KOe=Te({prod_:GOe});var Hz={exports:{}};(function(e){(function(t,n,s){function o(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&r(d,c),f.state=function(){return r(c,{})}),f}function a(){var l=4022871197,u=function(c){c=c.toString();for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.alea=i})(Fn,e,!1)})(Hz);var Uz={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor128=i})(Fn,e,!1)})(Uz);var jz={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorwow=i})(Fn,e,!1)})(jz);var Gz={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8&&(h[7]=-1),c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorshift7=i})(Fn,e,!1)})(Gz);var Kz={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,g,m,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),p=0,g=-32;g<b;++g)d&&(h^=d.charCodeAt((g+32)%d.length)),g===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,g>=0&&(m=m+1640531527|0,f=v[g&127]^=h+m,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,g=4*128;g>0;--g)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=m,c.X=v,c.i=p}u(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor4096=i})(Fn,e,!1)})(Kz);var qz={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.tychei=i})(Fn,e,!1)})(qz);var Yz={exports:{}};(function(e){(function(t,n){var s=this,o=256,r=6,i=52,a="random",l=n.pow(o,r),u=n.pow(2,i),c=u*2,d=o-1,f;function h(y,w,C){var x=[];w=w==!0?{entropy:!0}:w||{};var S=v(m(w.entropy?[y,$(t)]:y==null?b():y,3),x),T=new p(x),I=function(){for(var _=T.g(r),N=l,D=0;_<u;)_=(_+D)*o,N*=o,D=T.g(1);for(;_>=c;)_/=2,N/=2,D>>>=1;return(_+D)/N};return I.int32=function(){return T.g(4)|0},I.quick=function(){return T.g(4)/4294967296},I.double=I,v($(T.S),t),(w.pass||C||function(_,N,D,F){return F&&(F.S&&g(F,T),_.state=function(){return g(T,{})}),D?(n[a]=_,N):_})(I,S,"global"in w?w.global:this==n,w.state)}n["seed"+a]=h;function p(y){var w,C=y.length,x=this,S=0,T=x.i=x.j=0,I=x.S=[];for(C||(y=[C++]);S<o;)I[S]=S++;for(S=0;S<o;S++)I[S]=I[T=d&T+y[S%C]+(w=I[S])],I[T]=w;(x.g=function(_){for(var N,D=0,F=x.i,P=x.j,M=x.S;_--;)N=M[F=d&F+1],D=D*o+M[d&(M[F]=M[P=d&P+N])+(M[P]=N)];return x.i=F,x.j=P,D})(o)}function g(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function m(y,w){var C=[],x=typeof y,S;if(w&&x=="object")for(S in y)try{C.push(m(y[S],w-1))}catch{}return C.length?C:x=="string"?y:y+"\0"}function v(y,w){for(var C=y+"",x,S=0;S<C.length;)w[d&S]=d&(x^=w[d&S]*19)+C.charCodeAt(S++);return $(w)}function b(){try{var y;return f&&(y=f.randomBytes)?y=y(o):(y=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(y)),$(y)}catch{var w=s.navigator,C=w&&w.plugins;return[+new Date,s,C,s.screen,$(t)]}}function $(y){return String.fromCharCode.apply(0,y)}if(v(n.random(),t),e.exports){e.exports=h;try{f=require("crypto")}catch{}}})([],Math)})(Yz);var qOe=Hz.exports,YOe=Uz.exports,XOe=jz.exports,ZOe=Gz.exports,JOe=Kz.exports,QOe=qz.exports,vc=Yz.exports;vc.alea=qOe;vc.xor128=YOe;vc.xorwow=XOe;vc.xorshift7=ZOe;vc.xor4096=JOe;vc.tychei=QOe;var Xz=vc;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Zz{constructor(t,n,s,o,r){this.mean=t,this.stdDev=n,this.dtype=s,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const i=r||Math.random();this.random=Xz.alea(i.toString())}nextValue(){if(!isNaN(this.nextVal)){const o=this.nextVal;return this.nextVal=NaN,o}let t,n,s=!1;for(;!s;){let o,r,i;do o=2*this.random()-1,r=2*this.random()-1,i=o*o+r*r;while(i>=1||i===0);const a=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*o*a,n=this.mean+this.stdDev*r*a,(!this.truncated||this.isValidTruncated(t))&&(s=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class e3e{constructor(t=0,n=1,s,o){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=s,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=Xz.alea(o)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t3e(e,t=0,n=1,s,o){if(s!=null&&s==="bool")throw new Error(`Unsupported data type ${s}`);const r=new Zz(t,n,s,!1,o),i=vn(e,s);for(let a=0;a<i.values.length;a++)i.values[a]=r.nextValue();return i.toTensor()}const n3e=Te({randomNormal_:t3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s3e(e,t=0,n=1,s="float32",o){const r=vn(e,s),i=new e3e(t,n,null,o);for(let a=0;a<r.values.length;a++)r.values[a]=i.nextValue();return r.toTensor()}const Jy=Te({randomUniform_:s3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P0(e,t,n=1,s="float32"){if(n===0)throw new Error("Cannot have a step of zero");const o={start:e,stop:t,step:n,dtype:s};return Ee.runKernel(nS,{},o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o3e(e){const n={input:se(e,"input","real")};return Ee.runKernel(sS,n)}const gx=Te({real_:o3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r3e(e){const n={x:se(e,"x","reciprocal")};return Ee.runKernel(kg,n)}const i3e=Te({reciprocal_:r3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a3e(e){const n={x:se(e,"x","relu")};return Ee.runKernel(Sg,n)}const Ba=Te({relu_:a3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3e(e){const n={x:se(e,"x","relu6")};return Ee.runKernel(Ig,n)}const Jz=Te({relu6_:l3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u3e(e,t){const s={x:se(e,"x","reverse")},o={dims:t};return Ee.runKernel(Ay,s,o)}const Ju=Te({reverse_:u3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c3e(e){const n={x:se(e,"x","round")};return Ee.runKernel(Eg,n)}const Qz=Te({round_:c3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d3e(e){const n={x:se(e,"x","rsqrt","float32")};return Ee.runKernel(Tg,n)}const eV=Te({rsqrt_:d3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yt(e,t){if((Qi(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Qi(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Uy(e,[],[],t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f3e(e){const n={x:se(e,"x","selu")};return Ee.runKernel(_g,n)}const tV=Te({selu_:f3e});function h3e(e,t,n,s,o,r=[1,1],i="NHWC"){const a=se(e,"x","separableConv2d"),l=se(t,"depthwiseFilter","separableConv2d"),u=se(n,"pointwiseFilter","separableConv2d");let c=a,d=!1;if(a.rank===3&&(d=!0,c=Ne(a,[1,a.shape[0],a.shape[1],a.shape[2]])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");J(c.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),J(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),J(u.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),J(u.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),J(u.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);const f=l.shape[2],h=l.shape[3];J(u.shape[2]===f*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*h}, but got ${u.shape[2]}.`);const p=OS(c,l,s,o,i,r),m=Xu(p,u,1,"valid",i);return d?Ne(m,[m.shape[1],m.shape[2],m.shape[3]]):m}const nV=Te({separableConv2d_:h3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p3e(e){const n={x:se(e,"x","sign")};return Ee.runKernel(Dg,n)}const g3e=Te({sign_:p3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m3e(e){const n={x:se(e,"x","sin","float32")};return Ee.runKernel(Ng,n)}const sV=Te({sin_:m3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v3e(e){const n={x:se(e,"x","sinh")};return Ee.runKernel(Ag,n)}const oV=Te({sinh_:v3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b3e(e,t,n){const s=se(e,"x","slice1d");return J(s.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${s.rank} tensor`),Kn(s,[t],[n])}const GS=Te({slice1d_:b3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y3e(e,t,n){const s=se(e,"x","slice2d");return J(s.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${s.rank} tensor`),Kn(s,t,n)}const rV=Te({slice2d_:y3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w3e(e,t,n){const s=se(e,"x","slice3d");return J(s.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${s.rank} tensor`),Kn(s,t,n)}const KS=Te({slice3d_:w3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $3e(e,t,n){const s=se(e,"x","slice4d");return J(s.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${s.rank} tensor`),Kn(s,t,n)}const L0=Te({slice4d_:$3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C3e(e,t=-1){const n=se(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const s={logits:n},o={dim:t};return Ee.runKernel(Py,s,o)}const qS=Te({softmax_:C3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x3e(e){J(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);const t={input:e};return Ee.runKernel(Hk,t)}const iV=Te({fft_:x3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k3e(e){J(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);const t={input:e};return Ee.runKernel(Gk,t)}const mx=Te({ifft_:k3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S3e(e){const t=e.shape[e.shape.length-1],n=e.size/t;let s;if(t<=2){const o=Ne(e,[n,t]);s=mx(o)}else{const o=[n,2*(t-1)],r=Ne(gx(e),[n,t]),i=Ne(Pz(e),[n,t]),a=Ju(Kn(r,[0,1],[n,t-2]),1),l=Ce(Ju(Kn(i,[0,1],[n,t-2]),1),Yt(-1)),u=xo([r,a],1),c=xo([i,l],1),d=Ne(cp(u,c),[o[0],o[1]]);s=mx(d)}if(s=gx(s),e.rank===3&&e.shape[0]!==0){const o=s,r=e.shape[0];s=Ne(s,[r,s.shape[0]/r,s.shape[1]]),o.dispose()}return s}const I3e=Te({irfft_:S3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E3e(e,t,n=0){const o={x:se(e,"x","split")},r={numOrSizeSplits:t,axis:n};return Ee.runKernel(Fy,o,r)}const $r=Te({split_:E3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T3e(e,t){J(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1];const s=e.size/n;let o;if(t!=null&&t<n){const p=e.shape.map(m=>0),g=e.shape.map(m=>m);g[e.shape.length-1]=t,o=Kn(e,p,g),n=t}else if(t!=null&&t>n){const p=e.shape.map(g=>g);p[e.shape.length-1]=t-n,o=xo([e,Ys(p)],e.shape.length-1),n=t}else o=e;const r=In(o),i=Ne(cp(o,r),[s,n]),a=iV(i),l=Math.floor(n/2)+1,u=gx(a),c=Pz(a),d=$r(u,[l,n-l],u.shape.length-1),f=$r(c,[l,n-l],c.shape.length-1),h=o.shape.slice();return h[o.shape.length-1]=l,Ne(cp(d[0],f[0]),h)}const aV=Te({rfft_:T3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _3e(e){const n={x:se(e,"x","sqrt","float32")};return Ee.runKernel(Og,n)}const Ro=Te({sqrt_:_3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N3e(e,t){let n=se(e,"a","squaredDifference"),s=se(t,"b","squaredDifference");[n,s]=Is(n,s),rn(n.shape,s.shape);const o={a:n,b:s},r={};return Ee.runKernel(Fg,o,r)}const lV=Te({squaredDifference_:N3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A3e(e,t){const n=se(e,"x","squeeze");return Ne(n,Ml(n.shape,t).newShape)}const jg=Te({squeeze_:A3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D3e(e,t=0){const n=lz(e,"tensors","stack","string_or_numeric");J(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&J(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const s=n,o={axis:t};return Ee.runKernel(Sy,s,o)}const Qu=Te({stack_:D3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R3e(e,t=0){const s={x:se(e,"x","step")},o={alpha:t};return Ee.runKernel(Vg,s,o)}const Gg=Te({step_:R3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M3e(e,t,n,s,o=0,r=0,i=0,a=0,l=0){const c={x:se(e,"x","stridedSlice","string_or_numeric")},d={begin:t,end:n,strides:s,beginMask:o,endMask:r,ellipsisMask:i,newAxisMask:a,shrinkAxisMask:l};return Ee.runKernel(dS,c,d)}const O3e=Te({stridedSlice_:M3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F3e(e){const n={x:se(e,"x","tan","float32")};return Ee.runKernel(Lg,n)}const P3e=Te({tan_:F3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qo(e,t){EB(e);const n=Hy(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Uy(e,null,n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r0(e,t,n){if(EB(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const s=Hy(e,n);if(s.length!==2&&s.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(s.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Uy(e,t,s,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L3e(e,t=1,n=!0){const s=se(e,"x","topk");if(s.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const o=s.shape[s.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>o)throw new Error(`'k' passed to topk() must be <= the last dimension (${o}) but got ${t}`);const r={x:s},i={k:t,sorted:n},[a,l]=Ee.runKernel(gS,r,i);return{values:a,indices:l}}const B3e=Te({topk_:L3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z3e(e,t=0,n=1,s,o){if(s!=null&&s==="bool")throw new Error("Unsupported data type $ { dtype }");const r=new Zz(t,n,s,!0,o),i=vn(e,s);for(let a=0;a<i.values.length;a++)i.values[a]=r.nextValue();return i.toTensor()}const uV=Te({truncatedNormal_:z3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V3e(e,t=0){const n=se(e,"x","unique","string_or_numeric");J(n.rank>0,()=>"The input tensor must be at least 1D");const s={x:n},o={axis:t},[r,i]=Ee.runKernel(vS,s,o);return{values:r,indices:i}}const W3e=Te({unique_:V3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H3e(e,t,n){const s=se(e,"x","unsortedSegmentSum"),o=se(t,"segmentIds","unsortedSegmentSum","int32");J(Od(n),()=>"numSegments must be of dtype int");const r={x:s,segmentIds:o},i={numSegments:n};return Ee.runKernel(zy,r,i)}const cV=Te({unsortedSegmentSum_:H3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U3e(e,t=0){const n=se(e,"x","unstack","string_or_numeric");J(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);const s={value:n},o={axis:t};return Ee.runKernel(By,s,o)}const Vd=Te({unstack_:U3e});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j3e(e,t=!0,n,s){return Ee.makeVariable(e,t,n,s)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dV(e,t){const n=[];for(let r=0;r<t.length;r++)t[r]&&n.push(r);const s=vn(e,"int32"),o=vn([n.length,e.length],"int32");for(let r=0;r<n.length;r++){const i=s.indexToLoc(n[r]),a=r*e.length;o.values.set(i,a)}return o.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G3e(e,t="euclidean",n=null,s=!1){e=se(e,"x","norm");const o=fV(e,t,n);let r=o.shape;if(s){const i=fn(n,e.shape);r=Es(o.shape,i)}return Ne(o,r)}function fV(e,t,n=null){if(e.rank===0)return Ks(e);if(e.rank!==1&&n===null)return fV(Ne(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return _t(Ks(e),n);if(t===1/0)return qi(Ks(e),n);if(t===-1/0)return px(Ks(e),n);if(t==="euclidean"||t===2)return Ro(_t(zd(Ks(e),Yt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return qi(_t(Ks(e),n[0]),n[1]-1);if(t===1/0)return qi(_t(Ks(e),n[1]),n[0]);if(t===-1/0)return px(_t(Ks(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return Ro(_t(ts(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const YS=Te({norm_:G3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K3e(e,t){if(t==null)return e.shape.slice();if(Pn(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let s=0;s<e.shape.length;s++)t[s]==null&&e.shape[s]!=null?n.push(e.shape[s]):n.push(t[s]);return n}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q3e(e,t,n,s){const o=se(e,"x","dropout");if(J(o.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${o.dtype} tensor instead.`),J(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof Ns?o.clone():o;const r=K3e(o,n),i=1-t,a=Rt(Xy(at(Jy(r,0,1,"float32",s),i)),i);return Ce(o,a)}const Y3e=Te({dropout_:q3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X3e(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function hV(e,t,n){const s=1-e%2,o=new Float32Array(e);for(let r=0;r<e;++r){const i=2*Math.PI*r/(e+s-1);o[r]=t-n*Math.cos(i)}return Qo(o,"float32")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z3e(e,t,n,s,o,r="NHWC",i){let a=e;e.rank===3&&(a=Ne(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=Ne(t,[1,t.shape[0],t.shape[1],t.shape[2]])),J(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),J(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),J(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const u=r==="NHWC"?a.shape[3]:a.shape[1],c=r==="NHWC"?l.shape[3]:l.shape[1];J(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),J(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),Ho("conv2dDerFilter",o,i);const d={x:a,dy:l},f={strides:s,pad:o,dataFormat:r,dimRoundingMode:i,filterShape:n};return Ee.runKernel(Ok,d,f)}const XS=Te({conv2DBackpropFilter_:Z3e});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZS(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return Ce(e,Gg(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function JS(e,t){let n=t;const s=Us(e.shape,t.shape);return s.length>0&&(n=_t(n,s)),Ne(n,e.shape)}function QS(e,t,n,s){if(t==="linear")return e;if(t==="relu")return Ba(e);if(t==="elu")return qy(e);if(t==="relu6")return Jz(e);if(t==="prelu")return jS(e,n);if(t==="leakyrelu")return PS(e,s);if(t==="sigmoid")return pf(e);throw new Error(`Unknown fused activation ${t}.`)}const eI=(e,t)=>!(e>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J3e({x:e,filter:t,strides:n,pad:s,dataFormat:o="NHWC",dilations:r=[1,1],dimRoundingMode:i,bias:a,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",eI(Ee.state.gradientDepth,l)===!1){let w=Xu(e,t,n,s,o,r,i);return a!=null&&(w=at(w,a)),QS(w,l,u,c)}const d=se(e,"x","conv2d","float32"),f=se(t,"filter","conv2d","float32");let h=d,p=!1;d.rank===3&&(p=!0,h=Ne(d,[1,d.shape[0],d.shape[1],d.shape[2]])),J(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),J(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),Ho("fused conv2d",s,i),J(h.shape[3]===f.shape[2],()=>`Error in conv2d: depth of input (${h.shape[3]}) must match input depth for filter ${f.shape[2]}.`),J(Eo(n,r),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${r}'`),J(o==="NHWC",()=>`Error in conv2d: got dataFormat of ${o} but only NHWC is currently supported.`);const g=fo(h.shape,f.shape,n,r,s,i);let m;a!=null&&(m=se(a,"bias","fused conv2d"),[m]=Is(m,d),rn(g.outShape,m.shape));let v;u!=null&&(v=se(u,"prelu weights","fused conv2d"));const b=(w,C)=>{const[x,S,T,I]=C,_=ZS(w,T,l);J(Yu(r),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const N=RS(S.shape,_,x,n,s),D=XS(S,_,x.shape,n,s),F=[N,D];if(I!=null){const P=JS(I,_);F.push(P)}return F},$={x:h,filter:f,bias:m,preluActivationWeights:v},y={strides:n,pad:s,dataFormat:o,dilations:r,dimRoundingMode:i,activation:l,leakyreluAlpha:c};return a==null?Zu((C,x,S)=>{let T=Ee.runKernel(D0,$,y);return S([x,C,T]),p&&(T=Ne(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:b}})(h,f):Zu((C,x,S,T)=>{let I=Ee.runKernel(D0,$,y);return T([x,C,I,S]),p&&(I=Ne(I,[I.shape[1],I.shape[2],I.shape[3]])),{value:I,gradFunc:b}})(h,f,m)}const Q3e=Te({fusedConv2d_:J3e});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eFe(e,t,n,s,o,r=[1,1],i){let a=e;e.rank===3&&(a=Ne(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;l.rank===3&&(l=Ne(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:a,dy:l},c={strides:s,pad:o,dimRoundingMode:i,dilations:r,filterShape:n};return Ee.runKernel(zk,u,c)}const tFe=Te({depthwiseConv2dNativeBackpropFilter_:eFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nFe(e,t,n,s,o,r=[1,1],i){let a=t,l=!1;t.rank===3&&(l=!0,a=Ne(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:a,filter:n},c={strides:s,pad:o,dimRoundingMode:i,dilations:r,inputShape:e},d=Ee.runKernel(Vk,u,c);return l?Ne(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const sFe=Te({depthwiseConv2dNativeBackpropInput_:nFe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oFe({a:e,b:t,transposeA:n=!1,transposeB:s=!1,bias:o,activation:r="linear",preluActivationWeights:i,leakyreluAlpha:a}){if(eI(Ee.state.gradientDepth,r)===!1){let _=Mn(e,t,n,s);return o!=null&&(_=at(_,o)),QS(_,r,i,a)}let l=se(e,"a","fused matMul"),u=se(t,"b","fused matMul");[l,u]=Is(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=s?u.shape[u.rank-1]:u.shape[u.rank-2],f=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=s?u.shape[u.rank-2]:u.shape[u.rank-1],p=l.shape.slice(0,-2),g=u.shape.slice(0,-2),m=qe(p),v=qe(g);J(c===d,()=>`Error in fused matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${s} must match.`);const $=rn(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([f,h]),y=n?Ne(l,[m,c,f]):Ne(l,[m,f,c]),w=s?Ne(u,[v,h,d]):Ne(u,[v,d,h]);let C;o!=null&&(C=se(o,"bias","fused matMul"),[C]=Is(C,l),rn($,C.shape));let x;i!=null&&(x=se(i,"prelu weights","fused matMul"));const S=(_,N)=>{const[D,F,P,M]=N,B=ZS(Ne(_,P.shape),P,r);let j,X;if(!n&&!s?(j=Mn(B,F,!1,!0),X=Mn(D,B,!0,!1)):!n&&s?(j=Mn(B,F,!1,!1),X=Mn(B,D,!0,!1)):n&&!s?(j=Mn(F,B,!1,!0),X=Mn(D,B,!1,!1)):(j=Mn(F,B,!0,!0),X=Mn(B,D,!0,!0)),o!=null){const ae=JS(M,B);return[j,X,ae]}else return[j,X]},T={a:y,b:w,bias:C,preluActivationWeights:x},I={transposeA:n,transposeB:s,activation:r,leakyreluAlpha:a};return o==null?Zu((N,D,F)=>{const P=Ee.runKernel(A0,T,I);return F([N,D,P]),{value:Ne(P,$),gradFunc:S}})(y,w):Zu((N,D,F,P)=>{const M=Ee.runKernel(A0,T,I);return P([N,D,M,F]),{value:Ne(M,$),gradFunc:S}})(y,w,C)}const sR=Te({fusedMatMul_:oFe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rFe(e){return hV(e,.54,.46)}const iFe=Te({hammingWindow_:rFe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aFe(e){return hV(e,.5,.5)}const pV=Te({hannWindow_:aFe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lFe(e,t,n,s=!1,o=0){let r=0;const i=[];for(;r+t<=e.size;)i.push(Kn(e,r,t)),r+=n;if(s)for(;r<e.size;){const a=r+t-e.size,l=xo([Kn(e,r,t-a),Yy([a],o)]);i.push(l),r+=n}return i.length===0?r0([],[0,t]):Ne(xo(i),[i.length,t])}const gV=Te({frame_:lFe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uFe(e,t,n,s,o=pV){s==null&&(s=X3e(t));const r=gV(e,t,n),i=Ce(r,o(t));return aV(i,s)}const cFe=Te({stft_:uFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dFe(e,t,n,s,o="bilinear",r=0){const i=se(e,"image","cropAndResize"),a=se(t,"boxes","cropAndResize","float32"),l=se(n,"boxInd","cropAndResize","int32"),u=a.shape[0];J(i.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${i.rank}.`),J(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${a.shape}.`),J(l.rank===1&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${a.shape}.`),J(s.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${s.length}.`),J(s[0]>=1&&s[1]>=1,()=>`cropSize must be atleast [1,1], but was ${s}`),J(o==="bilinear"||o==="nearest",()=>`method must be bilinear or nearest, but was ${o}`);const c={image:i,boxes:a,boxInd:l},d={method:o,extrapolationValue:r,cropSize:s};return Ee.runKernel(Lk,c,d)}const fFe=Te({cropAndResize_:dFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hFe(e){const t=se(e,"image","flipLeftRight","float32");J(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const n={image:t};return Ee.runKernel(jk,n,{})}const pFe=Te({flipLeftRight_:hFe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gFe(e){const t=se(e,"image","grayscaleToRGB"),n=t.rank-1,s=t.shape[n];J(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),J(s===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${s}.`);const o=new Array(t.rank);return o.fill(1,0,n),o[n]=3,vi(t,o)}const mFe=Te({grayscaleToRGB_:gFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vFe(e,t,n=0,s=.5){const o=se(e,"image","rotateWithOffset","float32");J(o.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${o.rank}.`);const r={image:o},i={radians:t,fillValue:n,center:s};return Ee.runKernel(bS,r,i)}const bFe=Te({rotateWithOffset_:vFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bf(e,t,n,s,o,r){s==null&&(s=.5),o==null&&(o=Number.NEGATIVE_INFINITY),r==null&&(r=0);const i=e.shape[0];return n=Math.min(n,i),J(0<=s&&s<=1,()=>`iouThreshold must be in [0, 1], but was '${s}'`),J(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),J(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),J(t.rank===1,()=>"scores must be a 1D tensor"),J(t.shape[0]===i,()=>`scores has incompatible shape with boxes. Expected ${i}, but was ${t.shape[0]}`),J(0<=r&&r<=1,()=>`softNmsSigma must be in [0, 1], but was '${r}'`),{maxOutputSize:n,iouThreshold:s,scoreThreshold:o,softNmsSigma:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yFe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY){const r=se(e,"boxes","nonMaxSuppression","float32"),i=se(t,"scores","nonMaxSuppression","float32"),a=bf(r,i,n,s,o);n=a.maxOutputSize,s=a.iouThreshold,o=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:s,scoreThreshold:o};return Ee.runKernel(Jk,{boxes:r,scores:i},l)}const wFe=Te({nonMaxSuppression_:yFe});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Fe(e,t,n){const s=CFe(e,t,n),o=s<0?-(s+1):s;e.splice(o,0,t)}function CFe(e,t,n){return kFe(e,t,n||xFe)}function xFe(e,t){return e>t?1:e<t?-1:0}function kFe(e,t,n){let s=0,o=e.length,r=0,i=!1;for(;s<o;){r=s+(o-s>>>1);const a=n(t,e[r]);a>0?s=r+1:(o=r,i=!a)}return i?s:-s-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tI(e,t,n,s,o){return oI(e,t,n,s,o,0)}function nI(e,t,n,s,o,r){return oI(e,t,n,s,o,0,!1,r,!0)}function sI(e,t,n,s,o,r){return oI(e,t,n,s,o,r,!0)}function oI(e,t,n,s,o,r,i=!1,a=!1,l=!1){const u=[];for(let m=0;m<t.length;m++)t[m]>o&&u.push({score:t[m],boxIndex:m,suppressBeginIndex:0});u.sort(oR);const c=r>0?-.5/r:0,d=[],f=[];for(;d.length<n&&u.length>0;){const m=u.pop(),{score:v,boxIndex:b,suppressBeginIndex:$}=m;if(v<o)break;let y=!1;for(let w=d.length-1;w>=$;--w){const C=SFe(e,b,d[w]);if(C>=s){y=!0;break}if(m.score=m.score*IFe(s,c,C),m.score<=o)break}m.suppressBeginIndex=d.length,y||(m.score===v?(d.push(b),f.push(m.score)):m.score>o&&$Fe(u,m,oR))}const h=d.length,p=n-h;a&&p>0&&(d.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const g={selectedIndices:d};return i&&(g.selectedScores=f),l&&(g.validOutputs=h),g}function SFe(e,t,n){const s=e.subarray(t*4,t*4+4),o=e.subarray(n*4,n*4+4),r=Math.min(s[0],s[2]),i=Math.min(s[1],s[3]),a=Math.max(s[0],s[2]),l=Math.max(s[1],s[3]),u=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(a-r)*(l-i),p=(d-u)*(f-c);if(h<=0||p<=0)return 0;const g=Math.max(r,u),m=Math.max(i,c),v=Math.min(a,d),b=Math.min(l,f),$=Math.max(v-g,0)*Math.max(b-m,0);return $/(h+p-$)}function IFe(e,t,n){const s=Math.exp(t*n*n);return n<=e?s:0}function oR(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function EFe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY){const r=se(e,"boxes","nonMaxSuppressionAsync"),i=se(t,"scores","nonMaxSuppressionAsync"),a=bf(r,i,n,s,o);n=a.maxOutputSize,s=a.iouThreshold,o=a.scoreThreshold;const l=await Promise.all([r.data(),i.data()]),u=l[0],c=l[1],{selectedIndices:d}=tI(u,c,n,s,o);return r!==e&&r.dispose(),i!==t&&i.dispose(),Qo(d,"int32")}const TFe=EFe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Fe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=0){const i=se(e,"boxes","nonMaxSuppression"),a=se(t,"scores","nonMaxSuppression"),l=bf(i,a,n,s,o,r);n=l.maxOutputSize,s=l.iouThreshold,o=l.scoreThreshold,r=l.softNmsSigma;const u={boxes:i,scores:a},c={maxOutputSize:n,iouThreshold:s,scoreThreshold:o,softNmsSigma:r},d=Ee.runKernel(eS,u,c);return{selectedIndices:d[0],selectedScores:d[1]}}const NFe=Te({nonMaxSuppressionWithScore_:_Fe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function AFe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=0){const i=se(e,"boxes","nonMaxSuppressionAsync"),a=se(t,"scores","nonMaxSuppressionAsync"),l=bf(i,a,n,s,o,r);n=l.maxOutputSize,s=l.iouThreshold,o=l.scoreThreshold,r=l.softNmsSigma;const u=await Promise.all([i.data(),a.data()]),c=u[0],d=u[1],{selectedIndices:f,selectedScores:h}=sI(c,d,n,s,o,r);return i!==e&&i.dispose(),a!==t&&a.dispose(),{selectedIndices:Qo(f,"int32"),selectedScores:Qo(h)}}const DFe=AFe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RFe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=!1){const i=se(e,"boxes","nonMaxSuppression"),a=se(t,"scores","nonMaxSuppression"),l=bf(i,a,n,s,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,f={boxes:i,scores:a},h={maxOutputSize:u,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:r},p=Ee.runKernel(Qk,f,h);return{selectedIndices:p[0],validOutputs:p[1]}}const MFe=Te({nonMaxSuppressionPadded_:RFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function OFe(e,t,n,s=.5,o=Number.NEGATIVE_INFINITY,r=!1){const i=se(e,"boxes","nonMaxSuppressionAsync"),a=se(t,"scores","nonMaxSuppressionAsync"),l=bf(i,a,n,s,o,null),u=l.maxOutputSize,c=l.iouThreshold,d=l.scoreThreshold,[f,h]=await Promise.all([i.data(),a.data()]),{selectedIndices:p,validOutputs:g}=nI(f,h,u,c,d,r);return i!==e&&i.dispose(),a!==t&&a.dispose(),{selectedIndices:Qo(p,"int32"),validOutputs:Yt(g,"int32")}}const FFe=OFe;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PFe(e,t,n=!1,s=!1){const o=se(e,"images","resizeBilinear");J(o.rank===3||o.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${o.rank}.`),J(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),J(s===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let r=o,i=!1;o.rank===3&&(i=!0,r=Ne(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:r},l={alignCorners:n,halfPixelCenters:s,size:t},u=Ee.runKernel(Ny,a,l);return i?Ne(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const mV=Te({resizeBilinear_:PFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LFe(e,t,n=!1,s=!1){const o=se(e,"images","resizeNearestNeighbor");J(o.rank===3||o.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${o.rank}.`),J(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),J(o.dtype==="float32"||o.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),J(s===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let r=o,i=!1;o.rank===3&&(i=!0,r=Ne(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const a={images:r},l={alignCorners:n,halfPixelCenters:s,size:t},u=Ee.runKernel(_y,a,l);return i?Ne(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const vV=Te({resizeNearestNeighbor_:LFe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BFe(e,t="binary",n=!1,s=.5){const o=se(e,"image","threshold"),r=.2989,i=.587,a=.114,l=o.shape[0]*o.shape[1];let u=Ce(Qo([s]),255),c,d,f,h;if(J(o.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${o.rank}.`),J(o.shape[2]===3||o.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${o.shape[2]}.`),J(o.dtype==="int32"||o.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${o.dtype}.`),J(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),o.shape[2]===3){[c,d,f]=$r(o,[1,1,1],-1);const m=Ce(c,r),v=Ce(d,i),b=Ce(f,a);h=at(at(m,v),b)}else h=e;if(t==="otsu"){const m=JRe(bt(Qz(h),"int32"),mDe([]),256);u=zFe(m,l)}const p=n?mf(h,u):oi(h,u);return bt(Ce(p,255),"int32")}function zFe(e,t){let n=Qo([-1]),s=Qo([0]),o=Qo([0]),r,i,a,l,u,c;for(let d=0;d<e.size-1;d++){r=Kn(e,0,d+1),i=Kn(e,d+1),u=Rt(_t(r),t),c=Rt(_t(i),t);const f=_t(Ce(r,P0(0,r.size)));a=Rt(f,_t(r));const h=Yy(i.shape,r.size),p=at(P0(0,i.size),h),g=Ce(i,p);l=Rt(_t(g),_t(i));const m=Nt(a,l),v=Nt(a,l),b=Ce(u,c);o=Ce(Ce(b,m),v);const $=oi(o,s);s=or($,o,s),n=or($,Qo([d]),n)}return n}const VFe=Te({threshold_:BFe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WFe(e,t,n="nearest",s="constant",o=0,r){const i=se(e,"image","transform","float32"),a=se(t,"transforms","transform","float32");J(i.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${i.rank}.`),J(a.rank===2&&(a.shape[0]===i.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),J(r==null||r.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${r}.`);const l={image:i,transforms:a},u={interpolation:n,fillMode:s,fillValue:o,outputShape:r};return Ee.runKernel(mS,l,u)}const HFe=Te({transform_:WFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UFe(e,t,n){J(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),J(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`);const s=se(e,"a","bandPart");J(s.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${s.rank}.`);const o=s.shape,[r,i]=s.shape.slice(-2);if(!(t<=r))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${r}).`);if(!(n<=i))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${i}).`);t<0&&(t=r),n<0&&(n=i);const a=Ne(P0(0,r,1,"int32"),[-1,1]),l=P0(0,i,1,"int32"),u=Nt(a,l),c=Da(mf(u,Yt(+t,"int32")),gf(u,Yt(-n,"int32"))),d=Ys([r,i],s.dtype);return Ne(Qu(Vd(Ne(s,[-1,r,i])).map(f=>or(c,f,d))),o)}const jFe=Te({bandPart_:UFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GFe(e){let t;if(Array.isArray(e)){t=!1,J(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const o=e[0].shape[0];for(let r=1;r<e.length;++r)J(e[r].shape[0]===o,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[r].shape[0]} vs. ${o})`)}else t=!0,e=$r(e,e.shape[0],0).map(o=>jg(o,[0]));J(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const n=[],s=e;for(let o=0;o<e.length;++o)n.push(Ee.tidy(()=>{let r=s[o];if(o>0)for(let i=0;i<o;++i){const a=Ce(_t(Ce(n[i],r)),n[i]);r=Nt(r,a)}return Rt(r,YS(r,"euclidean"))}));return t?Qu(n,0):n}const KFe=Te({gramSchmidt_:GFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qFe(e,t=!1){if(J(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return rR(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((l,u)=>l*u),s=Vd(Ne(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],r=[];s.forEach(l=>{const[u,c]=rR(l,t);o.push(u),r.push(c)});const i=Ne(Qu(o,0),e.shape),a=Ne(Qu(r,0),e.shape);return[i,a]}}function rR(e,t=!1){return Ee.tidy(()=>{J(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const n=e.shape[0],s=e.shape[1];let o=Fz(n),r=Fu(e);const i=r0([[1]],[1,1]);let a=Fu(i);const l=n>=s?s:n;for(let u=0;u<l;++u){const c=r,d=a,f=o;[a,r,o]=Ee.tidy(()=>{const h=Kn(r,[u,u],[n-u,1]),p=YS(h),g=Kn(r,[u,u],[1,1]),m=or(oi(g,0),r0([[-1]]),r0([[1]])),v=Nt(g,Ce(m,p)),b=Rt(h,v);b.shape[0]===1?a=Fu(i):a=xo([i,Kn(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const $=ws(Rt(Mn(m,v),p)),y=Kn(r,[u,0],[n-u,s]),w=Ce($,a),C=Rn(a);if(u===0)r=Nt(y,Mn(w,Mn(C,y)));else{const T=Nt(y,Mn(w,Mn(C,y)));r=xo([Kn(r,[0,0],[u,s]),T],0)}const x=Rn(w),S=Kn(o,[0,u],[n,o.shape[1]-u]);if(u===0)o=Nt(S,Mn(Mn(S,a),x));else{const T=Nt(S,Mn(Mn(S,a),x));o=xo([Kn(o,[0,0],[n,u]),T],1)}return[a,r,o]}),gn([c,d,f])}return!t&&n>s&&(o=Kn(o,[0,0],[n,s]),r=Kn(r,[0,0],[s,s])),[o,r]})}const YFe=Te({qr_:qFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var zo;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(zo||(zo={}));function XFe(e,t,n=zo.SUM_BY_NONZERO_WEIGHTS){const s=se(e,"losses","computeWeightedLoss");let o=null;t!=null&&(o=se(t,"weights","computeWeightedLoss"));const r=o==null?s:Ce(s,o);if(n===zo.NONE)return r;if(n===zo.SUM)return _t(r);if(n===zo.MEAN){if(o==null)return Cs(r);{const i=s.size/o.size,a=Rt(_t(r),_t(o));return i>1?Rt(a,Yt(i)):a}}if(n===zo.SUM_BY_NONZERO_WEIGHTS){if(o==null)return Rt(_t(r),Yt(s.size));{const i=Ce(o,Ll(s.shape)),a=bt(_t(fp(i,Yt(0))),"float32");return Rt(_t(r),a)}}throw Error(`Unknown reduction: ${n}`)}const Bl=Te({computeWeightedLoss_:XFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZFe(e,t,n,s=zo.SUM_BY_NONZERO_WEIGHTS){const o=se(e,"labels","absoluteDifference"),r=se(t,"predictions","absoluteDifference");let i=null;n!=null&&(i=se(n,"weights","absoluteDifference")),ni(o.shape,r.shape,"Error in absoluteDifference: ");const a=Ks(Nt(o,r));return Bl(a,i,s)}const xct=Te({absoluteDifference_:ZFe});function JFe(e,t,n,s,o=zo.SUM_BY_NONZERO_WEIGHTS){const r=se(e,"labels","cosineDistance"),i=se(t,"predictions","cosineDistance");let a=null;s!=null&&(a=se(s,"weights","cosineDistance")),ni(r.shape,i.shape,"Error in cosineDistance: ");const l=Yt(1),u=Nt(l,_t(Ce(r,i),n,!0));return Bl(u,a,o)}const kct=Te({cosineDistance_:JFe});function QFe(e,t,n,s=zo.SUM_BY_NONZERO_WEIGHTS){let o=se(e,"labels","hingeLoss");const r=se(t,"predictions","hingeLoss");let i=null;n!=null&&(i=se(n,"weights","hingeLoss")),ni(o.shape,r.shape,"Error in hingeLoss: ");const a=Yt(1);o=Nt(Ce(Yt(2),o),a);const l=Ba(Nt(a,Ce(o,r)));return Bl(l,i,s)}const Sct=Te({hingeLoss_:QFe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ePe(e,t,n,s=1,o=zo.SUM_BY_NONZERO_WEIGHTS){const r=se(e,"labels","huberLoss"),i=se(t,"predictions","huberLoss");let a=null;n!=null&&(a=se(n,"weights","huberLoss")),ni(r.shape,i.shape,"Error in huberLoss: ");const l=Yt(s),u=Ks(Nt(i,r)),c=Zy(u,l),d=Nt(u,c),f=at(Ce(Yt(.5),ts(c)),Ce(l,d));return Bl(f,a,o)}const Ict=Te({huberLoss_:ePe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tPe(e,t,n,s=1e-7,o=zo.SUM_BY_NONZERO_WEIGHTS){const r=se(e,"labels","logLoss"),i=se(t,"predictions","logLoss");let a=null;n!=null&&(a=se(n,"weights","logLoss")),ni(r.shape,i.shape,"Error in logLoss: ");const l=Yt(1),u=Yt(s),c=ws(Ce(r,Jr(at(i,u)))),d=Ce(Nt(l,r),Jr(at(Nt(l,i),u))),f=Nt(c,d);return Bl(f,a,o)}const Ect=Te({logLoss_:tPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nPe(e,t,n,s=zo.SUM_BY_NONZERO_WEIGHTS){const o=se(e,"labels","meanSquaredError"),r=se(t,"predictions","meanSquaredError");let i=null;n!=null&&(i=se(n,"weights","meanSquaredError")),ni(o.shape,r.shape,"Error in meanSquaredError: ");const a=lV(o,r);return Bl(a,i,s)}const Tct=Te({meanSquaredError_:nPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sPe(e,t){const n=se(e,"labels","sigmoidCrossEntropyWithLogits"),s=se(t,"logits","sigmoidCrossEntropyWithLogits");ni(n.shape,s.shape,"Error in sigmoidCrossEntropyWithLogits: ");const o=Ba(s),r=Ce(s,n),i=LS(Zr(ws(Ks(s))));return at(Nt(o,r),i)}function oPe(e,t,n,s=0,o=zo.SUM_BY_NONZERO_WEIGHTS){let r=se(e,"multiClassLabels","sigmoidCrossEntropy");const i=se(t,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=se(n,"weights","sigmoidCrossEntropy")),ni(r.shape,i.shape,"Error in sigmoidCrossEntropy: "),s>0){const u=Yt(s),c=Yt(1),d=Yt(.5);r=at(Ce(r,Nt(c,u)),Ce(d,u))}const l=sPe(r,i);return Bl(l,a,o)}const _ct=Te({sigmoidCrossEntropy_:oPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rPe(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Zu((o,r,i)=>{const l=Vz(r,[n],!0),u=Nt(bt(r,"float32"),l);i([o,u]);const c=ws(Ce(u,o));return{value:_t(c,[n]),gradFunc:(h,p)=>{const[g,m]=p,v=Es(h.shape,[n]);return[Ce(Ne(h,v),Nt(bt(g,"float32"),Zr(m))),Ce(Ne(h,v),Nt(Zr(m),bt(g,"float32")))]}}})(e,t)}function iPe(e,t,n,s=0,o=zo.SUM_BY_NONZERO_WEIGHTS){let r=se(e,"onehotLabels","softmaxCrossEntropy");const i=se(t,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=se(n,"weights","softmaxCrossEntropy")),ni(r.shape,i.shape,"Error in softmaxCrossEntropy: "),s>0){const u=Yt(s),c=Yt(1),d=Yt(r.shape[1]);r=at(Ce(r,Nt(c,u)),Rt(u,d))}const l=rPe(r,i);return Bl(l,a,o)}const Nct=Te({softmaxCrossEntropy_:iPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aPe(e,t,n,s){const o=se(e,"indices","sparseFillEmptyRows","int32"),r=se(t,"values","sparseFillEmptyRows"),i=se(n,"denseShape","sparseFillEmptyRows","int32"),a=se(s,"defaultValue","sparseFillEmptyRows",r.dtype);if(o.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${o.shape}`);if(r.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${r.shape}`);if(i.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${i.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:o,values:r,denseShape:i,defaultValue:a},u=Ee.runKernel(iS,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}const Act=Te({sparseFillEmptyRows_:aPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lPe(e,t,n){const s=se(e,"inputIndices","sparseReshape","int32"),o=se(t,"inputShape","sparseReshape","int32"),r=se(n,"newShape","sparseReshape","int32");if(s.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${s.shape}`);if(o.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${o.shape}`);if(r.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${r.shape}`);const i={inputIndices:s,inputShape:o,newShape:r},a=Ee.runKernel(aS,i);return{outputIndices:a[0],outputShape:a[1]}}const Dct=Te({sparseReshape_:lPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uPe(e,t,n){const s=se(e,"data","sparseSegmentMean"),o=se(t,"indices","sparseSegmentMean","int32"),r=se(n,"segmentIds","sparseSegmentMean","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${o.shape}`);if(r.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${r.shape}`);const i={data:s,indices:o,segmentIds:r};return Ee.runKernel(lS,i)}const Rct=Te({sparseSegmentMean_:uPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cPe(e,t,n){const s=se(e,"data","sparseSegmentSum"),o=se(t,"indices","sparseSegmentSum","int32"),r=se(n,"segmentIds","sparseSegmentSum","int32");if(s.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${o.shape}`);if(r.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${r.shape}`);const i={data:s,indices:o,segmentIds:r};return Ee.runKernel(uS,i)}const Mct=Te({sparseSegmentSum_:cPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dPe(e,t,n,s,o,r,i,a){const l=se(e,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=se(t,"dataSplits","stringNGrams");if(u.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:s,leftPad:o,rightPad:r,padWidth:i,preserveShortSequences:a},d={data:l,dataSplits:u},f=Ee.runKernel(fS,d,c);return{nGrams:f[0],nGramsSplits:f[1]}}const Oct=Te({stringNGrams_:dPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fPe(e,t,n=!0){const s=se(e,"input","stringSplit","string"),o=se(t,"delimiter","stringSplit","string");if(s.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${s.shape}`);if(o.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${o.shape}`);const r={skipEmpty:n},i={input:s,delimiter:o},a=Ee.runKernel(hS,i,r);return{indices:a[0],values:a[1],shape:a[2]}}const Fct=Te({stringSplit_:fPe});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hPe(e,t){const n=se(e,"input","stringToHashBucketFast","string"),s={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const o={input:n};return Ee.runKernel(pS,o,s)}const Pct=Te({stringToHashBucketFast_:hPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lct={hammingWindow:iFe,hannWindow:pV,frame:gV,stft:cFe},Jm={flipLeftRight:pFe,grayscaleToRGB:mFe,resizeNearestNeighbor:vV,resizeBilinear:mV,rotateWithOffset:bFe,cropAndResize:fFe,nonMaxSuppression:wFe,nonMaxSuppressionAsync:TFe,nonMaxSuppressionWithScore:NFe,nonMaxSuppressionWithScoreAsync:DFe,nonMaxSuppressionPadded:MFe,nonMaxSuppressionPaddedAsync:FFe,threshold:VFe,transform:HFe},pPe={bandPart:jFe,gramSchmidt:KFe,qr:YFe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zl extends hf{minimize(t,n=!1,s){const{value:o,grads:r}=this.computeGradients(t,s);if(s!=null){const i=s.map(a=>({name:a.name,tensor:r[a.name]}));this.applyGradients(i)}else this.applyGradients(r);return gn(r),n?o:(o.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return lOe(t,n)}dispose(){this.iterations_!=null&&gn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Yt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(zl,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rI extends zl{constructor(t,n,s=null){super();this.learningRate=t,this.rho=n,this.epsilon=s,this.accumulatedGrads=[],this.accumulatedUpdates=[],s==null&&(this.epsilon=Ee.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=Ee.registeredVariables[s],i=!1;this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${s}/accum_grad`,variable:Be(()=>In(r).variable(i))}),this.accumulatedUpdates[o]==null&&(this.accumulatedUpdates[o]={originalName:`${s}/accum_var`,variable:Be(()=>In(r).variable(i))});const a=Array.isArray(t)?t[o].tensor:t[s];if(a==null)return;const l=this.accumulatedGrads[o].variable,u=this.accumulatedUpdates[o].variable;Be(()=>{const c=at(Ce(l,this.rho),Ce(ts(a),1-this.rho)),d=Ce(Rt(Ro(at(u,this.epsilon)),Ro(at(l,this.epsilon))),a),f=at(Ce(u,this.rho),Ce(ts(d),1-this.rho));l.assign(c),u.assign(f);const h=at(Ce(d,-this.learningRate),r);r.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(gn(this.accumulatedGrads.map(t=>t.variable)),gn(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=t.length/2,s=!1;this.accumulatedGrads=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedUpdates=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}}rI.className="Adadelta";nt(rI);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iI extends zl{constructor(t,n=.1){super();this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=Ee.registeredVariables[s];this.accumulatedGrads[o]==null&&(this.accumulatedGrads[o]={originalName:`${s}/accumulator`,variable:Be(()=>Yy(r.shape,this.initialAccumulatorValue).variable(!1))});const i=Array.isArray(t)?t[o].tensor:t[s];if(i==null)return;const a=this.accumulatedGrads[o].variable;Be(()=>{const l=at(a,ts(i));a.assign(l);const u=at(Ce(Rt(i,Ro(at(l,Ee.backend.epsilon()))),-this.learningRate),r);r.assign(u)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&gn(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulatedGrads=t.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}}iI.className="Adagrad";nt(iI);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aI extends zl{constructor(t,n,s,o=null){super();this.learningRate=t,this.beta1=n,this.beta2=s,this.epsilon=o,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Be(()=>{this.accBeta1=Yt(n).variable(),this.accBeta2=Yt(s).variable()}),o==null&&(this.epsilon=Ee.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);Be(()=>{const s=Nt(1,this.accBeta1),o=Nt(1,this.accBeta2);n.forEach((r,i)=>{const a=Ee.registeredVariables[r],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${r}/m`,variable:Be(()=>In(a).variable(l))}),this.accumulatedSecondMoment[i]==null&&(this.accumulatedSecondMoment[i]={originalName:`${r}/v`,variable:Be(()=>In(a).variable(l))});const u=Array.isArray(t)?t[i].tensor:t[r];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedSecondMoment[i].variable,f=at(Ce(c,this.beta1),Ce(u,1-this.beta1)),h=at(Ce(d,this.beta2),Ce(ts(u),1-this.beta2)),p=Rt(f,s),g=Rt(h,o);c.assign(f),d.assign(h);const m=at(Ce(Rt(p,at(Ro(g),this.epsilon)),-this.learningRate),a);a.assign(m)}),this.accBeta1.assign(Ce(this.accBeta1,this.beta1)),this.accBeta2.assign(Ce(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&gn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&gn(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t),Be(()=>{this.accBeta1.assign(zd(this.beta1,this.iterations_+1)),this.accBeta2.assign(zd(this.beta2,this.iterations_+1))});const n=t.length/2,s=!1;this.accumulatedFirstMoment=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}}aI.className="Adam";nt(aI);/**
* @license
* Copyright 2018 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*/class lI extends zl{constructor(t,n,s,o=null,r=0){super();this.learningRate=t,this.beta1=n,this.beta2=s,this.epsilon=o,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Be(()=>{this.iteration=Yt(0).variable(),this.accBeta1=Yt(n).variable()}),o==null&&(this.epsilon=Ee.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);Be(()=>{const s=Nt(1,this.accBeta1),o=Rt(-this.learningRate,at(Ce(this.iteration,this.decay),1));n.forEach((r,i)=>{const a=Ee.registeredVariables[r],l=!1;this.accumulatedFirstMoment[i]==null&&(this.accumulatedFirstMoment[i]={originalName:`${r}/m`,variable:In(a).variable(l)}),this.accumulatedWeightedInfNorm[i]==null&&(this.accumulatedWeightedInfNorm[i]={originalName:`${r}/v`,variable:In(a).variable(l)});const u=Array.isArray(t)?t[i].tensor:t[r];if(u==null)return;const c=this.accumulatedFirstMoment[i].variable,d=this.accumulatedWeightedInfNorm[i].variable,f=at(Ce(c,this.beta1),Ce(u,1-this.beta1)),h=Ce(d,this.beta2),p=Ks(u),g=Pl(h,p);c.assign(f),d.assign(g);const m=at(Ce(Rt(o,s),Rt(f,at(g,this.epsilon))),a);a.assign(m)}),this.iteration.assign(at(this.iteration,1)),this.accBeta1.assign(Ce(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&gn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&gn(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}lI.className="Adamax";nt(lI);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Qy extends zl{constructor(t){super();this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=Array.isArray(t)?t[o].tensor:t[s];if(r==null)return;const i=Ee.registeredVariables[s];Be(()=>{const a=at(Ce(this.c,r),i);i.assign(a)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=ea(Yt(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}}Qy.className="SGD";nt(Qy);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uI extends Qy{constructor(t,n,s=!1){super(t);this.learningRate=t,this.momentum=n,this.useNesterov=s,this.accumulations=[],this.m=Yt(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=Ee.registeredVariables[s];this.accumulations[o]==null&&(this.accumulations[o]={originalName:`${s}/momentum`,variable:Be(()=>In(r).variable(!1))});const i=this.accumulations[o].variable,a=Array.isArray(t)?t[o].tensor:t[s];a!=null&&Be(()=>{let l;const u=at(Ce(this.m,i),a);this.useNesterov?l=at(Ce(this.c,at(a,Ce(u,this.m))),r):l=at(Ce(this.c,u),r),i.assign(u),r.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&gn(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulations=t.map(s=>({originalName:s.name,variable:s.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}}uI.className="Momentum";nt(uI);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cI extends zl{constructor(t,n=.9,s=0,o=null,r=!1){super();if(this.learningRate=t,this.decay=n,this.momentum=s,this.epsilon=o,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,o==null&&(this.epsilon=Ee.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(s=>s.name):Object.keys(t)).forEach((s,o)=>{const r=Ee.registeredVariables[s],i=!1;this.accumulatedMeanSquares[o]==null&&(this.accumulatedMeanSquares[o]={originalName:`${s}/rms`,variable:Be(()=>In(r).variable(i))}),this.accumulatedMoments[o]==null&&(this.accumulatedMoments[o]={originalName:`${s}/momentum`,variable:Be(()=>In(r).variable(i))}),this.accumulatedMeanGrads[o]==null&&this.centered&&(this.accumulatedMeanGrads[o]={originalName:`${s}/mg`,variable:Be(()=>In(r).variable(i))});const a=Array.isArray(t)?t[o].tensor:t[s];if(a==null)return;const l=this.accumulatedMeanSquares[o].variable,u=this.accumulatedMoments[o].variable;Be(()=>{const c=at(Ce(l,this.decay),Ce(ts(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[o].variable,f=at(Ce(d,this.decay),Ce(a,1-this.decay)),h=Rt(Ce(a,this.learningRate),Ro(Nt(c,at(ts(f),this.epsilon)))),p=at(Ce(u,this.momentum),h);l.assign(c),d.assign(f),u.assign(p);const g=Nt(r,p);r.assign(g)}else{const d=at(Ce(l,this.decay),Ce(ts(a),1-this.decay)),f=at(Ce(u,this.momentum),Rt(Ce(a,this.learningRate),Ro(at(d,this.epsilon))));l.assign(d),u.assign(f);const h=Nt(r,f);r.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&gn(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&gn(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&gn(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=this.centered?t.length/3:t.length/2,s=!1;this.accumulatedMeanSquares=t.slice(0,n).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.accumulatedMoments=t.slice(n,n*2).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(o=>({originalName:o.name,variable:o.tensor.variable(s)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}cI.className="RMSProp";nt(cI);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tu{static sgd(t){return new Qy(t)}static momentum(t,n,s=!1){return new uI(t,n,s)}static rmsprop(t,n=.9,s=0,o=null,r=!1){return new cI(t,n,s,o,r)}static adam(t=.001,n=.9,s=.999,o=null){return new aI(t,n,s,o)}static adadelta(t=.001,n=.95,s=null){return new rI(t,n,s)}static adamax(t=.002,n=.9,s=.999,o=null,r=0){return new lI(t,n,s,o,r)}static adagrad(t,n=.1){return new iI(t,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uc={sgd:tu.sgd,momentum:tu.momentum,adadelta:tu.adadelta,adagrad:tu.adagrad,rmsprop:tu.rmsprop,adamax:tu.adamax,adam:tu.adam};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gPe=(()=>typeof requestAnimationFrame!="undefined"?requestAnimationFrame:typeof setImmediate!="undefined"?setImmediate:e=>e())();function mPe(){return new Promise(e=>gPe(()=>e()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dI(e,t){const n=e[0].length;e.forEach((o,r)=>{J(o.length===n,()=>`Error in concat${n}D: rank of tensors[${r}] must be the same as the rank of the rest (${n})`)}),J(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const s=e[0];e.forEach((o,r)=>{for(let i=0;i<n;i++)J(i===t||o[i]===s[i],()=>`Error in concat${n}D: Shape of tensors[${r}] (${o}) does not match the shape of the rest (${s}) along the non-concatenated axis ${r}.`)})}function Yi(e,t){const n=e[0].slice();for(let s=1;s<e.length;s++)n[t]+=e[s][t];return n}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fI=30;function e1(e){return e<=fI?e:XC(e,Math.floor(Math.sqrt(e)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hI(e,t,n){const s=n*(typeof e=="number"?e:e[0]),o=t*(typeof e=="number"?e:e[1]);return[s,o]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kg(e,t,n,s=!0){let o=[];if(s)o=o.concat(t.slice(0)),o.push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);const r=t.length;for(let i=0;i<r;++i)o=o.concat([e[i+1]/t[i],t[i]]);o=o.concat(e.slice(r+1))}return o}function qg(e,t,n=!0){const s=[];if(n){s.push(t);for(let o=t+1;o<e;++o)o<=2*t?(s.push(o),s.push(o-(t+1))):s.push(o)}else{const o=[],r=[];for(let i=1;i<e;++i)i>=t*2+1||i%2===1?r.push(i):o.push(i);s.push(...o),s.push(0),s.push(...r)}return s}function Yg(e,t,n,s=!0){const o=[];s?o.push(e[0]/n):o.push(e[0]*n);for(let r=1;r<e.length;++r)r<=t.length?s?o.push(t[r-1]*e[r]):o.push(e[r]/t[r-1]):o.push(e[r]);return o}function pI(e,t){const n=[0];for(let s=0;s<t;++s)n.push(e[s][0]);return n}function gI(e,t,n){const s=e.slice(0,1);for(let o=0;o<n;++o)s.push(e[o+1]-t[o][0]-t[o][1]);return s}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t1=1.7580993408473768,n1=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mI=.3275911,vI=.254829592,bI=-.284496736,yI=1.421413741,wI=-1.453152027,$I=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ra(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(e.length*2);for(let s=0;s<n.length;s+=2)n[s]=e[s/2],n[s+1]=t[s/2];return n}function bV(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let s=0;s<e.length;s+=2)t[s/2]=e[s],n[s/2]=e[s+1];return{real:t,imag:n}}function yV(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),s=new Float32Array(t);for(let o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],s[Math.floor(o/4)]=e[o+1];return{real:n,imag:s}}function wV(e){const t=Math.floor(e.length/4),n=new Float32Array(t),s=new Float32Array(t);for(let o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],s[Math.floor(o/4)]=e[o+1];return{real:n,imag:s}}function CI(e,t){const n=e[t*2],s=e[t*2+1];return{real:n,imag:s}}function $V(e,t,n,s){e[s*2]=t,e[s*2+1]=n}function CV(e,t){const n=new Float32Array(e/2),s=new Float32Array(e/2);for(let o=0;o<Math.ceil(e/2);o++){const r=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(r),s[o]=Math.sin(r)}return{real:n,imag:s}}function xV(e,t,n){const s=(n?2:-2)*Math.PI*(e/t),o=Math.cos(s),r=Math.sin(s);return{real:o,imag:r}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o$="->",vPe=/->/g,iR=",",aR="...";function xI(e,t){e=e.replace(/\s/g,"");const n=(e.length-e.replace(vPe,"").length)/o$.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${o$}").`);const[s,o]=e.split(o$);J(s.indexOf(aR)===-1,()=>`The ellipsis notation ("${aR}") is not supported yet.`);const r=s.split(iR),i=r.length;if(t!==i)throw new Error(`Expected ${i} input tensors, received ${t}`);if(i>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let f=0;f<o.length;++f){const h=o[f];if(!r.some(p=>p.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let f=0;f<s.length;++f){const h=s[f];a.indexOf(h)===-1&&h!==iR&&a.push(h)}const l=new Array(r.length);for(let f=0;f<i;++f){if(new Set(r[f].split("")).size!==r[f].length)throw new Error(`Found duplicate axes in input component ${r[f]}. Support for duplicate axes in input is not implemented yet.`);l[f]=[];for(let h=0;h<r[f].length;++h)l[f].push(a.indexOf(r[f][h]))}const u=a.length,c=o.length,d=[];for(let f=c;f<u;++f)d.push(f);return{allDims:a,summedDims:d,idDims:l}}function kI(e,t){let n=new Array(e);n.fill(-1);for(let o=0;o<t.length;++o)n[t[o]]=o;const s=[];for(let o=0;o<e;++o)n[o]===-1&&s.push(o);return n=n.filter(o=>o!==-1),{permutationIndices:n,expandDims:s}}function SI(e,t,n){const s=new Array(e);for(let o=0;o<n.length;++o){const r=n[o].shape;for(let i=0;i<t[o].length;++i)s[t[o][i]]===void 0?s[t[o][i]]=r[i]:J(s[t[o][i]]===r[i],()=>`Expected dimension ${s[t[o][i]]} at axis ${i} of input shaped ${JSON.stringify(r)}, but got dimension ${r[i]}`)}}function II(e,t){const n=e,s=[];let o=0;e.length===0&&n.push(-1),o=e.length+1;for(let i=0;i<o;++i)s.push([]);const r=[];for(let i=0;i<n.length;++i){const a=n[i],l=bPe(t,a);for(const u of l)r.indexOf(u)===-1&&(s[i].push(u),r.push(u))}return{path:n,steps:s}}function EI(e){return e.every((t,n)=>t===n)}function bPe(e,t){const n=[];for(let s=0;s<e.length;++s)(e[s].length===0||e[s].indexOf(t)!==-1||t===-1)&&n.push(s);return n}function TI(e,t,n=0){let s=[];if(typeof t=="number")J(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),s=new Array(t).fill(e.shape[n]/t);else{const o=t.reduce((i,a)=>(a===-1&&(i+=1),i),0);J(o<=1,()=>"There should be only one negative value in split array.");const r=t.indexOf(-1);if(r!==-1){const i=t.reduce((a,l)=>l>0?a+l:a);t[r]=e.shape[n]-i}J(e.shape[n]===t.reduce((i,a)=>i+a),()=>"The sum of sizes must match the size of the axis dimension."),s=t}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kV(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function SV(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function IV(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EV(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function TV(e,t){return`size ${e} must be non-negative, not ${t}`}function _V(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function NV(e,t){const n=qe(e),s=qe(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${s}. inputShape=${e} outputShape= ${t}`}function AV(e,t){const n=qe(e),s=qe(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${s}. inputShape=${e} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vx(){return"segment ids must be >= 0"}function DV(){return"segment ids are not increasing"}function RV(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function MV(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OV(e,t){let n=!1,s;for(e<=fI?(s=e,n=!0):s=XC(e,Math.floor(Math.sqrt(e)));!n;)s>t||s===e?n=!0:s=XC(e,s+1);return s}function FV(e,t,n){const s=[],o=e.length;for(let r=0;r<o;r++)r!==t?s.push(e[r]):s.push(n);return s}function _I(e,t,n,s){const o=t.shape.length,r=e.shape.length;if(s!==0&&(s<-o||s>o))throw new Error(`Expect batchDims in the range of [-${o}, ${o}], but got ${s}`);if(s<0&&(s+=o),s>r)throw new Error(`batchDims (${s}) must be less than rank(x) (
    ${r}).`);if(n<s)throw new Error(`batchDims (${s}) must be less than or equal to axis (${n}).`);for(let d=0;d<s;++d)if(e.shape[d]!==t.shape[d])throw new Error(`x.shape[${d}]: ${e.shape[d]} should be equal to indices.shape[${d}]: ${t.shape[d]}.`);const i=e.shape[n],a=[];let l=1,u=1,c=1;for(let d=0;d<s;++d)a.push(e.shape[d]),l*=e.shape[d];for(let d=s;d<n;d++)a.push(e.shape[d]),u*=e.shape[d];for(let d=s;d<o;d++)a.push(t.shape[d]);for(let d=n+1;d<r;d++)a.push(e.shape[d]),c*=e.shape[d];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:i,outputShape:a}}var yPe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",segOpComputeOptimalWindowSize:OV,computeOutShape:FV,collectGatherOpShapeInfo:_I});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ec(e){try{return e.map(t=>Pd(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function PV(e){return e.map(t=>fl(t))}var wPe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",slice_util:oRe,segment_util:yPe,fromUint8ToStringArray:ec,fromStringArrayToUint8:PV,upcastType:kr,axesAreInnerMostDims:BS,combineLocations:zz,computeOutAndReduceShapes:eo,expandShapeToKeepDim:Es,assertAxesAreInnerMostDims:ho,getAxesPermutation:Ts,getUndoAxesPermutation:vf,getInnerMostAxes:Ms,getBroadcastDims:Bd,getReductionAxes:Us,assertAndGetBroadcastShape:rn,assertParamsConsistent:dI,computeOutShape:Yi,computeDilation2DInfo:Hg,computePool2DInfo:si,computePool3DInfo:Pa,computeConv2DInfo:fo,computeConv3DInfo:Fl,computeDefaultPad:_S,tupleValuesAreOne:Yu,eitherStridesOrDilationsAreOne:Eo,convertConv2DDataFormat:La,checkPadOnDimRoundingMode:Ho,getFusedDyActivation:ZS,getFusedBiasGradient:JS,applyActivation:QS,shouldFuse:eI,PARALLELIZE_THRESHOLD:fI,computeOptimalWindowSize:e1,getImageCenter:hI,getReshaped:Kg,getPermuted:qg,getReshapedPermuted:Yg,getSliceBeginCoords:pI,getSliceSize:gI,prepareAndValidate:xS,validateUpdateShape:yz,validateInput:QDe,calculateShapes:Wg,SELU_SCALEALPHA:t1,SELU_SCALE:n1,ERF_P:mI,ERF_A1:vI,ERF_A2:bI,ERF_A3:yI,ERF_A4:wI,ERF_A5:$I,warn:vr,log:UAe,mergeRealAndImagArrays:Ra,splitRealAndImagArrays:bV,complexWithEvenIndex:yV,complexWithOddIndex:wV,getComplexWithIndex:CI,assignToTypedArray:$V,exponents:CV,exponent:xV,decodeEinsumEquation:xI,getEinsumPermutation:kI,checkEinsumDimSizes:SI,getEinsumComputePath:II,isIdentityPermutation:EI,prepareSplitSize:TI,getSparseFillEmptyRowsIndicesDenseShapeMismatch:kV,getSparseFillEmptyRowsNegativeIndexErrorMessage:SV,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:IV,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:EV,getSparseReshapeNegativeOutputDimErrorMessage:TV,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:_V,getSparseReshapeInputOutputMultipleErrorMessage:NV,getSparseReshapeInputOutputMismatchErrorMessage:AV,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:vx,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:DV,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:RV,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:MV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LV={kernelName:Wb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ce(e,Gg(bt(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $Pe={kernelName:Kp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=ts(bt(n,"float32")),o=Ro(Nt(Yt(1),s));return ws(Rt(e,o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CPe={kernelName:qp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=Ro(Nt(ts(bt(n,"float32")),1));return Rt(e,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xPe={kernelName:ff,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=rn(n.shape,s.shape);return{a:()=>{let a=e;const l=Us(n.shape,o);return l.length>0&&(a=_t(a,l)),Ne(a,n.shape)},b:()=>{let a=e;const l=Us(s.shape,o);return l.length>0&&(a=_t(a,l)),Ne(a,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kPe={kernelName:Tk,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach((s,o)=>{n[o]=()=>e.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SPe={kernelName:Hb,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>In(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IPe={kernelName:Ub,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>In(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPe={kernelName:Yp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Rt(e,Ro(Nt(Yt(1),ts(bt(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TPe={kernelName:Xp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=Ro(at(Yt(1),ts(bt(n,"float32"))));return Rt(e,s)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Pe={kernelName:Qp,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=rn(n.shape,s.shape);return{a:()=>{const a=at(ts(n),ts(s));let l=Ce(e,Rt(s,a));const u=Us(n.shape,o);return u.length>0&&(l=_t(l,u)),Ne(l,n.shape)},b:()=>{const a=at(ts(n),ts(s));let l=ws(Ce(e,Rt(n,a)));const u=Us(s.shape,o);return u.length>0&&(l=_t(l,u)),Ne(l,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NPe={kernelName:Zp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Rt(e,at(ts(bt(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const APe={kernelName:Jp,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Rt(e,Nt(Yt(1),ts(bt(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DPe(e,t,n,s,o,r){const i=se(e,"dy","avgPool3dGrad"),a=se(t,"input","avgPool3dGrad");let l=i,u=a,c=!1;a.rank===4&&(c=!0,l=Ne(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),u=Ne(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),J(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),J(u.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),Ho("avgPool3dGrad",o,r);const d={dy:l,input:u},f={filterSize:n,strides:s,pad:o,dimRoundingMode:r},h=Ee.runKernel(Dk,d,f);return c?Ne(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const RPe=Te({avgPool3dGrad_:DPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MPe={kernelName:Gb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{filterSize:o,strides:r,pad:i,dimRoundingMode:a}=n;return{x:()=>RPe(e,s,o,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OPe(e,t,n,s,o){const r=se(e,"dy","avgPoolGrad"),i=se(t,"input","avgPoolGrad");J(i.rank===r.rank,()=>`Rank of input (${i.rank}) does not match rank of dy (${r.rank})`);let a=i,l=r,u=!1;i.rank===3&&(u=!0,a=Ne(i,[1,i.shape[0],i.shape[1],i.shape[2]]),l=Ne(r,[1,r.shape[0],r.shape[1],r.shape[2]])),J(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),J(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const c={dy:l,input:a},d={filterSize:n,strides:s,pad:o},f=Ee.runKernel(Ak,c,d);return u?Ne(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const FPe=Te({avgPoolGrad_:OPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PPe={kernelName:jb,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{filterSize:o,strides:r,pad:i}=n;return{x:()=>FPe(e,s,o,r,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LPe={kernelName:Kb,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[s,o]=t,{transposeA:r,transposeB:i}=n;return!r&&!i?{a:()=>Mn(e,o,!1,!0),b:()=>Mn(s,e,!0,!1)}:!r&&i?{a:()=>Mn(e,o,!1,!1),b:()=>Mn(e,s,!0,!1)}:r&&!i?{a:()=>Mn(o,e,!1,!0),b:()=>Mn(s,e,!1,!1)}:{a:()=>Mn(o,e,!0,!0),b:()=>Mn(e,s,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BPe={kernelName:qb,gradFunc:(e,t,n)=>{const{blockShape:s,crops:o}=n;return{x:()=>US(e,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zPe={kernelName:VAe,gradFunc:(e,t,n)=>{const s=n,o=s.inputShape,r=s.shape,i=Array.from(r);for(let l=o.length-1;l>=0;l--)if(o[l]===r[l])i[l]=1;else if(o[l]!==1)throw new Error(`broadcastTo(): [${o}] cannot be broadcast to [${r}].`);const a=[];for(let l=0;l<i.length;l++)i[l]>1&&a.push(l);return{x:()=>_t(e,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VPe={kernelName:eg,gradFunc:e=>({x:()=>e.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WPe={kernelName:tg,gradFunc:e=>({x:()=>In(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HPe={kernelName:ng,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{clipValueMin:o,clipValueMax:r}=n;return{x:()=>or(Da(gf(s,o),mf(s,r)),e,In(e))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UPe={kernelName:Yb,inputsToSave:["x"],gradFunc:LV.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jPe={kernelName:Xb,saveAllInputs:!0,gradFunc:(e,t,n)=>{const s=t.map(l=>l.shape),{axis:o}=n,r=fn(o,t[0].shape)[0],i=s.map(l=>l[r]);return $r(e,i,r).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GPe={kernelName:Zb,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[s,o]=t,{dilations:r,strides:i,pad:a,dataFormat:l}=n;return J(Yu(r),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`),{x:()=>RS(s.shape,e,o,i,a,l),filter:()=>XS(s,e,o.shape,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KPe={kernelName:Jb,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[s,o]=t,{strides:r,pad:i,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Xu(e,o,r,i,a,1,l),filter:()=>XS(e,s,o.shape,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qPe(e,t,n,s,o){let r=e;e.rank===4&&(r=Ne(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let i=t;i.rank===4&&(i=Ne(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),J(r.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${r.shape}.`),J(i.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${i.shape}.`),J(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),J(r.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${r.shape[4]}) must match input depth in filter (${n[3]}.`),J(i.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${i.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:r,dy:i},l={strides:s,pad:o,filterShape:n};return Ee.runKernel(Fk,a,l)}const YPe=Te({conv3DBackpropFilter_:qPe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XPe={kernelName:Qb,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:s,strides:o,pad:r}=n;J(Yu(s),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${s}'`);const[i,a]=t;return{x:()=>Rz(i.shape,e,a,o,r),filter:()=>YPe(i,e,a.shape,o,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZPe={kernelName:sg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ce(ws(sV(bt(n,"float32"))),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JPe={kernelName:og,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ce(oV(bt(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QPe={kernelName:ey,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{axis:o,exclusive:r,reverse:i}=n;return{x:()=>{const a=Ts([o],s.rank);let l=Oz(e,o,r,!i);return a!=null&&(l=Rn(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eLe={kernelName:ty,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:s,strides:o,pad:r,dimRoundingMode:i}=n,a=s==null?[1,1]:s;J(Yu(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,u]=t;return J(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),J(u.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),J(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),J(Eo(o,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${o} and dilations '${a}'.`),Ho("depthwiseConv2d",r,i),{x:()=>sFe(l.shape,e,u,o,r,a,i),filter:()=>tFe(l,e,u.shape,o,r,a,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tLe={kernelName:ny,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[s,o]=t,r={x:s,filter:o,dy:e},i={x:s,filter:o,dy:e};return{x:()=>Ee.runKernel(ZC,r,n),filter:()=>Ee.runKernel(JC,i,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nLe={kernelName:ig,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,s={dy:e,y:n};return{x:()=>Ee.runKernel(Wk,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sLe={kernelName:ag,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,s=Ce(Zr(ws(ts(n))),2/Math.sqrt(Math.PI));return{x:()=>Ce(e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oLe={kernelName:lg,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ce(e,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rLe={kernelName:oy,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>Ne(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iLe={kernelName:ug,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ce(e,Zr(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aLe={kernelName:cg,gradFunc:e=>({x:()=>In(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lLe={kernelName:dg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=rn(n.shape,s.shape);return{a:()=>{const a=Rt(e,bt(s,"float32")),l=Us(n.shape,o);return l.length>0?Ne(_t(a,l),n.shape):a},b:()=>{let a=Ce(e,bt(n,"float32"));const l=Us(s.shape,o);l.length>0&&(a=Ne(_t(a,l),s.shape));const u=ts(s);return ws(Rt(a,bt(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uLe={kernelName:ry,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:s}=n,[o,r,i,a]=t,l=a==null?Yt(1):a,u=Us(r.shape,o.shape),c=[];if(r.rank===1){for(let y=0;y<o.shape.length-1;++y)c.push(o.shape[y]);c.push(1)}const d=Nt(o,r),f=Ce(e,l),h=eV(at(i,Yt(s))),p=Ce(Ce(Ce(h,h),h),Yt(-.5));return{x:()=>r.rank===1?Ne(Ce(Ce(e,vi(Ne(h,[1,1,1,r.shape[0]]),c)),l),o.shape):Ne(Ce(Ce(e,h),l),o.shape),mean:()=>{let y=Ce(Ce(h,Yt(-1)),f);return r.rank===1&&(y=_t(y,u)),Ne(y,r.shape)},variance:()=>{let y=Ce(Ce(p,d),f);return r.rank===1&&(y=_t(y,u)),Ne(y,r.shape)},scale:()=>{const y=Ce(d,h);let w=Ce(e,y);return r.rank===1&&(w=_t(w,u)),Ne(w,r.shape)},offset:()=>{let y=e;return r.rank===1&&(y=_t(y,u)),Ne(y,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cLe={kernelName:iy,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[s,o]=t,{axis:r}=n,i=fn(r,s.shape)[0];return{x:()=>{const l=s.shape,u=o.size,c=l.slice(0,i),d=c.length,f=l.slice(r,l.length).slice(1),h=f.length,p=lR(0,d),g=lR(d+1,d+1+h),m=uR([c,[u],f]),v=Ne(e,m),b=Ne(o,[u]),$=uR([[d],p,g]),y=Rn(v,$);let w=cV(y,b,s.shape[i]);const C=vf($);return w=Rn(w,C),w},indices:()=>o}}};function lR(e,t){const n=[];for(let s=e;s<t;++s)n.push(s);return n}function uR(e){const t=[];for(let n=0;n<e.length;++n)for(let s=0;s<e[n].length;++s)t.push(e[n][s]);return t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dLe={kernelName:fg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t;return{a:()=>In(n),b:()=>In(s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fLe={kernelName:hg,gradFunc:e=>({x:()=>bt(e,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hLe={kernelName:pg,gradFunc:e=>({x:()=>In(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pLe={kernelName:gg,gradFunc:e=>({x:()=>In(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gLe={kernelName:mg,gradFunc:e=>({x:()=>In(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mLe={kernelName:ly,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{alpha:o}=n,r=oi(s,0);return{x:()=>or(r,e,Ce(e,o))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vLe={kernelName:bg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Rt(e,at(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bLe={kernelName:vg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Rt(e,bt(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yLe={kernelName:WAe,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s]=t,{axis:o}=n;return{logits:()=>{const i=Zr(s);return Nt(e,Ce(_t(e,o,!0),i))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wLe(e,t,n,s=5,o=1,r=1,i=.5){const a={x:e,y:t,dy:n},l={depthRadius:s,bias:o,alpha:r,beta:i};return Ee.runKernel(Yk,a,l)}const $Le=Te({localResponseNormalizationBackprop_:wLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CLe={kernelName:py,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s,o]=t,{depthRadius:r,bias:i,alpha:a,beta:l}=n;return{x:()=>$Le(s,o,e,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BV(e,t,n,s){return t.rank<n.rank&&(t=Ne(t,Es(t.shape,s))),e.rank<n.rank&&(e=Ne(e,Es(e.shape,s))),{x:()=>Ce(e,bt(ta(n,t),e.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cR={kernelName:gy,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const s=n,{reductionIndices:o}=s,r=t[0],i=t[1],a=fn(o,r.shape),l=BV(e,i,r,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xLe={kernelName:yg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t;return{a:()=>Ce(e,bt(gf(n,s),"float32")),b:()=>Ce(e,bt(Lz(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kLe(e,t,n,s,o,r,i){const a=se(e,"dy","maxPool3dGrad"),l=se(t,"input","maxPool3dGrad"),u=se(n,"output","maxPool3dGrad");let c=a,d=l,f=u,h=!1;l.rank===4&&(h=!0,c=Ne(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=Ne(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),f=Ne(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),J(c.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),J(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),J(f.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${f.rank}.`),Ho("maxPool3dGrad",r,i);const p={dy:c,input:d,output:f},g={filterSize:s,strides:o,pad:r,dimRoundingMode:i},m=Ee.runKernel(Zk,p,g);return h?Ne(m,[m.shape[1],m.shape[2],m.shape[3],m.shape[4]]):m}const SLe=Te({maxPool3dGrad_:kLe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ILe={kernelName:vy,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s,o]=t,{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=n;return{x:()=>SLe(e,s,o,r,i,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ELe(e,t,n,s,o,r,i){const a=se(e,"dy","maxPoolGrad"),l=se(t,"input","maxPoolGrad"),u=se(n,"output","maxPoolGrad");J(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),J(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),J(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Ho("maxPoolGrad",r,i);const c={dy:a,input:l,output:u},d={filterSize:s,strides:o,pad:r,dimRoundingMode:i};return Ee.runKernel(Xk,c,d)}const TLe=Te({maxPoolGrad_:ELe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Le={kernelName:my,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s,o]=t,{filterSize:r,strides:i,pad:a}=n;return{x:()=>TLe(e,s,o,r,i,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NLe={kernelName:by,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{axis:o}=n,r=fn(o,s.shape),a=eo(s.shape,r)[1],l=qe(a);return{x:()=>{const c=s.shape.slice();r.forEach(h=>{c[h]=1});const d=Ne(e,c);return Rt(Ce(d,Ll(s.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ALe={kernelName:yy,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const s=n,{axis:o}=s,[r,i]=t,a=fn(o,r.shape),l=BV(e,i,r,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DLe={kernelName:wg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t;return{a:()=>Ce(e,bt(mf(n,s),"float32")),b:()=>Ce(e,bt(oi(n,s),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RLe={kernelName:wy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const s=t[0],{paddings:o}=n,r=o.map(i=>i[0]);return{x:()=>Kn(e,r,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MLe={kernelName:$g,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=rn(n.shape,s.shape);return{a:()=>{const a=Us(n.shape,o);return a.length>0?Ne(_t(e,a),n.shape):e},b:()=>{const a=Ce(e,ws(Xy(Rt(n,s)))),l=Us(s.shape,o);return l.length>0?Ne(_t(a,l),s.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OLe={kernelName:Cg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=rn(n.shape,s.shape);return{a:()=>{const a=Ce(e,bt(s,"float32")),l=Us(n.shape,o);return l.length>0?Ne(_t(a,l),n.shape):a},b:()=>{const a=Ce(e,bt(n,"float32")),l=Us(s.shape,o);return l.length>0?Ne(_t(a,l),s.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FLe={kernelName:$y,gradFunc:e=>({x:()=>ws(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PLe={kernelName:ky,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>Ys(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LLe={kernelName:xy,gradFunc:e=>({x:()=>In(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BLe={kernelName:Sy,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:s}=n;return Vd(e,s).map(r=>()=>r)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dR={kernelName:Iy,inputsToSave:["x"],gradFunc:(e,t,n)=>{const s=t[0],{paddings:o}=n,r=o.map(i=>i[0]);return{x:()=>Kn(e,r,s.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zLe={kernelName:xg,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,s,o]=t,r=n,i=s,a=rn(r.shape,i.shape);return{a:()=>{const c=bt(i,"float32");let d=Ce(e,Ce(c,zd(r,Nt(c,Yt(1)))));const f=Us(r.shape,a);return f.length>0&&(d=_t(d,f)),Ne(d,r.shape)},b:()=>{const c=oi(r,0),d=or(c,Jr(r),In(r));let f=Ce(e,Ce(o,d));const h=Us(i.shape,a);return h.length>0&&(f=_t(f,h)),Ne(f,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VLe={kernelName:Ey,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,s]=t,o=oi(n,0);return{x:()=>or(o,e,Ce(e,s)),alpha:()=>{let r=or(o,In(e),Ce(e,n));const i=Us(s.shape,e.shape);return i.length>0&&(r=_t(r,i)),Ne(r,s.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WLe={kernelName:rg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=rn(n.shape,s.shape);return{a:()=>{const a=Rt(e,bt(s,"float32")),l=Us(n.shape,o);return l.length>0?Ne(_t(a,l),n.shape):a},b:()=>{let a=Ce(e,bt(n,"float32"));const l=Us(s.shape,o);l.length>0&&(a=Ne(_t(a,l),s.shape));const u=ts(s);return ws(Rt(a,bt(u,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HLe={kernelName:kg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Rt(e,ws(ts(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ULe={kernelName:Ig,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,s=Ce(mf(n,6),Gg(n));return{x:()=>Ce(e,bt(s,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jLe={kernelName:Sg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ce(e,bt(Gg(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GLe={kernelName:Ty,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ne(e,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const KLe={kernelName:Ny,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[s]=t,o={dy:e,images:s};return{images:()=>Ee.runKernel(rS,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qLe={kernelName:_y,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[s]=t,o={dy:e,images:s};return{images:()=>Ee.runKernel(oS,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YLe={kernelName:Ay,gradFunc:(e,t,n)=>{const{dims:s}=n,o=fn(s,e.shape);return{x:()=>Ju(e,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XLe={kernelName:Eg,gradFunc:e=>({x:()=>In(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZLe={kernelName:Tg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ws(Rt(e,Ce(zd(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JLe={kernelName:Dy,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>bt(In(n),"float32"),t:()=>Ce(e,bt(n,e.dtype)),e:()=>Ce(e,bt(zS(n),e.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QLe={kernelName:_g,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const s=oi(n,Yt(0)),o=Yt(t1),r=Yt(n1),i=Ce(e,r),a=Ce(Ce(e,o),Zr(bt(n,"float32")));return or(s,i,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e4e={kernelName:Rg,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ce(e,Ce(n,Nt(Yt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t4e={kernelName:Dg,gradFunc:e=>({x:()=>In(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n4e={kernelName:Ng,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ce(MS(bt(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s4e={kernelName:Ag,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ce(Mz(bt(n,"float32")),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o4e={kernelName:Ry,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{begin:o,size:r}=n,i=s.shape,[a,l]=Gy(s,o,r),u=[];for(let c=0;c<e.rank;c++)u.push([a[c],i[c]-a[c]-l[c]]);return{x:()=>HS(e,u)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r4e={kernelName:Py,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[s]=t,{dim:o}=n,r=!0,i=Ce(e,s);return{logits:()=>Nt(i,Ce(_t(i,[o],r),s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i4e={kernelName:Mg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ce(e,pf(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fR={kernelName:Oy,gradFunc:(e,t,n)=>{const{blockShape:s,paddings:o}=n;return{x:()=>DS(e,s,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hR={kernelName:Fy,gradFunc:(e,t,n)=>{const{axis:s}=n;return{x:()=>xo(e,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a4e={kernelName:Og,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Rt(e,Ce(Ro(bt(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l4e={kernelName:cS,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ce(e,Ce(bt(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const u4e={kernelName:Fg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=Yt(2);return{a:()=>Ce(e,Ce(o,Nt(n,s))),b:()=>Ce(e,Ce(o,Nt(s,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const c4e={kernelName:Vg,gradFunc:e=>({x:()=>In(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d4e={kernelName:Pg,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,s]=t,o=rn(n.shape,s.shape);return{a:()=>{let a=e;const l=Us(n.shape,o);return l.length>0&&(a=_t(a,l)),Ne(a,n.shape)},b:()=>{let a=e;const l=Us(s.shape,o);return l.length>0&&(a=_t(a,l)),Ne(ws(a),s.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f4e={kernelName:My,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,o=s.shape.slice(),{axis:r}=n;fn(r,s.shape).forEach(u=>{o[u]=1});const a=Ne(e,o),l=Ce(a,Ll(s.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h4e={kernelName:Lg,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Rt(e,ts(MS(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p4e={kernelName:Bg,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>Ce(Nt(Yt(1),ts(n)),e)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g4e={kernelName:zg,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[s]=t,{reps:o}=n;return{x:()=>{let i=In(s);if(s.rank===1)for(let a=0;a<o[0];++a)i=at(i,Kn(e,[a*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)i=at(i,Kn(e,[a*s.shape[0],l*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)i=at(i,Kn(e,[a*s.shape[0],l*s.shape[1],u*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else if(s.rank===4)for(let a=0;a<o[0];++a)for(let l=0;l<o[1];++l)for(let u=0;u<o[2];++u)for(let c=0;c<o[3];++c)i=at(i,Kn(e,[a*s.shape[0],l*s.shape[1],u*s.shape[2],c*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${s.rank} tensors yet.`);return i}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m4e={kernelName:Ly,gradFunc:(e,t,n)=>{const s=n,{perm:o}=s,r=vf(o);return{x:()=>Rn(e,r)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const v4e={kernelName:By,gradFunc:(e,t,n)=>{const s=n,{axis:o}=s;return{value:()=>Qu(e,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b4e={kernelName:zy,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>y4e(e,n)}}};function y4e(e,t){const n=Pl(t,In(t)),s=FS(e,n);let o=gf(t,Yt(0,"int32"));const r=s.rank-o.rank;for(let a=0;a<r;++a)o=Pr(o,a+1);o=Da(o,Ll(s.shape,"bool"));const i=In(s);return or(o,s,i)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w4e={kernelName:Vy,gradFunc:e=>({x:()=>In(e)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $4e=[LV,$Pe,CPe,xPe,kPe,SPe,IPe,EPe,TPe,_Pe,NPe,APe,MPe,PPe,LPe,BPe,zPe,VPe,WPe,HPe,UPe,jPe,KPe,GPe,XPe,ZPe,JPe,QPe,eLe,tLe,WLe,nLe,sLe,oLe,rLe,iLe,lLe,aLe,uLe,cLe,dLe,fLe,hLe,pLe,gLe,mLe,vLe,bLe,yLe,CLe,cR,cR,xLe,ILe,_Le,NLe,ALe,DLe,RLe,MLe,OLe,FLe,PLe,LLe,BLe,dR,dR,zLe,VLe,HLe,ULe,jLe,GLe,KLe,qLe,YLe,XLe,ZLe,JLe,QLe,e4e,t4e,n4e,s4e,o4e,r4e,i4e,fR,fR,hR,hR,a4e,u4e,l4e,c4e,d4e,f4e,h4e,p4e,g4e,m4e,v4e,b4e,w4e];for(const e of $4e)jAe(e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.abs=function(){return this.throwIfDisposed(),Ks(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.acos=function(){return this.throwIfDisposed(),fRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.acosh=function(){return this.throwIfDisposed(),pRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.add=function(e){return this.throwIfDisposed(),at(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.all=function(e,t){return this.throwIfDisposed(),Nz(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.any=function(e,t){return this.throwIfDisposed(),fx(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.argMax=function(e){return this.throwIfDisposed(),dp(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.argMin=function(e){return this.throwIfDisposed(),yRe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.asScalar=function(){return this.throwIfDisposed(),J(this.size===1,()=>"The array must have only 1 element."),Ne(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.asType=function(e){return this.throwIfDisposed(),bt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.as1D=function(){return this.throwIfDisposed(),Ne(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.as2D=function(e,t){return this.throwIfDisposed(),Ne(this,[e,t])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),Ne(this,[e,t,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.as4D=function(e,t,n,s){return this.throwIfDisposed(),Ne(this,[e,t,n,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.as5D=function(e,t,n,s,o){return this.throwIfDisposed(),Ne(this,[e,t,n,s,o])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.asin=function(){return this.throwIfDisposed(),$Re(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.asinh=function(){return this.throwIfDisposed(),xRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.atan=function(){return this.throwIfDisposed(),SRe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.atan2=function(e){return this.throwIfDisposed(),ERe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.atanh=function(){return this.throwIfDisposed(),_Re(this)};je().prototype.avgPool=function(e,t,n,s){return this.throwIfDisposed(),NS(this,e,t,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),DS(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.batchNorm=function(e,t,n,s,o){return this.throwIfDisposed(),Ky(this,e,t,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.broadcastTo=function(e){return this.throwIfDisposed(),o0(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.cast=function(e){return this.throwIfDisposed(),bt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.ceil=function(){return this.throwIfDisposed(),tMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Sr(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof Ns&&(e=[e]),xo([this,...e],t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.conv1d=function(e,t,n,s,o,r){return this.throwIfDisposed(),Az(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.conv2dTranspose=function(e,t,n,s,o){return this.throwIfDisposed(),Dz(this,e,t,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.conv2d=function(e,t,n,s,o,r){return this.throwIfDisposed(),Xu(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.cos=function(){return this.throwIfDisposed(),MS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.cosh=function(){return this.throwIfDisposed(),Mz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Oz(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),kMe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.depthwiseConv2d=function(e,t,n,s,o,r){return this.throwIfDisposed(),OS(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.dilation2d=function(e,t,n,s,o){return this.throwIfDisposed(),EMe(this,e,t,n,s,o)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.divNoNan=function(e){return this.throwIfDisposed(),DMe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.div=function(e){return this.throwIfDisposed(),Rt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.dot=function(e){return this.throwIfDisposed(),MMe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.elu=function(){return this.throwIfDisposed(),qy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.equal=function(e){return this.throwIfDisposed(),ta(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.erf=function(){return this.throwIfDisposed(),PMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.exp=function(){return this.throwIfDisposed(),Zr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.expandDims=function(e){return this.throwIfDisposed(),Pr(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.expm1=function(){return this.throwIfDisposed(),VMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.fft=function(){return this.throwIfDisposed(),iV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.flatten=function(){return this.throwIfDisposed(),Ne(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.floor=function(){return this.throwIfDisposed(),Xy(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.floorDiv=function(e){return this.throwIfDisposed(),_z(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.gather=function(e,t){return this.throwIfDisposed(),FS(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.greaterEqual=function(e){return this.throwIfDisposed(),gf(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.greater=function(e){return this.throwIfDisposed(),oi(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.ifft=function(){return this.throwIfDisposed(),mx(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.irfft=function(){return this.throwIfDisposed(),I3e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.isFinite=function(){return this.throwIfDisposed(),XMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.isInf=function(){return this.throwIfDisposed(),JMe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.isNaN=function(){return this.throwIfDisposed(),eOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.leakyRelu=function(e){return this.throwIfDisposed(),PS(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.lessEqual=function(e){return this.throwIfDisposed(),mf(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.less=function(e){return this.throwIfDisposed(),Lz(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.localResponseNormalization=function(e,t,n,s){return this.throwIfDisposed(),rOe(this,e,t,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.logSigmoid=function(){return this.throwIfDisposed(),fOe(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Bz(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Vz(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.log=function(){return this.throwIfDisposed(),Jr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.log1p=function(){return this.throwIfDisposed(),LS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.logicalAnd=function(e){return this.throwIfDisposed(),Da(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.logicalNot=function(){return this.throwIfDisposed(),zS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.logicalOr=function(e){return this.throwIfDisposed(),Wz(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.logicalXor=function(e){return this.throwIfDisposed(),COe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Mn(this,e,t,n)};je().prototype.maxPool=function(e,t,n,s){return this.throwIfDisposed(),VS(this,e,t,n,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.max=function(e,t){return this.throwIfDisposed(),qi(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.maximum=function(e){return this.throwIfDisposed(),Pl(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.mean=function(e,t){return this.throwIfDisposed(),Cs(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.min=function(e,t){return this.throwIfDisposed(),px(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.minimum=function(e){return this.throwIfDisposed(),Zy(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),AOe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.mod=function(e){return this.throwIfDisposed(),ROe(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.mul=function(e){return this.throwIfDisposed(),Ce(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.neg=function(){return this.throwIfDisposed(),ws(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.norm=function(e,t,n){return this.throwIfDisposed(),YS(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.notEqual=function(e){return this.throwIfDisposed(),fp(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),bz(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.onesLike=function(){return this.throwIfDisposed(),Qr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.pad=function(e,t){return this.throwIfDisposed(),HS(this,e,t)};je().prototype.pool=function(e,t,n,s,o,r){return this.throwIfDisposed(),HOe(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.pow=function(e){return this.throwIfDisposed(),zd(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.prelu=function(e){return this.throwIfDisposed(),jS(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.prod=function(e,t){return this.throwIfDisposed(),KOe(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.reciprocal=function(){return this.throwIfDisposed(),i3e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.relu=function(){return this.throwIfDisposed(),Ba(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.relu6=function(){return this.throwIfDisposed(),Jz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.reshapeAs=function(e){return this.throwIfDisposed(),Ne(this,e.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.reshape=function(e){return this.throwIfDisposed(),Ne(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),mV(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),vV(this,e,t,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.reverse=function(e){return this.throwIfDisposed(),Ju(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.rfft=function(){return this.throwIfDisposed(),aV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.round=function(){return this.throwIfDisposed(),Qz(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.rsqrt=function(){return this.throwIfDisposed(),eV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.selu=function(){return this.throwIfDisposed(),tV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.separableConv2d=function(e,t,n,s,o,r){return this.throwIfDisposed(),nV(this,e,t,n,s,o,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.sigmoid=function(){return this.throwIfDisposed(),pf(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.sign=function(){return this.throwIfDisposed(),g3e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.sin=function(){return this.throwIfDisposed(),sV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.sinh=function(){return this.throwIfDisposed(),oV(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.slice=function(e,t){return this.throwIfDisposed(),Kn(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.softmax=function(e){return this.throwIfDisposed(),qS(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.softplus=function(){return this.throwIfDisposed(),Ug(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),US(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.split=function(e,t){return this.throwIfDisposed(),$r(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.sqrt=function(){return this.throwIfDisposed(),Ro(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.square=function(){return this.throwIfDisposed(),ts(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.squaredDifference=function(e){return this.throwIfDisposed(),lV(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.squeeze=function(e){return this.throwIfDisposed(),jg(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof Ns?[this,e]:[this,...e];return Qu(n,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.step=function(e){return this.throwIfDisposed(),Gg(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.stridedSlice=function(e,t,n,s,o,r,i,a){return this.throwIfDisposed(),O3e(this,e,t,n,s,o,r,i,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.sub=function(e){return this.throwIfDisposed(),Nt(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.sum=function(e,t){return this.throwIfDisposed(),_t(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.tan=function(){return this.throwIfDisposed(),P3e(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.tanh=function(){return this.throwIfDisposed(),AS(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.tile=function(e){return this.throwIfDisposed(),vi(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.toBool=function(){return this.throwIfDisposed(),bt(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.toFloat=function(){return this.throwIfDisposed(),bt(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.toInt=function(){return this.throwIfDisposed(),bt(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.topk=function(e,t){return this.throwIfDisposed(),B3e(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.transpose=function(e){return this.throwIfDisposed(),Rn(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.unique=function(e){return this.throwIfDisposed(),W3e(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),cV(this,e,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.unstack=function(e){return this.throwIfDisposed(),Vd(this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.where=function(e,t){return this.throwIfDisposed(),or(e,this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */je().prototype.zerosLike=function(){return this.throwIfDisposed(),In(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let r$;function zs(){return r$==null&&(r$=rRe().epsilon()),r$}function Ei(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Bi extends Error{constructor(t){super(t);Object.setPrototypeOf(this,Bi.prototype)}}class Ur extends Error{constructor(t){super(t);Object.setPrototypeOf(this,Ur.prototype)}}class Se extends Error{constructor(t){super(t);Object.setPrototypeOf(this,Se.prototype)}}class nn extends Error{constructor(t){super(t);Object.setPrototypeOf(this,nn.prototype)}}class NI extends Error{constructor(t){super(t);Object.setPrototypeOf(this,NI.prototype)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tc(e,t){if(Array.isArray(e)){let n=[];for(let s=0;s<t;s++)n=n.concat(e);return n}else{const n=new Array(t);return n.fill(e),n}}function zi(e,t){if(!e)throw new NI(t)}function pR(e,t){let n=0;for(const s of e)s===t&&n++;return n}function Bo(e){return e.length===1?e[0]:e}function is(e){return Array.isArray(e)?e:[e]}function ga(e){const n=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function yu(e){return e.length<=1||e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,(t,n)=>n.toUpperCase())}let Nr={};function AI(e){if(e==null)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function bx(e){if(!(e==null||typeof e!="object"))if(Array.isArray(e))e.forEach(t=>bx(t));else{const t=Object.keys(e);for(const n of t){const s=e[n];s!=null&&typeof s=="object"&&(!Array.isArray(s)&&s.type==="ndarray"&&typeof s.value=="number"?e[n]=s.value:bx(s))}}}function Xg(e,t={},n={},s="object",o=!1){if(typeof e=="string"){const r=e;let i;if(r in n)i=n[r];else if(r in Nr)i=Nr[r];else if(i=t[r],i==null)throw new Se(`Unknown ${s}: ${e}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}else{const r=e;if(r.className==null||r.config==null)throw new Se(`${s}: Improper config format: ${JSON.stringify(r)}.
'className' and 'config' must set.`);const i=r.className;let a,l;if(i in n?[a,l]=n[i]:i in Nr?[a,l]=Nr.className:i in t&&([a,l]=t[i]),a==null)throw new Se(`Unknown ${s}: ${i}. This may be due to one of the following reasons:
1. The ${s} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${s} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const u={};for(const h of Object.keys(Nr))u[h]=Nr[h];for(const h of Object.keys(n))u[h]=n[h];const c=r.config;c.customObjects=u;const d=Object.assign({},Nr);for(const h of Object.keys(n))Nr[h]=n[h];bx(r.config);const f=l(a,r.config,n,o);return Nr=Object.assign({},d),f}else{const u=Object.assign({},Nr);for(const d of Object.keys(n))Nr[d]=n[d];const c=new a(r.config);return Nr=Object.assign({},u),c}}}function C4e(e,t){return e<t?-1:e>t?1:0}function Qm(e,t){return-1*C4e(e,t)}function hl(e){if(e==null)return e;const t=[];for(const n of e)t.indexOf(n)===-1&&t.push(n);return t}function x4e(e){if(e==null)throw new Se(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function bc(e,t,n){if(n!=null&&e.indexOf(n)<0)throw new Se(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function DI(e,t,n=0,s=1/0){return zi(n>=0),zi(s>=n),Array.isArray(e)&&e.length>=n&&e.length<=s&&e.every(o=>typeof o===t)}function Xs(e,t){Array.isArray(e)?(J(e.length>0,()=>`${t} is unexpectedly an empty array.`),e.forEach((n,s)=>Xs(n,`element ${s+1} of ${t}`))):J(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${zV(e)}.`)}function zV(e){return e===null?"null":Array.isArray(e)?"["+e.map(t=>zV(t)).join(",")+"]":typeof e=="string"?`"${e}"`:`${e}`}function k4e(e,t,n){let s=n!=null?n():Lo(),o;return(...i)=>{const a=n!=null?n():Lo();return a-s<t||(s=a,o=e(...i)),o}}function VV(e){return e==="relu"?"relu":e==="linear"?"linear":e==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function RI(e,t){return Be(()=>Ro(_t(Ce(e,e),t,!0)))}class Zg extends hf{getConfig(){return{}}}class WV extends Zg{constructor(t){super();this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Be(()=>{const n=RI(t,this.axis),s=Sr(n,0,this.maxValue);return Ce(t,Rt(s,at(zs(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}WV.className="MaxNorm";nt(WV);class HV extends Zg{constructor(t){super();this.defaultAxis=0,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Be(()=>Rt(t,at(zs(),RI(t,this.axis))))}getConfig(){return{axis:this.axis}}}HV.className="UnitNorm";nt(HV);class UV extends Zg{apply(t){return Ba(t)}}UV.className="NonNeg";nt(UV);class jV extends Zg{constructor(t){super();this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=t.minValue!=null?t.minValue:this.defaultMinValue,this.maxValue=t.maxValue!=null?t.maxValue:this.defaultMaxValue,this.rate=t.rate!=null?t.rate:this.defaultRate,this.axis=t.axis!=null?t.axis:this.defaultAxis}apply(t){return Be(()=>{const n=RI(t,this.axis),s=at(Ce(this.rate,Sr(n,this.minValue,this.maxValue)),Ce(1-this.rate,n));return Ce(t,Rt(s,at(zs(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}jV.className="MinMaxNorm";nt(jV);const gR={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Ws(e){return AI(e)}function mR(e,t={}){return Xg(e,Br.getMap().classNameMap,t,"constraint")}function Hs(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in gR?gR[e]:e,config:{}};return mR(n)}else return e instanceof Zg?e:mR(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const S4e=["channelsFirst","channelsLast"],I4e=["nearest","bilinear"],E4e=["valid","same","causal"],T4e=["max","avg"],_4e=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const jc=new Map;function _s(e){bc(S4e,"DataFormat",e)}function N4e(e){bc(I4e,"InterpolationFormat",e)}function Er(e){bc(E4e,"PaddingMode",e)}function GV(e){bc(T4e,"PoolMode",e)}const Ah=[],vR="/";function Lu(e,t){Ah.push(e);try{const n=t();return Ah.pop(),n}catch(n){throw Ah.pop(),n}}function A4e(){return Ah.length===0?"":Ah.join(vR)+vR}function KV(e){if(!YV(e))throw new Error("Not a valid tensor name: '"+e+"'");return A4e()+e}function qV(e){if(!YV(e))throw new Error("Not a valid tensor name: '"+e+"'");jc.has(e)||jc.set(e,0);const t=jc.get(e);if(jc.set(e,jc.get(e)+1),t>0){const n=`${e}_${t}`;return jc.set(n,1),n}else return e}const D4e=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function YV(e){return!!e.match(D4e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function R4e(e){return e===parseInt(e.toString(),10)}function pl(e,t,n){t==null&&(t=0),n==null&&(n=e.length);let s=1;for(let o=t;o<n;++o)s*=e[o];return s}function Wd(e){if(e.length===0)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const s=e[n];s<t&&(t=s)}return t}function yl(e){if(e.length===0)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const s=e[n];s>t&&(t=s)}return t}function Ti(e,t){if(t<e)throw new Se(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let s=e;s<t;++s)n.push(s);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function s1(e,t){return bt(e,t)}function Jg(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Ne(e,n)}function M4e(e,t){return Be(()=>{if(e.shape.length!==2)throw new Se(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);const n=Jg(e,1);return yx(n,[1,t,1])})}function O4e(e){const t=[pl(e.shape)];return Ne(e,t)}function F4e(e){if(e.rank<=1)throw new Se(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],pl(e.shape,1)];return Ne(e,t)}function Bu(e,t,n){return Be(()=>{switch(e.rank){case 1:return GS(e,t,n);case 2:return rV(e,[t,0],[n,e.shape[1]]);case 3:return KS(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return L0(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Kn(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Kn(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Se(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}})}function i$(e,t,n){return Be(()=>{switch(e.rank){case 1:return GS(e,t,n);case 2:return rV(e,[0,t],[e.shape[0],n]);case 3:return KS(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return L0(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Se(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function ev(e,t,n,s){return Be(()=>{switch(e.rank){case 1:return GS(e,t,n);case 2:switch(s){case 1:return Bu(e,t,n);case 2:return i$(e,t,n);default:throw new Se(`The axis is not within the rank of the tensor ${s}`)}case 3:switch(s){case 1:return Bu(e,t,n);case 2:return KS(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return i$(e,t,n);default:throw new Se(`The axis is not within the rank of the tensor ${s}`)}case 4:switch(s){case 1:return Bu(e,t,n);case 2:return L0(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return L0(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return i$(e,t,n);default:throw new Se(`The axis is not within the rank of the tensor ${s}`)}default:throw new Se(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}})}function MI(e,t=-1){let n;return t<0&&(n=e[0].rank,n!==0?t=n:t=0),t===e[0].rank&&(t=-1),xo(e,t)}function bR(e,t){switch(e.rank){case 1:return oMe([e,t]);case 2:return iMe([e,t],0);case 3:return lMe([e,t],0);case 4:return cMe([e,t],0);default:throw new Se(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function yx(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Se(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return vi(e,t)}function o1(e,t=0,n=1,s,o){return n3e(e,t,n,s,o)}function Xi(e,t,n,s){if(e.rank<2||t.rank<2)throw new nn(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){const o=e.shape.slice(-1)[0],r=t.shape.slice(-2)[0];if(o!==r)throw new nn(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(e.rank===2&&t.rank===2)return sR({a:e,b:t,transposeA:!1,transposeB:!1,bias:s?wx(e.rank,s,Ei()):null,activation:n});{const o=e.shape.slice(),r=o.pop();e=Ne(e,[-1,r]);const i=t.shape.slice(),a=i.pop(),l=i.pop(),u=[...i,a],c=Array.from({length:t.rank},(p,g)=>g===0?t.rank-2:g<=t.rank-2?g-1:g);t=Ne(Rn(t,c),[l,-1]);const d=[...o,...u];return Ne(sR({a:e,b:t,transposeA:!1,transposeB:!1,bias:s?wx(e.rank,s,Ei()):null,activation:n}),d)}}function XV(e,t,n){return Be(()=>(Array.isArray(t)?t=Qo(t,"int32"):t=bt(t,"int32"),FS(e,t,n)))}function Qg(e){return Ce(e,e)}function wx(e,t,n){const s=t.shape;if(t.rank!==1&&t.rank!==e)throw new Se(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(e===5){if(n==="channelsFirst")return s.length===1?Ne(t,[1,s[0],1,1,1]):Ne(t,[1,s[3],s[0],s[1],s[2]]);if(n==="channelsLast")return s.length===1?Ne(t,[1,1,1,1,s[0]]):Ne(t,[1].concat(s))}else if(e===4){if(n==="channelsFirst")return s.length===1?Ne(t,[1,s[0],1,1]):Ne(t,[1,s[2],s[0],s[1]]);if(n==="channelsLast")return s.length===1?Ne(t,[1,1,1,s[0]]):Ne(t,[1].concat(s))}else if(e===3){if(n==="channelsFirst")return s.length===1?Ne(t,[1,s[0],1]):Ne(t,[1,s[1],s[0]]);if(n==="channelsLast")return s.length===1?Ne(t,[1,1,s[0]]):Ne(t,[1].concat(s))}else if(e<3)return t;throw new Se(`Unsupported input rank by biasAdd: ${t.rank}`)}function Oi(e,t,n){return Be(()=>(n==null&&(n=Ei()),_s(n),at(e,wx(e.rank,t,n))))}function P4e(e,t=1){if(t!==1)throw new nn(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return qy(e)}function L4e(e){return Be(()=>Rt(e,at(Ks(e),1)))}function ZV(e,t,n,s){return Be(()=>Y3e(e,t,n,s))}function B4e(e){return Be(()=>{const t=at(.5,Ce(.2,e));return Sr(t,0,1)})}function em(e,t,n=!1){return n?e():t()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const z4e=["fanIn","fanOut","fanAvg"],V4e=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function W4e(e){bc(z4e,"FanMode",e)}function H4e(e){bc(V4e,"Distribution",e)}class ri extends hf{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class JV extends ri{apply(t,n){return Ys(t,n)}}JV.className="Zeros";nt(JV);class OI extends ri{apply(t,n){return Ll(t,n)}}OI.className="Ones";nt(OI);class QV extends ri{constructor(t){super();if(typeof t!="object")throw new Se(`Expected argument of type ConstantConfig but got ${t}`);if(t.value===void 0)throw new Se(`config must have value set but got ${t}`);this.value=t.value}apply(t,n){return Be(()=>Ce(Yt(this.value),Ll(t,n)))}getConfig(){return{value:this.value}}}QV.className="Constant";nt(QV);class e6 extends ri{constructor(t){super();this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=t.minval||this.DEFAULT_MINVAL,this.maxval=t.maxval||this.DEFAULT_MAXVAL,this.seed=t.seed}apply(t,n){return Jy(t,this.minval,this.maxval,n)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}e6.className="RandomUniform";nt(e6);class t6 extends ri{constructor(t){super();this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new nn(`randomNormal does not support dType ${n}.`);return o1(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}t6.className="RandomNormal";nt(t6);class n6 extends ri{constructor(t){super();this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=t.mean||this.DEFAULT_MEAN,this.stddev=t.stddev||this.DEFAULT_STDDEV,this.seed=t.seed}apply(t,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new nn(`truncatedNormal does not support dType ${n}.`);return uV(t,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}n6.className="TruncatedNormal";nt(n6);class s6 extends ri{constructor(t){super();this.gain=t.gain!=null?t.gain:1}apply(t,n){return Be(()=>{if(t.length!==2||t[0]!==t[1])throw new Se("Identity matrix initializer can only be used for 2D square matrices.");return Ce(this.gain,Fz(t[0]))})}getConfig(){return{gain:this.gain}}}s6.className="Identity";nt(s6);function U4e(e,t="channelsLast"){let n,s;if(_s(t),e.length===2)n=e[0],s=e[1];else if([3,4,5].indexOf(e.length)!==-1){if(t==="channelsFirst"){const o=pl(e,2);n=e[1]*o,s=e[0]*o}else if(t==="channelsLast"){const o=pl(e,0,e.length-2);n=e[e.length-2]*o,s=e[e.length-1]*o}}else{const o=pl(e);n=Math.sqrt(o),s=Math.sqrt(o)}return[n,s]}class rr extends ri{constructor(t){super();if(t.scale<0)throw new Se(`scale must be a positive float. Got: ${t.scale}`);this.scale=t.scale==null?1:t.scale,this.mode=t.mode==null?"fanIn":t.mode,W4e(this.mode),this.distribution=t.distribution==null?"normal":t.distribution,H4e(this.distribution),this.seed=t.seed}apply(t,n){const s=U4e(t),o=s[0],r=s[1];let i=this.scale;if(this.mode==="fanIn"?i/=Math.max(1,o):this.mode==="fanOut"?i/=Math.max(1,r):i/=Math.max(1,(o+r)/2),this.distribution==="normal"){const a=Math.sqrt(i);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new nn(`${this.getClassName()} does not support dType ${n}.`);return uV(t,0,a,n,this.seed)}else{const a=Math.sqrt(3*i);return Jy(t,-a,a,n)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}rr.className="VarianceScaling";nt(rr);class FI extends rr{constructor(t){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return rr.className}}FI.className="GlorotUniform";nt(FI);class PI extends rr{constructor(t){super({scale:1,mode:"fanAvg",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return rr.className}}PI.className="GlorotNormal";nt(PI);class LI extends rr{constructor(t){super({scale:2,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return rr.className}}LI.className="HeNormal";nt(LI);class BI extends rr{constructor(t){super({scale:2,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return rr.className}}BI.className="HeUniform";nt(BI);class zI extends rr{constructor(t){super({scale:1,mode:"fanIn",distribution:"normal",seed:t==null?null:t.seed})}getClassName(){return rr.className}}zI.className="LeCunNormal";nt(zI);class VI extends rr{constructor(t){super({scale:1,mode:"fanIn",distribution:"uniform",seed:t==null?null:t.seed})}getClassName(){return rr.className}}VI.className="LeCunNormal";nt(VI);class o6 extends ri{constructor(t){super();if(this.DEFAULT_GAIN=1,this.gain=t.gain==null?this.DEFAULT_GAIN:t.gain,this.seed=t.seed,this.seed!=null)throw new nn("Random seed is not implemented for Orthogonal Initializer yet.")}apply(t,n){return Be(()=>{if(t.length<2)throw new nn("Shape must be at least 2D.");t[0]*t[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${t[0]*t[1]}) elements: Slowness may result.`);const s=t[0]>t[1]?[t[1],t[0]]:t,o=o1(s,0,1,"float32");let r=pPe.gramSchmidt(o);return t[0]>t[1]&&(r=Rn(r)),Ce(this.gain,r)})}getConfig(){return{gain:this.gain,seed:this.seed}}}o6.className="Orthogonal";nt(o6);const yR={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function wR(e,t={}){return Xg(e,Br.getMap().classNameMap,t,"initializer")}function bs(e){return AI(e)}function ps(e){if(typeof e=="string"){const t=e in yR?yR[e]:e;if(t==="GlorotNormal")return new PI;if(t==="GlorotUniform")return new FI;if(t==="HeNormal")return new LI;if(t==="HeUniform")return new BI;if(t==="LeCunNormal")return new zI;if(t==="LeCunUniform")return new VI;{const n={};return n.className=t,n.config={},wR(n)}}else return e instanceof ri?e:wR(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let j4e=0;function r6(){return j4e++}const tv={};function r1(e=""){return e in tv||(tv[e]=0),tv[e]+=1,e+tv[e].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function $x(e){return Array.isArray(e)&&Array.isArray(e[0])}function B0(e){return e.length===0?[]:Array.isArray(e[0])?e:[e]}function an(e){let t;if(Array.isArray(e)){if(e.length!==1)throw new Se(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function Hn(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(e.length===1)return e=e,e[0];throw new Se(`Expected exactly 1 Shape; got ${e.length}`)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function z0(e){let t=0;for(const n of e)n.shape.length===0?t+=1:t+=n.shape.reduce((s,o)=>s*o);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const $R="Variable";class G4e{constructor(t,n="float32",s=$R,o=!0,r=null){this.dtype=n==null?"float32":n,this.shape=t.shape,this.id=r6(),s=s==null?$R:s,this.originalName=KV(s),this.name=qV(this.originalName),this.trainable_=o,this.constraint=r,this.val=j3e(t,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(t){return this.assertNotDisposed(),K4e(this.val,t),this.val.id!==t.id&&(this.val.assign(t),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(t){this.trainable_=t,this.val.trainable=t}}function K4e(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function Cx(e){return e.map(t=>t.read())}function WI(e){e.forEach(t=>{t[0].write(t[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Vs{constructor(t){this.dtype=t.dtype,this.shape=t.shape,t.shape!=null?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}}}class ji{constructor(t,n,s,o,r,i,a){this.dtype=t,this.shape=n,this.sourceLayer=s,this.inputs=o,this.callArgs=r,this.outputTensorIndex=a,this.id=r6(),i!=null&&(this.originalName=KV(i),this.name=qV(this.originalName)),this.rank=n.length}}let q4e=0;class i1{constructor(t,n){this.callArgs=n,this.id=q4e++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(const s of t.inboundLayers)s!=null&&s.outboundNodes.push(this);t.outboundLayer.inboundNodes.push(this)}getConfig(){const t=[];for(const n of this.inboundLayers)n!=null?t.push(n.name):t.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let Y4e=0;class _n extends hf{constructor(t={}){super();this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=Y4e++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=t.name;if(!n){const s=this.getClassName();n=ga(s)+"_"+r1(s)}if(this.name=n,this.trainable_=t.trainable==null?!0:t.trainable,t.inputShape!=null||t.batchInputShape!=null){let s;if(t.batchInputShape!=null)s=t.batchInputShape;else if(t.inputShape!=null){let r=null;t.batchSize!=null&&(r=t.batchSize),s=[r].concat(t.inputShape)}this.batchInputShape=s;let o=t.dtype;o==null&&(o=t.inputDType),o==null&&(o="float32"),this.dtype=o}t.weights!=null?this.initialWeights=t.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(t,n){return t.name+"_ib-"+n.toString()}getNodeAtIndex(t,n){if(this.inboundNodes.length===0)throw new Ur(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=t)throw new Se(`Asked to get ${n} at node ${t}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[t]}getInputAt(t){return Bo(this.getNodeAtIndex(t,"input").inputTensors)}getOutputAt(t){return Bo(this.getNodeAtIndex(t,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Bi(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Bi(`Layer ${this.name} is not connected, no input to return.`);return Bo(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Bi(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Bi(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Bo(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(t=>t())}get updates(){return this._updates}get built(){return this._built}set built(t){this._built=t}get trainable(){return this.trainable_}set trainable(t){this._trainableWeights.forEach(n=>n.trainable=t),this.trainable_=t}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(t=>t.trainable):[]}set trainableWeights(t){this._trainableWeights=t}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(t=>!t.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(t){this._nonTrainableWeights=t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(t){if(t=is(t),this.inputSpec==null||this.inputSpec.length===0)return;const n=is(this.inputSpec);if(t.length!==n.length)throw new Se(`Layer ${this.name} expects ${n.length} inputs, but it received ${t.length} input tensors. Input received: ${t}`);for(let s=0;s<t.length;s++){const o=t[s],r=n[s];if(r==null)continue;const i=o.rank;if(r.ndim!=null&&i!==r.ndim)throw new Se(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${r.ndim}, found ndim=${i}`);if(r.maxNDim!=null&&i>r.maxNDim)throw new Se(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${r.maxNDim}, found ndim=${i}`);if(r.minNDim!=null&&i<r.minNDim)throw new Se(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${r.minNDim}, found ndim=${i}.`);if(r.dtype!=null&&o.dtype!==r.dtype)throw new Se(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${r.dtype}, found dtype=${o.dtype}.`);if(r.axes){const a=o.shape;for(const l in r.axes){const u=Number(l),c=r.axes[l],d=u>=0?a[u]:a[a.length+u];if(c!=null&&[c,null].indexOf(d)===-1)throw new Se(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${c} but got shape ${a}.`)}}if(r.shape!=null)for(let a=0;a<r.shape.length;++a){const l=r.shape[a],u=o.shape[a];if(l!=null&&u!=null&&l!==u)throw new Se(`Input ${s} is incompatible with layer ${this.name}: expected shape=${r.shape}, found shape=${o.shape}.`)}}}call(t,n){return t}invokeCallHook(t,n){this._callHook!=null&&this._callHook(t,n)}setCallHook(t){this._callHook=t}clearCallHook(){this._callHook=null}apply(t,n){n=n||{},this.assertNotDisposed();const s=is(t);let o=!0;for(const i of s)if(!(i instanceof ji)){o=!1;break}let r=!0;for(const i of s)if(i instanceof ji){r=!1;break}if(o===r)throw new Se("Arguments to apply() must be all SymbolicTensors or all Tensors");return Lu(this.name,()=>{if(!this.built){this.assertInputCompatibility(t);const i=[];for(const a of is(t))i.push(a.shape);this.build(Bo(i)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&r&&(this._refCount=1)}if(this.assertInputCompatibility(t),r){let i=this.call(t,n);const a=is(i),l=[];for(let u of a)s.indexOf(u)!==-1&&(u=u.clone()),l.push(u);if(i=Bo(l),this.activityRegularizer!=null)throw new nn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return i}else{const i=X4e(t),a=this.computeOutputShape(i);let l;const u=Z4e(t);if(this.warnOnIncompatibleInputShape(Array.isArray(t)?i[0]:i),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((c,d)=>new ji(u,c,this,is(t),n,this.name,d)):l=new ji(u,a,this,is(t),n,this.name),this.addInboundNode(t,l,null,null,i,a,n),this._refCount++,this.activityRegularizer!=null)throw new nn("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(t){if(this.batchInputShape!=null)if(t.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(t)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((s,o)=>{s!=null&&t[o]!=null&&t[o]!==s&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(t)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Bi(`The layer ${this.name} has never been called and thus has no defined output shape.`);const t=[];for(const n of this.inboundNodes){const s=JSON.stringify(n.outputShapes);t.indexOf(s)===-1&&t.push(s)}if(t.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new Bi(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Ur(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return z0(this.weights)}build(t){this.built=!0}getWeights(t=!1){return Cx(t?this.trainableWeights:this.weights)}setWeights(t){Be(()=>{const n=this.weights;if(n.length!==t.length)throw new Se(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${t.length}, but the layer was expecting ${n.length} weights. Provided weights: ${t}...`);if(n.length===0)return;const s=[],o=Cx(n);for(let r=0;r<o.length;++r){const i=o[r],a=n[r],l=t[r];if(!Pn(i.shape,l.shape))throw new Se(`Layer weight shape ${i.shape} not compatible with provided weight shape ${l.shape}`);s.push([a,l])}WI(s)})}addWeight(t,n,s,o,r,i,a,l){if(this._addedWeightNames.indexOf(t)!==-1)throw new Se(`Duplicate weight name ${t} for layer ${this.name}`);this._addedWeightNames.push(t),s==null&&(s="float32"),this.fastWeightInitDuringBuild&&(o=l!=null?l():ps("zeros"));const u=o.apply(n,s),c=new G4e(u,s,t,i,a);return u.dispose(),r!=null&&this.addLoss(()=>r.apply(c.read())),i==null&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}setFastWeightInitDuringBuild(t){this.fastWeightInitDuringBuild=t}addLoss(t){t==null||Array.isArray(t)&&t.length===0||(t=is(t),this._losses!==void 0&&this._losses!==null&&this.losses.push(...t))}computeOutputShape(t){return t}computeMask(t,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(s=>{if(s!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}addInboundNode(t,n,s,o,r,i,a=null){const l=is(t);n=is(n),s=is(s),o=is(o),r=B0(r),i=B0(i);const u=[],c=[],d=[];for(const f of l)u.push(f.sourceLayer),c.push(f.nodeIndex),d.push(f.tensorIndex);new i1({outboundLayer:this,inboundLayers:u,nodeIndices:c,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:s,outputMasks:o,inputShapes:r,outputShapes:i},a);for(let f=0;f<n.length;f++)n[f].sourceLayer=this,n[f].nodeIndex=this.inboundNodes.length-1,n[f].tensorIndex=f}getConfig(){const t={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(t.batchInputShape=this.batchInputShape),this.dtype!=null&&(t.dtype=this.dtype),t}disposeWeights(){return this.weights.forEach(t=>t.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let t=0;return--this._refCount===0&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}}}function X4e(e){e=is(e);const t=[];for(const n of e)t.push(n.shape);return Bo(t)}function Z4e(e){return"float32"}function i6(e,t,n){if((t==null||n!=null&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),t.inboundNodes.length===0)return[e];{const s=t.inboundNodes[n];if(s.inboundLayers.length===0)return s.inputTensors;{const o=[];for(let r=0;r<s.inboundLayers.length;r++){const i=s.inputTensors[r],a=s.inboundLayers[r],l=s.nodeIndices[r],u=i6(i,a,l);for(const c of u)o.indexOf(c)===-1&&o.push(c)}return o}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class tm extends _n{constructor(t){super({dtype:t.dtype,name:t.name!=null?t.name:r1("input").toString()});if(t.batchSize==null&&(t.batchSize=null),t.sparse==null&&(t.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=t.sparse,t.inputShape!=null&&t.batchInputShape!=null)throw new Se("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=t.batchInputShape;if(n==null){if(t.inputShape==null)throw new Se("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[t.batchSize].concat(t.inputShape)}else if(t.batchSize!=null)throw new Se("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const s=t.dtype||"float32";this.batchInputShape=n,this.dtype=s,this.inputSpec=[{shape:n}];const o=new ji(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new i1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(t,n){throw new Se(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}tm.className="InputLayer";nt(tm);function J4e(e){if(e.batchShape==null&&e.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(e.batchShape!=null&&e.shape!=null)throw new Se("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;e.shape!=null&&t==null&&(t=[null].concat(e.shape));let n=e.dtype;return n==null&&(n="float32"),new tm({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function nu(e){if(e==null)return;const t=[],n=[],s=[];for(const o in e){const r=e[o];if(typeof r!="number"){const i=r;t.push(i.data()),n.push(o),s.push(i)}}if(t.length>0){const o=await Promise.all(t);for(let r=0;r<o.length;++r)e[n[r]]=o[r][0];gn(s)}}function a6(e){if(e!=null)for(const t in e){const n=e[t];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var CR;(function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"})(CR||(CR={}));const Q4e=125;class hp{constructor(){this.validationData=null}setParams(t){this.params=t}async onEpochBegin(t,n){}async onEpochEnd(t,n){}async onBatchBegin(t,n){}async onBatchEnd(t,n){}async onTrainBegin(t){}async onTrainEnd(t){}setModel(t){}}class eBe{constructor(t,n=10){t==null&&(t=[]),this.callbacks=t,this.queueLength=n}append(t){this.callbacks.push(t)}setParams(t){for(const n of this.callbacks)n.setParams(t)}setModel(t){for(const n of this.callbacks)n.setModel(t)}async onEpochBegin(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochBegin(t,n)}async onEpochEnd(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onEpochEnd(t,n)}async onBatchBegin(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchBegin(t,n)}async onBatchEnd(t,n){n==null&&(n={});for(const s of this.callbacks)await s.onBatchEnd(t,n)}async onTrainBegin(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainBegin(t)}async onTrainEnd(t){t==null&&(t={});for(const n of this.callbacks)await n.onTrainEnd(t)}}class tBe extends hp{constructor(){super()}async onEpochBegin(t){this.seen=0,this.totals={}}async onBatchEnd(t,n){n==null&&(n={});const s=n.size==null?0:n.size;this.seen+=s;for(const o in n){const r=n[o];if(typeof r=="number")this.totals.hasOwnProperty(o)||(this.totals[o]=0),this.totals[o]=this.totals[o]+r*s;else{let i;o in this.totals?i=this.totals[o]:this.totals[o]=0;const a=Be(()=>at(this.totals[o],Ce(r,s)));this.totals[o]=a,i!=null&&i.dispose()}}}async onEpochEnd(t,n){if(n!=null)for(const s of this.params.metrics)this.totals[s]!=null&&(typeof this.totals[s]=="number"?n[s]=this.totals[s]/this.seen:Be(()=>{const o=Ce(Rt(1,this.seen),this.totals[s]);n[s]=o,this.totals[s].dispose(),ea(n[s])}))}}class nBe extends hp{async onTrainBegin(t){this.epoch=[],this.history={}}async onEpochEnd(t,n){n==null&&(n={}),this.epoch.push(t);for(const s in n)this.history[s]==null&&(this.history[s]=[]),this.history[s].push(n[s])}async syncData(){const t=[],n=[],s=[];for(const r in this.history){const i=this.history[r];for(let a=0;a<i.length;++a)if(typeof i[a]!="number"){const l=i[a];t.push(l.data()),n.push(r),s.push(a)}}const o=await Promise.all(t);for(let r=0;r<o.length;++r)this.history[n[r]][s[r]].dispose(),this.history[n[r]][s[r]]=o[r][0]}}class sBe extends hp{constructor(t,n){super();if(this.currentEpoch=0,this.nowFunc=t.nowFunc,this.nextFrameFunc=t.nextFrameFunc||mPe,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Q4e),this.yieldEvery==="never"&&t.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");qC(this.yieldEvery)&&(this.maybeWait=k4e(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=t.onTrainBegin,this.trainEnd=t.onTrainEnd,this.epochBegin=t.onEpochBegin,this.epochEnd=t.onEpochEnd,this.batchBegin=t.onBatchBegin,this.batchEnd=t.onBatchEnd,this.yield=t.onYield}async maybeWait(t,n,s){const o=[];this.yield!=null&&(await nu(s),o.push(this.yield(t,n,s))),o.push(this.nextFrameFunc()),await Promise.all(o)}async onEpochBegin(t,n){this.currentEpoch=t,this.epochBegin!=null&&(await nu(n),await this.epochBegin(t,n))}async onEpochEnd(t,n){const s=[];this.epochEnd!=null&&(await nu(n),s.push(this.epochEnd(t,n))),this.yieldEvery==="epoch"&&s.push(this.nextFrameFunc()),await Promise.all(s)}async onBatchBegin(t,n){this.batchBegin!=null&&(await nu(n),await this.batchBegin(t,n))}async onBatchEnd(t,n){const s=[];this.batchEnd!=null&&(await nu(n),s.push(this.batchEnd(t,n))),this.yieldEvery==="batch"?s.push(this.nextFrameFunc()):qC(this.yieldEvery)&&s.push(this.maybeWait(this.currentEpoch,t,n)),await Promise.all(s)}async onTrainBegin(t){this.trainBegin!=null&&(await nu(t),await this.trainBegin(t))}async onTrainEnd(t){this.trainEnd!=null&&(await nu(t),await this.trainEnd(t))}}function l6(e,t){return e==null&&(e={}),e instanceof hp?[e]:Array.isArray(e)&&e[0]instanceof hp?e:is(e).map(s=>new sBe(s,t))}class Rr{constructor(){}static registerCallbackConstructor(t,n){J(t>=0&&Number.isInteger(t),()=>`Verbosity level is expected to be an integer >= 0, but got ${t}`),Rr.checkForDuplicate(n),Rr.constructors[t]==null&&(Rr.constructors[t]=[]),Rr.constructors[t].push(n)}static checkForDuplicate(t){for(const n in Rr.constructors)Rr.constructors[+n].forEach(o=>{if(o===t)throw new Se("Duplicate callback constructor.")})}static clear(){Rr.constructors={}}static createCallbacks(t){const n=[];for(const s in Rr.constructors){const o=+s;t>=o&&n.push(...Rr.constructors[o])}return n.map(s=>new s)}}Rr.constructors={};function u6(e,t,n,s,o,r,i,a,l){const u=new nBe,c=[new tBe,...Rr.createCallbacks(t)];e!=null&&c.push(...e),c.push(u);const d=new eBe(c);return d.setParams({epochs:n,initialEpoch:s,samples:o,steps:r,batchSize:i,verbose:t,doValidation:a,metrics:l}),{callbackList:d,history:u}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Sa(e,t={},n=!1){return Xg(e,Br.getMap().classNameMap,t,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function V0(e,t){return Be(()=>{e.dtype!=="float32"&&(e=bt(e,"float32"));const n=_t(Qg(e),t,!0),s=Yy(n.shape,zs()),o=Ro(Pl(n,s));return Rt(e,o)})}function a1(e,t){return Be(()=>Cs(Qg(Nt(t,e)),-1))}function HI(e,t){return Be(()=>Cs(Ks(Nt(t,e)),-1))}function UI(e,t){return Be(()=>{const n=Nt(e,t),s=Sr(Ks(e),zs(),Number.MAX_VALUE),o=Ks(Rt(n,s));return Ce(100,Cs(o,-1))})}function oBe(e,t){return Be(()=>{const n=Sr(t,zs(),Number.MAX_VALUE),s=Jr(at(1,n)),o=Sr(e,zs(),Number.MAX_VALUE),r=Jr(at(1,o));return Cs(Qg(Nt(s,r)),-1)})}function rBe(e,t){return Be(()=>{const n=Pl(0,Nt(1,Ce(e,t)));return Cs(Qg(n),-1)})}function iBe(e,t){return Be(()=>{const n=Pl(0,Nt(1,Ce(e,t)));return Cs(n,-1)})}function aBe(e,t){return Be(()=>{const n=_t(Ce(e,t),-1),s=qi(Ce(Nt(1,e),t),-1);return Pl(0,at(1,Nt(s,n)))})}function lBe(e,t){return Be(()=>{const n=Math.log(2),s=Nt(t,e),o=Nt(at(s,Ug(Ce(-2,s))),n);return Cs(o,-1)})}function pp(e,t,n=!1){return Be(()=>{if(n)t=qS(t);else{const s=_t(t,t.shape.length-1,!0);t=Rt(t,s)}return t=Sr(t,zs(),1-zs()),ws(_t(Ce(bt(e,"float32"),Jr(t)),t.shape.length-1))})}function W0(e,t,n=!1){return Be(()=>{const s=bt(Xy(O4e(e)),"int32");t=Sr(t,zs(),1-zs());const o=t.shape,r=Ne(bz(s,o[o.length-1]),o);return pp(r,t,n)})}function uBe(e,t){if(!Pn(e.shape,t.shape))throw new Se(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return Be(()=>{const n=Ba(t),s=ws(Ks(t));return at(Nt(n,Ce(t,e)),LS(Zr(s)))})}function l1(e,t){return Be(()=>{let n;return n=Sr(t,zs(),1-zs()),n=Jr(Rt(n,Nt(1,n))),Cs(uBe(e,n),-1)})}function cBe(e,t){return Be(()=>{const n=Sr(e,zs(),1),s=Sr(t,zs(),1);return _t(Ce(e,Jr(Rt(n,s))),-1)})}function dBe(e,t){return Be(()=>{const n=Jr(at(zs(),t));return Cs(Nt(t,Ce(e,n)),-1)})}function c6(e,t){return Be(()=>{const n=V0(e,-1),s=V0(t,-1),o=Ce(n,s);return ws(_t(o,-1))})}const H0={meanSquaredError:a1,meanAbsoluteError:HI,meanAbsolutePercentageError:UI,meanSquaredLogarithmicError:oBe,squaredHinge:rBe,hinge:iBe,categoricalHinge:aBe,logcosh:lBe,categoricalCrossentropy:pp,sparseCategoricalCrossentropy:W0,binaryCrossentropy:l1,kullbackLeiblerDivergence:cBe,poisson:dBe,cosineProximity:c6};function a$(e){if(typeof e=="string"){if(e in H0)return H0[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Se(t)}else return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function d6(e,t){return Be(()=>{const n=Ce(.5,Qr(t)),s=s1(oi(t,n),e.dtype);return Cs(ta(e,s),-1)})}function f6(e,t){return Be(()=>s1(ta(dp(e,-1),dp(t,-1)),"float32"))}function fBe(e,t){return Be(()=>bt(_t(Da(ta(e,1),ta(t,1))),"float32"))}function hBe(e,t){return Be(()=>bt(_t(Da(ta(e,0),ta(t,1))),"float32"))}function pBe(e,t){return Be(()=>{const n=fBe(e,t),s=hBe(e,t),o=at(n,s);return bt(or(oi(o,0),Rt(n,o),0),"float32")})}function gBe(e,t){return l1(e,t)}function mBe(e,t){return e.rank===t.rank&&(e=jg(e,[e.rank-1])),t=dp(t,-1),t.dtype!==e.dtype&&(t=bt(t,e.dtype)),bt(ta(e,t),"float32")}const vBe=a1,bBe=a1,yBe=HI,wBe=HI,$Be=UI,CBe=UI,h6=pp,xBe=c6,p6=W0,U0={binaryAccuracy:d6,categoricalAccuracy:f6,precision:pBe,categoricalCrossentropy:h6,sparseCategoricalCrossentropy:p6,mse:vBe,MSE:bBe,mae:yBe,MAE:wBe,mape:$Be,MAPE:CBe,cosine:xBe};function kBe(e){if(typeof e=="string"&&e in U0)return U0[e];if(typeof e!="string"&&e!=null)return e;throw new Se(`Unknown metric ${e}`)}function nv(e){if(zi(e!==null,`Unknown LossOrMetricFn ${e}`),typeof e=="string")return e;{let t;for(const n of Object.keys(H0))if(H0[n]===e){t=n;break}if(t!==void 0)return t;for(const n of Object.keys(U0))if(U0[n]===e){t=n;break}return t!==void 0?t:e.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function SBe(e){const t={Adagrad:()=>Uc.adagrad(.01),Adadelta:()=>Uc.adadelta(1,.95,zs()),Adam:()=>Uc.adam(.001,.9,.999,zs()),Adamax:()=>Uc.adamax(.002,.9,.999,zs(),0),RMSProp:()=>Uc.rmsprop(.001,.9,0,zs()),SGD:()=>Uc.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new Se(`Unknown Optimizer ${e}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const xR=1*1024*1024;function kR(e,t,n=!1){if(e==null||typeof e!="object"||Object.getPrototypeOf(e)!==Object.prototype||!xx(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const s=JSON.stringify(e);s.length>xR&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${s.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${xR}.`)}}function xx(e){if(e===null)return!0;if(typeof e=="object")if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t)if(typeof n!="string"||!xx(e[n]))return!1;return!0}else if(Array.isArray(e)){for(const t of e)if(!xx(t))return!1;return!0}else return!1;else{const t=typeof e;return t==="string"||t==="number"||t==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function IBe(e,t,n,s=console.log){const o=TBe(e),r=["Layer (type)","Output shape","Param #"];o?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(c=>Math.floor(t*c)));let i;if(!o){r.push("Receives inputs"),i=[];for(const c in e.nodesByDepth)i.push(...e.nodesByDepth[c])}s("_".repeat(t)),j0(r,n,s),s("=".repeat(t));const a=e.layers;for(let c=0;c<a.length;++c)o?_Be(a[c],n,s):NBe(a[c],n,i,s),s((c===a.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=EBe(e),u=z0(e.nonTrainableWeights);s(`Total params: ${l+u}`),s(`Trainable params: ${l}`),s(`Non-trainable params: ${u}`),s("_".repeat(t))}function EBe(e){let t;return e.collectedTrainableWeights!=null?t=z0(e.collectedTrainableWeights):t=z0(e.trainableWeights),t}function TBe(e){let t=!0;const n=[],s=[];for(const o in e.nodesByDepth)n.push(e.nodesByDepth[o]);for(const o of n){if(o.length>1||o.length===1&&o[0].inboundLayers.length>1){t=!1;break}s.push(...o)}if(t)for(const o of e.layers){let r=!1;for(const i of o.inboundNodes)if(s.indexOf(i)!==-1)if(r){t=!1;break}else r=!0;if(!t)break}return t}function j0(e,t,n=console.log){let s="";for(let o=0;o<e.length;++o)o>0&&(s=s.slice(0,s.length-1)+" "),s+=e[o],s=s.slice(0,t[o]),s+=" ".repeat(t[o]-s.length);n(s)}function _Be(e,t,n){let s;try{s=JSON.stringify(e.outputShape)}catch{s="multiple"}const o=e.name,r=e.getClassName(),i=[`${o} (${r})`,s,e.countParams().toString()];j0(i,t,n)}function NBe(e,t,n,s){let o;try{o=JSON.stringify(e.outputShape)}catch{o="multiple"}const r=[];for(const c of e.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(c)===-1))for(let d=0;d<c.inboundLayers.length;++d){const f=c.inboundLayers[d].name,h=c.nodeIndices[d],p=c.tensorIndices[d];r.push(`${f}[${h}][${p}]`)}const i=e.name,a=e.getClassName(),l=r.length===0?"":r[0],u=[`${i} (${a})`,o,e.countParams().toString(),l];j0(u,t,s);for(let c=1;c<r.length;++c)j0(["","","",r[c]],t,s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function g6(e,t,n){return(e==="inboundNodes"||e==="outputLayers"||e==="inputLayers")&&t===0&&typeof n=="string"}function kx(e,t){if(e===null)return null;if(typeof e=="string")return yu(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],s=e.length;for(let o=0;o<s;++o){const r=e[o];g6(t,o,r)?n.push(r):n.push(kx(r,t))}return n}else{const n={};for(const s of Object.keys(e)){const o=e[s];if(s==="name"&&typeof o=="string")n[s]=o;else{const r=yu(s);n[r]=kx(o,r)}}return n}}function Sx(e,t){if(e==null)return null;if(typeof e=="string")return ga(e);if(typeof e=="number"||typeof e=="boolean")return e;if(e instanceof Array){const n=[],s=e.length;for(let o=0;o<s;++o){const r=e[o];g6(t,o,r)?n.push(r):n.push(Sx(r,t))}return n}else{const n={};for(const s of Object.keys(e)){const o=e[s],r=ga(s);(s==="name"||s==="className")&&typeof o=="string"?n[r]=o:n[r]=Sx(o,s)}return n}}/** @license See the LICENSE file. */const m6="3.13.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ABe(e,t){if(e.dtype==null||e.dtype===t.dtype)return t;try{return bt(t,e.dtype)}catch{throw new Se(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}class al{constructor(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof al)for(const n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(t==null)return;for(const n of t)this.add(n.key,n.value)}}add(t,n,s){if(this.id2Value[t.id]==null)this.id2Value[t.id]=ABe(t,n),this.name2Id[t.name]=t.id,s!=null&&(this.id2Mask[t.id]=s);else throw new Se(`Duplicate key: name=${t.name}, id=${t.id}`);return this}addFeed(t){this.add(t.key,t.value)}hasKey(t){return this.id2Value[t.id]!=null}names(){return Object.keys(this.name2Id)}getValue(t){if(t instanceof ji){if(this.id2Value[t.id]==null)throw new Se(`Nonexistent key: ${t.name}`);return this.id2Value[t.id]}else{const n=this.name2Id[t];if(n==null)throw new Se(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Value[n]}}getMask(t){if(t instanceof ji){if(this.id2Value[t.id]==null)throw new Se(`Nonexistent key: ${t.name}`);return this.id2Mask[t.id]}else{const n=this.name2Id[t];if(n==null)throw new Se(`Feed dict has no SymbolicTensor name: ${t}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&gn(this.id2Mask)}}const l$={},SR={};function dh(e,t,n,s){const o=n==null?!1:n.training,r=Array.isArray(e),i=r?e:[e],a=i.map(p=>p.name),l=[],u=t.names();for(const p of a)u.indexOf(p)!==-1?l.push(t.getValue(p)):l.push(null);s!=null&&(s.maxNumTensors=-1/0,s.minNumTensors=1/0);const c=a.join(",")+"|"+t.names().join(",");let d,f;if(l$[c]==null){const p=DBe(i,t);d=p.sorted,f=p.recipientCounts,l$[c]=d,SR[c]=f}d=l$[c],f={},o||Object.assign(f,SR[c]);const h=new al(t);for(let p=0;p<d.length;++p){if(s!=null){const T=dx().numTensors;T>s.maxNumTensors&&(s.maxNumTensors=T),T<s.minNumTensors&&(s.minNumTensors=T)}const g=d[p],m=g.sourceLayer;if(m instanceof tm)continue;const v=[],b=[],$=[];let y=!1;for(const T of g.inputs){const I=h.getValue(T),_=h.getMask(T);v.push(I),b.push(_),_!=null&&(y=!0),o||(f[T.name]--,f[T.name]===0&&!t.hasKey(T)&&a.indexOf(T.name)===-1&&!I.isDisposed&&T.sourceLayer.stateful!==!0&&$.push(I))}y&&(n=n||{},n.mask=b[0]);const w=is(m.apply(v,n));let C=null;m.supportsMasking&&(C=m.computeMask(v,b));const x=MBe(g),S=Array.isArray(x)?x:[x];for(let T=0;T<S.length;++T){h.hasKey(S[T])||h.add(S[T],w[T],Array.isArray(C)?C[0]:C);const I=a.indexOf(S[T].name);I!==-1&&(l[I]=w[T])}o||gn($)}return h.disposeMasks(),r?l:l[0]}function DBe(e,t){J(e!=null&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],s={};if(e.length===1){const o=IR(e[0],t);n=o.sorted,s=o.recipientMap}else{const o=new Set;for(const r of e){const{sorted:i,recipientMap:a}=IR(r,t);for(const l of i)o.has(l.name)||(n.push(l),o.add(l.name));for(const l in a)s[l]==null&&(s[l]=new Set),a[l].forEach(u=>s[l].add(u))}}return{sorted:n,recipientCounts:RBe(s)}}function RBe(e){const t={};for(const n in e)t[n]=e[n].size;return t}function IR(e,t){const n=new Set,s=[],o={};for(const a of t.names())n.add(a);const r=[],i=[];for(r.push(e);r.length>0;){const a=r[r.length-1];if(n.has(a.name)){r.pop();continue}const l=i[i.length-1]===r.length-1;if(a.inputs.length===0||l)r.pop(),s.push(a),n.add(a.name),l&&i.pop();else{i.push(r.length-1);for(const u of a.inputs)o[u.name]==null&&(o[u.name]=new Set),o[u.name].add(a.name),!n.has(u.name)&&r.push(u)}}return{sorted:s,recipientMap:o}}function MBe(e){let t;if(e.sourceLayer.inboundNodes.length===1)t=e.sourceLayer.output;else{let n=null;for(let s=0;s<e.sourceLayer.inboundNodes.length;++s)for(const o of e.sourceLayer.inboundNodes[s].outputTensors)if(o.id===e.id){n=s;break}t=e.sourceLayer.getOutputAt(n)}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class hi extends _n{constructor(t){super({});if(this.containerNodes=new Set,this.name=t.name,this.name==null){const b=this.getClassName().toLowerCase();this.name=r1(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(t.inputs)?this.inputs=t.inputs.slice():this.inputs=[t.inputs],Array.isArray(t.outputs)?this.outputs=t.outputs.slice():this.outputs=[t.outputs],hl(this.inputs).length!==this.inputs.length)throw new Se(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);hl(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const $=b.sourceLayer,y=b.nodeIndex,w=b.tensorIndex;this.outputLayers.push($),this.outputLayersNodeIndices.push(y),this.outputLayersTensorIndices.push(w)}for(const b of this.inputs){const $=b.sourceLayer,y=b.nodeIndex,w=b.tensorIndex;zi(y===0,"input layer has >1 nodes"),zi(w===0,"input layer has >1 tensors"),this.inputLayers.push($),this.inputLayersNodeIndices.push(y),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const $=this.inputLayers[b];if(!($ instanceof tm))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${t.inputs}. Input ${b} (0-based) originates from layer type ${$.getClassName()}.`);this.inputNames.push($.name),this.feedInputShapes.push($.batchInputShape),this.feedInputNames.push($.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);const n={},s={},o={},r={},i={},a=[],l=(b,$,y,w,C,x)=>{(w==null||C==null||x==null)&&(w=b.sourceLayer,C=b.nodeIndex,x=b.tensorIndex);const S=w.inboundNodes[C];if(y.indexOf(S)!==-1)throw new Ur(`The tensor ${b.name} at layer "${w.name}" is part of a cycle.`);if($.indexOf(S)!==-1)return;this.containerNodes.add(hi.nodeKey(w,C)),w.id in i||(i[w.id]=Object.keys(i).length),y.indexOf(S)===-1&&y.push(S);const T=S.inboundLayers.length;for(let I=0;I<T;I++){const _=S.inputTensors[I],N=S.inboundLayers[I],D=S.nodeIndices[I],F=S.tensorIndices[I];l(_,$,y,N,D,F)}for($.push(S);y.indexOf(S)>=0;)y.splice(y.indexOf(S),1);a.push(S)},u=[],c=[];for(const b of this.outputs)l(b,u,c);const d=a.slice().reverse();for(const b of d){s[b.id]=b,b.id in n||(n[b.id]=0);let $=n[b.id];const y=o[b.outboundLayer.id]==null?0:o[b.outboundLayer.id];$=Math.max($,y),o[b.outboundLayer.id]=$,r[b.outboundLayer.id]=b.outboundLayer,n[b.id]=$;for(let w=0;w<b.inboundLayers.length;w++){const C=b.inboundLayers[w],x=b.nodeIndices[w],S=C.inboundNodes[x],T=n[S.id]==null?0:n[S.id];n[S.id]=Math.max($+1,T),s[S.id]=S}}const f={};for(const b in n){const $=n[b];$ in f||(f[$]=[]),f[$].push(s[b])}const h={};for(const b in o){const $=o[b];$ in h||(h[$]=[]),h[$].push(r[b])}let p=Object.keys(h).map(b=>parseInt(b,10)).sort(Qm);this.layers=[];for(const b of p){const $=h[b];$.sort((y,w)=>{const C=i[y.id],x=i[w.id];return C<x?-1:C>x?1:0});for(const y of $)y instanceof hi&&this.internalContainerRefs.push(y),this.layers.push(y)}this.layersByDepth=h,p=Object.keys(f).map(b=>parseInt(b,10)).sort(Qm);const g=this.inputs.slice(),m=[];for(const b of p)for(const $ of f[b]){const y=$.outboundLayer;if(y!=null){for(const w of $.inputTensors)if(g.indexOf(w)===-1)throw new Ur(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${y.name}". The following previous layers were accessed without issue: ${m}`);for(const w of $.outputTensors)g.push(w);m.push(y.name)}}this.nodesByDepth=f;const v=this.layers.map(b=>b.name);for(const b of v){const $=v.filter(y=>y===b).length;if($!==1)throw new Ur(`The name "${b}" is used ${$} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(v))}this.outboundNodes=[],this.inboundNodes=[],new i1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const t={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)t.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)t.numDisposedVariables+=n.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t}get trainable(){return this.trainable_}set trainable(t){this.layers.forEach(n=>{n._trainableWeights.forEach(s=>s.trainable=t)}),this.trainable_=t}get trainableWeights(){if(this._trainableWeights.length>0)throw new Se("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let t=[];for(const n of this.layers)t=t.concat(n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.layers)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.layers)n.push(...s.trainableWeights);return n.concat(t)}return t}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(t,n=!0){const s={};let o=0;for(const i of this.layers)for(const a of i.weights){if(s[a.originalName]!=null)throw new Se(`Duplicate weight name: ${a.originalName}`);s[a.originalName]=a,o++}const r=[];for(const i in t){let a=i;if(s[i]==null){const l=i.split("/");a=l.slice(0,-2).concat([l[l.length-1]]).join("/")}if(s[a]!=null)r.push([s[a],t[i]]);else if(n)throw new Se(`Provided weight data has no target variable: ${i}`);delete s[a]}if(n){const i=[];for(const a in s)i.push(a);if(i.length>0)throw new Se(`${i.length} of ${o} weights are not set: ${i}`)}WI(r)}updatedConfig(){const t=this.getConfig(),n={};return n.className=this.getClassName(),n.config=t,n.kerasVersion=`tfjs-layers ${m6}`,n.backend="TensorFlow.js",n}toJSON(t,n=!0){const s=Sx(this.updatedConfig());return n?JSON.stringify(s):s}call(t,n){return Be(()=>{t=is(t);const s=new al;for(let o=0;o<this.inputs.length;++o)s.add(this.inputs[o],t[o]);return dh(this.outputs,s,n)})}computeMask(t,n){return Be(()=>{t=is(t);let s;return n==null?s=tc(null,t.length):s=is(n),this.runInternalGraph(t,s)[1]})}computeOutputShape(t){const n=B0(t);if(n.length!==this.inputLayers.length)throw new Se(`Invalid inputShape argument ${t}: model has ${this.inputLayers.length} tensor inputs.`);const s={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],u=n[a],c=l.name+"_0_0";s[c]=u}const o=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Qm);if(o.length>1)for(const a of o){const l=this.nodesByDepth[a];for(const u of l){const c=u.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(c.id)!==-1)continue;const d=[];for(let g=0;g<u.inboundLayers.length;g++){const m=u.inboundLayers[g],v=u.nodeIndices[g],b=u.tensorIndices[g],$=`${m.name}_${v}_${b}`,y=s[$];d.push(y)}const f=c.computeOutputShape(Bo(d)),h=B0(f),p=c.inboundNodes.indexOf(u);for(let g=0;g<h.length;g++){const m=`${c.name}_${p}_${g}`;s[m]=h[g]}}}const r=[],i=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],u=this.outputLayersNodeIndices[a],c=this.outputLayersTensorIndices[a],d=`${l.name}_${u}_${c}`;i.push(d)}for(let a=0;a<i.length;a++){const l=i[a];zi(l in s),r.push(s[l])}return Bo(r)}runInternalGraph(t,n){n==null&&(n=tc(null,t.length));const s={};for(let l=0;l<this.inputs.length;++l){const u=this.inputs[l],c=t[l],d=n[l];s[u.id]=[c,d]}const o=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Qm);for(const l of o){const u=this.nodesByDepth[l];for(const c of u){const d=c.outboundLayer,f=c.inputTensors,h=c.outputTensors,p=new Array;for(const g of f)g.id in s&&p.push(s[g.id]);if(p.length===f.length){let g={},m,v,b,$;if(c.callArgs!=null&&(g=c.callArgs),p.length===1){const[y,w]=p[0];g.mask==null&&(g.mask=w),b=is(d.call(y,g)),$=is(d.computeMask(y,w)),m=[y],v=[w]}else m=p.map(y=>y[0]),v=p.map(y=>y[1]),g.mask==null&&(g.mask=v),b=is(d.call(m,g)),$=is(d.computeMask(m,v));if(d.activityRegularizer)throw new nn("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let y=0;y<h.length;++y){const w=h[y],C=b[y],x=$[y];s[w.id]=[C,x]}}}}const r=[],i=[],a=[];for(const l of this.outputs){zi(l.id in s,`Could not compute output ${l.name} : ${l.id}`);const[u,c]=s[l.id];a.push(u.shape),r.push(u),i.push(c)}return[r,i,a]}buildNodeConversionMap(t){const n={};let s;for(const o of this.layers){s=o instanceof hi?1:0;for(let r=0;r<o.inboundNodes.length;r++){const i=hi.nodeKey(o,r);this.containerNodes.has(i)&&(n[i]=s,s+=1)}}return n}getLayer(t,n){if(n!=null){if(this.layers.length<=n)throw new Se(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}else if(t==null)throw new Se("Provide either a layer name or layer index");for(const s of this.layers)if(s.name===t)return s;throw new Se(`No such layer: ${t}`)}calculateLosses(){return Be(()=>{const t=[];for(const n of this.layers)for(let s=0;s<n.inboundNodes.length;++s){const o=hi.nodeKey(n,s);this.containerNodes.has(o)&&t.push(...n.calculateLosses())}return t})}getConfig(){const t={name:this.name},n=this.buildNodeConversionMap(this.layers),s=[];for(const i of this.layers){const a=i.getClassName(),l=i.getConfig(),u=[];for(let d=0;d<i.inboundNodes.length;d++){const f=i.inboundNodes[d],h=hi.nodeKey(i,d);let p={};if(this.containerNodes.has(h)){if(f.callArgs)try{JSON.stringify(f.callArgs),p=f.callArgs}catch{console.warn(`Layer ${i.name} was passed non-serializable keyword arguments: ${f.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(f.inboundLayers.length>0){const g=[];for(let m=0;m<f.inboundLayers.length;m++){const v=f.inboundLayers[m],b=f.nodeIndices[m],$=f.tensorIndices[m],y=hi.nodeKey(v,b);let w=n[y];w==null&&(w=0),g.push([v.name,w,$,p])}u.push(g)}}}const c={};c.name=i.name,c.className=a,c.config=l,c.inboundNodes=u,s.push(c)}t.layers=s;const o=[];for(let i=0;i<this.inputLayers.length;i++){const a=this.inputLayers[i],l=this.inputLayersNodeIndices[i],u=hi.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.inputLayersTensorIndices[i];o.push([a.name,c,d])}t.inputLayers=o;const r=[];for(let i=0;i<this.outputLayers.length;i++){const a=this.outputLayers[i],l=this.outputLayersNodeIndices[i],u=hi.nodeKey(a,l);if(!this.containerNodes.has(u))continue;let c=n[u];c==null&&(c=0);const d=this.outputLayersTensorIndices[i];r.push([a.name,c,d])}return t.outputLayers=r,t}static fromConfig(t,n,s={},o=!1){const r={},i={};function a(m,v){m.name in i?i[m.name].push(v):i[m.name]=[v]}function l(m,v){const b=[];let $;for(const y of v){const w=y[0],C=y[1],x=y[2];if($=y[3]==null?{}:y[3],!(w in r)){a(m,v);return}const S=r[w];if(S.inboundNodes.length<=C){a(m,v);return}const T=S.inboundNodes[C];b.push(T.outputTensors[x])}b.length>0&&m.apply(Bo(b),$)}function u(m){const v=m.name,b=Sa(m,n.customObjects!=null?n.customObjects:{});b.setFastWeightInitDuringBuild(o),r[v]=b,m.inboundNodes.forEach(y=>{if(!(y instanceof Array))throw new Se(`Corrupted configuration, expected array for nodeData: ${y}`);a(b,y)})}const c=n.name,d=n.layers;for(const m of d)u(m);for(;!x4e(i);)for(const m of d){const v=r[m.name];if(v.name in i){const b=i[v.name];delete i[v.name];for(const $ of b)l(v,$)}}const f=[],h=[],p=n.inputLayers;for(const m of p){const v=m[0],b=m[1],$=m[2];zi(v in r);const w=r[v].inboundNodes[b].outputTensors;f.push(w[$])}const g=n.outputLayers;for(const m of g){const v=m[0],b=m[1],$=m[2];zi(v in r);const w=r[v].inboundNodes[b].outputTensors;h.push(w[$])}return new t({inputs:f,outputs:h,name:c})}get stateful(){if(this._stateful)throw new Se("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const t of this.layers)if(t.stateful)return!0;return!1}resetStates(){Be(()=>{this.layers.forEach(t=>{t.stateful&&t.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function OBe(e,t,n){const s=t.length;if(e==null||Array.isArray(e)&&e.length===0)return t.map(o=>null);if(s===1)return Array.isArray(e)&&e.length===1?e:typeof e=="object"&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==s)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${s} outputs. Make sure a set of weights is provided for each model output.`);return e}else if(typeof e=="object"&&Object.keys(e).length>0&&typeof e[Object.keys(e)[0]]=="object"){const o=[];return t.forEach(r=>{r in e?o.push(e[r]):o.push(null)}),o}else throw new Error(`The model has multiple (${s}) outputs, so ${n} must be either an array with ${s} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function v6(e,t){return OBe(e,t,"classWeight")}async function b6(e,t,n,s){if(t!=null||s!=null)throw new Error("Support sampleWeight is not implemented yet");if(n!=null){const o=Be(()=>{if(e.shape.length===1)return Fu(e);if(e.shape.length===2){if(e.shape[1]>1)return dp(e,1);if(e.shape[1]===1)return Ne(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await o.data());gn(o);const i=[];return r.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);i.push(n[a])}),Qo(i,"float32")}else return null}function FBe(e,t){return Ce(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const PBe=32;function y6(e,t){let n,s;const o=t;n=o.xs,s=o.ys,J(n!=null&&s!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`);const r=ER("input",e.inputNames,n),i=ER("output",e.outputNames,s),a=r[0].shape[0];J(r.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${r.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),J(i.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${i.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let l=0;l<r.length;l++)J(r[l].shape[0]===a,()=>`Batch size mismatch: input ${e.inputNames[l]} has ${r[l].shape[0]}; expected  ${a} based on input ${e.inputNames[0]}.`);for(let l=0;l<i.length;l++)J(i[l].shape[0]===a,()=>`Batch size mismatch: output ${e.outputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${e.inputNames[0]}.`);return{xs:r,ys:i}}function ER(e,t,n){if(n instanceof Ns)return[n];if(Array.isArray(n))return J(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{const s=[];for(const o of t){if(n[o]==null)throw new Se(`The feature data generated by the dataset lacks the required ${e} key '${o}'.`);s.push(n[o])}return s}}function LBe(e){if(e.length===3)throw new nn("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}async function BBe(e,t,n){const s=n.batchesPerEpoch!=null;if(J(e.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),J(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),J(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),J(!s||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),J(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const o=n.validationData!=null;let r,i;if(o)if(TR(n.validationData))J(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const m=LBe(n.validationData);r=m.xs,i=m.ys}const a=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let u;o?u=l.slice().concat(l.map(m=>"val_"+m)):u=l.slice();const c=l6(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:f,history:h}=u6(c,d,n.epochs,null,null,zBe(t,n),null,o,u);f.setModel(e),e.history=h,await f.onTrainBegin(),e.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,g=await t.iterator();for(;p<n.epochs;){const m={};await f.onEpochBegin(p);let v=0,b=0;for(s||(g=await t.iterator());s?v<n.batchesPerEpoch:!0;){const $=await g.next();if(s&&$.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${v} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if($.value!=null){const{xs:y,ys:w}=y6(e,$.value),C={};C.batch=b,C.size=y[0].shape[0],await f.onBatchBegin(b,C);const x=[];if(n.classWeight!=null){const I=v6(n.classWeight,e.outputNames);for(let _=0;_<I.length;++_)x.push(await b6(w[_],null,I[_]))}const S=y.concat(w).concat(x),T=a(S);gn(S);for(let I=0;I<l.length;++I){const _=l[I],N=T[I];C[_]=N,ea(N)}await f.onBatchEnd(b,C),a6(C),b++,v++}if(s?v>=n.batchesPerEpoch:$.done){if(o){let y;TR(n.validationData)?y=is(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):y=is(e.evaluate(r,i,{batchSize:n.validationBatchSize==null?PBe:n.validationBatchSize,verbose:0}));for(let w=0;w<e.metricsNames.length;++w)m[`val_${e.metricsNames[w]}`]=y[w]}break}if(e.stopTraining_)break}if(await f.onEpochEnd(p,m),p++,e.stopTraining_)break}return await f.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function zBe(e,t){let n=null;return t.batchesPerEpoch!=null?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function TR(e){return typeof e.iterator=="function"}function VBe(e){return typeof e.next=="function"}async function WBe(e,t,n){n=n||{};const s=n.batches!=null,o=e.testFunction;let r=[];if(n.verbose>0)throw new nn("Verbose mode is not implemented yet.");J(!s||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const i=VBe(t)?t:await t.iterator();let a=0,l=0;for(;s?l<n.batches:!0;){const u=await i.next();if(r=Be(()=>{if(u.value){const{xs:c,ys:d}=y6(e,u.value),f=c.concat(d),h=Be(()=>o(f));if(gn(f),l===0)for(let g=0;g<h.length;++g)r.push(Yt(0));const p=f[0].shape[0];for(let g=0;g<h.length;++g){const m=h[g],v=r[g];r[g]=Be(()=>at(r[g],Ce(p,m))),l>0&&gn(v)}gn(h),a+=p,++l}return r}),u.done){s&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let u=0;u<r.length;++u){const c=r[u];r[u]=Rt(r[u],a),gn(c)}return Bo(r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ix(e){J(e>0&&Number.isInteger(e),()=>`batchSize is required to be a positive integer, but got ${e}`)}function fh(e,t,n){return e==null?[null]:Array.isArray(e)?e.map(s=>Bu(s,t,n-t)):Bu(e,t,n-t)}function jI(e,t){return Be(()=>e==null?null:Array.isArray(e)?e.map(n=>jI(n,t)):XV(e,t.dtype==="int32"?t:bt(t,"int32")))}function Ex(e,t){const n=[];let s=0,o=null;for(;s<e;)o=s+t,o>=e&&(o=e),n.push([s,o]),s=o;return n}async function HBe(e,t,n,s,o,r,i,a,l,u,c,d,f,h,p){o==null&&(o=32),r==null&&(r=1),c==null&&(c=!0),f==null&&(f=0);let g=!1;if(l!=null&&u!=null&&(g=!0),p!=null&&(g=!0,h==null))throw new Se("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const m=e.checkNumSamples(n,o,h,"steps_per_epoch");let v;m!=null&&(v=Ti(0,m)),i==null&&(i=1);const{callbackList:b,history:$}=u6(a,i,r,f,m,h,o,g,d);b.setModel(e),e.history=$,await b.onTrainBegin(),e.stopTraining_=!1;for(let y=f;y<r;++y){await b.onEpochBegin(y);const w={};if(h!=null)throw new nn("stepsPerEpoch mode is not implemented yet.");{if(c==="batch")throw new nn("batch shuffling is not implemneted yet");c&&_Ae(v);const C=Qo(v),x=Ex(m,o);for(let S=0;S<x.length;++S){const T={};if(await b.onBatchBegin(S,T),Be(()=>{const I=x[S][0],_=x[S][1],N=Bu(C,I,_-I);T.batch=S,T.size=_-I;const D=jI(n,N),F=t(D);for(let P=0;P<s.length;++P){const M=s[P],B=F[P];T[M]=B,ea(B)}if(S===x.length-1&&g){const P=e.testLoop(l,u,o);for(let M=0;M<s.length;++M){const B=s[M],j=P[M];ea(j),w["val_"+B]=j}}}),await b.onBatchEnd(S,T),a6(T),e.stopTraining_)break}C.dispose()}if(await b.onEpochEnd(y,w),e.stopTraining_)break}return await b.onTrainEnd(),await e.history.syncData(),e.history}async function UBe(e,t,n,s={}){if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;let o,r,i,a,l,u,c,d,f;try{const h=s.batchSize==null?32:s.batchSize;Ix(h);const p=!1,g=await e.standardizeUserData(t,n,s.sampleWeight,s.classWeight,p,h);o=g[0],r=g[1],f=g[2];let m=!1,v;if(s.validationData!=null&&s.validationData.length>0){if(m=!0,s.validationData.length===2)l=s.validationData[0],u=s.validationData[1];else throw s.validationData.length===3?new nn("validationData including sample weights is not supported yet."):new Se(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${s.validationData} is invalid.`);const T=!0,I=await e.standardizeUserData(l,u,null,null,T,h);c=I[0],d=I[1],v=c.concat(d)}else if(s.validationSplit!=null&&s.validationSplit>0&&s.validationSplit<1){m=!0;const T=Math.floor(o[0].shape[0]*(1-s.validationSplit)),I=o[0].shape[0];c=fh(o,T,I),i=o,o=fh(o,0,T),d=fh(r,T,I),a=r,r=fh(r,0,T),v=c.concat(d)}else s.validationSteps!=null&&(m=!0);const b=o.concat(r).concat(f);e.checkTrainableWeightsConsistency();const $=e.makeTrainFunction(),y=e.getDedupedMetricsNames();let w,C;m?(e.makeTestFunction(),w=e.testFunction,C=y.slice().concat(y.map(T=>"val_"+T))):(w=null,v=[],C=y.slice());const x=l6(s.callbacks,s.yieldEvery);return await HBe(e,$,b,y,h,s.epochs,s.verbose,x,w,v,s.shuffle,C,s.initialEpoch,null,null)}finally{e.isTraining=!1,mi(o,t),mi(r,n),mi(i,t),mi(a,n),mi(c,l),mi(d,u),f!=null&&gn(f)}}function w6(e){const t=[];e instanceof Ns&&(e=[e]);for(let n=0;n<e.length;++n){const s=e[n];if(s.rank===1)t.push(Jg(s,1));else{if(s.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(s)}}return t}function mi(e,t){if(e==null)return;const n=[];if(t instanceof Ns)n.push(t.id);else if(Array.isArray(t))t.forEach(o=>n.push(o.id));else if(t!=null)for(const o in t){const r=t[o];n.push(r.id)}const s=[];if(e instanceof Ns)n.indexOf(e.id)===-1&&s.push(e);else if(Array.isArray(e))e.forEach(o=>{n.indexOf(o.id)===-1&&s.push(o)});else if(e!=null)for(const o in e){const r=e[o];n.indexOf(r.id)===-1&&s.push(r)}s.forEach(o=>{o.isDisposed||o.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jBe(e){return e instanceof Ns}function Tx(e){return Array.isArray(e)}function _R(e){return!jBe(e)&&!Tx(e)}function NR(e,t,n,s=!0,o=""){if(t==null||t.length===0){if(e!=null){let i=!1;if(Tx(e)&&e.length>0)i=!0;else if(_R(e)){for(const a in e)if(e.hasOwnProperty(a)){i=!0;break}}else i=!0;if(i)throw new Se(`Error when checking model ${o} expected no data, but got ${e}`)}return[]}if(e==null)return t.map(i=>null);let r;if(_R(e)){e=e,r=[];for(const i of t){if(e[i]==null)throw new Se(`No data provided for "${i}". Need data for each key in: ${t}`);r.push(e[i])}}else if(Tx(e)){if(e=e,e.length!==t.length)throw new Se(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);r=e}else{if(e=e,t.length>1)throw new Se(`The model ${o} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);r=[e]}if(r=w6(r),n!=null)for(let i=0;i<t.length;++i){if(n[i]==null)continue;const a=r[i];if(a.shape.length!==n[i].length)throw new Se(`Error when checking ${o}: expected ${t[i]} to have ${n[i].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[i].length;++l){if(l===0&&!s)continue;const u=a.shape[l],c=n[i][l];if(c!=null&&c>=0&&u!==c)throw new Se(`${o} expected a batch of elements where each example has shape [${n[i].slice(1,n[i].length)}] (i.e.,tensor shape [*,${n[i].slice(1,n[i].length)}]) but the ${o} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return r}function GBe(e,t,n){const s=hl(e.map(r=>r.shape[0]));s.sort();const o=hl(t.map(r=>r.shape[0]));if(o.sort(),s.length>1)throw new Se(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(r=>r.shape))}`);if(o.length>1)throw new Se(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(r=>r.shape))}`);if(s.length>0&&o.length>0&&!Pn(s,o))throw new Se(`Input Tensors should have the same number of samples as target Tensors. Found ${s[0]} input sample(s) and ${o[0]} target sample(s).`)}function KBe(e,t,n){const s=[a1,l1,pp];for(let o=0;o<e.length;++o){const r=e[o],i=t[o],a=n[o];if(i!=null){if(i===pp&&r.shape[r.shape.length-1]===1)throw new Se(`You are passing a target array of shape ${r.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(s.indexOf(i)!==-1){const l=r.shape.slice(1),u=a.slice(1);for(let c=0;c<l.length;++c){const d=l[c],f=u[c];if(f!=null&&d!==f)throw new Se(`A target Tensor with shape ${r.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function AR(e,t,n,s=!0,o=""){let r;if(Array.isArray(e)){if(e.length!==t.length)throw new Se(`Error when checking model ${o}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);r=e}else{if(t.length>1)throw new Se(`The model expects ${t.length} ${o} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);r=[e]}if(n!=null)for(let i=0;i<t.length;++i){if(n[i]==null)continue;const a=r[i];if(a.shape.length!==n[i].length)throw new Se(`Error when checking ${o}: expected ${t[i]} to have ${n[i].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[i].length;++l){if(l===0&&!s)continue;const u=a.shape[l],c=n[i][l];if(c!=null&&c!==u)throw new Se(`Error when checking ${o}: expected ${t[i]} to have shape ${JSON.stringify(n[i])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function qBe(e,t){if(e==null||Array.isArray(e)&&e.length===0)return t.map(s=>[]);let n;if(typeof e=="string"||typeof e=="function")n=[e];else if(Array.isArray(e)||typeof e=="object")n=e;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);if(Array.isArray(n))return t.map(s=>n);{const s=[];for(const o of t){let r=n.hasOwnProperty(o)?n[o]:[];Array.isArray(r)||(r=[r]),s.push(r)}return s}}const YBe="layers-model";class md extends hi{constructor(t){super(t);this.isTraining=!1}summary(t,n,s=console.log){if(!this.built)throw new Se("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");IBe(this,t,n,s)}compile(t){if(t.loss==null&&(t.loss=[]),this.loss=t.loss,typeof t.optimizer=="string")this.optimizer_=SBe(t.optimizer),this.isOptimizerOwned=!0;else{if(!(t.optimizer instanceof zl))throw new Se("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=t.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(t.loss)&&typeof t.loss!="string"&&typeof t.loss!="function"){t.loss=t.loss;for(const i in t.loss)if(this.outputNames.indexOf(i)===-1)throw new Se(`Unknown entry in loss dictionary: "${i}". Only expected the following keys: ${this.outputNames}`);for(const i of this.outputNames)t.loss[i]==null&&console.warn(`Output "${i}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${i} during training`),n.push(a$(t.loss[i]))}else if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new Se(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${t.loss}.`);n=t.loss.map(a=>a$(a))}else{const i=a$(t.loss);this.outputs.forEach(a=>{n.push(i)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let i=0;i<this.outputs.length;++i){const a=this.internalOutputShapes[i],l=this.outputNames[i];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[i])}const s=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Lu("loss",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const a=this.lossFunctions[i];this.outputs.length>1&&(this.metricsTensors.push([a,i]),this.metricsNames.push(this.outputNames[i]+"_loss"))}});const o=qBe(t.metrics,this.outputNames),r=(i,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[i]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,i])};Lu("metric",()=>{for(let i=0;i<this.outputs.length;++i){if(s.indexOf(i)!==-1)continue;const a=o[i];(u=>{const c="";let d,f,h;for(const p of u){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const m=this.internalOutputShapes[i];m[m.length-1]===1||this.lossFunctions[i]===l1?["accuracy","acc"].indexOf(p)!==-1?f=d6:["crossentropy","ce"].indexOf(p)!==-1&&(f=gBe):this.lossFunctions[i]===W0?["accuracy","acc"].indexOf(p)!==-1?f=mBe:["crossentropy","ce"].indexOf(p)!==-1&&(f=p6):["accuracy","acc"].indexOf(p)!==-1?f=f6:["crossentropy","ce"].indexOf(p)!==-1&&(f=h6);let v;["accuracy","acc"].indexOf(p)!==-1?v="acc":["crossentropy","ce"].indexOf(p)!==-1&&(v="ce"),h=f,d=c+v}else h=kBe(p),d=c+nv(p);let g;Lu(d,()=>{g=h}),r(i,d,g)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(t,n,s={}){const o=s.batchSize==null?32:s.batchSize;Ix(o);const r=!0,i=this.standardizeUserDataXY(t,n,r,o);try{const a=i[0].concat(i[1]);this.makeTestFunction();const l=this.testFunction,u=this.testLoop(l,a,o,s.verbose,s.steps);return Bo(u)}finally{mi(i[0],t),mi(i[1],n)}}async evaluateDataset(t,n){return this.makeTestFunction(),WBe(this,t,n)}checkNumSamples(t,n,s,o="steps"){let r;if(s!=null){if(r=null,n!=null)throw new Se(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(t!=null)Array.isArray(t)?r=t[0].shape[0]:r=t.shape[0];else throw new Se(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return r}execute(t,n){if(Array.isArray(n)&&n.length===0)throw new Se("`outputs` is an empty Array, which is not allowed.");const s=Array.isArray(n),o=s?n:[n],r=this.retrieveSymbolicTensors(o),i=new al;if(t instanceof Ns&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new Se(`The number of inputs provided (${t.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)i.add(this.inputs[l],t[l])}else for(const l of this.inputs){const u=t[l.name];if(u==null)throw new Se(`No value is provided for the model's input ${l.name}`);i.add(l,u)}const a=dh(r,i);return s?a:a[0]}retrieveSymbolicTensors(t){const n=tc(null,t.length);let s=t.length;for(const o of this.layers){const r=Array.isArray(o.output)?o.output:[o.output],i=r.map(a=>a.name);for(let a=0;a<t.length;++a){const l=i.indexOf(t[a]);if(l!==-1&&(n[a]=r[l],s--),s===0)break}if(s===0)break}if(s>0){const o=[];throw n.forEach((r,i)=>{r==null&&o.push(t[i])}),new Se(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return n}predictLoop(t,n=32,s=!1){return Be(()=>{const o=this.checkNumSamples(t);if(s)throw new nn("Verbose predictLoop() is not implemented yet.");const r=Ex(o,n),i=this.outputs.map(a=>[]);for(let a=0;a<r.length;++a)Be(()=>{const u=r[a][0],c=r[a][1],d=fh(t,u,c),f=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)f.push({key:this.inputs[p],value:d[p]});else f.push({key:this.inputs[0],value:d});const h=new al(f);return dh(this.outputs,h)}).forEach((u,c)=>i[c].push(u));return Bo(i.map(a=>xo(a,0)))})}predict(t,n={}){const s=w6(t);AR(s,this.inputNames,this.feedInputShapes,!1);try{const o=n.batchSize==null?32:n.batchSize;return Ix(o),this.predictLoop(s,o)}finally{mi(s,t)}}predictOnBatch(t){AR(t,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(t)?t[0]:t).shape[0];return this.predictLoop(t,n)}standardizeUserDataXY(t,n,s=!0,o){if(this.optimizer_==null)throw new Ur("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let i=0;i<this.feedOutputShapes.length;++i){const a=this.feedOutputShapes[i];this.feedLossFns[i]===W0?r.push(a.slice(0,a.length-1).concat([1])):r.push(a)}if(t=NR(t,this.feedInputNames,this.feedInputShapes,!1,"input"),n=NR(n,this.feedOutputNames,r,!1,"target"),GBe(t,n),KBe(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&t[0].shape[0]%o!==0)throw new Se(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${t[0].shape[0]} sample(s).`);return[t,n]}async standardizeUserData(t,n,s,o,r=!0,i){const[a,l]=this.standardizeUserDataXY(t,n,r,i);if(s!=null)throw new Error("sample weight is not supported yet.");let u=null;if(o!=null){const c=v6(o,this.outputNames);u=[];for(let d=0;d<c.length;++d)u.push(await b6(l[d],null,c[d]))}return[a,l,u]}testLoop(t,n,s,o=0,r){return Be(()=>{const i=this.checkNumSamples(n,s,r,"steps"),a=[];if(o>0)throw new nn("Verbose mode is not implemented yet.");if(r!=null)throw new nn("steps mode in testLoop() is not implemented yet");{const l=Ex(i,s),u=Qo(Ti(0,i));for(let c=0;c<l.length;++c){const d=l[c][0],f=l[c][1],h=Bu(u,d,f-d),p=jI(n,h),g=t(p);if(c===0)for(let m=0;m<g.length;++m)a.push(Yt(0));for(let m=0;m<g.length;++m){const v=g[m];a[m]=at(a[m],Ce(f-d,v))}}for(let c=0;c<a.length;++c)a[c]=Rt(a[c],i)}return a})}getDedupedMetricsNames(){const t=this.metricsNames,n=[];for(let s=0;s<t.length;++s){const o=t[s];let r=o;pR(t,o)>1&&(r+=`_${pR(t.slice(0,s),o)}`),n.push(r)}return n}makeTrainFunction(){return t=>{const n=[],s=t.slice(0,this.inputs.length),o=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=t.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),i=[],a=()=>{const d=[];for(let g=0;g<this.inputs.length;++g)d.push({key:this.inputs[g],value:s[g]});const f=new al(d),h=dh(this.outputs,f,{training:!0});let p;for(let g=0;g<this.lossFunctions.length;++g){let v=this.lossFunctions[g](o[g],h[g]);r[g]!=null&&(v=FBe(v,r[g]));const b=Cs(v);n.push(b),g===0?p=v:p=at(p,v)}for(let g=0;g<this.metricsTensors.length;++g){let m;if(this.outputs.length>1&&g<this.outputs.length)m=n[g];else{const v=this.metricsTensors[g][0],b=this.metricsTensors[g][1];m=Cs(v(o[b],h[b]))}ea(m),i.push(m)}return p=Cs(p),this.calculateLosses().forEach(g=>{p=at(p,g)}),p},l=this.collectedTrainableWeights.map(d=>d.read()),u=!0;return[this.optimizer_.minimize(a,u,l)].concat(i)}}makeTestFunction(){this.testFunction=t=>Be(()=>{const n=[];let s;const o=t.slice(0,this.inputs.length),r=t.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=[];for(let u=0;u<this.inputs.length;++u)i.push({key:this.inputs[u],value:o[u]});const a=new al(i),l=dh(this.outputs,a);for(let u=0;u<this.lossFunctions.length;++u){const c=this.lossFunctions[u],d=Cs(c(r[u],l[u]));u===0?s=d:s=at(s,d),n.push(s)}for(let u=0;u<this.metricsTensors.length;++u){const c=this.metricsTensors[u][0],d=this.metricsTensors[u][1],f=Cs(c(r[d],l[d]));n.push(f)}return n})}async fit(t,n,s={}){return UBe(this,t,n,s)}async fitDataset(t,n){return BBe(this,t,n)}async trainOnBatch(t,n){const s=await this.standardizeUserData(t,n),o=s[0],r=s[1],a=this.makeTrainFunction()(o.concat(r)),l=[];for(const u of a){const c=await u.data();l.push(c[0])}return gn(a),mi(s[0],t),mi(s[1],n),Bo(l)}getNamedWeights(t){const n=[],s=t!=null&&t.trainableOnly,o=s?this.trainableWeights:this.weights,r=this.getWeights(s);for(let i=0;i<o.length;++i)s&&!o[i].trainable||n.push({name:o[i].originalName,tensor:r[i]});return n}set stopTraining(t){this.stopTraining_=t}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(t){this.optimizer_!==t&&(this.optimizer_=t,this.isOptimizerOwned=!1)}dispose(){const t=super.dispose();if(t.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=dx().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=n-dx().numTensors}return t}getLossIdentifiers(){let t;if(typeof this.loss=="string")t=ga(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");t=this.loss.map(n=>ga(n))}else{const n=Object.keys(this.loss);t={};const s=this.loss;for(const o of n)if(typeof s[o]=="string")t[o]=ga(s[o]);else throw new Error("Serialization of non-string loss is not supported.")}return t}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[ga(nv(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(t=>ga(nv(t)));{const t={};for(const n in this.metrics)t[n]=ga(nv(this.metrics[n]));return t}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(t){if(t.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(t.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(t.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=kx(t.optimizer_config),s=Sa(n);let o;if(typeof t.loss=="string")o=yu(t.loss);else if(Array.isArray(t.loss))o=t.loss.map(i=>yu(i));else if(t.loss!=null){o={};for(const i in t.loss)o[i]=yu(t.loss[i])}let r;if(Array.isArray(t.metrics))r=t.metrics.map(i=>yu(i));else if(t.metrics!=null){r={};for(const i in t.metrics)r[i]=yu(t.metrics[i])}this.compile({loss:o,metrics:r,optimizer:s})}async save(t,n){if(typeof t=="string"){const u=$De(t);if(u.length===0)throw new Se(`Cannot find any save handlers for URL '${t}'`);if(u.length>1)throw new Se(`Found more than one (${u.length}) save handlers for URL '${t}'`);t=u[0]}if(t.save==null)throw new Se("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const s=await XD(this.getNamedWeights(n)),o=!1,r=null,a={modelTopology:this.toJSON(r,o),format:YBe,generatedBy:`TensorFlow.js tfjs-layers v${m6}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const u="optimizer",{data:c,specs:d}=await XD(await this.optimizer.getWeights(),u);s.specs.push(...d),s.data=uz([s.data,c])}return this.userDefinedMetadata!=null&&(kR(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=s.data,a.weightSpecs=s.specs,t.save(a)}setUserDefinedMetadata(t){kR(t,this.name),this.userDefinedMetadata=t}getUserDefinedMetadata(){return this.userDefinedMetadata}}md.className="Model";nt(md);class $6 extends md{}$6.className="Functional";nt($6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class gp extends md{constructor(t){super({inputs:[],outputs:[]});if(t=t||{},this.trainable=!0,this.built=!1,this.name=t.name!=null?t.name:r1("sequential_"),t.layers!=null)for(const n of t.layers)this.add(n)}checkShape(t){if(t.inboundNodes[0].outputTensors[0].shape.some(s=>s<0))throw new Se(`Negative dimension size caused by adding layer ${t.name} with input shape [${t.inboundNodes[0].inputTensors[0].shape}]`)}add(t){const n=t instanceof gp||t instanceof md;let s;if(n){if(s=t,s.outputs.length!==1)throw new Se("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(s.inputs.length!==1)throw new Se("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(t.inboundNodes.length===0){if(t.batchInputShape==null)throw new Se("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const o=J4e({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(o)}if(n)this.outputs=s.outputs,this.inputs=s.inputs;else{if(t.inboundNodes.length!==1)throw new Se(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${t.name} which has ${t.inboundNodes.length} pre-existing inbound connections.`);if(t.inboundNodes[0].outputTensors.length!==1)throw new Se("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=i6(this.outputs[0])}this.inboundNodes=[],new i1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:tc(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{const o=t.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(t,n){return this.model==null&&this.build(),this.model.call(t,n)}build(t){if(Hn(t),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new md({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(t,n,s=console.log){this.built||this.build(),super.summary(t,n,s)}setWeights(t){this.model==null&&this.build(),this.model.setWeights(t)}evaluate(t,n,s={}){if(!this.built)throw new Ur("The model needs to be compiled before being used.");return this.model.evaluate(t,n,s)}async evaluateDataset(t,n){if(!this.built)throw new Ur("The model needs to be compiled before being used.");return this.model.evaluateDataset(t,n)}predict(t,n={}){return this.model==null&&this.build(),this.model.predict(t,n)}predictOnBatch(t){return this.model==null&&this.build(),this.model.predictOnBatch(t)}compile(t){this.build(),this.model.compile(t),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(t){this.model.optimizer=t}async fit(t,n,s={}){if(!this.built)throw new Ur("The model needs to be compiled before being used.");return this.model.fit(t,n,s)}async fitDataset(t,n){if(!this.built)throw new Ur("The model needs to be compiled before being used.");return this.model.fitDataset(t,n)}async trainOnBatch(t,n){return this.model.trainOnBatch(t,n)}static fromConfig(t,n,s={},o=!1){let r,i={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new Se("Legacy serialization format not supported yet.");r=n}else J(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),r=n.layers,delete n.layers,i=n;const a=new t(i);if(!(a instanceof gp))throw new nn(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of r){const c=Sa(l,void 0,o);o&&c.setFastWeightInitDuringBuild(!0),a.add(c)}return a}set stopTraining(t){if(this.model==null)throw new Se("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=t}get stopTraining(){if(this.model==null)throw new Se("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const t=[];for(const n of this.layers){const s={};s.className=n.getClassName(),s.config=n.getConfig(),t.push(s)}return{name:this.name,layers:t}}}gp.className="Sequential";nt(gp);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Uo extends hf{getConfig(){return{}}}class C6 extends Uo{apply(t,n=1){return P4e(t,n)}}C6.className="elu";nt(C6);class x6 extends Uo{apply(t){return tV(t)}}x6.className="selu";nt(x6);class k6 extends Uo{apply(t){return Ba(t)}}k6.className="relu";nt(k6);class S6 extends Uo{apply(t){return Be(()=>Zy(6,Ba(t)))}}S6.className="relu6";nt(S6);class I6 extends Uo{apply(t){return t}}I6.className="linear";nt(I6);class E6 extends Uo{apply(t){return pf(t)}}E6.className="sigmoid";nt(E6);class T6 extends Uo{apply(t){return B4e(t)}}T6.className="hardSigmoid";nt(T6);class _6 extends Uo{apply(t){return Ug(t)}}_6.className="softplus";nt(_6);class N6 extends Uo{apply(t){return L4e(t)}}N6.className="softsign";nt(N6);class A6 extends Uo{apply(t){return AS(t)}}A6.className="tanh";nt(A6);class GI extends Uo{apply(t,n=-1){return qS(t,n)}}GI.className="softmax";nt(GI);class D6 extends Uo{apply(t,n=-1){return Bz(t,n)}}D6.className="logSoftmax";nt(D6);class R6 extends Uo{apply(t,n=1){return Be(()=>Ce(pf(Ce(t,n)),t))}}R6.className="swish";nt(R6);class M6 extends Uo{apply(t){return Be(()=>Ce(t,AS(Ug(t))))}}M6.className="mish";nt(M6);function wl(e){return e.getClassName()}function u$(e,t={}){return Xg(e,Br.getMap().classNameMap,t,"activation")}function $l(e){if(e==null){const t={};return t.className="linear",t.config={},u$(t)}if(typeof e=="string"){const t={};return t.className=e,t.config={},u$(t)}else return e instanceof Uo?e:u$(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function XBe(e){if(e!=null&&typeof e!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}class O6 extends hf{}class F6 extends O6{constructor(t){super();XBe(t),this.l1=t==null||t.l1==null?.01:t.l1,this.l2=t==null||t.l2==null?.01:t.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(t){return Be(()=>{let n=Ys([1]);return this.hasL1&&(n=at(n,_t(Ce(this.l1,Ks(t))))),this.hasL2&&(n=at(n,_t(Ce(this.l2,Qg(t))))),Ne(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(t,n){return new t({l1:n.l1,l2:n.l2})}}F6.className="L1L2";nt(F6);const DR={l1l2:"L1L2"};function Yn(e){return AI(e)}function RR(e,t={}){return Xg(e,Br.getMap().classNameMap,t,"regularizer")}function gs(e){if(e==null)return null;if(typeof e=="string"){const n={className:e in DR?DR[e]:e,config:{}};return RR(n)}else return e instanceof O6?e:RR(e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class P6 extends _n{constructor(t){super(t==null?{}:t);this.supportsMasking=!0,t!=null&&(this.maxValue=t.maxValue)}call(t,n){t=an(t);let s=Ba(t);return this.maxValue!=null&&(s=Sr(s,0,this.maxValue)),s}computeOutputShape(t){return t}getConfig(){const t={maxValue:this.maxValue},n=super.getConfig();return Object.assign(t,n),t}}P6.className="ReLU";nt(P6);class L6 extends _n{constructor(t){super(t==null?{}:t);this.DEFAULT_ALPHA=.3,t==null&&(t={}),this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const s=an(t);return PS(s,this.alpha)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}}L6.className="LeakyReLU";nt(L6);class B6 extends _n{constructor(t){super(t==null?{}:t);if(this.DEFAULT_ALPHA_INITIALIZER="zeros",t==null&&(t={}),this.supportsMasking=!0,this.alphaInitializer=ps(t.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=gs(t.alphaRegularizer),this.alphaConstraint=Hs(t.alphaConstraint),t.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(t.sharedAxes))this.sharedAxes=t.sharedAxes;else if(typeof t.sharedAxes=="number")this.sharedAxes=[t.sharedAxes];else throw new Se(`Expected sharedAxes to be a number or an array of numbers, but got ${t.sharedAxes}`)}build(t){t=Hn(t);const n=t.slice(1);if(this.sharedAxes!=null)for(const o of this.sharedAxes)n[o-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const s={};if(this.sharedAxes!=null)for(let o=1;o<t.length;++o)s[o]=t[o];this.inputSpec=[new Vs({ndim:t.length,axes:s})],this.built=!0}call(t,n){return t=an(t),jS(t,this.alpha.read())}getConfig(){const t={alphaInitializer:bs(this.alphaInitializer),alphaRegularizer:Yn(this.alphaRegularizer),alphaConstraint:Ws(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(t,n),t}}B6.className="PReLU";nt(B6);class z6 extends _n{constructor(t){super(t==null?{}:t);if(this.DEFAULT_ALPHA=1,t==null&&(t={}),t.alpha!=null&&t.alpha!==this.DEFAULT_ALPHA)throw new nn(`Non-default alpha value (${t.alpha}) is not supported by the ELU layer yet.`);this.alpha=t.alpha==null?this.DEFAULT_ALPHA:t.alpha}call(t,n){const s=an(t);return qy(s)}computeOutputShape(t){return t}getConfig(){const t={alpha:this.alpha},n=super.getConfig();return Object.assign(t,n),t}}z6.className="ELU";nt(z6);class V6 extends _n{constructor(t){super(t==null?{}:t);this.DEFAULT_THETA=1,t==null&&(t={}),this.theta=t.theta==null?this.DEFAULT_THETA:t.theta}call(t,n){const s=an(t);return Ce(s,bt(oi(s,this.theta),"float32"))}computeOutputShape(t){return t}getConfig(){const t={theta:this.theta},n=super.getConfig();return Object.assign(t,n),t}}V6.className="ThresholdedReLU";nt(V6);class W6 extends _n{constructor(t){super(t==null?{}:t);this.DEFAULT_AXIS=1,t==null&&(t={}),this.softmax=new GI().apply,this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis}call(t,n){const s=an(t);return this.softmax(s,this.axis)}computeOutputShape(t){return t}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}W6.className="Softmax";nt(W6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vd(e,t,n){if(typeof e=="number")return tc(e,t);if(e.length!==t)throw new Se(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let s=0;s<t;++s){const o=e[s];if(!R4e(o))throw new Se(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${o}`)}return e}function Ci(e,t,n,s,o=1){if(e==null)return e;const r=t+(t-1)*(o-1);let i;return n==="same"?i=e:i=e-r+1,Math.floor((i+s-1)/s)}function Vi(e,t,n,s){if(e==null)return null;if(s==="valid")e=e*t+yl([n-t,0]);else if(s==="same")e=e*t;else throw new Se(`Unsupport padding mode: ${s}.`);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function KI(e,t){return Be(()=>(_s(t),t==="channelsFirst"?Rn(e,[0,2,3,1]):e))}function H6(e,t){return Be(()=>(_s(t),t==="channelsFirst"?Rn(e,[0,2,3,4,1]):e))}function ZBe(e,t,n,s=1,o="valid",r,i=1){return Be(()=>{if(r==null&&(r=Ei()),_s(r),e.shape.length!==3)throw new Se(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(t.shape.length!==3)throw new Se(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new Se(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if(r==="channelsFirst"&&(e=Rn(e,[0,2,1])),o==="causal")throw new nn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=Az(e,t,s,o==="same"?"same":"valid","NWC",i);return n!=null&&(a=Oi(a,n)),a})}function MR(e,t,n,s=[1,1],o="valid",r,i,a=null){return Be(()=>{if(r==null&&(r=Ei()),_s(r),e.rank!==3&&e.rank!==4)throw new Se(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(t.rank!==3&&t.rank!==4)throw new Se(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=KI(e,r);if(o==="causal")throw new nn("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=Q3e({x:l,filter:t,strides:s,pad:o==="same"?"same":"valid",dilations:i,dataFormat:"NHWC",bias:n,activation:a}),r==="channelsFirst"&&(l=Rn(l,[0,3,1,2])),l})}function JBe(e,t,n,s=[1,1,1],o="valid",r,i){return Be(()=>{if(r==null&&(r=Ei()),_s(r),e.rank!==4&&e.rank!==5)throw new Se(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(t.rank!==4&&t.rank!==5)throw new Se(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let a=H6(e,r);if(o==="causal")throw new nn("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=mMe(a,t,s,o==="same"?"same":"valid","NDHWC",i),n!=null&&(a=Oi(a,n)),r==="channelsFirst"&&(a=Rn(a,[0,4,1,2,3])),a})}class u1 extends _n{constructor(t,n){super(n);if(this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",u1.verifyArgs(n),this.rank=t,Xs(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new nn(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=vd(n.kernelSize,t,"kernelSize"),this.strides=vd(n.strides==null?1:n.strides,t,"strides"),this.padding=n.padding==null?"valid":n.padding,Er(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,_s(this.dataFormat),this.activation=$l(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=ps(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Hs(n.biasConstraint),this.biasRegularizer=gs(n.biasRegularizer),this.activityRegularizer=gs(n.activityRegularizer),this.dilationRate=vd(n.dilationRate==null?1:n.dilationRate,t,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new Se(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new Se(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new Se(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(t){if(zi("kernelSize"in t,"required key 'kernelSize' not in config"),typeof t.kernelSize!="number"&&!DI(t.kernelSize,"number",1,3))throw new Se(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(t.kernelSize)}.`)}getConfig(){const t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:wl(this.activation),useBias:this.useBias,biasInitializer:bs(this.biasInitializer),biasRegularizer:Yn(this.biasRegularizer),activityRegularizer:Yn(this.activityRegularizer),biasConstraint:Ws(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}class yf extends u1{constructor(t,n){super(t,n);this.kernel=null,yf.verifyArgs(n),this.filters=n.filters,Xs(this.filters,"filters"),this.kernelInitializer=ps(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Hs(n.kernelConstraint),this.kernelRegularizer=gs(n.kernelRegularizer)}build(t){t=Hn(t);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new Se(`The channel dimension of the input should be defined. Found ${t[n]}`);const s=t[n],o=this.kernelSize.concat([s,this.filters]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:s}}],this.built=!0}call(t,n){return Be(()=>{t=an(t);let s;const o=this.bias==null?null:this.bias.read(),r=VV(this.activation.getClassName());if(r!=null&&this.rank===2)s=MR(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(this.rank===1)s=ZBe(t,this.kernel.read(),o,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)s=MR(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)s=JBe(t,this.kernel.read(),o,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new nn("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(s=this.activation.apply(s))}return s})}computeOutputShape(t){t=Hn(t);const n=[],s=this.dataFormat==="channelsLast"?t.slice(1,t.length-1):t.slice(2);for(let r=0;r<s.length;++r){const i=Ci(s[r],this.kernelSize[r],this.padding,this.strides[r],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[r]);n.push(i)}let o=[t[0]];return this.dataFormat==="channelsLast"?(o=o.concat(n),o.push(this.filters)):(o.push(this.filters),o=o.concat(n)),o}getConfig(){const t={filters:this.filters,kernelInitializer:bs(this.kernelInitializer),kernelRegularizer:Yn(this.kernelRegularizer),kernelConstraint:Ws(this.kernelConstraint)},n=super.getConfig();return Object.assign(t,n),t}static verifyArgs(t){if(!("filters"in t)||typeof t.filters!="number"||t.filters<1)throw new Se(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(t.filters)}`)}}class nm extends yf{constructor(t){super(2,t);nm.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!DI(t.kernelSize,"number",1,2))throw new Se(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(t.kernelSize)}.`)}}nm.className="Conv2D";nt(nm);class sm extends yf{constructor(t){super(3,t);sm.verifyArgs(t)}getConfig(){const t=super.getConfig();return delete t.rank,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!(Array.isArray(t.kernelSize)&&(t.kernelSize.length===1||t.kernelSize.length===3)))throw new Se(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(t.kernelSize)}.`)}}sm.className="Conv3D";nt(sm);class U6 extends nm{constructor(t){super(t);if(this.inputSpec=[new Vs({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new Se(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=Hn(t),t.length!==4)throw new Se("Input should have rank 4; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new Se("The channel dimension of the inputs should be defined. Found `None`.");const s=t[n],o=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Vs({ndim:4,axes:{[n]:s}})],this.built=!0}call(t,n){return Be(()=>{let s=an(t);if(s.shape.length!==4)throw new Se(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const o=s.shape,r=o[0];let i,a;this.dataFormat==="channelsFirst"?(i=2,a=3):(i=1,a=2);const l=o[i],u=o[a],c=this.kernelSize[0],d=this.kernelSize[1],f=this.strides[0],h=this.strides[1],p=Vi(l,f,c,this.padding),g=Vi(u,h,d,this.padding),m=[r,p,g,this.filters];this.dataFormat!=="channelsLast"&&(s=Rn(s,[0,2,3,1]));let v=Dz(s,this.kernel.read(),m,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(v=Rn(v,[0,3,1,2])),this.bias!=null&&(v=Oi(v,this.bias.read(),this.dataFormat)),this.activation!=null&&(v=this.activation.apply(v)),v})}computeOutputShape(t){t=Hn(t);const n=t.slice();let s,o,r;this.dataFormat==="channelsFirst"?(s=1,o=2,r=3):(s=3,o=1,r=2);const i=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],u=this.strides[1];return n[s]=this.filters,n[o]=Vi(n[o],l,i,this.padding),n[r]=Vi(n[r],u,a,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}U6.className="Conv2DTranspose";nt(U6);class j6 extends sm{constructor(t){super(t);if(this.inputSpec=[new Vs({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new Se(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(t){if(t=Hn(t),t.length!==5)throw new Se("Input should have rank 5; Received input shape: "+JSON.stringify(t));const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null)throw new Se("The channel dimension of the inputs should be defined. Found `None`.");const s=t[n],o=this.kernelSize.concat([this.filters,s]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Vs({ndim:5,axes:{[n]:s}})],this.built=!0}call(t,n){return Be(()=>{let s=an(t);if(s.shape.length!==5)throw new Se(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${s.shape.length}`);const o=s.shape,r=o[0];let i,a,l;this.dataFormat==="channelsFirst"?(l=2,i=3,a=4):(l=1,i=2,a=3);const u=o[l],c=o[i],d=o[a],f=this.kernelSize[0],h=this.kernelSize[1],p=this.kernelSize[2],g=this.strides[0],m=this.strides[1],v=this.strides[2],b=Vi(u,g,f,this.padding),$=Vi(c,m,h,this.padding),y=Vi(d,v,p,this.padding),w=[r,b,$,y,this.filters];this.dataFormat!=="channelsLast"&&(s=Rn(s,[0,2,3,4,1]));let C=yMe(s,this.kernel.read(),w,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(C=Rn(C,[0,4,1,2,3])),this.bias!==null&&(C=Oi(C,this.bias.read(),this.dataFormat)),this.activation!==null&&(C=this.activation.apply(C)),C})}computeOutputShape(t){t=Hn(t);const n=t.slice();let s,o,r,i;this.dataFormat==="channelsFirst"?(s=1,o=2,r=3,i=4):(s=4,o=1,r=2,i=3);const a=this.kernelSize[0],l=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],d=this.strides[1],f=this.strides[2];return n[s]=this.filters,n[o]=Vi(n[o],c,a,this.padding),n[r]=Vi(n[r],d,l,this.padding),n[i]=Vi(n[i],f,u,this.padding),n}getConfig(){const t=super.getConfig();return delete t.dilationRate,t}}j6.className="Conv3DTranspose";nt(j6);class G6 extends yf{constructor(t,n){super(t,n);if(this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new Se("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new Se("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new Se(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=ps(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=gs(n.depthwiseRegularizer),this.depthwiseConstraint=Hs(n.depthwiseConstraint),this.pointwiseInitializer=ps(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=gs(n.pointwiseRegularizer),this.pointwiseConstraint=Hs(n.pointwiseConstraint)}build(t){if(t=Hn(t),t.length<this.rank+2)throw new Se(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(t)}`);const n=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[n]==null||t[n]<0)throw new Se(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(t[n])}`);const s=t[n],o=this.kernelSize.concat([s,this.depthMultiplier]),r=[];for(let a=0;a<this.rank;++a)r.push(1);r.push(s*this.depthMultiplier,this.filters);const i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new Vs({ndim:this.rank+2,axes:{[n]:s}})],this.built=!0}call(t,n){return Be(()=>{t=an(t);let s;if(this.rank===1)throw new nn("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(t=Rn(t,[0,2,3,1])),s=nV(t,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(s=Oi(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),this.dataFormat==="channelsFirst"&&(s=Rn(s,[0,3,1,2])),s})}getConfig(){const t=super.getConfig();return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=bs(this.depthwiseInitializer),t.pointwiseInitializer=bs(this.pointwiseInitializer),t.depthwiseRegularizer=Yn(this.depthwiseRegularizer),t.pointwiseRegularizer=Yn(this.pointwiseRegularizer),t.depthwiseConstraint=Ws(this.depthwiseConstraint),t.pointwiseConstraint=Ws(this.pointwiseConstraint),t}}G6.className="SeparableConv";class K6 extends G6{constructor(t){super(2,t)}}K6.className="SeparableConv2D";nt(K6);class c1 extends yf{constructor(t){super(1,t);c1.verifyArgs(t),this.inputSpec=[{ndim:3}]}getConfig(){const t=super.getConfig();return delete t.rank,delete t.dataFormat,t}static verifyArgs(t){if(typeof t.kernelSize!="number"&&!DI(t.kernelSize,"number",1,1))throw new Se(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(t.kernelSize)}.`)}}c1.className="Conv1D";nt(c1);class q6 extends _n{constructor(t){super(t);typeof t.cropping=="number"?this.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:typeof t.cropping[0]=="number"?this.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:this.cropping=t.cropping,this.dataFormat=t.dataFormat===void 0?"channelsLast":t.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(t){return this.dataFormat==="channelsFirst"?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]}call(t,n){return Be(()=>{if(t=an(t),this.dataFormat==="channelsLast"){const s=ev(t,this.cropping[0][0],t.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return ev(s,this.cropping[1][0],t.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const s=ev(t,this.cropping[0][0],t.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return ev(s,this.cropping[1][0],t.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const t={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}q6.className="Cropping2D";nt(q6);class Y6 extends _n{constructor(t){super(t);this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=t.size==null?this.DEFAULT_SIZE:t.size,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,_s(this.dataFormat),this.interpolation=t.interpolation==null?"nearest":t.interpolation,N4e(this.interpolation)}computeOutputShape(t){if(this.dataFormat==="channelsFirst"){const n=t[2]==null?null:this.size[0]*t[2],s=t[3]==null?null:this.size[1]*t[3];return[t[0],t[1],n,s]}else{const n=t[1]==null?null:this.size[0]*t[1],s=t[2]==null?null:this.size[1]*t[2];return[t[0],n,s,t[3]]}}call(t,n){return Be(()=>{let s=an(t);const o=s.shape;if(this.dataFormat==="channelsFirst"){s=Rn(s,[0,2,3,1]);const r=this.size[0]*o[2],i=this.size[1]*o[3],a=this.interpolation==="nearest"?Jm.resizeNearestNeighbor(s,[r,i]):Jm.resizeBilinear(s,[r,i]);return Rn(a,[0,3,1,2])}else{const r=this.size[0]*o[1],i=this.size[1]*o[2];return this.interpolation==="nearest"?Jm.resizeNearestNeighbor(s,[r,i]):Jm.resizeBilinear(s,[r,i])}})}getConfig(){const t={size:this.size,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}Y6.className="UpSampling2D";nt(Y6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function QBe(e,t,n=[1,1],s="valid",o,r){return Be(()=>{o==null&&(o=Ei()),_s(o);let i=KI(e,o);if(e.rank!==4)throw new Se(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(t.rank!==4)throw new Se(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return i=OS(i,t,n,s==="same"?"same":"valid","NHWC",r),o==="channelsFirst"&&(i=Rn(i,[0,3,1,2])),i})}class X6 extends u1{constructor(t){super(2,t);this.depthwiseKernel=null,this.depthMultiplier=t.depthMultiplier==null?1:t.depthMultiplier,this.depthwiseInitializer=ps(t.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Hs(t.depthwiseConstraint),this.depthwiseRegularizer=gs(t.depthwiseRegularizer)}build(t){if(t=Hn(t),t.length<4)throw new Se(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(t)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(t[n]==null||t[n]<0)throw new Se(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${t[n]}).`);const s=t[n],o=[this.kernelSize[0],this.kernelSize[1],s,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[s*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Be(()=>{t=an(t);let s=QBe(t,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(s=Oi(s,this.bias.read(),this.dataFormat)),this.activation!=null&&(s=this.activation.apply(s)),s})}computeOutputShape(t){t=Hn(t);const n=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2],o=this.dataFormat==="channelsFirst"?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,r=Ci(n,this.kernelSize[0],this.padding,this.strides[0]),i=Ci(s,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[t[0],o,r,i]:[t[0],r,i,o]}getConfig(){const t=super.getConfig();return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=bs(this.depthwiseInitializer),t.depthwiseRegularizer=Yn(this.depthwiseRegularizer),t.depthwiseConstraint=Ws(this.depthwiseRegularizer),t}}X6.className="DepthwiseConv2D";nt(X6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Z6(e,t,n,s){if(Array.isArray(e)){if(t!=null||n!=null)throw new Se("When inputs is an array, neither initialState or constants should be provided");s!=null&&(n=e.slice(e.length-s,e.length),e=e.slice(0,e.length-s)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function o(r){return r==null||Array.isArray(r)?r:[r]}return t=o(t),n=o(n),{inputs:e,initialState:t,constants:n}}function J6(e,t,n,s=!1,o,r,i=!1,a=!1){return Be(()=>{const l=t.shape.length;if(l<3)throw new Se(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(Ti(2,l));if(t=Rn(t,u),r!=null)throw new nn("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),o!=null&&(o=bt(bt(o,"bool"),"float32"),o.rank===l-1&&(o=Pr(o,-1)),o=Rn(o,u)),s&&(t=Ju(t,0),o!=null&&(o=Ju(o,0)));const c=[];let d,f=n;const h=t.shape[0],p=Vd(t);let g;o!=null&&(g=Vd(o));for(let v=0;v<h;++v){const b=p[v],$=Be(()=>e(b,f));if(o==null)d=$[0],f=$[1];else{const y=Be(()=>{const w=g[v],C=Nt(Qr(w),w),x=at(Ce($[0],w),Ce(f[0],C)),S=f.map((T,I)=>at(Ce($[1][I],w),Ce(T,C)));return{output:x,newStates:S}});d=y.output,f=y.newStates}a&&c.push(d)}let m;return a&&(m=Qu(c,1)),[d,m,f]})}class Vl extends _n{constructor(t){super(t);let n;if(t.cell==null)throw new Se("cell property is missing for the constructor of RNN.");if(Array.isArray(t.cell)?n=new XI({cells:t.cell}):n=t.cell,n.stateSize==null)throw new Se("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=t.returnSequences==null?!1:t.returnSequences,this.returnState=t.returnState==null?!1:t.returnState,this.goBackwards=t.goBackwards==null?!1:t.goBackwards,this._stateful=t.stateful==null?!1:t.stateful,this.unroll=t.unroll==null?!1:t.unroll,this.supportsMasking=!0,this.inputSpec=[new Vs({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Ti(0,t).map(n=>null)}else return this.states_}setStates(t){this.states_=t}computeOutputShape(t){$x(t)&&(t=t[0]),t=t;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const s=n[0];let o;if(this.returnSequences?o=[t[0],t[1],s]:o=[t[0],s],this.returnState){const r=[];for(const i of n)r.push([t[0],i]);return[o].concat(r)}else return o}computeMask(t,n){return Be(()=>{Array.isArray(n)&&(n=n[0]);const s=this.returnSequences?n:null;if(this.returnState){const o=this.states.map(r=>null);return[s].concat(o)}else return s})}get states(){if(this.states_==null){const t=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let s=0;s<t;++s)n.push(null);return n}else return this.states_}set states(t){this.states_=t}build(t){if(this.numConstants!=null)throw new nn("Constants support is not implemented in RNN yet.");$x(t)&&(t=t[0]),t=t;const n=this.stateful?t[0]:null,s=t.slice(2);this.inputSpec[0]=new Vs({shape:[n,null,...s]});const o=[t[0]].concat(t.slice(2));this.cell.build(o);let r;if(Array.isArray(this.cell.stateSize)?r=this.cell.stateSize:r=[this.cell.stateSize],this.stateSpec!=null){if(!Pn(this.stateSpec.map(i=>i.shape[i.shape.length-1]),r))throw new Se(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=r.map(i=>new Vs({shape:[null,i]}));this.stateful&&this.resetStates()}resetStates(t,n=!1){Be(()=>{if(!this.stateful)throw new Bi("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape[0];if(s==null)throw new Se("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>Ys([s,o])):this.states_=[Ys([s,this.cell.stateSize])];else if(t==null)gn(this.states_),this.keptStates!=null&&(gn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>Ys([s,o])):this.states_[0]=Ys([s,this.cell.stateSize]);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new Se(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n===!0?this.keptStates.push(this.states_.slice()):gn(this.states_);for(let o=0;o<this.states_.length;++o){const r=t[o],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,a=[s,i];if(!Pn(r.shape,a))throw new Se(`State ${o} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${r.shape}`);this.states_[o]=r}}this.states_=this.states_.map(o=>ea(o.clone()))})}apply(t,n){let s=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const r=Z6(t,s,o,this.numConstants);t=r.inputs,s=r.initialState,o=r.constants;let i=[],a=[];if(s!=null){n.initialState=s,i=i.concat(s),this.stateSpec=[];for(const u of s)this.stateSpec.push(new Vs({shape:u.shape}));a=a.concat(this.stateSpec)}if(o!=null&&(n.constants=o,i=i.concat(o),this.numConstants=o.length),i[0]instanceof ji){const u=[t].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(t,n)}call(t,n){return Be(()=>{const s=n==null?null:n.mask,o=n==null?null:n.training;let r=n==null?null:n.initialState;t=an(t),r==null&&(this.stateful?r=this.states_:r=this.getInitialState(t));const i=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(r.length!==i)throw new Se(`RNN Layer has ${i} state(s) but was passed ${r.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:o},u=J6((p,g)=>{const m=this.cell.call([p].concat(g),a);return[m[0],m.slice(1)]},t,r,this.goBackwards,s,null,this.unroll,this.returnSequences),c=u[0],d=u[1],f=u[2];this.stateful&&this.resetStates(f,o);const h=this.returnSequences?d:c;return this.returnState?[h].concat(f):h})}getInitialState(t){return Be(()=>{let n=Ys(t.shape);return n=_t(n,[1,2]),n=Jg(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(s=>s>1?yx(n,[1,s]):n):this.cell.stateSize>1?[yx(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(t)}getConfig(){const t=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const s=this.cell.getConfig();return this.getClassName()===Vl.className&&(n.cell={className:this.cell.getClassName(),config:s}),Object.assign({},s,t,n)}static fromConfig(t,n,s={}){const o=n.cell,r=Sa(o,s);return new t(Object.assign(n,{cell:r}))}}Vl.className="RNN";nt(Vl);class d1 extends _n{}class qI extends d1{constructor(t){super(t);this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,Xs(this.units,"units"),this.activation=$l(t.activation==null?this.DEFAULT_ACTIVATION:t.activation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=ps(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ps(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ps(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=gs(t.kernelRegularizer),this.recurrentRegularizer=gs(t.recurrentRegularizer),this.biasRegularizer=gs(t.biasRegularizer),this.kernelConstraint=Hs(t.kernelConstraint),this.recurrentConstraint=Hs(t.recurrentConstraint),this.biasConstraint=Hs(t.biasConstraint),this.dropout=Wd([1,yl([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Wd([1,yl([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Hn(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Be(()=>{if(t=t,t.length!==2)throw new Se(`SimpleRNNCell expects 2 input Tensors, got ${t.length}.`);let s=t[1];t=t[0];const o=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Cl({ones:()=>Qr(t),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Cl({ones:()=>Qr(s),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let r;const i=this.dropoutMask,a=this.recurrentDropoutMask;i!=null?r=Xi(Ce(t,i),this.kernel.read()):r=Xi(t,this.kernel.read()),this.bias!=null&&(r=Oi(r,this.bias.read())),a!=null&&(s=Ce(s,a));let l=at(r,Xi(s,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:wl(this.activation),useBias:this.useBias,kernelInitializer:bs(this.kernelInitializer),recurrentInitializer:bs(this.recurrentInitializer),biasInitializer:bs(this.biasInitializer),kernelRegularizer:Yn(this.kernelRegularizer),recurrentRegularizer:Yn(this.recurrentRegularizer),biasRegularizer:Yn(this.biasRegularizer),activityRegularizer:Yn(this.activityRegularizer),kernelConstraint:Ws(this.kernelConstraint),recurrentConstraint:Ws(this.recurrentConstraint),biasConstraint:Ws(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},t,n)}}qI.className="SimpleRNNCell";nt(qI);class Q6 extends Vl{constructor(t){t.cell=new qI(t);super(t)}call(t,n){return Be(()=>{this.cell.dropoutMask!=null&&(gn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}static fromConfig(t,n){return new t(n)}}Q6.className="SimpleRNN";nt(Q6);class YI extends d1{constructor(t){super(t);if(this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new Se("GRUCell does not support reset_after parameter set to true.");this.units=t.units,Xs(this.units,"units"),this.activation=$l(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=$l(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=ps(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ps(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ps(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=gs(t.kernelRegularizer),this.recurrentRegularizer=gs(t.recurrentRegularizer),this.biasRegularizer=gs(t.biasRegularizer),this.kernelConstraint=Hs(t.kernelConstraint),this.recurrentConstraint=Hs(t.recurrentConstraint),this.biasConstraint=Hs(t.biasConstraint),this.dropout=Wd([1,yl([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Wd([1,yl([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){t=Hn(t);const n=t[t.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(t,n){return Be(()=>{if(t=t,t.length!==2)throw new Se(`GRUCell expects 2 input Tensors (inputs, h, c), got ${t.length}.`);const s=n.training==null?!1:n.training;let o=t[1];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Cl({ones:()=>Qr(t),rate:this.dropout,training:s,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Cl({ones:()=>Qr(o),rate:this.recurrentDropout,training:s,count:3,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,i=this.recurrentDropoutMask;let a,l,u;0<this.dropout&&this.dropout<1&&(t=Ce(t,r[0]));let c=Xi(t,this.kernel.read());this.useBias&&(c=Oi(c,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=Ce(o,i[0]));const d=this.recurrentKernel.read(),[f,h]=$r(d,[2*this.units,this.units],d.rank-1),p=Xi(o,f),[g,m,v]=$r(c,3,c.rank-1),[b,$]=$r(p,2,p.rank-1);a=this.recurrentActivation.apply(at(g,b)),l=this.recurrentActivation.apply(at(m,$));const y=Xi(Ce(l,o),h);u=this.activation.apply(at(v,y));const w=at(Ce(a,o),Ce(at(1,ws(a)),u));return[w,w]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:wl(this.activation),recurrentActivation:wl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:bs(this.kernelInitializer),recurrentInitializer:bs(this.recurrentInitializer),biasInitializer:bs(this.biasInitializer),kernelRegularizer:Yn(this.kernelRegularizer),recurrentRegularizer:Yn(this.recurrentRegularizer),biasRegularizer:Yn(this.biasRegularizer),activityRegularizer:Yn(this.activityRegularizer),kernelConstraint:Ws(this.kernelConstraint),recurrentConstraint:Ws(this.recurrentConstraint),biasConstraint:Ws(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},t,n)}}YI.className="GRUCell";nt(YI);class e8 extends Vl{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new YI(t);super(t)}call(t,n){return Be(()=>{this.cell.dropoutMask!=null&&(gn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}e8.className="GRU";nt(e8);class f1 extends d1{constructor(t){super(t);this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=t.units,Xs(this.units,"units"),this.activation=$l(t.activation===void 0?this.DEFAULT_ACTIVATION:t.activation),this.recurrentActivation=$l(t.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),this.useBias=t.useBias==null?!0:t.useBias,this.kernelInitializer=ps(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=ps(t.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=ps(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=t.unitForgetBias,this.kernelRegularizer=gs(t.kernelRegularizer),this.recurrentRegularizer=gs(t.recurrentRegularizer),this.biasRegularizer=gs(t.biasRegularizer),this.kernelConstraint=Hs(t.kernelConstraint),this.recurrentConstraint=Hs(t.recurrentConstraint),this.biasConstraint=Hs(t.biasConstraint),this.dropout=Wd([1,yl([0,t.dropout==null?0:t.dropout])]),this.recurrentDropout=Wd([1,yl([0,t.recurrentDropout==null?0:t.recurrentDropout])]),this.dropoutFunc=t.dropoutFunc,this.implementation=t.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(t){var n;t=Hn(t);const s=t[t.length-1];this.kernel=this.addWeight("kernel",[s,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){const r=this.biasInitializer,i=this.units;o=new(n=class extends ri{apply(l,u){const c=r.apply([i]),d=new OI().apply([i]),f=r.apply([i*2]);return bR(bR(c,d),f)}},n.className="CustomInit",n)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(t,n){return Be(()=>{const s=n.training==null?!1:n.training;if(t=t,t.length!==3)throw new Se(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);let o=t[1];const r=t[2];t=t[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Cl({ones:()=>Qr(t),rate:this.dropout,training:s,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Cl({ones:()=>Qr(o),rate:this.recurrentDropout,training:s,count:4,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,a=this.recurrentDropoutMask;let l,u,c,d;0<this.dropout&&this.dropout<1&&(t=Ce(t,i[0]));let f=Xi(t,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=Ce(o,a[0])),f=at(f,Xi(o,this.recurrentKernel.read())),this.useBias&&(f=Oi(f,this.bias.read()));const[h,p,g,m]=$r(f,4,f.rank-1);l=this.recurrentActivation.apply(h),u=this.recurrentActivation.apply(p),c=at(Ce(u,r),Ce(l,this.activation.apply(g))),d=this.recurrentActivation.apply(m);const v=Ce(d,this.activation.apply(c));return[v,v,c]})}getConfig(){const t=super.getConfig(),n={units:this.units,activation:wl(this.activation),recurrentActivation:wl(this.recurrentActivation),useBias:this.useBias,kernelInitializer:bs(this.kernelInitializer),recurrentInitializer:bs(this.recurrentInitializer),biasInitializer:bs(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Yn(this.kernelRegularizer),recurrentRegularizer:Yn(this.recurrentRegularizer),biasRegularizer:Yn(this.biasRegularizer),activityRegularizer:Yn(this.activityRegularizer),kernelConstraint:Ws(this.kernelConstraint),recurrentConstraint:Ws(this.recurrentConstraint),biasConstraint:Ws(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},t,n)}}f1.className="LSTMCell";nt(f1);class t8 extends Vl{constructor(t){t.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new f1(t);super(t)}call(t,n){return Be(()=>{this.cell.dropoutMask!=null&&(gn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}static fromConfig(t,n){return n.implmentation===0&&(n.implementation=1),new t(n)}}t8.className="LSTM";nt(t8);class XI extends d1{constructor(t){super(t);this.cells=t.cells}get stateSize(){const t=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?t.push(...n.stateSize):t.push(n.stateSize);return t}call(t,n){return Be(()=>{t=t;let s=t.slice(1);const o=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?o.push(s.splice(0,a.stateSize.length)):o.push(s.splice(0,1));o.reverse();const r=[];let i;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];s=o[a],a===0?i=[t[0]].concat(s):i=[i[0]].concat(s),i=l.call(i,n),r.push(i.slice(1))}s=[];for(const a of r.slice().reverse())s.push(...a);return[i[0]].concat(s)})}build(t){$x(t)&&(t=t[0]),t=t;let n;this.cells.forEach((s,o)=>{Lu(`RNNCell_${o}`,()=>{s.build(t),Array.isArray(s.stateSize)?n=s.stateSize[0]:n=s.stateSize,t=[t[0],n]})}),this.built=!0}getConfig(){const t=super.getConfig(),n=r=>({className:r.getClassName(),config:r.getConfig()}),o={cells:this.cells.map(n)};return Object.assign({},t,o)}static fromConfig(t,n,s={}){const o=[];for(const r of n.cells)o.push(Sa(r,s));return new t({cells:o})}get trainableWeights(){if(!this.trainable)return[];const t=[];for(const n of this.cells)t.push(...n.trainableWeights);return t}get nonTrainableWeights(){const t=[];for(const n of this.cells)t.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const s of this.cells)n.push(...s.trainableWeights);return n.concat(t)}return t}getWeights(){const t=[];for(const n of this.cells)t.push(...n.weights);return Cx(t)}setWeights(t){const n=[];for(const s of this.cells){const o=s.weights.length,r=t.splice(o);for(let i=0;i<s.weights.length;++i)n.push([s.weights[i],r[i]])}WI(n)}}XI.className="StackedRNNCells";nt(XI);function Cl(e){const{ones:t,rate:n,training:s=!1,count:o=1,dropoutFunc:r}=e,i=()=>r!=null?r(t(),n):ZV(t(),n),a=()=>em(i,t,s);return!o||o<=1?ea(a().clone()):Array(o).fill(void 0).map(a).map(u=>ea(u.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var eze=globalThis&&globalThis.__rest||function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(n[s[o]]=e[s[o]]);return n};class n8 extends Vl{constructor(t){if(t.unroll)throw new nn("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new nn("It is not possible at the moment to stack convolutional cells.");super(t);this.inputSpec=[new Vs({ndim:5})]}call(t,n){return Be(()=>{if(this.cell.dropoutMask!=null&&(gn(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(gn(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new Se("ConvRNN2D cell does not support constants");const s=n==null?null:n.mask,o=n==null?null:n.training,r=n==null?null:n.initialState;return super.call(t,{mask:s,training:o,initialState:r})})}computeOutputShape(t){let n=this.computeSingleOutputShape(t);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([t[0],...n.slice(-3)])]),n}getInitialState(t){return Be(()=>{const{stateSize:n}=this.cell,s=t.shape,o=this.computeSingleOutputShape(s),r=[o[0],...o.slice(2)],i=Ys(r);return Array.isArray(n)?Array(n.length).fill(i):[i]})}resetStates(t,n=!1){Be(()=>{if(!this.stateful)throw new Bi("Cannot call resetStates() on an RNN Layer that is not stateful.");const s=this.inputSpec[0].shape,o=this.computeSingleOutputShape(s),r=[o[0],...o.slice(2)];if(s[0]==null)throw new Se("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Ys(r)):this.states_=[Ys(r)];else if(t==null)gn(this.states_),this.keptStates!=null&&(gn(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Ys(r)):this.states_[0]=Ys(r);else{if(Array.isArray(t)||(t=[t]),t.length!==this.states_.length)throw new Se(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${t.length} state value(s). Input received: ${t}`);n?this.keptStates.push(this.states_.slice()):gn(this.states_);for(let a=0;a<this.states_.length;++a){const l=t[a],u=r;if(!Pn(l.shape,u))throw new Se(`State ${a} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>ea(a.clone()))})}computeSingleOutputShape(t){const{dataFormat:n,filters:s,kernelSize:o,padding:r,strides:i,dilationRate:a}=this.cell,l=n==="channelsFirst",u=t[l?3:2],c=t[l?4:3],d=Ci(u,o[0],r,i[0],a[0]),f=Ci(c,o[1],r,i[1],a[1]);return[...t.slice(0,2),...l?[s,d,f]:[d,f,s]]}}n8.className="ConvRNN2D";class ZI extends f1{constructor(t){const{filters:n,kernelSize:s,strides:o,padding:r,dataFormat:i,dilationRate:a}=t;super(Object.assign({},t,{units:n}));this.filters=n,Xs(this.filters,"filters"),this.kernelSize=vd(s,2,"kernelSize"),this.kernelSize.forEach(l=>Xs(l,"kernelSize")),this.strides=vd(o||1,2,"strides"),this.strides.forEach(l=>Xs(l,"strides")),this.padding=r||"valid",Er(this.padding),this.dataFormat=i||"channelsLast",_s(this.dataFormat),this.dilationRate=vd(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Xs(l,"dilationRate"))}build(t){var n;t=Hn(t);const s=this.dataFormat==="channelsFirst"?1:t.length-1;if(t[s]==null)throw new Se(`The channel dimension of the input should be defined. Found ${t[s]}`);const o=t[s],r=4,i=this.kernelSize.concat([o,this.filters*r]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*r]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const u=this.biasInitializer,c=this.filters;l=new(n=class extends ri{apply(f,h){const p=u.apply([c]),g=Ll([c]),m=u.apply([c*2]);return MI([p,g,m])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*r],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(t,n){return Be(()=>{if(t.length!==3)throw new Se(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${t.length}.`);const s=n.training||!1,o=t[0],r=t[1],i=t[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Cl({ones:()=>Qr(o),rate:this.dropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,u=(ae,be,ie)=>!be||!be[ie]?ae:Ce(be[ie],ae);let c=u(o,l,0),d=u(o,l,1),f=u(o,l,2),h=u(o,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Cl({ones:()=>Qr(r),rate:this.recurrentDropout,training:s,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let g=u(r,p,0),m=u(r,p,1),v=u(r,p,2),b=u(r,p,3);const $=3,[y,w,C,x]=$r(this.kernel.read(),a,$),[S,T,I,_]=this.useBias?$r(this.bias.read(),a):[null,null,null,null];c=this.inputConv(c,y,S,this.padding),d=this.inputConv(d,w,T,this.padding),f=this.inputConv(f,C,I,this.padding),h=this.inputConv(h,x,_,this.padding);const[N,D,F,P]=$r(this.recurrentKernel.read(),a,$);g=this.recurrentConv(g,N),m=this.recurrentConv(m,D),v=this.recurrentConv(v,F),b=this.recurrentConv(b,P);const M=this.recurrentActivation.apply(at(c,g)),B=this.recurrentActivation.apply(at(d,m)),j=at(Ce(B,i),Ce(M,this.activation.apply(at(f,v)))),X=Ce(this.recurrentActivation.apply(at(h,b)),this.activation.apply(j));return[X,X,j]})}getConfig(){const t=super.getConfig(),n=eze(t,["units"]),s={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,s)}inputConv(t,n,s,o){const r=Xu(t,n,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return s?Oi(r,s,this.dataFormat):r}recurrentConv(t,n){return Xu(t,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}ZI.className="ConvLSTM2DCell";nt(ZI);class s8 extends n8{constructor(t){const n=new ZI(t);super(Object.assign({},t,{cell:n}))}static fromConfig(t,n){return new t(n)}}s8.className="ConvLSTM2D";nt(s8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class JI extends _n{constructor(t){super(t);this.rate=Math.max(Math.min(t.rate,1),0),this.noiseShape=t.noiseShape,this.seed=t.seed,this.supportsMasking=!0}getNoiseShape(t){if(this.noiseShape==null)return this.noiseShape;const n=t.shape,s=[];for(let o=0;o<this.noiseShape.length;++o)s.push(this.noiseShape[o]==null?n[o]:this.noiseShape[o]);return s}call(t,n){return Be(()=>{this.invokeCallHook(t,n);const s=an(t);if(0<this.rate&&this.rate<1){const o=n.training==null?!1:n.training,r=this.getNoiseShape(s);return em(()=>ZV(s,this.rate,r,this.seed),()=>s,o)}return t})}getConfig(){const t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(t,n),t}dispose(){return super.dispose()}}JI.className="Dropout";nt(JI);class o8 extends JI{constructor(t){super(t);this.inputSpec=[{ndim:3}]}getNoiseShape(t){const n=t.shape;return[n[0],1,n[2]]}}o8.className="SpatialDropout1D";nt(o8);class r8 extends _n{constructor(t){super(t);if(this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.batchInputShape==null&&t.inputShape==null&&t.inputDim!=null){let n=null;t.batchSize!=null&&(n=t.batchSize),this.batchInputShape=[n,t.inputDim]}this.units=t.units,Xs(this.units,"units"),this.activation=$l(t.activation),t.useBias!=null&&(this.useBias=t.useBias),this.kernelInitializer=ps(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=ps(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Hs(t.kernelConstraint),this.biasConstraint=Hs(t.biasConstraint),this.kernelRegularizer=gs(t.kernelRegularizer),this.biasRegularizer=gs(t.biasRegularizer),this.activityRegularizer=gs(t.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(t){t=Hn(t);const n=t[t.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(t){t=Hn(t);const n=t.slice();return n[n.length-1]=this.units,n}call(t,n){return Be(()=>{this.invokeCallHook(t,n);const s=an(t),o=VV(this.activation.getClassName());let r;return o!=null?r=Xi(s,this.kernel.read(),o,this.bias?this.bias.read():null):(r=Xi(s,this.kernel.read()),this.bias!=null&&(r=Oi(r,this.bias.read())),this.activation!=null&&(r=this.activation.apply(r))),r})}getConfig(){const t={units:this.units,activation:wl(this.activation),useBias:this.useBias,kernelInitializer:bs(this.kernelInitializer),biasInitializer:bs(this.biasInitializer),kernelRegularizer:Yn(this.kernelRegularizer),biasRegularizer:Yn(this.biasRegularizer),activityRegularizer:Yn(this.activityRegularizer),kernelConstraint:Ws(this.kernelConstraint),biasConstraint:Ws(this.biasConstraint)},n=super.getConfig();return Object.assign(t,n),t}}r8.className="Dense";nt(r8);class i8 extends _n{constructor(t){t=t||{};super(t);this.inputSpec=[{minNDim:3}],this.dataFormat=t.dataFormat}computeOutputShape(t){t=Hn(t);for(const n of t.slice(1))if(n==null)throw new Se(`The shape of the input to "Flatten" is not fully defined (got ${t.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[t[0],pl(t,1)]}call(t,n){return Be(()=>{this.invokeCallHook(t,n);let s=an(t);if(this.dataFormat==="channelsFirst"&&s.rank>1){const o=[0];for(let r=2;r<s.rank;++r)o.push(r);o.push(1),s=Rn(s,o)}return F4e(s)})}getConfig(){const t={};this.dataFormat!=null&&(t.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(t,n),t}}i8.className="Flatten";nt(i8);class a8 extends _n{constructor(t){super(t);this.supportsMasking=!0,this.activation=$l(t.activation)}call(t,n){return Be(()=>{this.invokeCallHook(t,n);const s=an(t);return this.activation.apply(s)})}getConfig(){const t={activation:wl(this.activation)},n=super.getConfig();return Object.assign(t,n),t}}a8.className="Activation";nt(a8);class l8 extends _n{constructor(t){super(t);this.n=t.n,this.inputSpec=[{ndim:2}]}computeOutputShape(t){return[t[0],this.n,t[1]]}call(t,n){return Be(()=>(t=an(t),M4e(t,this.n)))}getConfig(){const t={n:this.n},n=super.getConfig();return Object.assign(t,n),t}}l8.className="RepeatVector";nt(l8);class u8 extends _n{constructor(t){super(t);this.targetShape=t.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(t){return t<0||t==null}fixUnknownDimension(t,n){const s="Total size of new array must be unchanged.",o=n.slice();let r=1,i=null;for(let l=0;l<o.length;++l){const u=o[l];if(this.isUnknown(u))if(i===null)i=l;else throw new Se("Can only specifiy one unknown dimension.");else r*=u}const a=pl(t);if(i!==null){if(r===0||a%r!==0)throw new Se(s);o[i]=a/r}else if(a!==r)throw new Se(s);return o}computeOutputShape(t){let n=!1;for(let s=0;s<t.length;++s)if(this.isUnknown(t[s])){n=!0;break}return n?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))}call(t,n){return Be(()=>{this.invokeCallHook(t,n);const s=an(t),o=s.shape,r=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return Ne(s,r)})}getConfig(){const t={targetShape:this.targetShape},n=super.getConfig();return Object.assign(t,n),t}}u8.className="Reshape";nt(u8);class c8 extends _n{constructor(t){super(t);if(t.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${t.dims} instead.`);const n=Ti(1,t.dims.length+1);if(!Pn(t.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=t.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Vs({ndim:this.dims.length+1})]}computeOutputShape(t){t=Hn(t);const n=t.slice();return this.dims.forEach((s,o)=>{n[o+1]=t[s]}),n}call(t,n){return Rn(an(t),this.dimsIncludingBatch)}getConfig(){const t={dims:this.dims},n=super.getConfig();return Object.assign(t,n),t}}c8.className="Permute";nt(c8);class d8 extends _n{constructor(t){super(t==null?{}:t);this.supportsMasking=!0,t!=null?this.maskValue=t.maskValue==null?0:t.maskValue:this.maskValue=0}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,t),n}computeMask(t,n){const s=an(t),o=-1;return fx(fp(s,this.maskValue),o)}call(t,n){return Be(()=>{this.invokeCallHook(t,n);const s=an(t),o=-1,r=!0,i=fx(fp(s,this.maskValue),o,r);return Ce(s,bt(i,s.dtype))})}}d8.className="Masking";nt(d8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class f8 extends _n{constructor(t){super(t);if(this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",t.batchInputShape==null&&t.inputShape==null){let n=null;t.batchSize!=null&&(n=t.batchSize),t.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(is(t.inputLength))}this.inputDim=t.inputDim,Xs(this.inputDim,"inputDim"),this.outputDim=t.outputDim,Xs(this.outputDim,"outputDim"),this.embeddingsInitializer=ps(t.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=gs(t.embeddingsRegularizer),this.activityRegularizer=gs(t.activityRegularizer),this.embeddingsConstraint=Hs(t.embeddingsConstraint),this.maskZero=t.maskZero,this.supportsMasking=t.maskZero,this.inputLength=t.inputLength}build(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(t){}computeMask(t,n){return Be(()=>this.maskZero?(t=an(t),fp(t,In(t))):null)}computeOutputShape(t){if(t=Hn(t),this.inputLength==null)return[...t,this.outputDim];const n=is(this.inputLength);if(n.length!==t.length-1)throw new Se(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);{let s=0;for(let o=0;o<n.length;++o){const r=n[o],i=t[o+1];if(r!=null&&i!=null&&r!==i)throw new Se(`"inputLength" is ${this.inputLength}, but received input shape has shape ${t}`);r==null&&(n[s]=i),s++}}return[t[0],...n,this.outputDim]}call(t,n){return Be(()=>{this.invokeCallHook(t,n);let s=an(t);s.dtype!=="int32"&&(s=s1(s,"int32"));const o=XV(this.embeddings.read(),Ne(s,[s.size]));return Ne(o,Hn(this.computeOutputShape(s.shape)))})}getConfig(){const t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:bs(this.embeddingsInitializer),embeddingsRegularizer:Yn(this.embeddingsRegularizer),activityRegularizer:Yn(this.activityRegularizer),embeddingsConstraint:Ws(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(t,n),t}}f8.className="Embedding";nt(f8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class yc extends _n{constructor(t){super(t||{});this.supportsMasking=!0}mergeFunction(t){throw new nn}computeElementwiseOpOutputShape(t,n){if(t==null||n==null)return null;if(t.length<n.length)return this.computeElementwiseOpOutputShape(n,t);if(n.length===0)return t;const s=t.slice(0,t.length-n.length);for(let o=0;o<n.length;++o){const r=t[t.length-n.length+o],i=n[o];if(r==null||i==null||r<0||i<0)s.push(null);else if(r===1)s.push(i);else if(i===1)s.push(r);else{if(r!==i)throw new Se("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(n));s.push(r)}}return s}build(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[Hn(t)]),t=t,t.length<2)throw new Se(`A merge layer should be called on an Array of at least 2 inputs. Got ${t.length} input(s).`);let n=[];for(const r of t)r!=null&&r[0]!==null&&n.push(r[0]);if(n=hl(n),n.length>1)throw new Se(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(t)}.`);let s=t[0]==null?null:t[0].slice(1);for(let r=1;r<t.length;++r){const i=t[r]==null?null:t[r].slice(1);s=this.computeElementwiseOpOutputShape(s,i)}const o=t.map(r=>r.length);t.indexOf(null)===-1&&hl(o).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(t,n){return Be(()=>{if(t=t,this.reshapeRequired){const s=[],o=t.map(r=>r.rank);if(o.indexOf(null)===-1){const r=yl(o);for(let i of t){const a=i.rank;for(let l=0;l<r-a;++l)i=Jg(i,1);s.push(i)}return this.mergeFunction(s)}else{let r=!1;for(const l of t){const u=l.rank;if(u==null){const c=l.shape,d=c[0],f=c.slice(1).concat([d]);let h=Ne(l,[d].concat(pl(c.slice(1))));h=Rn(h,[1,0]),h=Ne(h,f),s.push(h),r=!0}else if(u>1){const c=Ti(1,u).concat([0]);s.push(Rn(l,c)),r=!0}else s.push(l)}let i=this.mergeFunction(s);const a=i.rank;if(r){if(a==null){const l=i.shape,u=l.length,c=l[u-1],d=[c].concat(l.slice(0,l.length-1));i=Ne(Rn(Ne(i,[-1,c]),[1,0]),d)}else if(a>1){const l=[a-1].concat(Ti(0,a-1));i=Rn(i,l)}}return i}}else return this.mergeFunction(t)})}computeOutputShape(t){t=t;let n;t[0]==null?n=null:n=t[0].slice(1);for(let o=1;o<t.length;++o){const r=t[o]==null?null:t[o].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}let s=[];for(const o of t)o!=null&&o[0]!==null&&s.push(o[0]);return s=hl(s),s.length===1?n=s.concat(n):n=[null].concat(n),n}computeMask(t,n){return Be(()=>{if(n==null)return null;if(!Array.isArray(n))throw new Se("`mask` should be an Array");if(!Array.isArray(t))throw new Se("`inputs` should be an Array");if(n.length!==t.length)throw new Se(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${t.length} vs ${n.length})`);if(n.every(o=>o==null))return null;n=n.map(o=>o==null?o:Pr(o,0));let s=n[0];for(let o=1;o<n.length-1;++o)s=Da(s,n[o]);return s})}}class h8 extends yc{constructor(t){super(t)}mergeFunction(t){return Be(()=>{let n=t[0].clone();for(let s=1;s<t.length;++s)n=at(n,t[s]);return n})}}h8.className="Add";nt(h8);class p8 extends yc{constructor(t){super(t)}mergeFunction(t){return Be(()=>{let n=t[0].clone();for(let s=1;s<t.length;++s)n=Ce(n,t[s]);return n})}}p8.className="Multiply";nt(p8);class g8 extends yc{constructor(t){super(t)}mergeFunction(t){return Be(()=>{let n=t[0].clone();for(let s=1;s<t.length;++s)n=at(n,t[s]);return Ce(1/t.length,n)})}}g8.className="Average";nt(g8);class m8 extends yc{constructor(t){super(t)}mergeFunction(t){return Be(()=>{let n=t[0];for(let s=1;s<t.length;++s)n=Pl(n,t[s]);return n})}}m8.className="Maximum";nt(m8);class v8 extends yc{constructor(t){super(t)}mergeFunction(t){return Be(()=>{let n=t[0];for(let s=1;s<t.length;++s)n=Zy(n,t[s]);return n})}}v8.className="Minimum";nt(v8);class b8 extends yc{constructor(t){super(t);this.DEFAULT_AXIS=-1,t==null&&(t={}),this.axis=t.axis==null?this.DEFAULT_AXIS:t.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){if(!(Array.isArray(t)&&Array.isArray(t[0]))||t.length===1)throw new Se("A `Concatenate` layer should be called on a list of at least 2 inputs");t=t;let n=!0;for(const o of t)if(o!=null){n=!1;break}if(n)return;const s=[];for(let o=0;o<t.length;++o){const r=t[o].slice();r.splice(this.axis,1);let i=!1;for(const a of s)if(Pn(a,r)){i=!0;break}i||s.push(r)}if(s.length>1)throw new Se("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}mergeFunction(t){return Be(()=>MI(t,this.axis))}computeOutputShape(t){if(!(Array.isArray(t)&&Array.isArray(t[0])))throw new Se("A `Concatenate` layer should be called on a list of inputs.");const n=t,s=n[0].slice(),o=this.axis<0?s.length+this.axis:this.axis;for(const r of n.slice(1)){if(s[o]==null||r[o]==null){s[o]=null;break}s[o]+=r[o]}return s}computeMask(t,n){if(n==null)return null;if(!Array.isArray(n))throw new Se("`mask` should be an array for Concatenate");if(!Array.isArray(t))throw new Se("`inputs` should be an array for Concatenate");if(n.length!==t.length)throw new Se(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${t.length})`);return Be(()=>{let s=!0;if(n.forEach(i=>{if(i!=null){s=!1;return}}),s)return null;const o=[];for(let i=0;i<t.length;++i)n[i]==null?o.push(bt(Qr(t[i]),"bool")):n[i].rank<t[i].rank?o.push(Pr(n[i],-1)):o.push(n[i]);const r=xo(o,this.axis);return Nz(r,-1,!1)})}getConfig(){const t={axis:this.axis},n=super.getConfig();return Object.assign(t,n),t}}b8.className="Concatenate";nt(b8);function Uf(e,t){for(;e<0;)e+=t;return e}function tze(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new nn("batchDot is not implemented for tensors of 4D or higher rank yet");if(J(e.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`),J(e.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`),typeof n=="number"&&(n=[n,n]),e.dtype==="complex64"||t.dtype==="complex64")throw new nn("batchDot is not implemented for complex64-type Tensors yet.");const s=e.shape.length,o=t.shape.length;n==null&&(n=[s-1,o-2]);const r=n;return Be(()=>{let i;if(s>o){i=s-o;const l=[];for(let u=0;u<i;++u)l.push(1);t=Ne(t,t.shape.concat(l))}else if(o>s){i=o-s;const l=[];for(let u=0;u<i;++u)l.push(1);e=Ne(e,e.shape.concat(l))}else i=0;let a;if(e.shape.length===2&&t.shape.length===2)r[0]===r[1]?a=_t(Ce(e,t),r[0]):a=_t(Ce(Rn(e,[1,0]),t),r[1]);else{const l=r[0]!==e.shape.length-1,u=r[1]===t.shape.length-1;a=Mn(e,t,l,u)}if(i>0){let l;s>o?l=s+o-3:l=s-1;const u=[];for(let c=l;c<l+i;++c)u.push(c);a=jg(a,u)}return a.shape.length===1&&(a=Pr(a,1)),a})}class y8 extends yc{constructor(t){super(t);this.axes=t.axes,this.normalize=t.normalize==null?!1:t.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(t){J(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0],s=t[1];if(n.length>3||s.length>3)throw new nn("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,s);if(n[o[0]]!==s[o[1]])throw new Se(`Dimension incompatibility: ${n[o[0]]} !== ${s[o[1]]}`)}mergeFunction(t){if(t.length!==2)throw new Se(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${t.length} input(s).`);let n=t[0],s=t[1],o;return Array.isArray(this.axes)?o=this.axes.map((r,i)=>Uf(r,t[i].shape.length)):o=[Uf(this.axes,n.shape.length),Uf(this.axes,s.shape.length)],this.normalize&&(n=V0(n,o[0]),s=V0(s,o[1])),tze(n,s,o)}interpretAxes(t,n){let s;return Array.isArray(this.axes)?s=this.axes:s=[Uf(this.axes,t.length),Uf(this.axes,n.length)],s}computeOutputShape(t){J(Array.isArray(t)&&t.length===2&&Array.isArray(t[0])&&Array.isArray(t[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=t[0].slice(),s=t[1].slice();if(n.length>3||s.length>3)throw new nn("Dot layer does not support tensors of 4D or higher rank yet.");const o=this.interpretAxes(n,s);n.splice(o[0],1),s.splice(o[1],1),s.splice(0,1);const r=n.concat(s);return r.length===1&&r.push(1),r}computeMask(t,n){return null}getConfig(){const t={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(t,n),t}}y8.className="Dot";nt(y8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class w8 extends _n{constructor(t){super(t);this.supportsMasking=!0,this.stddev=t.stddev}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,t),n}call(t,n){return Be(()=>{this.invokeCallHook(t,n);const s=an(t);return em(()=>at(o1(s.shape,0,this.stddev),s),()=>s,n.training||!1)})}}w8.className="GaussianNoise";nt(w8);class $8 extends _n{constructor(t){super(t);this.supportsMasking=!0,this.rate=t.rate}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return Be(()=>{this.invokeCallHook(t,n);const s=an(t);return this.rate>0&&this.rate<1?em(()=>{const r=Math.sqrt(this.rate/(1-this.rate));return Ce(s,o1(s.shape,1,r))},()=>s,n.training||!1):s})}}$8.className="GaussianDropout";nt($8);class C8 extends _n{constructor(t){super(t);this.supportsMasking=!0,this.rate=t.rate,this.noiseShape=t.noiseShape}_getNoiseShape(t){return this.noiseShape||an(t).shape}computeOutputShape(t){return t}getConfig(){const t=super.getConfig(),n={rate:this.rate};return Object.assign(n,t),n}call(t,n){return Be(()=>{if(this.rate<1&&this.rate>0){const s=this._getNoiseShape(t);return em(()=>{const r=an(t),i=1.6732632423543772,a=1.0507009873554805,l=-i*a;let u=gf(Jy(s),this.rate);u=s1(u,"float32");const c=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-c*l*this.rate,f=at(Ce(r,u),Ce(at(u,-1),l));return at(Ce(f,c),d)},()=>an(t),n.training||!1)}return t})}}C8.className="AlphaDropout";nt(C8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function mp(e,t,n,s,o,r=.001){let i;if(e.rank===2)i=GRe(e,t,n,s,o,r);else if(e.rank===3)i=qRe(e,t,n,s,o,r);else if(e.rank===4)i=XRe(e,t,n,s,o,r);else throw new nn(`batchNormalization is not implemented for array of rank ${e.rank} yet`);return i}function nze(e,t,n,s,o=.001){return Be(()=>{const r=WS(e,s),i=r.mean,a=r.variance;return[mp(e,i,a,n,t,o),i,a]})}function sze(e,t,n,s,o=.001){return Be(()=>{const r=WS(e,s),i=r.mean,a=r.variance,l=[];for(const p of Ti(0,e.rank))s.indexOf(p)!==-1?l.push(1):l.push(e.shape[p]);const u=Ne(i,l),c=Ne(a,l),d=t==null?null:Ne(t,l),f=n==null?null:Ne(n,l);return[mp(e,u,c,f,d,o),i,a]})}function oze(e,t,n,s,o=.001){return Pn(s.slice().sort(),Ti(0,e.rank-1))?nze(e,t,n,s,o):sze(e,t,n,s,o)}class x8 extends _n{constructor(t){t==null&&(t={});super(t);this.supportsMasking=!0,this.axis=t.axis==null?-1:t.axis,this.momentum=t.momentum==null?.99:t.momentum,this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=ps(t.betaInitializer||"zeros"),this.gammaInitializer=ps(t.gammaInitializer||"ones"),this.movingMeanInitializer=ps(t.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=ps(t.movingVarianceInitializer||"ones"),this.betaConstraint=Hs(t.betaConstraint),this.gammaConstraint=Hs(t.gammaConstraint),this.betaRegularizer=gs(t.betaRegularizer),this.gammaRegularizer=gs(t.gammaRegularizer)}build(t){t=Hn(t);const n=this.axis>=0?this.axis:this.axis+t.length,s=t[n];if(s==null)throw new Se(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(t)}.`);this.inputSpec=[new Vs({ndim:t.length,axes:{[n]:s}})];const o=[s];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(t,n){return Be(()=>{const s=n.training==null?!1:n.training,o=an(t),r=o.shape,i=r.length,a=Ti(0,i),l=this.axis>=0?this.axis:this.axis+i;a.splice(l,1);const u=tc(1,i);u[l]=r[l];const c=a.slice();c.sort();const d=!Pn(c,Ti(0,i).slice(0,i-1)),f=()=>{if(d){const b=Ne(this.movingMean.read(),u),$=Ne(this.movingVariance.read(),u),y=this.center?Ne(this.beta.read(),u):null,w=this.scale?Ne(this.gamma.read(),u):null;return mp(o,b,$,y,w,this.epsilon)}else return mp(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!s)return f();const[h,p,g]=oze(o,this.gamma.read(),this.beta.read(),a,this.epsilon),m=(b,$,y)=>{Be(()=>{const w=1-y,C=b.read(),x=Ce(Nt(C,$),w);b.write(Nt(C,x))})};return(()=>{m(this.movingMean,p,this.momentum),m(this.movingVariance,g,this.momentum)})(),h})}getConfig(){const t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:bs(this.betaInitializer),gammaInitializer:bs(this.gammaInitializer),movingMeanInitializer:bs(this.movingMeanInitializer),movingVarianceInitializer:bs(this.movingVarianceInitializer),betaRegularizer:Yn(this.betaRegularizer),gammaRegularizer:Yn(this.gammaRegularizer),betaConstraint:Ws(this.betaConstraint),gammaConstraint:Ws(this.gammaConstraint)},n=super.getConfig();return Object.assign(t,n),t}}x8.className="BatchNormalization";nt(x8);class k8 extends _n{constructor(t){t==null&&(t={});super(t);if(this.axis=t.axis==null?-1:t.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=t.epsilon==null?.001:t.epsilon,this.center=t.center==null?!0:t.center,this.scale=t.scale==null?!0:t.scale,this.betaInitializer=ps(t.betaInitializer||"zeros"),this.gammaInitializer=ps(t.gammaInitializer||"ones"),this.betaRegularizer=gs(t.betaRegularizer),this.gammaRegularizer=gs(t.gammaRegularizer),this.supportsMasking=!0}build(t){t=Hn(t);const n=t.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let r=0;r<this.axis.length;++r)this.axis[r]<0&&(this.axis[r]+=n);for(const r of this.axis)if(r<0||r>=n)throw new Error(`Invalid axis: ${r}`);if(this.axis.length!==hl(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const s=this.axis.map(r=>t[r]),o=!0;this.scale?this.gamma=this.addWeight("gamma",s,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",s,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(t,n){const s=an(t),o=s.shape,r=o.length;return Be(()=>{let{mean:a,variance:l}=WS(s,this.axis,!0);const u=tc(1,r);for(const g of this.axis)u[g]=o[g];const c=g=>g!=null&&g.shape.length!==r?Ne(g,u):g;let d=c(this.gamma.read()),f=c(this.beta.read());const h=[],p=[];for(let g=0;g<r;++g)this.axis.indexOf(g)!==-1?(h.push(o[g]),p.push(1)):(h.push(1),p.push(o[g]));return a=vi(a,h),l=vi(l,h),d=vi(d,p),f=vi(f,p),mp(s,a,l,f,d,this.epsilon)})}getConfig(){const t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:bs(this.betaInitializer),gammaInitializer:bs(this.gammaInitializer),betaRegularizer:Yn(this.betaRegularizer),gammaRegularizer:Yn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(t,n),t}}k8.className="LayerNormalization";nt(k8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rze(e,t,n){return Be(()=>{if(e.rank!==4)throw new Se(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(t==null&&(t=[[1,1],[1,1]]),t.length!==2||t[0].length!==2||t[1].length!==2)throw new Se("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=Ei()),n!=="channelsLast"&&n!=="channelsFirst")throw new Se(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let s;return n==="channelsFirst"?s=[[0,0],[0,0],t[0],t[1]]:s=[[0,0],t[0],t[1],[0,0]],HS(e,s)})}class S8 extends _n{constructor(t){t==null&&(t={});super(t);if(this.dataFormat=t.dataFormat==null?Ei():t.dataFormat,t.padding==null)this.padding=[[1,1],[1,1]];else if(typeof t.padding=="number")this.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,t.padding.length!==2)throw new Se(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${t.padding.length} array.`);let n,s;if(typeof t.padding[0]=="number")n=[t.padding[0],t.padding[0]],s=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,t.padding[0].length!==2)throw new Se(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${t.padding[0].length} array.`);if(n=t.padding[0],t.padding[1].length!==2)throw new Se(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${t.padding[1].length} array.`);s=t.padding[1]}this.padding=[n,s]}this.inputSpec=[new Vs({ndim:4})]}computeOutputShape(t){t=Hn(t);let n,s;return this.dataFormat==="channelsFirst"?(t[2]!=null&&t[2]>=0?n=t[2]+this.padding[0][0]+this.padding[0][1]:n=null,t[3]!=null&&t[3]>=0?s=t[3]+this.padding[1][0]+this.padding[1][1]:s=null,[t[0],t[1],n,s]):(t[1]!=null&&t[1]>=0?n=t[1]+this.padding[0][0]+this.padding[0][1]:n=null,t[2]!=null&&t[2]>=0?s=t[2]+this.padding[1][0]+this.padding[1][1]:s=null,[t[0],n,s,t[3]])}call(t,n){return Be(()=>rze(an(t),this.padding,this.dataFormat))}getConfig(){const t={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}S8.className="ZeroPadding2D";nt(S8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function h1(e,t,n,s,o,r){return Be(()=>{_s(o),GV(r),Er(s),n==null&&(n=[1,1]),s==null&&(s="valid"),o==null&&(o=Ei()),r==null&&(r="max"),e=KI(e,o);let i;const a=s==="same"?"same":"valid";return r==="max"?i=VS(e,t,n,a):i=NS(e,t,n,a),o==="channelsFirst"&&(i=Rn(i,[0,3,1,2])),i})}function I8(e,t,n,s,o,r){return Be(()=>{_s(o),GV(r),Er(s),n==null&&(n=[1,1,1]),s==null&&(s="valid"),o==null&&(o=Ei()),r==null&&(r="max"),e=H6(e,o);let i;const a=s==="same"?"same":"valid";return r==="max"?i=SOe(e,t,n,a):i=PRe(e,t,n,a),o==="channelsFirst"&&(i=Rn(i,[0,4,1,2,3])),i})}class E8 extends _n{constructor(t){t.poolSize==null&&(t.poolSize=2);super(t);if(typeof t.poolSize=="number")this.poolSize=[t.poolSize];else if(Array.isArray(t.poolSize)&&t.poolSize.length===1&&typeof t.poolSize[0]=="number")this.poolSize=t.poolSize;else throw new Se(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.poolSize)}`);if(Xs(this.poolSize,"poolSize"),t.strides==null)this.strides=this.poolSize;else if(typeof t.strides=="number")this.strides=[t.strides];else if(Array.isArray(t.strides)&&t.strides.length===1&&typeof t.strides[0]=="number")this.strides=t.strides;else throw new Se(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(t.strides)}`);Xs(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,Er(this.padding),this.inputSpec=[new Vs({ndim:3})]}computeOutputShape(t){t=Hn(t);const n=Ci(t[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],n,t[2]]}call(t,n){return Be(()=>{this.invokeCallHook(t,n),t=Jg(an(t),2);const s=this.poolingFunction(an(t),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return jg(s,[2])})}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(t,n),t}}class T8 extends E8{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return _s(r),Er(o),h1(t,n,s,o,r,"max")}}T8.className="MaxPooling1D";nt(T8);class _8 extends E8{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return _s(r),Er(o),h1(t,n,s,o,r,"avg")}}_8.className="AveragePooling1D";nt(_8);class N8 extends _n{constructor(t){t.poolSize==null&&(t.poolSize=[2,2]);super(t);if(this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==2)throw new Se(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides];Xs(this.poolSize,"poolSize"),Xs(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,_s(this.dataFormat),Er(this.padding),this.inputSpec=[new Vs({ndim:4})]}computeOutputShape(t){t=Hn(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2];return n=Ci(n,this.poolSize[0],this.padding,this.strides[0]),s=Ci(s,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,s]:[t[0],n,s,t[3]]}call(t,n){return Be(()=>(this.invokeCallHook(t,n),this.poolingFunction(an(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class A8 extends N8{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return _s(r),Er(o),h1(t,n,s,o,r,"max")}}A8.className="MaxPooling2D";nt(A8);class D8 extends N8{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return _s(r),Er(o),h1(t,n,s,o,r,"avg")}}D8.className="AveragePooling2D";nt(D8);class R8 extends _n{constructor(t){t.poolSize==null&&(t.poolSize=[2,2,2]);super(t);if(this.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],t.strides==null)this.strides=this.poolSize;else if(Array.isArray(t.strides)){if(t.strides.length!==3)throw new Se(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${t.strides.length}.`);this.strides=t.strides}else this.strides=[t.strides,t.strides,t.strides];Xs(this.poolSize,"poolSize"),Xs(this.strides,"strides"),this.padding=t.padding==null?"valid":t.padding,this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,_s(this.dataFormat),Er(this.padding),this.inputSpec=[new Vs({ndim:5})]}computeOutputShape(t){t=Hn(t);let n=this.dataFormat==="channelsFirst"?t[2]:t[1],s=this.dataFormat==="channelsFirst"?t[3]:t[2],o=this.dataFormat==="channelsFirst"?t[4]:t[3];return n=Ci(n,this.poolSize[0],this.padding,this.strides[0]),s=Ci(s,this.poolSize[1],this.padding,this.strides[1]),o=Ci(o,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[t[0],t[1],n,s,o]:[t[0],n,s,o,t[4]]}call(t,n){return Be(()=>(this.invokeCallHook(t,n),this.poolingFunction(an(t),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class M8 extends R8{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return _s(r),Er(o),I8(t,n,s,o,r,"max")}}M8.className="MaxPooling3D";nt(M8);class O8 extends R8{constructor(t){super(t)}poolingFunction(t,n,s,o,r){return _s(r),Er(o),I8(t,n,s,o,r,"avg")}}O8.className="AveragePooling3D";nt(O8);class F8 extends _n{constructor(t){super(t);this.inputSpec=[new Vs({ndim:3})]}computeOutputShape(t){return[t[0],t[2]]}call(t,n){throw new nn}}class P8 extends F8{constructor(t){super(t||{})}call(t,n){return Be(()=>{const s=an(t);return Cs(s,1)})}}P8.className="GlobalAveragePooling1D";nt(P8);class L8 extends F8{constructor(t){super(t||{})}call(t,n){return Be(()=>{const s=an(t);return qi(s,1)})}}L8.className="GlobalMaxPooling1D";nt(L8);class B8 extends _n{constructor(t){super(t);this.dataFormat=t.dataFormat==null?"channelsLast":t.dataFormat,_s(this.dataFormat),this.inputSpec=[new Vs({ndim:4})]}computeOutputShape(t){return t=t,this.dataFormat==="channelsLast"?[t[0],t[3]]:[t[0],t[1]]}call(t,n){throw new nn}getConfig(){const t={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(t,n),t}}class z8 extends B8{call(t,n){return Be(()=>{const s=an(t);return this.dataFormat==="channelsLast"?Cs(s,[1,2]):Cs(s,[2,3])})}}z8.className="GlobalAveragePooling2D";nt(z8);class V8 extends B8{call(t,n){return Be(()=>{const s=an(t);return this.dataFormat==="channelsLast"?qi(s,[1,2]):qi(s,[2,3])})}}V8.className="GlobalMaxPooling2D";nt(V8);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class W8 extends _n{constructor(t){super(t);this.layer=t.layer}build(t){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(t){this.layer!=null&&(this.layer.trainable=t)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(t){this.layer.setWeights(t)}getConfig(){const t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(t,n),t}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(t)}static fromConfig(t,n,s={}){const o=n.layer,r=Sa(o,s);delete n.layer;const i={layer:r};return Object.assign(i,n),new t(i)}}class H8 extends W8{constructor(t){super(t);this.supportsMasking=!0}build(t){if(t=Hn(t),t.length<3)throw new Se(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(t)}`);this.inputSpec=[{shape:t}];const n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(t)}computeOutputShape(t){t=Hn(t);const n=[t[0]].concat(t.slice(2)),s=this.layer.computeOutputShape(n),o=t[1];return[s[0],o].concat(s.slice(1))}call(t,n){return Be(()=>(t=an(t),J6((i,a)=>[an(this.layer.call(i,n)),[]],t,[],!1,null,null,!1,!0)[1]))}}H8.className="TimeDistributed";nt(H8);function ize(e){bc(_4e,"BidirectionalMergeMode",e)}const aze="concat";class U8 extends W8{constructor(t){super(t);const n=t.layer.getConfig(),s={};s.className=t.layer.getClassName(),s.config=n,this.forwardLayer=Sa(s),n.goBackwards=n.goBackwards!==!0;const o={};if(o.className=t.layer.getClassName(),o.config=n,this.backwardLayer=Sa(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=t.mergeMode===void 0?aze:t.mergeMode,ize(this.mergeMode),t.weights)throw new nn("weights support is not implemented for Bidirectional layer yet.");this._stateful=t.layer.stateful,this.returnSequences=t.layer.returnSequences,this.returnState=t.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=t.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(t){this._trainable=t,this.forwardLayer!=null&&(this.forwardLayer.trainable=t),this.backwardLayer!=null&&(this.backwardLayer.trainable=t)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(t){const n=t.length,s=Math.floor(n/2);this.forwardLayer.setWeights(t.slice(0,s)),this.backwardLayer.setWeights(t.slice(s))}computeOutputShape(t){let n=this.forwardLayer.computeOutputShape(t);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let s,o,r;return this.returnState&&(r=n.slice(1)),s=n[0],s=s,this.mergeMode==="concat"?(s[s.length-1]*=2,o=[s]):this.mergeMode==null?o=[s,s.slice()]:o=[s],this.returnState?this.mergeMode==null?o.concat(r).concat(r.slice()):[s].concat(r).concat(r.slice()):Bo(o)}apply(t,n){let s=n==null?null:n.initialState,o=n==null?null:n.constants;n==null&&(n={});const r=Z6(t,s,o,this.numConstants);if(t=r.inputs,s=r.initialState,o=r.constants,Array.isArray(t)&&(s=t.slice(1),t=t[0]),(s==null||s.length===0)&&o==null)return super.apply(t,n);const i=[],a=[];if(s!=null){const u=s.length;if(u%2>0)throw new Se("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=s,i.push(...s);const c=s.map(d=>new Vs({shape:d.shape}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),a.push(...c)}if(o!=null)throw new nn("Support for constants in Bidirectional layers is not implemented yet.");const l=i[0]instanceof ji;for(const u of i)if(u instanceof ji!==l)throw new Se("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const u=[t].concat(i),c=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=c;const f=super.apply(u,n);return this.inputSpec=d,f}else return super.apply(t,n)}call(t,n){return Be(()=>{const s=n.initialState;let o,r;if(s==null)o=this.forwardLayer.call(t,n),r=this.backwardLayer.call(t,n);else{const l=s.slice(0,s.length/2),u=s.slice(s.length/2);o=this.forwardLayer.call(t,Object.assign(n,{initialState:l})),r=this.backwardLayer.call(t,Object.assign(n,{initialState:u}))}let i;this.returnState&&(Array.isArray(o)&&(i=o.slice(1).concat(r.slice(1))),o=o[0],r=r[0]),this.returnSequences&&(r=Ju(r,1));let a;return this.mergeMode==="concat"?a=MI([o,r]):this.mergeMode==="sum"?a=at(o,r):this.mergeMode==="ave"?a=Ce(.5,at(o,r)):this.mergeMode==="mul"?a=Ce(o,r):this.mergeMode==null&&(a=[o,r]),this.returnState?this.mergeMode==null?a.concat(i):[a].concat(i):a})}resetStates(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(t){Lu(this.forwardLayer.name,()=>{this.forwardLayer.build(t)}),Lu(this.backwardLayer.name,()=>{this.backwardLayer.build(t)}),this.built=!0}computeMask(t,n){Array.isArray(n)&&(n=n[0]);let s;if(this.returnSequences?this.mergeMode==null?s=[n,n]:s=n:this.mergeMode==null?s=[null,null]:s=null,this.returnState){const r=this.forwardLayer.states.map(i=>null);return Array.isArray(s)?s.concat(r).concat(r):[s].concat(r).concat(r)}else return s}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(t){super.setFastWeightInitDuringBuild(t),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(t),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(t)}getConfig(){const t={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(t,n),t}static fromConfig(t,n){const s=Sa(n.layer);if(delete n.layer,n.numConstants!=null)throw new nn("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const o=n;return o.layer=s,new t(o)}}U8.className="Bidirectional";nt(U8);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lze=Ye();lze.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var OR;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(OR||(OR={}));var FR;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(FR||(FR={}));/** @license See the LICENSE file. */var j8={exports:{}};(function(e){(function(t,n,s){function o(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&r(d,c),f.state=function(){return r(c,{})}),f}function a(){var l=4022871197,u=function(c){c=c.toString();for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.alea=i})(Fn,e,!1)})(j8);var G8={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor128=i})(Fn,e,!1)})(G8);var K8={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorwow=i})(Fn,e,!1)})(K8);var q8={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8&&(h[7]=-1),c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorshift7=i})(Fn,e,!1)})(q8);var Y8={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,g,m,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),p=0,g=-32;g<b;++g)d&&(h^=d.charCodeAt((g+32)%d.length)),g===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,g>=0&&(m=m+1640531527|0,f=v[g&127]^=h+m,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,g=4*128;g>0;--g)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=m,c.X=v,c.i=p}u(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor4096=i})(Fn,e,!1)})(Y8);var X8={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.tychei=i})(Fn,e,!1)})(X8);var Z8={exports:{}};(function(e){(function(t,n){var s=(0,eval)("this"),o=256,r=6,i=52,a="random",l=n.pow(o,r),u=n.pow(2,i),c=u*2,d=o-1,f;function h(y,w,C){var x=[];w=w==!0?{entropy:!0}:w||{};var S=v(m(w.entropy?[y,$(t)]:y==null?b():y,3),x),T=new p(x),I=function(){for(var _=T.g(r),N=l,D=0;_<u;)_=(_+D)*o,N*=o,D=T.g(1);for(;_>=c;)_/=2,N/=2,D>>>=1;return(_+D)/N};return I.int32=function(){return T.g(4)|0},I.quick=function(){return T.g(4)/4294967296},I.double=I,v($(T.S),t),(w.pass||C||function(_,N,D,F){return F&&(F.S&&g(F,T),_.state=function(){return g(T,{})}),D?(n[a]=_,N):_})(I,S,"global"in w?w.global:this==n,w.state)}n["seed"+a]=h;function p(y){var w,C=y.length,x=this,S=0,T=x.i=x.j=0,I=x.S=[];for(C||(y=[C++]);S<o;)I[S]=S++;for(S=0;S<o;S++)I[S]=I[T=d&T+y[S%C]+(w=I[S])],I[T]=w;(x.g=function(_){for(var N,D=0,F=x.i,P=x.j,M=x.S;_--;)N=M[F=d&F+1],D=D*o+M[d&(M[F]=M[P=d&P+N])+(M[P]=N)];return x.i=F,x.j=P,D})(o)}function g(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function m(y,w){var C=[],x=typeof y,S;if(w&&x=="object")for(S in y)try{C.push(m(y[S],w-1))}catch{}return C.length?C:x=="string"?y:y+"\0"}function v(y,w){for(var C=y+"",x,S=0;S<C.length;)w[d&S]=d&(x^=w[d&S]*19)+C.charCodeAt(S++);return $(w)}function b(){try{var y;return f&&(y=f.randomBytes)?y=y(o):(y=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(y)),$(y)}catch{var w=s.navigator,C=w&&w.plugins;return[+new Date,s,C,s.screen,$(t)]}}function $(y){return String.fromCharCode.apply(0,y)}if(v(n.random(),t),e.exports){e.exports=h;try{f=require("crypto")}catch{}}})([],Math)})(Z8);var uze=j8.exports,cze=G8.exports,dze=K8.exports,fze=q8.exports,hze=Y8.exports,pze=X8.exports,wf=Z8.exports;wf.alea=uze;wf.xor128=cze;wf.xorwow=dze;wf.xorshift7=fze;wf.xor4096=hze;wf.tychei=pze;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var PR;(function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"})(PR||(PR={}));/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tt(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&J(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gze=dV;class p1 extends Ik{constructor(){super();this.blockSize=48,this.firstUse=!0,this.data=new SB(this,el())}nextDataId(){return p1.nextDataId++}write(t,n,s){this.firstUse&&(this.firstUse=!1,Ye().get("IS_NODE")&&vr(`
============================
Hi there \u{1F44B}. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));const o={id:this.nextDataId()};return this.data.set(o,{values:t,dtype:s,refCount:1}),o}makeTensorInfo(t,n,s){let o;if(n==="string"&&s!=null&&s.length>0&&Up(s[0])){const r=s.map(i=>fl(i));o=this.write(r,t,n)}else o=this.write(s,t,n);return{dataId:o,shape:t,dtype:n}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){const n=this.data.get(t);n.refCount++}decRef(t){if(this.data.has(t)){const n=this.data.get(t);n.refCount--}}move(t,n,s,o,r){this.data.set(t,{values:n,dtype:o,refCount:r})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:n,complexTensorInfos:s}=this.data.get(t);if(n==="complex64"){const o=this.readSync(s.real.dataId),r=this.readSync(s.imag.dataId);return Ra(o,r)}return this.data.get(t).values}bufferSync(t){const n=this.readSync(t.dataId);let s=n;if(t.dtype==="string")try{s=n.map(o=>Pd(o))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return vn(t.shape,t.dtype,s)}makeOutput(t,n,s){const o=this.write(t,n,s);return el().makeTensorFromDataId(o,n,s,this)}disposeData(t,n=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!n&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:s}=this.data.get(t);s!=null&&(this.disposeData(s.real.dataId,!0),this.disposeData(s.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const n=Lo();return t(),{kernelMs:Lo()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){Tt([t],"where");const n=this.readSync(t.dataId);return gze(t.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}p1.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J8(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const mze=e=>{const{x:t}=e.inputs,n=e.backend;Tt(t,"abs");let s=new Float32Array(qe(t.shape));const o=n.data.get(t.dataId).values;return s=J8(o),n.makeOutput(s,t.shape,t.dtype)},vze={kernelName:Wb,backendName:"cpu",kernelFunc:mze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Os(e){return(t,n,s,o,r)=>{const i=rn(t,n),a=i.length,l=Ot(i),u=qe(i),c=co(r,u),d=t.length,f=n.length,h=Ot(t),p=Ot(n),g=Bd(t,i),m=Bd(n,i);if(g.length+m.length===0)for(let v=0;v<c.length;++v)c[v]=e(s[v%s.length],o[v%o.length]);else for(let v=0;v<c.length;++v){const b=Gp(v,a,l),$=b.slice(-d);g.forEach(x=>$[x]=0);const y=Ki($,d,h),w=b.slice(-f);m.forEach(x=>w[x]=0);const C=Ki(w,f,p);c[v]=e(s[y],o[C])}return[c,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yo(e){const{inputs:t,backend:n}=e,{real:s,imag:o}=t,r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,a=n.makeTensorInfo(s.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(s.shape,"float32",r),imag:n.makeTensorInfo(o.shape,"float32",i)},a}const bze={kernelName:Mk,backendName:"cpu",kernelFunc:Yo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G0(e,t,n="float32"){if(n==="complex64"){const o=G0(e,t,"float32"),r=G0(e,t,"float32");return Yo({inputs:{real:o,imag:r},backend:e})}const s=Io(qe(t),n);return e.makeTensorInfo(t,n,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function na(e){const{inputs:t,backend:n}=e,{x:s}=t;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const yze={kernelName:hg,backendName:"cpu",kernelFunc:na};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nc(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.data.get(s.dataId).complexTensorInfos.real,r=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,r)}const wze={kernelName:sS,backendName:"cpu",kernelFunc:nc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xl(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dtype:r}=s;if(r==="complex64"){if(o.dtype==="complex64")return na({inputs:{x:o},backend:n});const i=G0(n,o.shape,o.dtype),a=xl({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=Yo({inputs:{real:a,imag:i},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){const i=nc({inputs:{input:o},backend:n}),a=xl({inputs:{x:i},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(i),a}if(!_B(o.dtype,r)){const i=na({inputs:{x:o},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:r}}if(r==="int32"){const i=n.data.get(o.dataId).values,a=Int32Array.from(i);return n.makeTensorInfo(o.shape,"int32",a)}if(r==="bool"){const i=n.data.get(o.dataId).values,a=mc([0],o.dtype),[l,u]=Os((c,d)=>c!==d?1:0)(o.shape,[],i,a,"bool");return n.makeTensorInfo(u,"bool",l)}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${r}`)}const $ze={kernelName:eg,backendName:"cpu",kernelFunc:xl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function to(e,t,n,s){return n==null?({inputs:o,backend:r})=>{const{a:i,b:a}=o,l=r;Tt([i,a],e);const u=l.data.get(i.dataId).values,c=l.data.get(a.dataId).values,d=i.dtype==="string"?ec(u):u,f=i.dtype==="string"?ec(c):c,h=s||i.dtype,[p,g]=t(i.shape,a.shape,d,f,h);return l.makeTensorInfo(g,h,p)}:({inputs:o,backend:r})=>{const{a:i,b:a}=o,l=r;if(i.dtype==="complex64"||a.dtype==="complex64"){const u=xl({inputs:{x:i},backend:l,attrs:{dtype:"complex64"}}),c=l.data.get(u.dataId),d=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,h=l.data.get(d.dataId).values,p=l.data.get(f.dataId).values,g=xl({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),m=l.data.get(g.dataId),v=m.complexTensorInfos.real,b=m.complexTensorInfos.imag,$=l.data.get(v.dataId).values,y=l.data.get(b.dataId).values,[w,C,x]=n(i.shape,a.shape,h,p,$,y),S=l.makeTensorInfo(x,"float32",w),T=l.makeTensorInfo(x,"float32",C),I=Yo({inputs:{real:S,imag:T},backend:l});return l.disposeIntermediateTensorInfo(u),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(S),l.disposeIntermediateTensorInfo(T),I}else{const u=l.data.get(i.dataId).values,c=l.data.get(a.dataId).values,d=s||i.dtype,[f,h]=t(i.shape,a.shape,u,c,d);return l.makeTensorInfo(h,d,f)}}}function QI(e){return(t,n,s,o,r,i)=>{const a=rn(t,n),l=qe(a),u=a.length,c=Ot(a),d=co("float32",l),f=co("float32",l),h=Bd(t,a),p=Bd(n,a),g=Ra(s,o),m=Ra(r,i),v=t.length,b=Ot(t),$=n.length,y=Ot(n);if(h.length+p.length===0)for(let w=0;w<d.length;w++){const C=w%g.length,x=w%m.length,S=e(g[C*2],g[C*2+1],m[x*2],m[x*2+1]);d[w]=S.real,f[w]=S.imag}else for(let w=0;w<d.length;w++){const C=Gp(w,u,c),x=C.slice(-v);h.forEach(N=>x[N]=0);const S=Ki(x,v,b),T=C.slice(-$);p.forEach(N=>T[N]=0);const I=Ki(T,$,y),_=e(g[S*2],g[S*2+1],m[I*2],m[I*2+1]);d[w]=_.real,f[w]=_.imag}return[d,f,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q8=Os((e,t)=>e+t),Cze=QI((e,t,n,s)=>({real:e+n,imag:t+s})),om=to(ff,Q8,Cze),xze={kernelName:ff,backendName:"cpu",kernelFunc:om};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eE(e,t,n,s,o){const r=qe(s),i=Io(o,n);for(let a=0;a<e.length;a++){const l=e[a];if(l<0)throw new Error("Input x must be non-negative!");l>=o||(r>0?i[l]+=t[a]:i[l]+=1)}return i}function e5(e,t,n,s=!1){const o=e.shape[0],r=e.shape[1],i=vn([o,n],t.dtype);for(let a=0;a<o;a++)for(let l=0;l<r;l++){const u=e.get(a,l);if(u<0)throw new Error("Input x must be non-negative!");u>=n||(s?i.set(1,a,u):t.size>0?i.set(i.get(a,u)+t.get(a,l),a,u):i.set(i.get(a,u)+1,a,u))}return i}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wl(e){return(t,n,s)=>{const o=co(n,t.length);for(let r=0;r<t.length;++r)o[r]=e(t[r],s);return o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Un(e,t,n){return({inputs:s,attrs:o,backend:r})=>{const{x:i}=s;if(Tt(i,e),i.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const a=r,l=a.data.get(i.dataId).values,u=qe(i.shape),c=n||i.dtype,d=Vo(c,u);for(let f=0;f<u;++f)d[f]=t(l[f],o);return a.makeTensorInfo(i.shape,c,d)}}function $f(e,t,n){return({inputs:s,attrs:o,backend:r})=>{const{x:i}=s;if(Tt(i,e),i.dtype==="string"||n==="string")throw new Error("unaryKernelFunc does not support string input/output");const a=r,l=a.data.get(i.dataId).values,u=n||i.dtype,c=t(l,u,o);return a.makeTensorInfo(i.shape,u,c)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t5=Wl(e=>Math.ceil(e)),kze=$f(tg,t5),Sze={kernelName:tg,backendName:"cpu",kernelFunc:kze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n5(e,t,n,s){const o=Vo(n,qe(t));if(s&&n!=="string"){let r=0;e.forEach(i=>{const a=qe(i.shape);o.set(i.vals,r),r+=a})}else{let r=0;e.forEach(i=>{const a=n==="string"?ec(i.vals):i.vals;let l=0;for(let u=0;u<i.shape[0];++u){const c=u*t[1]+r;for(let d=0;d<i.shape[1];++d)o[c+d]=a[l++]}r+=i.shape[1]})}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s5=Os((e,t)=>e===t?1:0),o5=to(sy,s5,null,"bool"),Ize={kernelName:sy,backendName:"cpu",kernelFunc:o5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r5=Wl(e=>Math.exp(e)),i5=$f(lg,r5,"float32"),Eze={kernelName:lg,backendName:"cpu",kernelFunc:i5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a5=Wl(e=>Math.expm1(e)),Tze=$f(ug,a5),_ze={kernelName:ug,backendName:"cpu",kernelFunc:Tze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l5=Wl(e=>Math.floor(e)),Nze=$f(cg,l5),Aze={kernelName:cg,backendName:"cpu",kernelFunc:Nze};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u5(e,t,n,s,o,r,i,a,l){const u=vn([s,r],n);for(let c=0;c<s;c++){const d=[];let f=0;for(let h=0;h<o;h++){const p=e[c*o+h];f+=p*i[h],d.push(p)}if(f<0||f>=l/r)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<r;h++)u.values[c*r+h]=t.get(...t.indexToLoc(f*r+h))}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c5(e,t,n){const s=vn(n,e.dtype);for(let o=0;o<s.size;++o){const i=s.indexToLoc(o).slice(),a=i[0],l=i[2],u=t.locToIndex([a,l]);i[2]=t.values[u];const c=e.locToIndex(i);0<=c&&c<e.values.length&&(s.values[o]=e.values[c])}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d5=Os((e,t)=>e>t?1:0),Dze=to(ay,d5,null,"bool"),Rze={kernelName:ay,backendName:"cpu",kernelFunc:Dze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f5=Os((e,t)=>e>=t?1:0),Mze=to(fg,f5,null,"bool"),Oze={kernelName:fg,backendName:"cpu",kernelFunc:Mze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h5=Os((e,t)=>e<t?1:0),Fze=to(uy,h5,null,"bool"),Pze={kernelName:uy,backendName:"cpu",kernelFunc:Fze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p5=Os((e,t)=>e<=t?1:0),Lze=to(cy,p5,null,"bool"),Bze={kernelName:cy,backendName:"cpu",kernelFunc:Lze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g5(e,t,n){const s=(t-e)/(n-1),o=Io(n,"float32");o[0]=e;for(let r=1;r<o.length;r++)o[r]=o[r-1]+s;return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m5=Wl(e=>Math.log(e)),zze=$f(vg,m5),Vze={kernelName:vg,backendName:"cpu",kernelFunc:zze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v5(e,t,n,s){const o=co(s,qe(n));for(let r=0;r<o.length;++r){const i=r*t;let a=e[i];for(let l=0;l<t;++l){const u=e[i+l];(Number.isNaN(u)||u>a)&&(a=u)}o[r]=a}return o}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b5=Os((e,t)=>Math.max(e,t)),Wze=to(yg,b5),Hze={kernelName:yg,backendName:"cpu",kernelFunc:Wze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const y5=Os((e,t)=>Math.min(e,t)),Uze=to(wg,y5),jze={kernelName:wg,backendName:"cpu",kernelFunc:Uze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tE=Os((e,t)=>e*t),Gze=QI((e,t,n,s)=>({real:e*n-t*s,imag:e*s+t*n})),g1=to(Cg,tE,Gze),Kze={kernelName:Cg,backendName:"cpu",kernelFunc:g1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w5(e,t,n){const s=Ol(-1,n);return tE([],t,s,e,n)}function qze(e){const{inputs:t,backend:n}=e,{x:s}=t;Tt(s,"neg");const o=n.data.get(s.dataId).values,[r,i]=w5(o,s.shape,s.dtype);return n.makeTensorInfo(i,s.dtype,r)}const Yze={kernelName:$y,backendName:"cpu",kernelFunc:qze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $5=Os((e,t)=>e!==t?1:0),Xze=to(Cy,$5,null,"bool"),Zze={kernelName:Cy,backendName:"cpu",kernelFunc:Xze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nE(e,t,n,s,o){const r=t.length,i=qe(t),a=Ot(t),l=Ot(o),u=co(n,qe(o));for(let c=0;c<i;++c){const d=Gp(c,r,a),f=new Array(d.length);for(let p=0;p<f.length;p++)f[p]=d[s[p]];const h=Ki(f,r,l);u[h]=e[c]}return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ir(e){const{inputs:t,attrs:n,backend:s}=e,{x:o}=t,{perm:r}=n;Tt(o,"transpose");const i=o.shape.length,a=new Array(i);for(let d=0;d<a.length;d++)a[d]=o.shape[r[d]];const l=s.data.get(o.dataId).values,u=nE(l,o.shape,o.dtype,r,a);return{dataId:s.write(u,a,o.dtype),shape:a,dtype:o.dtype}}const Jze={kernelName:Ly,backendName:"cpu",kernelFunc:Ir};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C5(e,t,n,s){const[o,r]=eo(e,s),i=kr(t,"int32"),a=Io(qe(o),i),l=qe(r);for(let u=0;u<a.length;++u){const c=u*l;let d=1;for(let f=0;f<l;++f)d*=n[c+f];a[u]=d}return{outVals:a,outShape:o,outDtype:i}}function Qze(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;Tt(o,"prod");const a=o.shape.length,l=fn(r,o.shape),u=Ts(l,a);let c=l,d=o;const f=[];u!=null&&(d=Ir({inputs:{x:o},backend:n,attrs:{perm:u}}),f.push(d),c=Ms(c.length,a));const h=n.data.get(d.dataId).values,{outVals:p,outShape:g,outDtype:m}=C5(d.shape,d.dtype,h,c);let v=g;return i&&(v=Es(g,l)),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(v,m,p)}const eVe={kernelName:tS,backendName:"cpu",kernelFunc:Qze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x5(e,t,n,s){const o=e===t,r=e<t&&n<0,i=t<e&&n>1;if(o||r||i)return Io(0,s);const a=Math.abs(Math.ceil((t-e)/n)),l=Io(a,s);t<e&&n===1&&(n=-1),l[0]=e;for(let u=1;u<l.length;u++)l[u]=l[u-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k5=Wl(e=>1/Math.sqrt(e)),tVe=$f(Tg,k5),nVe={kernelName:Tg,backendName:"cpu",kernelFunc:tVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sVe=Wl(e=>1/(1+Math.exp(-e))),S5=Un(Rg,e=>1/(1+Math.exp(-e))),oVe={kernelName:Rg,backendName:"cpu",kernelFunc:S5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function I5(e,t,n,s,o){const r=IS(s,t,n),i=qe(n),a=Ot(s);if(r){const d=ES(t,a);return o==="string"?e.slice(d,d+i):e.subarray(d,d+i)}const l=o==="string"?ec(e):e,u=vn(s,o,l),c=vn(n,o);for(let d=0;d<c.size;++d){const f=c.indexToLoc(d),h=f.map((p,g)=>p+t[g]);c.set(u.get(...h),...f)}return o==="string"?PV(c.values):c.values}function sc(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,size:i}=s;Tt(o,"slice");const[a,l]=Gy(o,r,i);kS(o,a,l);const u=n.data.get(o.dataId).values,c=I5(u,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,c)}const rVe={kernelName:Ry,backendName:"cpu",kernelFunc:sc};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E5(e,t,n,s,o,r,i){const a=t[0],l=r[0],u=new Array(l),c=new Array(a),d=t[1];if(l===0){if(a!==0)throw new Error(kV(a));const m=Vo(n,0),v=Vo(o,0);return[m,[0,d],v,u,c]}let f=!0,h=0;const p=new Array(l).fill(0);for(let m=0;m<a;++m){const v=e[m*d];if(v<0)throw new Error(SV(m,v));if(v>=l)throw new Error(IV(m,v,l));++p[v],f=f&&v>=h,h=v}let g=!0;for(let m=0;m<l;++m){const v=p[m]===0;u[m]=v,g=g&&!v,p[m]=Math.max(p[m],1),m>0&&(p[m]+=p[m-1])}if(g&&f){const m=e,v=s;for(let b=0;b<a;++b)c[b]=b;return[m,[a,d],v,u,c]}else{const m=p[l-1],v=Vo(n,m*d),b=Vo(o,m),$=new Array(l).fill(0);for(let y=0;y<a;++y){const w=e[y*d],C=$[w],x=(w===0?0:p[w-1])+C;$[w]++;for(let S=0;S<d;++S)v[x*d+S]=e[y*d+S];b[x]=s[y],c[y]=x}for(let y=0;y<l;++y)if($[y]===0){const C=y===0?0:p[y-1];v[C*d+0]=y;for(let x=1;x<d;++x)v[C*d+x]=0;b[C]=i}return[v,[m,d],b,u,c]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T5(e,t,n,s,o){const r=qe(s),i=t[0],a=o.length,l=[];let u=1,c=-1;for(let m=0;m<a;++m){const v=o[m];if(v===-1){if(c!==-1)throw new Error(EV(c,m));c=m,l.push(1)}else{if(v<0)throw new Error(TV(m,v));u*=v,l.push(v)}}if(c!==-1){if(u<=0)throw new Error(_V());const m=Math.trunc(r/u);if(u*m!==r)throw new Error(NV(s,l));l[c]=m}if(qe(l)!==r)throw new Error(AV(s,l));const f=s.length,h=[];if(f>0){h[f-1]=1;for(let m=f-2;m>=0;--m)h[m]=h[m+1]*s[m+1]}const p=[];if(a>0){p[a-1]=1;for(let m=a-2;m>=0;--m)p[m]=p[m+1]*l[m+1]}const g=Vo(n,i*a);for(let m=0;m<i;++m){let v=0;for(let b=0;b<f;++b)v+=e[m*f+b]*h[b];for(let b=0;b<a;++b)g[m*a+b]=Math.trunc(v/p[b]),v%=p[b]}return[g,[i,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sE(e,t,n,s,o,r=!1,i=0){const a=s.length,l=[t[0],e.length/t[0]],u=l[1],d=a>0?o[a-1]+1:0;if(d<0)throw new Error(vx());const f=t.slice();f[0]=d;const h=f.reduce(($,y)=>$*y,1),p=Vo(n,h);if(a===0)return d>0&&p.fill(i),[p,f];if(d<=0)throw new Error(vx());let g=0,m=1,v=0,b=o[g];for(;;){let $=0;if(m<a){if($=o[m],b===$){++m;continue}if(b>=$)throw new Error(DV())}if(b<0||b>=d)throw new Error(RV(b,d));b>v&&p.fill(i,v*u,b*u);for(let y=g;y<m;++y){const w=s[y];if(w<0||w>=l[0])throw new Error(MV(y,s[y],l[0]));for(let C=0;C<u;C++)p[b*u+C]+=e[w*u+C]}if(r)for(let y=0;y<u;y++)p[b*u+y]/=m-g;if(g=m,++m,v=b+1,b=$,m>a)break}return v<d&&p.fill(i,v*u,d*u),[p,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iVe=Wl(e=>Math.sqrt(e)),aVe=Un(Og,e=>Math.sqrt(e)),lVe={kernelName:Og,backendName:"cpu",kernelFunc:aVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _5=Os((e,t)=>{const n=e-t;return n*n}),uVe=to(Fg,_5),cVe={kernelName:Fg,backendName:"cpu",kernelFunc:uVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N5(e,t,n,s){const o=vn(e,t.dtype);for(let r=0;r<o.size;r++){const i=o.indexToLoc(r),a=new Array(i.length);for(let l=0;l<a.length;l++)a[l]=i[l]*n[l]+s[l];o.set(t.get(...a),...i)}return o}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dVe{constructor(t,n,s,o,r,i){this.separator=fl(t),this.nGramWidths=n,this.leftPad=fl(s),this.rightPad=fl(o),this.padWidth=r,this.preserveShort=i}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,n){const s=this.getPadWidth(n);return Math.max(0,t+2*s-n+1)}createNGrams(t,n,s,o,r,i){for(let a=0;a<r;++a){const l=this.getPadWidth(i),u=Math.max(0,l-a),c=Math.max(0,l-(r-(a+1))),d=i-(u+c),f=n+(u>0?0:a-l);let h=0;h+=u*this.leftPad.length;for(let b=0;b<d;++b)h+=t[f+b].length;h+=c*this.rightPad.length,h+=(u+c+d-1)*this.separator.length,s[o+a]=new Uint8Array(h);const g=s[o+a];let m=0;const v=b=>b.forEach($=>g[m++]=$);for(let b=0;b<u;++b)v(this.leftPad),v(this.separator);for(let b=0;b<d-1;++b)v(t[f+b]),v(this.separator);if(d>0){v(t[f+d-1]);for(let b=0;b<c;++b)v(this.separator),v(this.rightPad)}else{for(let b=0;b<c-1;++b)v(this.rightPad),v(this.separator);v(this.rightPad)}}}compute(t,n){const s=t.length,o=n.length;if(o>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let u=1;u<o;++u){let c=n[u]>=l;if(c=c&&n[u]<=s,!c)throw new Error(`Invalid split value ${n[u]}, must be in [${l}, ${s}]`);l=n[u]}if(l!==s)throw new Error(`Last split value must be data size. Expected ${s}, got ${l}`)}const r=o-1,i=Vo("int32",o);if(s===0||o===0){const l=new Array(s);for(let u=0;u<=r;++u)i[u]=0;return[l,i]}i[0]=0;for(let l=1;l<=r;++l){const u=n[l]-n[l-1];let c=0;this.nGramWidths.forEach(d=>{c+=this.getNumNGrams(u,d)}),this.preserveShort&&u>0&&c===0&&(c=1),i[l]=i[l-1]+c}const a=new Array(i[r]);for(let l=0;l<r;++l){const u=n[l];let c=i[l];if(this.nGramWidths.forEach(d=>{const f=n[l+1]-n[l],h=this.getNumNGrams(f,d);this.createNGrams(t,u,a,c,h,d),c+=h}),this.preserveShort&&c===i[l]){const d=n[l+1]-n[l];if(d===0)continue;const f=d+2*this.padWidth,h=1;this.createNGrams(t,u,a,c,h,f)}}return[a,i]}}function A5(e,t,n,s,o,r,i,a){return new dVe(n,s,o,r,i,a).compute(e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fVe(e,t,n,s){if(!e.length)return;if(t.length===0){for(let r=0;r<e.length;++r)s.push(e.subarray(r,r+1));return}if(t.length===1){const r=t[0];let i=e.indexOf(r);for(;i!==-1;){const a=e.subarray(0,i);(!n||a.length!==0)&&s.push(a),e=e.subarray(i+1),i=e.indexOf(r)}(!n||e.length!==0)&&s.push(e);return}let o=0;for(let r=0;r<e.length+1;r++)if(r===e.length||t.indexOf(e[r])!==-1){const i=e.subarray(o,r);(!n||i.length!==0)&&s.push(i),o=r+1}}function D5(e,t,n){const s=e.length,o=[];let r=0,i=0;const a=new Array(s);for(let f=0;f<s;++f){const h=o.length;fVe(e[f],t,n,o);const p=o.length-h;a[f]=p,r+=p,i=Math.max(i,p)}const l=Vo("int32",r*2),u=new Array(r),c=[s,i];let d=0;for(let f=0;f<s;++f)for(let h=0;h<a[f];++h)l[d*2]=f,l[d*2+1]=h,u[d]=o[d],++d;return[l,u,c]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R5(e,t){const n=Vo("int32",e.length);for(let s=0;s<e.length;++s)n[s]=JAe(e[s]).modulo(t).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const M5=Os((e,t)=>e-t),hVe=QI((e,t,n,s)=>({real:e-n,imag:t-s})),oE=to(Pg,M5,hVe),pVe={kernelName:Pg,backendName:"cpu",kernelFunc:oE};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O5(e,t){const n=new Array(e.rank);for(let o=0;o<n.length;o++)n[o]=e.shape[o]*t[o];const s=vn(n,e.dtype);for(let o=0;o<s.values.length;++o){const r=s.indexToLoc(o),i=new Array(e.rank);for(let l=0;l<i.length;l++)i[l]=r[l]%e.shape[l];const a=e.locToIndex(i);s.values[o]=e.values[a]}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hh=(e,t)=>{const n=t.value-e.value;return n===0?e.index-t.index:n};function F5(e,t,n=0,s=e.length-1){for(;s>n;){if(s-n>600){const a=s-n+1,l=t-n+1,u=Math.log(a),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(a-c)/a)*Math.sign(l-a/2),f=Math.max(n,Math.floor(t-l*c/a+d)),h=Math.min(s,Math.floor(t+(a-l)*c/a+d));F5(e,t,f,h)}const o=e[t];let r=n,i=s;for(ed(e,n,t),hh(e[s],o)>0&&ed(e,n,s);r<i;){for(ed(e,r,i),r++,i--;hh(e[r],o)<0;)r=r+1;for(;hh(e[i],o)>0;)i=i-1}hh(e[n],o)===0?ed(e,n,i):(i=i+1,ed(e,i,s)),i<=t&&(n=i+1),t<=i&&(s=i-1)}}function P5(e,t,n,s,o){const r=t[t.length-1],[i,a]=[e.length/r,r],l=co(n,i*s),u=co("int32",i*s);for(let d=0;d<i;d++){const f=d*a,h=e.subarray(f,f+a);let p=new Array(h.length);h.forEach((b,$)=>p[$]={value:b,index:$}),s<p.length&&(F5(p,s),p=p.slice(0,s)),o&&p.sort(hh);const g=d*s,m=l.subarray(g,g+s),v=u.subarray(g,g+s);for(let b=0;b<s;b++)m[b]=p[b].value,v[b]=p[b].index}const c=t.slice();return c[c.length-1]=s,[vn(c,n,l),vn(c,"int32",u)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L5(e,t,n,s){const o=fn(t,n)[0],r=[1,n[0],1];for(let p=0;p<o;p++)r[0]*=n[p];r[1]=n[o];for(let p=o+1;p<n.length;p++)r[2]*=n[p];const i={},a=new Int32Array(n[o]),l=new Co(r,s,e),u=[],c=r[0]===1&&r[2]===1;for(let p=0;p<n[o];p++){let g;if(c)g=e[p].toString();else{const m=[];for(let v=0;v<r[0];v++)for(let b=0;b<r[2];b++)m.push(l.get(v,p,b));g=m.join(",")}if(i[g]!==void 0)a[p]=i[g];else{const m=Object.keys(i).length;i[g]=m,a[p]=m,u.push(p)}}const d=r.slice();d[1]=Object.keys(i).length;const f=new Co(d,s);u.forEach((p,g)=>{for(let m=0;m<r[0];m++)for(let v=0;v<r[2];v++)f.set(l.get(m,p,v),m,g,v)});const h=n.slice();return h[o]=d[1],{outputValues:f.values,outputShape:h,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var gVe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",simpleAbsImpl:J8,addImpl:Q8,bincountImpl:eE,bincountReduceImpl:e5,ceilImpl:t5,concatImpl:n5,equalImpl:s5,expImpl:r5,expm1Impl:a5,floorImpl:l5,gatherNdImpl:u5,gatherV2Impl:c5,greaterImpl:d5,greaterEqualImpl:f5,lessImpl:h5,lessEqualImpl:p5,linSpaceImpl:g5,logImpl:m5,maxImpl:v5,maximumImpl:b5,minimumImpl:y5,multiplyImpl:tE,negImpl:w5,notEqualImpl:$5,prodImpl:C5,rangeImpl:x5,rsqrtImpl:k5,sigmoidImpl:sVe,sliceImpl:I5,sparseFillEmptyRowsImpl:E5,sparseReshapeImpl:T5,sparseSegmentReductionImpl:sE,sqrtImpl:iVe,squaredDifferenceImpl:_5,stridedSliceImpl:N5,stringNGramsImpl:A5,stringSplitImpl:D5,stringToHashBucketFastImpl:R5,subImpl:M5,tileImpl:O5,topKImpl:P5,transposeImpl:nE,uniqueImpl:L5});/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tz("cpu",()=>new p1,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B5=Un(ig,e=>e>=0?e:Math.exp(e)-1),mVe={kernelName:ig,backendName:"cpu",kernelFunc:B5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z5(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{alpha:r}=s;Tt([o],"leakyRelu");const i=qe(o.shape),a=n.data.get(o.dataId).values,l=co("float32",i);for(let u=0;u<a.length;u++)l[u]=a[u]<0?r*a[u]:a[u];return n.makeTensorInfo(o.shape,"float32",l)}const vVe={kernelName:ly,backendName:"cpu",kernelFunc:z5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bVe=Os((e,t)=>e<0?t*e:e);function V5(e){const{inputs:t,backend:n}=e,{x:s,alpha:o}=t;Tt([s,o],"prelu");const r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,[a,l]=bVe(s.shape,o.shape,r,i,"float32");return n.makeTensorInfo(l,"float32",a)}const yVe={kernelName:Ey,backendName:"cpu",kernelFunc:V5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W5=Un(Sg,e=>Math.max(0,e)),wVe={kernelName:Sg,backendName:"cpu",kernelFunc:W5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H5=Un(Ig,e=>Math.min(Math.max(0,e),6)),$Ve={kernelName:Ig,backendName:"cpu",kernelFunc:H5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rE(e,t,n,s,o){if(n==="linear")return na({inputs:{x:t},backend:e});if(n==="relu")return W5({inputs:{x:t},backend:e});if(n==="elu")return B5({inputs:{x:t},backend:e});if(n==="relu6")return H5({inputs:{x:t},backend:e});if(n==="prelu")return V5({inputs:{x:t,alpha:s},backend:e});if(n==="leakyrelu")return z5({inputs:{x:t},backend:e,attrs:{alpha:o}});if(n==="sigmoid")return S5({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ms(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{shape:r}=s,i=qe(o.shape),a=TB(r,i),l=qe(a);J(i===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${o.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`),n.incRef(o.dataId);const u=n.data.get(o.dataId);if(u.complexTensorInfos!=null){const c=u.complexTensorInfos.real,d=u.complexTensorInfos.imag;c.shape=a,d.shape=a}return{dataId:o.dataId,shape:a,dtype:o.dtype}}const CVe={kernelName:Ty,backendName:"cpu",kernelFunc:ms};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U5(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r}=t,{transposeA:i,transposeB:a}=s;Tt([o,r],"matMul");const l=o.shape.length,u=r.shape.length,c=i?o.shape[l-2]:o.shape[l-1],d=a?r.shape[u-1]:r.shape[u-2],f=i?o.shape[l-1]:o.shape[l-2],h=a?r.shape[u-2]:r.shape[u-1],p=o.shape.slice(0,-2),g=r.shape.slice(0,-2),m=qe(p),v=qe(g),$=rn(o.shape.slice(0,-2),r.shape.slice(0,-2)).concat([f,h]);J(c===d,()=>`Error in matMul: inner shapes (${c}) and (${d}) of Tensors with shapes ${o.shape} and ${r.shape} and transposeA=${i} and transposeB=${a} must match.`);const y=i?[m,c,f]:[m,f,c],w=a?[v,h,d]:[v,d,h],C=ms({inputs:{x:o},backend:n,attrs:{shape:y}}),x=ms({inputs:{x:r},backend:n,attrs:{shape:w}}),S=i?C.shape[1]:C.shape[2],T=i?C.shape[2]:C.shape[1],I=a?x.shape[1]:x.shape[2],_=Math.max(m,v),N=n.data.get(C.dataId).values,D=n.data.get(x.dataId).values,F=Ot(C.shape),P=Ot(x.shape),[M,B,j]=i?[F[0],1,F[1]]:[F[0],F[1],1],[X,ae,be]=a?[1,P[1],P[0]]:[P[1],1,P[0]],ie=T*I,ye=vn([_,T,I],C.dtype),ue=ye.values,Z=n.blockSize;for(let ee=0;ee<_;ee++)for(let te=0;te<T;te+=Z)for(let fe=0;fe<I;fe+=Z)for(let De=0;De<S;De+=Z){const We=Math.min(te+Z,T),He=Math.min(fe+Z,I),Ve=Math.min(De+Z,S);for(let Y=te;Y<We;Y++)for(let ne=fe;ne<He;ne++){let q=0;for(let le=De;le<Ve;le++){const xe=Math.min(ee,m-1)*M,oe=Math.min(ee,v-1)*be,Me=N[xe+Y*B+le*j],Re=D[le*X+ne*ae+oe];q+=Me*Re}ue[ee*ie+(Y*I+ne)]+=q}}return n.disposeIntermediateTensorInfo(C),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo($,ye.dtype,ye.values)}const xVe={kernelName:Kb,backendName:"cpu",kernelFunc:U5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kVe(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r,bias:i,preluActivationWeights:a}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=s;let f,h,p;const g=[];f=U5({inputs:{a:o,b:r},attrs:{transposeA:l,transposeB:u},backend:n}),i&&(h=om({inputs:{a:f,b:i},backend:n}),g.push(f),f=h),c&&(p=rE(n,f,c,a,d),g.push(f),f=p);for(const v of g)n.disposeIntermediateTensorInfo(v);return f}const SVe={kernelName:A0,backendName:"cpu",kernelFunc:kVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IVe=Un(Kp,e=>Math.acos(e)),EVe={kernelName:Kp,backendName:"cpu",kernelFunc:IVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TVe=Un(qp,e=>Math.acosh(e)),_Ve={kernelName:qp,backendName:"cpu",kernelFunc:TVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NVe(e){const{inputs:t,backend:n}=e,s=t;Tt(t,"addN");const o=s.map(a=>n.data.get(a.dataId).values),r=vn(s[0].shape,s[0].dtype),i=r.values;for(let a=0;a<s.length;a++){const l=o[a];for(let u=0;u<i.length;u++)i[u]+=l[u]}return n.makeTensorInfo(r.shape,r.dtype,r.values)}const AVe={kernelName:Tk,backendName:"cpu",kernelFunc:NVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;Tt(o,"all");const a=fn(r,o.shape);let l=a;const u=Ts(l,o.shape.length);let c=o;u!=null&&(c=Ir({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Ms(l.length,o.shape.length)),ho("all",l,c.shape.length);const[d,f]=eo(c.shape,l),h=qe(f),p=Io(qe(d),c.dtype),g=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const b=v*h;let $=g[b];for(let y=0;y<h;++y){const w=g[b+y];$=$&&w}p[v]=$}u!=null&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(d,c.dtype,p);if(i){const v=Es(d,a),b=ms({inputs:{x:m},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(m),b}return m}const RVe={kernelName:_k,backendName:"cpu",kernelFunc:DVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;Tt(o,"any");const a=fn(r,o.shape);let l=a;const u=Ts(l,o.shape.length);let c=o;u!=null&&(c=Ir({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Ms(l.length,o.shape.length)),ho("any",l,c.shape.length);const[d,f]=eo(c.shape,l),h=qe(f),p=Io(qe(d),c.dtype),g=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const b=v*h;let $=g[b];for(let y=0;y<h;++y){const w=g[b+y];$=$||w}p[v]=$}u!=null&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(d,c.dtype,p);if(i){const v=Es(d,a),b=ms({inputs:{x:m},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(m),b}return m}const OVe={kernelName:Nk,backendName:"cpu",kernelFunc:MVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;Tt(o,"argMax");let i=fn(r,o.shape);const a=Ts(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Ir({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Ms(i.length,l.shape.length)),i=[i[0]],ho("argMax",i,l.shape.length);const[c,d]=eo(l.shape,i),f=qe(c),h=Io(f,"int32"),p=qe(d),g=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const v=m*p;let b=g[v],$=0;for(let y=0;y<p;++y){const w=g[v+y];w>b&&(b=w,$=y)}h[m]=$}return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(c,"int32",h)}const PVe={kernelName:Hb,backendName:"cpu",kernelFunc:FVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;Tt(o,"argMin");let i=fn(r,o.shape);const a=Ts(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Ir({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Ms(i.length,l.shape.length)),i=[i[0]],ho("argMin",i,l.shape.length);const[c,d]=eo(l.shape,i),f=qe(c),h=Io(f,"int32"),p=qe(d),g=n.data.get(l.dataId).values;for(let m=0;m<h.length;++m){const v=m*p;let b=g[v],$=0;for(let y=0;y<p;++y){const w=g[v+y];w<b&&(b=w,$=y)}h[m]=$}return u.forEach(m=>n.disposeIntermediateTensorInfo(m)),n.makeTensorInfo(c,"int32",h)}const BVe={kernelName:Ub,backendName:"cpu",kernelFunc:LVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zVe=Un(Yp,e=>Math.asin(e)),VVe={kernelName:Yp,backendName:"cpu",kernelFunc:zVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WVe=Un(Xp,e=>Math.asinh(e)),HVe={kernelName:Xp,backendName:"cpu",kernelFunc:WVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UVe=Un(Zp,e=>Math.atan(e)),jVe={kernelName:Zp,backendName:"cpu",kernelFunc:UVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GVe=Os((e,t)=>Math.atan2(e,t)),KVe=to(Qp,GVe),qVe={kernelName:Qp,backendName:"cpu",kernelFunc:KVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YVe=Un(Jp,e=>Math.atanh(e)),XVe={kernelName:Jp,backendName:"cpu",kernelFunc:YVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iE(e,t,n,s,o,r){const i=o.strideHeight,a=o.strideWidth,l=o.dilationHeight,u=o.dilationWidth,c=o.effectiveFilterHeight,d=o.effectiveFilterWidth,f=o.padInfo.top,h=o.padInfo.left,p=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=vn(o.outShape,n),m=g.values,v=o.outShape[1]*o.outShape[2]*o.outShape[3],b=o.outShape[2]*o.outShape[3],$=o.outShape[3];for(let y=0;y<o.batchSize;++y){const w=y*v,C=y*s[0];for(let x=0;x<o.inChannels;++x)for(let S=0;S<o.outHeight;++S){const T=S*i-f,I=Math.max(0,T),_=Math.min(o.inHeight,c+T),N=w+S*b;for(let D=0;D<o.outWidth;++D){const F=D*a-h,P=Math.max(0,F),M=Math.min(o.inWidth,d+F);let B=p,j=0,X=0;for(let be=I;be<_;be+=l){const ie=C+be*s[1];for(let ye=P;ye<M;ye+=u){const ue=ie+ye*s[2],Z=e[ue+x];r==="max"&&Z>B?B=Z:r==="avg"&&(j+=Z,X++)}if(isNaN(B))break}const ae=N+D*$+x;m[ae]=r==="avg"?j/X:B}}}return g}function j5(e,t,n,s,o=!1,r=!1){const i=vn(s.outShape,"int32"),a=s.strideHeight,l=s.strideWidth,u=s.dilationHeight,c=s.dilationWidth,d=s.effectiveFilterHeight,f=s.effectiveFilterWidth,h=s.padInfo.top,p=s.padInfo.left,g=vn(t,n,e);for(let m=0;m<s.batchSize;++m)for(let v=0;v<s.inChannels;++v)for(let b=0;b<s.outHeight;++b){const $=b*a-h;let y=$;for(;y<0;)y+=u;const w=Math.min(s.inHeight,d+$);for(let C=0;C<s.outWidth;++C){const x=C*l-p;let S=x;for(;S<0;)S+=c;const T=Math.min(s.inWidth,f+x);let I=Number.NEGATIVE_INFINITY,_=-1;for(let N=y;N<w;N+=u){const D=N-$;for(let F=S;F<T;F+=c){const P=F-x,M=g.get(m,N,F,v);M>I&&(I=M,o?_=r?((m*s.inHeight+N)*s.inWidth+F)*s.inChannels+v:(N*s.inWidth+F)*s.inChannels+v:_=D*f+P)}}i.set(_,m,b,C,v)}}return i}function G5(e,t,n,s,o,r){const i=o.strideDepth,a=o.strideHeight,l=o.strideWidth,u=o.dilationDepth,c=o.dilationHeight,d=o.dilationWidth,f=o.effectiveFilterDepth,h=o.effectiveFilterHeight,p=o.effectiveFilterWidth,g=o.padInfo.front,m=o.padInfo.top,v=o.padInfo.left,b=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,$=vn(o.outShape,n),y=$.values,w=o.outShape[1]*o.outShape[2]*o.outShape[3]*o.outShape[4],C=o.outShape[2]*o.outShape[3]*o.outShape[4],x=o.outShape[3]*o.outShape[4],S=o.outShape[4];for(let T=0;T<o.batchSize;++T){const I=T*w,_=T*s[0];for(let N=0;N<o.inChannels;++N)for(let D=0;D<o.outDepth;++D){const F=D*i-g;let P=F;for(;P<0;)P+=u;const M=Math.min(o.inDepth,f+F),B=I+D*C;for(let j=0;j<o.outHeight;++j){const X=j*a-m;let ae=X;for(;ae<0;)ae+=c;const be=Math.min(o.inHeight,h+X),ie=B+j*x;for(let ye=0;ye<o.outWidth;++ye){const ue=ye*l-v;let Z=ue;for(;Z<0;)Z+=d;const ee=Math.min(o.inWidth,p+ue),te=ie+ye*S;let fe=b,De=0,We=0;for(let Ve=P;Ve<M;Ve+=u){const Y=_+Ve*s[1];for(let ne=ae;ne<be;ne+=c){const q=Y+ne*s[2];for(let le=Z;le<ee;le+=d){const xe=q+le*s[3],oe=e[xe+N];if(r==="max"&&oe>fe?fe=oe:r==="avg"&&(De+=oe,We++),isNaN(fe))break}if(isNaN(fe))break}if(isNaN(fe))break}const He=te+N;y[He]=r==="avg"?De/We:fe}}}}return $}function ZVe(e,t){const n=vn(t.outShape,"int32"),s=t.strideDepth,o=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,a=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,h=t.padInfo.top,p=t.padInfo.left;for(let g=0;g<t.batchSize;++g)for(let m=0;m<t.inChannels;++m)for(let v=0;v<t.outDepth;++v){const b=v*s-f;let $=b;for(;$<0;)$+=i;const y=Math.min(t.inDepth,u+b);for(let w=0;w<t.outHeight;++w){const C=w*o-h;let x=C;for(;x<0;)x+=a;const S=Math.min(t.inHeight,c+C);for(let T=0;T<t.outWidth;++T){const I=T*r-p;let _=I;for(;_<0;)_+=l;const N=Math.min(t.inWidth,d+I);let D=Number.NEGATIVE_INFINITY,F=-1;for(let P=$;P<y;P+=i){const M=P-b;for(let B=x;B<S;B+=a){const j=B-C;for(let X=_;X<N;X+=l){const ae=X-I,be=e.get(g,P,B,X,m);be>=D&&(D=be,F=M*c*d+j*c+ae)}}}n.set(F,g,v,w,T,m)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JVe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;Tt(o,"avgPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,u=1;J(Eo(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=si(o.shape,r,i,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Pn(c.inShape,c.outShape))d=na({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Ot(o.shape),p=iE(f,o.shape,o.dtype,h,c,"avg");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const QVe={kernelName:jb,backendName:"cpu",kernelFunc:JVe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=s;Tt(o,"avgPool3d");const c=Pa(o.shape,r,i,1,a,l,u),d=n.data.get(o.dataId).values,f=G5(d,o.shape,o.dtype,Ot(o.shape),c,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const t6e={kernelName:Gb,backendName:"cpu",kernelFunc:e6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n6e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,{filterSize:i,strides:a,pad:l,dimRoundingMode:u}=s;Tt([o,r],"avgPool3DGrad");const c=Pa(r.shape,i,a,1,l,u),d=c.strideDepth,f=c.strideHeight,h=c.strideWidth,p=c.filterDepth,g=c.filterHeight,m=c.filterWidth,v=c.dilationDepth,b=c.dilationHeight,$=c.dilationWidth,y=c.effectiveFilterDepth,w=c.effectiveFilterHeight,C=c.effectiveFilterWidth,x=y-1-c.padInfo.front,S=C-1-c.padInfo.left,T=w-1-c.padInfo.top,I=vn(r.shape,"float32"),_=1/(p*g*m),N=n.bufferSync(o);for(let D=0;D<c.batchSize;++D)for(let F=0;F<c.inChannels;++F)for(let P=0;P<c.inDepth;++P)for(let M=0;M<c.inHeight;++M)for(let B=0;B<c.inWidth;++B){const j=P-x,X=M-T,ae=B-S;let be=0;for(let ie=0;ie<y;ie+=v){const ye=(j+ie)/d;if(!(ye<0||ye>=c.outDepth||Math.floor(ye)!==ye))for(let ue=0;ue<w;ue+=b){const Z=(X+ue)/f;if(!(Z<0||Z>=c.outHeight||Math.floor(Z)!==Z))for(let ee=0;ee<C;ee+=$){const te=(ae+ee)/h;if(te<0||te>=c.outWidth||Math.floor(te)!==te)continue;be+=N.get(D,ye,Z,te,F)}}}I.set(be*_,D,P,M,B,F)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const s6e={kernelName:Dk,backendName:"cpu",kernelFunc:n6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o6e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,i=r;Tt([o,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=s,c=si(i.shape,a,l,1,u),d=c.strideHeight,f=c.strideWidth,h=c.filterHeight,p=c.filterWidth,g=c.dilationHeight,m=c.dilationWidth,v=c.effectiveFilterHeight,b=c.effectiveFilterWidth,$=b-1-c.padInfo.left,y=v-1-c.padInfo.top,w=vn(i.shape,"float32"),C=1/(h*p),x=n.data.get(o.dataId).values,S=vn(o.shape,"float32",x);for(let T=0;T<c.batchSize;++T)for(let I=0;I<c.inChannels;++I)for(let _=0;_<c.inHeight;++_)for(let N=0;N<c.inWidth;++N){const D=_-y,F=N-$;let P=0;for(let M=0;M<v;M+=g){const B=(D+M)/d;if(!(B<0||B>=c.outHeight||Math.floor(B)!==B))for(let j=0;j<b;j+=m){const X=(F+j)/f;if(X<0||X>=c.outWidth||Math.floor(X)!==X)continue;P+=S.get(T,B,X,I)}}w.set(P*C,T,_,N,I)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const r6e={kernelName:Ak,backendName:"cpu",kernelFunc:o6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,scale:r,offset:i,mean:a,variance:l}=t;J(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),J(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),J(r==null||a.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Tt([o,a,l,r,i],"batchNorm");let{varianceEpsilon:u}=s;u==null&&(u=.001);const c=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,f=n.data.get(l.dataId).values,h=r?n.data.get(r.dataId).values:new Float32Array([1]),p=i?n.data.get(i.dataId).values:new Float32Array([0]),g=new Float32Array(c.length),m=p.length,v=h.length,b=f.length,$=d.length;let y=0,w=0,C=0,x=0;for(let S=0;S<c.length;++S)g[S]=p[y++]+(c[S]-d[w++])*h[C++]/Math.sqrt(f[x++]+u),y>=m&&(y=0),w>=$&&(w=0),C>=v&&(C=0),x>=b&&(x=0);return n.makeTensorInfo(o.shape,o.dtype,g)}const a6e={kernelName:ry,backendName:"cpu",kernelFunc:i6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,crops:i}=s;Tt([o],"batchToSpaceND");const a=r.reduce((v,b)=>v*b),l=Kg(o.shape,r,a),u=qg(l.length,r.length),c=Yg(o.shape,r,a),d=pI(i,r.length),f=gI(c,i,r.length),h=ms({inputs:{x:o},backend:n,attrs:{shape:l}}),p=Ir({inputs:{x:h},backend:n,attrs:{perm:u}}),g=ms({inputs:{x:p},backend:n,attrs:{shape:c}}),m=sc({inputs:{x:g},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),m}const u6e={kernelName:qb,backendName:"cpu",kernelFunc:l6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:i}=s,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,u=eE(a,l,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,u)}const d6e={kernelName:Rk,backendName:"cpu",kernelFunc:c6e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f6e(e){const{inputs:t,backend:n}=e,{s0:s,s1:o}=t,r=n.data.get(s.dataId).values,i=n.data.get(o.dataId).values,a=rn(Array.from(r),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const h6e={kernelName:PB,backendName:"cpu",kernelFunc:f6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p6e=Un(ng,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),g6e={kernelName:ng,backendName:"cpu",kernelFunc:p6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m6e=e=>{const{x:t}=e.inputs,n=e.backend,s=new Float32Array(qe(t.shape)),o=n.data.get(t.dataId),r=o.complexTensorInfos.real,i=o.complexTensorInfos.imag,a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values;for(let u=0;u<a.length;u++){const c=a[u],d=l[u];s[u]=Math.hypot(c,d)}return n.makeOutput(s,t.shape,"float32")},v6e={kernelName:Yb,backendName:"cpu",kernelFunc:m6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hd(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.data.get(s.dataId).complexTensorInfos.imag,r=n.data.get(o.dataId).values;return n.makeTensorInfo(o.shape,o.dtype,r)}const b6e={kernelName:Kk,backendName:"cpu",kernelFunc:Hd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ud(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s,r=fn(o,t[0].shape)[0];let i=Yi(t.map(g=>g.shape),r);if(qe(i)===0)return n.makeTensorInfo(i,t[0].dtype,[]);const a=t.filter(g=>qe(g.shape)>0);if(a.length===1)return na({inputs:{x:a[0]},backend:n});const l=a.map(g=>g.shape);if(dI(l,r),a[0].dtype==="complex64"){const g=a.map(y=>nc({inputs:{input:y},backend:n})),m=a.map(y=>Hd({inputs:{input:y},backend:n})),v=Ud({inputs:g,backend:n,attrs:{axis:r}}),b=Ud({inputs:m,backend:n,attrs:{axis:r}}),$=Yo({inputs:{real:v,imag:b},backend:n});return g.forEach(y=>n.disposeIntermediateTensorInfo(y)),m.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),$}const u=a.map(g=>{const m=qe(g.shape.slice(r));return ms({inputs:{x:g},backend:n,attrs:{shape:[-1,m]}})}),c=u.map(g=>({vals:n.data.get(g.dataId).values,shape:g.shape}));i=Yi(u.map(g=>g.shape),1);const d=u[0].shape[0]===1,f=n5(c,i,t[0].dtype,d),h=Yi(a.map(g=>g.shape),r),p=n.makeTensorInfo(h,t[0].dtype,f);return u.forEach(g=>n.disposeIntermediateTensorInfo(g)),p}const y6e={kernelName:Xb,backendName:"cpu",kernelFunc:Ud};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=s;Tt([o,r],"conv2d");const d=La(l),f=fo(o.shape,r.shape,i,u,a,c,!1,d),h=f.filterHeight,p=f.filterWidth,g=f.dilationHeight,m=f.dilationWidth,v=f.padInfo.left,b=f.padInfo.top,$=f.dataFormat==="channelsLast",y=new Co(f.outShape,o.dtype),w=Ot(o.shape),C=Ot(r.shape),x=w[0],S=$?w[1]:w[2],T=$?w[2]:1,I=$?1:w[1],_=y.strides[0],N=$?y.strides[1]:y.strides[2],D=$?y.strides[2]:1,F=$?1:y.strides[1],P=n.data.get(o.dataId).values,M=n.data.get(r.dataId).values,B=y.values;for(let j=0;j<f.batchSize;++j){const X=j*x,ae=j*_;for(let be=0;be<f.outHeight;++be){const ie=ae+be*N,ye=be*f.strideHeight-b;for(let ue=0;ue<h;++ue){const Z=ye+ue*g;if(Z<0||Z>=f.inHeight)continue;const ee=ue*C[0],te=X+Z*S;for(let fe=0;fe<f.outWidth;++fe){const De=ie+fe*D,We=fe*f.strideWidth-v;for(let He=0;He<p;++He){const Ve=We+He*m;if(Ve<0||Ve>=f.inWidth)continue;const Y=ee+He*C[1],ne=te+Ve*T;let q=Y;for(let le=0;le<f.inChannels;++le){const xe=P[ne+le*I];for(let oe=0;oe<f.outChannels;++oe)B[De+oe*F]+=xe*M[q+oe];q+=f.outChannels}}}}}}return n.makeTensorInfo(y.shape,y.dtype,B)}const w6e={kernelName:Zb,backendName:"cpu",kernelFunc:K5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=s;Tt([o,r],"conv2dBackpropFilter");const d=La(l),f=fo(o.shape,c,i,1,a,u,!1,d),{strideHeight:h,strideWidth:p,filterHeight:g,filterWidth:m}=f,v=f.dataFormat==="channelsLast",b=new Co(f.filterShape,"float32"),$=f.padInfo.left,y=f.padInfo.top,w=n.data.get(o.dataId).values,C=n.data.get(r.dataId).values,x=new Co(o.shape,o.dtype,w),S=new Co(r.shape,r.dtype,C);for(let T=0;T<g;++T){const I=Math.max(0,Math.ceil((y-T)/h)),_=Math.min(f.outHeight,(f.inHeight+y-T)/h);for(let N=0;N<m;++N){const D=Math.max(0,Math.ceil(($-N)/p)),F=Math.min(f.outWidth,(f.inWidth+$-N)/p);for(let P=0;P<f.inChannels;++P)for(let M=0;M<f.outChannels;++M){let B=0;for(let j=0;j<f.batchSize;++j)for(let X=I;X<_;++X){const ae=T+X*h-y;for(let be=D;be<F;++be){const ie=N+be*p-$;v?B+=x.get(j,ae,ie,P)*S.get(j,X,be,M):B+=x.get(j,P,ae,ie)*S.get(j,M,X,be)}}b.set(B,T,N,P,M)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const C6e={kernelName:Ok,backendName:"cpu",kernelFunc:$6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x6e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{inputShape:i,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=s;Tt([o,r],"conv2dBackpropInput");const d=Ot(r.shape),f=Ot(o.shape);let h=La(u);const p=fo(i,r.shape,a,1,l,c,!1,h),g=new Co(p.inShape,"float32"),m=g.values,v=n.data.get(o.dataId).values,b=n.data.get(r.dataId).values,[$,y,w]=d,{batchSize:C,filterHeight:x,filterWidth:S,inChannels:T,inHeight:I,inWidth:_,outChannels:N,outHeight:D,outWidth:F,strideHeight:P,strideWidth:M}=p;h=p.dataFormat;const B=x-1-p.padInfo.top,j=S-1-p.padInfo.left,X=h==="channelsLast",ae=g.strides[0],be=X?g.strides[1]:g.strides[2],ie=X?g.strides[2]:1,ye=X?1:g.strides[1],ue=f[0],Z=X?f[1]:f[2],ee=X?f[2]:1,te=X?1:f[1];for(let fe=0;fe<C;++fe)for(let De=0;De<T;++De)for(let We=0;We<I;++We){const He=We-B,Ve=Math.max(0,Math.ceil(He/P)),Y=Math.min(D,(x+He)/P);for(let ne=0;ne<_;++ne){const q=ne-j,le=Math.max(0,Math.ceil(q/M)),xe=Math.min(F,(S+q)/M);let oe=0;for(let Re=Ve;Re<Y;++Re){const ve=Re*P-He;for(let Ae=le;Ae<xe;++Ae){const it=Ae*M-q,Je=ue*fe+Z*Re+ee*Ae,st=$*(x-1-ve)+y*(S-1-it)+w*De;for(let vt=0;vt<N;++vt){const z=v[Je+te*vt],k=b[st+vt];oe+=z*k}}}const Me=ae*fe+be*We+ie*ne+ye*De;m[Me]=oe}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const k6e={kernelName:Jb,backendName:"cpu",kernelFunc:x6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l}=s;Tt([o,r],"conv3d");const u=Fl(o.shape,r.shape,i,l,a),{filterDepth:c,filterHeight:d,filterWidth:f,dilationDepth:h,dilationHeight:p,dilationWidth:g,padInfo:m}=u,v=m.front,b=m.left,$=m.top,y=new Co(u.outShape,o.dtype),w=n.data.get(o.dataId).values,C=n.data.get(r.dataId).values,x=y.values,S=Ot(o.shape),T=Ot(r.shape);for(let I=0;I<u.batchSize;++I){const _=I*S[0],N=I*y.strides[0];for(let D=0;D<u.outDepth;++D){const F=N+D*y.strides[1],P=D*u.strideDepth-v;for(let M=0;M<c;++M){const B=P+M*h;if(B<0||B>=u.inDepth)continue;const j=M*T[0],X=_+B*S[1];for(let ae=0;ae<u.outHeight;++ae){const be=F+ae*y.strides[2],ie=ae*u.strideHeight-$;for(let ye=0;ye<d;++ye){const ue=ie+ye*p;if(ue<0||ue>=u.inHeight)continue;const Z=j+ye*T[1],ee=X+ue*S[2];for(let te=0;te<u.outWidth;++te){const fe=be+te*u.outChannels,De=te*u.strideWidth-b;for(let We=0;We<f;++We){const He=De+We*g;if(He<0||He>=u.inWidth)continue;const Ve=Z+We*T[2],Y=ee+He*u.inChannels;let ne=Ve;for(let q=0;q<u.inChannels;++q){const le=w[Y+q];for(let xe=0;xe<u.outChannels;++xe)x[fe+xe]+=le*C[ne+xe];ne+=u.outChannels}}}}}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const I6e={kernelName:Qb,backendName:"cpu",kernelFunc:S6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,pad:a,filterShape:l}=s;Tt([o,r],"conv3dBackpropFilterV2");const u=Ot(o.shape),c=Ot(r.shape),d=Fl(o.shape,l,i,1,a),f=d.strideDepth,h=d.strideHeight,p=d.strideWidth,g=d.filterDepth,m=d.filterHeight,v=d.filterWidth,b=new Co(d.filterShape,"float32"),$=b.values,[y,w,C,x]=b.strides,S=n.data.get(r.dataId).values,[T,I,_,N]=c,D=n.data.get(o.dataId).values,[F,P,M,B]=u,j=d.padInfo.front,X=d.padInfo.left,ae=d.padInfo.top;for(let be=0;be<g;++be){const ie=Math.max(0,Math.ceil((j-be)/f)),ye=Math.min(d.outDepth,(d.inDepth+j-be)/f),ue=be*y;for(let Z=0;Z<m;++Z){const ee=Math.max(0,Math.ceil((ae-Z)/h)),te=Math.min(d.outHeight,(d.inHeight+ae-Z)/h),fe=Z*w+ue;for(let De=0;De<v;++De){const We=Math.max(0,Math.ceil((X-De)/p)),He=Math.min(d.outWidth,(d.inWidth+X-De)/p),Ve=De*C+fe;for(let Y=0;Y<d.inChannels;++Y){const ne=Y*x+Ve;for(let q=0;q<d.outChannels;++q){let le=0;for(let xe=0;xe<d.batchSize;++xe){const oe=xe*F,Me=xe*T;for(let Re=ie;Re<ye;++Re){const Ae=(be+Re*f-j)*P+oe,it=Re*I+Me;for(let Je=ee;Je<te;++Je){const vt=(Z+Je*h-ae)*M+Ae,z=Je*_+it;for(let k=We;k<He;++k){const W=(De+k*p-X)*B+vt,G=k*N+z;le+=D[W+Y]*S[G+q]}}}}$[ne+q]=le}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const T6e={kernelName:Fk,backendName:"cpu",kernelFunc:E6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _6e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{pad:i,strides:a,inputShape:l}=s;Tt([o],"conv3dBackpropInputV2");const u=Ot(o.shape),c=Ot(r.shape),d=Fl(l,r.shape,a,1,i),f=new Co(d.inShape,"float32"),h=f.values,[p,g,m,v]=f.strides,b=n.data.get(o.dataId).values,[$,y,w,C]=u,x=n.data.get(r.dataId).values,[S,T,I,_]=c,{batchSize:N,filterDepth:D,filterHeight:F,filterWidth:P,inChannels:M,inDepth:B,inHeight:j,inWidth:X,outChannels:ae,outDepth:be,outHeight:ie,outWidth:ye,strideDepth:ue,strideHeight:Z,strideWidth:ee}=d,te=D-1-d.padInfo.front,fe=F-1-d.padInfo.top,De=P-1-d.padInfo.left;for(let We=0;We<N;++We)for(let He=0;He<M;++He)for(let Ve=0;Ve<B;++Ve){const Y=Ve-te,ne=Math.max(0,Math.ceil(Y/ue)),q=Math.min(be,(D+Y)/ue);for(let le=0;le<j;++le){const xe=le-fe,oe=Math.max(0,Math.ceil(xe/Z)),Me=Math.min(ie,(F+xe)/Z);for(let Re=0;Re<X;++Re){const ve=Re-De,Ae=Math.max(0,Math.ceil(ve/ee)),it=Math.min(ye,(P+ve)/ee);let Je=0;for(let st=ne;st<q;++st){const vt=st*ue-Y;for(let z=oe;z<Me;++z){const k=z*Z-xe;for(let E=Ae;E<it;++E){const W=E*ee-ve,G=$*We+y*st+w*z+C*E,he=S*(D-1-vt)+T*(F-1-k)+I*(P-1-W)+_*He;for(let _e=0;_e<ae;++_e){const ht=b[G+_e],Dt=x[he+_e];Je+=ht*Dt}}}}h[p*We+g*Ve+m*le+v*Re+He]=Je}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const N6e={kernelName:Pk,backendName:"cpu",kernelFunc:_6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A6e=Un(sg,e=>Math.cos(e)),D6e={kernelName:sg,backendName:"cpu",kernelFunc:A6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R6e=Un(og,e=>Math.cosh(e)),M6e={kernelName:og,backendName:"cpu",kernelFunc:R6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O6e(e){const{inputs:t,backend:n,attrs:s}=e,{image:o,boxes:r,boxInd:i}=t,{cropSize:a,method:l,extrapolationValue:u}=s,[c,d,f,h]=o.shape,p=r.shape[0],[g,m]=a,v=vn([p,g,m,h],"float32"),b=n.data.get(r.dataId).values,$=n.data.get(i.dataId).values,y=n.data.get(o.dataId).values,w=Ot(o.shape),C=Ot(v.shape);for(let x=0;x<p;x++){const S=x*4,T=b[S],I=b[S+1],_=b[S+2],N=b[S+3],D=$[x];if(D>=c)continue;const F=g>1?(_-T)*(d-1)/(g-1):0,P=m>1?(N-I)*(f-1)/(m-1):0;for(let M=0;M<g;M++){const B=g>1?T*(d-1)+M*F:.5*(T+_)*(d-1);if(B<0||B>d-1){for(let j=0;j<m;j++)for(let X=0;X<h;X++){const ae=X+j*C[2]+M*C[1]+x*C[0];v.values[ae]=u}continue}if(l==="bilinear"){const j=Math.floor(B),X=Math.ceil(B),ae=B-j;for(let be=0;be<m;be++){const ie=m>1?I*(f-1)+be*P:.5*(I+N)*(f-1);if(ie<0||ie>f-1){for(let ee=0;ee<h;ee++){const te=ee+be*C[2]+M*C[1]+x*C[0];v.values[te]=u}continue}const ye=Math.floor(ie),ue=Math.ceil(ie),Z=ie-ye;for(let ee=0;ee<h;ee++){let te=ee+ye*w[2]+j*w[1]+D*w[0];const fe=y[te];te=ee+ue*w[2]+j*w[1]+D*w[0];const De=y[te];te=ee+ye*w[2]+X*w[1]+D*w[0];const We=y[te];te=ee+ue*w[2]+X*w[1]+D*w[0];const He=y[te],Ve=fe+(De-fe)*Z,Y=We+(He-We)*Z;te=ee+be*C[2]+M*C[1]+x*C[0],v.values[te]=Ve+(Y-Ve)*ae}}}else for(let j=0;j<m;++j){const X=m>1?I*(f-1)+j*P:.5*(I+N)*(f-1);if(X<0||X>f-1){for(let ie=0;ie<h;ie++){const ye=ie+j*C[2]+M*C[1]+x*C[0];v.values[ye]=u}continue}const ae=Math.round(X),be=Math.round(B);for(let ie=0;ie<h;ie++){const ye=ie+ae*w[2]+be*w[1]+D*w[0],ue=ie+j*C[2]+M*C[1]+x*C[0];v.values[ue]=y[ye]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}const F6e={kernelName:Lk,backendName:"cpu",kernelFunc:O6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,exclusive:i,reverse:a}=s;Tt(o,"cumsum");const l=Ts([r],o.shape.length);let u=o;l!=null&&(u=Ir({inputs:{x:o},backend:n,attrs:{perm:l}}));const c=Ms(1,o.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const d=kr(u.dtype,"int32"),f=Io(qe(u.shape),d),h=n.data.get(u.dataId).values,p=u.shape[u.shape.length-1],g=a?(v,b)=>v+p-b-1:(v,b)=>v+b;for(let v=0;v<h.length;v+=p)for(let b=0;b<p;b++){const $=g(v,b);if(b===0)f[$]=i?0:h[$];else{const y=g(v,b-1);f[$]=i?h[y]+f[y]:h[$]+f[y]}}const m=n.makeTensorInfo(u.shape,d,f);if(l!=null){const v=vf(l),b=Ir({inputs:{x:m},backend:n,attrs:{perm:v}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(u),b}return m}const L6e={kernelName:ey,backendName:"cpu",kernelFunc:P6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:i,binaryOutput:a}=s;if(o.shape.length===1){const l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,c=eE(l,u,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(r),c=e5(l,u,i,a);return n.makeTensorInfo(c.shape,r.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const z6e={kernelName:LB,backendName:"cpu",kernelFunc:B6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockSize:r,dataFormat:i}=s;J(i==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${i}`);const a=o.shape[0],l=o.shape[1],u=o.shape[2],c=o.shape[3],d=l*r,f=u*r,h=c/(r*r),p=n.data.get(o.dataId).values,g=new Float32Array(a*d*f*h);let m=0;for(let v=0;v<a;++v)for(let b=0;b<d;++b){const $=Math.floor(b/r),y=b%r;for(let w=0;w<f;++w){const C=Math.floor(w/r),x=w%r,S=(y*r+x)*h;for(let T=0;T<h;++T){const _=T+S+c*(C+u*($+l*v));g[m++]=p[_]}}}return n.makeTensorInfo([a,d,f,h],o.dtype,g)}const W6e={kernelName:Bk,backendName:"cpu",kernelFunc:V6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q5(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l,dimRoundingMode:u}=s;Tt([o,r],"depthwiseConv2DNative");const c=Ot(o.shape),d=Ot(r.shape);let f=l;f==null&&(f=[1,1]),J(Eo(i,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${f}'`);const h=fo(o.shape,r.shape,i,f,a,u,!0),{filterHeight:p,filterWidth:g,dilationHeight:m,dilationWidth:v,padInfo:b}=h,$=b.left,y=b.top,w=h.outChannels/h.inChannels,C=new Co(h.outShape,o.dtype),x=n.data.get(o.dataId).values,S=n.data.get(r.dataId).values,T=C.values;for(let I=0;I<h.batchSize;++I){const _=I*c[0],N=I*C.strides[0];for(let D=0;D<h.outHeight;++D){const F=N+D*C.strides[1],P=D*h.strideHeight-y;for(let M=0;M<p;++M){const B=P+M*m;if(B<0||B>=h.inHeight)continue;const j=M*d[0],X=_+B*c[1];for(let ae=0;ae<h.outWidth;++ae){const be=F+ae*C.strides[2],ie=ae*h.strideWidth-$;for(let ye=0;ye<g;++ye){const ue=ie+ye*v;if(ue<0||ue>=h.inWidth)continue;const Z=j+ye*d[1],ee=X+ue*h.inChannels;let te=be,fe=Z;for(let De=0;De<h.inChannels;++De){const We=x[ee+De];for(let He=0;He<w;++He)T[te+He]+=We*S[fe+He];te+=w,fe+=w}}}}}}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const H6e={kernelName:ty,backendName:"cpu",kernelFunc:q5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U6e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=s;Tt([o,r],"depthwiseConv2dNativeBackpropFilter");const d=fo(o.shape,c,i,a,l,u,!0),{strideHeight:f,strideWidth:h,filterHeight:p,filterWidth:g}=d,m=new Co(d.filterShape,"float32"),v=d.padInfo.left,b=d.padInfo.top,$=d.outChannels/d.inChannels,y=n.data.get(o.dataId).values,w=new Co(o.shape,o.dtype,y),C=n.data.get(r.dataId).values,x=new Co(r.shape,r.dtype,C);for(let S=0;S<p;++S){const T=Math.max(0,Math.ceil((b-S)/f)),I=Math.min(d.outHeight,(d.inHeight+b-S)/f);for(let _=0;_<g;++_){const N=Math.max(0,Math.ceil((v-_)/h)),D=Math.min(d.outWidth,(d.inWidth+v-_)/h);for(let F=0;F<d.outChannels;++F){const P=Math.trunc(F/$),M=F%$;let B=0;for(let j=0;j<d.batchSize;++j)for(let X=T;X<I;++X){const ae=S+X*f-b;for(let be=N;be<D;++be){const ie=_+be*h-v;B+=w.get(j,ae,ie,P)*x.get(j,X,be,F)}}m.set(B,S,_,P,M)}}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const j6e={kernelName:zk,backendName:"cpu",kernelFunc:U6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G6e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=s;Tt([o,r],"depthwiseConv2DNativeBackpropInput");const d=Ot(o.shape),f=Ot(r.shape),h=fo(c,r.shape,i,a,l,u,!0),p=new Co(h.inShape,"float32"),g=p.values,[m,v,b]=p.strides,$=n.data.get(o.dataId).values,[y,w,C]=d,x=n.data.get(r.dataId).values,[S,T,I]=f,{batchSize:_,filterHeight:N,filterWidth:D,inChannels:F,inHeight:P,inWidth:M,outChannels:B,outHeight:j,outWidth:X,strideHeight:ae,strideWidth:be}=h,ie=N-1-h.padInfo.top,ye=D-1-h.padInfo.left,ue=B/F;for(let Z=0;Z<_;++Z)for(let ee=0;ee<F;++ee)for(let te=0;te<P;++te){const fe=te-ie,De=Math.max(0,Math.ceil(fe/ae)),We=Math.min(j,(N+fe)/ae);for(let He=0;He<M;++He){const Ve=He-ye,Y=Math.max(0,Math.ceil(Ve/be)),ne=Math.min(X,(D+Ve)/be);let q=0;for(let le=De;le<We;++le){const xe=le*ae-fe;for(let oe=Y;oe<ne;++oe){const Me=oe*be-Ve,Re=y*Z+w*le+C*oe,ve=S*(N-1-xe)+T*(D-1-Me)+I*ee;for(let Ae=0;Ae<ue;++Ae){const it=ee*ue+Ae,Je=$[Re+it],st=x[ve+Ae];q+=Je*st}}}g[m*Z+v*te+b*He+ee]=q}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const K6e={kernelName:Vk,backendName:"cpu",kernelFunc:G6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q6e(e){const{inputs:t,backend:n}=e,{x:s}=t,o=qe(s.shape),r=n.data.get(s.dataId).values,i=vn([o,o],s.dtype),a=i.values;for(let u=0;u<r.length;u++)a[u*o+u]=r[u];const l=[...s.shape,...s.shape];return n.makeTensorInfo(l,i.dtype,i.values)}const Y6e={kernelName:BB,backendName:"cpu",kernelFunc:q6e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X6e={kernelName:ny,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:s,filter:o}=e,{strides:r,pad:i,dilations:a}=n,l=t,u=l.data.get(s.dataId).values,c=s.shape.length,d=l.data.get(o.dataId).values,f=o.shape.length,{batchSize:h,inHeight:p,inWidth:g,inChannels:m,outHeight:v,outWidth:b,padInfo:$,strideHeight:y,strideWidth:w,filterHeight:C,filterWidth:x,dilationHeight:S,dilationWidth:T,outShape:I}=Hg(s.shape,o.shape,r,i,"NHWC",a),_=qe(I),N=I.length,D=Vo(s.dtype,_);for(let P=0;P<h;++P)for(let M=0;M<v;++M){const B=M*y-$.top;for(let j=0;j<b;++j){const X=j*w-$.left;for(let ae=0;ae<m;++ae){let be=Number.MIN_SAFE_INTEGER;for(let ye=0;ye<C;++ye){const ue=B+ye*S;if(ue>=0&&ue<p)for(let Z=0;Z<x;++Z){const ee=X+Z*T;if(ee>=0&&ee<g){const te=Ki([P,ue,ee,ae],c,Ot(s.shape)),fe=Ki([ye,Z,ae],f,Ot(o.shape)),De=u[te]+d[fe];De>be&&(be=De)}}}const ie=Ki([P,M,j,ae],N,Ot(I));D[ie]=be}}}return{dataId:l.write(mc(D,s.dtype),I,s.dtype),shape:I,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Z6e={kernelName:JC,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:s,filter:o,dy:r}=e,{strides:i,pad:a,dilations:l}=n,u=t,c=$i(s.shape,u.data.get(s.dataId).values),d=$i(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:g,outHeight:m,outWidth:v,padInfo:b,strideHeight:$,strideWidth:y,filterHeight:w,filterWidth:C,dilationHeight:x,dilationWidth:S,outShape:T}=Hg(s.shape,o.shape,i,a,"NHWC",l);J(r.rank===T.length,()=>`Error in ${JC}, dy must have the same rank as output ${T.length}, but got ${r.rank}`);const I=$i(T,u.data.get(r.dataId).values),_=DB(o.shape,o.dtype);for(let D=0;D<f;++D)for(let F=0;F<m;++F){const P=F*$-b.top;for(let M=0;M<v;++M){const B=M*y-b.left;for(let j=0;j<g;++j){let X=Number.MIN_SAFE_INTEGER,ae=0,be=0;for(let ie=0;ie<w;++ie){const ye=P+ie*x;if(ye>=0&&ye<h)for(let ue=0;ue<C;++ue){const Z=B+ue*S;if(Z>=0&&Z<p){const ee=c[D][ye][Z][j]+d[ie][ue][j];ee>X&&(X=ee,ae=ie,be=ue)}}}_[ae][be][j]+=I[D][F][M][j]}}}return{dataId:u.write(mc(_,s.dtype),o.shape,o.dtype),shape:o.shape,dtype:o.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J6e={kernelName:ZC,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:s,filter:o,dy:r}=e,{strides:i,pad:a,dilations:l}=n,u=t,c=$i(s.shape,u.data.get(s.dataId).values),d=$i(o.shape,u.data.get(o.dataId).values),{batchSize:f,inHeight:h,inWidth:p,inChannels:g,outHeight:m,outWidth:v,padInfo:b,strideHeight:$,strideWidth:y,filterHeight:w,filterWidth:C,dilationHeight:x,dilationWidth:S,outShape:T}=Hg(s.shape,o.shape,i,a,"NHWC",l);J(r.rank===T.length,()=>`Error in ${ZC}, dy must have the same rank as output ${T.length}, but got ${r.rank}`);const I=$i(T,u.data.get(r.dataId).values),_=DB(s.shape,s.dtype);for(let D=0;D<f;++D)for(let F=0;F<m;++F){const P=F*$-b.top;for(let M=0;M<v;++M){const B=M*y-b.left;for(let j=0;j<g;++j){let X=Number.MIN_SAFE_INTEGER,ae=P<0?0:P,be=B<0?0:B;for(let ie=0;ie<w;++ie){const ye=P+ie*x;if(ye>=0&&ye<h)for(let ue=0;ue<C;++ue){const Z=B+ue*S;if(Z>=0&&Z<p){const ee=c[D][ye][Z][j]+d[ie][ue][j];ee>X&&(X=ee,ae=ye,be=Z)}}}_[D][ae][be][j]+=I[D][F][M][j]}}}return{dataId:u.write(mc(_,s.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rm(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;Tt(o,"sum");let a;o.dtype==="bool"?a=xl({inputs:{x:o},backend:n,attrs:{dtype:"int32"}}):a=na({inputs:{x:o},backend:n});const l=a.shape.length,u=fn(r,a.shape),c=Ts(u,l);let d=u,f=a;c!=null&&(f=Ir({inputs:{x:a},backend:n,attrs:{perm:c}}),d=Ms(d.length,l)),ho("sum",d,f.shape.length);const[h,p]=eo(f.shape,d),g=kr(f.dtype,"int32");let m=G0(n,h,g);const v=qe(p),b=n.data.get(m.dataId).values,$=n.data.get(f.dataId).values;for(let y=0;y<b.length;++y){const w=y*v;let C=0;for(let x=0;x<v;++x)C+=$[w+x];b[y]=C}if(i){const y=Es(m.shape,u),w=m;m=ms({inputs:{x:m},backend:n,attrs:{shape:y}}),n.disposeIntermediateTensorInfo(w)}return n.disposeIntermediateTensorInfo(a),c!=null&&n.disposeIntermediateTensorInfo(f),m}const Q6e={kernelName:My,backendName:"cpu",kernelFunc:rm};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e8e(e){const{inputs:t,backend:n,attrs:s}=e,{equation:o}=s,r=t,{allDims:i,summedDims:a,idDims:l}=xI(o,r.length);SI(i.length,l,r);const{path:u,steps:c}=II(a,l),d=c.length;let f=null,h=i.length;const p=[];for(let g=0;g<d;++g){for(const m of c[g]){const{permutationIndices:v,expandDims:b}=kI(h,l[m]);let $;EI(v)?$=r[m]:($=Ir({inputs:{x:r[m]},backend:n,attrs:{perm:v}}),p.push($));const y=$.shape.slice();for(let w=0;w<b.length;++w)y.splice(b[w],0,1);Pn($.shape,y)||($=ms({inputs:{x:$},backend:n,attrs:{shape:y}}),p.push($)),f===null?f=$:(f=g1({inputs:{a:$,b:f},backend:n}),p.push(f))}g<d-1&&(u[g]>=0&&(f=rm({inputs:{x:f},backend:n,attrs:{axis:u[g]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(const g of p)g!==f&&n.disposeIntermediateTensorInfo(g);return f}const t8e={kernelName:zB,backendName:"cpu",kernelFunc:e8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n8e(e){const{inputs:t,backend:n}=e,{dy:s,y:o}=t;Tt([s,o],"eluGrad");const r=new Float32Array(qe(o.shape)),i=n.data.get(o.dataId).values,a=n.data.get(s.dataId).values;for(let l=0;l<i.length;++l){const u=i[l];u>=1?r[l]=a[l]:r[l]=a[l]*(u+1)}return n.makeTensorInfo(o.shape,"float32",r)}const s8e={kernelName:Wk,backendName:"cpu",kernelFunc:n8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o8e=mI,r8e=vI,i8e=bI,a8e=yI,l8e=wI,u8e=$I,c8e=Un(ag,e=>{const t=Math.sign(e),n=Math.abs(e),s=1/(1+o8e*n);return t*(1-((((u8e*s+l8e)*s+a8e)*s+i8e)*s+r8e)*s*Math.exp(-n*n))}),d8e={kernelName:ag,backendName:"cpu",kernelFunc:c8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K0(e){const{inputs:t,backend:n,attrs:s}=e,{input:o}=t,{dim:r}=s,i=o.shape.length,a=o.shape.slice();let l=r;return r<0&&(J(-(i+1)<=r,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+r+1),a.splice(l,0,1),ms({inputs:{x:o},backend:n,attrs:{shape:a}})}const f8e={kernelName:oy,backendName:"cpu",kernelFunc:K0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h8e=Os((e,t)=>e/t),aE=to(rg,h8e),_x={kernelName:rg,backendName:"cpu",kernelFunc:aE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Y5(e,t,n){const s=e.shape,o=s[0],r=s[1],i=n.data.get(e.dataId),a=i.complexTensorInfos.real,l=i.complexTensorInfos.imag,u=[o,r],c=qe(u),d=co("float32",c),f=co("float32",c);for(let m=0;m<o;m++){const v=sc({inputs:{x:a},backend:n,attrs:{begin:[m,0],size:[1,r]}}),b=sc({inputs:{x:l},backend:n,attrs:{begin:[m,0],size:[1,r]}}),$=Yo({inputs:{real:v,imag:b},backend:n}),{real:y,imag:w}=p8e($,t,n),C=Ra(y,w);for(let x=0;x<r;x++){const S=CI(C,x);d[m*r+x]=S.real,f[m*r+x]=S.imag}n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo($)}const h=n.makeTensorInfo(u,"float32",d),p=n.makeTensorInfo(u,"float32",f),g=Yo({inputs:{real:h,imag:p},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),g}function p8e(e,t,n){const s=qe(e.shape),o=n.data.get(e.dataId),r=n.data.get(o.complexTensorInfos.real.dataId).values,i=n.data.get(o.complexTensorInfos.imag.dataId).values;if(g8e(s)){const a=Nx(r,i,s,t,n),l=[e.shape[0],e.shape[1]];if(t){const u=n.makeTensorInfo(l,"float32",a.real),c=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",Ol(s,"float32")),f=na({inputs:{x:d},backend:n}),h=_x.kernelFunc({inputs:{a:u,b:d},backend:n}),p=_x.kernelFunc({inputs:{a:c,b:f},backend:n}),g=n.data.get(h.dataId).values,m=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),{real:g,imag:m}}return a}else{const a=Ra(r,i),l=m8e(a,s,t);return bV(l)}}function g8e(e){return(e&e-1)===0}function Nx(e,t,n,s,o){if(n===1)return{real:e,imag:t};const r=Ra(e,t),i=n/2,a=yV(r),l=a.real,u=a.imag,c=[l.length],d=o.makeTensorInfo(c,"float32",l),f=o.makeTensorInfo(c,"float32",u),h=Yo({inputs:{real:d,imag:f},backend:o}),p=wV(r),g=p.real,m=p.imag,v=[g.length],b=o.makeTensorInfo(v,"float32",g),$=o.makeTensorInfo(v,"float32",m),y=Yo({inputs:{real:b,imag:$},backend:o}),w=Nx(l,u,i,s,o),C=w.real,x=w.imag,S=[C.length],T=o.makeTensorInfo(S,"float32",C),I=o.makeTensorInfo(S,"float32",x),_=Yo({inputs:{real:T,imag:I},backend:o}),N=Nx(g,m,i,s,o),D=N.real,F=N.imag,P=[D.length],M=o.makeTensorInfo(P,"float32",D),B=o.makeTensorInfo(P,"float32",F),j=Yo({inputs:{real:M,imag:B},backend:o}),X=CV(n,s),ae=[X.real.length],be=o.makeTensorInfo(ae,"float32",X.real),ie=o.makeTensorInfo(ae,"float32",X.imag),ye=Yo({inputs:{real:be,imag:ie},backend:o}),ue=g1({inputs:{a:ye,b:j},backend:o}),Z=om({inputs:{a:_,b:ue},backend:o}),ee=oE({inputs:{a:_,b:ue},backend:o}),te=nc({inputs:{input:Z},backend:o}),fe=nc({inputs:{input:ee},backend:o}),De=Hd({inputs:{input:Z},backend:o}),We=Hd({inputs:{input:ee},backend:o}),He=Ud({inputs:[te,fe],backend:o,attrs:{axis:0}}),Ve=Ud({inputs:[De,We],backend:o,attrs:{axis:0}}),Y=o.data.get(He.dataId).values,ne=o.data.get(Ve.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo($),o.disposeIntermediateTensorInfo(y),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(_),o.disposeIntermediateTensorInfo(M),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(j),o.disposeIntermediateTensorInfo(be),o.disposeIntermediateTensorInfo(ie),o.disposeIntermediateTensorInfo(ye),o.disposeIntermediateTensorInfo(ue),o.disposeIntermediateTensorInfo(Z),o.disposeIntermediateTensorInfo(ee),o.disposeIntermediateTensorInfo(te),o.disposeIntermediateTensorInfo(De),o.disposeIntermediateTensorInfo(fe),o.disposeIntermediateTensorInfo(We),o.disposeIntermediateTensorInfo(He),o.disposeIntermediateTensorInfo(Ve),{real:Y,imag:ne}}function m8e(e,t,n){const s=new Float32Array(t*2);for(let o=0;o<t;o++){let r=0,i=0;for(let a=0;a<t;a++){const l=xV(o*a,t,n),u=CI(e,a);r+=u.real*l.real-u.imag*l.imag,i+=u.real*l.imag+u.imag*l.real}n&&(r/=t,i/=t),$V(s,r,i,o)}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v8e(e){const{inputs:t,backend:n}=e,{input:s}=t,o=qe(s.shape),r=s.shape[s.shape.length-1],i=o/r,a=ms({inputs:{x:s},backend:n,attrs:{shape:[i,r]}}),l=Y5(a,!1,n),u=ms({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const b8e={kernelName:Hk,backendName:"cpu",kernelFunc:v8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lE(e){const{backend:t,attrs:n}=e,{shape:s,value:o,dtype:r}=n,i=r||jp(o),a=Vo(i,qe(s));return w8e(a,o,i),t.makeTensorInfo(s,i,a)}const y8e={kernelName:Uk,backendName:"cpu",kernelFunc:lE};function w8e(e,t,n){e.fill(t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $8e={kernelName:jk,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:s}=e,o=n,r=co(s.dtype,qe(s.shape)),[i,a,l,u]=s.shape,c=o.data.get(s.dataId).values;for(let f=0;f<i;f++){const h=f*l*a*u;for(let p=0;p<a;p++){const g=p*(l*u);for(let m=0;m<l;m++){const v=m*u;for(let b=0;b<u;b++){const $=Math.round(l-m-1),y=h+g+v+b;let w=c[y];if($>=0&&$<l){const C=$*u,x=h+g+C+b;w=c[x]}r[y]=w}}}}return{dataId:o.write(r,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C8e=Os((e,t)=>Math.floor(e/t)),x8e=to(dg,C8e,null,"int32"),k8e={kernelName:dg,backendName:"cpu",kernelFunc:x8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S8e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:i,preluActivationWeights:a}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=s;let g=K5({inputs:{x:o,filter:r},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(i){const m=g;g=om({inputs:{a:g,b:i},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){const m=g;g=rE(n,g,h,a,p),n.disposeIntermediateTensorInfo(m)}return g}const I8e={kernelName:D0,backendName:"cpu",kernelFunc:S8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E8e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:i,preluActivationWeights:a}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=s;let g=q5({inputs:{x:o,filter:r},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f}});if(i){const m=g;g=om({inputs:{a:g,b:i},backend:n}),n.disposeIntermediateTensorInfo(m)}if(h){const m=g;g=rE(n,g,h,a,p),n.disposeIntermediateTensorInfo(m)}return g}const T8e={kernelName:GB,backendName:"cpu",kernelFunc:E8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _8e(e){const{inputs:t,backend:n}=e,{params:s,indices:o}=t,r=qe(s.shape),i=o.shape,a=i[i.length-1],[l,u,c,d]=xS(s,o);if(u===0)return n.makeTensorInfo(l,s.dtype,[]);const f=n.data.get(o.dataId).values,h=n.bufferSync(s),p=u5(f,h,s.dtype,u,a,c,d,s.shape,r);return n.makeTensorInfo(l,s.dtype,p.values)}const N8e={kernelName:VB,backendName:"cpu",kernelFunc:_8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A8e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,indices:r}=t,{axis:i,batchDims:a}=s;Tt([o,r],"gatherV2");const l=fn(i,o.shape)[0],u=n.data.get(r.dataId).values,c=o.shape[l];for(let y=0;y<u.length;++y){const w=u[y];J(w<=c-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${c-1}]`)}let d=a;a==null&&(d=0);const f=qe(r.shape),h=_I(o,r,l,d),p=ms({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),g=ms({inputs:{x:r},backend:n,attrs:{shape:[h.batchSize,f/h.batchSize]}}),m=[h.batchSize,h.outerSize,f/h.batchSize,h.sliceSize],v=n.bufferSync(g),b=n.bufferSync(p),$=c5(b,v,m);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(h.outputShape,$.dtype,$.values)}const D8e={kernelName:iy,backendName:"cpu",kernelFunc:A8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R8e(e){const{inputs:t,backend:n}=e,{input:s}=t,o=qe(s.shape),r=s.shape[s.shape.length-1],i=o/r,a=ms({inputs:{x:s},backend:n,attrs:{shape:[i,r]}}),l=Y5(a,!0,n),u=ms({inputs:{x:l},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}const M8e={kernelName:Gk,backendName:"cpu",kernelFunc:R8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O8e=Un(pg,e=>Number.isFinite(e)?1:0,"bool"),F8e={kernelName:pg,backendName:"cpu",kernelFunc:O8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P8e=Un(gg,e=>Math.abs(e)===1/0?1:0,"bool"),L8e={kernelName:gg,backendName:"cpu",kernelFunc:P8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B8e=Un(mg,e=>Number.isNaN(e)?1:0,"bool"),z8e={kernelName:mg,backendName:"cpu",kernelFunc:B8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V8e(e){const{backend:t,attrs:n}=e,{start:s,stop:o,num:r}=n,i=g5(s,o,r);return t.makeTensorInfo([i.length],"float32",i)}const W8e={kernelName:qk,backendName:"cpu",kernelFunc:V8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H8e=Un(bg,e=>Math.log1p(e)),U8e={kernelName:bg,backendName:"cpu",kernelFunc:H8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j8e=Os((e,t)=>e&&t),G8e=to(dy,j8e,null,"bool"),K8e={kernelName:dy,backendName:"cpu",kernelFunc:G8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q8e=Un(fy,e=>e?0:1,"bool"),Y8e={kernelName:fy,backendName:"cpu",kernelFunc:q8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X8e=Os((e,t)=>e||t),Z8e=to(hy,X8e,null,"bool"),J8e={kernelName:hy,backendName:"cpu",kernelFunc:Z8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q8e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{depthRadius:r,bias:i,alpha:a,beta:l}=s;Tt(o,"LRN");const u=o.shape[3],c=u-1,d=n.data.get(o.dataId).values,f=qe(o.shape),h=new Float32Array(f);function p(g){const m=g%u;let v=g-m+Math.max(0,m-r);const b=g-m+Math.min(m+r,c);let $=0;for(;v<=b;v++){const y=d[v];$+=y*y}return $}for(let g=0;g<f;g++){const m=p(g),v=d[g]*Math.pow(i+a*m,-l);h[g]=v}return n.makeTensorInfo(o.shape,o.dtype,h)}const e5e={kernelName:py,backendName:"cpu",kernelFunc:Q8e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,y:r,dy:i}=t,{depthRadius:a,bias:l,alpha:u,beta:c}=s;Tt(i,"LRNGrad");const d=qe(i.shape),f=i.shape[3],h=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,g=n.data.get(r.dataId).values,m=new Float32Array(d),v=d;for(let b=0;b<v;b++){const $=b%f,y=b-$+Math.max(0,$-a),w=b-$+Math.min(f,$+a+1);let C=0;for(let x=y;x<w;x++)C+=Math.pow(p[x],2);C=u*C+l;for(let x=y;x<w;x++){let S=-2*u*c*p[x]*g[b]/C;b===x&&(S+=Math.pow(C,-c)),S*=h[b],m[x]+=S}}return n.makeTensorInfo(i.shape,o.dtype,m)}const n5e={kernelName:Yk,backendName:"cpu",kernelFunc:t5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X5(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reductionIndices:r,keepDims:i}=s,a=n;let l=o.shape;const u=l.length,c=fn(r,l);let d=c;const f=Ts(d,u);let h=a.data.get(o.dataId).values;if(f!=null){const y=new Array(u);for(let w=0;w<y.length;w++)y[w]=l[f[w]];h=nE(h,l,o.dtype,f,y),d=Ms(d.length,u),l=y}Tt(o,"max"),ho("max",d,u);const[p,g]=eo(l,d),m=qe(g),v=v5(h,m,p,o.dtype),b=a.write(v,p,o.dtype);let $=p;return i&&($=Es(p,c)),{dataId:b,shape:$,dtype:o.dtype}}const s5e={kernelName:gy,backendName:"cpu",kernelFunc:X5};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;Tt(o,"maxPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,u=1;J(Eo(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=si(o.shape,r,i,u,a,l);let d;if(c.filterWidth===1&&c.filterHeight===1&&Pn(c.inShape,c.outShape))d=na({inputs:{x:o},backend:n});else{const f=n.data.get(o.dataId).values,h=Ot(o.shape),p=iE(f,o.shape,o.dtype,h,c,"max");d=n.makeTensorInfo(c.outShape,o.dtype,p.values)}return d}const r5e={kernelName:my,backendName:"cpu",kernelFunc:o5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=s;Tt(o,"maxPool3d");const c=Pa(o.shape,r,i,1,a,l,u),d=n.data.get(o.dataId).values,f=G5(d,o.shape,o.dtype,Ot(o.shape),c,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const a5e={kernelName:vy,backendName:"cpu",kernelFunc:i5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l5e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,{filterSize:i,strides:a,pad:l,dimRoundingMode:u}=s;Tt([o,r],"maxPool3DGrad");const c=Pa(r.shape,i,a,1,l,u),d=n.bufferSync(r),f=ZVe(d,c),h=c.strideDepth,p=c.strideHeight,g=c.strideWidth,m=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,$=c.effectiveFilterDepth,y=c.effectiveFilterHeight,w=c.effectiveFilterWidth,C=$-1-c.padInfo.front,x=w-1-c.padInfo.left,S=y-1-c.padInfo.top,T=vn(r.shape,"float32"),I=n.bufferSync(o);for(let _=0;_<c.batchSize;++_)for(let N=0;N<c.inChannels;++N)for(let D=0;D<c.inDepth;++D)for(let F=0;F<c.inHeight;++F)for(let P=0;P<c.inWidth;++P){const M=D-C,B=F-S,j=P-x;let X=0;for(let ae=0;ae<$;ae+=m){const be=(M+ae)/h;if(!(be<0||be>=c.outDepth||Math.floor(be)!==be))for(let ie=0;ie<y;ie+=v){const ye=(B+ie)/p;if(!(ye<0||ye>=c.outHeight||Math.floor(ye)!==ye))for(let ue=0;ue<w;ue+=b){const Z=(j+ue)/g;if(Z<0||Z>=c.outWidth||Math.floor(Z)!==Z)continue;const ee=$*y*w-1-f.get(_,be,ye,Z,N),te=ae*y*w+ie*w+ue,fe=ee===te?1:0;if(fe===0)continue;X+=I.get(_,be,ye,Z,N)*fe}}}T.set(X,_,D,F,P,N)}return n.makeTensorInfo(T.shape,T.dtype,T.values)}const u5e={kernelName:Zk,backendName:"cpu",kernelFunc:l5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c5e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r,output:i}=t,a=r;Tt([r,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=s,f=si(a.shape,l,u,1,c,d),h=n.data.get(a.dataId).values,p=vn(f.outShape,a.dtype,j5(h,a.shape,a.dtype,f).values),g=f.strideHeight,m=f.strideWidth,v=f.dilationHeight,b=f.dilationWidth,$=f.effectiveFilterHeight,y=f.effectiveFilterWidth,w=y-1-f.padInfo.left,C=$-1-f.padInfo.top,x=vn(a.shape,"float32"),S=n.data.get(o.dataId).values,T=vn(o.shape,"float32",S);for(let I=0;I<f.batchSize;++I)for(let _=0;_<f.inChannels;++_)for(let N=0;N<f.inHeight;++N)for(let D=0;D<f.inWidth;++D){const F=N-C,P=D-w;let M=0;for(let B=0;B<$;B+=v){const j=(F+B)/g;if(!(j<0||j>=f.outHeight||Math.floor(j)!==j))for(let X=0;X<y;X+=b){const ae=(P+X)/m;if(ae<0||ae>=f.outWidth||Math.floor(ae)!==ae)continue;const be=$*y-1-p.get(I,j,ae,_),ie=B*y+X,ye=be===ie?1:0;if(ye===0)continue;M+=T.get(I,j,ae,_)*ye}}x.set(M,I,N,D,_)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}const d5e={kernelName:Xk,backendName:"cpu",kernelFunc:c5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f5e(e,t,n,s,o){const r=Ot(t),i=iE(e,t,n,r,o,"max"),a=j5(e,t,n,o,!0,s);return[i.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h5e={kernelName:WB,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:s}=e,{filterSize:o,strides:r,pad:i,includeBatchInIndex:a}=t,l=n;Tt(s,"MaxPoolWithArgmax");const u=l.data.get(s.dataId).values,c=si(s.shape,o,r,[1,1],i),[d,f]=f5e(u,s.shape,s.dtype,a,c),h=l.write(d,c.outShape,s.dtype),p=l.write(f,c.outShape,s.dtype);return[{dataId:h,shape:c.outShape,dtype:s.dtype},{dataId:p,shape:c.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=fn(r,o.shape),u=eo(o.shape,a)[1],c=qe(u),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([c]));d.push(f);const h=xl({inputs:{x:o},backend:n,attrs:{dtype:"float32"}});d.push(h);const p=aE({inputs:{a:h,b:f},backend:n});d.push(p);const g=rm({inputs:{x:p},backend:n,attrs:{axis:r,keepDims:i}});return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),g}const g5e={kernelName:by,backendName:"cpu",kernelFunc:p5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;Tt(o,"min");const a=fn(r,o.shape);let l=a;const u=Ts(l,o.shape.length);let c=o;u!=null&&(c=Ir({inputs:{x:o},backend:n,attrs:{perm:u}}),l=Ms(l.length,o.shape.length)),ho("min",l,c.shape.length);const[d,f]=eo(c.shape,l),h=qe(f),p=Io(qe(d),c.dtype),g=n.data.get(c.dataId).values;for(let v=0;v<p.length;++v){const b=v*h;let $=g[b];for(let y=0;y<h;++y){const w=g[b+y];(Number.isNaN(w)||w<$)&&($=w)}p[v]=$}u!=null&&n.disposeIntermediateTensorInfo(c);const m=n.makeTensorInfo(d,c.dtype,p);if(i){const v=Es(d,a),b=ms({inputs:{x:m},backend:n,attrs:{shape:v}});return n.disposeIntermediateTensorInfo(m),b}return m}const v5e={kernelName:yy,backendName:"cpu",kernelFunc:m5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{paddings:r,mode:i}=s;Tt(o,"mirrorPad");const a=r.map(($,y)=>$[0]+o.shape[y]+$[1]),l=r.map($=>$[0]),u=r.map(($,y)=>$[0]+o.shape[y]),c=i==="reflect"?0:1,d=n.data.get(o.dataId).values,f=o.shape.length,h=Ot(o.shape),p=qe(a),g=a.length,m=Ot(a),v=co(o.dtype,p);for(let $=0;$<p;$++){let y=Gp($,g,m);for(let C=0;C<g;C++)y[C]<l[C]?y[C]=l[C]*2-y[C]-c:y[C]>=u[C]&&(y[C]=(u[C]-1)*2-y[C]+c);y=y.map((C,x)=>C-l[x]);const w=Ki(y,f,h);v[$]=d[w]}return{dataId:n.write(v,a,o.dtype),shape:a,dtype:o.dtype}}const y5e={kernelName:wy,backendName:"cpu",kernelFunc:b5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w5e=Os((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),$5e=to($g,w5e),C5e={kernelName:$g,backendName:"cpu",kernelFunc:$5e};var Z5={exports:{}};(function(e){(function(t,n,s){function o(l){var u=this,c=a();u.next=function(){var d=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=d-(u.c=d|0)},u.c=1,u.s0=c(" "),u.s1=c(" "),u.s2=c(" "),u.s0-=c(l),u.s0<0&&(u.s0+=1),u.s1-=c(l),u.s1<0&&(u.s1+=1),u.s2-=c(l),u.s2<0&&(u.s2+=1),c=null}function r(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function i(l,u){var c=new o(l),d=u&&u.state,f=c.next;return f.int32=function(){return c.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&r(d,c),f.state=function(){return r(c,{})}),f}function a(){var l=4022871197,u=function(c){c=c.toString();for(var d=0;d<c.length;d++){l+=c.charCodeAt(d);var f=.02519603282416938*l;l=f>>>0,f-=l,f*=l,l=f>>>0,f-=l,l+=f*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.alea=i})(Fn,e,!1)})(Z5);var J5={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor128=i})(Fn,e,!1)})(J5);var Q5={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:u+=a;for(var c=0;c<u.length+64;c++)l.x^=u.charCodeAt(c)|0,c==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function r(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorwow=i})(Fn,e,!1)})(Q5);var eW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.x,d=l.i,f,h;return f=c[d],f^=f>>>7,h=f^f<<24,f=c[d+1&7],h^=f^f>>>10,f=c[d+3&7],h^=f^f>>>3,f=c[d+4&7],h^=f^f<<7,f=c[d+7&7],f=f^f<<13,h^=f^f<<9,c[d]=h,l.i=d+1&7,h};function u(c,d){var f,h=[];if(d===(d|0))h[0]=d;else for(d=""+d,f=0;f<d.length;++f)h[f&7]=h[f&7]<<15^d.charCodeAt(f)+h[f+1&7]<<13;for(;h.length<8;)h.push(0);for(f=0;f<8&&h[f]===0;++f);for(f==8&&(h[7]=-1),c.x=h,c.i=0,f=256;f>0;--f)c.next()}u(l,a)}function r(a,l){return l.x=a.x.slice(),l.i=a.i,l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.x&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xorshift7=i})(Fn,e,!1)})(eW);var tW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this;l.next=function(){var c=l.w,d=l.X,f=l.i,h,p;return l.w=c=c+1640531527|0,p=d[f+34&127],h=d[f=f+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,p=d[f]=p^h,l.i=f,p+(c^c>>>16)|0};function u(c,d){var f,h,p,g,m,v=[],b=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,b=Math.max(b,d.length)),p=0,g=-32;g<b;++g)d&&(h^=d.charCodeAt((g+32)%d.length)),g===0&&(m=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,g>=0&&(m=m+1640531527|0,f=v[g&127]^=h+m,p=f==0?p+1:0);for(p>=128&&(v[(d&&d.length||0)&127]=-1),p=127,g=4*128;g>0;--g)h=v[p+34&127],f=v[p=p+1&127],h^=h<<13,f^=f<<17,h^=h>>>15,f^=f>>>12,v[p]=h^f;c.w=m,c.X=v,c.i=p}u(l,a)}function r(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function i(a,l){a==null&&(a=+new Date);var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(c.X&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.xor4096=i})(Fn,e,!1)})(tW);var nW={exports:{}};(function(e){(function(t,n,s){function o(a){var l=this,u="";l.next=function(){var d=l.b,f=l.c,h=l.d,p=l.a;return d=d<<25^d>>>7^f,f=f-h|0,h=h<<24^h>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^f,l.c=f=f-h|0,l.d=h<<16^f>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):u+=a;for(var c=0;c<u.length+20;c++)l.b^=u.charCodeAt(c)|0,l.next()}function r(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function i(a,l){var u=new o(a),c=l&&l.state,d=function(){return(u.next()>>>0)/4294967296};return d.double=function(){do var f=u.next()>>>11,h=(u.next()>>>0)/4294967296,p=(f+h)/(1<<21);while(p===0);return p},d.int32=u.next,d.quick=d,c&&(typeof c=="object"&&r(c,u),d.state=function(){return r(u,{})}),d}n&&n.exports?n.exports=i:s&&s.amd?s(function(){return i}):this.tychei=i})(Fn,e,!1)})(nW);var sW={exports:{}};(function(e){(function(t,n){var s=this,o=256,r=6,i=52,a="random",l=n.pow(o,r),u=n.pow(2,i),c=u*2,d=o-1,f;function h(y,w,C){var x=[];w=w==!0?{entropy:!0}:w||{};var S=v(m(w.entropy?[y,$(t)]:y==null?b():y,3),x),T=new p(x),I=function(){for(var _=T.g(r),N=l,D=0;_<u;)_=(_+D)*o,N*=o,D=T.g(1);for(;_>=c;)_/=2,N/=2,D>>>=1;return(_+D)/N};return I.int32=function(){return T.g(4)|0},I.quick=function(){return T.g(4)/4294967296},I.double=I,v($(T.S),t),(w.pass||C||function(_,N,D,F){return F&&(F.S&&g(F,T),_.state=function(){return g(T,{})}),D?(n[a]=_,N):_})(I,S,"global"in w?w.global:this==n,w.state)}n["seed"+a]=h;function p(y){var w,C=y.length,x=this,S=0,T=x.i=x.j=0,I=x.S=[];for(C||(y=[C++]);S<o;)I[S]=S++;for(S=0;S<o;S++)I[S]=I[T=d&T+y[S%C]+(w=I[S])],I[T]=w;(x.g=function(_){for(var N,D=0,F=x.i,P=x.j,M=x.S;_--;)N=M[F=d&F+1],D=D*o+M[d&(M[F]=M[P=d&P+N])+(M[P]=N)];return x.i=F,x.j=P,D})(o)}function g(y,w){return w.i=y.i,w.j=y.j,w.S=y.S.slice(),w}function m(y,w){var C=[],x=typeof y,S;if(w&&x=="object")for(S in y)try{C.push(m(y[S],w-1))}catch{}return C.length?C:x=="string"?y:y+"\0"}function v(y,w){for(var C=y+"",x,S=0;S<C.length;)w[d&S]=d&(x^=w[d&S]*19)+C.charCodeAt(S++);return $(w)}function b(){try{var y;return f&&(y=f.randomBytes)?y=y(o):(y=new Uint8Array(o),(s.crypto||s.msCrypto).getRandomValues(y)),$(y)}catch{var w=s.navigator,C=w&&w.plugins;return[+new Date,s,C,s.screen,$(t)]}}function $(y){return String.fromCharCode.apply(0,y)}if(v(n.random(),t),e.exports){e.exports=h;try{f=require("crypto")}catch{}}})([],Math)})(sW);var x5e=Z5.exports,k5e=J5.exports,S5e=Q5.exports,I5e=eW.exports,E5e=tW.exports,T5e=nW.exports,wc=sW.exports;wc.alea=x5e;wc.xor128=k5e;wc.xorwow=S5e;wc.xorshift7=I5e;wc.xor4096=E5e;wc.tychei=T5e;var _5e=wc;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oW(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{dim:r}=s,i=o.shape.length;let a=r;if(a===-1&&(a=i-1),a!==i-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${i} and dim was ${a}`);const l=fn([a],o.shape),u=X5({inputs:{x:o},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Es(u.shape,l),d=ms({inputs:{x:u},backend:n,attrs:{shape:c}}),f=oE({inputs:{a:o,b:d},backend:n}),h=i5({inputs:{x:f},backend:n}),p=rm({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),g=ms({inputs:{x:p},backend:n,attrs:{shape:c}}),m=aE({inputs:{a:h,b:g},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(g),m}const N5e={kernelName:Py,backendName:"cpu",kernelFunc:oW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A5e(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{numSamples:r,seed:i,normalized:a}=s;Tt(o,"multinomial");const l=a?o:oW({inputs:{logits:o},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],d=n.data.get(l.dataId).values,f=[u,r],h=Io(qe(f),"int32");for(let p=0;p<u;++p){const g=p*c,m=new Float32Array(c-1);m[0]=d[g];for(let $=1;$<m.length;++$)m[$]=m[$-1]+d[g+$];const v=_5e.alea(i.toString()),b=p*r;for(let $=0;$<r;++$){const y=v();h[b+$]=m.length;for(let w=0;w<m.length;w++)if(y<m[w]){h[b+$]=w;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(f,"int32",h)}const D5e={kernelName:HB,backendName:"cpu",kernelFunc:A5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R5e=tI;function M5e(e){const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=s;Tt(o,"NonMaxSuppression");const u=n.data.get(o.dataId).values,c=n.data.get(r.dataId).values,{selectedIndices:d}=R5e(u,c,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const O5e={kernelName:Jk,backendName:"cpu",kernelFunc:M5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F5e=nI;function P5e(e){const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=s;Tt(o,"NonMaxSuppressionPadded");const c=n.data.get(o.dataId).values,d=n.data.get(r.dataId).values,{selectedIndices:f,validOutputs:h}=F5e(c,d,i,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const L5e={kernelName:Qk,backendName:"cpu",kernelFunc:P5e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const B5e=sI;function z5e(e){const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=s;Tt(o,"NonMaxSuppressionWithScore");const c=n.data.get(o.dataId).values,d=n.data.get(r.dataId).values,f=i,h=a,p=l,g=u,{selectedIndices:m,selectedScores:v}=B5e(c,d,f,h,p,g);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const V5e={kernelName:eS,backendName:"cpu",kernelFunc:z5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W5e(e){const{inputs:t,backend:n,attrs:s}=e,{indices:o}=t,{depth:r,onValue:i,offValue:a}=s;Tt(o,"oneHot");const l=qe(o.shape),u=new Float32Array(l*r);u.fill(a);const c=n.data.get(o.dataId).values;for(let d=0;d<l;++d)c[d]>=0&&c[d]<r&&(u[d*r+c[d]]=i);return n.makeTensorInfo([...o.shape,r],"int32",u)}const H5e={kernelName:ky,backendName:"cpu",kernelFunc:W5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q0(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(s.dtype==="complex64"){const o=nc({inputs:{input:s},backend:n}),r=q0({inputs:{x:o},backend:n}),i=Hd({inputs:{input:s},backend:n}),a=q0({inputs:{x:i},backend:n}),l=Yo({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return lE({backend:n,attrs:{shape:s.shape,value:0,dtype:s.dtype}})}const U5e={kernelName:Vy,backendName:"cpu",kernelFunc:q0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rW(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(s.dtype==="complex64"){const o=nc({inputs:{input:s},backend:n}),r=rW({inputs:{x:o},backend:n}),i=Hd({inputs:{input:s},backend:n}),a=q0({inputs:{x:i},backend:n}),l=Yo({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return lE({backend:n,attrs:{shape:s.shape,value:1,dtype:s.dtype}})}const j5e={kernelName:xy,backendName:"cpu",kernelFunc:rW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iW(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s;if(t.length===1)return K0({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const r=t[0].shape,i=t[0].dtype;t.forEach(c=>{ni(r,c.shape,"All tensors passed to stack must have matching shapes"),J(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=t.map(c=>{const d=K0({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),u=Ud({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const G5e={kernelName:Sy,backendName:"cpu",kernelFunc:iW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K5e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{paddings:r,constantValue:i}=s;Tt(o,"pad");const a=r.map((b,$)=>b[0]+o.shape[$]+b[1]),l=r.map(b=>b[0]),u=n.data.get(o.dataId).values,c=qe(o.shape),d=o.shape.length,f=Ot(o.shape),h=qe(a),p=a.length,g=Ot(a),m=co(o.dtype,h);i!==0&&m.fill(i);for(let b=0;b<c;b++){const y=Gp(b,d,f).map((C,x)=>C+l[x]),w=Ki(y,p,g);m[w]=u[b]}return{dataId:n.write(m,a,o.dtype),shape:a,dtype:o.dtype}}const aW={kernelName:Iy,backendName:"cpu",kernelFunc:K5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const q5e=Os((e,t)=>Math.pow(e,t)),Y5e=to(xg,q5e),X5e={kernelName:xg,backendName:"cpu",kernelFunc:Y5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z5e(e){const{backend:t,attrs:n}=e,{start:s,stop:o,dtype:r,step:i}=n,a=x5(s,o,i,r);return t.makeTensorInfo([a.length],r,a)}const J5e={kernelName:nS,backendName:"cpu",kernelFunc:Z5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Q5e=Un(kg,e=>1/e),eWe={kernelName:kg,backendName:"cpu",kernelFunc:Q5e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tWe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:i,size:a}=s;Tt(o,"resizeBilinear");const l=Ot(o.shape),[u,c]=a,[d,f,h,p]=o.shape,g=n.data.get(o.dataId).values,m=new Float32Array(qe([d,u,c,p])),v=[r&&u>1?f-1:f,r&&c>1?h-1:h],b=[r&&u>1?u-1:u,r&&c>1?c-1:c];let $=0;const y=v[0]/b[0],w=v[1]/b[1];for(let C=0;C<d;C++)for(let x=0;x<u;x++){let S;i?S=y*(x+.5)-.5:S=y*x;const T=Math.max(0,Math.floor(S)),I=S-T,_=Math.min(f-1,Math.ceil(S)),N=C*l[0]+T*l[1],D=C*l[0]+_*l[1];for(let F=0;F<c;F++){let P;i?P=w*(F+.5)-.5:P=w*F;const M=Math.max(0,Math.floor(P)),B=P-M,j=Math.min(h-1,Math.ceil(P)),X=N+M*l[2],ae=D+M*l[2],be=N+j*l[2],ie=D+j*l[2];for(let ye=0;ye<p;ye++){const ue=g[X+ye],Z=g[ae+ye],ee=g[be+ye],te=g[ie+ye],fe=ue+(ee-ue)*B,De=Z+(te-Z)*B,We=fe+(De-fe)*I;m[$++]=We}}}return n.makeTensorInfo([d,u,c,p],"float32",m)}const nWe={kernelName:Ny,backendName:"cpu",kernelFunc:tWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sWe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:i}=s;Tt([r,o],"resizeBilinearGrad");const a=Ot(o.shape),[l,u,c,d]=o.shape,[,f,h]=r.shape,p=new Float32Array(l*u*c*d),g=[i&&f>1?u-1:u,i&&h>1?c-1:c],m=[i&&f>1?f-1:f,i&&h>1?h-1:h],v=g[0]/m[0],b=g[1]/m[1],$=n.data.get(r.dataId).values;let y=0;for(let w=0;w<l;w++){const C=w*a[0];for(let x=0;x<f;x++){const S=x*v,T=Math.floor(S),I=Math.min(Math.ceil(S),u-1),_=C+T*a[1],N=C+I*a[1],D=S-T,F=1-D;for(let P=0;P<h;P++){const M=P*b,B=Math.floor(M),j=Math.min(Math.ceil(M),c-1),X=M-B,ae=1-X,be=_+B*a[2],ie=_+j*a[2],ye=N+B*a[2],ue=N+j*a[2],Z=F*ae,ee=F*X,te=D*ae,fe=D*X;for(let De=0;De<d;De++){const We=$[y++];p[be+De]+=We*Z,p[ie+De]+=We*ee,p[ye+De]+=We*te,p[ue+De]+=We*fe}}}}return n.makeTensorInfo([l,c,u,d],"float32",p)}const oWe={kernelName:rS,backendName:"cpu",kernelFunc:sWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rWe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:i,size:a}=s;Tt(o,"resizeNearestNeighbor");const l=Ot(o.shape),[u,c]=a,[d,f,h,p]=o.shape,g=n.data.get(o.dataId).values,m=new Float32Array(d*u*c*p),v=[r&&u>1?f-1:f,r&&c>1?h-1:h],b=[r&&u>1?u-1:u,r&&c>1?c-1:c],$=v[0]/b[0],y=v[1]/b[1];let w=0;for(let C=0;C<d;C++){const x=C*l[0];for(let S=0;S<u;S++){const T=i?$*(S+.5):$*S;let I=Math.min(f-1,r?Math.round(T):Math.floor(T));i&&(I=Math.max(0,I));const _=x+I*l[1];for(let N=0;N<c;N++){const D=i?y*(N+.5):y*N;let F=Math.min(h-1,r?Math.round(D):Math.floor(D));i&&(F=Math.max(0,F));const P=_+F*l[2];for(let M=0;M<p;M++){const B=g[P+M];m[w++]=B}}}}return n.makeTensorInfo([d,u,c,p],o.dtype,m)}const iWe={kernelName:_y,backendName:"cpu",kernelFunc:rWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aWe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:i}=s;Tt([r,o],"resizeNearestNeighborGrad");const a=Ot(o.shape),l=Ot(r.shape),[u,c,d,f]=o.shape,[,h,p]=r.shape,g=new Float32Array(u*c*d*f),m=n.data.get(r.dataId).values,v=[i&&h>1?c-1:c,i&&p>1?d-1:d],b=[i&&h>1?h-1:h,i&&p>1?p-1:p],$=v[0]/b[0],y=v[1]/b[1],w=1/$,C=1/y,x=Math.ceil(w)*2+2,S=Math.ceil(C)*2+2;for(let T=0;T<u;T++){const I=T*a[0];for(let _=0;_<c;_++){const N=I+_*a[1],D=Math.floor(_*w),F=Math.floor(D-x/2);for(let P=0;P<d;P++){const M=N+P*a[2],B=Math.floor(P*C),j=Math.floor(B-S/2);for(let X=0;X<f;X++){let ae=0;for(let be=0;be<x;be++){const ie=be+F;if(ie<0||ie>=h)continue;const ye=I+ie*l[1],ue=ie*$,Z=Math.min(c-1,i?Math.round(ue):Math.floor(ue));if(_===Z)for(let ee=0;ee<S;ee++){const te=ee+j;if(te<0||te>=p)continue;const fe=ye+te*l[2],De=te*y,We=Math.min(d-1,i?Math.round(De):Math.floor(De));P===We&&(ae+=m[fe+X])}}g[M+X]=ae}}}}return n.makeTensorInfo(o.shape,o.dtype,g)}const lWe={kernelName:oS,backendName:"cpu",kernelFunc:aWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dims:r}=s;Tt(o,"reverse");const i=o.shape.length,a=fn(r,o.shape);if(i===0)return na({inputs:{x:o},backend:n});const l=new Co(o.shape,o.dtype),u=n.bufferSync(o);for(let c=0;c<l.size;c++){const d=l.indexToLoc(c),f=d.slice();a.forEach(h=>f[h]=o.shape[h]-1-f[h]),l.set(u.get(...f),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const cWe={kernelName:Ay,backendName:"cpu",kernelFunc:uWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dWe={kernelName:bS,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:s}=e,{radians:o,fillValue:r,center:i}=t,a=n,l=co(s.dtype,qe(s.shape)),[u,c,d,f]=s.shape,[h,p]=hI(i,c,d),g=255,m=Math.sin(o),v=Math.cos(o),b=a.data.get(s.dataId).values;for(let y=0;y<u;y++){const w=y*d*c*f;for(let C=0;C<c;C++){const x=C*(d*f);for(let S=0;S<d;S++){const T=S*f;for(let I=0;I<f;I++){const _=[u,C,S,I],N=_[2],D=_[1];let F=(N-h)*v-(D-p)*m,P=(N-h)*m+(D-p)*v;F=Math.round(F+h),P=Math.round(P+p);let M=r;if(typeof r!="number"&&(I===3?M=g:M=r[I]),F>=0&&F<d&&P>=0&&P<c){const j=P*(d*f),X=F*f,ae=w+j+X+I;M=b[ae]}const B=w+x+T+I;l[B]=M}}}}return{dataId:a.write(l,s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fWe=Un(Eg,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),hWe={kernelName:Eg,backendName:"cpu",kernelFunc:fWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lW(e,t,n,s,o,r,i,a,l,u){const c=[s/o,o],d=e.values,f=t.values;if(s===0)return vn(n,t.dtype);const h=vn(c,t.dtype);h.values.fill(l);for(let p=0;p<r;p++){const g=[];let m=0;for(let v=0;v<i;v++){const b=d[p*i+v];g.push(b),m+=b*a[v]}if(m<0||m>=s/o)throw new Error(`Invalid indices: ${g} does not index into ${n}`);for(let v=0;v<o;v++)u?h.values[m*o+v]+=f[p*o+v]:h.values[m*o+v]=t.rank===0?f[0]:f[p*o+v]}return h}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pWe(e){const{inputs:t,backend:n,attrs:s}=e,{indices:o,updates:r}=t,{shape:i}=s,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Wg(r,o,i),f=!0,h=n.bufferSync(o),p=n.bufferSync(r),g=lW(h,p,i,d,u,l,a,c,0,f);return n.makeTensorInfo(i,g.dtype,g.values)}const gWe={kernelName:UB,backendName:"cpu",kernelFunc:pWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mWe(e){const{inputs:t,backend:n}=e,{condition:s,t:o,e:r}=t;Tt([s,o,r],"select");const i=s.shape.length,a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,c=kr(o.dtype,r.dtype),d=Io(qe(o.shape),c);let f=0;const h=i===0||i>1||o.shape.length===1?1:qe(o.shape.slice(1));for(let p=0;p<a.length;p++)for(let g=0;g<h;g++)a[p]===1?d[f++]=l[p]:d[f++]=u[p];return n.makeTensorInfo(o.shape,c,d)}const vWe={kernelName:Dy,backendName:"cpu",kernelFunc:mWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bWe=t1,yWe=n1,wWe=Un(_g,e=>e>=0?yWe*e:bWe*(Math.exp(e)-1)),$We={kernelName:_g,backendName:"cpu",kernelFunc:wWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CWe=Un(Dg,e=>e<0?-1:e>0?1:0),xWe={kernelName:Dg,backendName:"cpu",kernelFunc:CWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kWe=Un(Ng,e=>Math.sin(e)),SWe={kernelName:Ng,backendName:"cpu",kernelFunc:kWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IWe=Un(Ag,e=>Math.sinh(e)),EWe={kernelName:Ag,backendName:"cpu",kernelFunc:IWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TWe=11920928955078125e-23,LR=Math.log(TWe)+2,_We=Un(Mg,e=>{const t=e>-LR,n=e<LR,s=Math.exp(e);let o;return n?o=s:t?o=e:o=Math.log(1+s),o}),NWe={kernelName:Mg,backendName:"cpu",kernelFunc:_We};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,paddings:i}=s;Tt([o],"spaceToBatchND");const a=qe(r),l=[[0,0]];l.push(...i);for(let C=1+r.length;C<o.shape.length;++C)l.push([0,0]);const u=aW.kernelFunc({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),c=Kg(u.shape,r,a,!1),d=qg(c.length,r.length,!1),f=Yg(u.shape,r,a,!1),g=ms({inputs:{x:u},backend:n,attrs:{shape:c}}),b=Ir({inputs:{x:g},backend:n,attrs:{perm:d}}),w=ms({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),w}const DWe={kernelName:Oy,backendName:"cpu",kernelFunc:AWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RWe(e){const{inputs:t,backend:n}=e,{indices:s,values:o,denseShape:r,defaultValue:i}=t;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,u=n.data.get(r.dataId).values,c=n.data.get(i.dataId).values[0],[d,f,h,p,g]=E5(a,s.shape,s.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,s.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),n.makeTensorInfo([g.length],s.dtype,new Int32Array(g))]}const MWe={kernelName:iS,backendName:"cpu",kernelFunc:RWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OWe(e){const{inputs:t,backend:n}=e,{inputIndices:s,inputShape:o,newShape:r}=t;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${o.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const i=Array.from(n.data.get(o.dataId).values),a=n.data.get(s.dataId).values,l=Array.from(n.data.get(r.dataId).values),[u,c,d]=T5(a,s.shape,s.dtype,i,l);return[n.makeTensorInfo(c,s.dtype,u),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const FWe={kernelName:aS,backendName:"cpu",kernelFunc:OWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PWe(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${r.shape}`);if(o.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,[u,c]=sE(i,s.shape,s.dtype,a,l,!0);return n.makeTensorInfo(c,s.dtype,u)}const LWe={kernelName:lS,backendName:"cpu",kernelFunc:PWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BWe(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${r.shape}`);if(o.shape[0]!==r.shape[0])throw new Error("segmentIds and indices should have same size.");const i=n.data.get(s.dataId).values,a=n.data.get(o.dataId).values,l=n.data.get(r.dataId).values,[u,c]=sE(i,s.shape,s.dtype,a,l);return n.makeTensorInfo(c,s.dtype,u)}const zWe={kernelName:uS,backendName:"cpu",kernelFunc:BWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VWe(e){const{inputs:t,backend:n,attrs:s}=e,{sparseIndices:o,sparseValues:r,defaultValue:i}=t,{outputShape:a}=s,{sliceRank:l,numUpdates:u,sliceSize:c,strides:d,outputSize:f}=Wg(r,o,a),h=!1,p=n.bufferSync(o),g=n.bufferSync(r),m=n.data.get(i.dataId).values[0],v=lW(p,g,a,f,c,u,l,d,m,h);return n.makeTensorInfo(a,v.dtype,v.values)}const WWe={kernelName:jB,backendName:"cpu",kernelFunc:VWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{numOrSizeSplits:r,axis:i}=s,a=fn(i,o.shape)[0],l=TI(o,r,a),u=new Array(o.shape.length).fill(0),c=o.shape.slice();return l.map(d=>{const f=[...c];f[a]=d;const h=sc({inputs:{x:o},backend:n,attrs:{begin:u,size:f}});return u[a]+=d,h})}const UWe={kernelName:Fy,backendName:"cpu",kernelFunc:HWe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jWe={kernelName:cS,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,s=t;Tt(n,"square");const o=s.data.get(n.dataId).values,r=new Float32Array(o.length);for(let a=0;a<o.length;++a){const l=o[a];r[a]=l*l}return{dataId:s.write(r,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GWe=Un(Vg,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),KWe={kernelName:Vg,backendName:"cpu",kernelFunc:GWe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qWe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,end:i,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=s;Tt(o,"stridedSlice");const{finalShapeSparse:h,finalShape:p,isIdentity:g,sliceDim0:m,isSimpleSlice:v,begin:b,end:$,strides:y}=TS(o.shape,r,i,a,l,u,c,d,f);let w;if(g)w=ms({inputs:{x:o},backend:n,attrs:{shape:p}});else if(m||v){J(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const C=SS(b,$,y),x=sc({inputs:{x:o},backend:n,attrs:{begin:b,size:C}});w=ms({inputs:{x},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(x)}else{const C=n.bufferSync(o),x=N5(h,C,y,b);w=n.makeTensorInfo(p,x.dtype,x.values)}return w}const YWe={kernelName:dS,backendName:"cpu",kernelFunc:qWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XWe(e){const{inputs:t,backend:n,attrs:s}=e,{separator:o,nGramWidths:r,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:u}=s,{data:c,dataSplits:d}=t,f=n.data.get(c.dataId).values,h=n.data.get(d.dataId).values,[p,g]=A5(f,h,o,r,i,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",g)]}const ZWe={kernelName:fS,backendName:"cpu",kernelFunc:XWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JWe(e){const{inputs:t,backend:n,attrs:s}=e,{skipEmpty:o}=s,{input:r,delimiter:i}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values[0],[u,c,d]=D5(a,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const QWe={kernelName:hS,backendName:"cpu",kernelFunc:JWe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eHe(e){const{inputs:t,backend:n,attrs:s}=e,{numBuckets:o}=s,{input:r}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.data.get(r.dataId).values,a=R5(i,o);return n.makeTensorInfo(r.shape,"int32",a)}const tHe={kernelName:pS,backendName:"cpu",kernelFunc:eHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nHe=Un(Lg,e=>Math.tan(e)),sHe={kernelName:Lg,backendName:"cpu",kernelFunc:nHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oHe=Un(Bg,e=>Math.tanh(e)),rHe={kernelName:Bg,backendName:"cpu",kernelFunc:oHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reps:r}=s;Tt(o,"tile");const i=O5(n.bufferSync(o),r);return n.makeTensorInfo(i.shape,i.dtype,i.values)}const aHe={kernelName:zg,backendName:"cpu",kernelFunc:iHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{k:r,sorted:i}=s;Tt(o,"topk");const a=n.data.get(o.dataId).values,[l,u]=P5(a,o.shape,o.dtype,r,i);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}const uHe={kernelName:gS,backendName:"cpu",kernelFunc:lHe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cHe(e){const{inputs:t,attrs:n,backend:s}=e,{image:o,transforms:r}=t,{interpolation:i,fillMode:a,fillValue:l,outputShape:u}=n,[c,d,f,h]=o.shape,[p,g]=u!=null?u:[d,f],m=[c,p,g,h],v=Ot(o.shape),b=v[0],$=v[1],y=v[2],w=co(o.dtype,qe(m));w.fill(l);const C=s.data.get(o.dataId).values,x=s.data.get(r.dataId).values;for(let T=0;T<c;++T){const I=r.shape[0]===1?x:x.subarray(T*8,T*8+8);for(let _=0;_<p;++_)for(let N=0;N<g;++N)for(let D=0;D<h;++D){let F;const P=I[6]*N+I[7]*_+1;if(P===0)continue;const M=(I[0]*N+I[1]*_+I[2])/P,B=(I[3]*N+I[4]*_+I[5])/P,j=BR(M,f,a),X=BR(B,d,a);switch(i){case"nearest":F=mHe(C,d,f,b,$,y,T,X,j,D,l);break;case"bilinear":F=vHe(C,d,f,b,$,y,T,X,j,D,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${i}`)}const ae=T*b+_*$+N*y+D;w[ae]=F}return s.makeTensorInfo(m,o.dtype,w)}return{dataId:s.write(w,m,o.dtype),shape:o.shape,dtype:o.dtype}}const dHe={kernelName:mS,backendName:"cpu",kernelFunc:cHe};function BR(e,t,n){switch(n){case"reflect":return fHe(e,t);case"wrap":return hHe(e,t);case"nearest":return gHe(e,t);case"constant":default:return pHe(e)}}function fHe(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const s=2*t;n<s&&(n=s*Math.trunc(-n/s)+n),n=n<-t?n+s:-n-1}else if(n>t-1)if(t<=1)n=0;else{const s=2*t;n-=s*Math.trunc(n/s),n>=t&&(n=s-n-1)}return ju(0,n,t-1)}function hHe(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const s=t-1;n+=t*(Math.trunc(-n/s)+1)}else if(n>t-1)if(t<=1)n=0;else{const s=t-1;n-=t*Math.trunc(n/s)}return ju(0,n,t-1)}function pHe(e,t){return e}function gHe(e,t){return ju(0,e,t-1)}function ph(e,t,n,s,o,r,i,a,l,u,c){const d=i*s+a*o+l*r+u;return 0<=a&&a<t&&0<=l&&l<n?e[d]:c}function mHe(e,t,n,s,o,r,i,a,l,u,c){const d=Math.round(a),f=Math.round(l);return ph(e,t,n,s,o,r,i,d,f,u,c)}function vHe(e,t,n,s,o,r,i,a,l,u,c){const d=Math.floor(a),f=Math.floor(l),h=d+1,p=f+1,g=(p-l)*ph(e,t,n,s,o,r,i,d,f,u,c)+(l-f)*ph(e,t,n,s,o,r,i,d,p,u,c),m=(p-l)*ph(e,t,n,s,o,r,i,h,f,u,c)+(l-f)*ph(e,t,n,s,o,r,i,h,p,u,c);return(h-a)*g+(a-d)*m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bHe(e){const{inputs:t,attrs:n,backend:s}=e,{axis:o}=n,{x:r}=t;Tt(r,"unique");const i=s.data.get(r.dataId).values,{outputValues:a,outputShape:l,indices:u}=L5(i,o,r.shape,r.dtype);return[s.makeTensorInfo(l,r.dtype,a),s.makeTensorInfo([u.length],"int32",u)]}const yHe={kernelName:vS,backendName:"cpu",kernelFunc:bHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wHe(e){const{inputs:t,backend:n,attrs:s}=e,{value:o}=t;let{axis:r}=s;r<0&&(r+=o.shape.length);const i=o.shape.length,a=o.shape[r],l=new Array(i-1);let u=0;for(let h=0;h<i;h++)h!==r&&(l[u++]=o.shape[h]);const c=new Array(i).fill(0),d=o.shape.slice();d[r]=1;const f=new Array(a);for(let h=0;h<f.length;h++){c[r]=h;const p=sc({inputs:{x:o},backend:n,attrs:{begin:c,size:d}});f[h]=ms({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return f}const $He={kernelName:By,backendName:"cpu",kernelFunc:wHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CHe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,segmentIds:r}=t,{numSegments:i}=s;Tt(o,"unsortedSegmentSum");const a=o.shape.length,l=r.shape.length,u=[],c=[],d=a-l;let f=r;for(let p=0;p<d;++p){const g=K0({inputs:{input:f},backend:n,attrs:{dim:p+1}});f=g,c.push(g)}for(let p=0;p<i;++p){const g=Ol(p,"int32"),m=n.makeTensorInfo([],"int32",g),v=o5({inputs:{a:m,b:f},backend:n}),b=xl({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),$=g1({inputs:{a:b,b:o},backend:n}),y=rm({inputs:{x:$},backend:n,attrs:{axis:0,keepDims:!1}});u.push(y),c.push(m),c.push(v),c.push(b),c.push($),c.push(y)}const h=iW({inputs:u,backend:n,attrs:{axis:0}});return c.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const xHe={kernelName:zy,backendName:"cpu",kernelFunc:CHe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kHe=[SVe,vze,EVe,_Ve,xze,AVe,RVe,OVe,PVe,BVe,VVe,HVe,jVe,qVe,XVe,QVe,t6e,s6e,r6e,xVe,a6e,u6e,d6e,h6e,$ze,Sze,g6e,bze,v6e,y6e,w6e,C6e,k6e,I6e,T6e,N6e,D6e,M6e,F6e,L6e,z6e,W6e,H6e,j6e,K6e,Y6e,X6e,Z6e,J6e,t8e,mVe,s8e,Ize,d8e,Eze,f8e,_ze,b8e,y8e,$8e,Aze,k8e,I8e,T8e,N8e,D8e,Rze,Oze,yze,M8e,b6e,F8e,L8e,z8e,vVe,Pze,Bze,W8e,Vze,U8e,K8e,Y8e,J8e,e5e,n5e,s5e,Hze,r5e,a5e,u5e,d5e,h5e,g5e,v5e,jze,y5e,C5e,D5e,Kze,Yze,O5e,L5e,V5e,Zze,H5e,j5e,G5e,aW,X5e,yVe,eVe,J5e,wze,_x,eWe,wVe,$Ve,CVe,nWe,oWe,iWe,lWe,cWe,dWe,hWe,nVe,gWe,vWe,$We,oVe,xWe,SWe,EWe,rVe,N5e,NWe,DWe,MWe,FWe,LWe,zWe,WWe,UWe,lVe,jWe,cVe,KWe,YWe,ZWe,QWe,tHe,pVe,Q6e,sHe,rHe,aHe,uHe,dHe,Jze,yHe,$He,xHe,U5e];for(const e of kHe)KB(e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wu={},c$={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function SHe(e,t){wu[e]=t}function _i(e,t){if(!(e in wu)){const s=EHe(e,t);if(s!==null)wu[e]=s;else return console.log("Could not get context for WebGL version",e),null}const n=wu[e];return n==null||n.isContextLost()?(delete wu[e],_i(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),wu[e])}function IHe(e){if(typeof OffscreenCanvas!="undefined"&&e===2)return new OffscreenCanvas(300,150);if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function EHe(e,t){if(e!==1&&e!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=t==null?IHe(e):t;return n.addEventListener("webglcontextlost",s=>{s.preventDefault(),delete wu[e]},!1),e===1?n.getContext("webgl",c$)||n.getContext("experimental-webgl",c$):n.getContext("webgl2",c$)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var vp;(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(vp||(vp={}));var wr;(function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"})(wr||(wr={}));var ro;(function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(ro||(ro={}));function im(e,t){return[t,e]}function THe(e,t){return e*t}function sv(e){const t=qe(e),n=Math.ceil(t/4);return GC(n)}function Cf(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function _He(e,t){const[n,s]=Cf(e,t);return n*s*4}function uE(e,t){const n=e;let s,o,r,i,a,l,u,c,d,f;return Ye().getNumber("WEBGL_VERSION")===2?(s=n.R32F,o=n.R16F,r=n.RGBA16F,i=n.RGBA32F,a=n.RED,u=4,c=1,d=n.HALF_FLOAT,f=n.FLOAT,l=n.RGBA8):(s=e.RGBA,o=e.RGBA,r=e.RGBA,i=n.RGBA,a=e.RGBA,u=4,c=4,d=t!=null?t.HALF_FLOAT_OES:null,f=e.FLOAT,l=e.RGBA),{internalFormatFloat:s,internalFormatHalfFloat:o,internalFormatPackedHalfFloat:r,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:f}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Et(e,t){const n=t();return Ye().getBool("DEBUG")&&NHe(e),n}function NHe(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+MHe(e,t))}const AHe=596e-10,DHe=65504;function RHe(e){return!!(Ye().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||AHe<Math.abs(e)&&Math.abs(e)<DHe)}function MHe(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}function ov(e,t){return za(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function OHe(e,t){const n=za(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Et(e,()=>e.shaderSource(n,t)),Et(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function FHe(e,t){const n=za(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Et(e,()=>e.shaderSource(n,t)),Et(e,()=>e.compileShader(n)),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw LHe(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const PHe=/ERROR: [0-9]+:([0-9]+):/g;function LHe(e,t){const n=PHe.exec(t);if(n==null){console.log(`Couldn't parse line number in error: ${t}`),console.log(e);return}const s=+n[1],o=e.split(`
`),r=o.length.toString().length+2,i=o.map((d,f)=>pd((f+1).toString(),r)+d);let a=0;for(let d=0;d<i.length;d++)a=Math.max(i[d].length,a);const l=i.slice(0,s-1),u=i.slice(s-1,s),c=i.slice(s);console.log(l.join(`
`)),console.log(t.split(`
`)[0]),console.log(`%c ${pd(u[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join(`
`))}function BHe(e){return za(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function zHe(e,t){if(Et(e,()=>e.linkProgram(t)),e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function d$(e,t){if(Et(e,()=>e.validateProgram(t)),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function VHe(e,t){const n=za(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Et(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),Et(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function WHe(e,t){const n=za(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return Et(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),Et(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function HHe(e){return za(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function UHe(e,t){const n=Ye().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){const s=`[${e}x${t}]`;throw new Error("Requested texture size "+s+" is invalid.")}if(e>n||t>n){const s=`[${e}x${t}]`,o=`[${n}x${n}]`;throw new Error("Requested texture size "+s+" greater than WebGL maximum on this browser / GPU "+o+".")}}function jHe(e){return za(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function zR(e,t,n,s,o,r,i){const a=e.getAttribLocation(t,n);return a===-1?!1:(Et(e,()=>e.bindBuffer(e.ARRAY_BUFFER,s)),Et(e,()=>e.vertexAttribPointer(a,o,e.FLOAT,!1,r,i)),Et(e,()=>e.enableVertexAttribArray(a)),!0)}function GHe(e,t,n){ZHe(e,n),Et(e,()=>e.activeTexture(e.TEXTURE0+n)),Et(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function KHe(e,t,n){return za(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function qHe(e,t,n){return e.getUniformLocation(t,n)}function YHe(e,t,n,s){Et(e,()=>GHe(e,t,s)),Et(e,()=>e.uniform1i(n,s))}function f$(e,t,n){Et(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),Et(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function VR(e,t){Et(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),Et(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function rv(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+XHe(e,t))}function XHe(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}function za(e,t,n){const s=Et(e,()=>t());if(s==null)throw new Error(n);return s}function ZHe(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,s=t+e.TEXTURE0;if(s<e.TEXTURE0||s>n){const o=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${o}.`)}}function jd(e,t=2){return qe(e.slice(0,e.length-t))}function Gd(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function h$(e){let t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[jd(e),...Gd(e)]),t}function JHe(e,t=!1){let n=Ye().getNumber("WEBGL_MAX_TEXTURE_SIZE");t&&(n=n*2,e=e.map((o,r)=>r>=e.length-2?IB(e[r]):e[r]),e.length===1&&(e=[2,e[0]])),e.length!==2&&(e=Ml(e).newShape);let s=qe(e);if(e.length<=1&&s<=n)return[1,s];if(e.length===2&&e[0]<=n&&e[1]<=n)return e;if(e.length===3&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const o=jd(e);let r=2,i=2;return e.length&&([r,i]=Gd(e)),s=o*(r/2)*(i/2),GC(s).map(a=>a*2)}return GC(s)}function iv(e){return e%2===0}function Y0(e,t){if(e=e.slice(-2),t=t.slice(-2),Pn(e,t)||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){const n=e.slice(-1)[0],s=t.slice(-1)[0];if(n===s||iv(n)&&iv(s)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&iv(e[0])&&iv(t[0])}let p$,g$;function QHe(e){if(p$==null){const t=_i(e);p$=t.getParameter(t.MAX_TEXTURE_SIZE)}return p$}function eUe(e){if(g$==null){const t=_i(e);g$=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,g$)}function tUe(e){if(e===0)return 0;let t;const n=_i(e);return jr(n,"EXT_disjoint_timer_query_webgl2")&&e===2?t=2:jr(n,"EXT_disjoint_timer_query")?t=1:t=0,t}function jr(e,t){return e.getExtension(t)!=null}function WR(e){try{if(_i(e)!=null)return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function nUe(e){if(e===0)return!1;const t=_i(e);if(e===1){if(!jr(t,"OES_texture_float"))return!1}else if(!jr(t,"EXT_color_buffer_float"))return!1;return Ax(t)}function sUe(e){if(e===0)return!1;const t=_i(e);if(e===1){if(!jr(t,"OES_texture_float")||!jr(t,"WEBGL_color_buffer_float"))return!1}else{if(jr(t,"EXT_color_buffer_float"))return Ax(t);const s="EXT_color_buffer_half_float";if(jr(t,s)){const o=t.getExtension(s);return oUe(t,o)}return!1}return Ax(t)}function Ax(e){const t=uE(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const s=1,o=1;e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,s,o,0,t.textureFormatFloat,t.textureTypeFloat,null);const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function oUe(e,t){const n=uE(e,t),s=e.createTexture();e.bindTexture(e.TEXTURE_2D,s);const o=1,r=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,o,r,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0);const a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(s),e.deleteFramebuffer(i),a}function rUe(e){return e!==2?!1:_i(e).fenceSync!=null}function am(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&J(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lt=Ye();Lt.registerFlag("HAS_WEBGL",()=>Lt.getNumber("WEBGL_VERSION")>0);Lt.registerFlag("WEBGL_VERSION",()=>WR(2)?2:WR(1)?1:0);Lt.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Lt.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Lt.get("WEBGL_VERSION")===2);Lt.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Lt.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Lt.registerFlag("WEBGL_PACK",()=>Lt.getBool("HAS_WEBGL"));Lt.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Lt.getBool("WEBGL_PACK"));Lt.registerFlag("WEBGL_PACK_CLIP",()=>Lt.getBool("WEBGL_PACK"));Lt.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Lt.getBool("WEBGL_PACK"));Lt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Lt.getBool("WEBGL_PACK"));Lt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Lt.getBool("WEBGL_PACK"));Lt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Lt.getBool("WEBGL_PACK"));Lt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Lt.getBool("WEBGL_PACK"));Lt.registerFlag("WEBGL_PACK_REDUCE",()=>Lt.getBool("WEBGL_PACK"));Lt.registerFlag("WEBGL_LAZILY_UNPACK",()=>Lt.getBool("WEBGL_PACK"));Lt.registerFlag("WEBGL_CONV_IM2COL",()=>Lt.getBool("WEBGL_PACK"));Lt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>QHe(Lt.getNumber("WEBGL_VERSION")));Lt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>eUe(Lt.getNumber("WEBGL_VERSION")));Lt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const e=Lt.getNumber("WEBGL_VERSION");return e===0?0:tUe(e)});Lt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Lt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!rz());Lt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>nUe(Lt.getNumber("WEBGL_VERSION")));Lt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Lt.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Lt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Lt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>sUe(Lt.getNumber("WEBGL_VERSION")));Lt.registerFlag("WEBGL_FENCE_API_ENABLED",()=>rUe(Lt.getNumber("WEBGL_VERSION")));Lt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Lt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Lt.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)});Lt.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>rz()?1:-1,e=>{if(e<0&&e!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)});Lt.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Lt.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Lt.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Lt.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oo(){let e,t,n,s,o,r,i,a,l,u;return Ye().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",s="in",o="texture",r="outputColor",i="out vec4 outputColor;",a=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,l="",u=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",s="varying",o="texture2D",r="gl_FragColor",i="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,u=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:s,texture2D:o,output:r,defineOutput:i,defineSpecialNaN:a,defineSpecialInf:l,defineRound:u}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $c(e,t,n="index"){const s=Ot(t);return s.map((o,r)=>{const i=`int ${e[r]} = ${n} / ${o}`,a=r===s.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${o}`:`index -= ${e[r]} * ${o}`;return`${i}; ${a};`}).join("")}function m1(e,t,n="index"){const s=Ot(t);return s.map((o,r)=>{const i=`int ${e[r]} = ${n} / outShapeStrides[${r}]`,a=r===s.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * outShapeStrides[${r}]`:`index -= ${e[r]} * outShapeStrides[${r}]`;return`${i}; ${a};`}).join("")}function iUe(e,t){const n=e.length,s=e.map(r=>`${t}[${r}]`),o=new Array(n-1);o[n-2]=s[n-1];for(let r=n-3;r>=0;--r)o[r]=`(${o[r+1]} * ${s[r+1]})`;return o}function aUe(e,t,n="index"){const s=e.map((r,i)=>i),o=iUe(s,t);return o.map((r,i)=>{const a=`int ${e[i]} = ${n} / ${o[i]}`,l=i===o.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${o[i]}`:`index -= ${e[i]} * ${o[i]}`;return`${a}; ${l};`}).join("")}function cE(e){const t=Ot(e).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;
  }
`}function dE(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const uW=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:cW}=wPe;function lUe(e,t,n){const s=[];if(e.forEach(h=>{const p=qe(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?s.push(`uniform float ${h.name}${p>1?`[${p}]`:""};`):(s.push(`uniform sampler2D ${h.name};`),s.push(`uniform int offset${h.name};`)),n.enableShapeUniforms){const{uniformShape:g}=fE(n.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(g.length){case 1:s.push(`uniform int ${h.name}Shape;`);break;case 2:s.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:s.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:s.push(`uniform ivec4 ${h.name}Shape;`);break}s.push(`uniform ivec2 ${h.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:s.push("uniform int outShape;");break;case 2:s.push("uniform ivec2 outShape;"),s.push("uniform int outShapeStrides;");break;case 3:s.push("uniform ivec3 outShape;"),s.push("uniform ivec2 outShapeStrides;");break;case 4:s.push("uniform ivec4 outShape;"),s.push("uniform ivec3 outShapeStrides;");break}s.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(h=>{s.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});const o=s.join(`
`),r=e.map(h=>uUe(h,t,n.packedInputs,n.enableShapeUniforms)).join(`
`),i=t.texShape,a=Oo(),l=fUe(a);let u,c,d=gUe(a);return t.isPacked?(u=cUe(t.logicalShape,i,n.enableShapeUniforms),c=pUe(a)):(u=dUe(t.logicalShape,i,n.enableShapeUniforms),c=hUe(a)),n.packedInputs&&(d+=yUe),[d,l,c,o,u,r,n.userCode].join(`
`)}function xf(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return AUe(e,t);case 1:return RUe(e,t);case 2:return OUe(e,t);case 3:return PUe(e,t);case 4:return BUe(e,t);case 5:return zUe(e);case 6:return VUe(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function dW(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return NUe(e);case 1:return DUe(e,t);case 2:return MUe(e,t);case 3:return FUe(e,t);default:return LUe(e,t)}}function uUe(e,t,n=!1,s){let o="";n?o+=dW(e,s):o+=xf(e,s);const r=e.shapeInfo.logicalShape,i=t.logicalShape;return r.length<=i.length&&(n?o+=WUe(e,t):o+=HUe(e,t)),o}function cUe(e,t,n){switch(e.length){case 0:return fW();case 1:return wUe(e,t,n);case 2:return TUe(e,t,n);case 3:return CUe(e,t,n);default:return kUe(e,t,n)}}function dUe(e,t,n){switch(e.length){case 0:return fW();case 1:return $Ue(e,t,n);case 2:return _Ue(e,t,n);case 3:return xUe(e,t,n);case 4:return SUe(e,t,n);case 5:return IUe(e,t);case 6:return EUe(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}function fUe(e){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${e.texture2D}(textureSampler, uv).r;
    }
  `}function hUe(e){return`
    void setOutput(float val) {
      ${e.output} = vec4(val, 0, 0, 0);
    }
  `}function pUe(e){return`
    void setOutput(vec4 val) {
      ${e.output} = val;
    }
  `}function gUe(e){return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFs} vec2 resultUV;
    ${e.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${e.defineSpecialNaN}
    ${e.defineSpecialInf}
    ${e.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${mUe}
    ${vUe}
    ${bUe}
  `}const mUe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,vUe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,bUe=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,yUe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function fW(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function wUe(e,t,n){const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return s[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${s[1]}.0);
      }
    `:s[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${s[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      return 2 * (resTexRC.x * ${s[1]} + resTexRC.y);
    }
  `}function $Ue(e,t,n){return t[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${t[1]}.0);
      }
    `:t[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${t[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      return resTexRC.x * ${t[1]} + resTexRC.y;
    }
  `}function CUe(e,t,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[2]/2),r=o*Math.ceil(e[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec3(b, r, c);
    }
  `}function xUe(e,t,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${m1(["r","c","d"],e)}
    return ivec3(r, c, d);
  }
`;const s=$c(["r","c","d"],e);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${s}
      return ivec3(r, c, d);
    }
  `}function kUe(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],o=Math.ceil(e[e.length-1]/2),r=o*Math.ceil(e[e.length-2]/2);let i=r,a="",l="b, r, c";for(let u=2;u<e.length-1;u++)i*=e[e.length-u-1],a=`
      int b${u} = index / ${i};
      index -= b${u} * ${i};
    `+a,l=`b${u}, `+l;return`
    ivec${e.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));
      int index = resTexRC.x * ${s[1]} + resTexRC.y;

      ${a}

      int b = index / ${r};
      index -= b * ${r};

      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec${e.length}(${l});
    }
  `}function SUe(e,t,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${m1(["r","c","d","d2"],e)}
      return ivec4(r, c, d, d2);
    }
  `;const s=$c(["r","c","d","d2"],e);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      ${s}
      return ivec4(r, c, d, d2);
    }
  `}function IUe(e,t){const n=$c(["r","c","d","d2","d3"],e);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},
                             ${t[1]}));

      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function EUe(e,t){const n=$c(["r","c","d","d2","d3","d4"],e);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function TUe(e,t,n){const s=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Pn(e,t))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${s[0]}, ${s[1]}));
      }
    `;const o=Math.ceil(e[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${s[0]}, ${s[1]}));

      int index = resTexRC.x * ${s[1]} + resTexRC.y;
      int r = 2 * (index / ${o});
      int c = imod(index, ${o}) * 2;

      return ivec2(r, c);
    }
  `}function _Ue(e,t,n){return Pn(e,t)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));
      }
    `:e[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:e[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${t[0]}, ${t[1]}));
        int index = resTexRC.x * ${t[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${t[0]}, ${t[1]}));
      int index = resTexRC.x * ${t[1]} + resTexRC.y;
      int r = index / ${e[1]};
      int c = index - r * ${e[1]};
      return ivec2(r, c);
    }
  `}function Cc(e){return`offset${e}`}function NUe(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),s=Oo();return`
    vec4 ${n}() {
      return ${s.texture2D}(${t}, halfCR);
    }
  `}function AUe(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${s}() {return ${n};}`;const[o,r]=e.shapeInfo.texShape;if(o===1&&r===1)return`
      float ${s}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const i=Cc(n);if(t)return`
    float ${s}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${i});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=e.shapeInfo.texShape;return`
    float ${s}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${i});
      return sampleTexture(${n}, uv);
    }
  `}function DUe(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,r=Oo();if(t)return`
    vec4 ${s}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${r.texture2D}(${n}, uv);
    }
  `;const i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return`
    vec4 ${s}(int index) {
      vec2 uv = packedUVfrom1D(
        ${i[0]}, ${i[1]}, index);
      return ${r.texture2D}(${n}, uv);
    }
  `}function RUe(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`
      float ${s}(int index) {
        ${kf(e)}
      }
    `;const o=e.shapeInfo.texShape,r=o[0],i=o[1];if(i===1&&r===1)return`
      float ${s}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Cc(n);return i===1?t?`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${r}.0);
        return sampleTexture(${n}, uv);
      }
    `:r===1?t?`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${s}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${i}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:t?`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${s}(int index) {
      vec2 uv = uvFromFlat(${r}, ${i}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function MUe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e.shapeInfo.texShape,i=r[0],a=r[1],l=Oo();if(r!=null&&Pn(n,r))return t?`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);

        return ${l.texture2D}(${s}, uv);
      }
    `:`
      vec4 ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${i}.0);

        return ${l.texture2D}(${s}, uv);
      }
    `;if(t)return`
    vec4 ${o}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `;const u=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],c=Math.ceil(n[1]/2);return`
    vec4 ${o}(int row, int col) {
      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);
      return ${l.texture2D}(${s}, uv);
    }
  `}function OUe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e.shapeInfo.texShape;if(r!=null&&Pn(n,r)){if(t)return`
      float ${o}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `;const f=r[0],h=r[1];return`
    float ${o}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${f}.0);
      return sampleTexture(${s}, uv);
    }
  `}const{newShape:i,keptDims:a}=Ml(n),l=i;if(l.length<n.length){const f=Sf(e,l),h=["row","col"];return`
      ${xf(f,t)}
      float ${o}(int row, int col) {
        return ${o}(${If(h,a)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${kf(e)}
      }
    `;const u=r[0],c=r[1],d=Cc(s);return c===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${s}TexShape[0]));
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);
      return sampleTexture(${s}, uv);
    }
  `:u===1?t?`
      float ${o}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${s}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${s}TexShape[1]), 0.5);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);
      return sampleTexture(${s}, uv);
    }
  `:t?`
      float ${o}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${s}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
        return sampleTexture(${s}, uv);
      }
    `:`
  float ${o}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${u}, ${c}, index);
    return sampleTexture(${s}, uv);
  }
`}function FUe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=e.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];if(n[0]===1){const f=n.slice(1),h=[1,2],p=Sf(e,f),g=["b","row","col"];return`
        ${dW(p,t)}
        vec4 ${o}(int b, int row, int col) {
          return ${o}(${If(g,h)});
        }
      `}const a=Oo();if(t)return`
    vec4 ${o}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${s}TexShape[0]) / 2.0), ceil(float(${s}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${s}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${s}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `;const l=i[0],u=i[1],c=Math.ceil(n[2]/2),d=c*Math.ceil(n[1]/2);return`
    vec4 ${o}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${u}, ${d}, ${c}, b, row, col);
      return ${a.texture2D}(${s}, uv);
    }
  `}function PUe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n[1]*n[2],i=n[2],{newShape:a,keptDims:l}=Ml(n),u=a;if(u.length<n.length){const g=Sf(e,u),m=["row","col","depth"];return`
        ${xf(g,t)}
        float ${o}(int row, int col, int depth) {
          return ${o}(${If(m,l)});
        }
      `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${r}, ${i}, 1)));
        ${kf(e)}
      }
    `;const c=e.shapeInfo.texShape,d=c[0],f=c[1],h=e.shapeInfo.flatOffset;if(f===r&&h==null)return t?`
      float ${o}(int row, int col, int depth) {
        int stride1 = ${s}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
        float ${o}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${i}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${f}.0, ${d}.0);
          return sampleTexture(${s}, uv);
        }
      `;if(f===i&&h==null)return t?`
      float ${o}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${s}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
    float ${o}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${f}.0, ${d}.0);
      return sampleTexture(${s}, uv);
    }
  `;const p=Cc(s);return t?`
    float ${o}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${s}Shape[1] * ${s}Shape[2];
      int stride1 = ${s}Shape[2];
      int index = row * ${r} + col * ${i} + depth + ${p};
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index);
      return sampleTexture(${s}, uv);
    }
    `:`
      float ${o}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r} + col * ${i} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${f}, index);
        return sampleTexture(${s}, uv);
      }
  `}function LUe(e,t){const n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=Oo();if(t)return`
    vec4 ${s}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${o.texture2D}(${n}, uv);
    }
  `;const r=e.shapeInfo.logicalShape,i=r.length,a=e.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],u=l[0],c=l[1],d=Math.ceil(r[i-1]/2);let f=d*Math.ceil(r[i-2]/2),h="int b, int row, int col",p=`b * ${f} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<i-1;g++)h=`int b${g}, `+h,f*=r[i-g-1],p=`b${g} * ${f} + `+p;return`
    vec4 ${s}(${h}) {
      int index = ${p};
      int texR = index / ${c};
      int texC = index - texR * ${c};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});
      return ${o.texture2D}(${n}, uv);
    }
  `}function BUe(e,t){const n=e.shapeInfo.logicalShape,s=e.name,o="get"+s.charAt(0).toUpperCase()+s.slice(1),r=n[3],i=n[2]*r,a=n[1]*i,{newShape:l,keptDims:u}=Ml(n);if(l.length<n.length){const b=Sf(e,l),$=["row","col","depth","depth2"];return`
      ${xf(b,t)}
      float ${o}(int row, int col, int depth, int depth2) {
        return ${o}(${If($,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${o}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${i}, ${r}, 1)));
        ${kf(e)}
      }
    `;const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],h=d[1],p=`int stride2 = ${s}Shape[3];`,g=`int stride1 = ${s}Shape[2] * stride2;`,m=`int stride0 = ${s}Shape[1] * stride1;`;if(h===a&&c==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        ${p}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${i}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${s}, uv);
      }
    `;if(h===r&&c==null)return t?`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${s}Shape[1] * ${s}Shape[2], ${s}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${s}TexShape[1], ${s}TexShape[0]);
        return sampleTexture(${s}, uv);
      }
    `:`
      float ${o}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${s}, uv);
      }
    `;const v=Cc(s);return t?`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${g}
      ${m}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${s}TexShape[0], ${s}TexShape[1], index + ${v});
      return sampleTexture(${s}, uv);
    }
  `:`
    float ${o}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} +
          depth * ${r} + depth2;
      vec2 uv = uvFromFlat(${f}, ${h}, index + ${v});
      return sampleTexture(${s}, uv);
    }
  `}function zUe(e){const t=e.shapeInfo.logicalShape,n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],r=t[3]*o,i=t[2]*r,a=t[1]*i,{newShape:l,keptDims:u}=Ml(t);if(l.length<t.length){const g=Sf(e,l),m=["row","col","depth","depth2","depth3"];return`
      ${xf(g)}
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        return ${s}(${If(m,u)});
      }
    `}if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${i}, ${r}, ${o})) +
          depth3;
        ${kf(e)}
      }
    `;const c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,f=d[0],h=d[1];if(h===a&&c==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${i}, ${r}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(h===o&&c==null)return`
      float ${s}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]},
               ${t[2]*t[3]}, ${t[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Cc(n);return`
    float ${s}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${i} + depth * ${r} +
          depth2 * ${o} + depth3 + ${p};
      vec2 uv = uvFromFlat(${f}, ${h}, index);
      return sampleTexture(${n}, uv);
    }
  `}function VUe(e){const t=e.shapeInfo.logicalShape,n=e.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:o,keptDims:r}=Ml(t);if(o.length<t.length){const m=Sf(e,o),v=["row","col","depth","depth2","depth3","depth4"];return`
      ${xf(m)}
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${s}(${If(v,r)});
      }
    `}const i=t[5],a=t[4]*i,l=t[3]*a,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${c}, ${u}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${i}, 1)));
        ${kf(e)}
      }
    `;const d=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],p=f[1];if(p===c&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${u}, ${l}, ${a}, ${i})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===i&&d==null)return`
      float ${s}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${t[1]*t[2]*t[3]*t[4]},
               ${t[2]*t[3]*t[4]},
               ${t[3]*t[4]},
               ${t[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const g=Cc(n);return`
    float ${s}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${c} + col * ${u} + depth * ${l} +
          depth2 * ${a} + depth3 * ${i} + depth4 + ${g};
      vec2 uv = uvFromFlat(${h}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function kf(e){const t=e.name,n=qe(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${t}[i];
      }
    }
  `}function WUe(e,t){const n=e.name,s=n.charAt(0).toUpperCase()+n.slice(1),o="get"+s+"AtOutCoords",r=e.shapeInfo.logicalShape.length,i=t.logicalShape.length,a=cW(e.shapeInfo.logicalShape,t.logicalShape),l=Xn(i),u=i-r;let c;const d=["x","y","z","w","u","v"];r===0?c="":i<2&&a.length>=1?c="coords = 0;":c=a.map(b=>`coords.${d[b+u]} = 0;`).join(`
`);let f="";i<2&&r>0?f="coords":f=e.shapeInfo.logicalShape.map((b,$)=>`coords.${d[$+u]}`).join(", ");let h="return outputValue;";const g=qe(e.shapeInfo.logicalShape)===1,v=qe(t.logicalShape)===1;if(r===1&&!g&&!v)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!v)i===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){const b=r-2,$=r-1;a.indexOf(b)>-1&&a.indexOf($)>-1?h="return vec4(outputValue.x);":a.indexOf(b)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf($)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${o}() {
      ${l} coords = getOutputCoords();
      ${c}
      vec4 outputValue = get${s}(${f});
      ${h}
    }
  `}function HUe(e,t){const n=e.name,s=n.charAt(0).toUpperCase()+n.slice(1),o="get"+s+"AtOutCoords",r=t.texShape,i=e.shapeInfo.texShape,a=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&a===l&&e.shapeInfo.flatOffset==null&&Pn(i,r))return`
      float ${o}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const u=Xn(l),c=cW(e.shapeInfo.logicalShape,t.logicalShape),d=l-a;let f;const h=["x","y","z","w","u","v"];a===0?f="":l<2&&c.length>=1?f="coords = 0;":f=c.map(g=>`coords.${h[g+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=e.shapeInfo.logicalShape.map((g,m)=>`coords.${h[m+d]}`).join(", "),`
    float ${o}() {
      ${u} coords = getOutputCoords();
      ${f}
      return get${s}(${p});
    }
  `}function Xn(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function fE(e,t,n){const{newShape:s,keptDims:o}=Ml(t),r=t.length,i=e&&r===3&&t[0]===1,a=i?t.slice(1):s,l=!e&&r>1&&!Pn(t,n)&&s.length<r||i;return{useSqueezeShape:l,uniformShape:l?a:t,keptDims:o}}function Sf(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function If(e,t){return t.map(n=>e[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UUe(e,t,n,s){const o=n.map((y,w)=>{const C={logicalShape:y.shape,texShape:y.isUniform?null:y.texData.texShape,isUniform:y.isUniform,isPacked:y.isUniform?!1:y.texData.isPacked,flatOffset:null};return y.texData!=null&&y.texData.slice!=null&&y.texData.slice.flatOffset>0&&(C.flatOffset=y.texData.slice.flatOffset),{name:t.variableNames[w],shapeInfo:C}}),r=o.map(y=>y.shapeInfo),i={logicalShape:s.shape,texShape:s.texData.texShape,isUniform:!1,isPacked:s.texData.isPacked,flatOffset:null},a=lUe(o,i,t),l=FHe(e.gl,a),u=e.createProgram(l);let c=null;const d=e.getUniformLocation(u,"NAN",!1);Ye().getNumber("WEBGL_VERSION")===1&&(c=e.getUniformLocation(u,"INFINITY",!1));const f=!1,h={},p={},g={};for(let y=0;y<t.variableNames.length;y++){const w=t.variableNames[y];h[w]=e.getUniformLocation(u,w,f),h[`offset${w}`]=e.getUniformLocation(u,`offset${w}`,f),t.enableShapeUniforms&&(p[`${w}Shape`]=e.getUniformLocation(u,`${w}Shape`,f),g[`${w}TexShape`]=e.getUniformLocation(u,`${w}TexShape`,f))}let m,v,b;t.enableShapeUniforms&&(m=e.getUniformLocation(u,"outShape",f),b=e.getUniformLocation(u,"outShapeStrides",f),v=e.getUniformLocation(u,"outTexShape",f));const $=[];return t.customUniforms&&t.customUniforms.forEach((y,w)=>{$[w]=e.getUniformLocation(u,y.name,f)}),{program:t,fragmentShader:l,source:a,webGLProgram:u,uniformLocations:h,customUniformLocations:$,inShapeInfos:r,outShapeInfo:i,infLoc:c,nanLoc:d,inShapesLocations:p,inTexShapesLocations:g,outShapeLocation:m,outShapeStridesLocation:b,outTexShapeLocation:v}}function HR(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((n,s)=>{const o=n.logicalShape,r=t[s],i=r.shape;if(!Pn(o,i))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${o} and ${i} must match`);if(n.isUniform&&r.isUniform)return;const a=n.texShape,l=r.isUniform?null:r.texData.texShape;if(!Pn(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function jUe(e,t,n,s,o){t.program.enableShapeUniforms||(HR(t.inShapeInfos,n),HR([t.outShapeInfo],[s]));const r=s.texData.texture,i=s.texData.texShape;s.texData.isPacked?e.setOutputPackedMatrixTexture(r.texture,i[0],i[1]):e.setOutputMatrixTexture(r.texture,i[0],i[1]),e.setProgram(t.webGLProgram),Ye().getNumber("WEBGL_VERSION")===1&&t.infLoc!==null&&e.gl.uniform1f(t.infLoc,1/0),t.nanLoc!==null&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((l,u)=>{const c=t.program.variableNames[u],d=t.uniformLocations[c],f=t.uniformLocations[`offset${c}`],h=t.inShapesLocations[`${c}Shape`],p=t.inTexShapesLocations[`${c}TexShape`];if(h){const{uniformShape:g}=fE(t.program.packedInputs,l.shape,l.texData.texShape);switch(g.length){case 1:e.gl.uniform1iv(h,new Int32Array(g));break;case 2:e.gl.uniform2iv(h,new Int32Array(g));break;case 3:e.gl.uniform3iv(h,new Int32Array(g));break;case 4:e.gl.uniform4iv(h,new Int32Array(g));break}}if(p&&e.gl.uniform2i(p,l.texData.texShape[0],l.texData.texShape[1]),d!=null){if(l.isUniform){if(qe(l.shape)<2)e.gl.uniform1f(d,l.uniformValues[0]);else{let g=l.uniformValues;g instanceof Float32Array||(g=new Float32Array(g)),e.gl.uniform1fv(d,g)}return}l.texData.slice!=null&&f!=null&&e.gl.uniform1i(f,l.texData.slice.flatOffset),e.setInputMatrixTexture(l.texData.texture.texture,d,u)}});const a=t.outShapeLocation;if(a)switch(s.shape.length){case 1:e.gl.uniform1iv(a,new Int32Array(s.shape));break;case 2:e.gl.uniform2iv(a,new Int32Array(s.shape));break;case 3:e.gl.uniform3iv(a,new Int32Array(s.shape));break;case 4:e.gl.uniform4iv(a,new Int32Array(s.shape));break}if(t.outShapeStridesLocation){const l=Ot(s.shape);switch(s.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(l));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(l));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(l));break}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,s.texData.texShape[0],s.texData.texShape[1]),t.program.customUniforms&&o&&t.program.customUniforms.forEach((l,u)=>{const c=t.customUniformLocations[u],d=o[u];if(l.type==="float")e.gl.uniform1fv(c,d);else if(l.type==="vec2")e.gl.uniform2fv(c,d);else if(l.type==="vec3")e.gl.uniform3fv(c,d);else if(l.type==="vec4")e.gl.uniform4fv(c,d);else if(l.type==="int")e.gl.uniform1iv(c,d);else if(l.type==="ivec2")e.gl.uniform2iv(c,d);else if(l.type==="ivec3")e.gl.uniform3iv(c,d);else if(l.type==="ivec4")e.gl.uniform4iv(c,d);else throw Error(`uniform type ${l.type} is not supported yet.`)}),e.executeProgram()}function GUe(e,t,n){let s="";t.concat(n).forEach(i=>{const a=i.texData!=null&&i.texData.slice!=null&&i.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!i.isUniform){const l=i.texData.texShape,{useSqueezeShape:u,uniformShape:c,keptDims:d}=fE(e.packedInputs,i.shape,l);let f="",h="",p="";if(c.length===1&&e.packedInputs){const w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];f=`${w[0]>1}_${w[1]>1}`}else if(c.length===2&&!e.packedInputs)h=`${c[0]>1}_${c[1]>1}`;else if(c.length>2&&!e.packedInputs){const w=Ot(c);p=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}const g=i.shape.length,m=c.length===2&&Pn(i.shape,l),v=qe(i.shape)===1,b=Bd(i.shape,n.shape),$=!e.packedInputs&&g===n.shape.length&&Pn(l,n.texData.texShape),y=e.packedInputs||c.length>2?"":`${l[0]>1}_${l[1]>1}`;s+=`${g}_${$}_${u?d:""}_${c.length}_${v}_${b}_${m}_${f}_${h}_${p}_${y}_${a}`}else{const l=i.isUniform?"uniform":i.texData.texShape;s+=`${i.shape}_${l}_${a}`}});const o=e.userCode;let r=e.constructor.name;return r+="_"+s+"_"+o+`${Ye().getNumber("WEBGL_VERSION")}`,r}function jo(e){return Ye().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KUe{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=vp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Oo();this.outputShape=t,this.enableShapeUniforms=jo(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?m1(["r","c","d"],t):$c(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qUe{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=vp.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Oo();this.outputShape=t,this.enableShapeUniforms=jo(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?m1(["r","c","d"],t):$c(["r","c","d"],t)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YUe{constructor(t){this.variableNames=["A"],this.outTexUsage=wr.DOWNLOAD;const n=Oo();this.outputShape=t,this.userCode=`
      ${uW}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XUe{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=wr.DOWNLOAD;const n=Oo();this.outputShape=t,this.userCode=`
      ${uW}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZUe{constructor(t,n=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Oo();this.outputShape=t,this.enableShapeUniforms=jo(this.outputShape.length);let o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      ${this.enableShapeUniforms?dE():cE(t)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / texShape[1];
        int c = imod(flatIndex, texShape[1]);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
        vec4 values = ${s.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${s.output} = vec4(${o}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JUe{constructor(t,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Oo();this.outputShape=t,this.enableShapeUniforms=jo(this.outputShape.length);let o="",r="result";n&&(r="floor(result * 255. + 0.5)");for(let i=0;i<=1;i++)for(let a=0;a<=1;a++){const l=i*2+a;o+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${t[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${i} < ${this.enableShapeUniforms?"outShape[1]":`${t[1]}`}) {
            localCoords[1] += ${i};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${s.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?dE():cE(t)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${o}

          ${s.output} = ${r};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QUe(e){const t=Oo(),n=`${t.version}
    precision highp float;
    ${t.attribute} vec3 clipSpacePos;
    ${t.attribute} vec2 uv;
    ${t.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return OHe(e,n)}function eje(e){const t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return VHe(e,t)}function tje(e){const t=new Uint16Array([0,1,2,2,1,3]);return WHe(e,t)}function lm(e,t,n,s,o,r){UHe(t,n);const i=HHe(e),a=e.TEXTURE_2D;return Et(e,()=>e.bindTexture(a,i)),Et(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),Et(e,()=>e.texParameteri(a,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),Et(e,()=>e.texParameteri(a,e.TEXTURE_MIN_FILTER,e.NEAREST)),Et(e,()=>e.texParameteri(a,e.TEXTURE_MAG_FILTER,e.NEAREST)),Ye().getNumber("WEBGL_VERSION")===1?Et(e,()=>e.texImage2D(a,0,s,t,n,0,o,r,null)):Et(e,()=>e.texStorage2D(a,1,s,t,n)),Et(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:i,texShape:[n,t]}}function hW(e){return e.internalFormatFloat}function nje(e,t,n,s){const[o,r]=im(t,n);return lm(e,o,r,hW(s),s.textureFormatFloat,e.FLOAT)}function pW(e){return e.internalFormatHalfFloat}function sje(e,t,n,s){const[o,r]=im(t,n);return lm(e,o,r,pW(s),s.textureFormatFloat,s.textureTypeHalfFloat)}function gW(e){return e.downloadTextureFormat}function oje(e,t,n,s){const[o,r]=im(t,n);return lm(e,o,r,gW(s),e.RGBA,e.UNSIGNED_BYTE)}function mW(e){return e.internalFormatPackedFloat}function rje(e,t,n,s){const[o,r]=Cf(t,n);return lm(e,o,r,mW(s),e.RGBA,e.FLOAT)}function vW(e){return e.internalFormatPackedHalfFloat}function ije(e,t,n,s){const[o,r]=Cf(t,n);return lm(e,o,r,vW(s),e.RGBA,s.textureTypeHalfFloat)}function aje(e,t,n){return Et(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),zR(e,t,"clipSpacePos",n,3,20,0)&&zR(e,t,"uv",n,2,20,12)}function lje(e,t,n,s,o,r){Et(e,()=>e.bindTexture(e.TEXTURE_2D,t));let i,a,l;o instanceof Uint8Array?(i=new Uint8Array(n*s*4),a=e.UNSIGNED_BYTE,l=e.RGBA):(i=new Float32Array(n*s*4),a=e.FLOAT,l=r.internalFormatPackedFloat),i.set(o),Ye().getNumber("WEBGL_VERSION")===2?Et(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,s,e.RGBA,a,i)):Et(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,s,0,e.RGBA,a,i)),Et(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function uje(e,t,n){Et(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?Ye().getNumber("WEBGL_VERSION")===2?Et(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):Et(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):Ye().getNumber("WEBGL_VERSION")===2?Et(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):Et(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),Et(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function cje(e,t,n,s){const o=e.createBuffer();Et(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,o));const a=4*4*t*n;return Et(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)),Et(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),Et(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),o}function dje(e,t,n){const s=e,o=new Float32Array(n);return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,o),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),o}function fje(e,t,n,s){const[o,r]=im(t,n),i=4,a=new Uint8Array(THe(t*n,i));return Et(e,()=>e.readPixels(0,0,o,r,s.downloadTextureFormat,e.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function hje(e,t,n,s,o,r,i,a){const l=e,u=new Float32Array(_He(r,i));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function pje(e,t,n){const s=new Float32Array(t*n*4);return Et(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,s)),s}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m${constructor(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const n=Ye().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,SHe(n,t)):this.gl=_i(n);let s="WEBGL_color_buffer_float";const o="EXT_color_buffer_half_float";if(Ye().getNumber("WEBGL_VERSION")===1){const r="OES_texture_float",i="OES_texture_half_float";if(this.textureFloatExtension=ov(this.gl,r),jr(this.gl,i))this.textureHalfFloatExtension=ov(this.gl,i);else if(Ye().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(s),jr(this.gl,o))this.colorBufferHalfFloatExtension=ov(this.gl,o);else if(Ye().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(s="EXT_color_buffer_float",jr(this.gl,s))this.colorBufferFloatExtension=this.gl.getExtension(s);else if(jr(this.gl,o))this.colorBufferHalfFloatExtension=this.gl.getExtension(o);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=eje(this.gl),this.indexBuffer=tje(this.gl),this.framebuffer=jHe(this.gl),this.textureConfig=uE(this.gl,this.textureHalfFloatExtension)}get debug(){return Ye().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const t=this.gl;Et(t,()=>t.finish()),Et(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,null)),Et(t,()=>t.deleteFramebuffer(this.framebuffer)),Et(t,()=>t.bindBuffer(t.ARRAY_BUFFER,null)),Et(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)),Et(t,()=>t.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(t,n){return this.throwIfDisposed(),nje(this.gl,t,n,this.textureConfig)}createFloat16MatrixTexture(t,n){return this.throwIfDisposed(),sje(this.gl,t,n,this.textureConfig)}createUnsignedBytesMatrixTexture(t,n){return this.throwIfDisposed(),oje(this.gl,t,n,this.textureConfig)}uploadPixelDataToTexture(t,n){this.throwIfDisposed(),uje(this.gl,t,n)}uploadDenseMatrixToTexture(t,n,s,o){this.throwIfDisposed(),lje(this.gl,t,n,s,o,this.textureConfig)}createFloat16PackedMatrixTexture(t,n){return this.throwIfDisposed(),ije(this.gl,t,n,this.textureConfig)}createPackedMatrixTexture(t,n){return this.throwIfDisposed(),rje(this.gl,t,n,this.textureConfig)}deleteMatrixTexture(t){this.throwIfDisposed(),this.outputTexture===t&&(VR(this.gl,this.framebuffer),this.outputTexture=null),Et(this.gl,()=>this.gl.deleteTexture(t))}downloadByteEncodedFloatMatrixFromOutputTexture(t,n,s){return this.downloadMatrixDriver(t,()=>fje(this.gl,n,s,this.textureConfig))}downloadPackedMatrixFromBuffer(t,n,s,o,r,i){return hje(this.gl,t,n,s,o,r,i,this.textureConfig)}downloadFloat32MatrixFromBuffer(t,n){return dje(this.gl,t,n)}createBufferFromTexture(t,n,s){this.bindTextureToFrameBuffer(t);const o=cje(this.gl,n,s,this.textureConfig);return this.unbindTextureToFrameBuffer(),o}createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let n,s;if(Ye().getBool("WEBGL_FENCE_API_ENABLED")){const o=t,r=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),s=()=>{const i=o.clientWaitSync(r,0,0);return i===o.ALREADY_SIGNALED||i===o.CONDITION_SATISFIED},n=r}else Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),s=()=>this.isQueryAvailable(n,Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):s=()=>!0;return{query:n,isFencePassed:s}}downloadMatrixFromPackedTexture(t,n,s){return this.downloadMatrixDriver(t,()=>pje(this.gl,n,s))}createProgram(t){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=QUe(n));const s=BHe(n);return Et(n,()=>n.attachShader(s,this.vertexShader)),Et(n,()=>n.attachShader(s,t)),zHe(n,s),this.debug&&d$(n,s),this.vertexAttrsAreBound||(this.setProgram(s),this.vertexAttrsAreBound=aje(n,this.program,this.vertexBuffer)),s}deleteProgram(t){this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&Et(this.gl,()=>this.gl.deleteProgram(t))}setProgram(t){this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&d$(this.gl,this.program),Et(this.gl,()=>this.gl.useProgram(t))}getUniformLocation(t,n,s=!0){return this.throwIfDisposed(),s?KHe(this.gl,t,n):qHe(this.gl,t,n)}getAttributeLocation(t,n){return this.throwIfDisposed(),Et(this.gl,()=>this.gl.getAttribLocation(t,n))}getUniformLocationNoThrow(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)}setInputMatrixTexture(t,n,s){this.throwIfDisposed(),this.throwIfNoProgram(),YHe(this.gl,t,n,s)}setOutputMatrixTexture(t,n,s){this.setOutputMatrixTextureDriver(t,s,n)}setOutputPackedMatrixTexture(t,n,s){this.throwIfDisposed();const[o,r]=Cf(n,s);this.setOutputMatrixTextureDriver(t,o,r)}setOutputMatrixWriteRegion(t,n,s,o){this.setOutputMatrixWriteRegionDriver(s,t,o,n)}setOutputPackedMatrixWriteRegion(t,n,s,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&d$(this.gl,this.program),rv(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const t=this.gl;this.debug&&this.debugValidate(),Et(t,()=>t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Et(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=ov(this.gl,Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),r=s.createQuery();return s.beginQuery(o.TIME_ELAPSED_EXT,r),r}const t=this.getQueryTimerExtensionWebGL1(),n=t.createQueryEXT();return t.beginQueryEXT(t.TIME_ELAPSED_EXT,n),n}endQuery(){if(Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,s=this.getQueryTimerExtensionWebGL2();n.endQuery(s.TIME_ELAPSED_EXT);return}const t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(t){return await MD(()=>this.disposed||this.isQueryAvailable(t,Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(t,Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(t,n){if(n===0)return null;if(n===2){const s=this.gl;return s.getQueryParameter(t,s.QUERY_RESULT)/1e6}else{const s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(t,s.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(t,n){if(n===0)return!0;if(n===2){const s=this.gl,o=this.getQueryTimerExtensionWebGL2(),r=s.getQueryParameter(t,s.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),r&&!this.disjoint}else{const s=this.getQueryTimerExtensionWebGL1(),o=s.getQueryObjectEXT(t,s.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),o&&!this.disjoint}}pollFence(t){return new Promise(n=>{this.addItemToPoll(()=>t.isFencePassed(),()=>n())})}pollItems(){const t=gje(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=t;++n){const{resolveFn:s}=this.itemsToPoll[n];s()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,n){this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),!(this.itemsToPoll.length>1)&&MD(()=>(this.pollItems(),this.itemsToPoll.length===0))}bindTextureToFrameBuffer(t){this.throwIfDisposed(),f$(this.gl,t,this.framebuffer),this.debug&&rv(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(f$(this.gl,this.outputTexture,this.framebuffer),this.debug&&rv(this.gl)):VR(this.gl,this.framebuffer)}downloadMatrixDriver(t,n){this.bindTextureToFrameBuffer(t);const s=n();return this.unbindTextureToFrameBuffer(),s}setOutputMatrixTextureDriver(t,n,s){this.throwIfDisposed();const o=this.gl;f$(o,t,this.framebuffer),this.debug&&rv(o),this.outputTexture=t,Et(o,()=>o.viewport(0,0,n,s)),Et(o,()=>o.scissor(0,0,n,s))}setOutputMatrixWriteRegionDriver(t,n,s,o){this.throwIfDisposed(),Et(this.gl,()=>this.gl.scissor(t,n,s,o))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function gje(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:mje,bincountImpl:bW,bincountReduceImpl:vje,ceilImpl:bje,concatImpl:yje,equalImpl:wje,expImpl:$je,expm1Impl:Cje,floorImpl:xje,gatherNdImpl:kje,gatherV2Impl:Sje,greaterImpl:Ije,greaterEqualImpl:Eje,lessImpl:Tje,lessEqualImpl:_je,linSpaceImpl:Nje,logImpl:Aje,maxImpl:Dje,maximumImpl:Rje,minimumImpl:Mje,multiplyImpl:Oje,negImpl:Fje,notEqualImpl:Pje,prodImpl:Lje,rangeImpl:Bje,rsqrtImpl:zje,sigmoidImpl:Vje,simpleAbsImpl:yW,sliceImpl:Wje,sparseFillEmptyRowsImpl:Hje,sparseReshapeImpl:Uje,sparseSegmentReductionImpl:wW,sqrtImpl:jje,stridedSliceImpl:Gje,stringNGramsImpl:Kje,stringSplitImpl:qje,stringToHashBucketFastImpl:Yje,subImpl:Xje,tileImpl:Zje,topKImpl:Jje,transposeImpl:hE,uniqueImpl:Qje}=gVe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $W(e,t){return["x","y","z","w","u","v"].slice(0,t).map(n=>`${e}.${n}`)}function Ao(e,t){return t===1?[e]:$W(e,t)}function eGe(e,t){if(e===1)return"rc";let n="";for(let s=0;s<e;s++)n+=t[s],s<e-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tGe{constructor(t){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=jo(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=Ao("rc",this.rank),s=Xn(this.rank),o=this.getOutOfBoundsCondition(n),r=this.getSetup(n),i=this.getOutput(n);this.userCode=`
        void main() {
          ${s} rc = getOutputCoords();

          if(${o}) {
            setOutput(vec4(0));
          } else {
            ${r}

            setOutput(vec4(${i}));
          }
        }
      `}}getSourceCoordsArr(t){const n=[];for(let s=0;s<=1;s++)for(let o=0;o<=1;o++){let r=`${s===0?"r":"rp1"}, ${o===0?"c":"cp1"}`;for(let i=2;i<this.rank;i++)r=`${t[t.length-1-i]},`+r;n.push(r)}return n}getOutOfBoundsCondition(t){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let s=this.rank-2;s<this.rank;s++)n+=`${t[s]} >= ${this.enableShapeUniforms?`outShape[${s}]`:this.outputShape[s]}`,s<this.rank-1&&(n+="||");return n}getSetup(t){if(this.rank===1)return"";const n=t.slice(-2),s=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],o=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${s};
      bool rEdge = rp1 >= ${o};
    `}getOutput(t){const n=this.getSourceCoordsArr(t);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CW{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=jo(this.outputShape.length);let s="";for(let o=0;o<4;o++){let r="thisRC = rc;";o%2===1&&(r+="thisRC.z += 1;"),o>1&&(r+="thisRC.y += 1;"),s+=`
        ${r}
        ${o>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${o>0?"}":""}
      `}this.userCode=`
      ${nGe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?dE():cE(t)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":t[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":t[2]};

        ${s}

        setOutput(result);
      }
    `}}function nGe(e,t){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${t?aUe(["r","c","d"],"inputShape"):$c(["r","c","d"],e)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sGe{constructor(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(t,n,s){const o=jR(n,s),r=GR(t,o,s);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const i=UR(t,o,this.gpgpu.gl,this.gpgpu.textureConfig,s);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=i,this.log();const l=this.freeTextures[r].shift();return this.usedTextures[r].push(l),l}let a;return o===ro.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):o===ro.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):o===ro.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):o===ro.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):o===ro.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[r].push(a),this.numUsedTextures++,this._numBytesAllocated+=i,this.log(),a}releaseTexture(t,n,s,o){if(this.freeTextures==null)return;const r=jR(s,o),i=GR(n,r,o);i in this.freeTextures||(this.freeTextures[i]=[]);const a=UR(n,r,this.gpgpu.gl,this.gpgpu.textureConfig,o),l=Ye().get("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(t.texture),this._numBytesAllocated-=a):(this.freeTextures[i].push(t),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const u=this.usedTextures[i],c=u.indexOf(t);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}log(){if(!this.logEnabled)return;const t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${t})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const t in this.freeTextures)this.freeTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const t in this.usedTextures)this.usedTextures[t].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function oGe(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}function UR(e,t,n,s,o){const r=rGe(t,s);let i;if(o){const[l,u]=Cf(e[0],e[1]);i=l*u}else{const[l,u]=im(e[0],e[1]);i=l*u}const a=oGe(n,r);return i*a}function rGe(e,t){switch(e){case ro.PACKED_2X2_FLOAT32:return mW(t);case ro.PACKED_2X2_FLOAT16:return vW(t);case ro.UNPACKED_FLOAT32:return hW(t);case ro.UNPACKED_FLOAT16:return pW(t);case ro.PACKED_4X1_UNSIGNED_BYTE:return gW(t);default:throw new Error(`Unknown physical texture type ${e}`)}}function iGe(e){return Ye().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?ro.PACKED_2X2_FLOAT32:ro.UNPACKED_FLOAT32:e?ro.PACKED_2X2_FLOAT16:ro.UNPACKED_FLOAT16}function jR(e,t){if(e===wr.UPLOAD)return ro.PACKED_2X2_FLOAT32;if(e===wr.RENDER||e==null)return iGe(t);if(e===wr.DOWNLOAD||e===wr.PIXELS)return ro.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function GR(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ya{constructor(t,n){this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=jo(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const ii="if (isnan(x)) return x;",aGe="return x;",KR="return abs(x);",lGe="return (x >= 0.0) ? x : (exp(x) - 1.0);",uGe=ii+`
  return (x < 0.0) ? 0.0 : x;
`,cGe=ii+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Gc="return x;",dGe="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fGe="return x;",hGe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,pGe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,gGe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,mGe="return 1.0 / (1.0 + exp(-1.0 * x));";class Tu{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=jo(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vGe{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=jo(this.outputShape.length);const n=t.length,s=Ao("rc",n),o=Xn(n),r=eGe(n,s),i=s.slice(-2),a=n<=1?"rc":`vec2(${i.join(",")})`;this.userCode=`
      void main() {
        ${o} rc = getOutputCoords();
        vec4 packedInput = getA(${r});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bGe=dV,yGe=1e-7,wGe=1e-4,av={};function $Ge(e){return e in av||(av[e]={}),av[e]}const CGe=Ye().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),xGe=600;function kGe(){return Ye().global.screen==null?1024:Ye().global.screen.height*Ye().global.screen.width*window.devicePixelRatio*xGe/1024/1024}class v1 extends Ik{constructor(t){super();if(this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Ye().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(t!=null){if(t instanceof m$)n=t;else{const s=_i(Ye().getNumber("WEBGL_VERSION"),t);n=new m$(s)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const s=_i(Ye().getNumber("WEBGL_VERSION"));n=new m$(s),this.binaryCache=$Ge(Ye().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new sGe(this.gpgpu),this.numMBBeforeWarning=kGe(),this.texData=new SB(this,el())}nextDataId(){return v1.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(t,n,s){if((Ye().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ye().getBool("DEBUG"))&&this.checkNumericalProblems(t),s==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const o={id:this.nextDataId()};return this.texData.set(o,{shape:n,dtype:s,values:t,usage:wr.UPLOAD,refCount:1}),o}refCount(t){return this.texData.has(t)?this.texData.get(t).refCount:0}incRef(t){const n=this.texData.get(t);n.refCount++}decRef(t){if(this.texData.has(t)){const n=this.texData.get(t);n.refCount--}}move(t,n,s,o,r){if(Ye().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:s,dtype:o,values:n,usage:wr.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}readSync(t){const n=this.texData.get(t),{values:s,dtype:o,complexTensorInfos:r,slice:i,shape:a,isPacked:l}=n;if(i!=null){let f;l?f=new Tu(a,Gc):f=new ya(a,Gc);const h=this.runWebGLProgram(f,[{dataId:t,shape:a,dtype:o}],o),p=this.readSync(h.dataId);return this.disposeIntermediateTensorInfo(h),p}if(s!=null)return this.convertAndCacheOnCPU(t);if(o==="string")return s;const u=this.activeTimers!=null;let c;u&&(c=Lo());let d;if(o==="complex64"){const f=this.readSync(r.real.dataId),h=this.readSync(r.imag.dataId);d=Ra(f,h)}else d=this.getValuesFromTexture(t);return u&&(this.downloadWaitMs+=Lo()-c),this.convertAndCacheOnCPU(t,d)}async read(t){if(this.pendingRead.has(t)){const p=this.pendingRead.get(t);return new Promise(g=>p.push(g))}const n=this.texData.get(t),{values:s,shape:o,slice:r,dtype:i,complexTensorInfos:a,isPacked:l}=n;if(r!=null){let p;l?p=new Tu(o,Gc):p=new ya(o,Gc);const g=this.runWebGLProgram(p,[{dataId:t,shape:o,dtype:i}],i),m=this.read(g.dataId);return this.disposeIntermediateTensorInfo(g),m}if(s!=null)return this.convertAndCacheOnCPU(t);if(Ye().getBool("DEBUG")&&!Ye().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&Ye().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,c;if(i!=="complex64"&&Ye().get("WEBGL_BUFFER_SUPPORTED")){c=this.decode(t);const p=this.texData.get(c.dataId);u=this.gpgpu.createBufferFromTexture(p.texture.texture,...sv(o))}this.pendingRead.set(t,[]),i!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(i==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),g=p[0],m=p[1];d=Ra(g,m)}else if(u==null)d=this.getValuesFromTexture(t);else{const p=qe(o);d=this.gpgpu.downloadFloat32MatrixFromBuffer(u,p)}if(c!=null&&this.disposeIntermediateTensorInfo(c),u!=null){const p=this.gpgpu.gl;Et(p,()=>p.deleteBuffer(u))}const f=this.convertAndCacheOnCPU(t,d),h=this.pendingRead.get(t);return this.pendingRead.delete(t),h.forEach(p=>p(f)),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&el().removeDataId(t,this),this.pendingDeletes--),f}readToGPU(t,n={}){const s=this.texData.get(t),{values:o,shape:r,slice:i,dtype:a,isPacked:l,texture:u}=s;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(i!=null){let h;l?h=new Tu(r,Gc):h=new ya(r,Gc);const p=this.runWebGLProgram(h,[{dataId:t,shape:r,dtype:a}],a),g=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),g}if(u==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const c=this.decode(t,n.customTexShape),d=el().makeTensorFromDataId(c.dataId,c.shape,c.dtype),f=this.texData.get(c.dataId);return Object.assign({tensorRef:d},f.texture)}bufferSync(t){const n=this.readSync(t.dataId);let s=n;if(t.dtype==="string")try{s=n.map(o=>Pd(o))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return vn(t.shape,t.dtype,s)}checkNumericalProblems(t){if(t!=null)for(let n=0;n<t.length;n++){const s=t[n];if(!RHe(s))throw Ye().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${s} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${s} cannot be represented on this device.`)}}getValuesFromTexture(t){const{shape:n,dtype:s,isPacked:o}=this.texData.get(t),r=qe(n);if(Ye().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const f=this.decode(t),h=this.texData.get(f.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(h.texture.texture,...sv(n)).subarray(0,r);return this.disposeIntermediateTensorInfo(f),p}const i=Ye().getBool("WEBGL_PACK")&&o===!0,a=i?h$(n):n,l=i?new XUe(a):new YUe(a),u=this.runWebGLProgram(l,[{shape:a,dtype:s,dataId:t}],"float32"),c=this.texData.get(u.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture.texture,c.texShape[0],c.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(u),d}timerAvailable(){return Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(t){const n=this.activeTimers,s=[];let o=!1;this.programTimersStack==null?(this.programTimersStack=s,o=!0):this.activeTimers.push(s),this.activeTimers=s,t();const r=Md(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),i=Md(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,o&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(r);a.kernelMs=NAe(l),a.getExtraProfileInfo=()=>l.map((u,c)=>({name:i[c],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Lo(),endMs:null}}endTimer(t){return Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Lo(),t)}async getQueryTime(t){if(Ye().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(t);const n=t;return n.endMs-n.startMs}disposeData(t,n=!1){if(this.pendingDisposal.has(t))return!1;if(!this.texData.has(t))return!0;if(n?this.texData.get(t).refCount=0:this.texData.get(t).refCount--,!n&&this.texData.get(t).refCount>0)return!1;if(this.pendingRead.has(t))return this.pendingDisposal.add(t),this.pendingDeletes++,!1;this.releaseGPUData(t);const{complexTensorInfos:s}=this.texData.get(t);return s!=null&&(this.disposeData(s.real.dataId,n),this.disposeData(s.imag.dataId,n)),this.texData.delete(t),!0}releaseGPUData(t){const{texture:n,dtype:s,texShape:o,usage:r,isPacked:i,slice:a}=this.texData.get(t),l=a&&a.origDataId||t,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(o,s),this.textureManager.releaseTexture(n,o,r,i)));const c=this.texData.get(t);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}getTexture(t){return this.uploadToGPU(t),this.texData.get(t).texture.texture}getDataInfo(t){return this.texData.get(t)}shouldExecuteOnCPU(t,n=CGe){return Ye().getBool("WEBGL_CPU_FORWARD")&&t.every(s=>this.texData.get(s.dataId).texture==null&&qe(s.shape)<n)}getGPGPUContext(){return this.gpgpu}where(t){vr("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=t.dataSync();return bGe(t.shape,n)}packedUnaryOp(t,n,s){const o=new Tu(t.shape,n),r=this.compileAndRun(o,[t],s);return el().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}abs(t){if(this.shouldExecuteOnCPU([t])&&t.dtype!=="complex64"){const o=yW(this.texData.get(t.dataId).values);return this.makeOutput(t.shape,t.dtype,o)}if(Ye().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,KR,t.dtype);const n=new ya(t.shape,KR),s=this.compileAndRun(n,[t]);return el().makeTensorFromDataId(s.dataId,s.shape,s.dtype)}makeTensorInfo(t,n,s){let o;if(n==="string"&&s!=null&&s.length>0&&Up(s[0])){const r=s.map(i=>fl(i));o=this.write(r,t,n)}else o=this.write(s,t,n);return this.texData.get(o).usage=null,{dataId:o,shape:t,dtype:n}}makeOutput(t,n,s){const{dataId:o}=this.makeTensorInfo(t,n,s);return el().makeTensorFromDataId(o,t,n,this)}unpackTensor(t){const n=new vGe(t.shape);return this.runWebGLProgram(n,[t],t.dtype)}packTensor(t){const n=new tGe(t.shape),s=!0;return this.runWebGLProgram(n,[t],t.dtype,null,s)}packedReshape(t,n){const s=[jd(t.shape),...Gd(t.shape)],o={dtype:t.dtype,shape:s,dataId:t.dataId},r=[jd(n),...Gd(n)],i=new CW(r,s),a=!0,l=[s],u=this.runWebGLProgram(i,[o],t.dtype,l,a);return{dataId:u.dataId,shape:n,dtype:u.dtype}}decode(t,n){const s=this.texData.get(t),{isPacked:o,shape:r,dtype:i}=s;if(n!=null){const f=qe(r),h=n[0]*n[1]*4;J(f<=h,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=h$(r);let l;o?l=new qUe(a):l=new KUe(a);const u=!0,c=[n!=null?n:sv(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:i,dataId:t}],i,c,u,n);return{dtype:i,shape:r,dataId:d.dataId}}runWebGLProgram(t,n,s,o,r=!1,i){const a=this.makeTensorInfo(t.outputShape,s),l=this.texData.get(a.dataId);if(t.packedOutput&&(l.isPacked=!0),t.outPackingScheme===vp.DENSE){const v=i!=null?i:sv(t.outputShape);l.texShape=v.map(b=>b*2)}if(t.outTexUsage!=null&&(l.usage=t.outTexUsage),qe(a.shape)===0)return l.values=co(a.dtype,0),a;const u=[],c=n.map(v=>{if(v.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(v.dataId);if(b.texture==null){if(!t.packedInputs&&qe(v.shape)<=Ye().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:v.shape,texData:null,isUniform:!0,uniformValues:b.values};t.packedInputs&&(b.isPacked=!0,b.shape=v.shape)}if(this.uploadToGPU(v.dataId),!!b.isPacked!=!!t.packedInputs)v=b.isPacked?this.unpackTensor(v):this.packTensor(v),u.push(v),b=this.texData.get(v.dataId);else if(b.isPacked&&!Y0(b.shape,v.shape)){const $=v,y=v.shape;v.shape=b.shape,v=this.packedReshape(v,y),u.push(v),b=this.texData.get(v.dataId),$.shape=y}return{shape:v.shape,texData:b,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},f=GUe(t,c,d),h=this.getAndSaveBinary(f,()=>UUe(this.gpgpu,t,c,d)),p=this.activeTimers!=null;let g;p&&(g=this.startTimer()),jUe(this.gpgpu,h,c,d,o),u.forEach(v=>this.disposeIntermediateTensorInfo(v)),p&&(g=this.endTimer(g),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(g)}));const m=Ye().get("WEBGL_FLUSH_THRESHOLD");if(m>0){const v=Lo();v-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=v)}if(!Ye().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&r===!1){const v=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),v}return a}compileAndRun(t,n,s,o,r=!1){return s=s||n[0].dtype,this.runWebGLProgram(t,n,s,o,r)}getAndSaveBinary(t,n){return t in this.binaryCache||(this.binaryCache[t]=n()),this.binaryCache[t]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(Ye().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement!="undefined"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Be(()=>{if(!Ye().get("WEBGL_RENDER_FLOAT32_ENABLED")){const t=Ye().getBool("DEBUG");Ye().set("DEBUG",!1);const n=this.abs(Yt(1e-8)).dataSync()[0];if(Ye().set("DEBUG",t),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?yGe:wGe}uploadToGPU(t){const n=this.texData.get(t),{shape:s,dtype:o,values:r,texture:i,usage:a,isPacked:l}=n;if(i!=null)return;const u=this.activeTimers!=null;let c;u&&(c=Lo());let d=n.texShape;if(d==null&&(d=JHe(s,l),n.texShape=d),r!=null){const f=h$(s);let h,p=d[1],g=d[0];const m=r instanceof Uint8Array||r instanceof Uint8ClampedArray;(l||!m)&&([p,g]=Cf(d[0],d[1])),l?h=new JUe(f,m):h=new ZUe(f,m);const v=m?[g,p]:d,b=this.makeTensorInfo(v,o),$=this.texData.get(b.dataId);m?$.usage=wr.PIXELS:$.usage=wr.UPLOAD,$.texShape=v,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,g,r);const y=[[g,p]],w=!0,C=this.runWebGLProgram(h,[b],o,y,w),x=this.texData.get(C.dataId);n.texture=x.texture,n.texShape=x.texShape,n.isPacked=x.isPacked,n.usage=x.usage,this.disposeIntermediateTensorInfo(b),this.texData.delete(C.dataId),n.values=null,u&&(this.uploadWaitMs+=Lo()-c)}else{const f=this.acquireTexture(d,a,o,l);n.texture=f}}convertAndCacheOnCPU(t,n){const s=this.texData.get(t),{dtype:o}=s;return this.releaseGPUData(t),n!=null&&(s.values=SGe(n,o)),s.values}acquireTexture(t,n,s,o){if(this.numBytesInGPU+=this.computeBytes(t,s),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const r=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${r} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(t,n,o)}computeBytes(t,n){return t[0]*t[1]*KC(n)}}v1.nextDataId=0;function SGe(e,t){if(t==="float32"||t==="complex64")return e;if(t==="int32"||t==="bool"){const n=t==="int32"?new Int32Array(e.length):new Uint8Array(e.length);for(let s=0;s<n.length;++s)n[s]=Math.round(e[s]);return n}else throw new Error(`Unknown dtype ${t}`)}/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */iz()&&Tz("webgl",()=>new v1,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xW=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Kd{constructor(t,n,s){this.variableNames=["A","B"],this.outputShape=rn(n,s),this.enableShapeUniforms=jo(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${t}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b1=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;class um{constructor(t,n,s,o=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=rn(n,s);const r=this.outputShape.length;this.enableShapeUniforms=jo(r);let i="";if(o)if(r===0||qe(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          ${Xn(r)} coords = getOutputCoords();
        `,r===1)this.enableShapeUniforms?i+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:i+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=Ao("coords",r);this.enableShapeUniforms?i+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= outShape[${r} - 2];
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= outShape[${r} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:i+=`
            bool nextRowOutOfBounds =
              (${l[r-2]} + 1) >= ${this.outputShape[r-2]};
            bool nextColOutOfBounds =
              (${l[r-1]} + 1) >= ${this.outputShape[r-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${t}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${i}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ir(e){const{inputs:t,backend:n}=e,{x:s}=t;return n.incRef(s.dataId),{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}const IGe={kernelName:hg,backendName:"webgl",kernelFunc:ir};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hl(e){const{inputs:t,backend:n}=e,{real:s,imag:o}=t,r=n.makeTensorInfo(s.shape,"complex64"),i=n.texData.get(r.dataId),a=ir({inputs:{x:s},backend:n}),l=ir({inputs:{x:o},backend:n});return i.complexTensorInfos={real:a,imag:l},r}const EGe={kernelName:Mk,backendName:"webgl",kernelFunc:Hl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kW="return (a < 0.) ? b * a : a;",SW=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function TGe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{alpha:r}=s,i=n.makeTensorInfo([],"float32",Ol(r,"float32")),a=Ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new um(SW,o.shape,i.shape):new Kd(kW,o.shape,i.shape),l=n.runWebGLProgram(a,[o,i],"float32");return n.disposeIntermediateTensorInfo(i),l}const _Ge={kernelName:ly,backendName:"webgl",kernelFunc:TGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IW="return (a < 0.) ? b * a : a;",EW=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function NGe(e){const{inputs:t,backend:n}=e,{x:s,alpha:o}=t,r=Ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new um(EW,s.shape,o.shape):new Kd(IW,s.shape,o.shape);return n.runWebGLProgram(r,[s,o],"float32")}const AGe={kernelName:Ey,backendName:"webgl",kernelFunc:NGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ef="if (isnan(x)) return x;",DGe=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,RGe=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;function Nn({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:s}){return({inputs:o,backend:r})=>{const{x:i}=o,a=r,l=s||i.dtype;if(a.shouldExecuteOnCPU([i])&&n!=null){const d=a.texData.get(i.dataId),f=n(d.values,l);return a.makeTensorInfo(i.shape,l,f)}const u=Ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&t!=null;let c;return u?c=new Tu(i.shape,t):c=new ya(i.shape,e),a.runWebGLProgram(c,[i],l)}}function po({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:s=!1,cpuKernelImpl:o,dtype:r}){return({inputs:i,backend:a})=>{const{a:l,b:u}=i,c=a;if(s&&l.dtype==="complex64"){const p=c.texData.get(l.dataId),g=c.texData.get(u.dataId),[m,v]=[[p.complexTensorInfos.real,g.complexTensorInfos.real],[p.complexTensorInfos.imag,g.complexTensorInfos.imag]].map($=>{const[y,w]=$,C={dataId:y.dataId,dtype:y.dtype,shape:l.shape},x={dataId:w.dataId,dtype:w.dtype,shape:u.shape},S=new Kd(e,l.shape,u.shape);return c.runWebGLProgram(S,[C,x],kr(y.dtype,w.dtype))}),b=Hl({inputs:{real:m,imag:v},backend:c});return c.disposeIntermediateTensorInfo(m),c.disposeIntermediateTensorInfo(v),b}const d=r||kr(l.dtype,u.dtype);if((l.dtype==="string"||u.dtype==="string"||c.shouldExecuteOnCPU([l,u]))&&o!=null){const p=c.texData.get(l.dataId).values,g=c.texData.get(u.dataId).values,m=l.dtype==="string"?ec(p):p,v=l.dtype==="string"?ec(g):g,[b,$]=o(l.shape,u.shape,m,v,d),y=c.makeTensorInfo($,d),w=c.texData.get(y.dataId);return w.values=b,y}const f=Ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&t!=null;let h;return f?h=new um(t,l.shape,u.shape,n):h=new Kd(e,l.shape,u.shape),c.runWebGLProgram(h,[l,u],d)}}function y1(e,t=!1){if(e==="linear")return t?fGe:aGe;if(e==="relu")return t?pGe:uGe;if(e==="elu")return t?hGe:lGe;if(e==="relu6")return t?gGe:cGe;if(e==="prelu")return t?EW:IW;if(e==="leakyrelu")return t?SW:kW;if(e==="sigmoid")return t?mGe:dGe;throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TW{constructor(t,n,s,o=!1,r=!1,i=!1,a=null,l=!1,u=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s,this.enableShapeUniforms=jo(this.outputShape.length);const c=o?t[1]:t[2],d=Math.ceil(c/2),f=o?"i * 2, rc.y":"rc.y, i * 2",h=r?"rc.z, i * 2":"i * 2, rc.z",p=o?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",v="";a&&(l?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:u?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:m=`vec4 activation(vec4 x) {
          ${a}
        }`,v="result = activation(result);");const b=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");let $="rc.x",y="rc.x";t[0]<n[0]?$=`int(min(float(rc.x), ${t[0]-1}.))`:n[0]<t[0]&&(y=`int(min(float(rc.x), ${n[0]-1}.))`),this.userCode=`
      ${m}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${d}; i++) {
          int batchA = ${$};
          int batchB = ${y};
          vec4 a = getMatrixA(batchA, ${f});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${g[0]});
          result += (${p[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${v}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qR={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class YR{constructor(t,n,s){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=rn(n,s),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${t}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XR="return a * b;";function pE(e){const{inputs:t,backend:n}=e,{a:s,b:o}=t,r=kr(s.dtype,o.dtype);if(s.dtype==="complex64"){const a=n.texData.get(s.dataId),l=n.texData.get(o.dataId),u=new YR(qR.REAL,s.shape,o.shape),c=new YR(qR.IMAG,s.shape,o.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:s.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:o.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:o.shape}],f=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=Hl({inputs:{real:f,imag:h},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}if(n.shouldExecuteOnCPU([s,o])){const a=n.texData.get(s.dataId),l=n.texData.get(o.dataId),[u,c]=Oje(s.shape,o.shape,a.values,l.values,r),d=n.makeTensorInfo(c,r),f=n.texData.get(d.dataId);return f.values=u,d}let i;return Ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?i=new um(XR,s.shape,o.shape):i=new Kd(XR,s.shape,o.shape),n.runWebGLProgram(i,[s,o],r)}const MGe={kernelName:Cg,backendName:"webgl",kernelFunc:pE};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OGe(e,t,n){const s=[jd(e.shape),...Gd(e.shape)],o={dtype:e.dtype,shape:s,dataId:e.dataId},r=[jd(t),...Gd(t)],i=new CW(r,s),a=!0,l=[s],u=n.runWebGLProgram(i,[o],e.dtype,l,a);return{dataId:u.dataId,shape:t,dtype:u.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $t(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{shape:r}=s,i=n,a=qe(o.shape),l=TB(r,a),u=qe(l);J(a===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${o.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const c=i.texData.get(o.dataId);return c.isPacked&&!Y0(o.shape,l)&&!(c.texture!==null&&Y0(c.shape,l))?OGe(o,l,i):(i.incRef(o.dataId),{dataId:o.dataId,shape:l,dtype:o.dtype})}const FGe={kernelName:Ty,backendName:"webgl",kernelFunc:$t};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZR{constructor(t,n){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:r,outSize:i}=t;this.outputShape=[o,i];const a=Math.floor(s/4)*4,l=s%4;let u="sumValue += dot(values, ones);";if(n!=null){const d=1/n;u=`sumValue += dot(values * ${Od(d)?d.toPrecision(2):d}, ones);`}let c="";r%s>0&&(c=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${c}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${u}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${u}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${u}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${u}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PGe{constructor(t,n){this.variableNames=["x"];const{windowSize:s,batchSize:o,inSize:r,outSize:i}=t;this.outputShape=[o,i];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let u=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?u="sumValue":n==="prod"?u="prodValue":n==="all"?u="allValue":n==="any"&&(u="anyValue");const c=Math.floor(s/4)*4,d=s%4;let f=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";n==="all"?(a="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):n==="any"&&(a="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let p="";r%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${f}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LGe(e){const t=[];for(;t.length===0||t[t.length-1].outSize!==1;){const n=t.length?t[t.length-1].outSize:e[1],s=e1(n);t.push({inSize:n,windowSize:s,outSize:Math.ceil(n/s)})}return t}function xc(e,t,n,s){const o=LGe(e.shape);let r=e;for(let i=0;i<o.length;i++){const{inSize:a,windowSize:l,outSize:u}=o[i];let c,d;n==="mean"?c=i===0?new ZR({windowSize:l,inSize:a,batchSize:e.shape[0],outSize:u},a):new ZR({windowSize:l,inSize:a,batchSize:e.shape[0],outSize:u}):c=new PGe({windowSize:l,inSize:a,batchSize:e.shape[0],outSize:u},n),d=r,r=s.runWebGLProgram(c,[r],t),d.dataId!==e.dataId&&s.disposeIntermediateTensorInfo(d)}return r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BGe{constructor(t,n){this.variableNames=["A"];const s=new Array(t.length);for(let i=0;i<s.length;i++)s[i]=t[n[i]];this.outputShape=s,this.rank=s.length;const o=Xn(this.rank),r=zGe(n);this.userCode=`
    void main() {
      ${o} resRC = getOutputCoords();
      setOutput(getA(${r}));
    }
    `}}function zGe(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],s=new Array(t);for(let o=0;o<e.length;o++)s[e[o]]=n[o];return s.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VGe{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const s=new Array(t.length);for(let c=0;c<s.length;c++)s[c]=t[n[c]];if(this.outputShape=s,this.rank=s.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const o=Xn(this.rank),r=$W("rc",this.rank),i=new Array(this.rank);for(let c=0;c<n.length;c++)i[n[c]]=r[c];const a=`vec2(${i.slice(-2).join()})`,l=`++${r[this.rank-1]} < ${s[this.rank-1]}`,u=`getChannel(getA(${i.join()}), ${a})`;this.userCode=`
    void main() {
      ${o} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${u};
      if(${l}) {
        result[1] = ${u};
      }
      --${r[this.rank-1]};
      if(++${r[this.rank-2]} < ${s[this.rank-2]}) {
        result[2] = ${u};
        if(${l}) {
          result[3] = ${u};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w1(e,t,n){const s=Ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new VGe(e.shape,t):new BGe(e.shape,t);return n.runWebGLProgram(s,[e],e.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WGe(e,t,n,s){const o=t,r=e.shape.length,i=fn(o,e.shape);let a=i;const l=Ts(a,r),u=l!=null;let c=e;u&&(c=w1(e,l,s),a=Ms(a.length,r)),ho("sum",a,r);const[d,f]=eo(c.shape,a);let h=d;n&&(h=Es(d,i));const p=qe(f),m=qe(e.shape)/p,v=$t({inputs:{x:c},attrs:{shape:[m,p]},backend:s}),b=wS(e.dtype),$=xc(v,b,"sum",s),y=$t({inputs:{x:$},attrs:{shape:h},backend:s});return s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo($),u&&s.disposeIntermediateTensorInfo(c),y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $1(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s;return WGe(o,r,i,n)}const HGe={kernelName:My,backendName:"webgl",kernelFunc:$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mo(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{perm:r}=s,i=n,a=o.shape.length,l=new Array(a);for(let c=0;c<l.length;c++)l[c]=o.shape[r[c]];let u;if(i.shouldExecuteOnCPU([o])){const d=i.texData.get(o.dataId).values,f=hE(d,o.shape,o.dtype,r,l);u=i.makeTensorInfo(l,o.dtype);const h=i.texData.get(u.dataId);h.values=f}else u=w1(o,r,i);return u}const UGe={kernelName:Ly,backendName:"webgl",kernelFunc:Mo};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _W=1e3;function X0({a:e,b:t,transposeA:n,transposeB:s,backend:o,bias:r=null,preluActivationWeights:i=null,leakyreluAlpha:a=0,activation:l=null}){const u=e.shape.length,c=t.shape.length,d=n?e.shape[u-2]:e.shape[u-1],f=s?t.shape[c-1]:t.shape[c-2],h=n?e.shape[u-1]:e.shape[u-2],p=s?t.shape[c-2]:t.shape[c-1],g=e.shape.slice(0,-2),m=t.shape.slice(0,-2),v=qe(g),b=qe(m),y=rn(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([h,p]);J(d===f,()=>`Error in matMul: inner shapes (${d}) and (${f}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${s} must match.`);const w=n?[v,d,h]:[v,h,d],C=s?[b,p,f]:[b,f,p],x=$t({inputs:{x:e},backend:o,attrs:{shape:w}}),S=$t({inputs:{x:t},backend:o,attrs:{shape:C}}),T=[x,S],I=Math.max(v,b),_=n?x.shape[1]:x.shape[2],N=r!=null,D=i!=null,F=l==="leakyrelu",P=l!=null?y1(l,!0):null,M=N||D||F||P!=null;let B;if((h===1||p===1)&&_>_W&&M===!1){let X=x,ae=S;n&&(X=Mo({inputs:{x},backend:o,attrs:{perm:[0,2,1]}}),T.push(X)),s&&(ae=Mo({inputs:{x:S},backend:o,attrs:{perm:[0,2,1]}}),T.push(ae));const be=p!==1,ie=p===1;let ye=X;be&&(ye=$t({inputs:{x:X},backend:o,attrs:{shape:[I,_,1]}}),T.push(ye));const ue=p===1?2:1;let Z=ae;ie&&(Z=$t({inputs:{x:ae},backend:o,attrs:{shape:[I,1,_]}}),T.push(Z));const ee=pE({inputs:{a:ye,b:Z},backend:o});B=$1({inputs:{x:ee},backend:o,attrs:{axis:ue,keepDims:!0}}),T.push(ee)}else{const X=kr(e.dtype,t.dtype),ae=new TW(w,C,[I,h,p],n,s,N,P,D,F),be=[x,S];if(r!=null&&be.push(r),D&&be.push(i),F){const ie=o.makeTensorInfo([],"float32",Ol(a,"float32"));be.push(ie),T.push(ie)}B=o.runWebGLProgram(ae,be,X)}const j=$t({inputs:{x:B},backend:o,attrs:{shape:y}});T.push(B);for(const X of T)o.disposeIntermediateTensorInfo(X);return j}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jGe(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r,bias:i,preluActivationWeights:a}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:d}=s;return X0({a:o,b:r,transposeA:l,transposeB:u,backend:n,bias:i,preluActivationWeights:a,leakyreluAlpha:d,activation:c})}const GGe={kernelName:A0,backendName:"webgl",kernelFunc:jGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JR="return abs(x);";function KGe(e){const{inputs:t,backend:n}=e,{x:s}=t;if(n.shouldExecuteOnCPU([s])&&s.dtype!=="complex64"){const r=n.texData.get(s.dataId),i=yW(r.values);return n.makeTensorInfo(s.shape,s.dtype,i)}let o;return Ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Tu(s.shape,JR):o=new ya(s.shape,JR),n.runWebGLProgram(o,[s],s.dtype)}const qGe={kernelName:Wb,backendName:"webgl",kernelFunc:KGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YGe=ii+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,XGe=Nn({opSnippet:YGe}),ZGe={kernelName:Kp,backendName:"webgl",kernelFunc:XGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JGe=ii+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,QGe=Nn({opSnippet:JGe}),eKe={kernelName:qp,backendName:"webgl",kernelFunc:QGe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QR="return a + b;",tKe=po({opSnippet:QR,packedOpSnippet:QR,supportsComplex:!0,cpuKernelImpl:mje}),nKe={kernelName:ff,backendName:"webgl",kernelFunc:tKe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sKe{constructor(t,n){this.outputShape=[],this.outputShape=t,this.variableNames=n.map((r,i)=>`T${i}`);const s=[];this.variableNames.forEach(r=>{s.push(`float v${r} = get${r}AtOutCoords();`)});const o=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        float result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oKe{constructor(t,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((r,i)=>`T${i}`);const s=[];this.variableNames.forEach(r=>{s.push(`vec4 v${r} = get${r}AtOutCoords();`)});const o=this.variableNames.map(r=>`v${r}`).join(" + ");this.userCode=`
      void main() {
        ${s.join(`
        `)}

        vec4 result = ${o};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i0(e){const{inputs:t,backend:n}=e,s=t;if(s.length===1)return ir({inputs:{x:s[0]},backend:n});if(s.length>Ye().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(s.length/2),u=i0({inputs:s.slice(0,l),backend:n}),c=i0({inputs:s.slice(l),backend:n});return i0({inputs:[u,c],backend:n})}const o=s.map(l=>l.dtype).reduce((l,u)=>kr(l,u)),r=s.map(l=>l.shape),a=Ye().getBool("WEBGL_PACK")?new oKe(s[0].shape,r):new sKe(s[0].shape,r);return n.runWebGLProgram(a,s,o)}const rKe={kernelName:Tk,backendName:"webgl",kernelFunc:i0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=o.shape.length,l=fn(r,o.shape);let u=l;const c=Ts(u,a);let d=o;c!=null&&(d=Mo({inputs:{x:o},backend:n,attrs:{perm:c}}),u=Ms(u.length,a)),ho("all",u,a);const[f,h]=eo(d.shape,u),p=qe(h),g=$t({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),m=xc(g,g.dtype,"all",n);let v;if(i){const b=Es(f,l);v=$t({inputs:{x:m},backend:n,attrs:{shape:b}})}else v=$t({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),c!=null&&n.disposeIntermediateTensorInfo(d),v}const aKe={kernelName:_k,backendName:"webgl",kernelFunc:iKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=o.shape.length,l=fn(r,o.shape);let u=l;const c=Ts(u,a);let d=o;c!=null&&(d=Mo({inputs:{x:o},backend:n,attrs:{perm:c}}),u=Ms(u.length,a)),ho("any",u,a);const[f,h]=eo(d.shape,u),p=qe(h),g=$t({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),m=xc(g,g.dtype,"any",n);let v;if(i){const b=Es(f,l);v=$t({inputs:{x:m},backend:n,attrs:{shape:b}})}else v=$t({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),c!=null&&n.disposeIntermediateTensorInfo(d),v}const uKe={kernelName:Nk,backendName:"webgl",kernelFunc:lKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cKe{constructor(t,n,s){this.variableNames=["A"];const{windowSize:o,batchSize:r,outSize:i}=t;s||this.variableNames.push("bestIndicesA"),this.outputShape=[r,i];const a=n==="max"?">":"<",l=s?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${o};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${o}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dKe{constructor(t,n,s,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,J(t.length>2,()=>`Packed arg${s.charAt(0).toUpperCase()+s.slice(1)} supports only inputs with rank above 2.`);const r=t[t.length-1],i=Math.ceil(r/n);this.outputShape=t.slice(0,-1),i>1&&this.outputShape.push(i),o||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,u=Xn(l),c=Ao("coords",l);let d,f;if(i===1){f=l+1;const S=Xn(f);d=`
        ${S} sourceLocR = ${S}(${c.join()}, 0);
        ++${c[l-1]};
        ${S} sourceLocG = ${S}(${c.join()}, 0);
        ++${c[l-2]};
        ${S} sourceLocA = ${S}(${c.join()}, 0);
        --${c[l-1]};
        ${S} sourceLocB = ${S}(${c.join()}, 0);
        --${c[l-2]};`}else f=l,d=`
        ${u} sourceLocR = coords;
        ++${c[l-1]};
        ${u} sourceLocG = coords;
        ++${c[l-2]};
        ${u} sourceLocA = coords;
        --${c[l-1]};
        ${u} sourceLocB = coords;
        --${c[l-2]};`;const h=["x","y","z","w","u","v"].slice(0,f),p="."+h[f-1],g=h.map(S=>"int "+S),m=Ao("sourceLocR",f-1).concat("inIdx.r"),v=Ao("sourceLocG",f-1).concat("inIdx.g"),b=Ao("sourceLocB",f-1).concat("inIdx.b"),$=Ao("sourceLocA",f-1).concat("inIdx.a"),y=s==="max"?"greaterThan":"lessThan",w=o?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),
                             getBestIndicesAChannel(${v.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${$.join()})));`,C=`vec4(
            getAChannel(${m.join()}),
            hasNextCol ? getAChannel(${v.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${$.join()}) : 0.)`,x=o?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${x}
      void main() {
        ${u} coords = getOutputCoords();
        bool hasNextCol = ${c[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${c[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${y}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NW(e,t,n,s=null){let o=t.shape[0],r=t.shape[1];s!=null&&(o=s.shape[0],r=s.shape[1]);const i=e1(r),a={windowSize:i,inSize:r,batchSize:o,outSize:Math.ceil(r/i)},l=new cKe(a,n,s==null),u=[t];s!=null&&u.push(s);const c=e.runWebGLProgram(l,u,"int32");if(c.shape[1]===1)return c;const d=NW(e,t,n,c);return e.disposeIntermediateTensorInfo(c),d}function AW(e,t,n,s=null){const o=s!=null?s.shape:t.shape,r=o[o.length-1],i=e1(r),a=new dKe(o,i,n,s==null),l=s==null?[t]:[t,s],u=e.runWebGLProgram(a,l,"int32");if(u.shape.length===t.shape.length){const c=AW(e,t,n,u);return e.disposeIntermediateTensorInfo(u),c}return u}function DW(e,t,n,s){const o=[n];if(ho("arg"+s.charAt(0).toUpperCase()+s.slice(1),o,t.shape.length),!Ye().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const r=[],i=e.texData.get(t.dataId),a=i!==null&&i.isPacked;let l=t;a&&(l=e.unpackTensor(t),r.push(l));const[u,c]=eo(l.shape,o),d=qe(c),f=$t({inputs:{x:l},backend:e,attrs:{shape:[-1,d]}});r.push(f);const h=NW(e,f,s);r.push(h);const p=$t({inputs:{x:h},backend:e,attrs:{shape:u}});return r.forEach(g=>e.disposeIntermediateTensorInfo(g)),p}return AW(e,t,s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;let i=fn(r,o.shape);const a=Ts(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Mo({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Ms(i.length,l.shape.length)),ho("argMax",[i[0]],l.shape.length);const c=DW(n,l,i[0],"max");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const hKe={kernelName:Hb,backendName:"webgl",kernelFunc:fKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r}=s;let i=fn(r,o.shape);const a=Ts(i,o.shape.length);let l=o;const u=[];a!=null&&(l=Mo({inputs:{x:o},backend:n,attrs:{perm:a}}),u.push(l),i=Ms(i.length,l.shape.length)),ho("argMin",[i[0]],l.shape.length);const c=DW(n,l,i[0],"min");return u.forEach(d=>n.disposeIntermediateTensorInfo(d)),c}const gKe={kernelName:Ub,backendName:"webgl",kernelFunc:pKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mKe=ii+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,vKe=Nn({opSnippet:mKe}),bKe={kernelName:Yp,backendName:"webgl",kernelFunc:vKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yKe=ii+"return log(x + sqrt(x * x + 1.0));",wKe=Nn({opSnippet:yKe}),$Ke={kernelName:Xp,backendName:"webgl",kernelFunc:wKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CKe=ii+`
  return atan(x);
`,xKe=Nn({opSnippet:CKe}),kKe={kernelName:Zp,backendName:"webgl",kernelFunc:xKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SKe=DGe+`
  return atan(a, b);
`,IKe=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+RGe+`
  return result;
`,EKe=po({opSnippet:SKe,packedOpSnippet:IKe}),TKe={kernelName:Qp,backendName:"webgl",kernelFunc:EKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ke=ii+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,NKe=Nn({opSnippet:_Ke}),AKe={kernelName:Jp,backendName:"webgl",kernelFunc:NKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bp{constructor(t,n,s,o=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=t.filterWidth,a=t.strideHeight,l=t.strideWidth,u=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,h=t.padInfo.top,p=t.padInfo.left;this.outputShape=t.outShape;const g=n==="avg",m=`((batch  * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + d`,v=`(xR * ${t.inWidth} + xC) * ${t.inChannels} + d`;let b="0.0";if(g||(b="-1.0 / 1e-20"),s){const S=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${u}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f};
                wC += ${c}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${S} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${o?r?m:v:`wR * ${f} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const $="max";let y=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(y="avgValue / count");const w=Math.floor(i/4)*4,C=i%4,x=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${$}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${p});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${u}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${c};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              getValue(batch, xR, xC + 3 * ${c}, d)
            );

            ${x}
          }

          int xC = xCCorner + ${w};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${x}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              initializationValue,
              initializationValue
            );

            ${x}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${c}, d),
              getValue(batch, xR, xC + 2 * ${c}, d),
              initializationValue
            );

            ${x}
          }
        }
        setOutput(${y});
      }
    `}}class gE{constructor(t,n,s,o=!1,r=!1){if(this.variableNames=["x"],n==="avg"&&s)throw new Error("Cannot compute positions for average pool.");const i=t.filterWidth,a=t.strideDepth,l=t.strideHeight,u=t.strideWidth,c=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,h=t.effectiveFilterDepth,p=t.effectiveFilterHeight,g=t.effectiveFilterWidth,m=t.padInfo.front,v=t.padInfo.top,b=t.padInfo.left;this.outputShape=t.outShape;const $=n==="avg";let y="0.0";if($||(y="-1.0 / 1e-20"),s){const I=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${u});
        const ivec3 pads = ivec3(${m}, ${v}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${c}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${t.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${f}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${I} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${o?r?`(((batch * ${t.inDepth} + xD) * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`((xD * ${t.inHeight} + xR) * ${t.inWidth} + xC) * ${t.inChannels} + ch`:`wD * ${p} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const w="max";let C=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(C="avgValue / count");const x=Math.floor(i/4)*4,S=i%4,T=`
      if (${$}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${u});
      const ivec3 pads = ivec3(${m}, ${v}, ${b});
      const float initializationValue = ${y};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${t.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${y});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${c}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${x}; wC += 4) {
              int xC = xCCorner + wC * ${f};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                getValue(batch, xD, xR, xC + 3 * ${f}, ch)
              );

              ${T}
            }

            int xC = xCCorner + ${x};
            if (${S===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${S===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                initializationValue,
                initializationValue
              );

              ${T}
            } else if (${S===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${f}, ch),
                getValue(batch, xD, xR, xC + 2 * ${f}, ch),
                initializationValue
              );

              ${T}
            }
          }
          setOutput(${C});
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;am(o,"avgPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,u=1;J(Eo(i,u),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=si(o.shape,r,i,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&Pn(c.inShape,c.outShape))return ir({inputs:{x:o},backend:n});const d=new bp(c,"avg",!1);return n.runWebGLProgram(d,[o],"float32")}const RKe={kernelName:jb,backendName:"webgl",kernelFunc:DKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MKe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:i,pad:a,dimRoundingMode:l,dataFormat:u}=s,c=[1,1,1],d=Pa(o.shape,r,i,c,a,l,u),f=new gE(d,"avg",!1);return n.runWebGLProgram(f,[o],"float32")}const OKe={kernelName:Gb,backendName:"webgl",kernelFunc:MKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FKe{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterHeight,s=t.filterWidth,o=t.strideHeight,r=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,l=t.effectiveFilterHeight,u=t.effectiveFilterWidth,c=l-1-t.padInfo.top,d=u-1-t.padInfo.left,f=1/(n*s);this.userCode=`
      const ivec2 pads = ivec2(${c}, ${d});
      const float avgMultiplier = float(${f});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${i}) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${u};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class PKe{constructor(t){this.variableNames=["dy"],this.outputShape=t.inShape;const n=t.filterDepth,s=t.filterHeight,o=t.filterWidth,r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=d-1-t.padInfo.front,g=f-1-t.padInfo.top,m=h-1-t.padInfo.left,v=1/(n*s*o);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${g}, ${m});
      const float avgMultiplier = float(${v});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${r}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${f};
              wR += ${u}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${c}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LKe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,i=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=s,d=[1,1,1],f=Pa(i.shape,a,l,d,u,c),h=new PKe(f);return n.runWebGLProgram(h,[o],i.dtype)}const BKe={kernelName:Dk,backendName:"webgl",kernelFunc:LKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zKe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,i=r;am([o,r],"avgPoolGrad");const{filterSize:a,strides:l,pad:u}=s,c=si(i.shape,a,l,1,u),d=new FKe(c);return n.runWebGLProgram(d,[o],i.dtype)}const VKe={kernelName:Ak,backendName:"webgl",kernelFunc:zKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WKe(e){const{inputs:t,backend:n,attrs:s}=e,{a:o,b:r}=t,{transposeA:i,transposeB:a}=s;return X0({a:o,b:r,transposeA:i,transposeB:a,backend:n})}const HKe={kernelName:Kb,backendName:"webgl",kernelFunc:WKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UKe{constructor(t,n,s,o,r,i){this.outputShape=[],this.variableNames=["x","mean","variance"],rn(t,n),rn(t,s);let a="0.0";o!=null&&(rn(t,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";r!=null&&(rn(t,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${i}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jKe{constructor(t,n,s,o,r,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],rn(t,n),rn(t,s);let a="vec4(0.0)";o!=null&&(rn(t,o),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";r!=null&&(rn(t,r),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=t,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${i}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GKe=({inputs:e,backend:t,attrs:n})=>{const{x:s,mean:o,variance:r,offset:i,scale:a}=e;J(o.shape.length===r.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),J(i==null||o.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),J(a==null||o.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const u=[s,o,r];let c=null;i!=null&&(c=i.shape,u.push(i));let d=null;a!=null&&(d=a.shape,u.push(a));const f=Ye().getBool("WEBGL_PACK_NORMALIZATION")?new jKe(s.shape,o.shape,r.shape,c,d,l):new UKe(s.shape,o.shape,r.shape,c,d,l);return t.runWebGLProgram(f,u,u[0].dtype)},KKe={kernelName:ry,backendName:"webgl",kernelFunc:GKe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qKe{constructor(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;const n=Xn(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const s=YKe(this.rank);let o;const r=t.map((i,a)=>`sourceLoc.${Dx[a]} = start[${a}] + coords.${Dx[a]};`);o=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${r.join(`
`)}
      `,this.userCode=`
      void main() {
        ${o}
        setOutput(getSource(${s}));
      }
    `}}const Dx=["x","y","z","w","u","v"];function YKe(e){if(e===1)return"sourceLoc";if(e<=6)return Dx.slice(0,e).map(t=>"sourceLoc."+t).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XKe{constructor(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=Xn(this.rank),s=Ao("coords",this.rank),o=Ao("sourceLoc",this.rank),r=this.rank===1?"sourceLoc":`vec2(${o.slice(-2).join()})`,i=`getChannel(getSource(${o.join()}), ${r})`,a=`
      result.x = ${i};
      if (++${s[this.rank-1]} < ${t[this.rank-1]}) {
        ++${o[this.rank-1]};
        result.y = ${i};
        --${o[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${s[this.rank-1]};
      if (++${s[this.rank-2]} < ${t[this.rank-2]}) {
        ++${o[this.rank-2]};
        result.z = ${i};
        if (++${s[this.rank-1]} < ${t[this.rank-1]}) {
          ++${o[this.rank-1]};
          result.w = ${i};
        }
      }
    `,u=this.rank<=4?`sourceLoc = coords +
            ${n}(${t.map((c,d)=>`start[${d}]`).join()});`:t.map((c,d)=>`${o[d]} = ${s[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${u}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZKe(e,t,n,s){const o=s.texData.get(e.dataId),r=s.makeTensorInfo(n,e.dtype),i=s.texData.get(r.dataId);Object.assign(i,o),i.refCount=1,i.shape=n,i.dtype=e.dtype;let a=ES(t,Ot(e.shape));o.slice&&(a+=o.slice.flatOffset),i.slice={flatOffset:a,origDataId:o.slice&&o.slice.origDataId||e.dataId};const l=s.dataRefCount.get(i.slice.origDataId)||1;return s.dataRefCount.set(i.slice.origDataId,l+1),r}function Tf(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,size:i}=s,[a,l]=Gy(o,r,i);if(kS(o,a,l),qe(l)===0)return n.makeTensorInfo(l,o.dtype,[]);if(n.shouldExecuteOnCPU([o])||o.dtype==="string"){const d=n.texData.get(o.dataId),f=Wje(d.values,a,l,o.shape,o.dtype);return n.makeTensorInfo(l,o.dtype,f)}const{isPacked:u}=n.texData.get(o.dataId),c=IS(o.shape,a,l);if(u||!c){const d=Ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XKe(l):new qKe(l),f=[a];return n.runWebGLProgram(d,[o],o.dtype,f)}return n.uploadToGPU(o.dataId),ZKe(o,a,l,n)}const JKe={kernelName:Ry,backendName:"webgl",kernelFunc:Tf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QKe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,crops:i}=s;J(o.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((b,$)=>b*$),l=Kg(o.shape,r,a),u=qg(l.length,r.length),c=Yg(o.shape,r,a),d=pI(i,r.length),f=gI(c,i,r.length),h=[],p=$t({inputs:{x:o},backend:n,attrs:{shape:l}}),g=Mo({inputs:{x:p},backend:n,attrs:{perm:u}}),m=$t({inputs:{x:g},backend:n,attrs:{shape:c}}),v=Tf({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return h.push(p),h.push(g),h.push(m),h.forEach(b=>n.disposeIntermediateTensorInfo(b)),v},e9e={kernelName:qb,backendName:"webgl",kernelFunc:QKe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:i}=s,a=n.readSync(o.dataId),l=n.readSync(r.dataId),u=bW(a,l,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,u)}const n9e={kernelName:Rk,backendName:"webgl",kernelFunc:t9e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s9e(e){const{inputs:t,backend:n}=e,{s0:s,s1:o}=t,r=n.readSync(s.dataId),i=n.readSync(o.dataId),a=rn(Array.from(r),Array.from(i));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const o9e={kernelName:PB,backendName:"webgl",kernelFunc:s9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r9e="return float(a != b);",RW=po({opSnippet:r9e,cpuKernelImpl:Pje,dtype:"bool"}),i9e={kernelName:Cy,backendName:"webgl",kernelFunc:RW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cm(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.texData.get(s.dataId);return ir({inputs:{x:o.complexTensorInfos.real},backend:n})}const a9e={kernelName:sS,backendName:"webgl",kernelFunc:cm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l9e="return float(int(x));";function u9e(e,t){const n=new ya(e.shape,l9e),s=t.runWebGLProgram(n,[e],"int32");return{dataId:s.dataId,shape:s.shape,dtype:s.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rx(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dtype:r}=s;if(r==="complex64"){if(o.dtype==="complex64")return ir({inputs:{x:o},backend:n});const i=Ys(o.shape),a=Rx({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),l=Hl({inputs:{real:a,imag:i},backend:n});return i.dispose(),n.disposeIntermediateTensorInfo(a),l}if(o.dtype==="complex64"){const i=cm({inputs:{input:o},backend:n}),a=Rx({inputs:{x:i},backend:n,attrs:{dtype:r}});return n.disposeIntermediateTensorInfo(i),a}if(!_B(o.dtype,r)){const i=ir({inputs:{x:o},backend:n});return{dataId:i.dataId,shape:i.shape,dtype:r}}if(r==="int32")return u9e(o,n);if(r==="bool"){const i=n.makeTensorInfo([],"bool",co("bool",1)),l=RW({inputs:{a:o,b:i},backend:n});return n.disposeIntermediateTensorInfo(i),l}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${r}`)}const c9e={kernelName:eg,backendName:"webgl",kernelFunc:Rx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eM="return ceil(x);",d9e=Nn({opSnippet:eM,packedOpSnippet:eM,cpuKernelImpl:bje}),f9e={kernelName:tg,backendName:"webgl",kernelFunc:d9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h9e{constructor(t){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class p9e{constructor(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function g9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{clipValueMin:r,clipValueMax:i}=s;let a;Ye().getBool("WEBGL_PACK_CLIP")?a=new p9e(o.shape):a=new h9e(o.shape);const l=[[r],[i]];return n.runWebGLProgram(a,[o],o.dtype,l)}const m9e={kernelName:ng,backendName:"webgl",kernelFunc:g9e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v9e{constructor(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tM(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}function b9e(e){const{inputs:t,backend:n}=e,{x:s}=t,o=n.texData.get(s.dataId),r=new v9e(s.shape),i=[tM(s,o.complexTensorInfos.real),tM(s,o.complexTensorInfos.imag)];return n.runWebGLProgram(r,i,i[0].dtype)}const y9e={kernelName:Yb,backendName:"webgl",kernelFunc:b9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w9e{constructor(t){this.outputShape=[],this.outputShape=Yi(t,1),this.variableNames=t.map((i,a)=>`T${a}`);const n=new Array(t.length-1);n[0]=t[0][1];for(let i=1;i<n.length;i++)n[i]=n[i-1]+t[i][1];const s=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let i=1;i<n.length;i++){const a=n[i-1];s.push(`else if (yC < ${n[i]}) setOutput(getT${i}(yR, yC-${a}));`)}const o=n.length,r=n[n.length-1];s.push(`else setOutput(getT${o}(yR, yC-${r}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${s.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class $9e{constructor(t,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Yi(t,n);const s=this.outputShape,o=s.length,r=Xn(o),i=Ao("coords",o),a=["x","y","z","w","u","v"].slice(0,o);this.variableNames=t.map((g,m)=>`T${m}`);const l=new Array(t.length-1);l[0]=t[0][n];for(let g=1;g<l.length;g++)l[g]=l[g-1]+t[g][n];const u=a[n],c=a.slice(-2),d=a.join();let f=`if (${u} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${c.join()}));
        }`;for(let g=1;g<l.length;g++){const m=l[g-1];f+=`
        if (${u} < ${l[g]}  && ${u} >= ${l[g-1]}) {
          return getChannel(
            getT${g}(${lv(a,u,m)}),
            vec2(${lv(c,u,m)}));
        }`}const h=l.length,p=l[l.length-1];f+=`
        return getChannel(
          getT${h}(${lv(a,u,p)}),
          vec2(${lv(c,u,p)}));`,this.userCode=`
      float getValue(${a.map(g=>"int "+g)}) {
        ${f}
      }

      void main() {
        ${r} coords = getOutputCoords();
        vec4 result = vec4(getValue(${i}), 0., 0., 0.);

        ${i[o-1]} = ${i[o-1]} + 1;
        if (${i[o-1]} < ${s[o-1]}) {
          result.g = getValue(${i});
        }

        ${i[o-2]} = ${i[o-2]} + 1;
        if (${i[o-2]} < ${s[o-2]}) {
          result.a = getValue(${i});
        }

        ${i[o-1]} = ${i[o-1]} - 1;
        if (${i[o-2]} < ${s[o-2]} &&
            ${i[o-1]} < ${s[o-1]}) {
          result.b = getValue(${i});
        }
        setOutput(result);
      }
    `}}function lv(e,t,n){const s=e.indexOf(t);return e.map((r,i)=>i===s?`${r} - ${n}`:r).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C1(e){const{inputs:t,backend:n}=e,{input:s}=t,o=n.texData.get(s.dataId);return ir({inputs:{x:o.complexTensorInfos.imag},backend:n})}const C9e={kernelName:Kk,backendName:"webgl",kernelFunc:C1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sd(e,t,n){const s=e[0].dtype;if(s==="complex64"){const c=e.map(g=>cm({inputs:{input:g},backend:n})),d=e.map(g=>C1({inputs:{input:g},backend:n})),f=sd(c,t,n),h=sd(d,t,n),p=Hl({inputs:{real:f,imag:h},backend:n});return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),d.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}let o=n.shouldExecuteOnCPU(e);if(s==="string"&&(o=!0),o){const c=e.map(v=>{const b=qe(v.shape.slice(t));return $t({inputs:{x:v},backend:n,attrs:{shape:[-1,b]}})}),d=c.map(v=>({vals:n.readSync(v.dataId),shape:v.shape})),f=Yi(c.map(v=>v.shape),1),h=c[0].shape[0]===1,p=yje(d,f,s,h),g=Yi(e.map(v=>v.shape),t),m=n.makeTensorInfo(g,s,p);return c.forEach(v=>n.disposeIntermediateTensorInfo(v)),m}if(e.length>Ye().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const c=Math.floor(e.length/2),d=sd(e.slice(0,c),t,n),f=sd(e.slice(c),t,n),h=sd([d,f],t,n);return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),h}if(Ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const c=new $9e(e.map(d=>d.shape),t);return n.runWebGLProgram(c,e,s)}const{tensors2D:r,outShape:i}=x9e(e,t,n),a=new w9e(r.map(c=>c.shape)),l=n.runWebGLProgram(a,r,s);r.forEach(c=>n.disposeIntermediateTensorInfo(c));const u=$t({inputs:{x:l},attrs:{shape:i},backend:n});return n.disposeIntermediateTensorInfo(l),u}function x9e(e,t,n){const s=Yi(e.map(r=>r.shape),t);return{tensors2D:e.map(r=>$t({inputs:{x:r},attrs:{shape:[-1,qe(r.shape.slice(t))]},backend:n})),outShape:s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MW(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s,r=fn(o,t[0].shape)[0],i=Yi(t.map(u=>u.shape),r);if(qe(i)===0)return n.makeTensorInfo(i,t[0].dtype,[]);const a=t.filter(u=>qe(u.shape)>0);if(a.length===1)return ir({inputs:{x:a[0]},backend:n});const l=a.map(u=>u.shape);return dI(l,r),sd(a,r,n)}const k9e={kernelName:Xb,backendName:"webgl",kernelFunc:MW};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OW{constructor(t,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.outputShape=t.outShape;const i=t.padInfo.top,a=t.padInfo.left,l=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,h=t.filterWidth,p=Math.floor(t.inChannels/4)*4,g=t.inChannels%4,m=t.dataFormat==="channelsLast",v=m?1:2,b=m?2:3,$=m?3:1;let y="",w="";s&&(o?y=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?y=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:y=`
          float activation(float x) {
            ${s}
          }
        `,w="result = activation(result);");const C=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${y}

      const ivec2 strides = ivec2(${l}, ${u});
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${$}];

        ivec2 xRCCorner =
            ivec2(coords[${v}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${f}; wR++) {
          int xR = xRCorner + wR * ${c};

          if (xR < 0 || xR >= ${t.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${t.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${m}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${m}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${m}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${m}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${w}
        setOutput(result);
      }
    `}}class S9e{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const n=t.padInfo.front,s=t.padInfo.top,o=t.padInfo.left,r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,l=t.dilationDepth,u=t.dilationHeight,c=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,h=t.filterWidth,p=Math.floor(t.inChannels/4)*4,g=t.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${r}, ${i}, ${a});
      const ivec3 pads = ivec3(${n}, ${s}, ${o});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${t.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${f}; wR++) {
            int xR = xRCorner + wR * ${u};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${c};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I9e{constructor(t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=jo(this.outputShape.length);const{dataFormat:s}=n,o=Oo(),r=s==="channelsLast",i=r?0:1,a=r?1:2,l=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":`if(blockIndex < ${t[1]} && pos < ${t[0]}) {`;let u="";for(let c=0;c<=1;c++)for(let d=0;d<=1;d++)u+=`
          blockIndex = rc.y + ${d};
          pos = rc.x + ${c};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${i}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${r}) {
                  innerDims = vec2(d1, ch);
                  result[${c*2+d}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${c*2+d}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${u}

        ${o.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FW({x:e,filter:t,convInfo:n,backend:s,bias:o=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:a=null}){const l=e.shape,u=s.texData.get(e.dataId),c=n.inChannels,d=l[0]*l[1]*l[2],f=n.outChannels,h=n.dataFormat==="channelsLast",p=!1,g=!1;let m;const v=[];if(!((d===1||f===1)&&c>_W)&&u.isPacked&&h&&u.texture!=null&&l[2]%2!==0&&Pn(u.shape.slice(-3),l.slice(-3))){const y=l[0]*l[1]*(l[2]+1),w={dataId:e.dataId,shape:[1,y,n.inChannels],dtype:e.dtype},C=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,J(Y0(u.shape,w.shape),()=>`packed reshape ${u.shape} to ${w.shape} isn't free`);const x=$t({inputs:{x:t},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}});v.push(x);const S=X0({a:w,b:x,backend:s,transposeA:p,transposeB:g,bias:o,activation:a,preluActivationWeights:r,leakyreluAlpha:i}),T=s.texData.get(S.dataId);J(T.isPacked,()=>"batchMatMul result is expected to be packed"),u.shape=C,T.shape=n.outShape,m=ir({inputs:{x:S},backend:s}),m.shape=n.outShape,v.push(S)}else{const y=h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],w=$t({inputs:{x:e},backend:s,attrs:{shape:[1,y,n.inChannels]}}),C=$t({inputs:{x:t},backend:s,attrs:{shape:[1,n.inChannels,n.outChannels]}}),x=X0({a:w,b:C,transposeA:p,transposeB:g,backend:s,bias:o,activation:a,preluActivationWeights:r,leakyreluAlpha:i});m=$t({inputs:{x},backend:s,attrs:{shape:n.outShape}}),v.push(w),v.push(C),v.push(x)}for(const y of v)s.disposeIntermediateTensorInfo(y);return m}function PW({x:e,filter:t,convInfo:n,backend:s,bias:o=null,preluActivationWeights:r=null,leakyreluAlpha:i=0,activation:a=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:d,outHeight:f,dataFormat:h}=n,p=h==="channelsLast",g=l*u*c,m=f*d,v=[g,m],b=!0,$=!1,y=[],w=$t({inputs:{x:e},backend:s,attrs:{shape:e.shape.slice(1)}}),C=$t({inputs:{x:t},backend:s,attrs:{shape:[1,g,qe(t.shape)/g]}});y.push(w),y.push(C);const x=new I9e(v,n),S=[w.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],T=s.runWebGLProgram(x,[w],"float32",S),I=$t({inputs:{x:T},backend:s,attrs:{shape:[1,v[0],v[1]]}});y.push(T),y.push(I);const _=o!=null,N=r!=null,D=a==="leakyrelu",F=a?y1(a,!0):null,P=new TW(I.shape,C.shape,[1,m,n.outChannels],b,$,_,F,N,D),M=[I,C];if(o&&M.push(o),N&&M.push(r),D){const ae=s.makeTensorInfo([],"float32",Ol(i,"float32"));M.push(ae),y.push(ae)}const B=s.runWebGLProgram(P,M,"float32"),j=p?[1,f,d,n.outChannels]:[1,n.outChannels,f,d],X=$t({inputs:{x:B},backend:s,attrs:{shape:j}});y.push(B);for(const ae of y)s.disposeIntermediateTensorInfo(ae);return X}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dataFormat:l,dilations:u,dimRoundingMode:c}=s,d=La(l),f=fo(o.shape,r.shape,i,u,a,c,!1,d);let h;if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))h=FW({x:o,filter:r,convInfo:f,backend:n});else if(Ye().getBool("WEBGL_CONV_IM2COL")&&o.shape[0]===1)h=PW({x:o,filter:r,convInfo:f,backend:n});else{const g=new OW(f);h=n.runWebGLProgram(g,[o,r],"float32")}const p=$t({inputs:{x:h},backend:n,attrs:{shape:f.outShape}});return n.disposeIntermediateTensorInfo(h),p}const T9e={kernelName:Zb,backendName:"webgl",kernelFunc:E9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _9e{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,s=t.strideWidth,o=t.padInfo.top,r=t.padInfo.left,i=t.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              if (${i}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class N9e{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,s=t.filterWidth,o=t.strideHeight,r=t.strideWidth,i=t.dataFormat==="channelsLast",a=n-1-t.padInfo.top,l=s-1-t.padInfo.left,u=i?1:2,c=i?2:3,d=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${u}], coords[${c}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            for (int d2 = 0; d2 < ${t.outChannels}; d2++) {

              if (${i}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class A9e{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideDepth,s=t.strideHeight,o=t.strideWidth,r=t.padInfo.front,i=t.padInfo.top,a=t.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yF = 0; yF < ${t.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${r};

            if (xF < 0 || xF >= ${t.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${t.outHeight}; yR++) {
              int xR = wR + yR * ${s} - ${i};

              if (xR < 0 || xR >= ${t.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${t.outWidth}; yC++) {
                int xC = wC + yC * ${o} - ${a};

                if (xC < 0 || xC >= ${t.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class D9e{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterDepth,s=t.filterHeight,o=t.filterWidth,r=t.strideDepth,i=t.strideHeight,a=t.strideWidth,l=n-1-t.padInfo.front,u=s-1-t.padInfo.top,c=o-1-t.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${u}, ${c});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${r}.0;

          if (dyF < 0.0 || dyF >= ${t.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${s}; wR++) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${s} - 1 - wR;

            for (int wC = 0; wC < ${o}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${o} - 1 - wC;

              for (int d2 = 0; d2 < ${t.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,pad:a,dataFormat:l,dimRoundingMode:u,filterShape:c}=s,d=La(l),f=fo(o.shape,c,i,1,a,u,!1,d),h=new _9e(f);return n.runWebGLProgram(h,[o,r],"float32")}const M9e={kernelName:Ok,backendName:"webgl",kernelFunc:R9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O9e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{inputShape:i,strides:a,pad:l,dataFormat:u,dimRoundingMode:c}=s,d=La(u),f=fo(i,r.shape,a,1,l,c,!1,d),h=new N9e(f);return n.runWebGLProgram(h,[o,r],"float32")}const F9e={kernelName:Jb,backendName:"webgl",kernelFunc:O9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l}=s,u=Fl(o.shape,r.shape,i,l,a),c=new S9e(u);return n.runWebGLProgram(c,[o,r],"float32")}const L9e={kernelName:Qb,backendName:"webgl",kernelFunc:P9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,pad:a,filterShape:l}=s,u=Fl(o.shape,l,i,1,a),c=new A9e(u);return n.runWebGLProgram(c,[o,r],"float32")}const z9e={kernelName:Fk,backendName:"webgl",kernelFunc:B9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V9e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{pad:i,strides:a,inputShape:l}=s,u=Fl(l,r.shape,a,1,i),c=new D9e(u);return n.runWebGLProgram(c,[o,r],"float32")}const W9e={kernelName:Pk,backendName:"webgl",kernelFunc:V9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const H9e=Ef+`
  return cos(x);
`,U9e=Nn({opSnippet:H9e}),j9e={kernelName:sg,backendName:"webgl",kernelFunc:U9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G9e=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,K9e=Nn({opSnippet:G9e}),q9e={kernelName:og,backendName:"webgl",kernelFunc:K9e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Y9e{constructor(t,n,s,o,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[i,a,l,u]=t,[c]=n,[d,f]=s;this.outputShape=[c,d,f,u];const h=o==="bilinear"?1:0,[p,g]=[`${a-1}.0`,`${l-1}.0`],[m,v,b]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[$,y,w]=f>1?[`${(l-1)/(f-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${m});
      const float width_ratio = float(${$});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${i}) {
          return;
        }

        float height_scale = ${v};
        float width_scale = ${y};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${r}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${r}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X9e=e=>{const{inputs:t,backend:n,attrs:s}=e,{image:o,boxes:r,boxInd:i}=t,{cropSize:a,method:l,extrapolationValue:u}=s,c=new Y9e(o.shape,r.shape,a,l,u);return n.runWebGLProgram(c,[o,r,i],"float32")},Z9e={kernelName:Lk,backendName:"webgl",kernelFunc:X9e};class nM{constructor(t,n,s){this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;const o=t.length,r=n?"0.0":`getX(${sM(o,"coords")})`,i=t[t.length-1];let a="",l="";n?(a=s?`end != ${i-1}`:"end != 0",l=s?"end + 1":"end - 1"):(a=s?`end + pow2 < ${i}`:"end >= pow2",l=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${Xn(o)} coords = getOutputCoords();
        int end = ${oM(o,"coords")};
        float val = ${r};
        int pow2 = int(pow(2.0, index));
        if (${a}) {
          int idx = ${l};
          ${oM(o,"coords")} = idx;
          val += getX(${sM(o,"coords")});
        }
        setOutput(val);
      }
    `}}function sM(e,t){if(e===1)return`${t}`;if(e===2)return`${t}.x, ${t}.y`;if(e===3)return`${t}.x, ${t}.y, ${t}.z`;if(e===4)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function oM(e,t){if(e===1)return`${t}`;if(e===2)return`${t}.y`;if(e===3)return`${t}.z`;if(e===4)return`${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,exclusive:i,reverse:a}=s,l=o.shape.length,u=Ts([r],l);let c=o;u!=null&&(c=Mo({inputs:{x:o},backend:n,attrs:{perm:u}}));const d=Ms(1,l)[0];if(d!==l-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${o.shape.length-1} but got axis=${r}`);const f=c.shape[d];let h=ir({inputs:{x:c},backend:n});for(let p=0;p<=Math.ceil(Math.log2(f))-1;p++){const g=new nM(c.shape,!1,a),m=[[p]],v=h;h=n.runWebGLProgram(g,[h],h.dtype,m),n.disposeIntermediateTensorInfo(v)}if(i){const p=new nM(c.shape,i,a),g=h;h=n.runWebGLProgram(p,[h],h.dtype),n.disposeIntermediateTensorInfo(g)}if(u!=null){const p=vf(u),g=Mo({inputs:{x:h},backend:n,attrs:{perm:p}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),g}return h}const Q9e={kernelName:ey,backendName:"webgl",kernelFunc:J9e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,weights:r}=t,{size:i,binaryOutput:a}=s;if(o.shape.length===1){const l=n.readSync(o.dataId),u=n.readSync(r.dataId),c=bW(l,u,r.dtype,r.shape,i);return n.makeTensorInfo([i],r.dtype,c)}else if(o.shape.length===2){const l=n.bufferSync(o),u=n.bufferSync(r),c=vje(l,u,i,a);return n.makeTensorInfo(c.shape,r.dtype,c.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${o.shape.length}.`)}const t7e={kernelName:LB,backendName:"webgl",kernelFunc:e7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n7e{constructor(t,n,s){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=s,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s7e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockSize:r,dataFormat:i}=s,a=o.shape[0],l=i==="NHWC"?o.shape[1]:o.shape[2],u=i==="NHWC"?o.shape[2]:o.shape[3],c=i==="NHWC"?o.shape[3]:o.shape[1],d=l*r,f=u*r,h=c/(r*r),p=i==="NHWC"?[a,d,f,h]:[a,h,d,f],g=new n7e(p,r,i);return n.runWebGLProgram(g,[o],o.dtype)}const o7e={kernelName:Bk,backendName:"webgl",kernelFunc:s7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LW{constructor(t,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=jo(this.outputShape.length);const i=t.filterHeight,a=t.filterWidth,l=t.outChannels/t.inChannels;let u="",c="";s&&(o?u=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?u=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:u=`
          float activation(float x) {
            ${s}
          }
        `,c="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${u}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${i}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${c}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BW{constructor(t,n=!1,s=null,o=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=jo(this.outputShape.length);const i=t.outChannels/t.inChannels,a=t.padInfo.left,l=t.strideWidth,u=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,f=d;let h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let v=0;v<d;v++)h+=`
          vec4 xTexelC${v*2};
          int xTexelC${v*2}Ready;
          vec4 xTexelC${v*2+1};
          int xTexelC${v*2+1}Ready;
          vec4 xC${v};`;h+=`
    for (int r = 0; r < ${c}; r++) {
      `;for(let v=0;v<d;v++)h+=`
          xTexelC${v*2} = vec4(0.0);
          xTexelC${v*2}Ready = 0;
          xTexelC${v*2+1} = vec4(0.0);
          xTexelC${v*2+1}Ready = 0;
          xC${v} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let v=0;v<(f+1)/2;v++){const b=v*2;if(h+=`
          xC = xCCorner + ${b*u};
          `,l===1){if(b<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,u===1&&b>0?h+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<d)){const $=a%2===0?IB(u):u;u%2===0&&a%2===1||u%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${$};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,u>1&&(h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                      xTexelC${b} = getX(batch, xR, xCOffset, d1);
                      xTexelC${b}Ready = 1;
                    }
                    `),h+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                  `):$===1?h+=`
                    xC${b+1} = xTexelC${b};
                    `:h+=`
                    xCOffset = xC + ${$};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<d&&(h+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<d&&(h+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<d&&(h+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let p="",g="";s&&(o?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${s}
        }`:r?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${s}
        }`:p=`vec4 activation(vec4 x) {
          ${s}
        }`,g="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${i};
        int q = d2 - d1 * ${i};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${m}
        ${g}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r7e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l,dimRoundingMode:u}=s;let c=l;c==null&&(c=[1,1]),J(Eo(i,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const d=fo(o.shape,r.shape,i,c,a,u,!0);let f;Ye().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?f=new BW(d):f=new LW(d);const h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(f,[o,r],"float32",h)}const i7e={kernelName:ty,backendName:"webgl",kernelFunc:r7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class a7e{constructor(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;const n=t.strideHeight,s=t.strideWidth,o=t.padInfo.top,r=t.padInfo.left,i=t.outChannels/t.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${i} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${t.batchSize}; b++) {
          for (int yR = 0; yR < ${t.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${o};

            if (xR < 0 || xR >= ${t.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${t.outWidth}; yC++) {
              int xC = wC + yC * ${s} - ${r};

              if (xC < 0 || xC >= ${t.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class l7e{constructor(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;const n=t.filterHeight,s=t.filterWidth,o=t.strideHeight,r=t.strideWidth,i=n-1-t.padInfo.top,a=s-1-t.padInfo.left,l=t.outChannels/t.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${i}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${o}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${s} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u7e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,dy:r}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:u,filterShape:c}=s,d=fo(o.shape,c,i,a,l,u,!0),f=new a7e(d);return n.runWebGLProgram(f,[o,r],"float32")}const c7e={kernelName:zk,backendName:"webgl",kernelFunc:u7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d7e(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,filter:r}=t,{strides:i,dilations:a,pad:l,dimRoundingMode:u,inputShape:c}=s,d=fo(c,r.shape,i,a,l,u,!0),f=new l7e(d);return n.runWebGLProgram(f,[o,r],"float32")}const f7e={kernelName:Vk,backendName:"webgl",kernelFunc:d7e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h7e{constructor(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p7e(e){const{inputs:t,backend:n}=e,{x:s}=t,o=[...s.shape,...s.shape],r=qe(s.shape),i=$t({inputs:{x:s},backend:n,attrs:{shape:[r]}}),a=new h7e(r),l=n.runWebGLProgram(a,[i],i.dtype),u=$t({inputs:{x:l},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(l),u}const g7e={kernelName:BB,backendName:"webgl",kernelFunc:p7e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class m7e{constructor(t){this.variableNames=["x","W"],this.outputShape=t.outShape;const{inHeight:n,inWidth:s,padInfo:o,strideHeight:r,strideWidth:i,filterHeight:a,filterWidth:l,dilationHeight:u,dilationWidth:c}=t,{top:d,left:f}=o;this.userCode=`
      const ivec2 strides = ivec2(${r}, ${i});
      const ivec2 pads = ivec2(${d}, ${f});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${u};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${c};

              if (wIn >= 0 && wIn < ${s}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v7e(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r}=t,{strides:i,pad:a,dilations:l}=s,u=Hg(o.shape,r.shape,i,a,"NHWC",l);let c;const d=new m7e(u);c=n.runWebGLProgram(d,[o,r],"float32");const f=$t({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),f}const b7e={kernelName:ny,backendName:"webgl",kernelFunc:v7e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y7e(e){const{inputs:t,backend:n,attrs:s}=e,{equation:o}=s,r=t,{allDims:i,summedDims:a,idDims:l}=xI(o,r.length);SI(i.length,l,r);const{path:u,steps:c}=II(a,l),d=c.length;let f=null,h=i.length;const p=[];for(let g=0;g<d;++g){for(const m of c[g]){const{permutationIndices:v,expandDims:b}=kI(h,l[m]);let $;EI(v)?$=r[m]:($=Mo({inputs:{x:r[m]},backend:n,attrs:{perm:v}}),p.push($));const y=$.shape.slice();for(let w=0;w<b.length;++w)y.splice(b[w],0,1);Pn($.shape,y)||($=$t({inputs:{x:$},backend:n,attrs:{shape:y}}),p.push($)),f===null?f=$:(f=pE({inputs:{a:$,b:f},backend:n}),p.push(f))}g<d-1&&(u[g]>=0&&(f=$1({inputs:{x:f},backend:n,attrs:{axis:u[g]-(i.length-h),keepDims:!1}}),p.push(f)),h--)}for(const g of p)g!==f&&n.disposeIntermediateTensorInfo(g);return f}const w7e={kernelName:zB,backendName:"webgl",kernelFunc:y7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $7e="return (x >= 0.0) ? x : (exp(x) - 1.0);",C7e=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,x7e=Nn({opSnippet:$7e,packedOpSnippet:C7e}),k7e={kernelName:ig,backendName:"webgl",kernelFunc:x7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const S7e="return (b >= 1.0) ? a : a * (b + 1.0);",I7e=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,E7e=e=>{const{inputs:t,backend:n}=e,{dy:s,y:o}=t,r=Ye().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new um(I7e,s.shape,o.shape):new Kd(S7e,s.shape,o.shape);return n.runWebGLProgram(r,[s,o],s.dtype)},T7e={kernelName:Wk,backendName:"webgl",kernelFunc:E7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _7e=`
  return vec4(equal(a, b));
`,N7e="return float(a == b);",A7e=po({opSnippet:N7e,packedOpSnippet:_7e,dtype:"bool",cpuKernelImpl:wje}),D7e={kernelName:sy,backendName:"webgl",kernelFunc:A7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const R7e=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${mI};
  float a1 = ${vI};
  float a2 = ${bI};
  float a3 = ${yI};
  float a4 = ${wI};
  float a5 = ${$I};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,M7e=Nn({opSnippet:R7e}),O7e={kernelName:ag,backendName:"webgl",kernelFunc:M7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F7e=Ef+`
  return exp(x);
`,P7e=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,zW=Nn({opSnippet:F7e,packedOpSnippet:P7e,cpuKernelImpl:$je,dtype:"float32"}),L7e={kernelName:lg,backendName:"webgl",kernelFunc:zW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mx(e){const{inputs:t,attrs:n,backend:s}=e,{dim:o}=n,{input:r}=t,i=r.shape.length,a=r.shape.slice();let l=o;return o<0&&(J(-(i+1)<=o,()=>`Axis must be in the interval [${-(i+1)}, ${i}]`),l=i+o+1),a.splice(l,0,1),$t({inputs:{x:r},backend:s,attrs:{shape:a}})}const B7e={kernelName:oy,backendName:"webgl",kernelFunc:Mx};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rM="return exp(x) - 1.0;",z7e=Nn({opSnippet:rM,packedOpSnippet:rM,cpuKernelImpl:Cje}),V7e={kernelName:ug,backendName:"webgl",kernelFunc:z7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iM{constructor(t,n,s){this.variableNames=["real","imag"];const o=n[1];this.outputShape=n;const r=s?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,i=s?`${o}.0`:"1.0";let a;if(t==="real")a="return real * expR - imag * expI;";else if(t==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${t}.`);this.userCode=`
      const float exponentMultiplier = ${r};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${o});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${o}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${i};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VW(e,t,n){const s=n.texData.get(e.dataId),o=qe(e.shape),r=e.shape[e.shape.length-1],i=o/r,a=$t({inputs:{x:e},backend:n,attrs:{shape:[i,r]}}),l=a.shape,u=new iM("real",l,t),c=new iM("imag",l,t),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:l},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:l}],f=n.runWebGLProgram(u,d,"float32"),h=n.runWebGLProgram(c,d,"float32"),p=Hl({inputs:{real:f,imag:h},backend:n});n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h);const g=$t({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W7e(e){const{inputs:t,backend:n}=e,{input:s}=t;return VW(s,!1,n)}const H7e={kernelName:Hk,backendName:"webgl",kernelFunc:W7e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class U7e{constructor(t,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dm(e){const{backend:t,attrs:n}=e,{shape:s,value:o}=n;let{dtype:r}=n;if(r=r||jp(o),r==="string"){const i=Vo(r,qe(s));return i.fill(o),t.makeTensorInfo(s,r,i)}else{const i=new U7e(s,o),a=[[o]];return t.runWebGLProgram(i,[],r,a)}}const j7e={kernelName:Uk,backendName:"webgl",kernelFunc:dm};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G7e{constructor(t){this.variableNames=["Image"],this.outputShape=[];const n=t[2];this.outputShape=t,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const K7e={kernelName:jk,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,s=t,o=new G7e(n.shape);return s.runWebGLProgram(o,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aM="return floor(x);",q7e=Nn({opSnippet:aM,packedOpSnippet:aM,cpuKernelImpl:xje}),Y7e={kernelName:cg,backendName:"webgl",kernelFunc:q7e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const X7e=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,Z7e=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,J7e=po({opSnippet:X7e,packedOpSnippet:Z7e,dtype:"int32"}),Q7e={kernelName:dg,backendName:"webgl",kernelFunc:J7e};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eqe{constructor(t){this.variableNames=["A"];const n=Oo(),[s,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}.0, ${s}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tqe{constructor(t){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Oo(),[s,o]=t;this.outputShape=t,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${o}.0, ${s}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nqe={kernelName:HAe,backendName:"webgl",kernelFunc:sqe};let Kc;function sqe(e){const{inputs:t,backend:n,attrs:s}=e;let{pixels:o}=t;const{numChannels:r}=s,i=typeof HTMLVideoElement!="undefined"&&o instanceof HTMLVideoElement,a=typeof HTMLImageElement!="undefined"&&o instanceof HTMLImageElement,[l,u]=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=[u,l],d=[u,l,r];(a||i)&&(Kc==null&&(Kc=document.createElement("canvas").getContext("2d")),Kc.canvas.width=l,Kc.canvas.height=u,Kc.drawImage(o,0,0,l,u),o=Kc.canvas);const f=n.makeTensorInfo(c,"int32");n.texData.get(f.dataId).usage=wr.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),o);const h=Ye().getBool("WEBGL_PACK")?new tqe(d):new eqe(d),p=n.runWebGLProgram(h,[f],"int32");return n.disposeData(f.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oqe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:i,preluActivationWeights:a}=t,{strides:l,pad:u,dataFormat:c,dilations:d,dimRoundingMode:f,activation:h,leakyreluAlpha:p}=s,g=La(c),m=fo(o.shape,r.shape,l,d,u,f,!1,g);let v;const b=[];if(m.filterHeight===1&&m.filterWidth===1&&m.dilationHeight===1&&m.dilationWidth===1&&m.strideHeight===1&&m.strideWidth===1&&(m.padInfo.type==="SAME"||m.padInfo.type==="VALID"))v=FW({x:o,filter:r,convInfo:m,backend:n,bias:i,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else if(Ye().getBool("WEBGL_CONV_IM2COL")&&o.shape[0]===1)v=PW({x:o,filter:r,convInfo:m,backend:n,bias:i,activation:h,preluActivationWeights:a,leakyreluAlpha:p});else{const y=i!=null,w=a!=null,C=h==="leakyrelu",x=h?y1(h,!1):null,S=new OW(m,y,x,w,C),T=[o,r];if(i&&T.push(i),a&&T.push(a),C){const I=n.makeTensorInfo([],"float32",Ol(p,"float32"));T.push(I),b.push(I)}v=n.runWebGLProgram(S,T,"float32")}const $=$t({inputs:{x:v},backend:n,attrs:{shape:m.outShape}});return b.push(v),b.forEach(y=>n.disposeIntermediateTensorInfo(y)),$}const rqe={kernelName:D0,backendName:"webgl",kernelFunc:oqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iqe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,filter:r,bias:i,preluActivationWeights:a}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:d,activation:f,leakyreluAlpha:h}=s,p=[];let g=c;g==null&&(g=[1,1]),J(Eo(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);const m=fo(o.shape,r.shape,l,g,u,d,!0),v=Ye().getBool("WEBGL_PACK_DEPTHWISECONV")&&m.strideWidth<=2&&m.outChannels/m.inChannels===1,b=f?y1(f,v):null,$=[o,r],y=i!=null,w=a!=null,C=f==="leakyrelu";if(y&&$.push(i),w&&$.push(a),C){const I=n.makeTensorInfo([],"float32",Ol(h,"float32"));$.push(I),p.push(I)}let x;v?x=new BW(m,y,b,w,C):x=new LW(m,y,b,w,C);const S=[[m.padInfo.top,m.padInfo.left],[m.strideHeight,m.strideWidth],[m.dilationHeight,m.dilationWidth],[m.inHeight,m.inWidth]],T=n.runWebGLProgram(x,$,"float32",S);return p.forEach(I=>n.disposeIntermediateTensorInfo(I)),T}const aqe={kernelName:GB,backendName:"webgl",kernelFunc:iqe};class lqe{constructor(t,n,s){this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=s;const o=Xn(n.length),r=Xn(s.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        ${o} strides = ${o}(${this.strides});
         void main() {
          ${r} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${i};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uqe(e){const{inputs:t,backend:n}=e,{params:s,indices:o}=t,r=o.shape,i=r[r.length-1],a=qe(s.shape),[l,u,c,d]=xS(s,o),f=$t({inputs:{x:o},backend:n,attrs:{shape:[u,i]}}),h=$t({inputs:{x:s},backend:n,attrs:{shape:[qe(s.shape)/c,c]}});if(n.shouldExecuteOnCPU([s,o])||s.dtype==="string"){const v=n.readSync(o.dataId),b=n.bufferSync(s),$=kje(v,b,s.dtype,u,i,c,d,s.shape,a);return n.makeTensorInfo(l,s.dtype,$.values)}const p=new lqe(i,d,[u,c]),g=n.runWebGLProgram(p,[h,f],h.dtype),m=$t({inputs:{x:g},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(g),m}const cqe={kernelName:VB,backendName:"webgl",kernelFunc:uqe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dqe{constructor(t,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const s=Xn(this.rank),o=fqe(t);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${t[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${o}));
      }
    `}}function fqe(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[];for(let o=0;o<e.length;o++)o===2?s.push("index"):s.push(`${n[o]}`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WW(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,indices:r}=t,{axis:i,batchDims:a}=s,l=fn(i,o.shape)[0];if(Ye().get("DEBUG")){const b=n.readSync(r.dataId),$=o.shape[l];for(let y=0;y<b.length;++y){const w=b[y];J(w<=$-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${$-1}]`)}}const u=_I(o,r,l,a),c=qe(r.shape),d=[],f=$t({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=$t({inputs:{x:r},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});d.push(f),d.push(h);const p=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([o,r])||o.dtype==="string"){const b=n.bufferSync(h),$=n.bufferSync(f),y=Sje($,b,p);return d.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.makeTensorInfo(u.outputShape,y.dtype,y.values)}const g=new dqe(f.shape,p),m=n.runWebGLProgram(g,[f,h],f.dtype);d.push(m);const v=$t({inputs:{x:m},backend:n,attrs:{shape:u.outputShape}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),v}const hqe={kernelName:iy,backendName:"webgl",kernelFunc:WW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pqe="return float(a > b);",gqe=`
  return vec4(greaterThan(a, b));
`,mqe=po({opSnippet:pqe,packedOpSnippet:gqe,cpuKernelImpl:Ije,dtype:"bool"}),vqe={kernelName:ay,backendName:"webgl",kernelFunc:mqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bqe="return float(a >= b);",yqe=`
  return vec4(greaterThanEqual(a, b));
`,wqe=po({opSnippet:bqe,packedOpSnippet:yqe,dtype:"bool",cpuKernelImpl:Eje}),$qe={kernelName:fg,backendName:"webgl",kernelFunc:wqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cqe(e){const{inputs:t,backend:n}=e,{input:s}=t;return VW(s,!0,n)}const xqe={kernelName:Gk,backendName:"webgl",kernelFunc:Cqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kqe="return float(!isnan(x) && !isinf(x));",Sqe=Nn({opSnippet:kqe,dtype:"bool"}),Iqe={kernelName:pg,backendName:"webgl",kernelFunc:Sqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eqe="return float(isinf(x));",Tqe=Nn({opSnippet:Eqe,dtype:"bool"}),_qe={kernelName:gg,backendName:"webgl",kernelFunc:Tqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nqe="return float(isnan(x));",Aqe=Nn({opSnippet:Nqe,dtype:"bool"}),Dqe={kernelName:mg,backendName:"webgl",kernelFunc:Aqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rqe="return float(a < b);",Mqe=`
  return vec4(lessThan(a, b));
`,Oqe=po({opSnippet:Rqe,packedOpSnippet:Mqe,cpuKernelImpl:Tje,dtype:"bool"}),Fqe={kernelName:uy,backendName:"webgl",kernelFunc:Oqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pqe="return float(a <= b);",Lqe=`
  return vec4(lessThanEqual(a, b));
`,Bqe=po({opSnippet:Pqe,packedOpSnippet:Lqe,cpuKernelImpl:_je,dtype:"bool"}),zqe={kernelName:cy,backendName:"webgl",kernelFunc:Bqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vqe(e){const{backend:t,attrs:n}=e,{start:s,stop:o,num:r}=n,i=Nje(s,o,r);return t.makeTensorInfo([i.length],"float32",i)}const Wqe={kernelName:qk,backendName:"webgl",kernelFunc:Vqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hqe=Ef+`
  return x < 0.0 ? 0./0. : log(x);
`,Uqe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,jqe=Nn({opSnippet:Hqe,packedOpSnippet:Uqe,cpuKernelImpl:Aje}),Gqe={kernelName:vg,backendName:"webgl",kernelFunc:jqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kqe=Ef+`
  return log(1.0 + x);
`,qqe=Nn({opSnippet:Kqe}),Yqe={kernelName:bg,backendName:"webgl",kernelFunc:qqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xqe="return float(a >= 1.0 && b >= 1.0);",Zqe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,Jqe=po({opSnippet:Xqe,packedOpSnippet:Zqe,dtype:"bool"}),Qqe={kernelName:dy,backendName:"webgl",kernelFunc:Jqe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eYe="return float(!(x >= 1.0));",tYe=Nn({opSnippet:eYe}),nYe={kernelName:fy,backendName:"webgl",kernelFunc:tYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sYe="return float(a >= 1.0 || b >= 1.0);",oYe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,rYe=po({opSnippet:sYe,packedOpSnippet:oYe,dtype:"bool"}),iYe={kernelName:hy,backendName:"webgl",kernelFunc:rYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aYe{constructor(t,n,s,o,r){this.variableNames=["x"],this.outputShape=[];const i=n,a=t[3]-1;this.outputShape=t;let l;const u=`float(${s}) + float(${o}) * sum`;r===.5?l=`inversesqrt(${u})`:r===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${i}; j <= ${i}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lYe{constructor(t,n,s,o,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const i=n,a=t[3]-1;this.outputShape=t;let l;const u=`float(${s}) + float(${o}) * sum`;r===.5?l=`inversesqrt(${u})`:r===1?l=`1.0/(${u})`:l=`exp(log(${u}) * float(-${r}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${i};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${i}; j <= ${i}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uYe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{depthRadius:r,bias:i,alpha:a,beta:l}=s,u=Ye().getBool("WEBGL_PACK_NORMALIZATION")?new lYe(o.shape,r,i,a,l):new aYe(o.shape,r,i,a,l);return n.runWebGLProgram(u,[o],o.dtype)},cYe={kernelName:py,backendName:"webgl",kernelFunc:uYe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dYe{constructor(t,n,s,o,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=s,this.alpha=o,this.beta=r,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${o}) * norm + float(${s});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${o})
                * float(${r})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${r});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fYe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o,y:r,dy:i}=t,{depthRadius:a,bias:l,alpha:u,beta:c}=s,d=new dYe(o.shape,a,l,u,c);return n.runWebGLProgram(d,[o,r,i],o.dtype)},hYe={kernelName:Yk,backendName:"webgl",kernelFunc:fYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pYe(e,t,n,s){const o=qe(t),i=qe(e.shape)/o,a=$t({inputs:{x:e},attrs:{shape:[i,o]},backend:s}),l=xc(a,e.dtype,"max",s),u=$t({inputs:{x:l},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HW(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reductionIndices:r,keepDims:i}=s,a=o.shape.length,l=fn(r,o.shape);let u=l;const c=Ts(u,a),d=c!=null,f=n.shouldExecuteOnCPU([o]);let h=o;if(d){if(f){const $=n.texData.get(h.dataId).values,y=new Array(a);for(let x=0;x<y.length;x++)y[x]=o.shape[c[x]];const w=hE($,o.shape,o.dtype,c,y);h=n.makeTensorInfo(y,o.dtype);const C=n.texData.get(h.dataId);C.values=w}else h=w1(o,c,n);u=Ms(u.length,a)}ho("max",u,a);const[p,g]=eo(h.shape,u);let m=p;i&&(m=Es(p,l));let v;if(f){const $=n.texData.get(h.dataId).values,y=Dje($,qe(g),m,o.dtype);v=n.makeTensorInfo(m,o.dtype);const w=n.texData.get(v.dataId);w.values=y}else v=pYe(h,g,m,n);return d&&n.disposeIntermediateTensorInfo(h),v}const gYe={kernelName:gy,backendName:"webgl",kernelFunc:HW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mYe=xW+`
  return max(a, b);
`,vYe=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+b1+`
  return result;
`,bYe=po({opSnippet:mYe,packedOpSnippet:vYe,cpuKernelImpl:Rje}),yYe={kernelName:yg,backendName:"webgl",kernelFunc:bYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wYe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t;am(o,"maxPool");const{filterSize:r,strides:i,pad:a,dimRoundingMode:l}=s,u=1;J(Eo(i,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${u}'`);const c=si(o.shape,r,i,u,a,l);if(c.filterWidth===1&&c.filterHeight===1&&Pn(c.inShape,c.outShape))return ir({inputs:{x:o},backend:n});const d=new bp(c,"max",!1);return n.runWebGLProgram(d,[o],o.dtype)}const $Ye={kernelName:my,backendName:"webgl",kernelFunc:wYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CYe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{filterSize:r,strides:i,pad:a,dataFormat:l,dimRoundingMode:u}=s,c=[1,1,1],d=Pa(o.shape,r,i,c,a,u,l),f=new gE(d,"max",!1);return n.runWebGLProgram(f,[o],o.dtype)}const xYe={kernelName:vy,backendName:"webgl",kernelFunc:CYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kYe{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideHeight,s=t.strideWidth,o=t.dilationHeight,r=t.effectiveFilterHeight,i=t.effectiveFilterWidth,a=r-1-t.padInfo.top,l=i-1-t.padInfo.left,u=r*i-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${r};
          wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${t.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${s}.0;

            if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${u} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${i} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class SYe{constructor(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;const n=t.strideDepth,s=t.strideHeight,o=t.strideWidth,r=t.dilationDepth,i=t.dilationHeight,a=t.dilationWidth,l=t.effectiveFilterDepth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=l-1-t.padInfo.front,f=u-1-t.padInfo.top,h=c-1-t.padInfo.left,p=l*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${f}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${r}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${t.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${u};
              wR += ${i}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${t.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${c};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${o}.0;

              if (dyC < 0.0 || dyC >= ${t.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${u} * ${c} +
                  wR * ${c} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IYe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r}=t,i=r,{filterSize:a,strides:l,pad:u,dimRoundingMode:c}=s,d=[1,1,1],f=Pa(i.shape,a,l,d,u,c),h=new gE(f,"max",!0),p=n.runWebGLProgram(h,[i],i.dtype),g=new SYe(f),m=n.runWebGLProgram(g,[o,p],i.dtype);return n.disposeIntermediateTensorInfo(p),m}const EYe={kernelName:Zk,backendName:"webgl",kernelFunc:IYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TYe(e){const{inputs:t,backend:n,attrs:s}=e,{dy:o,input:r,output:i}=t,a=r;am([r,i],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:d}=s,f=si(a.shape,l,u,1,c,d),h=!0,p=new bp(f,"max",h),g=n.runWebGLProgram(p,[a],a.dtype),m=new kYe(f),v=n.runWebGLProgram(m,[o,g],a.dtype);return n.disposeIntermediateTensorInfo(g),v}const _Ye={kernelName:Xk,backendName:"webgl",kernelFunc:TYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NYe(e,t,n,s){let o=new bp(n,"max",!1);const r=s.runWebGLProgram(o,[e],"float32");o=new bp(n,"max",!0,!0,t);const i=s.runWebGLProgram(o,[e],"float32");return[r,i]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AYe={kernelName:WB,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:s}=e,{filterSize:o,strides:r,pad:i,includeBatchInIndex:a}=t,l=n;J(s.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const u=[1,1];J(Eo(r,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${r} and dilations '${u}'`);const c=si(s.shape,o,r,u,i),[d,f]=NYe(s,a,c,l);return[d,f]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DYe(e,t,n,s){const o=qe(t),i=qe(e.shape)/o,a=$t({inputs:{x:e},attrs:{shape:[i,o]},backend:s}),l=xc(a,"float32","mean",s),u=$t({inputs:{x:l},attrs:{shape:n},backend:s});return s.disposeIntermediateTensorInfo(a),s.disposeIntermediateTensorInfo(l),u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RYe={kernelName:by,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:s}=e,{keepDims:o,axis:r}=t,i=n,a=s.shape.length,l=fn(r,s.shape);let u=l;const c=Ts(u,a),d=c!=null,f=i.shouldExecuteOnCPU([s]),h=[];let p=s;if(d){if(f){const y=i.texData.get(p.dataId).values,w=new Array(a);for(let S=0;S<w.length;S++)w[S]=s.shape[c[S]];const C=hE(y,s.shape,s.dtype,c,w);p=i.makeTensorInfo(w,s.dtype);const x=i.texData.get(p.dataId);x.values=C}else p=w1(s,c,i);h.push(p),u=Ms(u.length,a)}ho("sum",u,a);const[g,m]=eo(p.shape,u);let v=g;o&&(v=Es(g,l));const b=DYe(p,m,v,i);for(const $ of h)i.disposeIntermediateTensorInfo($);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MYe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=o.shape.length,l=fn(r,o.shape);let u=l;const c=Ts(u,a);let d=o;c!=null&&(d=Mo({inputs:{x:o},backend:n,attrs:{perm:c}}),u=Ms(u.length,o.shape.length)),ho("min",u,a);const[f,h]=eo(d.shape,u),p=qe(h),g=$t({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),m=xc(g,g.dtype,"min",n);let v;if(i){const b=Es(f,l);v=$t({inputs:{x:m},backend:n,attrs:{shape:b}})}else v=$t({inputs:{x:m},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),c!=null&&n.disposeIntermediateTensorInfo(d),v}const OYe={kernelName:yy,backendName:"webgl",kernelFunc:MYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FYe=xW+`
  return min(a, b);
`,PYe=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+b1+`
  return result;
`,LYe=po({opSnippet:FYe,packedOpSnippet:PYe,cpuKernelImpl:Mje}),BYe={kernelName:wg,backendName:"webgl",kernelFunc:LYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zYe{constructor(t,n,s){this.variableNames=["x"],this.outputShape=n.map((c,d)=>c[0]+t[d]+c[1]);const o=t.length,r=Xn(o),i=n.map(c=>c[0]).join(","),a=n.map((c,d)=>c[0]+t[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o),u=s==="reflect"?0:1;if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${u};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${u};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${i});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        for (int i = 0; i < ${o}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${u};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${u};
          }
        }
        ${r} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VYe{constructor(t,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,g)=>p[0]+t[g]+p[1]);const o=t.length,r=Xn(o),i=n.map(p=>p[0]).join(","),a=n.map((p,g)=>p[0]+t[g]).join(","),l=Ao("rc",o),u=Ao("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=s==="reflect"?0:1;let h="";if(o===1){const p=`
        ${r} source = rc;
        if (source < start) {
          source = start * 2 - source - ${f};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${f};
        }
        source -= start;
      `;h=`
        ${r} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
      `}else{const p=`
        ${r} source = rc;
        ${r} lt = ${r}(lessThan(source, start));
        ${r} gte = ${r}(greaterThanEqual(source, end));
        ${r} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${f}) +
                gte * ((end - 1) * 2 - source + ${f});
        source -= start;
      `;h=`
        ${r} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${u.join()}), ${d});
        ${l[o-1]} += 1;
        if(${c}) {
          ${p}
          result[1] = getChannel(getX(${u.join()}), ${d});
        }
        rc = outputLoc;
        ${l[o-2]} += 1;
        if(${l[o-2]} < ${this.outputShape[o-2]}) {
          ${p}
          result[2] = getChannel(getX(${u.join()}), ${d});
          ${l[o-1]} += 1;
          if(${c}) {
            ${p}
            result[3] = getChannel(getX(${u.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${r} start = ${r}(${i});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WYe=({inputs:e,backend:t,attrs:n})=>{const{x:s}=e,{paddings:o,mode:r}=n,i=Ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new VYe(s.shape,o,r):new zYe(s.shape,o,r);return t.runWebGLProgram(i,[s],s.dtype)},HYe={kernelName:wy,backendName:"webgl",kernelFunc:WYe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UYe=`if (b == 0.0) return NAN;
  return mod(a, b);`,jYe=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+b1+`
  return result;
`,GYe=po({opSnippet:UYe,packedOpSnippet:jYe}),KYe={kernelName:$g,backendName:"webgl",kernelFunc:GYe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qYe{constructor(t,n,s){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,s],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YYe=`
if (a == b) {
  return 1.0;
};
return a / b;`,XYe=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,UW=po({opSnippet:YYe,packedOpSnippet:XYe,checkOutOfBounds:!0}),ZYe={kernelName:rg,backendName:"webgl",kernelFunc:UW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lM="return a - b;",jW=po({opSnippet:lM,packedOpSnippet:lM,supportsComplex:!0,cpuKernelImpl:Xje}),JYe={kernelName:Pg,backendName:"webgl",kernelFunc:jW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GW(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{dim:r}=s,i=fn([r],o.shape),a=HW({inputs:{x:o},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),l=Es(a.shape,i),u=$t({inputs:{x:a},backend:n,attrs:{shape:l}}),c=jW({inputs:{a:o,b:u},backend:n}),d=zW({inputs:{x:c},backend:n}),f=$1({inputs:{x:d},backend:n,attrs:{axis:i,keepDims:!1}}),h=$t({inputs:{x:f},backend:n,attrs:{shape:l}}),p=UW({inputs:{a:d,b:h},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),p}const QYe={kernelName:Py,backendName:"webgl",kernelFunc:GW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eXe(e){const{inputs:t,backend:n,attrs:s}=e,{logits:o}=t,{numSamples:r,seed:i,normalized:a}=s,l=a?o:GW({inputs:{logits:o},backend:n,attrs:{dim:o.shape.length-1}}),u=l.shape[0],c=l.shape[1],d=new qYe(u,c,r),f=[[i]],h=n.runWebGLProgram(d,[l],"int32",f);return a||n.disposeIntermediateTensorInfo(l),h}const tXe={kernelName:HB,backendName:"webgl",kernelFunc:eXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nXe=ii+`
  return -x;
`,sXe=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function oXe(e){const{inputs:t,backend:n}=e,{x:s}=t;if(n.shouldExecuteOnCPU([s])){const r=n.texData.get(s.dataId),[i,a]=Fje(r.values,s.shape,s.dtype);return n.makeTensorInfo(a,s.dtype,i)}let o;return Ye().getBool("WEBGL_PACK_UNARY_OPERATIONS")?o=new Tu(s.shape,sXe):o=new ya(s.shape,nXe),n.runWebGLProgram(o,[s],s.dtype)}const rXe={kernelName:$y,backendName:"webgl",kernelFunc:oXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iXe=tI;function aXe(e){vr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l}=s,u=n.readSync(o.dataId),c=n.readSync(r.dataId),{selectedIndices:d}=iXe(u,c,i,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const lXe={kernelName:Jk,backendName:"webgl",kernelFunc:aXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uXe=nI;function cXe(e){vr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:u}=s,c=n.readSync(o.dataId),d=n.readSync(r.dataId),{selectedIndices:f,validOutputs:h}=uXe(c,d,i,a,l,u);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}const dXe={kernelName:Qk,backendName:"webgl",kernelFunc:cXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fXe=sI;function hXe(e){vr("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:s}=e,{boxes:o,scores:r}=t,{maxOutputSize:i,iouThreshold:a,scoreThreshold:l,softNmsSigma:u}=s,c=n.readSync(o.dataId),d=n.readSync(r.dataId),f=i,h=a,p=l,g=u,{selectedIndices:m,selectedScores:v}=fXe(c,d,f,h,p,g);return[n.makeTensorInfo([m.length],"int32",new Int32Array(m)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}const pXe={kernelName:eS,backendName:"webgl",kernelFunc:hXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gXe{constructor(t,n,s,o){this.variableNames=["indices"],this.outputShape=[t,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${o}), float(${s}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mXe=e=>{const{inputs:t,backend:n,attrs:s}=e,{indices:o}=t,{depth:r,onValue:i,offValue:a}=s,l=qe(o.shape),u=new gXe(l,r,i,a),c=$t({inputs:{x:o},backend:n,attrs:{shape:[l]}}),d=n.runWebGLProgram(u,[c],o.dtype);n.disposeIntermediateTensorInfo(c);const f=[...o.shape,r],h=$t({inputs:{x:d},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(d),h},vXe={kernelName:ky,backendName:"webgl",kernelFunc:mXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z0(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="complex64"){const o=cm({inputs:{input:s},backend:n}),r=Z0({inputs:{x:o},backend:n}),i=C1({inputs:{input:s},backend:n}),a=Z0({inputs:{x:i},backend:n}),l=Hl({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return dm({attrs:{shape:s.shape,dtype:s.dtype,value:s.dtype==="string"?"":0},backend:n})}const bXe={kernelName:Vy,backendName:"webgl",kernelFunc:Z0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KW(e){const{inputs:t,backend:n}=e,{x:s}=t;if(s.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(s.dtype==="complex64"){const o=cm({inputs:{input:s},backend:n}),r=KW({inputs:{x:o},backend:n}),i=C1({inputs:{input:s},backend:n}),a=Z0({inputs:{x:i},backend:n}),l=Hl({inputs:{real:r,imag:a},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a),l}else return dm({attrs:{shape:s.shape,dtype:s.dtype,value:1},backend:n})}const yXe={kernelName:xy,backendName:"webgl",kernelFunc:KW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wXe(e){const{inputs:t,backend:n,attrs:s}=e,{axis:o}=s;if(t.length===1)return Mx({inputs:{input:t[0]},backend:n,attrs:{dim:o}});const r=t[0].shape,i=t[0].dtype;t.forEach(c=>{ni(r,c.shape,"All tensors passed to stack must have matching shapes"),J(i===c.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=t.map(c=>{const d=Mx({inputs:{input:c},backend:n,attrs:{dim:o}});return a.push(d),d}),u=MW({inputs:l,backend:n,attrs:{axis:o}});return a.forEach(c=>n.disposeIntermediateTensorInfo(c)),u}const $Xe={kernelName:Sy,backendName:"webgl",kernelFunc:wXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CXe{constructor(t,n,s){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((u,c)=>u[0]+t[c]+u[1]);const o=t.length,r=Xn(o),i=n.map(u=>u[0]).join(","),a=n.map((u,c)=>u[0]+t[c]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,o);if(o===1){this.userCode=`
        int start = ${i};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${r} start = ${r}(${i});
      ${r} end = ${r}(${a});

      void main() {
        ${r} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${r} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xXe{constructor(t,n,s){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((g,m)=>g[0]+t[m]+g[1]);const o=t.length,r=Xn(o),i=n.map(g=>g[0]).join(","),a=n.map((g,m)=>g[0]+t[m]).join(","),l=Ao("rc",o),u=Ao("source",o),c=`${l[o-1]} < ${this.outputShape[o-1]}`,d=o===1?"source":`vec2(${u.slice(-2).join()})`,f=[`${r} rc = outputLoc;`,`${l[o-1]} += 1;
       if(${c}) {
      `,o===1?"":`}
       rc = outputLoc;
       ${l[o-2]} += 1;
       if(${l[o-2]} < ${this.outputShape[o-2]}) {`,o===1?"":`  ${l[o-1]} += 1;
         if(${c}) {`],h=o===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let g=0,m=o===1?2:4;g<m;g++)p+=`
        ${f[g]}
        if (${h}) {
          result[${g}] = float(value);
        } else {
          ${r} source = rc - start;
          result[${g}] = getChannel(getX(${u.join()}), ${d});
        }
      `;p+=o===1?"} ":"}}",this.userCode=`
      const ${r} start = ${r}(${i});
      const ${r} end = ${r}(${a});

      void main() {
        ${r} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qW=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{paddings:r,constantValue:i}=s;if(qe(o.shape)===0){const u=r.map((c,d)=>c[0]+o.shape[d]+c[1]);return dm({backend:n,attrs:{shape:u,value:i,dtype:o.dtype}})}const a=Ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xXe(o.shape,r,i):new CXe(o.shape,r,i),l=[[i]];return n.runWebGLProgram(a,[o],o.dtype,l)},kXe={kernelName:Iy,backendName:"webgl",kernelFunc:qW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SXe=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,IXe=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+b1+`
  return result;
`,EXe=po({opSnippet:SXe,packedOpSnippet:IXe}),TXe={kernelName:xg,backendName:"webgl",kernelFunc:EXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Xe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{axis:r,keepDims:i}=s,a=o.shape.length,l=[],u=fn(r,o.shape);let c=u;const d=Ts(c,a);let f=o;d!=null&&(f=Mo({inputs:{x:o},backend:n,attrs:{perm:d}}),c=Ms(c.length,a),l.push(f)),ho("prod",c,a);let h;if(n.shouldExecuteOnCPU([f])){const p=n.texData.get(f.dataId).values,{outVals:g,outShape:m,outDtype:v}=Lje(f.shape,f.dtype,p,c);h=n.makeTensorInfo(m,v,g)}else{const[p,g]=eo(f.shape,c),m=qe(g),v=$t({inputs:{x:f},backend:n,attrs:{shape:[-1,m]}}),b=wS(o.dtype),$=xc(v,b,"prod",n);h=$t({inputs:{x:$},backend:n,attrs:{shape:p}}),l.push(v),l.push($)}if(i){l.push(h);const p=Es(h.shape,u);h=$t({inputs:{x:h},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),h}const NXe={kernelName:tS,backendName:"webgl",kernelFunc:_Xe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YW=e=>{const{backend:t,attrs:n}=e,{start:s,stop:o,step:r,dtype:i}=n,a=Bje(s,o,r,i);return t.makeTensorInfo([a.length],i,a)},AXe={kernelName:nS,backendName:"webgl",kernelFunc:YW};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DXe="return 1.0 / x;",RXe=Nn({opSnippet:DXe}),MXe={kernelName:kg,backendName:"webgl",kernelFunc:RXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OXe=ii+`
  return (x < 0.0) ? 0.0 : x;
`,FXe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,PXe=Nn({opSnippet:OXe,packedOpSnippet:FXe}),LXe={kernelName:Sg,backendName:"webgl",kernelFunc:PXe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BXe=ii+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,zXe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,VXe=Nn({opSnippet:BXe,packedOpSnippet:zXe}),WXe={kernelName:Ig,backendName:"webgl",kernelFunc:VXe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class HXe{constructor(t,n,s,o,r){this.variableNames=["A"],this.outputShape=[];const[i,a,l,u]=t;this.outputShape=[i,n,s,u];const c=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s];let f;r?f="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UXe{constructor(t,n,s,o,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,u]=t;this.outputShape=[i,n,s,u];const c=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s];let f;r?f="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jXe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:i,size:a}=s,[l,u]=a,c=Ye().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new UXe(o.shape,l,u,r,i):new HXe(o.shape,l,u,r,i);return n.runWebGLProgram(c,[o],"float32")}const GXe={kernelName:Ny,backendName:"webgl",kernelFunc:jXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KXe{constructor(t,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,r]=n,[,i,a]=t,l=[s&&i>1?o-1:o,s&&a>1?r-1:r],u=[s&&i>1?i-1:i,s&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${o-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${r-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qXe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:i}=s,a=new KXe(r.shape,o.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const YXe={kernelName:rS,backendName:"webgl",kernelFunc:qXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XXe{constructor(t,n,s,o,r){this.variableNames=["A"],this.outputShape=[];const[i,a,l,u]=t;this.outputShape=[i,n,s,u];const c=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s],f=o?"0.5":"0.0";let h;r?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${c[0]/d[0]},
          ${c[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZXe{constructor(t,n,s,o,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[i,a,l,u]=t;this.outputShape=[i,n,s,u];const c=[o&&n>1?a-1:a,o&&s>1?l-1:l],d=[o&&n>1?n-1:n,o&&s>1?s-1:s],f=o?"0.5":"0.0";let h;r?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${c[0]/d[0]},
          ${c[1]/d[1]},
          ${c[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${f})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${u-1};
        bool hasNextRow = coords.z < ${s-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JXe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o}=t,{alignCorners:r,halfPixelCenters:i,size:a}=s,[l,u]=a,c=Ye().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ZXe(o.shape,l,u,r,i):new XXe(o.shape,l,u,r,i);return n.runWebGLProgram(c,[o],o.dtype)}const QXe={kernelName:_y,backendName:"webgl",kernelFunc:JXe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eZe{constructor(t,n,s){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,o,r]=n,[,i,a]=t,l=[s&&i>1?o-1:o,s&&a>1?r-1:r],u=[s&&i>1?i-1:i,s&&a>1?a-1:a],c=l[0]/u[0],d=l[1]/u[1],f=1/c,h=1/d,p=Math.ceil(f)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${c});
        const float widthScale = float(${d});

        const float invHeightScale = float(${f});
        const float invWidthScale = float(${h});

        const int winHeight = int(${p});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${i}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${u[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${u[1]}));

            int sourceNearestRow = int(min(
                float(int(${o}) - 1),
                ${s} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${r}) - 1),
                ${s} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tZe(e){const{inputs:t,backend:n,attrs:s}=e,{images:o,dy:r}=t,{alignCorners:i}=s,a=new eZe(r.shape,o.shape,i);return n.runWebGLProgram(a,[r],r.dtype)}const nZe={kernelName:oS,backendName:"webgl",kernelFunc:tZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sZe{constructor(t,n){this.variableNames=["x"];const s=t.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);if(this.outputShape=t,s===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${t[0]} - coord - 1));
        }
      `;return}const o=a=>n.indexOf(a)!==-1&&t[a]!==1?`${t[a]} - coords[${a}] - 1`:`coords[${a}]`,r=t.map((a,l)=>o(l)).join(","),i=Xn(s);this.userCode=`
      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${r}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oZe{constructor(t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const s=t.length;if(s>4)throw new Error(`WebGL backend: Reverse of rank-${s} tensor is not yet supported`);this.outputShape=t;const o=Ao("rc",s),r=`${o[s-1]} + 1 < ${this.outputShape[s-1]}`,i=`${o[s-2]} + 1 < ${this.outputShape[s-2]}`,a=Xn(s);s===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${t[0]} - rc - 1),
            ${t[0]} - rc - 1);
          if(${r}){
              result.g = getChannel(getX(${t[0]} - (rc  + 1) - 1),
                ${t[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(o.slice())};
          if(${r}){
            result.g = ${u(o.slice())};
          }
          if(${i}) {
            result.b = ${c(o.slice())};
            if(${r}) {
              result.a = ${d(o.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return f(p)}function u(p){return p[s-1]="("+p[s-1]+" + 1)",f(p)}function c(p){return p[s-2]="("+p[s-2]+" + 1)",f(p)}function d(p){return p[s-1]="("+p[s-1]+" + 1)",p[s-2]="("+p[s-2]+" + 1)",f(p)}function f(p){const g=t.map((b,$)=>h($,p)),m=g.join(","),v=g.slice(-2).join(",");return`getChannel(getX(${m}), vec2(${v}))`}function h(p,g){return n.indexOf(p)!==-1&&t[p]!==1?`${t[p]} - ${g[p]} - 1`:`${g[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rZe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{dims:r}=s,i=o.shape.length,a=fn(r,o.shape);if(i===0)return ir({inputs:{x:o},backend:n});const l=Ye().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oZe(o.shape,a):new sZe(o.shape,a);return n.runWebGLProgram(l,[o],o.dtype)}const iZe={kernelName:Ay,backendName:"webgl",kernelFunc:rZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aZe{constructor(t,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const s=t[1],o=t[2];this.outputShape=t;let r="";typeof n=="number"?r=`float outputValue = ${n.toFixed(2)};`:r=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${r}
          if(coordX >= 0 && coordX < ${o} && coordY >= 0 && coordY < ${s}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lZe={kernelName:bS,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:s}=e,{radians:o,fillValue:r,center:i}=t,a=n,l=new aZe(s.shape,r),[u,c]=hI(i,s.shape[1],s.shape[2]),d=[[u,c,Math.sin(o),Math.cos(o)]];return a.runWebGLProgram(l,[s],s.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uZe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,cZe=Nn({opSnippet:uZe}),dZe={kernelName:Eg,backendName:"webgl",kernelFunc:cZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fZe="return inversesqrt(x);",hZe=Nn({opSnippet:fZe,cpuKernelImpl:zje}),pZe={kernelName:Tg,backendName:"webgl",kernelFunc:hZe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XW{constructor(t,n,s,o,r,i,a=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;const l=Xn(r.length),u=Xn(i.length);let c="";s===1?c="i":s===2&&(c="i, j");const d=`getIndices(${c})`;let f="";o===1?f="i":o===2&&(f="i, coords[1]");const h=`getUpdates(${f})`,p=n>1?"strides[j]":"strides";this.userCode=`
        ${l} strides = ${l}(${r});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${t}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${d});
              flattenedIndex += index * ${p};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${h};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gZe(e){const{inputs:t,backend:n,attrs:s}=e,{indices:o,updates:r}=t,{shape:i}=s,{sliceRank:a,numUpdates:l,sliceSize:u,strides:c,outputSize:d}=Wg(r,o,i),f=[d/u,u];if(d===0)return n.makeTensorInfo(i,o.dtype);const h=$t({inputs:{x:o},backend:n,attrs:{shape:[l,a]}}),p=$t({inputs:{x:r},backend:n,attrs:{shape:[l,u]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),m=new XW(l,a,h.shape.length,p.shape.length,c,f),v=n.runWebGLProgram(m,[p,h,g],p.dtype),b=$t({inputs:{x:v},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),b}const mZe={kernelName:UB,backendName:"webgl",kernelFunc:gZe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class vZe{constructor(t,n,s){this.variableNames=["c","a","b"],this.outputShape=n;let o,r;if(s>4)throw Error(`Where for rank ${s} is not yet supported`);if(s===1)r="resRC",o="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],u=[];for(let c=0;c<n.length;c++)u.push(`${a[c]}`),c<t&&l.push(`${a[c]}`);o=l.join(),r=u.join()}const i=Xn(s);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        float cVal = getC(${o});
        if (cVal >= 1.0) {
          setOutput(getA(${r}));
        } else {
          setOutput(getB(${r}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bZe(e){const{inputs:t,backend:n}=e,{condition:s,t:o,e:r}=t,i=new vZe(s.shape.length,o.shape,o.shape.length);return n.runWebGLProgram(i,[s,o,r],kr(o.dtype,r.dtype))}const yZe={kernelName:Dy,backendName:"webgl",kernelFunc:bZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wZe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${t1};
  float scale = ${n1};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,$Ze=Nn({opSnippet:wZe}),CZe={kernelName:_g,backendName:"webgl",kernelFunc:$Ze};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xZe=Ef+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,kZe=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,SZe=Nn({opSnippet:xZe,packedOpSnippet:kZe,cpuKernelImpl:Vje}),IZe={kernelName:Rg,backendName:"webgl",kernelFunc:SZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EZe=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,TZe=Nn({opSnippet:EZe}),_Ze={kernelName:Dg,backendName:"webgl",kernelFunc:TZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NZe=Ef+`
  return sin(x);
`,AZe=Nn({opSnippet:NZe}),DZe={kernelName:Ng,backendName:"webgl",kernelFunc:AZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RZe=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,MZe=Nn({opSnippet:RZe}),OZe={kernelName:Ag,backendName:"webgl",kernelFunc:MZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FZe=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,PZe=Nn({opSnippet:FZe}),LZe={kernelName:Mg,backendName:"webgl",kernelFunc:PZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BZe=e=>{const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{blockShape:r,paddings:i}=s;J(o.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=r.reduce((v,b)=>v*b),l=[[0,0]];l.push(...i);for(let v=1+r.length;v<o.shape.length;++v)l.push([0,0]);const u=[],c=qW({inputs:{x:o},backend:n,attrs:{paddings:l,constantValue:0}}),d=Kg(c.shape,r,a,!1),f=qg(d.length,r.length,!1),h=Yg(c.shape,r,a,!1),p=$t({inputs:{x:c},backend:n,attrs:{shape:d}}),g=Mo({inputs:{x:p},backend:n,attrs:{perm:f}}),m=$t({inputs:{x:g},backend:n,attrs:{shape:h}});return u.push(c),u.push(p),u.push(g),u.forEach(v=>n.disposeIntermediateTensorInfo(v)),m},zZe={kernelName:Oy,backendName:"webgl",kernelFunc:BZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VZe(e){const{inputs:t,backend:n}=e,{indices:s,values:o,denseShape:r,defaultValue:i}=t;if(r.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${r.shape}`);if(s.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${s.shape}`);if(o.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${o.shape}`);if(i.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${i.shape}`);const a=n.readSync(s.dataId),l=n.readSync(o.dataId),u=n.readSync(r.dataId),c=n.readSync(i.dataId)[0],[d,f,h,p,g]=Hje(a,s.shape,s.dtype,l,o.dtype,u,c);return[n.makeTensorInfo(f,s.dtype,d),n.makeTensorInfo([f[0]],o.dtype,h),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(m=>Number(m)))),n.makeTensorInfo([g.length],s.dtype,new Int32Array(g))]}const WZe={kernelName:iS,backendName:"webgl",kernelFunc:VZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HZe(e){const{inputs:t,backend:n}=e,{inputIndices:s,inputShape:o,newShape:r}=t;if(s.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${s.shape}`);if(o.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${o.shape}`);if(r.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${r.shape}`);const i=Array.from(n.readSync(o.dataId)),a=n.readSync(s.dataId),l=Array.from(n.readSync(r.dataId)),[u,c,d]=Uje(a,s.shape,s.dtype,i,l);return[n.makeTensorInfo(c,s.dtype,u),n.makeTensorInfo([d.length],r.dtype,new Int32Array(d))]}const UZe={kernelName:aS,backendName:"webgl",kernelFunc:HZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jZe(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${r.shape}`);const i=n.readSync(s.dataId),a=n.readSync(o.dataId),l=n.readSync(r.dataId),[u,c]=wW(i,s.shape,s.dtype,a,l,!0);return n.makeTensorInfo(c,s.dtype,u)}const GZe={kernelName:lS,backendName:"webgl",kernelFunc:jZe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KZe(e){const{inputs:t,backend:n}=e,{data:s,indices:o,segmentIds:r}=t;if(s.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(o.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${o.shape}`);if(r.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${r.shape}`);const i=n.readSync(s.dataId),a=n.readSync(o.dataId),l=n.readSync(r.dataId),[u,c]=wW(i,s.shape,s.dtype,a,l);return n.makeTensorInfo(c,s.dtype,u)}const qZe={kernelName:uS,backendName:"webgl",kernelFunc:KZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YZe(e){const{inputs:t,backend:n,attrs:s}=e,{sparseIndices:o,sparseValues:r,defaultValue:i}=t,{outputShape:a}=s,{sliceRank:l,numUpdates:u,strides:c,outputSize:d}=Wg(r,o,a),f=!1,h=new XW(u,l,o.shape.length,r.shape.length,c,[d,1],f),p=n.runWebGLProgram(h,[r,o,i],r.dtype),g=$t({inputs:{x:p},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(p),g}const XZe={kernelName:jB,backendName:"webgl",kernelFunc:YZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZZe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{numOrSizeSplits:r,axis:i}=s,a=fn(i,o.shape)[0],l=TI(o,r,a),u=o.shape.length,c=new Array(u).fill(0),d=o.shape.slice();return l.map(f=>{const h=[...d];h[a]=f;const p=Tf({inputs:{x:o},backend:n,attrs:{begin:c,size:h}});return c[a]+=f,p})}const JZe={kernelName:Fy,backendName:"webgl",kernelFunc:ZZe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uM="return sqrt(x);",QZe=Nn({opSnippet:uM,packedOpSnippet:uM,cpuKernelImpl:jje}),eJe={kernelName:Og,backendName:"webgl",kernelFunc:QZe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tJe="return x * x;",nJe=Nn({opSnippet:tJe}),sJe={kernelName:cS,backendName:"webgl",kernelFunc:nJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cM="return (a - b) * (a - b);",oJe=po({opSnippet:cM,packedOpSnippet:cM}),rJe={kernelName:Fg,backendName:"webgl",kernelFunc:oJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iJe({inputs:e,attrs:t,backend:n}){const{x:s}=e,o=ii+`
    return x > 0.0 ? 1.0 : float(${t.alpha});
  `,r=new ya(s.shape,o);return n.runWebGLProgram(r,[s],s.dtype)}const aJe={kernelName:Vg,backendName:"webgl",kernelFunc:iJe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lJe{constructor(t,n,s){this.variableNames=["x"],this.outputShape=s;const o=s.length,r=Xn(s.length),i=Xn(s.length);let a="";if(o===1)a="coords * strides + begin";else{let l=0;a=s.map((u,c)=>(l++,s.length===1?`coords * strides[${c}] + begin[${c}]`:`coords[${l-1}] * strides[${c}] + begin[${c}]`)).join(",")}this.userCode=`
      ${r} begin = ${r}(${t});
      ${r} strides = ${r}(${n});

      void main() {
        ${i} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uJe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{begin:r,end:i,strides:a,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:d,shrinkAxisMask:f}=s,{finalShapeSparse:h,finalShape:p,isIdentity:g,sliceDim0:m,isSimpleSlice:v,begin:b,end:$,strides:y}=TS(o.shape,r,i,a,l,u,c,d,f);let w;if(g)w=$t({inputs:{x:o},backend:n,attrs:{shape:p}});else if(m||v){J(o.shape.length>=1,()=>`Input must have rank at least 1, got: ${o.shape.length}`);const x=SS(b,$,y),S=Tf({inputs:{x:o},backend:n,attrs:{begin:b,size:x}});w=$t({inputs:{x:S},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(S)}else if(n.shouldExecuteOnCPU([o])){const S=n.readSync(o.dataId),T=vn(o.shape,o.dtype,S),I=Gje(h,T,y,b);w=n.makeTensorInfo(p,o.dtype,I.values)}else{const S=new lJe(b,y,h);w=n.runWebGLProgram(S,[o],o.dtype)}const C=$t({inputs:{x:w},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(w),C}const cJe={kernelName:dS,backendName:"webgl",kernelFunc:uJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dJe(e){const{inputs:t,backend:n,attrs:s}=e,{separator:o,nGramWidths:r,leftPad:i,rightPad:a,padWidth:l,preserveShortSequences:u}=s,{data:c,dataSplits:d}=t,f=n.readSync(c.dataId),h=n.readSync(d.dataId),[p,g]=Kje(f,h,o,r,i,a,l,u);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",g)]}const fJe={kernelName:fS,backendName:"webgl",kernelFunc:dJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hJe(e){const{inputs:t,backend:n,attrs:s}=e,{skipEmpty:o}=s,{input:r,delimiter:i}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(r.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${r.shape}`);if(i.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${i.shape}`);const a=n.readSync(r.dataId),l=n.readSync(i.dataId)[0],[u,c,d]=qje(a,l,o),f=c.length;return[n.makeTensorInfo([f,2],"int32",u),n.makeTensorInfo([f],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const pJe={kernelName:hS,backendName:"webgl",kernelFunc:hJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gJe(e){const{inputs:t,backend:n,attrs:s}=e,{numBuckets:o}=s,{input:r}=t;if(r.dtype!=="string")throw new Error("Input must be of datatype string");if(o<=0)throw new Error("Number of buckets must be at least 1");const i=n.readSync(r.dataId),a=Yje(i,o);return n.makeTensorInfo(r.shape,"int32",a)}const mJe={kernelName:pS,backendName:"webgl",kernelFunc:gJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vJe="return tan(x);",bJe=Nn({opSnippet:vJe}),yJe={kernelName:Lg,backendName:"webgl",kernelFunc:bJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wJe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,$Je=Nn({opSnippet:wJe}),CJe={kernelName:Bg,backendName:"webgl",kernelFunc:$Je};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xJe{constructor(t,n){this.variableNames=["A"];const s=new Array(t.length);for(let i=0;i<s.length;i++)s[i]=t[i]*n[i];this.outputShape=s,this.rank=s.length;const o=Xn(this.rank),r=kJe(t);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        setOutput(getA(${r}));
      }
    `}}function kJe(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(t===1)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],s=[];for(let o=0;o<e.length;o++)s.push(`imod(${n[o]}, ${e[o]})`);return s.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZW(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{reps:r}=s;if(o.dtype==="string"||o.shape.length>5){const l=n.readSync(o.dataId),u=o.dtype==="string"?l.map(f=>Pd(f)):l,c=vn(o.shape,o.dtype,u),d=Zje(c,r);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const i=new xJe(o.shape,r);return n.runWebGLProgram(i,[o],o.dtype)}const SJe={kernelName:zg,backendName:"webgl",kernelFunc:ZW};class IJe{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class EJe{constructor(t){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function su(e,t){t!==null&&e.disposeIntermediateTensorInfo(t)}function dM(e){let t=1;for(;t<e;)t*=2;return t}function TJe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o}=t,{k:r,sorted:i}=s,a=Ye().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Ye().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=o.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([o])||c<a||r>l){const I=n.readSync(o.dataId),[_,N]=Jje(I,u,o.dtype,r,i);return[n.makeTensorInfo(_.shape,_.dtype,_.values),n.makeTensorInfo(N.shape,N.dtype,N.values)]}if(r===0)return u[u.length-1]=0,[n.makeTensorInfo(u,o.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(c===1)return[o,dm({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const d=n.texData.get(o.dataId),f=d!==null&&d.isPacked,h=f?n.unpackTensor(o):o,g=qe(u)/c,m=$t({inputs:{x:h},attrs:{shape:[g,c]},backend:n});f&&su(n,h);const v=dM(r),b=dM(c);let $=null;const y=()=>$===null?[m,m]:[m,$],w=(I,_,N)=>{const D=y(),F=new IJe(N),M=[[c],[$===null?1:0],[Number.NEGATIVE_INFINITY],[I],[_]],B=$;$=n.runWebGLProgram(F,D,"int32",M),su(n,B)};for(let I=1;I<v;I*=2){const _=I*2;for(let N=I;N>=1;N/=2)w(_,N,[g,b])}for(let I=b;I>v;I/=2){const _=y(),N=new EJe([g,I/2]),F=[[c],[$===null?1:0],[v]],P=$;$=n.runWebGLProgram(N,_,"int32",F),su(n,P);const M=v/2,B=M*2;for(let j=M;j>=1;j/=2)w(B,j,$.shape)}let C=$;$=Tf({inputs:{x:$},backend:n,attrs:{begin:0,size:[g,r]}}),su(n,C);let x=WW({inputs:{x:m,indices:$},backend:n,attrs:{axis:1,batchDims:1}});su(n,m);const S=u.slice(0,-1);S.push(r),C=$,$=$t({inputs:{x:$},attrs:{shape:S},backend:n}),su(n,C);const T=x;return x=$t({inputs:{x},attrs:{shape:S},backend:n}),su(n,T),[x,$]}const _Je={kernelName:gS,backendName:"webgl",kernelFunc:TJe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class NJe{constructor(t,n,s,o,r,i){this.variableNames=["Image","Transforms"],this.outputShape=i;const a=s==="nearest"?1:2;let l;switch(o){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${t} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${r});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${r});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${t}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AJe(e){const{inputs:t,backend:n,attrs:s}=e,{image:o,transforms:r}=t,{interpolation:i,fillMode:a,fillValue:l,outputShape:u}=s,[c,d,f,h]=o.shape,[p,g]=u!=null?u:[d,f],m=[c,p,g,h],v=new NJe(d,f,i,a,l,m);return n.runWebGLProgram(v,[o,r],"float32")}const DJe={kernelName:mS,backendName:"webgl",kernelFunc:AJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RJe(e){const{inputs:t,attrs:n,backend:s}=e,{axis:o}=n,{x:r}=t;am(r,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const i=s.readSync(r.dataId),{outputValues:a,outputShape:l,indices:u}=Qje(i,o,r.shape,r.dtype);return[s.makeTensorInfo(l,r.dtype,a),s.makeTensorInfo([u.length],"int32",u)]}const MJe={kernelName:vS,backendName:"webgl",kernelFunc:RJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OJe(e){const{inputs:t,backend:n,attrs:s}=e,{value:o}=t;let{axis:r}=s;r<0&&(r+=o.shape.length);const i=o,a=i.shape.length,l=o.shape[r],u=new Array(a-1);let c=0;for(let g=0;g<a;g++)g!==r&&(u[c++]=i.shape[g]);const d=[],f=new Array(a).fill(0),h=i.shape.slice();h[r]=1;const p=new Array(l);for(let g=0;g<p.length;g++){f[r]=g;const m=Tf({inputs:{x:i},backend:n,attrs:{begin:f,size:h}}),v=$t({inputs:{x:m},backend:n,attrs:{shape:u}});p[g]=v,d.push(m)}return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),p}const FJe={kernelName:By,backendName:"webgl",kernelFunc:OJe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PJe{constructor(t,n){this.variableNames=["x","segmentIds"];const s=t.windowSize,o=t.batchSize,r=t.inSize,i=t.numSegments,a=i*Math.ceil(r/s);this.outputShape=[o,a];const l="0.0",u="sumValue",c=Math.floor(s/4)*4,d=s%4,f=`
        sumValue += dot(values, segFilter);
    `;let h="";r%s>0&&(h=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return initializationValue;
        }
      `);let p="";r%s>0&&(p=`
        if (inIdx < 0 || inIdx >= ${r}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${i})) * float(${s}));
        int currentSeg = int(mod(float(outIdx), float(${i})));

        float sumValue = 0.0;

        for (int i = 0; i < ${c}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${f}
        }

        int inIdx = inOffset + ${c};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${f}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${f}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${f}
        }
        setOutput(${u});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LJe(e){const{inputs:t,backend:n,attrs:s}=e,{x:o,segmentIds:r}=t,{numSegments:i}=s,a=o.shape.length,l=[];let u=0;const c=Ts([u],a);let d=o;c!=null&&(d=Mo({inputs:{x:o},backend:n,attrs:{perm:c}}),l.push(d),u=Ms(1,a)[0]);const f=FV(d.shape,u,i),h=qe([d.shape[u]]),p=$t({inputs:{x:d},backend:n,attrs:{shape:[-1,h]}});l.push(p);const g=wS(o.dtype),m=(y,w,C,x,S)=>{const T=y.shape[0],I=y.shape[1],_=OV(I,S),N={windowSize:_,inSize:I,batchSize:T,numSegments:S},D=new PJe(N,w),F=n.compileAndRun(D,[y,C],x);if(l.push(F),F.shape[1]===S)return F;const P=YW({backend:n,attrs:{start:0,stop:S,step:1,dtype:"float32"}}),M=ZW({inputs:{x:P},backend:n,attrs:{reps:[I/_]}});return l.push(P),l.push(M),m(F,w,M,x,S)},v=m(p,"unsortedSegmentSum",r,g,i),b=$t({inputs:{x:v},backend:n,attrs:{shape:f}});let $=b;if(c!=null){l.push(b);const y=vf(c);$=Mo({inputs:{x:$},backend:n,attrs:{perm:y}})}return l.forEach(y=>n.disposeIntermediateTensorInfo(y)),$}const BJe={kernelName:zy,backendName:"webgl",kernelFunc:LJe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zJe=[GGe,qGe,ZGe,eKe,nKe,rKe,aKe,uKe,hKe,gKe,bKe,$Ke,kKe,TKe,AKe,RKe,OKe,BKe,VKe,HKe,KKe,e9e,n9e,o9e,c9e,f9e,m9e,EGe,y9e,k9e,T9e,M9e,F9e,L9e,z9e,W9e,j9e,q9e,Z9e,Q9e,t7e,o7e,i7e,c7e,f7e,g7e,b7e,w7e,k7e,T7e,D7e,O7e,L7e,B7e,V7e,H7e,j7e,K7e,Y7e,Q7e,nqe,rqe,aqe,cqe,hqe,vqe,$qe,IGe,xqe,C9e,Iqe,_qe,Dqe,_Ge,Fqe,zqe,Wqe,Gqe,Yqe,Qqe,nYe,iYe,cYe,hYe,gYe,yYe,$Ye,xYe,EYe,_Ye,AYe,RYe,OYe,BYe,HYe,KYe,tXe,MGe,rXe,lXe,dXe,pXe,i9e,vXe,yXe,$Xe,kXe,TXe,AGe,NXe,AXe,a9e,ZYe,MXe,LXe,WXe,FGe,GXe,YXe,QXe,nZe,iZe,lZe,dZe,pZe,mZe,yZe,CZe,IZe,_Ze,DZe,OZe,JKe,QYe,LZe,zZe,WZe,UZe,GZe,qZe,XZe,JZe,eJe,sJe,rJe,aJe,cJe,fJe,pJe,mJe,JYe,HGe,yJe,CJe,SJe,_Je,DJe,UGe,MJe,FJe,BJe,bXe];for(const e of zJe)KB(e);/** @license See the LICENSE file. *//**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var JW={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(e,t){(function(n,s){e.exports=s()})(Fn,function(){for(var n=function(A,L,U){return L===void 0&&(L=0),U===void 0&&(U=1),A<L?L:A>U?U:A},s=n,o=function(A){A._clipped=!1,A._unclipped=A.slice(0);for(var L=0;L<=3;L++)L<3?((A[L]<0||A[L]>255)&&(A._clipped=!0),A[L]=s(A[L],0,255)):L===3&&(A[L]=s(A[L],0,1));return A},r={},i=0,a=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];i<a.length;i+=1){var l=a[i];r["[object "+l+"]"]=l.toLowerCase()}var u=function(A){return r[Object.prototype.toString.call(A)]||"object"},c=u,d=function(A,L){return L===void 0&&(L=null),A.length>=3?Array.prototype.slice.call(A):c(A[0])=="object"&&L?L.split("").filter(function(U){return A[0][U]!==void 0}).map(function(U){return A[0][U]}):A[0]},f=u,h=function(A){if(A.length<2)return null;var L=A.length-1;return f(A[L])=="string"?A[L].toLowerCase():null},p=Math.PI,g={clip_rgb:o,limit:n,type:u,unpack:d,last:h,PI:p,TWOPI:p*2,PITHIRD:p/3,DEG2RAD:p/180,RAD2DEG:180/p},m={format:{},autodetect:[]},v=g.last,b=g.clip_rgb,$=g.type,y=m,w=function(){for(var L=[],U=arguments.length;U--;)L[U]=arguments[U];var re=this;if($(L[0])==="object"&&L[0].constructor&&L[0].constructor===this.constructor)return L[0];var we=v(L),Ie=!1;if(!we){Ie=!0,y.sorted||(y.autodetect=y.autodetect.sort(function(ot,wt){return wt.p-ot.p}),y.sorted=!0);for(var ge=0,Oe=y.autodetect;ge<Oe.length;ge+=1){var Fe=Oe[ge];if(we=Fe.test.apply(Fe,L),we)break}}if(y.format[we]){var Ze=y.format[we].apply(null,Ie?L:L.slice(0,-1));re._rgb=b(Ze)}else throw new Error("unknown format: "+L);re._rgb.length===3&&re._rgb.push(1)};w.prototype.toString=function(){return $(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var C=w,x=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(x.Color,[null].concat(A)))};x.Color=C,x.version="2.4.2";var S=x,T=g.unpack,I=Math.max,_=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=T(A,"rgb"),re=U[0],we=U[1],Ie=U[2];re=re/255,we=we/255,Ie=Ie/255;var ge=1-I(re,I(we,Ie)),Oe=ge<1?1/(1-ge):0,Fe=(1-re-ge)*Oe,Ze=(1-we-ge)*Oe,ot=(1-Ie-ge)*Oe;return[Fe,Ze,ot,ge]},N=_,D=g.unpack,F=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];A=D(A,"cmyk");var U=A[0],re=A[1],we=A[2],Ie=A[3],ge=A.length>4?A[4]:1;return Ie===1?[0,0,0,ge]:[U>=1?0:255*(1-U)*(1-Ie),re>=1?0:255*(1-re)*(1-Ie),we>=1?0:255*(1-we)*(1-Ie),ge]},P=F,M=S,B=C,j=m,X=g.unpack,ae=g.type,be=N;B.prototype.cmyk=function(){return be(this._rgb)},M.cmyk=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(B,[null].concat(A,["cmyk"])))},j.format.cmyk=P,j.autodetect.push({p:2,test:function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];if(A=X(A,"cmyk"),ae(A)==="array"&&A.length===4)return"cmyk"}});var ie=g.unpack,ye=g.last,ue=function(A){return Math.round(A*100)/100},Z=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=ie(A,"hsla"),re=ye(A)||"lsa";return U[0]=ue(U[0]||0),U[1]=ue(U[1]*100)+"%",U[2]=ue(U[2]*100)+"%",re==="hsla"||U.length>3&&U[3]<1?(U[3]=U.length>3?U[3]:1,re="hsla"):U.length=3,re+"("+U.join(",")+")"},ee=Z,te=g.unpack,fe=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];A=te(A,"rgba");var U=A[0],re=A[1],we=A[2];U/=255,re/=255,we/=255;var Ie=Math.min(U,re,we),ge=Math.max(U,re,we),Oe=(ge+Ie)/2,Fe,Ze;return ge===Ie?(Fe=0,Ze=Number.NaN):Fe=Oe<.5?(ge-Ie)/(ge+Ie):(ge-Ie)/(2-ge-Ie),U==ge?Ze=(re-we)/(ge-Ie):re==ge?Ze=2+(we-U)/(ge-Ie):we==ge&&(Ze=4+(U-re)/(ge-Ie)),Ze*=60,Ze<0&&(Ze+=360),A.length>3&&A[3]!==void 0?[Ze,Fe,Oe,A[3]]:[Ze,Fe,Oe]},De=fe,We=g.unpack,He=g.last,Ve=ee,Y=De,ne=Math.round,q=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=We(A,"rgba"),re=He(A)||"rgb";return re.substr(0,3)=="hsl"?Ve(Y(U),re):(U[0]=ne(U[0]),U[1]=ne(U[1]),U[2]=ne(U[2]),(re==="rgba"||U.length>3&&U[3]<1)&&(U[3]=U.length>3?U[3]:1,re="rgba"),re+"("+U.slice(0,re==="rgb"?3:4).join(",")+")")},le=q,xe=g.unpack,oe=Math.round,Me=function(){for(var A,L=[],U=arguments.length;U--;)L[U]=arguments[U];L=xe(L,"hsl");var re=L[0],we=L[1],Ie=L[2],ge,Oe,Fe;if(we===0)ge=Oe=Fe=Ie*255;else{var Ze=[0,0,0],ot=[0,0,0],wt=Ie<.5?Ie*(1+we):Ie+we-Ie*we,lt=2*Ie-wt,It=re/360;Ze[0]=It+1/3,Ze[1]=It,Ze[2]=It-1/3;for(var St=0;St<3;St++)Ze[St]<0&&(Ze[St]+=1),Ze[St]>1&&(Ze[St]-=1),6*Ze[St]<1?ot[St]=lt+(wt-lt)*6*Ze[St]:2*Ze[St]<1?ot[St]=wt:3*Ze[St]<2?ot[St]=lt+(wt-lt)*(2/3-Ze[St])*6:ot[St]=lt;A=[oe(ot[0]*255),oe(ot[1]*255),oe(ot[2]*255)],ge=A[0],Oe=A[1],Fe=A[2]}return L.length>3?[ge,Oe,Fe,L[3]]:[ge,Oe,Fe,1]},Re=Me,ve=Re,Ae=m,it=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Je=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,st=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,vt=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,z=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,k=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,E=Math.round,W=function(A){A=A.toLowerCase().trim();var L;if(Ae.format.named)try{return Ae.format.named(A)}catch{}if(L=A.match(it)){for(var U=L.slice(1,4),re=0;re<3;re++)U[re]=+U[re];return U[3]=1,U}if(L=A.match(Je)){for(var we=L.slice(1,5),Ie=0;Ie<4;Ie++)we[Ie]=+we[Ie];return we}if(L=A.match(st)){for(var ge=L.slice(1,4),Oe=0;Oe<3;Oe++)ge[Oe]=E(ge[Oe]*2.55);return ge[3]=1,ge}if(L=A.match(vt)){for(var Fe=L.slice(1,5),Ze=0;Ze<3;Ze++)Fe[Ze]=E(Fe[Ze]*2.55);return Fe[3]=+Fe[3],Fe}if(L=A.match(z)){var ot=L.slice(1,4);ot[1]*=.01,ot[2]*=.01;var wt=ve(ot);return wt[3]=1,wt}if(L=A.match(k)){var lt=L.slice(1,4);lt[1]*=.01,lt[2]*=.01;var It=ve(lt);return It[3]=+L[4],It}};W.test=function(A){return it.test(A)||Je.test(A)||st.test(A)||vt.test(A)||z.test(A)||k.test(A)};var G=W,he=S,_e=C,ht=m,Dt=g.type,xt=le,zt=G;_e.prototype.css=function(A){return xt(this._rgb,A)},he.css=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(_e,[null].concat(A,["css"])))},ht.format.css=zt,ht.autodetect.push({p:5,test:function(A){for(var L=[],U=arguments.length-1;U-- >0;)L[U]=arguments[U+1];if(!L.length&&Dt(A)==="string"&&zt.test(A))return"css"}});var ln=C,ai=S,Ue=m,mt=g.unpack;Ue.format.gl=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=mt(A,"rgba");return U[0]*=255,U[1]*=255,U[2]*=255,U},ai.gl=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(ln,[null].concat(A,["gl"])))},ln.prototype.gl=function(){var A=this._rgb;return[A[0]/255,A[1]/255,A[2]/255,A[3]]};var tn=g.unpack,ds=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=tn(A,"rgb"),re=U[0],we=U[1],Ie=U[2],ge=Math.min(re,we,Ie),Oe=Math.max(re,we,Ie),Fe=Oe-ge,Ze=Fe*100/255,ot=ge/(255-Fe)*100,wt;return Fe===0?wt=Number.NaN:(re===Oe&&(wt=(we-Ie)/Fe),we===Oe&&(wt=2+(Ie-re)/Fe),Ie===Oe&&(wt=4+(re-we)/Fe),wt*=60,wt<0&&(wt+=360)),[wt,Ze,ot]},aa=ds,Tr=g.unpack,_c=Math.floor,HU=function(){for(var A,L,U,re,we,Ie,ge=[],Oe=arguments.length;Oe--;)ge[Oe]=arguments[Oe];ge=Tr(ge,"hcg");var Fe=ge[0],Ze=ge[1],ot=ge[2],wt,lt,It;ot=ot*255;var St=Ze*255;if(Ze===0)wt=lt=It=ot;else{Fe===360&&(Fe=0),Fe>360&&(Fe-=360),Fe<0&&(Fe+=360),Fe/=60;var hn=_c(Fe),yn=Fe-hn,An=ot*(1-Ze),Ln=An+St*(1-yn),go=An+St*yn,so=An+St;switch(hn){case 0:A=[so,go,An],wt=A[0],lt=A[1],It=A[2];break;case 1:L=[Ln,so,An],wt=L[0],lt=L[1],It=L[2];break;case 2:U=[An,so,go],wt=U[0],lt=U[1],It=U[2];break;case 3:re=[An,Ln,so],wt=re[0],lt=re[1],It=re[2];break;case 4:we=[go,An,so],wt=we[0],lt=we[1],It=we[2];break;case 5:Ie=[so,An,Ln],wt=Ie[0],lt=Ie[1],It=Ie[2];break}}return[wt,lt,It,ge.length>3?ge[3]:1]},UU=HU,jU=g.unpack,GU=g.type,KU=S,sT=C,oT=m,qU=aa;sT.prototype.hcg=function(){return qU(this._rgb)},KU.hcg=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(sT,[null].concat(A,["hcg"])))},oT.format.hcg=UU,oT.autodetect.push({p:1,test:function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];if(A=jU(A,"hcg"),GU(A)==="array"&&A.length===3)return"hcg"}});var YU=g.unpack,XU=g.last,km=Math.round,ZU=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=YU(A,"rgba"),re=U[0],we=U[1],Ie=U[2],ge=U[3],Oe=XU(A)||"auto";ge===void 0&&(ge=1),Oe==="auto"&&(Oe=ge<1?"rgba":"rgb"),re=km(re),we=km(we),Ie=km(Ie);var Fe=re<<16|we<<8|Ie,Ze="000000"+Fe.toString(16);Ze=Ze.substr(Ze.length-6);var ot="0"+km(ge*255).toString(16);switch(ot=ot.substr(ot.length-2),Oe.toLowerCase()){case"rgba":return"#"+Ze+ot;case"argb":return"#"+ot+Ze;default:return"#"+Ze}},rT=ZU,JU=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,QU=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,ej=function(A){if(A.match(JU)){(A.length===4||A.length===7)&&(A=A.substr(1)),A.length===3&&(A=A.split(""),A=A[0]+A[0]+A[1]+A[1]+A[2]+A[2]);var L=parseInt(A,16),U=L>>16,re=L>>8&255,we=L&255;return[U,re,we,1]}if(A.match(QU)){(A.length===5||A.length===9)&&(A=A.substr(1)),A.length===4&&(A=A.split(""),A=A[0]+A[0]+A[1]+A[1]+A[2]+A[2]+A[3]+A[3]);var Ie=parseInt(A,16),ge=Ie>>24&255,Oe=Ie>>16&255,Fe=Ie>>8&255,Ze=Math.round((Ie&255)/255*100)/100;return[ge,Oe,Fe,Ze]}throw new Error("unknown hex color: "+A)},iT=ej,tj=S,aT=C,nj=g.type,lT=m,sj=rT;aT.prototype.hex=function(A){return sj(this._rgb,A)},tj.hex=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(aT,[null].concat(A,["hex"])))},lT.format.hex=iT,lT.autodetect.push({p:4,test:function(A){for(var L=[],U=arguments.length-1;U-- >0;)L[U]=arguments[U+1];if(!L.length&&nj(A)==="string"&&[3,4,5,6,7,8,9].indexOf(A.length)>=0)return"hex"}});var oj=g.unpack,uT=g.TWOPI,rj=Math.min,ij=Math.sqrt,aj=Math.acos,lj=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=oj(A,"rgb"),re=U[0],we=U[1],Ie=U[2];re/=255,we/=255,Ie/=255;var ge,Oe=rj(re,we,Ie),Fe=(re+we+Ie)/3,Ze=Fe>0?1-Oe/Fe:0;return Ze===0?ge=NaN:(ge=(re-we+(re-Ie))/2,ge/=ij((re-we)*(re-we)+(re-Ie)*(we-Ie)),ge=aj(ge),Ie>we&&(ge=uT-ge),ge/=uT),[ge*360,Ze,Fe]},uj=lj,cj=g.unpack,G1=g.limit,Nc=g.TWOPI,K1=g.PITHIRD,Ac=Math.cos,dj=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];A=cj(A,"hsi");var U=A[0],re=A[1],we=A[2],Ie,ge,Oe;return isNaN(U)&&(U=0),isNaN(re)&&(re=0),U>360&&(U-=360),U<0&&(U+=360),U/=360,U<1/3?(Oe=(1-re)/3,Ie=(1+re*Ac(Nc*U)/Ac(K1-Nc*U))/3,ge=1-(Oe+Ie)):U<2/3?(U-=1/3,Ie=(1-re)/3,ge=(1+re*Ac(Nc*U)/Ac(K1-Nc*U))/3,Oe=1-(Ie+ge)):(U-=2/3,ge=(1-re)/3,Oe=(1+re*Ac(Nc*U)/Ac(K1-Nc*U))/3,Ie=1-(ge+Oe)),Ie=G1(we*Ie*3),ge=G1(we*ge*3),Oe=G1(we*Oe*3),[Ie*255,ge*255,Oe*255,A.length>3?A[3]:1]},fj=dj,hj=g.unpack,pj=g.type,gj=S,cT=C,dT=m,mj=uj;cT.prototype.hsi=function(){return mj(this._rgb)},gj.hsi=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(cT,[null].concat(A,["hsi"])))},dT.format.hsi=fj,dT.autodetect.push({p:2,test:function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];if(A=hj(A,"hsi"),pj(A)==="array"&&A.length===3)return"hsi"}});var vj=g.unpack,bj=g.type,yj=S,fT=C,hT=m,wj=De;fT.prototype.hsl=function(){return wj(this._rgb)},yj.hsl=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(fT,[null].concat(A,["hsl"])))},hT.format.hsl=Re,hT.autodetect.push({p:2,test:function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];if(A=vj(A,"hsl"),bj(A)==="array"&&A.length===3)return"hsl"}});var $j=g.unpack,Cj=Math.min,xj=Math.max,kj=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];A=$j(A,"rgb");var U=A[0],re=A[1],we=A[2],Ie=Cj(U,re,we),ge=xj(U,re,we),Oe=ge-Ie,Fe,Ze,ot;return ot=ge/255,ge===0?(Fe=Number.NaN,Ze=0):(Ze=Oe/ge,U===ge&&(Fe=(re-we)/Oe),re===ge&&(Fe=2+(we-U)/Oe),we===ge&&(Fe=4+(U-re)/Oe),Fe*=60,Fe<0&&(Fe+=360)),[Fe,Ze,ot]},Sj=kj,Ij=g.unpack,Ej=Math.floor,Tj=function(){for(var A,L,U,re,we,Ie,ge=[],Oe=arguments.length;Oe--;)ge[Oe]=arguments[Oe];ge=Ij(ge,"hsv");var Fe=ge[0],Ze=ge[1],ot=ge[2],wt,lt,It;if(ot*=255,Ze===0)wt=lt=It=ot;else{Fe===360&&(Fe=0),Fe>360&&(Fe-=360),Fe<0&&(Fe+=360),Fe/=60;var St=Ej(Fe),hn=Fe-St,yn=ot*(1-Ze),An=ot*(1-Ze*hn),Ln=ot*(1-Ze*(1-hn));switch(St){case 0:A=[ot,Ln,yn],wt=A[0],lt=A[1],It=A[2];break;case 1:L=[An,ot,yn],wt=L[0],lt=L[1],It=L[2];break;case 2:U=[yn,ot,Ln],wt=U[0],lt=U[1],It=U[2];break;case 3:re=[yn,An,ot],wt=re[0],lt=re[1],It=re[2];break;case 4:we=[Ln,yn,ot],wt=we[0],lt=we[1],It=we[2];break;case 5:Ie=[ot,yn,An],wt=Ie[0],lt=Ie[1],It=Ie[2];break}}return[wt,lt,It,ge.length>3?ge[3]:1]},_j=Tj,Nj=g.unpack,Aj=g.type,Dj=S,pT=C,gT=m,Rj=Sj;pT.prototype.hsv=function(){return Rj(this._rgb)},Dj.hsv=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(pT,[null].concat(A,["hsv"])))},gT.format.hsv=_j,gT.autodetect.push({p:2,test:function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];if(A=Nj(A,"hsv"),Aj(A)==="array"&&A.length===3)return"hsv"}});var Sm={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Dc=Sm,Mj=g.unpack,mT=Math.pow,Oj=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=Mj(A,"rgb"),re=U[0],we=U[1],Ie=U[2],ge=Fj(re,we,Ie),Oe=ge[0],Fe=ge[1],Ze=ge[2],ot=116*Fe-16;return[ot<0?0:ot,500*(Oe-Fe),200*(Fe-Ze)]},q1=function(A){return(A/=255)<=.04045?A/12.92:mT((A+.055)/1.055,2.4)},Y1=function(A){return A>Dc.t3?mT(A,1/3):A/Dc.t2+Dc.t0},Fj=function(A,L,U){A=q1(A),L=q1(L),U=q1(U);var re=Y1((.4124564*A+.3575761*L+.1804375*U)/Dc.Xn),we=Y1((.2126729*A+.7151522*L+.072175*U)/Dc.Yn),Ie=Y1((.0193339*A+.119192*L+.9503041*U)/Dc.Zn);return[re,we,Ie]},vT=Oj,Rc=Sm,Pj=g.unpack,Lj=Math.pow,Bj=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];A=Pj(A,"lab");var U=A[0],re=A[1],we=A[2],Ie,ge,Oe,Fe,Ze,ot;return ge=(U+16)/116,Ie=isNaN(re)?ge:ge+re/500,Oe=isNaN(we)?ge:ge-we/200,ge=Rc.Yn*Z1(ge),Ie=Rc.Xn*Z1(Ie),Oe=Rc.Zn*Z1(Oe),Fe=X1(3.2404542*Ie-1.5371385*ge-.4985314*Oe),Ze=X1(-.969266*Ie+1.8760108*ge+.041556*Oe),ot=X1(.0556434*Ie-.2040259*ge+1.0572252*Oe),[Fe,Ze,ot,A.length>3?A[3]:1]},X1=function(A){return 255*(A<=.00304?12.92*A:1.055*Lj(A,1/2.4)-.055)},Z1=function(A){return A>Rc.t1?A*A*A:Rc.t2*(A-Rc.t0)},bT=Bj,zj=g.unpack,Vj=g.type,Wj=S,yT=C,wT=m,Hj=vT;yT.prototype.lab=function(){return Hj(this._rgb)},Wj.lab=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(yT,[null].concat(A,["lab"])))},wT.format.lab=bT,wT.autodetect.push({p:2,test:function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];if(A=zj(A,"lab"),Vj(A)==="array"&&A.length===3)return"lab"}});var Uj=g.unpack,jj=g.RAD2DEG,Gj=Math.sqrt,Kj=Math.atan2,qj=Math.round,Yj=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=Uj(A,"lab"),re=U[0],we=U[1],Ie=U[2],ge=Gj(we*we+Ie*Ie),Oe=(Kj(Ie,we)*jj+360)%360;return qj(ge*1e4)===0&&(Oe=Number.NaN),[re,ge,Oe]},$T=Yj,Xj=g.unpack,Zj=vT,Jj=$T,Qj=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=Xj(A,"rgb"),re=U[0],we=U[1],Ie=U[2],ge=Zj(re,we,Ie),Oe=ge[0],Fe=ge[1],Ze=ge[2];return Jj(Oe,Fe,Ze)},eG=Qj,tG=g.unpack,nG=g.DEG2RAD,sG=Math.sin,oG=Math.cos,rG=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=tG(A,"lch"),re=U[0],we=U[1],Ie=U[2];return isNaN(Ie)&&(Ie=0),Ie=Ie*nG,[re,oG(Ie)*we,sG(Ie)*we]},CT=rG,iG=g.unpack,aG=CT,lG=bT,uG=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];A=iG(A,"lch");var U=A[0],re=A[1],we=A[2],Ie=aG(U,re,we),ge=Ie[0],Oe=Ie[1],Fe=Ie[2],Ze=lG(ge,Oe,Fe),ot=Ze[0],wt=Ze[1],lt=Ze[2];return[ot,wt,lt,A.length>3?A[3]:1]},xT=uG,cG=g.unpack,dG=xT,fG=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=cG(A,"hcl").reverse();return dG.apply(void 0,U)},hG=fG,pG=g.unpack,gG=g.type,kT=S,Im=C,J1=m,ST=eG;Im.prototype.lch=function(){return ST(this._rgb)},Im.prototype.hcl=function(){return ST(this._rgb).reverse()},kT.lch=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(Im,[null].concat(A,["lch"])))},kT.hcl=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(Im,[null].concat(A,["hcl"])))},J1.format.lch=xT,J1.format.hcl=hG,["lch","hcl"].forEach(function(A){return J1.autodetect.push({p:2,test:function(){for(var L=[],U=arguments.length;U--;)L[U]=arguments[U];if(L=pG(L,A),gG(L)==="array"&&L.length===3)return A}})});var mG={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},IT=mG,vG=C,ET=m,bG=g.type,Df=IT,yG=iT,wG=rT;vG.prototype.name=function(){for(var A=wG(this._rgb,"rgb"),L=0,U=Object.keys(Df);L<U.length;L+=1){var re=U[L];if(Df[re]===A)return re.toLowerCase()}return A},ET.format.named=function(A){if(A=A.toLowerCase(),Df[A])return yG(Df[A]);throw new Error("unknown color name: "+A)},ET.autodetect.push({p:5,test:function(A){for(var L=[],U=arguments.length-1;U-- >0;)L[U]=arguments[U+1];if(!L.length&&bG(A)==="string"&&Df[A.toLowerCase()])return"named"}});var $G=g.unpack,CG=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=$G(A,"rgb"),re=U[0],we=U[1],Ie=U[2];return(re<<16)+(we<<8)+Ie},xG=CG,kG=g.type,SG=function(A){if(kG(A)=="number"&&A>=0&&A<=16777215){var L=A>>16,U=A>>8&255,re=A&255;return[L,U,re,1]}throw new Error("unknown num color: "+A)},IG=SG,EG=S,TT=C,_T=m,TG=g.type,_G=xG;TT.prototype.num=function(){return _G(this._rgb)},EG.num=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(TT,[null].concat(A,["num"])))},_T.format.num=IG,_T.autodetect.push({p:5,test:function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];if(A.length===1&&TG(A[0])==="number"&&A[0]>=0&&A[0]<=16777215)return"num"}});var NG=S,Q1=C,NT=m,AT=g.unpack,DT=g.type,RT=Math.round;Q1.prototype.rgb=function(A){return A===void 0&&(A=!0),A===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(RT)},Q1.prototype.rgba=function(A){return A===void 0&&(A=!0),this._rgb.slice(0,4).map(function(L,U){return U<3?A===!1?L:RT(L):L})},NG.rgb=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(Q1,[null].concat(A,["rgb"])))},NT.format.rgb=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=AT(A,"rgba");return U[3]===void 0&&(U[3]=1),U},NT.autodetect.push({p:3,test:function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];if(A=AT(A,"rgba"),DT(A)==="array"&&(A.length===3||A.length===4&&DT(A[3])=="number"&&A[3]>=0&&A[3]<=1))return"rgb"}});var Em=Math.log,AG=function(A){var L=A/100,U,re,we;return L<66?(U=255,re=L<6?0:-155.25485562709179-.44596950469579133*(re=L-2)+104.49216199393888*Em(re),we=L<20?0:-254.76935184120902+.8274096064007395*(we=L-10)+115.67994401066147*Em(we)):(U=351.97690566805693+.114206453784165*(U=L-55)-40.25366309332127*Em(U),re=325.4494125711974+.07943456536662342*(re=L-50)-28.0852963507957*Em(re),we=255),[U,re,we,1]},MT=AG,DG=MT,RG=g.unpack,MG=Math.round,OG=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];for(var U=RG(A,"rgb"),re=U[0],we=U[2],Ie=1e3,ge=4e4,Oe=.4,Fe;ge-Ie>Oe;){Fe=(ge+Ie)*.5;var Ze=DG(Fe);Ze[2]/Ze[0]>=we/re?ge=Fe:Ie=Fe}return MG(Fe)},FG=OG,ew=S,Tm=C,tw=m,PG=FG;Tm.prototype.temp=Tm.prototype.kelvin=Tm.prototype.temperature=function(){return PG(this._rgb)},ew.temp=ew.kelvin=ew.temperature=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(Tm,[null].concat(A,["temp"])))},tw.format.temp=tw.format.kelvin=tw.format.temperature=MT;var LG=g.unpack,nw=Math.cbrt,BG=Math.pow,zG=Math.sign,VG=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=LG(A,"rgb"),re=U[0],we=U[1],Ie=U[2],ge=[sw(re/255),sw(we/255),sw(Ie/255)],Oe=ge[0],Fe=ge[1],Ze=ge[2],ot=nw(.4122214708*Oe+.5363325363*Fe+.0514459929*Ze),wt=nw(.2119034982*Oe+.6806995451*Fe+.1073969566*Ze),lt=nw(.0883024619*Oe+.2817188376*Fe+.6299787005*Ze);return[.2104542553*ot+.793617785*wt-.0040720468*lt,1.9779984951*ot-2.428592205*wt+.4505937099*lt,.0259040371*ot+.7827717662*wt-.808675766*lt]},OT=VG;function sw(A){var L=Math.abs(A);return L<.04045?A/12.92:(zG(A)||1)*BG((L+.055)/1.055,2.4)}var WG=g.unpack,_m=Math.pow,HG=Math.sign,UG=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];A=WG(A,"lab");var U=A[0],re=A[1],we=A[2],Ie=_m(U+.3963377774*re+.2158037573*we,3),ge=_m(U-.1055613458*re-.0638541728*we,3),Oe=_m(U-.0894841775*re-1.291485548*we,3);return[255*ow(4.0767416621*Ie-3.3077115913*ge+.2309699292*Oe),255*ow(-1.2684380046*Ie+2.6097574011*ge-.3413193965*Oe),255*ow(-.0041960863*Ie-.7034186147*ge+1.707614701*Oe),A.length>3?A[3]:1]},FT=UG;function ow(A){var L=Math.abs(A);return L>.0031308?(HG(A)||1)*(1.055*_m(L,1/2.4)-.055):A*12.92}var jG=g.unpack,GG=g.type,KG=S,PT=C,LT=m,qG=OT;PT.prototype.oklab=function(){return qG(this._rgb)},KG.oklab=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(PT,[null].concat(A,["oklab"])))},LT.format.oklab=FT,LT.autodetect.push({p:3,test:function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];if(A=jG(A,"oklab"),GG(A)==="array"&&A.length===3)return"oklab"}});var YG=g.unpack,XG=OT,ZG=$T,JG=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];var U=YG(A,"rgb"),re=U[0],we=U[1],Ie=U[2],ge=XG(re,we,Ie),Oe=ge[0],Fe=ge[1],Ze=ge[2];return ZG(Oe,Fe,Ze)},QG=JG,eK=g.unpack,tK=CT,nK=FT,sK=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];A=eK(A,"lch");var U=A[0],re=A[1],we=A[2],Ie=tK(U,re,we),ge=Ie[0],Oe=Ie[1],Fe=Ie[2],Ze=nK(ge,Oe,Fe),ot=Ze[0],wt=Ze[1],lt=Ze[2];return[ot,wt,lt,A.length>3?A[3]:1]},oK=sK,rK=g.unpack,iK=g.type,aK=S,BT=C,zT=m,lK=QG;BT.prototype.oklch=function(){return lK(this._rgb)},aK.oklch=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];return new(Function.prototype.bind.apply(BT,[null].concat(A,["oklch"])))},zT.format.oklch=oK,zT.autodetect.push({p:3,test:function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];if(A=rK(A,"oklch"),iK(A)==="array"&&A.length===3)return"oklch"}});var VT=C,uK=g.type;VT.prototype.alpha=function(A,L){return L===void 0&&(L=!1),A!==void 0&&uK(A)==="number"?L?(this._rgb[3]=A,this):new VT([this._rgb[0],this._rgb[1],this._rgb[2],A],"rgb"):this._rgb[3]};var cK=C;cK.prototype.clipped=function(){return this._rgb._clipped||!1};var Kl=C,dK=Sm;Kl.prototype.darken=function(A){A===void 0&&(A=1);var L=this,U=L.lab();return U[0]-=dK.Kn*A,new Kl(U,"lab").alpha(L.alpha(),!0)},Kl.prototype.brighten=function(A){return A===void 0&&(A=1),this.darken(-A)},Kl.prototype.darker=Kl.prototype.darken,Kl.prototype.brighter=Kl.prototype.brighten;var fK=C;fK.prototype.get=function(A){var L=A.split("."),U=L[0],re=L[1],we=this[U]();if(re){var Ie=U.indexOf(re)-(U.substr(0,2)==="ok"?2:0);if(Ie>-1)return we[Ie];throw new Error("unknown channel "+re+" in mode "+U)}else return we};var Mc=C,hK=g.type,pK=Math.pow,gK=1e-7,mK=20;Mc.prototype.luminance=function(A){if(A!==void 0&&hK(A)==="number"){if(A===0)return new Mc([0,0,0,this._rgb[3]],"rgb");if(A===1)return new Mc([255,255,255,this._rgb[3]],"rgb");var L=this.luminance(),U="rgb",re=mK,we=function(ge,Oe){var Fe=ge.interpolate(Oe,.5,U),Ze=Fe.luminance();return Math.abs(A-Ze)<gK||!re--?Fe:Ze>A?we(ge,Fe):we(Fe,Oe)},Ie=(L>A?we(new Mc([0,0,0]),this):we(this,new Mc([255,255,255]))).rgb();return new Mc(Ie.concat([this._rgb[3]]))}return vK.apply(void 0,this._rgb.slice(0,3))};var vK=function(A,L,U){return A=rw(A),L=rw(L),U=rw(U),.2126*A+.7152*L+.0722*U},rw=function(A){return A/=255,A<=.03928?A/12.92:pK((A+.055)/1.055,2.4)},cr={},WT=C,HT=g.type,Nm=cr,UT=function(A,L,U){U===void 0&&(U=.5);for(var re=[],we=arguments.length-3;we-- >0;)re[we]=arguments[we+3];var Ie=re[0]||"lrgb";if(!Nm[Ie]&&!re.length&&(Ie=Object.keys(Nm)[0]),!Nm[Ie])throw new Error("interpolation mode "+Ie+" is not defined");return HT(A)!=="object"&&(A=new WT(A)),HT(L)!=="object"&&(L=new WT(L)),Nm[Ie](A,L,U).alpha(A.alpha()+U*(L.alpha()-A.alpha()))},jT=C,bK=UT;jT.prototype.mix=jT.prototype.interpolate=function(A,L){L===void 0&&(L=.5);for(var U=[],re=arguments.length-2;re-- >0;)U[re]=arguments[re+2];return bK.apply(void 0,[this,A,L].concat(U))};var GT=C;GT.prototype.premultiply=function(A){A===void 0&&(A=!1);var L=this._rgb,U=L[3];return A?(this._rgb=[L[0]*U,L[1]*U,L[2]*U,U],this):new GT([L[0]*U,L[1]*U,L[2]*U,U],"rgb")};var iw=C,yK=Sm;iw.prototype.saturate=function(A){A===void 0&&(A=1);var L=this,U=L.lch();return U[1]+=yK.Kn*A,U[1]<0&&(U[1]=0),new iw(U,"lch").alpha(L.alpha(),!0)},iw.prototype.desaturate=function(A){return A===void 0&&(A=1),this.saturate(-A)};var KT=C,qT=g.type;KT.prototype.set=function(A,L,U){U===void 0&&(U=!1);var re=A.split("."),we=re[0],Ie=re[1],ge=this[we]();if(Ie){var Oe=we.indexOf(Ie)-(we.substr(0,2)==="ok"?2:0);if(Oe>-1){if(qT(L)=="string")switch(L.charAt(0)){case"+":ge[Oe]+=+L;break;case"-":ge[Oe]+=+L;break;case"*":ge[Oe]*=+L.substr(1);break;case"/":ge[Oe]/=+L.substr(1);break;default:ge[Oe]=+L}else if(qT(L)==="number")ge[Oe]=L;else throw new Error("unsupported value for Color.set");var Fe=new KT(ge,we);return U?(this._rgb=Fe._rgb,this):Fe}throw new Error("unknown channel "+Ie+" in mode "+we)}else return ge};var wK=C,$K=function(A,L,U){var re=A._rgb,we=L._rgb;return new wK(re[0]+U*(we[0]-re[0]),re[1]+U*(we[1]-re[1]),re[2]+U*(we[2]-re[2]),"rgb")};cr.rgb=$K;var CK=C,aw=Math.sqrt,Oc=Math.pow,xK=function(A,L,U){var re=A._rgb,we=re[0],Ie=re[1],ge=re[2],Oe=L._rgb,Fe=Oe[0],Ze=Oe[1],ot=Oe[2];return new CK(aw(Oc(we,2)*(1-U)+Oc(Fe,2)*U),aw(Oc(Ie,2)*(1-U)+Oc(Ze,2)*U),aw(Oc(ge,2)*(1-U)+Oc(ot,2)*U),"rgb")};cr.lrgb=xK;var kK=C,SK=function(A,L,U){var re=A.lab(),we=L.lab();return new kK(re[0]+U*(we[0]-re[0]),re[1]+U*(we[1]-re[1]),re[2]+U*(we[2]-re[2]),"lab")};cr.lab=SK;var YT=C,Fc=function(A,L,U,re){var we,Ie,ge,Oe;re==="hsl"?(ge=A.hsl(),Oe=L.hsl()):re==="hsv"?(ge=A.hsv(),Oe=L.hsv()):re==="hcg"?(ge=A.hcg(),Oe=L.hcg()):re==="hsi"?(ge=A.hsi(),Oe=L.hsi()):re==="lch"||re==="hcl"?(re="hcl",ge=A.hcl(),Oe=L.hcl()):re==="oklch"&&(ge=A.oklch().reverse(),Oe=L.oklch().reverse());var Fe,Ze,ot,wt,lt,It;(re.substr(0,1)==="h"||re==="oklch")&&(we=ge,Fe=we[0],ot=we[1],lt=we[2],Ie=Oe,Ze=Ie[0],wt=Ie[1],It=Ie[2]);var St,hn,yn,An;return!isNaN(Fe)&&!isNaN(Ze)?(Ze>Fe&&Ze-Fe>180?An=Ze-(Fe+360):Ze<Fe&&Fe-Ze>180?An=Ze+360-Fe:An=Ze-Fe,hn=Fe+U*An):isNaN(Fe)?isNaN(Ze)?hn=Number.NaN:(hn=Ze,(lt==1||lt==0)&&re!="hsv"&&(St=wt)):(hn=Fe,(It==1||It==0)&&re!="hsv"&&(St=ot)),St===void 0&&(St=ot+U*(wt-ot)),yn=lt+U*(It-lt),re==="oklch"?new YT([yn,St,hn],re):new YT([hn,St,yn],re)},IK=Fc,XT=function(A,L,U){return IK(A,L,U,"lch")};cr.lch=XT,cr.hcl=XT;var EK=C,TK=function(A,L,U){var re=A.num(),we=L.num();return new EK(re+U*(we-re),"num")};cr.num=TK;var _K=Fc,NK=function(A,L,U){return _K(A,L,U,"hcg")};cr.hcg=NK;var AK=Fc,DK=function(A,L,U){return AK(A,L,U,"hsi")};cr.hsi=DK;var RK=Fc,MK=function(A,L,U){return RK(A,L,U,"hsl")};cr.hsl=MK;var OK=Fc,FK=function(A,L,U){return OK(A,L,U,"hsv")};cr.hsv=FK;var PK=C,LK=function(A,L,U){var re=A.oklab(),we=L.oklab();return new PK(re[0]+U*(we[0]-re[0]),re[1]+U*(we[1]-re[1]),re[2]+U*(we[2]-re[2]),"oklab")};cr.oklab=LK;var BK=Fc,zK=function(A,L,U){return BK(A,L,U,"oklch")};cr.oklch=zK;var lw=C,VK=g.clip_rgb,uw=Math.pow,cw=Math.sqrt,dw=Math.PI,ZT=Math.cos,JT=Math.sin,WK=Math.atan2,HK=function(A,L,U){L===void 0&&(L="lrgb"),U===void 0&&(U=null);var re=A.length;U||(U=Array.from(new Array(re)).map(function(){return 1}));var we=re/U.reduce(function(hn,yn){return hn+yn});if(U.forEach(function(hn,yn){U[yn]*=we}),A=A.map(function(hn){return new lw(hn)}),L==="lrgb")return UK(A,U);for(var Ie=A.shift(),ge=Ie.get(L),Oe=[],Fe=0,Ze=0,ot=0;ot<ge.length;ot++)if(ge[ot]=(ge[ot]||0)*U[0],Oe.push(isNaN(ge[ot])?0:U[0]),L.charAt(ot)==="h"&&!isNaN(ge[ot])){var wt=ge[ot]/180*dw;Fe+=ZT(wt)*U[0],Ze+=JT(wt)*U[0]}var lt=Ie.alpha()*U[0];A.forEach(function(hn,yn){var An=hn.get(L);lt+=hn.alpha()*U[yn+1];for(var Ln=0;Ln<ge.length;Ln++)if(!isNaN(An[Ln]))if(Oe[Ln]+=U[yn+1],L.charAt(Ln)==="h"){var go=An[Ln]/180*dw;Fe+=ZT(go)*U[yn+1],Ze+=JT(go)*U[yn+1]}else ge[Ln]+=An[Ln]*U[yn+1]});for(var It=0;It<ge.length;It++)if(L.charAt(It)==="h"){for(var St=WK(Ze/Oe[It],Fe/Oe[It])/dw*180;St<0;)St+=360;for(;St>=360;)St-=360;ge[It]=St}else ge[It]=ge[It]/Oe[It];return lt/=re,new lw(ge,L).alpha(lt>.99999?1:lt,!0)},UK=function(A,L){for(var U=A.length,re=[0,0,0,0],we=0;we<A.length;we++){var Ie=A[we],ge=L[we]/U,Oe=Ie._rgb;re[0]+=uw(Oe[0],2)*ge,re[1]+=uw(Oe[1],2)*ge,re[2]+=uw(Oe[2],2)*ge,re[3]+=Oe[3]*ge}return re[0]=cw(re[0]),re[1]=cw(re[1]),re[2]=cw(re[2]),re[3]>.9999999&&(re[3]=1),new lw(VK(re))},li=S,Pc=g.type,jK=Math.pow,fw=function(A){var L="rgb",U=li("#ccc"),re=0,we=[0,1],Ie=[],ge=[0,0],Oe=!1,Fe=[],Ze=!1,ot=0,wt=1,lt=!1,It={},St=!0,hn=1,yn=function(ut){if(ut=ut||["#fff","#000"],ut&&Pc(ut)==="string"&&li.brewer&&li.brewer[ut.toLowerCase()]&&(ut=li.brewer[ut.toLowerCase()]),Pc(ut)==="array"){ut.length===1&&(ut=[ut[0],ut[0]]),ut=ut.slice(0);for(var Ht=0;Ht<ut.length;Ht++)ut[Ht]=li(ut[Ht]);Ie.length=0;for(var mn=0;mn<ut.length;mn++)Ie.push(mn/(ut.length-1))}return Go(),Fe=ut},An=function(ut){if(Oe!=null){for(var Ht=Oe.length-1,mn=0;mn<Ht&&ut>=Oe[mn];)mn++;return mn-1}return 0},Ln=function(ut){return ut},go=function(ut){return ut},so=function(ut,Ht){var mn,pn;if(Ht==null&&(Ht=!1),isNaN(ut)||ut===null)return U;if(Ht)pn=ut;else if(Oe&&Oe.length>2){var mo=An(ut);pn=mo/(Oe.length-2)}else wt!==ot?pn=(ut-ot)/(wt-ot):pn=1;pn=go(pn),Ht||(pn=Ln(pn)),hn!==1&&(pn=jK(pn,hn)),pn=ge[0]+pn*(1-ge[0]-ge[1]),pn=Math.min(1,Math.max(0,pn));var ss=Math.floor(pn*1e4);if(St&&It[ss])mn=It[ss];else{if(Pc(Fe)==="array")for(var Dn=0;Dn<Ie.length;Dn++){var zn=Ie[Dn];if(pn<=zn){mn=Fe[Dn];break}if(pn>=zn&&Dn===Ie.length-1){mn=Fe[Dn];break}if(pn>zn&&pn<Ie[Dn+1]){pn=(pn-zn)/(Ie[Dn+1]-zn),mn=li.interpolate(Fe[Dn],Fe[Dn+1],pn,L);break}}else Pc(Fe)==="function"&&(mn=Fe(pn));St&&(It[ss]=mn)}return mn},Go=function(){return It={}};yn(A);var kn=function(ut){var Ht=li(so(ut));return Ze&&Ht[Ze]?Ht[Ze]():Ht};return kn.classes=function(ut){if(ut!=null){if(Pc(ut)==="array")Oe=ut,we=[ut[0],ut[ut.length-1]];else{var Ht=li.analyze(we);ut===0?Oe=[Ht.min,Ht.max]:Oe=li.limits(Ht,"e",ut)}return kn}return Oe},kn.domain=function(ut){if(!arguments.length)return we;ot=ut[0],wt=ut[ut.length-1],Ie=[];var Ht=Fe.length;if(ut.length===Ht&&ot!==wt)for(var mn=0,pn=Array.from(ut);mn<pn.length;mn+=1){var mo=pn[mn];Ie.push((mo-ot)/(wt-ot))}else{for(var ss=0;ss<Ht;ss++)Ie.push(ss/(Ht-1));if(ut.length>2){var Dn=ut.map(function(Vn,jn){return jn/(ut.length-1)}),zn=ut.map(function(Vn){return(Vn-ot)/(wt-ot)});zn.every(function(Vn,jn){return Dn[jn]===Vn})||(go=function(Vn){if(Vn<=0||Vn>=1)return Vn;for(var jn=0;Vn>=zn[jn+1];)jn++;var ci=(Vn-zn[jn])/(zn[jn+1]-zn[jn]),Ua=Dn[jn]+ci*(Dn[jn+1]-Dn[jn]);return Ua})}}return we=[ot,wt],kn},kn.mode=function(ut){return arguments.length?(L=ut,Go(),kn):L},kn.range=function(ut,Ht){return yn(ut),kn},kn.out=function(ut){return Ze=ut,kn},kn.spread=function(ut){return arguments.length?(re=ut,kn):re},kn.correctLightness=function(ut){return ut==null&&(ut=!0),lt=ut,Go(),lt?Ln=function(Ht){for(var mn=so(0,!0).lab()[0],pn=so(1,!0).lab()[0],mo=mn>pn,ss=so(Ht,!0).lab()[0],Dn=mn+(pn-mn)*Ht,zn=ss-Dn,Vn=0,jn=1,ci=20;Math.abs(zn)>.01&&ci-- >0;)(function(){return mo&&(zn*=-1),zn<0?(Vn=Ht,Ht+=(jn-Ht)*.5):(jn=Ht,Ht+=(Vn-Ht)*.5),ss=so(Ht,!0).lab()[0],zn=ss-Dn})();return Ht}:Ln=function(Ht){return Ht},kn},kn.padding=function(ut){return ut!=null?(Pc(ut)==="number"&&(ut=[ut,ut]),ge=ut,kn):ge},kn.colors=function(ut,Ht){arguments.length<2&&(Ht="hex");var mn=[];if(arguments.length===0)mn=Fe.slice(0);else if(ut===1)mn=[kn(.5)];else if(ut>1){var pn=we[0],mo=we[1]-pn;mn=GK(0,ut,!1).map(function(jn){return kn(pn+jn/(ut-1)*mo)})}else{A=[];var ss=[];if(Oe&&Oe.length>2)for(var Dn=1,zn=Oe.length,Vn=1<=zn;Vn?Dn<zn:Dn>zn;Vn?Dn++:Dn--)ss.push((Oe[Dn-1]+Oe[Dn])*.5);else ss=we;mn=ss.map(function(jn){return kn(jn)})}return li[Ht]&&(mn=mn.map(function(jn){return jn[Ht]()})),mn},kn.cache=function(ut){return ut!=null?(St=ut,kn):St},kn.gamma=function(ut){return ut!=null?(hn=ut,kn):hn},kn.nodata=function(ut){return ut!=null?(U=li(ut),kn):U},kn};function GK(A,L,U){for(var re=[],we=A<L,Ie=U?we?L+1:L-1:L,ge=A;we?ge<Ie:ge>Ie;we?ge++:ge--)re.push(ge);return re}var Rf=C,KK=fw,qK=function(A){for(var L=[1,1],U=1;U<A;U++){for(var re=[1],we=1;we<=L.length;we++)re[we]=(L[we]||0)+L[we-1];L=re}return L},YK=function(A){var L,U,re,we,Ie,ge,Oe;if(A=A.map(function(lt){return new Rf(lt)}),A.length===2)L=A.map(function(lt){return lt.lab()}),Ie=L[0],ge=L[1],we=function(lt){var It=[0,1,2].map(function(St){return Ie[St]+lt*(ge[St]-Ie[St])});return new Rf(It,"lab")};else if(A.length===3)U=A.map(function(lt){return lt.lab()}),Ie=U[0],ge=U[1],Oe=U[2],we=function(lt){var It=[0,1,2].map(function(St){return(1-lt)*(1-lt)*Ie[St]+2*(1-lt)*lt*ge[St]+lt*lt*Oe[St]});return new Rf(It,"lab")};else if(A.length===4){var Fe;re=A.map(function(lt){return lt.lab()}),Ie=re[0],ge=re[1],Oe=re[2],Fe=re[3],we=function(lt){var It=[0,1,2].map(function(St){return(1-lt)*(1-lt)*(1-lt)*Ie[St]+3*(1-lt)*(1-lt)*lt*ge[St]+3*(1-lt)*lt*lt*Oe[St]+lt*lt*lt*Fe[St]});return new Rf(It,"lab")}}else if(A.length>=5){var Ze,ot,wt;Ze=A.map(function(lt){return lt.lab()}),wt=A.length-1,ot=qK(wt),we=function(lt){var It=1-lt,St=[0,1,2].map(function(hn){return Ze.reduce(function(yn,An,Ln){return yn+ot[Ln]*Math.pow(It,wt-Ln)*Math.pow(lt,Ln)*An[hn]},0)});return new Rf(St,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return we},XK=function(A){var L=YK(A);return L.scale=function(){return KK(L)},L},hw=S,ui=function(A,L,U){if(!ui[U])throw new Error("unknown blend mode "+U);return ui[U](A,L)},Wa=function(A){return function(L,U){var re=hw(U).rgb(),we=hw(L).rgb();return hw.rgb(A(re,we))}},Ha=function(A){return function(L,U){var re=[];return re[0]=A(L[0],U[0]),re[1]=A(L[1],U[1]),re[2]=A(L[2],U[2]),re}},ZK=function(A){return A},JK=function(A,L){return A*L/255},QK=function(A,L){return A>L?L:A},e9=function(A,L){return A>L?A:L},t9=function(A,L){return 255*(1-(1-A/255)*(1-L/255))},n9=function(A,L){return L<128?2*A*L/255:255*(1-2*(1-A/255)*(1-L/255))},s9=function(A,L){return 255*(1-(1-L/255)/(A/255))},o9=function(A,L){return A===255?255:(A=255*(L/255)/(1-A/255),A>255?255:A)};ui.normal=Wa(Ha(ZK)),ui.multiply=Wa(Ha(JK)),ui.screen=Wa(Ha(t9)),ui.overlay=Wa(Ha(n9)),ui.darken=Wa(Ha(QK)),ui.lighten=Wa(Ha(e9)),ui.dodge=Wa(Ha(o9)),ui.burn=Wa(Ha(s9));for(var r9=ui,pw=g.type,i9=g.clip_rgb,a9=g.TWOPI,l9=Math.pow,u9=Math.sin,c9=Math.cos,QT=S,d9=function(A,L,U,re,we){A===void 0&&(A=300),L===void 0&&(L=-1.5),U===void 0&&(U=1),re===void 0&&(re=1),we===void 0&&(we=[0,1]);var Ie=0,ge;pw(we)==="array"?ge=we[1]-we[0]:(ge=0,we=[we,we]);var Oe=function(Fe){var Ze=a9*((A+120)/360+L*Fe),ot=l9(we[0]+ge*Fe,re),wt=Ie!==0?U[0]+Fe*Ie:U,lt=wt*ot*(1-ot)/2,It=c9(Ze),St=u9(Ze),hn=ot+lt*(-.14861*It+1.78277*St),yn=ot+lt*(-.29227*It-.90649*St),An=ot+lt*(1.97294*It);return QT(i9([hn*255,yn*255,An*255,1]))};return Oe.start=function(Fe){return Fe==null?A:(A=Fe,Oe)},Oe.rotations=function(Fe){return Fe==null?L:(L=Fe,Oe)},Oe.gamma=function(Fe){return Fe==null?re:(re=Fe,Oe)},Oe.hue=function(Fe){return Fe==null?U:(U=Fe,pw(U)==="array"?(Ie=U[1]-U[0],Ie===0&&(U=U[1])):Ie=0,Oe)},Oe.lightness=function(Fe){return Fe==null?we:(pw(Fe)==="array"?(we=Fe,ge=Fe[1]-Fe[0]):(we=[Fe,Fe],ge=0),Oe)},Oe.scale=function(){return QT.scale(Oe)},Oe.hue(U),Oe},f9=C,h9="0123456789abcdef",p9=Math.floor,g9=Math.random,m9=function(){for(var A="#",L=0;L<6;L++)A+=h9.charAt(p9(g9()*16));return new f9(A,"hex")},gw=u,e_=Math.log,v9=Math.pow,b9=Math.floor,y9=Math.abs,t_=function(A,L){L===void 0&&(L=null);var U={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return gw(A)==="object"&&(A=Object.values(A)),A.forEach(function(re){L&&gw(re)==="object"&&(re=re[L]),re!=null&&!isNaN(re)&&(U.values.push(re),U.sum+=re,re<U.min&&(U.min=re),re>U.max&&(U.max=re),U.count+=1)}),U.domain=[U.min,U.max],U.limits=function(re,we){return n_(U,re,we)},U},n_=function(A,L,U){L===void 0&&(L="equal"),U===void 0&&(U=7),gw(A)=="array"&&(A=t_(A));var re=A.min,we=A.max,Ie=A.values.sort(function(vw,bw){return vw-bw});if(U===1)return[re,we];var ge=[];if(L.substr(0,1)==="c"&&(ge.push(re),ge.push(we)),L.substr(0,1)==="e"){ge.push(re);for(var Oe=1;Oe<U;Oe++)ge.push(re+Oe/U*(we-re));ge.push(we)}else if(L.substr(0,1)==="l"){if(re<=0)throw new Error("Logarithmic scales are only possible for values > 0");var Fe=Math.LOG10E*e_(re),Ze=Math.LOG10E*e_(we);ge.push(re);for(var ot=1;ot<U;ot++)ge.push(v9(10,Fe+ot/U*(Ze-Fe)));ge.push(we)}else if(L.substr(0,1)==="q"){ge.push(re);for(var wt=1;wt<U;wt++){var lt=(Ie.length-1)*wt/U,It=b9(lt);if(It===lt)ge.push(Ie[It]);else{var St=lt-It;ge.push(Ie[It]*(1-St)+Ie[It+1]*St)}}ge.push(we)}else if(L.substr(0,1)==="k"){var hn,yn=Ie.length,An=new Array(yn),Ln=new Array(U),go=!0,so=0,Go=null;Go=[],Go.push(re);for(var kn=1;kn<U;kn++)Go.push(re+kn/U*(we-re));for(Go.push(we);go;){for(var ut=0;ut<U;ut++)Ln[ut]=0;for(var Ht=0;Ht<yn;Ht++)for(var mn=Ie[Ht],pn=Number.MAX_VALUE,mo=void 0,ss=0;ss<U;ss++){var Dn=y9(Go[ss]-mn);Dn<pn&&(pn=Dn,mo=ss),Ln[mo]++,An[Ht]=mo}for(var zn=new Array(U),Vn=0;Vn<U;Vn++)zn[Vn]=null;for(var jn=0;jn<yn;jn++)hn=An[jn],zn[hn]===null?zn[hn]=Ie[jn]:zn[hn]+=Ie[jn];for(var ci=0;ci<U;ci++)zn[ci]*=1/Ln[ci];go=!1;for(var Ua=0;Ua<U;Ua++)if(zn[Ua]!==Go[Ua]){go=!0;break}Go=zn,so++,so>200&&(go=!1)}for(var ja={},Lc=0;Lc<U;Lc++)ja[Lc]=[];for(var Bc=0;Bc<yn;Bc++)hn=An[Bc],ja[hn].push(Ie[Bc]);for(var ua=[],ql=0;ql<U;ql++)ua.push(ja[ql][0]),ua.push(ja[ql][ja[ql].length-1]);ua=ua.sort(function(vw,bw){return vw-bw}),ge.push(ua[0]);for(var Mf=1;Mf<ua.length;Mf+=2){var Yl=ua[Mf];!isNaN(Yl)&&ge.indexOf(Yl)===-1&&ge.push(Yl)}}return ge},s_={analyze:t_,limits:n_},o_=C,w9=function(A,L){A=new o_(A),L=new o_(L);var U=A.luminance(),re=L.luminance();return U>re?(U+.05)/(re+.05):(re+.05)/(U+.05)},r_=C,la=Math.sqrt,Fs=Math.pow,$9=Math.min,C9=Math.max,i_=Math.atan2,a_=Math.abs,Am=Math.cos,l_=Math.sin,x9=Math.exp,u_=Math.PI,k9=function(A,L,U,re,we){U===void 0&&(U=1),re===void 0&&(re=1),we===void 0&&(we=1);var Ie=function(Yl){return 360*Yl/(2*u_)},ge=function(Yl){return 2*u_*Yl/360};A=new r_(A),L=new r_(L);var Oe=Array.from(A.lab()),Fe=Oe[0],Ze=Oe[1],ot=Oe[2],wt=Array.from(L.lab()),lt=wt[0],It=wt[1],St=wt[2],hn=(Fe+lt)/2,yn=la(Fs(Ze,2)+Fs(ot,2)),An=la(Fs(It,2)+Fs(St,2)),Ln=(yn+An)/2,go=.5*(1-la(Fs(Ln,7)/(Fs(Ln,7)+Fs(25,7)))),so=Ze*(1+go),Go=It*(1+go),kn=la(Fs(so,2)+Fs(ot,2)),ut=la(Fs(Go,2)+Fs(St,2)),Ht=(kn+ut)/2,mn=Ie(i_(ot,so)),pn=Ie(i_(St,Go)),mo=mn>=0?mn:mn+360,ss=pn>=0?pn:pn+360,Dn=a_(mo-ss)>180?(mo+ss+360)/2:(mo+ss)/2,zn=1-.17*Am(ge(Dn-30))+.24*Am(ge(2*Dn))+.32*Am(ge(3*Dn+6))-.2*Am(ge(4*Dn-63)),Vn=ss-mo;Vn=a_(Vn)<=180?Vn:ss<=mo?Vn+360:Vn-360,Vn=2*la(kn*ut)*l_(ge(Vn)/2);var jn=lt-Fe,ci=ut-kn,Ua=1+.015*Fs(hn-50,2)/la(20+Fs(hn-50,2)),ja=1+.045*Ht,Lc=1+.015*Ht*zn,Bc=30*x9(-Fs((Dn-275)/25,2)),ua=2*la(Fs(Ht,7)/(Fs(Ht,7)+Fs(25,7))),ql=-ua*l_(2*ge(Bc)),Mf=la(Fs(jn/(U*Ua),2)+Fs(ci/(re*ja),2)+Fs(Vn/(we*Lc),2)+ql*(ci/(re*ja))*(Vn/(we*Lc)));return C9(0,$9(100,Mf))},c_=C,S9=function(A,L,U){U===void 0&&(U="lab"),A=new c_(A),L=new c_(L);var re=A.get(U),we=L.get(U),Ie=0;for(var ge in re){var Oe=(re[ge]||0)-(we[ge]||0);Ie+=Oe*Oe}return Math.sqrt(Ie)},I9=C,E9=function(){for(var A=[],L=arguments.length;L--;)A[L]=arguments[L];try{return new(Function.prototype.bind.apply(I9,[null].concat(A))),!0}catch{return!1}},d_=S,f_=fw,T9={cool:function(){return f_([d_.hsl(180,1,.9),d_.hsl(250,.7,.4)])},hot:function(){return f_(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Dm={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},mw=0,h_=Object.keys(Dm);mw<h_.length;mw+=1){var p_=h_[mw];Dm[p_.toLowerCase()]=Dm[p_]}var _9=Dm,no=S;no.average=HK,no.bezier=XK,no.blend=r9,no.cubehelix=d9,no.mix=no.interpolate=UT,no.random=m9,no.scale=fw,no.analyze=s_.analyze,no.contrast=w9,no.deltaE=k9,no.distance=S9,no.limits=s_.limits,no.valid=E9,no.scales=T9,no.colors=IT,no.brewer=_9;var N9=no;return N9})})(JW);var Vct=JW.exports,VJe={},x1={};x1.byteLength=UJe;x1.toByteArray=GJe;x1.fromByteArray=YJe;var Hi=[],Mr=[],WJe=typeof Uint8Array!="undefined"?Uint8Array:Array,v$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var qc=0,HJe=v$.length;qc<HJe;++qc)Hi[qc]=v$[qc],Mr[v$.charCodeAt(qc)]=qc;Mr["-".charCodeAt(0)]=62;Mr["_".charCodeAt(0)]=63;function QW(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var s=n===t?0:4-n%4;return[n,s]}function UJe(e){var t=QW(e),n=t[0],s=t[1];return(n+s)*3/4-s}function jJe(e,t,n){return(t+n)*3/4-n}function GJe(e){var t,n=QW(e),s=n[0],o=n[1],r=new WJe(jJe(e,s,o)),i=0,a=o>0?s-4:s,l;for(l=0;l<a;l+=4)t=Mr[e.charCodeAt(l)]<<18|Mr[e.charCodeAt(l+1)]<<12|Mr[e.charCodeAt(l+2)]<<6|Mr[e.charCodeAt(l+3)],r[i++]=t>>16&255,r[i++]=t>>8&255,r[i++]=t&255;return o===2&&(t=Mr[e.charCodeAt(l)]<<2|Mr[e.charCodeAt(l+1)]>>4,r[i++]=t&255),o===1&&(t=Mr[e.charCodeAt(l)]<<10|Mr[e.charCodeAt(l+1)]<<4|Mr[e.charCodeAt(l+2)]>>2,r[i++]=t>>8&255,r[i++]=t&255),r}function KJe(e){return Hi[e>>18&63]+Hi[e>>12&63]+Hi[e>>6&63]+Hi[e&63]}function qJe(e,t,n){for(var s,o=[],r=t;r<n;r+=3)s=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(e[r+2]&255),o.push(KJe(s));return o.join("")}function YJe(e){for(var t,n=e.length,s=n%3,o=[],r=16383,i=0,a=n-s;i<a;i+=r)o.push(qJe(e,i,i+r>a?a:i+r));return s===1?(t=e[n-1],o.push(Hi[t>>2]+Hi[t<<4&63]+"==")):s===2&&(t=(e[n-2]<<8)+e[n-1],o.push(Hi[t>>10]+Hi[t>>4&63]+Hi[t<<2&63]+"=")),o.join("")}var mE={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */mE.read=function(e,t,n,s,o){var r,i,a=o*8-s-1,l=(1<<a)-1,u=l>>1,c=-7,d=n?o-1:0,f=n?-1:1,h=e[t+d];for(d+=f,r=h&(1<<-c)-1,h>>=-c,c+=a;c>0;r=r*256+e[t+d],d+=f,c-=8);for(i=r&(1<<-c)-1,r>>=-c,c+=s;c>0;i=i*256+e[t+d],d+=f,c-=8);if(r===0)r=1-u;else{if(r===l)return i?NaN:(h?-1:1)*(1/0);i=i+Math.pow(2,s),r=r-u}return(h?-1:1)*i*Math.pow(2,r-s)};mE.write=function(e,t,n,s,o,r){var i,a,l,u=r*8-o-1,c=(1<<u)-1,d=c>>1,f=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=s?0:r-1,p=s?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+d>=1?t+=f/l:t+=f*Math.pow(2,1-d),t*l>=2&&(i++,l/=2),i+d>=c?(a=0,i=c):i+d>=1?(a=(t*l-1)*Math.pow(2,o),i=i+d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),i=0));o>=8;e[n+h]=a&255,h+=p,a/=256,o-=8);for(i=i<<o|a,u+=o;u>0;e[n+h]=i&255,h+=p,i/=256,u-=8);e[n+h-p]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=x1,n=mE,s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=r(),!a.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{const z=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf(z,k),z.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function i(z){if(z>o)throw new RangeError('The value "'+z+'" is invalid for option "size"');const k=new Uint8Array(z);return Object.setPrototypeOf(k,a.prototype),k}function a(z,k,E){if(typeof z=="number"){if(typeof k=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(z)}return l(z,k,E)}a.poolSize=8192;function l(z,k,E){if(typeof z=="string")return f(z,k);if(ArrayBuffer.isView(z))return p(z);if(z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z);if(Ae(z,ArrayBuffer)||z&&Ae(z.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(Ae(z,SharedArrayBuffer)||z&&Ae(z.buffer,SharedArrayBuffer)))return g(z,k,E);if(typeof z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=z.valueOf&&z.valueOf();if(W!=null&&W!==z)return a.from(W,k,E);const G=m(z);if(G)return G;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof z[Symbol.toPrimitive]=="function")return a.from(z[Symbol.toPrimitive]("string"),k,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof z)}a.from=function(z,k,E){return l(z,k,E)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(z){if(typeof z!="number")throw new TypeError('"size" argument must be of type number');if(z<0)throw new RangeError('The value "'+z+'" is invalid for option "size"')}function c(z,k,E){return u(z),z<=0?i(z):k!==void 0?typeof E=="string"?i(z).fill(k,E):i(z).fill(k):i(z)}a.alloc=function(z,k,E){return c(z,k,E)};function d(z){return u(z),i(z<0?0:v(z)|0)}a.allocUnsafe=function(z){return d(z)},a.allocUnsafeSlow=function(z){return d(z)};function f(z,k){if((typeof k!="string"||k==="")&&(k="utf8"),!a.isEncoding(k))throw new TypeError("Unknown encoding: "+k);const E=$(z,k)|0;let W=i(E);const G=W.write(z,k);return G!==E&&(W=W.slice(0,G)),W}function h(z){const k=z.length<0?0:v(z.length)|0,E=i(k);for(let W=0;W<k;W+=1)E[W]=z[W]&255;return E}function p(z){if(Ae(z,Uint8Array)){const k=new Uint8Array(z);return g(k.buffer,k.byteOffset,k.byteLength)}return h(z)}function g(z,k,E){if(k<0||z.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if(z.byteLength<k+(E||0))throw new RangeError('"length" is outside of buffer bounds');let W;return k===void 0&&E===void 0?W=new Uint8Array(z):E===void 0?W=new Uint8Array(z,k):W=new Uint8Array(z,k,E),Object.setPrototypeOf(W,a.prototype),W}function m(z){if(a.isBuffer(z)){const k=v(z.length)|0,E=i(k);return E.length===0||z.copy(E,0,0,k),E}if(z.length!==void 0)return typeof z.length!="number"||it(z.length)?i(0):h(z);if(z.type==="Buffer"&&Array.isArray(z.data))return h(z.data)}function v(z){if(z>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return z|0}function b(z){return+z!=z&&(z=0),a.alloc(+z)}a.isBuffer=function(k){return k!=null&&k._isBuffer===!0&&k!==a.prototype},a.compare=function(k,E){if(Ae(k,Uint8Array)&&(k=a.from(k,k.offset,k.byteLength)),Ae(E,Uint8Array)&&(E=a.from(E,E.offset,E.byteLength)),!a.isBuffer(k)||!a.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===E)return 0;let W=k.length,G=E.length;for(let he=0,_e=Math.min(W,G);he<_e;++he)if(k[he]!==E[he]){W=k[he],G=E[he];break}return W<G?-1:G<W?1:0},a.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(k,E){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(k.length===0)return a.alloc(0);let W;if(E===void 0)for(E=0,W=0;W<k.length;++W)E+=k[W].length;const G=a.allocUnsafe(E);let he=0;for(W=0;W<k.length;++W){let _e=k[W];if(Ae(_e,Uint8Array))he+_e.length>G.length?(a.isBuffer(_e)||(_e=a.from(_e)),_e.copy(G,he)):Uint8Array.prototype.set.call(G,_e,he);else if(a.isBuffer(_e))_e.copy(G,he);else throw new TypeError('"list" argument must be an Array of Buffers');he+=_e.length}return G};function $(z,k){if(a.isBuffer(z))return z.length;if(ArrayBuffer.isView(z)||Ae(z,ArrayBuffer))return z.byteLength;if(typeof z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof z);const E=z.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&E===0)return 0;let G=!1;for(;;)switch(k){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return xe(z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return Re(z).length;default:if(G)return W?-1:xe(z).length;k=(""+k).toLowerCase(),G=!0}}a.byteLength=$;function y(z,k,E){let W=!1;if((k===void 0||k<0)&&(k=0),k>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,k>>>=0,E<=k))return"";for(z||(z="utf8");;)switch(z){case"hex":return X(this,k,E);case"utf8":case"utf-8":return F(this,k,E);case"ascii":return B(this,k,E);case"latin1":case"binary":return j(this,k,E);case"base64":return D(this,k,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,k,E);default:if(W)throw new TypeError("Unknown encoding: "+z);z=(z+"").toLowerCase(),W=!0}}a.prototype._isBuffer=!0;function w(z,k,E){const W=z[k];z[k]=z[E],z[E]=W}a.prototype.swap16=function(){const k=this.length;if(k%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<k;E+=2)w(this,E,E+1);return this},a.prototype.swap32=function(){const k=this.length;if(k%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<k;E+=4)w(this,E,E+3),w(this,E+1,E+2);return this},a.prototype.swap64=function(){const k=this.length;if(k%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<k;E+=8)w(this,E,E+7),w(this,E+1,E+6),w(this,E+2,E+5),w(this,E+3,E+4);return this},a.prototype.toString=function(){const k=this.length;return k===0?"":arguments.length===0?F(this,0,k):y.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(k){if(!a.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k?!0:a.compare(this,k)===0},a.prototype.inspect=function(){let k="";const E=e.INSPECT_MAX_BYTES;return k=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(k+=" ... "),"<Buffer "+k+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(k,E,W,G,he){if(Ae(k,Uint8Array)&&(k=a.from(k,k.offset,k.byteLength)),!a.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(E===void 0&&(E=0),W===void 0&&(W=k?k.length:0),G===void 0&&(G=0),he===void 0&&(he=this.length),E<0||W>k.length||G<0||he>this.length)throw new RangeError("out of range index");if(G>=he&&E>=W)return 0;if(G>=he)return-1;if(E>=W)return 1;if(E>>>=0,W>>>=0,G>>>=0,he>>>=0,this===k)return 0;let _e=he-G,ht=W-E;const Dt=Math.min(_e,ht),xt=this.slice(G,he),zt=k.slice(E,W);for(let ln=0;ln<Dt;++ln)if(xt[ln]!==zt[ln]){_e=xt[ln],ht=zt[ln];break}return _e<ht?-1:ht<_e?1:0};function C(z,k,E,W,G){if(z.length===0)return-1;if(typeof E=="string"?(W=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,it(E)&&(E=G?0:z.length-1),E<0&&(E=z.length+E),E>=z.length){if(G)return-1;E=z.length-1}else if(E<0)if(G)E=0;else return-1;if(typeof k=="string"&&(k=a.from(k,W)),a.isBuffer(k))return k.length===0?-1:x(z,k,E,W,G);if(typeof k=="number")return k=k&255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(z,k,E):Uint8Array.prototype.lastIndexOf.call(z,k,E):x(z,[k],E,W,G);throw new TypeError("val must be string, number or Buffer")}function x(z,k,E,W,G){let he=1,_e=z.length,ht=k.length;if(W!==void 0&&(W=String(W).toLowerCase(),W==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(z.length<2||k.length<2)return-1;he=2,_e/=2,ht/=2,E/=2}function Dt(zt,ln){return he===1?zt[ln]:zt.readUInt16BE(ln*he)}let xt;if(G){let zt=-1;for(xt=E;xt<_e;xt++)if(Dt(z,xt)===Dt(k,zt===-1?0:xt-zt)){if(zt===-1&&(zt=xt),xt-zt+1===ht)return zt*he}else zt!==-1&&(xt-=xt-zt),zt=-1}else for(E+ht>_e&&(E=_e-ht),xt=E;xt>=0;xt--){let zt=!0;for(let ln=0;ln<ht;ln++)if(Dt(z,xt+ln)!==Dt(k,ln)){zt=!1;break}if(zt)return xt}return-1}a.prototype.includes=function(k,E,W){return this.indexOf(k,E,W)!==-1},a.prototype.indexOf=function(k,E,W){return C(this,k,E,W,!0)},a.prototype.lastIndexOf=function(k,E,W){return C(this,k,E,W,!1)};function S(z,k,E,W){E=Number(E)||0;const G=z.length-E;W?(W=Number(W),W>G&&(W=G)):W=G;const he=k.length;W>he/2&&(W=he/2);let _e;for(_e=0;_e<W;++_e){const ht=parseInt(k.substr(_e*2,2),16);if(it(ht))return _e;z[E+_e]=ht}return _e}function T(z,k,E,W){return ve(xe(k,z.length-E),z,E,W)}function I(z,k,E,W){return ve(oe(k),z,E,W)}function _(z,k,E,W){return ve(Re(k),z,E,W)}function N(z,k,E,W){return ve(Me(k,z.length-E),z,E,W)}a.prototype.write=function(k,E,W,G){if(E===void 0)G="utf8",W=this.length,E=0;else if(W===void 0&&typeof E=="string")G=E,W=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(W)?(W=W>>>0,G===void 0&&(G="utf8")):(G=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const he=this.length-E;if((W===void 0||W>he)&&(W=he),k.length>0&&(W<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");G||(G="utf8");let _e=!1;for(;;)switch(G){case"hex":return S(this,k,E,W);case"utf8":case"utf-8":return T(this,k,E,W);case"ascii":case"latin1":case"binary":return I(this,k,E,W);case"base64":return _(this,k,E,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,k,E,W);default:if(_e)throw new TypeError("Unknown encoding: "+G);G=(""+G).toLowerCase(),_e=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(z,k,E){return k===0&&E===z.length?t.fromByteArray(z):t.fromByteArray(z.slice(k,E))}function F(z,k,E){E=Math.min(z.length,E);const W=[];let G=k;for(;G<E;){const he=z[G];let _e=null,ht=he>239?4:he>223?3:he>191?2:1;if(G+ht<=E){let Dt,xt,zt,ln;switch(ht){case 1:he<128&&(_e=he);break;case 2:Dt=z[G+1],(Dt&192)===128&&(ln=(he&31)<<6|Dt&63,ln>127&&(_e=ln));break;case 3:Dt=z[G+1],xt=z[G+2],(Dt&192)===128&&(xt&192)===128&&(ln=(he&15)<<12|(Dt&63)<<6|xt&63,ln>2047&&(ln<55296||ln>57343)&&(_e=ln));break;case 4:Dt=z[G+1],xt=z[G+2],zt=z[G+3],(Dt&192)===128&&(xt&192)===128&&(zt&192)===128&&(ln=(he&15)<<18|(Dt&63)<<12|(xt&63)<<6|zt&63,ln>65535&&ln<1114112&&(_e=ln))}}_e===null?(_e=65533,ht=1):_e>65535&&(_e-=65536,W.push(_e>>>10&1023|55296),_e=56320|_e&1023),W.push(_e),G+=ht}return M(W)}const P=4096;function M(z){const k=z.length;if(k<=P)return String.fromCharCode.apply(String,z);let E="",W=0;for(;W<k;)E+=String.fromCharCode.apply(String,z.slice(W,W+=P));return E}function B(z,k,E){let W="";E=Math.min(z.length,E);for(let G=k;G<E;++G)W+=String.fromCharCode(z[G]&127);return W}function j(z,k,E){let W="";E=Math.min(z.length,E);for(let G=k;G<E;++G)W+=String.fromCharCode(z[G]);return W}function X(z,k,E){const W=z.length;(!k||k<0)&&(k=0),(!E||E<0||E>W)&&(E=W);let G="";for(let he=k;he<E;++he)G+=Je[z[he]];return G}function ae(z,k,E){const W=z.slice(k,E);let G="";for(let he=0;he<W.length-1;he+=2)G+=String.fromCharCode(W[he]+W[he+1]*256);return G}a.prototype.slice=function(k,E){const W=this.length;k=~~k,E=E===void 0?W:~~E,k<0?(k+=W,k<0&&(k=0)):k>W&&(k=W),E<0?(E+=W,E<0&&(E=0)):E>W&&(E=W),E<k&&(E=k);const G=this.subarray(k,E);return Object.setPrototypeOf(G,a.prototype),G};function be(z,k,E){if(z%1!==0||z<0)throw new RangeError("offset is not uint");if(z+k>E)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(k,E,W){k=k>>>0,E=E>>>0,W||be(k,E,this.length);let G=this[k],he=1,_e=0;for(;++_e<E&&(he*=256);)G+=this[k+_e]*he;return G},a.prototype.readUintBE=a.prototype.readUIntBE=function(k,E,W){k=k>>>0,E=E>>>0,W||be(k,E,this.length);let G=this[k+--E],he=1;for(;E>0&&(he*=256);)G+=this[k+--E]*he;return G},a.prototype.readUint8=a.prototype.readUInt8=function(k,E){return k=k>>>0,E||be(k,1,this.length),this[k]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(k,E){return k=k>>>0,E||be(k,2,this.length),this[k]|this[k+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(k,E){return k=k>>>0,E||be(k,2,this.length),this[k]<<8|this[k+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(k,E){return k=k>>>0,E||be(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+this[k+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(k,E){return k=k>>>0,E||be(k,4,this.length),this[k]*16777216+(this[k+1]<<16|this[k+2]<<8|this[k+3])},a.prototype.readBigUInt64LE=st(function(k){k=k>>>0,Y(k,"offset");const E=this[k],W=this[k+7];(E===void 0||W===void 0)&&ne(k,this.length-8);const G=E+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24,he=this[++k]+this[++k]*2**8+this[++k]*2**16+W*2**24;return BigInt(G)+(BigInt(he)<<BigInt(32))}),a.prototype.readBigUInt64BE=st(function(k){k=k>>>0,Y(k,"offset");const E=this[k],W=this[k+7];(E===void 0||W===void 0)&&ne(k,this.length-8);const G=E*2**24+this[++k]*2**16+this[++k]*2**8+this[++k],he=this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+W;return(BigInt(G)<<BigInt(32))+BigInt(he)}),a.prototype.readIntLE=function(k,E,W){k=k>>>0,E=E>>>0,W||be(k,E,this.length);let G=this[k],he=1,_e=0;for(;++_e<E&&(he*=256);)G+=this[k+_e]*he;return he*=128,G>=he&&(G-=Math.pow(2,8*E)),G},a.prototype.readIntBE=function(k,E,W){k=k>>>0,E=E>>>0,W||be(k,E,this.length);let G=E,he=1,_e=this[k+--G];for(;G>0&&(he*=256);)_e+=this[k+--G]*he;return he*=128,_e>=he&&(_e-=Math.pow(2,8*E)),_e},a.prototype.readInt8=function(k,E){return k=k>>>0,E||be(k,1,this.length),this[k]&128?(255-this[k]+1)*-1:this[k]},a.prototype.readInt16LE=function(k,E){k=k>>>0,E||be(k,2,this.length);const W=this[k]|this[k+1]<<8;return W&32768?W|4294901760:W},a.prototype.readInt16BE=function(k,E){k=k>>>0,E||be(k,2,this.length);const W=this[k+1]|this[k]<<8;return W&32768?W|4294901760:W},a.prototype.readInt32LE=function(k,E){return k=k>>>0,E||be(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},a.prototype.readInt32BE=function(k,E){return k=k>>>0,E||be(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},a.prototype.readBigInt64LE=st(function(k){k=k>>>0,Y(k,"offset");const E=this[k],W=this[k+7];(E===void 0||W===void 0)&&ne(k,this.length-8);const G=this[k+4]+this[k+5]*2**8+this[k+6]*2**16+(W<<24);return(BigInt(G)<<BigInt(32))+BigInt(E+this[++k]*2**8+this[++k]*2**16+this[++k]*2**24)}),a.prototype.readBigInt64BE=st(function(k){k=k>>>0,Y(k,"offset");const E=this[k],W=this[k+7];(E===void 0||W===void 0)&&ne(k,this.length-8);const G=(E<<24)+this[++k]*2**16+this[++k]*2**8+this[++k];return(BigInt(G)<<BigInt(32))+BigInt(this[++k]*2**24+this[++k]*2**16+this[++k]*2**8+W)}),a.prototype.readFloatLE=function(k,E){return k=k>>>0,E||be(k,4,this.length),n.read(this,k,!0,23,4)},a.prototype.readFloatBE=function(k,E){return k=k>>>0,E||be(k,4,this.length),n.read(this,k,!1,23,4)},a.prototype.readDoubleLE=function(k,E){return k=k>>>0,E||be(k,8,this.length),n.read(this,k,!0,52,8)},a.prototype.readDoubleBE=function(k,E){return k=k>>>0,E||be(k,8,this.length),n.read(this,k,!1,52,8)};function ie(z,k,E,W,G,he){if(!a.isBuffer(z))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>G||k<he)throw new RangeError('"value" argument is out of bounds');if(E+W>z.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(k,E,W,G){if(k=+k,E=E>>>0,W=W>>>0,!G){const ht=Math.pow(2,8*W)-1;ie(this,k,E,W,ht,0)}let he=1,_e=0;for(this[E]=k&255;++_e<W&&(he*=256);)this[E+_e]=k/he&255;return E+W},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(k,E,W,G){if(k=+k,E=E>>>0,W=W>>>0,!G){const ht=Math.pow(2,8*W)-1;ie(this,k,E,W,ht,0)}let he=W-1,_e=1;for(this[E+he]=k&255;--he>=0&&(_e*=256);)this[E+he]=k/_e&255;return E+W},a.prototype.writeUint8=a.prototype.writeUInt8=function(k,E,W){return k=+k,E=E>>>0,W||ie(this,k,E,1,255,0),this[E]=k&255,E+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(k,E,W){return k=+k,E=E>>>0,W||ie(this,k,E,2,65535,0),this[E]=k&255,this[E+1]=k>>>8,E+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(k,E,W){return k=+k,E=E>>>0,W||ie(this,k,E,2,65535,0),this[E]=k>>>8,this[E+1]=k&255,E+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(k,E,W){return k=+k,E=E>>>0,W||ie(this,k,E,4,4294967295,0),this[E+3]=k>>>24,this[E+2]=k>>>16,this[E+1]=k>>>8,this[E]=k&255,E+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(k,E,W){return k=+k,E=E>>>0,W||ie(this,k,E,4,4294967295,0),this[E]=k>>>24,this[E+1]=k>>>16,this[E+2]=k>>>8,this[E+3]=k&255,E+4};function ye(z,k,E,W,G){Ve(k,W,G,z,E,7);let he=Number(k&BigInt(4294967295));z[E++]=he,he=he>>8,z[E++]=he,he=he>>8,z[E++]=he,he=he>>8,z[E++]=he;let _e=Number(k>>BigInt(32)&BigInt(4294967295));return z[E++]=_e,_e=_e>>8,z[E++]=_e,_e=_e>>8,z[E++]=_e,_e=_e>>8,z[E++]=_e,E}function ue(z,k,E,W,G){Ve(k,W,G,z,E,7);let he=Number(k&BigInt(4294967295));z[E+7]=he,he=he>>8,z[E+6]=he,he=he>>8,z[E+5]=he,he=he>>8,z[E+4]=he;let _e=Number(k>>BigInt(32)&BigInt(4294967295));return z[E+3]=_e,_e=_e>>8,z[E+2]=_e,_e=_e>>8,z[E+1]=_e,_e=_e>>8,z[E]=_e,E+8}a.prototype.writeBigUInt64LE=st(function(k,E=0){return ye(this,k,E,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=st(function(k,E=0){return ue(this,k,E,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(k,E,W,G){if(k=+k,E=E>>>0,!G){const Dt=Math.pow(2,8*W-1);ie(this,k,E,W,Dt-1,-Dt)}let he=0,_e=1,ht=0;for(this[E]=k&255;++he<W&&(_e*=256);)k<0&&ht===0&&this[E+he-1]!==0&&(ht=1),this[E+he]=(k/_e>>0)-ht&255;return E+W},a.prototype.writeIntBE=function(k,E,W,G){if(k=+k,E=E>>>0,!G){const Dt=Math.pow(2,8*W-1);ie(this,k,E,W,Dt-1,-Dt)}let he=W-1,_e=1,ht=0;for(this[E+he]=k&255;--he>=0&&(_e*=256);)k<0&&ht===0&&this[E+he+1]!==0&&(ht=1),this[E+he]=(k/_e>>0)-ht&255;return E+W},a.prototype.writeInt8=function(k,E,W){return k=+k,E=E>>>0,W||ie(this,k,E,1,127,-128),k<0&&(k=255+k+1),this[E]=k&255,E+1},a.prototype.writeInt16LE=function(k,E,W){return k=+k,E=E>>>0,W||ie(this,k,E,2,32767,-32768),this[E]=k&255,this[E+1]=k>>>8,E+2},a.prototype.writeInt16BE=function(k,E,W){return k=+k,E=E>>>0,W||ie(this,k,E,2,32767,-32768),this[E]=k>>>8,this[E+1]=k&255,E+2},a.prototype.writeInt32LE=function(k,E,W){return k=+k,E=E>>>0,W||ie(this,k,E,4,2147483647,-2147483648),this[E]=k&255,this[E+1]=k>>>8,this[E+2]=k>>>16,this[E+3]=k>>>24,E+4},a.prototype.writeInt32BE=function(k,E,W){return k=+k,E=E>>>0,W||ie(this,k,E,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[E]=k>>>24,this[E+1]=k>>>16,this[E+2]=k>>>8,this[E+3]=k&255,E+4},a.prototype.writeBigInt64LE=st(function(k,E=0){return ye(this,k,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=st(function(k,E=0){return ue(this,k,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Z(z,k,E,W,G,he){if(E+W>z.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function ee(z,k,E,W,G){return k=+k,E=E>>>0,G||Z(z,k,E,4),n.write(z,k,E,W,23,4),E+4}a.prototype.writeFloatLE=function(k,E,W){return ee(this,k,E,!0,W)},a.prototype.writeFloatBE=function(k,E,W){return ee(this,k,E,!1,W)};function te(z,k,E,W,G){return k=+k,E=E>>>0,G||Z(z,k,E,8),n.write(z,k,E,W,52,8),E+8}a.prototype.writeDoubleLE=function(k,E,W){return te(this,k,E,!0,W)},a.prototype.writeDoubleBE=function(k,E,W){return te(this,k,E,!1,W)},a.prototype.copy=function(k,E,W,G){if(!a.isBuffer(k))throw new TypeError("argument should be a Buffer");if(W||(W=0),!G&&G!==0&&(G=this.length),E>=k.length&&(E=k.length),E||(E=0),G>0&&G<W&&(G=W),G===W||k.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("sourceEnd out of bounds");G>this.length&&(G=this.length),k.length-E<G-W&&(G=k.length-E+W);const he=G-W;return this===k&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,W,G):Uint8Array.prototype.set.call(k,this.subarray(W,G),E),he},a.prototype.fill=function(k,E,W,G){if(typeof k=="string"){if(typeof E=="string"?(G=E,E=0,W=this.length):typeof W=="string"&&(G=W,W=this.length),G!==void 0&&typeof G!="string")throw new TypeError("encoding must be a string");if(typeof G=="string"&&!a.isEncoding(G))throw new TypeError("Unknown encoding: "+G);if(k.length===1){const _e=k.charCodeAt(0);(G==="utf8"&&_e<128||G==="latin1")&&(k=_e)}}else typeof k=="number"?k=k&255:typeof k=="boolean"&&(k=Number(k));if(E<0||this.length<E||this.length<W)throw new RangeError("Out of range index");if(W<=E)return this;E=E>>>0,W=W===void 0?this.length:W>>>0,k||(k=0);let he;if(typeof k=="number")for(he=E;he<W;++he)this[he]=k;else{const _e=a.isBuffer(k)?k:a.from(k,G),ht=_e.length;if(ht===0)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(he=0;he<W-E;++he)this[he+E]=_e[he%ht]}return this};const fe={};function De(z,k,E){fe[z]=class extends E{constructor(){super();Object.defineProperty(this,"message",{value:k.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${z}]`,this.stack,delete this.name}get code(){return z}set code(G){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:G,writable:!0})}toString(){return`${this.name} [${z}]: ${this.message}`}}}De("ERR_BUFFER_OUT_OF_BOUNDS",function(z){return z?`${z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),De("ERR_INVALID_ARG_TYPE",function(z,k){return`The "${z}" argument must be of type number. Received type ${typeof k}`},TypeError),De("ERR_OUT_OF_RANGE",function(z,k,E){let W=`The value of "${z}" is out of range.`,G=E;return Number.isInteger(E)&&Math.abs(E)>2**32?G=We(String(E)):typeof E=="bigint"&&(G=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(G=We(G)),G+="n"),W+=` It must be ${k}. Received ${G}`,W},RangeError);function We(z){let k="",E=z.length;const W=z[0]==="-"?1:0;for(;E>=W+4;E-=3)k=`_${z.slice(E-3,E)}${k}`;return`${z.slice(0,E)}${k}`}function He(z,k,E){Y(k,"offset"),(z[k]===void 0||z[k+E]===void 0)&&ne(k,z.length-(E+1))}function Ve(z,k,E,W,G,he){if(z>E||z<k){const _e=typeof k=="bigint"?"n":"";let ht;throw he>3?k===0||k===BigInt(0)?ht=`>= 0${_e} and < 2${_e} ** ${(he+1)*8}${_e}`:ht=`>= -(2${_e} ** ${(he+1)*8-1}${_e}) and < 2 ** ${(he+1)*8-1}${_e}`:ht=`>= ${k}${_e} and <= ${E}${_e}`,new fe.ERR_OUT_OF_RANGE("value",ht,z)}He(W,G,he)}function Y(z,k){if(typeof z!="number")throw new fe.ERR_INVALID_ARG_TYPE(k,"number",z)}function ne(z,k,E){throw Math.floor(z)!==z?(Y(z,E),new fe.ERR_OUT_OF_RANGE(E||"offset","an integer",z)):k<0?new fe.ERR_BUFFER_OUT_OF_BOUNDS:new fe.ERR_OUT_OF_RANGE(E||"offset",`>= ${E?1:0} and <= ${k}`,z)}const q=/[^+/0-9A-Za-z-_]/g;function le(z){if(z=z.split("=")[0],z=z.trim().replace(q,""),z.length<2)return"";for(;z.length%4!==0;)z=z+"=";return z}function xe(z,k){k=k||1/0;let E;const W=z.length;let G=null;const he=[];for(let _e=0;_e<W;++_e){if(E=z.charCodeAt(_e),E>55295&&E<57344){if(!G){if(E>56319){(k-=3)>-1&&he.push(239,191,189);continue}else if(_e+1===W){(k-=3)>-1&&he.push(239,191,189);continue}G=E;continue}if(E<56320){(k-=3)>-1&&he.push(239,191,189),G=E;continue}E=(G-55296<<10|E-56320)+65536}else G&&(k-=3)>-1&&he.push(239,191,189);if(G=null,E<128){if((k-=1)<0)break;he.push(E)}else if(E<2048){if((k-=2)<0)break;he.push(E>>6|192,E&63|128)}else if(E<65536){if((k-=3)<0)break;he.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((k-=4)<0)break;he.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return he}function oe(z){const k=[];for(let E=0;E<z.length;++E)k.push(z.charCodeAt(E)&255);return k}function Me(z,k){let E,W,G;const he=[];for(let _e=0;_e<z.length&&!((k-=2)<0);++_e)E=z.charCodeAt(_e),W=E>>8,G=E%256,he.push(G),he.push(W);return he}function Re(z){return t.toByteArray(le(z))}function ve(z,k,E,W){let G;for(G=0;G<W&&!(G+E>=k.length||G>=z.length);++G)k[G+E]=z[G];return G}function Ae(z,k){return z instanceof k||z!=null&&z.constructor!=null&&z.constructor.name!=null&&z.constructor.name===k.name}function it(z){return z!==z}const Je=function(){const z="0123456789abcdef",k=new Array(256);for(let E=0;E<16;++E){const W=E*16;for(let G=0;G<16;++G)k[W+G]=z[E]+z[G]}return k}();function st(z){return typeof BigInt=="undefined"?vt:z}function vt(){throw new Error("BigInt not supported")}})(VJe);function Hct(e){return IAe((t,n)=>{t.props||(t.props=Object.create(null)),t.props[n]=e})}/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */const eH=function(){return typeof window=="undefined"?function(e){return e()}:window.requestAnimationFrame}();function tH(e,t,n){const s=n||(i=>Array.prototype.slice.call(i));let o=!1,r=[];return function(...i){r=s(i),o||(o=!0,eH.call(window,()=>{o=!1,e.apply(t,r)}))}}function XJe(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const vE=e=>e==="start"?"left":e==="end"?"right":"center",_o=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,ZJe=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function da(){}const JJe=function(){let e=0;return function(){return e++}}();function On(e){return e===null||typeof e=="undefined"}function Wn(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.substr(0,7)==="[object"&&t.substr(-6)==="Array]"}function dn(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const $s=e=>(typeof e=="number"||e instanceof Number)&&isFinite(+e);function Dr(e,t){return $s(e)?e:t}function Xt(e,t){return typeof e=="undefined"?t:e}const QJe=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:e/t,nH=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Jn(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Gn(e,t,n,s){let o,r,i;if(Wn(e))if(r=e.length,s)for(o=r-1;o>=0;o--)t.call(n,e[o],o);else for(o=0;o<r;o++)t.call(n,e[o],o);else if(dn(e))for(i=Object.keys(e),r=i.length,o=0;o<r;o++)t.call(n,e[i[o]],i[o])}function J0(e,t){let n,s,o,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(o=e[n],r=t[n],o.datasetIndex!==r.datasetIndex||o.index!==r.index)return!1;return!0}function Q0(e){if(Wn(e))return e.map(Q0);if(dn(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let o=0;for(;o<s;++o)t[n[o]]=Q0(e[n[o]]);return t}return e}function sH(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function eQe(e,t,n,s){if(!sH(e))return;const o=t[e],r=n[e];dn(o)&&dn(r)?yp(o,r,s):t[e]=Q0(r)}function yp(e,t,n){const s=Wn(t)?t:[t],o=s.length;if(!dn(e))return e;n=n||{};const r=n.merger||eQe;for(let i=0;i<o;++i){if(t=s[i],!dn(t))continue;const a=Object.keys(t);for(let l=0,u=a.length;l<u;++l)r(a[l],e,t,n)}return e}function Dh(e,t){return yp(e,t,{merger:tQe})}function tQe(e,t,n){if(!sH(e))return;const s=t[e],o=n[e];dn(s)&&dn(o)?Dh(s,o):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Q0(o))}const nQe="",sQe=".";function fM(e,t){const n=e.indexOf(sQe,t);return n===-1?e.length:n}function oc(e,t){if(t===nQe)return e;let n=0,s=fM(t,n);for(;e&&s>n;)e=e[t.substr(n,s-n)],n=s+1,s=fM(t,n);return e}function bE(e){return e.charAt(0).toUpperCase()+e.slice(1)}const js=e=>typeof e!="undefined",kl=e=>typeof e=="function",hM=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function oQe(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Bn=Math.PI,ns=2*Bn,rQe=ns+Bn,eb=Number.POSITIVE_INFINITY,oH=Bn/180,xs=Bn/2,jf=Bn/4,pM=Bn*2/3,zr=Math.log10,Zi=Math.sign;function gM(e){const t=Math.round(e);e=Rh(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(zr(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function iQe(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((o,r)=>o-r).pop(),t}function wp(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Rh(e,t,n){return Math.abs(e-t)<n}function aQe(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function rH(e,t,n){let s,o,r;for(s=0,o=e.length;s<o;s++)r=e[s][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function io(e){return e*(Bn/180)}function yE(e){return e*(180/Bn)}function mM(e){if(!$s(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function iH(e,t){const n=t.x-e.x,s=t.y-e.y,o=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Bn&&(r+=ns),{angle:r,distance:o}}function $p(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function lQe(e,t){return(e-t+rQe)%ns-Bn}function hr(e){return(e%ns+ns)%ns}function Cp(e,t,n,s){const o=hr(e),r=hr(t),i=hr(n),a=hr(r-o),l=hr(i-o),u=hr(o-r),c=hr(o-i);return o===r||o===i||s&&r===i||a>l&&u<c}function ao(e,t,n){return Math.max(t,Math.min(n,e))}function uQe(e){return ao(e,-32768,32767)}function wa(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}const uv=e=>e===0||e===1,vM=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ns/n)),bM=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ns/n)+1,Mh={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*xs)+1,easeOutSine:e=>Math.sin(e*xs),easeInOutSine:e=>-.5*(Math.cos(Bn*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>uv(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>uv(e)?e:vM(e,.075,.3),easeOutElastic:e=>uv(e)?e:bM(e,.075,.3),easeInOutElastic(e){return uv(e)?e:e<.5?.5*vM(e*2,.1125,.45):.5+.5*bM(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Mh.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Mh.easeInBounce(e*2)*.5:Mh.easeOutBounce(e*2-1)*.5+.5};/*!
 * @kurkle/color v0.1.9
 * https://github.com/kurkle/color#readme
 * (c) 2020 Jukka Kurkela
 * Released under the MIT License
 */const Ar={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ox="0123456789ABCDEF",cQe=e=>Ox[e&15],dQe=e=>Ox[(e&240)>>4]+Ox[e&15],cv=e=>(e&240)>>4===(e&15);function fQe(e){return cv(e.r)&&cv(e.g)&&cv(e.b)&&cv(e.a)}function hQe(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Ar[e[1]]*17,g:255&Ar[e[2]]*17,b:255&Ar[e[3]]*17,a:t===5?Ar[e[4]]*17:255}:(t===7||t===9)&&(n={r:Ar[e[1]]<<4|Ar[e[2]],g:Ar[e[3]]<<4|Ar[e[4]],b:Ar[e[5]]<<4|Ar[e[6]],a:t===9?Ar[e[7]]<<4|Ar[e[8]]:255})),n}function pQe(e){var t=fQe(e)?cQe:dQe;return e&&"#"+t(e.r)+t(e.g)+t(e.b)+(e.a<255?t(e.a):"")}function fm(e){return e+.5|0}const k1=(e,t,n)=>Math.max(Math.min(e,n),t);function gh(e){return k1(fm(e*2.55),0,255)}function xp(e){return k1(fm(e*255),0,255)}function wE(e){return k1(fm(e/2.55)/100,0,1)}function yM(e){return k1(fm(e*100),0,100)}const gQe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function mQe(e){const t=gQe.exec(e);let n=255,s,o,r;if(!!t){if(t[7]!==s){const i=+t[7];n=255&(t[8]?gh(i):i*255)}return s=+t[1],o=+t[3],r=+t[5],s=255&(t[2]?gh(s):s),o=255&(t[4]?gh(o):o),r=255&(t[6]?gh(r):r),{r:s,g:o,b:r,a:n}}}function vQe(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${wE(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const bQe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function aH(e,t,n){const s=t*Math.min(n,1-n),o=(r,i=(r+e/30)%12)=>n-s*Math.max(Math.min(i-3,9-i,1),-1);return[o(0),o(8),o(4)]}function yQe(e,t,n){const s=(o,r=(o+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function wQe(e,t,n){const s=aH(e,1,.5);let o;for(t+n>1&&(o=1/(t+n),t*=o,n*=o),o=0;o<3;o++)s[o]*=1-t-n,s[o]+=t;return s}function $E(e){const n=e.r/255,s=e.g/255,o=e.b/255,r=Math.max(n,s,o),i=Math.min(n,s,o),a=(r+i)/2;let l,u,c;return r!==i&&(c=r-i,u=a>.5?c/(2-r-i):c/(r+i),l=r===n?(s-o)/c+(s<o?6:0):r===s?(o-n)/c+2:(n-s)/c+4,l=l*60+.5),[l|0,u||0,a]}function CE(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(xp)}function xE(e,t,n){return CE(aH,e,t,n)}function $Qe(e,t,n){return CE(wQe,e,t,n)}function CQe(e,t,n){return CE(yQe,e,t,n)}function lH(e){return(e%360+360)%360}function xQe(e){const t=bQe.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?gh(+t[5]):xp(+t[5]));const o=lH(+t[2]),r=+t[3]/100,i=+t[4]/100;return t[1]==="hwb"?s=$Qe(o,r,i):t[1]==="hsv"?s=CQe(o,r,i):s=xE(o,r,i),{r:s[0],g:s[1],b:s[2],a:n}}function kQe(e,t){var n=$E(e);n[0]=lH(n[0]+t),n=xE(n),e.r=n[0],e.g=n[1],e.b=n[2]}function SQe(e){if(!e)return;const t=$E(e),n=t[0],s=yM(t[1]),o=yM(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${o}%, ${wE(e.a)})`:`hsl(${n}, ${s}%, ${o}%)`}const wM={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$M={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function IQe(){const e={},t=Object.keys($M),n=Object.keys(wM);let s,o,r,i,a;for(s=0;s<t.length;s++){for(i=a=t[s],o=0;o<n.length;o++)r=n[o],a=a.replace(r,wM[r]);r=parseInt($M[i],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let dv;function EQe(e){dv||(dv=IQe(),dv.transparent=[0,0,0,0]);const t=dv[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}function fv(e,t,n){if(e){let s=$E(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=xE(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function uH(e,t){return e&&Object.assign(t||{},e)}function CM(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=xp(e[3]))):(t=uH(e,{r:0,g:0,b:0,a:1}),t.a=xp(t.a)),t}function TQe(e){return e.charAt(0)==="r"?mQe(e):xQe(e)}class tb{constructor(t){if(t instanceof tb)return t;const n=typeof t;let s;n==="object"?s=CM(t):n==="string"&&(s=hQe(t)||EQe(t)||TQe(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=uH(this._rgb);return t&&(t.a=wE(t.a)),t}set rgb(t){this._rgb=CM(t)}rgbString(){return this._valid?vQe(this._rgb):this._rgb}hexString(){return this._valid?pQe(this._rgb):this._rgb}hslString(){return this._valid?SQe(this._rgb):this._rgb}mix(t,n){const s=this;if(t){const o=s.rgb,r=t.rgb;let i;const a=n===i?.5:n,l=2*a-1,u=o.a-r.a,c=((l*u===-1?l:(l+u)/(1+l*u))+1)/2;i=1-c,o.r=255&c*o.r+i*r.r+.5,o.g=255&c*o.g+i*r.g+.5,o.b=255&c*o.b+i*r.b+.5,o.a=a*o.a+(1-a)*r.a,s.rgb=o}return s}clone(){return new tb(this.rgb)}alpha(t){return this._rgb.a=xp(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=fm(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return fv(this._rgb,2,t),this}darken(t){return fv(this._rgb,2,-t),this}saturate(t){return fv(this._rgb,1,t),this}desaturate(t){return fv(this._rgb,1,-t),this}rotate(t){return kQe(this._rgb,t),this}}function cH(e){return new tb(e)}const dH=e=>e instanceof CanvasGradient||e instanceof CanvasPattern;function xM(e){return dH(e)?e:cH(e)}function b$(e){return dH(e)?e:cH(e).saturate(.5).darken(.1).hexString()}const rc=Object.create(null),Fx=Object.create(null);function Oh(e,t){if(!t)return e;const n=t.split(".");for(let s=0,o=n.length;s<o;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function y$(e,t,n){return typeof t=="string"?yp(Oh(e,t),n):yp(Oh(e,""),t)}class _Qe{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>b$(s.backgroundColor),this.hoverBorderColor=(n,s)=>b$(s.borderColor),this.hoverColor=(n,s)=>b$(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,n){return y$(this,t,n)}get(t){return Oh(this,t)}describe(t,n){return y$(Fx,t,n)}override(t,n){return y$(rc,t,n)}route(t,n,s,o){const r=Oh(this,t),i=Oh(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=i[o];return dn(l)?Object.assign({},u,l):Xt(l,u)},set(l){this[a]=l}}})}}var Cn=new _Qe({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function NQe(e){return!e||On(e.size)||On(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function nb(e,t,n,s,o){let r=t[o];return r||(r=t[o]=e.measureText(o).width,n.push(o)),r>s&&(s=r),s}function AQe(e,t,n,s){s=s||{};let o=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(o=s.data={},r=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let i=0;const a=n.length;let l,u,c,d,f;for(l=0;l<a;l++)if(d=n[l],d!=null&&Wn(d)!==!0)i=nb(e,o,r,i,d);else if(Wn(d))for(u=0,c=d.length;u<c;u++)f=d[u],f!=null&&!Wn(f)&&(i=nb(e,o,r,i,f));e.restore();const h=r.length/2;if(h>n.length){for(l=0;l<h;l++)delete o[r[l]];r.splice(0,h)}return i}function ou(e,t,n){const s=e.currentDevicePixelRatio,o=n!==0?Math.max(n/2,.5):0;return Math.round((t-o)*s)/s+o}function kM(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function kp(e,t,n,s){let o,r,i,a,l;const u=t.pointStyle,c=t.rotation,d=t.radius;let f=(c||0)*oH;if(u&&typeof u=="object"&&(o=u.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(f),e.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),e.restore();return}if(!(isNaN(d)||d<=0)){switch(e.beginPath(),u){default:e.arc(n,s,d,0,ns),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(f)*d,s-Math.cos(f)*d),f+=pM,e.lineTo(n+Math.sin(f)*d,s-Math.cos(f)*d),f+=pM,e.lineTo(n+Math.sin(f)*d,s-Math.cos(f)*d),e.closePath();break;case"rectRounded":l=d*.516,a=d-l,r=Math.cos(f+jf)*a,i=Math.sin(f+jf)*a,e.arc(n-r,s-i,l,f-Bn,f-xs),e.arc(n+i,s-r,l,f-xs,f),e.arc(n+r,s+i,l,f,f+xs),e.arc(n-i,s+r,l,f+xs,f+Bn),e.closePath();break;case"rect":if(!c){a=Math.SQRT1_2*d,e.rect(n-a,s-a,2*a,2*a);break}f+=jf;case"rectRot":r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+i,s-r),e.lineTo(n+r,s+i),e.lineTo(n-i,s+r),e.closePath();break;case"crossRot":f+=jf;case"cross":r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+r,s+i),e.moveTo(n+i,s-r),e.lineTo(n-i,s+r);break;case"star":r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+r,s+i),e.moveTo(n+i,s-r),e.lineTo(n-i,s+r),f+=jf,r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+r,s+i),e.moveTo(n+i,s-r),e.lineTo(n-i,s+r);break;case"line":r=Math.cos(f)*d,i=Math.sin(f)*d,e.moveTo(n-r,s-i),e.lineTo(n+r,s+i);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(f)*d,s+Math.sin(f)*d);break}e.fill(),t.borderWidth>0&&e.stroke()}}function ic(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function hm(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function pm(e){e.restore()}function DQe(e,t,n,s,o){if(!t)return e.lineTo(n.x,n.y);if(o==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else o==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function RQe(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function ac(e,t,n,s,o,r={}){const i=Wn(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let l,u;for(e.save(),e.font=o.string,MQe(e,r),l=0;l<i.length;++l)u=i[l],a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),On(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(u,n,s,r.maxWidth)),e.fillText(u,n,s,r.maxWidth),OQe(e,n,s,u,r),s+=o.lineHeight;e.restore()}function MQe(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),On(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function OQe(e,t,n,s,o){if(o.strikethrough||o.underline){const r=e.measureText(s),i=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,u=n+r.actualBoundingBoxDescent,c=o.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=o.decorationWidth||2,e.moveTo(i,c),e.lineTo(a,c),e.stroke()}}function Sp(e,t){const{x:n,y:s,w:o,h:r,radius:i}=t;e.arc(n+i.topLeft,s+i.topLeft,i.topLeft,-xs,Bn,!0),e.lineTo(n,s+r-i.bottomLeft),e.arc(n+i.bottomLeft,s+r-i.bottomLeft,i.bottomLeft,Bn,xs,!0),e.lineTo(n+o-i.bottomRight,s+r),e.arc(n+o-i.bottomRight,s+r-i.bottomRight,i.bottomRight,xs,0,!0),e.lineTo(n+o,s+i.topRight),e.arc(n+o-i.topRight,s+i.topRight,i.topRight,0,-xs,!0),e.lineTo(n+i.topLeft,s)}const FQe=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),PQe=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function LQe(e,t){const n=(""+e).match(FQe);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const BQe=e=>+e||0;function kE(e,t){const n={},s=dn(t),o=s?Object.keys(t):t,r=dn(e)?s?i=>Xt(e[i],e[t[i]]):i=>e[i]:()=>e;for(const i of o)n[i]=BQe(r(i));return n}function fH(e){return kE(e,{top:"y",right:"x",bottom:"y",left:"x"})}function zu(e){return kE(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Qs(e){const t=fH(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Rs(e,t){e=e||{},t=t||Cn.font;let n=Xt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=Xt(e.style,t.style);s&&!(""+s).match(PQe)&&(console.warn('Invalid font style specified: "'+s+'"'),s="");const o={family:Xt(e.family,t.family),lineHeight:LQe(Xt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:Xt(e.weight,t.weight),string:""};return o.string=NQe(o),o}function mh(e,t,n,s){let o=!0,r,i,a;for(r=0,i=e.length;r<i;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),o=!1),n!==void 0&&Wn(a)&&(a=a[n%a.length],o=!1),a!==void 0))return s&&!o&&(s.cacheable=!1),a}function zQe(e,t,n){const{min:s,max:o}=e,r=nH(t,(o-s)/2),i=(a,l)=>n&&a===0?0:a+l;return{min:i(s,-Math.abs(r)),max:i(o,r)}}function Ul(e,t){return Object.assign(Object.create(e),t)}function SE(e,t,n){n=n||(i=>e[i]<t);let s=e.length-1,o=0,r;for(;s-o>1;)r=o+s>>1,n(r)?o=r:s=r;return{lo:o,hi:s}}const $a=(e,t,n)=>SE(e,n,s=>e[s][t]<n),VQe=(e,t,n)=>SE(e,n,s=>e[s][t]>=n);function WQe(e,t,n){let s=0,o=e.length;for(;s<o&&e[s]<t;)s++;for(;o>s&&e[o-1]>n;)o--;return s>0||o<e.length?e.slice(s,o):e}const hH=["push","pop","shift","splice","unshift"];function HQe(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),hH.forEach(n=>{const s="_onData"+bE(n),o=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const i=o.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),i}})})}function SM(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,o=s.indexOf(t);o!==-1&&s.splice(o,1),!(s.length>0)&&(hH.forEach(r=>{delete e[r]}),delete e._chartjs)}function pH(e){const t=new Set;let n,s;for(n=0,s=e.length;n<s;++n)t.add(e[n]);return t.size===s?e:Array.from(t)}function IE(e,t=[""],n=e,s,o=()=>e[0]){js(s)||(s=bH("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:s,_getTarget:o,override:i=>IE([i,...e],t,n,s)};return new Proxy(r,{deleteProperty(i,a){return delete i[a],delete i._keys,delete e[0][a],!0},get(i,a){return mH(i,a,()=>ZQe(a,t,e,i))},getOwnPropertyDescriptor(i,a){return Reflect.getOwnPropertyDescriptor(i._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(i,a){return EM(i).includes(a)},ownKeys(i){return EM(i)},set(i,a,l){const u=i._storage||(i._storage=o());return i[a]=u[a]=l,delete i._keys,!0}})}function qd(e,t,n,s){const o={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:gH(e,s),setContext:r=>qd(e,r,n,s),override:r=>qd(e.override(r),t,n,s)};return new Proxy(o,{deleteProperty(r,i){return delete r[i],delete e[i],!0},get(r,i,a){return mH(r,i,()=>jQe(r,i,a))},getOwnPropertyDescriptor(r,i){return r._descriptors.allKeys?Reflect.has(e,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,i)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,i){return Reflect.has(e,i)},ownKeys(){return Reflect.ownKeys(e)},set(r,i,a){return e[i]=a,delete r[i],!0}})}function gH(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:o=t.allKeys}=e;return{allKeys:o,scriptable:n,indexable:s,isScriptable:kl(n)?n:()=>n,isIndexable:kl(s)?s:()=>s}}const UQe=(e,t)=>e?e+bE(t):t,EE=(e,t)=>dn(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function mH(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const s=n();return e[t]=s,s}function jQe(e,t,n){const{_proxy:s,_context:o,_subProxy:r,_descriptors:i}=e;let a=s[t];return kl(a)&&i.isScriptable(t)&&(a=GQe(t,a,e,n)),Wn(a)&&a.length&&(a=KQe(t,a,e,i.isIndexable)),EE(t,a)&&(a=qd(a,o,r&&r[t],i)),a}function GQe(e,t,n,s){const{_proxy:o,_context:r,_subProxy:i,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);return a.add(e),t=t(r,i||s),a.delete(e),EE(e,t)&&(t=TE(o._scopes,o,e,t)),t}function KQe(e,t,n,s){const{_proxy:o,_context:r,_subProxy:i,_descriptors:a}=n;if(js(r.index)&&s(e))t=t[r.index%t.length];else if(dn(t[0])){const l=t,u=o._scopes.filter(c=>c!==l);t=[];for(const c of l){const d=TE(u,o,e,c);t.push(qd(d,r,i&&i[e],a))}}return t}function vH(e,t,n){return kl(e)?e(t,n):e}const qQe=(e,t)=>e===!0?t:typeof e=="string"?oc(t,e):void 0;function YQe(e,t,n,s,o){for(const r of t){const i=qQe(n,r);if(i){e.add(i);const a=vH(i._fallback,n,o);if(js(a)&&a!==n&&a!==s)return a}else if(i===!1&&js(s)&&n!==s)return null}return!1}function TE(e,t,n,s){const o=t._rootScopes,r=vH(t._fallback,n,s),i=[...e,...o],a=new Set;a.add(s);let l=IM(a,i,n,r||n,s);return l===null||js(r)&&r!==n&&(l=IM(a,i,r,l,s),l===null)?!1:IE(Array.from(a),[""],o,r,()=>XQe(t,n,s))}function IM(e,t,n,s,o){for(;n;)n=YQe(e,t,n,s,o);return n}function XQe(e,t,n){const s=e._getTarget();t in s||(s[t]={});const o=s[t];return Wn(o)&&dn(n)?n:o}function ZQe(e,t,n,s){let o;for(const r of t)if(o=bH(UQe(r,e),n),js(o))return EE(e,o)?TE(n,s,e,o):o}function bH(e,t){for(const n of t){if(!n)continue;const s=n[e];if(js(s))return s}}function EM(e){let t=e._keys;return t||(t=e._keys=JQe(e._scopes)),t}function JQe(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(o=>!o.startsWith("_")))t.add(s);return Array.from(t)}const QQe=Number.EPSILON||1e-14,Yd=(e,t)=>t<e.length&&!e[t].skip&&e[t],yH=e=>e==="x"?"y":"x";function eet(e,t,n,s){const o=e.skip?t:e,r=t,i=n.skip?t:n,a=$p(r,o),l=$p(i,r);let u=a/(a+l),c=l/(a+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;const d=s*u,f=s*c;return{previous:{x:r.x-d*(i.x-o.x),y:r.y-d*(i.y-o.y)},next:{x:r.x+f*(i.x-o.x),y:r.y+f*(i.y-o.y)}}}function tet(e,t,n){const s=e.length;let o,r,i,a,l,u=Yd(e,0);for(let c=0;c<s-1;++c)if(l=u,u=Yd(e,c+1),!(!l||!u)){if(Rh(t[c],0,QQe)){n[c]=n[c+1]=0;continue}o=n[c]/t[c],r=n[c+1]/t[c],a=Math.pow(o,2)+Math.pow(r,2),!(a<=9)&&(i=3/Math.sqrt(a),n[c]=o*i*t[c],n[c+1]=r*i*t[c])}}function net(e,t,n="x"){const s=yH(n),o=e.length;let r,i,a,l=Yd(e,0);for(let u=0;u<o;++u){if(i=a,a=l,l=Yd(e,u+1),!a)continue;const c=a[n],d=a[s];i&&(r=(c-i[n])/3,a[`cp1${n}`]=c-r,a[`cp1${s}`]=d-r*t[u]),l&&(r=(l[n]-c)/3,a[`cp2${n}`]=c+r,a[`cp2${s}`]=d+r*t[u])}}function set(e,t="x"){const n=yH(t),s=e.length,o=Array(s).fill(0),r=Array(s);let i,a,l,u=Yd(e,0);for(i=0;i<s;++i)if(a=l,l=u,u=Yd(e,i+1),!!l){if(u){const c=u[t]-l[t];o[i]=c!==0?(u[n]-l[n])/c:0}r[i]=a?u?Zi(o[i-1])!==Zi(o[i])?0:(o[i-1]+o[i])/2:o[i-1]:o[i]}tet(e,o,r),net(e,r,t)}function hv(e,t,n){return Math.max(Math.min(e,n),t)}function oet(e,t){let n,s,o,r,i,a=ic(e[0],t);for(n=0,s=e.length;n<s;++n)i=r,r=a,a=n<s-1&&ic(e[n+1],t),!!r&&(o=e[n],i&&(o.cp1x=hv(o.cp1x,t.left,t.right),o.cp1y=hv(o.cp1y,t.top,t.bottom)),a&&(o.cp2x=hv(o.cp2x,t.left,t.right),o.cp2y=hv(o.cp2y,t.top,t.bottom)))}function ret(e,t,n,s,o){let r,i,a,l;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")set(e,o);else{let u=s?e[e.length-1]:e[0];for(r=0,i=e.length;r<i;++r)a=e[r],l=eet(u,a,e[Math.min(r+1,i-(s?0:1))%i],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}t.capBezierPoints&&oet(e,n)}function wH(){return typeof window!="undefined"&&typeof document!="undefined"}function _E(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function sb(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const S1=e=>window.getComputedStyle(e,null);function iet(e,t){return S1(e).getPropertyValue(t)}const aet=["top","right","bottom","left"];function Vu(e,t,n){const s={};n=n?"-"+n:"";for(let o=0;o<4;o++){const r=aet[o];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const uet=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function cet(e,t){const n=e.native||e,s=n.touches,o=s&&s.length?s[0]:n,{offsetX:r,offsetY:i}=o;let a=!1,l,u;if(uet(r,i,n.target))l=r,u=i;else{const c=t.getBoundingClientRect();l=o.clientX-c.left,u=o.clientY-c.top,a=!0}return{x:l,y:u,box:a}}function $H(e,t){const{canvas:n,currentDevicePixelRatio:s}=t,o=S1(n),r=o.boxSizing==="border-box",i=Vu(o,"padding"),a=Vu(o,"border","width"),{x:l,y:u,box:c}=cet(e,n),d=i.left+(c&&a.left),f=i.top+(c&&a.top);let{width:h,height:p}=t;return r&&(h-=i.width+a.width,p-=i.height+a.height),{x:Math.round((l-d)/h*n.width/s),y:Math.round((u-f)/p*n.height/s)}}function det(e,t,n){let s,o;if(t===void 0||n===void 0){const r=_E(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const i=r.getBoundingClientRect(),a=S1(r),l=Vu(a,"border","width"),u=Vu(a,"padding");t=i.width-u.width-l.width,n=i.height-u.height-l.height,s=sb(a.maxWidth,r,"clientWidth"),o=sb(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||eb,maxHeight:o||eb}}const w$=e=>Math.round(e*10)/10;function fet(e,t,n,s){const o=S1(e),r=Vu(o,"margin"),i=sb(o.maxWidth,e,"clientWidth")||eb,a=sb(o.maxHeight,e,"clientHeight")||eb,l=det(e,t,n);let{width:u,height:c}=l;if(o.boxSizing==="content-box"){const d=Vu(o,"border","width"),f=Vu(o,"padding");u-=f.width+d.width,c-=f.height+d.height}return u=Math.max(0,u-r.width),c=Math.max(0,s?Math.floor(u/s):c-r.height),u=w$(Math.min(u,i,l.maxWidth)),c=w$(Math.min(c,a,l.maxHeight)),u&&!c&&(c=w$(u/2)),{width:u,height:c}}function TM(e,t,n){const s=t||1,o=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=o/s,e.width=r/s;const i=e.canvas;return i.style&&(n||!i.style.height&&!i.style.width)&&(i.style.height=`${e.height}px`,i.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||i.height!==o||i.width!==r?(e.currentDevicePixelRatio=s,i.height=o,i.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const het=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function _M(e,t){const n=iet(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function hu(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function pet(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function get(e,t,n,s){const o={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},i=hu(e,o,n),a=hu(o,r,n),l=hu(r,t,n),u=hu(i,a,n),c=hu(a,l,n);return hu(u,c,n)}const NM=new Map;function met(e,t){t=t||{};const n=e+JSON.stringify(t);let s=NM.get(n);return s||(s=new Intl.NumberFormat(e,t),NM.set(n,s)),s}function gm(e,t,n){return met(t,n).format(e)}const vet=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},bet=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function bd(e,t,n){return e?vet(t,n):bet()}function CH(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function xH(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function kH(e){return e==="angle"?{between:Cp,compare:lQe,normalize:hr}:{between:wa,compare:(t,n)=>t-n,normalize:t=>t}}function AM({start:e,end:t,count:n,loop:s,style:o}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:o}}function yet(e,t,n){const{property:s,start:o,end:r}=n,{between:i,normalize:a}=kH(s),l=t.length;let{start:u,end:c,loop:d}=e,f,h;if(d){for(u+=l,c+=l,f=0,h=l;f<h&&i(a(t[u%l][s]),o,r);++f)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:d,style:e.style}}function SH(e,t,n){if(!n)return[e];const{property:s,start:o,end:r}=n,i=t.length,{compare:a,between:l,normalize:u}=kH(s),{start:c,end:d,loop:f,style:h}=yet(e,t,n),p=[];let g=!1,m=null,v,b,$;const y=()=>l(o,$,v)&&a(o,$)!==0,w=()=>a(r,v)===0||l(r,$,v),C=()=>g||y(),x=()=>!g||w();for(let S=c,T=c;S<=d;++S)b=t[S%i],!b.skip&&(v=u(b[s]),v!==$&&(g=l(v,o,r),m===null&&C()&&(m=a(v,o)===0?S:T),m!==null&&x()&&(p.push(AM({start:m,end:S,loop:f,count:i,style:h})),m=null),T=S,$=v));return m!==null&&p.push(AM({start:m,end:d,loop:f,count:i,style:h})),p}function IH(e,t){const n=[],s=e.segments;for(let o=0;o<s.length;o++){const r=SH(s[o],e.points,t);r.length&&n.push(...r)}return n}function wet(e,t,n,s){let o=0,r=t-1;if(n&&!s)for(;o<t&&!e[o].skip;)o++;for(;o<t&&e[o].skip;)o++;for(o%=t,n&&(r+=o);r>o&&e[r%t].skip;)r--;return r%=t,{start:o,end:r}}function $et(e,t,n,s){const o=e.length,r=[];let i=t,a=e[t],l;for(l=t+1;l<=n;++l){const u=e[l%o];u.skip||u.stop?a.skip||(s=!1,r.push({start:t%o,end:(l-1)%o,loop:s}),t=i=u.stop?l:null):(i=l,a.skip&&(t=l)),a=u}return i!==null&&r.push({start:t%o,end:i%o,loop:s}),r}function Cet(e,t){const n=e.points,s=e.options.spanGaps,o=n.length;if(!o)return[];const r=!!e._loop,{start:i,end:a}=wet(n,o,r,s);if(s===!0)return DM(e,[{start:i,end:a,loop:r}],n,t);const l=a<i?a+o:a,u=!!e._fullLoop&&i===0&&a===o-1;return DM(e,$et(n,i,l,u),n,t)}function DM(e,t,n,s){return!s||!s.setContext||!n?t:xet(e,t,n,s)}function xet(e,t,n,s){const o=e._chart.getContext(),r=RM(e.options),{_datasetIndex:i,options:{spanGaps:a}}=e,l=n.length,u=[];let c=r,d=t[0].start,f=d;function h(p,g,m,v){const b=a?-1:1;if(p!==g){for(p+=l;n[p%l].skip;)p-=b;for(;n[g%l].skip;)g+=b;p%l!==g%l&&(u.push({start:p%l,end:g%l,loop:m,style:v}),c=v,d=g%l)}}for(const p of t){d=a?d:p.start;let g=n[d%l],m;for(f=d+1;f<=p.end;f++){const v=n[f%l];m=RM(s.setContext(Ul(o,{type:"segment",p0:g,p1:v,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:i}))),ket(m,c)&&h(d,f-1,p.loop,c),g=v,c=m}d<f-1&&h(d,f-1,p.loop,c)}return u}function RM(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function ket(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}/*!
 * Chart.js v3.7.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class Iet{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,o){const r=n.listeners[o],i=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:i,currentStep:Math.min(s-n.start,i)}))}_refresh(){this._request||(this._running=!0,this._request=eH.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,o)=>{if(!s.running||!s.items.length)return;const r=s.items;let i=r.length-1,a=!1,l;for(;i>=0;--i)l=r[i],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),a=!0):(r[i]=r[r.length-1],r.pop());a&&(o.draw(),this._notify(o,s,t,"progress")),r.length||(s.running=!1,this._notify(o,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);!n||(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,o)=>Math.max(s,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let o=s.length-1;for(;o>=0;--o)s[o].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ha=new Iet;const MM="transparent",Eet={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=xM(e||MM),o=s.valid&&xM(t||MM);return o&&o.valid?o.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class Tet{constructor(t,n,s,o){const r=n[s];o=mh([t.to,o,r,t.from]);const i=mh([t.from,r,o]);this._active=!0,this._fn=t.fn||Eet[t.type||typeof i],this._easing=Mh[t.easing]||Mh.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=i,this._to=o,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const o=this._target[this._prop],r=s-this._start,i=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(i,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=mh([t.to,n,o,t.from]),this._from=mh([t.from,o,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,o=this._prop,r=this._from,i=this._loop,a=this._to;let l;if(this._active=r!==a&&(i||n<s),!this._active){this._target[o]=a,this._notify(!0);return}if(n<0){this._target[o]=r;return}l=n/s%2,l=i&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[o]=this._fn(r,a,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let o=0;o<s.length;o++)s[o][n]()}}const _et=["x","y","borderWidth","radius","tension"],Net=["color","borderColor","backgroundColor"];Cn.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Aet=Object.keys(Cn.animation);Cn.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"});Cn.set("animations",{colors:{type:"color",properties:Net},numbers:{type:"number",properties:_et}});Cn.describe("animations",{_fallback:"animation"});Cn.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}});class NE{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!dn(t))return;const n=this._properties;Object.getOwnPropertyNames(t).forEach(s=>{const o=t[s];if(!dn(o))return;const r={};for(const i of Aet)r[i]=o[i];(Wn(o.properties)&&o.properties||[s]).forEach(i=>{(i===s||!n.has(i))&&n.set(i,r)})})}_animateOptions(t,n){const s=n.options,o=Ret(t,s);if(!o)return[];const r=this._createAnimations(o,s);return s.$shared&&Det(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,o=[],r=t.$animations||(t.$animations={}),i=Object.keys(n),a=Date.now();let l;for(l=i.length-1;l>=0;--l){const u=i[l];if(u.charAt(0)==="$")continue;if(u==="options"){o.push(...this._animateOptions(t,n));continue}const c=n[u];let d=r[u];const f=s.get(u);if(d)if(f&&d.active()){d.update(f,c,a);continue}else d.cancel();if(!f||!f.duration){t[u]=c;continue}r[u]=d=new Tet(f,t,u,c),o.push(d)}return o}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return ha.add(this._chart,s),!0}}function Det(e,t){const n=[],s=Object.keys(t);for(let o=0;o<s.length;o++){const r=e[s[o]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function Ret(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function OM(e,t){const n=e&&e.options||{},s=n.reverse,o=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:o,end:s?o:r}}function Met(e,t,n){if(n===!1)return!1;const s=OM(e,n),o=OM(t,n);return{top:o.end,right:s.end,bottom:o.start,left:s.start}}function Oet(e){let t,n,s,o;return dn(e)?(t=e.top,n=e.right,s=e.bottom,o=e.left):t=n=s=o=e,{top:t,right:n,bottom:s,left:o,disabled:e===!1}}function EH(e,t){const n=[],s=e._getSortedDatasetMetas(t);let o,r;for(o=0,r=s.length;o<r;++o)n.push(s[o].index);return n}function FM(e,t,n,s={}){const o=e.keys,r=s.mode==="single";let i,a,l,u;if(t!==null){for(i=0,a=o.length;i<a;++i){if(l=+o[i],l===n){if(s.all)continue;break}u=e.values[l],$s(u)&&(r||t===0||Zi(t)===Zi(u))&&(t+=u)}return t}}function Fet(e){const t=Object.keys(e),n=new Array(t.length);let s,o,r;for(s=0,o=t.length;s<o;++s)r=t[s],n[s]={x:r,y:e[r]};return n}function PM(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function Pet(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function Let(e){const{min:t,max:n,minDefined:s,maxDefined:o}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:o?n:Number.POSITIVE_INFINITY}}function Bet(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function LM(e,t,n,s){for(const o of t.getMatchingVisibleMetas(s).reverse()){const r=e[o.index];if(n&&r>0||!n&&r<0)return o.index}return null}function BM(e,t){const{chart:n,_cachedMeta:s}=e,o=n._stacks||(n._stacks={}),{iScale:r,vScale:i,index:a}=s,l=r.axis,u=i.axis,c=Pet(r,i,s),d=t.length;let f;for(let h=0;h<d;++h){const p=t[h],{[l]:g,[u]:m}=p,v=p._stacks||(p._stacks={});f=v[u]=Bet(o,c,g),f[a]=m,f._top=LM(f,i,!0,s.type),f._bottom=LM(f,i,!1,s.type)}}function $$(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function zet(e,t){return Ul(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Vet(e,t,n){return Ul(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Gf(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(!!s){t=t||e._parsed;for(const o of t){const r=o._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n]}}}const C$=e=>e==="reset"||e==="none",zM=(e,t)=>t?e:Object.assign({},e),Wet=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:EH(n,!0),values:null};class ra{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=PM(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Gf(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),o=(d,f,h,p)=>d==="x"?f:d==="r"?p:h,r=n.xAxisID=Xt(s.xAxisID,$$(t,"x")),i=n.yAxisID=Xt(s.yAxisID,$$(t,"y")),a=n.rAxisID=Xt(s.rAxisID,$$(t,"r")),l=n.indexAxis,u=n.iAxisID=o(l,r,i,a),c=n.vAxisID=o(l,i,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(i),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&SM(this._data,this),t._stacked&&Gf(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(dn(n))this._data=Fet(n);else if(s!==n){if(s){SM(s,this);const o=this._cachedMeta;Gf(o),o._parsed=[]}n&&Object.isExtensible(n)&&HQe(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let o=!1;this._dataCheck();const r=n._stacked;n._stacked=PM(n.vScale,n),n.stack!==s.stack&&(o=!0,Gf(n),n.stack=s.stack),this._resyncElements(t),(o||r!==n._stacked)&&BM(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:o}=this,{iScale:r,_stacked:i}=s,a=r.axis;let l=t===0&&n===o.length?!0:s._sorted,u=t>0&&s._parsed[t-1],c,d,f;if(this._parsing===!1)s._parsed=o,s._sorted=!0,f=o;else{Wn(o[t])?f=this.parseArrayData(s,o,t,n):dn(o[t])?f=this.parseObjectData(s,o,t,n):f=this.parsePrimitiveData(s,o,t,n);const h=()=>d[a]===null||u&&d[a]<u[a];for(c=0;c<n;++c)s._parsed[c+t]=d=f[c],l&&(h()&&(l=!1),u=d);s._sorted=l}i&&BM(this,f)}parsePrimitiveData(t,n,s,o){const{iScale:r,vScale:i}=t,a=r.axis,l=i.axis,u=r.getLabels(),c=r===i,d=new Array(o);let f,h,p;for(f=0,h=o;f<h;++f)p=f+s,d[f]={[a]:c||r.parse(u[p],p),[l]:i.parse(n[p],p)};return d}parseArrayData(t,n,s,o){const{xScale:r,yScale:i}=t,a=new Array(o);let l,u,c,d;for(l=0,u=o;l<u;++l)c=l+s,d=n[c],a[l]={x:r.parse(d[0],c),y:i.parse(d[1],c)};return a}parseObjectData(t,n,s,o){const{xScale:r,yScale:i}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(o);let c,d,f,h;for(c=0,d=o;c<d;++c)f=c+s,h=n[f],u[c]={x:r.parse(oc(h,a),f),y:i.parse(oc(h,l),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const o=this.chart,r=this._cachedMeta,i=n[t.axis],a={keys:EH(o,!0),values:n._stacks[t.axis]};return FM(a,i,r.index,{mode:s})}updateRangeFromParsed(t,n,s,o){const r=s[n.axis];let i=r===null?NaN:r;const a=o&&s._stacks[n.axis];o&&a&&(o.values=a,i=FM(o,r,this._cachedMeta.index)),t.min=Math.min(t.min,i),t.max=Math.max(t.max,i)}getMinMax(t,n){const s=this._cachedMeta,o=s._parsed,r=s._sorted&&t===s.iScale,i=o.length,a=this._getOtherScale(t),l=Wet(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=Let(a);let f,h;function p(){h=o[f];const g=h[a.axis];return!$s(h[t.axis])||c>g||d<g}for(f=0;f<i&&!(!p()&&(this.updateRangeFromParsed(u,t,h,l),r));++f);if(r){for(f=i-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(u,t,h,l);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let o,r,i;for(o=0,r=n.length;o<r;++o)i=n[o][t.axis],$s(i)&&s.push(i);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,o=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:o?""+o.getLabelForValue(r[o.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=Oet(Xt(this.options.clip,Met(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,o=s.data||[],r=n.chartArea,i=[],a=this._drawStart||0,l=this._drawCount||o.length-a,u=this.options.drawActiveElementsOnTop;let c;for(s.dataset&&s.dataset.draw(t,r,a,l),c=a;c<a+l;++c){const d=o[c];d.hidden||(d.active&&u?i.push(d):d.draw(t,r))}for(c=0;c<i.length;++c)i[c].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const o=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const i=this._cachedMeta.data[t];r=i.$context||(i.$context=Vet(this.getContext(),t,i)),r.parsed=this.getParsed(t),r.raw=o.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=zet(this.chart.getContext(),this.index)),r.dataset=o,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const o=n==="active",r=this._cachedDataOpts,i=t+"-"+n,a=r[i],l=this.enableOptionSharing&&js(s);if(a)return zM(a,l);const u=this.chart.config,c=u.datasetElementScopeKeys(this._type,t),d=o?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),c),h=Object.keys(Cn.elements[t]),p=()=>this.getContext(s,o),g=u.resolveNamedOptions(f,h,p,d);return g.$shared&&(g.$shared=l,r[i]=Object.freeze(zM(g,l))),g}_resolveAnimations(t,n,s){const o=this.chart,r=this._cachedDataOpts,i=`animation-${n}`,a=r[i];if(a)return a;let l;if(o.options.animation!==!1){const c=this.chart.config,d=c.datasetAnimationScopeKeys(this._type,n),f=c.getOptionScopes(this.getDataset(),d);l=c.createResolver(f,this.getContext(t,s,n))}const u=new NE(o,l&&l.animations);return l&&l._cacheable&&(r[i]=Object.freeze(u)),u}getSharedOptions(t){if(!!t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||C$(t)||this.chart._animationsDisabled}updateElement(t,n,s,o){C$(o)?Object.assign(t,s):this._resolveAnimations(n,o).update(t,s)}updateSharedOptions(t,n,s){t&&!C$(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,o){t.active=o;const r=this.getStyle(n,o);this._resolveAnimations(n,s,o).update(t,{options:!o&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const o=s.length,r=n.length,i=Math.min(r,o);i&&this.parse(0,i),r>o?this._insertElements(o,r-o,t):r<o&&this._removeElements(r,o-r)}_insertElements(t,n,s=!0){const o=this._cachedMeta,r=o.data,i=t+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=i;a--)u[a]=u[a-n]};for(l(r),a=t;a<i;++a)r[a]=new this.dataElementType;this._parsing&&l(o._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,o){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const o=s._parsed.splice(t,n);s._stacked&&Gf(s,o)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,o]=t;this[n](s,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ra.defaults={};ra.prototype.datasetElementType=null;ra.prototype.dataElementType=null;function Het(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let o=0,r=n.length;o<r;o++)s=s.concat(n[o].controller.getAllParsedValues(e));e._cache.$bar=pH(s.sort((o,r)=>o-r))}return e._cache.$bar}function Uet(e){const t=e.iScale,n=Het(t,e.type);let s=t._length,o,r,i,a;const l=()=>{i===32767||i===-32768||(js(a)&&(s=Math.min(s,Math.abs(i-a)||s)),a=i)};for(o=0,r=n.length;o<r;++o)i=t.getPixelForValue(n[o]),l();for(a=void 0,o=0,r=t.ticks.length;o<r;++o)i=t.getPixelForTick(o),l();return s}function jet(e,t,n,s){const o=n.barThickness;let r,i;return On(o)?(r=t.min*n.categoryPercentage,i=n.barPercentage):(r=o*s,i=1),{chunk:r/s,ratio:i,start:t.pixels[e]-r/2}}function Get(e,t,n,s){const o=t.pixels,r=o[e];let i=e>0?o[e-1]:null,a=e<o.length-1?o[e+1]:null;const l=n.categoryPercentage;i===null&&(i=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-i);const u=r-(r-Math.min(i,a))/2*l;return{chunk:Math.abs(a-i)/2*l/s,ratio:n.barPercentage,start:u}}function Ket(e,t,n,s){const o=n.parse(e[0],s),r=n.parse(e[1],s),i=Math.min(o,r),a=Math.max(o,r);let l=i,u=a;Math.abs(i)>Math.abs(a)&&(l=a,u=i),t[n.axis]=u,t._custom={barStart:l,barEnd:u,start:o,end:r,min:i,max:a}}function TH(e,t,n,s){return Wn(e)?Ket(e,t,n,s):t[n.axis]=n.parse(e,s),t}function VM(e,t,n,s){const o=e.iScale,r=e.vScale,i=o.getLabels(),a=o===r,l=[];let u,c,d,f;for(u=n,c=n+s;u<c;++u)f=t[u],d={},d[o.axis]=a||o.parse(i[u],u),l.push(TH(f,d,r,u));return l}function x$(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function qet(e,t,n){return e!==0?Zi(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function Yet(e){let t,n,s,o,r;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(o="end",r="start"):(o="start",r="end"),{start:n,end:s,reverse:t,top:o,bottom:r}}function Xet(e,t,n,s){let o=t.borderSkipped;const r={};if(!o){e.borderSkipped=r;return}const{start:i,end:a,reverse:l,top:u,bottom:c}=Yet(e);o==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?o=u:(n._bottom||0)===s?o=c:(r[WM(c,i,a,l)]=!0,o=u)),r[WM(o,i,a,l)]=!0,e.borderSkipped=r}function WM(e,t,n,s){return s?(e=Zet(e,t,n),e=HM(e,n,t)):e=HM(e,t,n),e}function Zet(e,t,n){return e===t?n:e===n?t:e}function HM(e,t,n){return e==="start"?t:e==="end"?n:e}function Jet(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class I1 extends ra{parsePrimitiveData(t,n,s,o){return VM(t,n,s,o)}parseArrayData(t,n,s,o){return VM(t,n,s,o)}parseObjectData(t,n,s,o){const{iScale:r,vScale:i}=t,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=r.axis==="x"?a:l,c=i.axis==="x"?a:l,d=[];let f,h,p,g;for(f=s,h=s+o;f<h;++f)g=n[f],p={},p[r.axis]=r.parse(oc(g,u),f),d.push(TH(oc(g,c),p,i,f));return d}updateRangeFromParsed(t,n,s,o){super.updateRangeFromParsed(t,n,s,o);const r=s._custom;r&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:o}=n,r=this.getParsed(t),i=r._custom,a=x$(i)?"["+i.start+", "+i.end+"]":""+o.getLabelForValue(r[o.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,o){const r=o==="reset",{index:i,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),u=a.isHorizontal(),c=this._getRuler(),d=this.resolveDataElementOptions(n,o),f=this.getSharedOptions(d),h=this.includeOptions(o,f);this.updateSharedOptions(f,o,d);for(let p=n;p<n+s;p++){const g=this.getParsed(p),m=r||On(g[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,c),b=(g._stacks||{})[a.axis],$={horizontal:u,base:m.base,enableBorderRadius:!b||x$(g._custom)||i===b._top||i===b._bottom,x:u?m.head:v.center,y:u?v.center:m.head,height:u?v.size:Math.abs(m.size),width:u?Math.abs(m.size):v.size};h&&($.options=f||this.resolveDataElementOptions(p,t[p].active?"active":o));const y=$.options||t[p].options;Xet($,y,b,i),Jet($,y,c.ratio),this.updateElement(t[p],p,$,o)}}_getStacks(t,n){const o=this._cachedMeta.iScale,r=o.getMatchingVisibleMetas(this._type),i=o.options.stacked,a=r.length,l=[];let u,c;for(u=0;u<a;++u)if(c=r[u],!!c.controller.options.grouped){if(typeof n!="undefined"){const d=c.controller.getParsed(n)[c.controller._cachedMeta.vScale.axis];if(On(d)||isNaN(d))continue}if((i===!1||l.indexOf(c.stack)===-1||i===void 0&&c.stack===void 0)&&l.push(c.stack),c.index===t)break}return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,s){const o=this._getStacks(t,s),r=n!==void 0?o.indexOf(n):-1;return r===-1?o.length-1:r}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,o=[];let r,i;for(r=0,i=n.data.length;r<i;++r)o.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||Uet(n),pixels:o,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s},options:{base:o,minBarLength:r}}=this,i=o||0,a=this.getParsed(t),l=a._custom,u=x$(l);let c=a[n.axis],d=0,f=s?this.applyStack(n,a,s):c,h,p;f!==c&&(d=f-c,f=c),u&&(c=l.barStart,f=l.barEnd-l.barStart,c!==0&&Zi(c)!==Zi(l.barEnd)&&(d=0),d+=c);const g=!On(o)&&!u?o:d;let m=n.getPixelForValue(g);if(this.chart.getDataVisibility(t)?h=n.getPixelForValue(d+f):h=m,p=h-m,Math.abs(p)<r&&(p=qet(p,n,i)*r,c===i&&(m-=p/2),h=m+p),m===n.getPixelForValue(i)){const v=Zi(p)*n.getLineWidthForValue(i)/2;m+=v,p-=v}return{size:p,base:m,head:h,center:h+p/2}}_calculateBarIndexPixels(t,n){const s=n.scale,o=this.options,r=o.skipNull,i=Xt(o.maxBarThickness,1/0);let a,l;if(n.grouped){const u=r?this._getStackCount(t):n.stackCount,c=o.barThickness==="flex"?Get(t,n,o,u):jet(t,n,o,u),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=c.start+c.chunk*d+c.chunk/2,l=Math.min(i,c.chunk*c.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(i,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,o=s.length;let r=0;for(;r<o;++r)this.getParsed(r)[n.axis]!==null&&s[r].draw(this._ctx)}}I1.id="bar";I1.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};I1.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class E1 extends ra{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,s,o){const r=super.parsePrimitiveData(t,n,s,o);for(let i=0;i<r.length;i++)r[i]._custom=this.resolveDataElementOptions(i+s).radius;return r}parseArrayData(t,n,s,o){const r=super.parseArrayData(t,n,s,o);for(let i=0;i<r.length;i++){const a=n[s+i];r[i]._custom=Xt(a[2],this.resolveDataElementOptions(i+s).radius)}return r}parseObjectData(t,n,s,o){const r=super.parseObjectData(t,n,s,o);for(let i=0;i<r.length;i++){const a=n[s+i];r[i]._custom=Xt(a&&a.r&&+a.r,this.resolveDataElementOptions(i+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let s=t.length-1;s>=0;--s)n=Math.max(n,t[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,{xScale:s,yScale:o}=n,r=this.getParsed(t),i=s.getLabelForValue(r.x),a=o.getLabelForValue(r.y),l=r._custom;return{label:n.label,value:"("+i+", "+a+(l?", "+l:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,s,o){const r=o==="reset",{iScale:i,vScale:a}=this._cachedMeta,l=this.resolveDataElementOptions(n,o),u=this.getSharedOptions(l),c=this.includeOptions(o,u),d=i.axis,f=a.axis;for(let h=n;h<n+s;h++){const p=t[h],g=!r&&this.getParsed(h),m={},v=m[d]=r?i.getPixelForDecimal(.5):i.getPixelForValue(g[d]),b=m[f]=r?a.getBasePixel():a.getPixelForValue(g[f]);m.skip=isNaN(v)||isNaN(b),c&&(m.options=this.resolveDataElementOptions(h,p.active?"active":o),r&&(m.options.radius=0)),this.updateElement(p,h,m,o)}this.updateSharedOptions(u,o,l)}resolveDataElementOptions(t,n){const s=this.getParsed(t);let o=super.resolveDataElementOptions(t,n);o.$shared&&(o=Object.assign({},o,{$shared:!1}));const r=o.radius;return n!=="active"&&(o.radius=0),o.radius+=Xt(s&&s._custom,r),o}}E1.id="bubble";E1.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};E1.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function Qet(e,t,n){let s=1,o=1,r=0,i=0;if(t<ns){const a=e,l=a+t,u=Math.cos(a),c=Math.sin(a),d=Math.cos(l),f=Math.sin(l),h=($,y,w)=>Cp($,a,l,!0)?1:Math.max(y,y*n,w,w*n),p=($,y,w)=>Cp($,a,l,!0)?-1:Math.min(y,y*n,w,w*n),g=h(0,u,d),m=h(xs,c,f),v=p(Bn,u,d),b=p(Bn+xs,c,f);s=(g-v)/2,o=(m-b)/2,r=-(g+v)/2,i=-(m+b)/2}return{ratioX:s,ratioY:o,offsetX:r,offsetY:i}}class _f extends ra{constructor(t,n){super(t,n);this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=s;else{let r=l=>+s[l];if(dn(s[t])){const{key:l="value"}=this._parsing;r=u=>+oc(s[u],l)}let i,a;for(i=t,a=t+n;i<a;++i)o._parsed[i]=r(i)}}_getRotation(){return io(this.options.rotation-90)}_getCircumference(){return io(this.options.circumference)}_getRotationExtents(){let t=ns,n=-ns;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)){const o=this.chart.getDatasetMeta(s).controller,r=o._getRotation(),i=o._getCircumference();t=Math.min(t,r),n=Math.max(n,r+i)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,o=this._cachedMeta,r=o.data,i=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-i)/2,0),l=Math.min(QJe(this.options.cutout,a),1),u=this._getRingWeight(this.index),{circumference:c,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:h,offsetX:p,offsetY:g}=Qet(d,c,l),m=(s.width-i)/f,v=(s.height-i)/h,b=Math.max(Math.min(m,v)/2,0),$=nH(this.options.radius,b),y=Math.max($*l,0),w=($-y)/this._getVisibleDatasetWeightTotal();this.offsetX=p*$,this.offsetY=g*$,o.total=this.calculateTotal(),this.outerRadius=$-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,o=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*r/ns)}updateElements(t,n,s,o){const r=o==="reset",i=this.chart,a=i.chartArea,u=i.options.animation,c=(a.left+a.right)/2,d=(a.top+a.bottom)/2,f=r&&u.animateScale,h=f?0:this.innerRadius,p=f?0:this.outerRadius,g=this.resolveDataElementOptions(n,o),m=this.getSharedOptions(g),v=this.includeOptions(o,m);let b=this._getRotation(),$;for($=0;$<n;++$)b+=this._circumference($,r);for($=n;$<n+s;++$){const y=this._circumference($,r),w=t[$],C={x:c+this.offsetX,y:d+this.offsetY,startAngle:b,endAngle:b+y,circumference:y,outerRadius:p,innerRadius:h};v&&(C.options=m||this.resolveDataElementOptions($,w.active?"active":o)),b+=y,this.updateElement(w,$,C,o)}this.updateSharedOptions(m,o,g)}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,o;for(o=0;o<n.length;o++){const r=t._parsed[o];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(o)&&!n[o].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?ns*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,o=s.data.labels||[],r=gm(n._parsed[t],s.options.locale);return{label:o[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let o,r,i,a,l;if(!t){for(o=0,r=s.data.datasets.length;o<r;++o)if(s.isDatasetVisible(o)){i=s.getDatasetMeta(o),t=i.data,a=i.controller;break}}if(!t)return 0;for(o=0,r=t.length;o<r;++o)l=a.resolveDataElementOptions(o),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,o=t.length;s<o;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(Xt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}_f.id="doughnut";_f.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};_f.descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"};_f.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map((s,o)=>{const i=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){let t=e.label;const n=": "+e.formattedValue;return Wn(t)?(t=t.slice(),t[0]+=n):t+=n,t}}}}};class mm extends ra{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:o=[],_dataset:r}=n,i=this.chart._animationsDisabled;let{start:a,count:l}=ett(n,o,i);this._drawStart=a,this._drawCount=l,ttt(n)&&(a=0,l=o.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=o;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!i,options:u},t),this.updateElements(o,a,l,t)}updateElements(t,n,s,o){const r=o==="reset",{iScale:i,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,c=this.resolveDataElementOptions(n,o),d=this.getSharedOptions(c),f=this.includeOptions(o,d),h=i.axis,p=a.axis,{spanGaps:g,segment:m}=this.options,v=wp(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||o==="none";let $=n>0&&this.getParsed(n-1);for(let y=n;y<n+s;++y){const w=t[y],C=this.getParsed(y),x=b?w:{},S=On(C[p]),T=x[h]=i.getPixelForValue(C[h],y),I=x[p]=r||S?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,C,l):C[p],y);x.skip=isNaN(T)||isNaN(I)||S,x.stop=y>0&&C[h]-$[h]>v,m&&(x.parsed=C,x.raw=u.data[y]),f&&(x.options=d||this.resolveDataElementOptions(y,w.active?"active":o)),b||this.updateElement(w,y,x,o),$=C}this.updateSharedOptions(d,o,c)}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,o=t.data||[];if(!o.length)return s;const r=o[0].size(this.resolveDataElementOptions(0)),i=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(s,r,i)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}mm.id="line";mm.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};mm.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};function ett(e,t,n){const s=t.length;let o=0,r=s;if(e._sorted){const{iScale:i,_parsed:a}=e,l=i.axis,{min:u,max:c,minDefined:d,maxDefined:f}=i.getUserBounds();d&&(o=ao(Math.min($a(a,i.axis,u).lo,n?s:$a(t,l,i.getPixelForValue(u)).lo),0,s-1)),f?r=ao(Math.max($a(a,i.axis,c).hi+1,n?0:$a(t,l,i.getPixelForValue(c)).hi+1),o,s)-o:r=s-o}return{start:o,count:r}}function ttt(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,o={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=o,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,o),r}class T1 extends ra{constructor(t,n){super(t,n);this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,o=s.data.labels||[],r=gm(n._parsed[t].r,s.options.locale);return{label:o[t]||"",value:r}}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}_updateRadius(){const t=this.chart,n=t.chartArea,s=t.options,o=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(o/2,0),i=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-i)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,n,s,o){const r=o==="reset",i=this.chart,a=this.getDataset(),u=i.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,f=c.yCenter,h=c.getIndexAngle(0)-.5*Bn;let p=h,g;const m=360/this.countVisibleElements();for(g=0;g<n;++g)p+=this._computeAngle(g,o,m);for(g=n;g<n+s;g++){const v=t[g];let b=p,$=p+this._computeAngle(g,o,m),y=i.getDataVisibility(g)?c.getDistanceFromCenterForValue(a.data[g]):0;p=$,r&&(u.animateScale&&(y=0),u.animateRotate&&(b=$=h));const w={x:d,y:f,innerRadius:0,outerRadius:y,startAngle:b,endAngle:$,options:this.resolveDataElementOptions(g,v.active?"active":o)};this.updateElement(v,g,w,o)}}countVisibleElements(){const t=this.getDataset(),n=this._cachedMeta;let s=0;return n.data.forEach((o,r)=>{!isNaN(t.data[r])&&this.chart.getDataVisibility(r)&&s++}),s}_computeAngle(t,n,s){return this.chart.getDataVisibility(t)?io(this.resolveDataElementOptions(t,n).angle||s):0}}T1.id="polarArea";T1.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};T1.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map((s,o)=>{const i=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class AE extends _f{}AE.id="pie";AE.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class _1 extends ra{getLabelAndValue(t){const n=this._cachedMeta.vScale,s=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(s[n.axis])}}update(t){const n=this._cachedMeta,s=n.dataset,o=n.data||[],r=n.iScale.getLabels();if(s.points=o,t!=="resize"){const i=this.resolveDatasetElementOptions(t);this.options.showLine||(i.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===o.length,options:i};this.updateElement(s,void 0,a,t)}this.updateElements(o,0,o.length,t)}updateElements(t,n,s,o){const r=this.getDataset(),i=this._cachedMeta.rScale,a=o==="reset";for(let l=n;l<n+s;l++){const u=t[l],c=this.resolveDataElementOptions(l,u.active?"active":o),d=i.getPointPositionForValue(l,r.data[l]),f=a?i.xCenter:d.x,h=a?i.yCenter:d.y,p={x:f,y:h,angle:d.angle,skip:isNaN(f)||isNaN(h),options:c};this.updateElement(u,l,p,o)}}}_1.id="radar";_1.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};_1.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class N1 extends mm{}N1.id="scatter";N1.defaults={showLine:!1,fill:!1};N1.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var ntt=Object.freeze({__proto__:null,BarController:I1,BubbleController:E1,DoughnutController:_f,LineController:mm,PolarAreaController:T1,PieController:AE,RadarController:_1,ScatterController:N1});function ru(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Px{constructor(t){this.options=t||{}}formats(){return ru()}parse(t,n){return ru()}format(t,n){return ru()}add(t,n,s){return ru()}diff(t,n,s){return ru()}startOf(t,n,s){return ru()}endOf(t,n){return ru()}}Px.override=function(e){Object.assign(Px.prototype,e)};var stt={_date:Px};function vh(e,t){return"native"in e?{x:e.x,y:e.y}:$H(e,t)}function ott(e,t){const n=e.getSortedVisibleDatasetMetas();let s,o,r;for(let i=0,a=n.length;i<a;++i){({index:s,data:o}=n[i]);for(let l=0,u=o.length;l<u;++l)r=o[l],r.skip||t(r,s,l)}}function rtt(e,t,n,s){const{controller:o,data:r,_sorted:i}=e,a=o._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&i&&r.length){const l=a._reversePixels?VQe:$a;if(s){if(o._sharedOptions){const u=r[0],c=typeof u.getRange=="function"&&u.getRange(t);if(c){const d=l(r,t,n-c),f=l(r,t,n+c);return{lo:d.lo,hi:f.hi}}}}else return l(r,t,n)}return{lo:0,hi:r.length-1}}function DE(e,t,n,s,o){const r=e.getSortedVisibleDatasetMetas(),i=n[t];for(let a=0,l=r.length;a<l;++a){const{index:u,data:c}=r[a],{lo:d,hi:f}=rtt(r[a],t,i,o);for(let h=d;h<=f;++h){const p=c[h];p.skip||s(p,u,h)}}}function itt(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,o){const r=t?Math.abs(s.x-o.x):0,i=n?Math.abs(s.y-o.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(i,2))}}function k$(e,t,n,s){const o=[];return ic(t,e.chartArea,e._minPadding)&&DE(e,n,t,function(i,a,l){i.inRange(t.x,t.y,s)&&o.push({element:i,datasetIndex:a,index:l})},!0),o}function att(e,t,n,s){let o=[];function r(i,a,l){const{startAngle:u,endAngle:c}=i.getProps(["startAngle","endAngle"],s),{angle:d}=iH(i,{x:t.x,y:t.y});Cp(d,u,c)&&o.push({element:i,datasetIndex:a,index:l})}return DE(e,n,t,r),o}function ltt(e,t,n,s,o){let r=[];const i=itt(n);let a=Number.POSITIVE_INFINITY;function l(u,c,d){const f=u.inRange(t.x,t.y,o);if(s&&!f)return;const h=u.getCenterPoint(o);if(!ic(h,e.chartArea,e._minPadding)&&!f)return;const g=i(t,h);g<a?(r=[{element:u,datasetIndex:c,index:d}],a=g):g===a&&r.push({element:u,datasetIndex:c,index:d})}return DE(e,n,t,l),r}function S$(e,t,n,s,o){return ic(t,e.chartArea,e._minPadding)?n==="r"&&!s?att(e,t,n,o):ltt(e,t,n,s,o):[]}function UM(e,t,n,s){const o=vh(t,e),r=[],i=n.axis,a=i==="x"?"inXRange":"inYRange";let l=!1;return ott(e,(u,c,d)=>{u[a](o[i],s)&&r.push({element:u,datasetIndex:c,index:d}),u.inRange(o.x,o.y,s)&&(l=!0)}),n.intersect&&!l?[]:r}var utt={modes:{index(e,t,n,s){const o=vh(t,e),r=n.axis||"x",i=n.intersect?k$(e,o,r,s):S$(e,o,r,!1,s),a=[];return i.length?(e.getSortedVisibleDatasetMetas().forEach(l=>{const u=i[0].index,c=l.data[u];c&&!c.skip&&a.push({element:c,datasetIndex:l.index,index:u})}),a):[]},dataset(e,t,n,s){const o=vh(t,e),r=n.axis||"xy";let i=n.intersect?k$(e,o,r,s):S$(e,o,r,!1,s);if(i.length>0){const a=i[0].datasetIndex,l=e.getDatasetMeta(a).data;i=[];for(let u=0;u<l.length;++u)i.push({element:l[u],datasetIndex:a,index:u})}return i},point(e,t,n,s){const o=vh(t,e),r=n.axis||"xy";return k$(e,o,r,s)},nearest(e,t,n,s){const o=vh(t,e),r=n.axis||"xy";return S$(e,o,r,n.intersect,s)},x(e,t,n,s){return UM(e,t,{axis:"x",intersect:n.intersect},s)},y(e,t,n,s){return UM(e,t,{axis:"y",intersect:n.intersect},s)}}};const _H=["left","top","right","bottom"];function Kf(e,t){return e.filter(n=>n.pos===t)}function jM(e,t){return e.filter(n=>_H.indexOf(n.pos)===-1&&n.box.axis===t)}function qf(e,t){return e.sort((n,s)=>{const o=t?s:n,r=t?n:s;return o.weight===r.weight?o.index-r.index:o.weight-r.weight})}function ctt(e){const t=[];let n,s,o,r,i,a;for(n=0,s=(e||[]).length;n<s;++n)o=e[n],{position:r,options:{stack:i,stackWeight:a=1}}=o,t.push({index:n,box:o,pos:r,horizontal:o.isHorizontal(),weight:o.weight,stack:i&&r+i,stackWeight:a});return t}function dtt(e){const t={};for(const n of e){const{stack:s,pos:o,stackWeight:r}=n;if(!s||!_H.includes(o))continue;const i=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});i.count++,i.weight+=r}return t}function ftt(e,t){const n=dtt(e),{vBoxMaxWidth:s,hBoxMaxHeight:o}=t;let r,i,a;for(r=0,i=e.length;r<i;++r){a=e[r];const{fullSize:l}=a.box,u=n[a.stack],c=u&&a.stackWeight/u.weight;a.horizontal?(a.width=c?c*s:l&&t.availableWidth,a.height=o):(a.width=s,a.height=c?c*o:l&&t.availableHeight)}return n}function htt(e){const t=ctt(e),n=qf(t.filter(u=>u.box.fullSize),!0),s=qf(Kf(t,"left"),!0),o=qf(Kf(t,"right")),r=qf(Kf(t,"top"),!0),i=qf(Kf(t,"bottom")),a=jM(t,"x"),l=jM(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:o.concat(l).concat(i).concat(a),chartArea:Kf(t,"chartArea"),vertical:s.concat(o).concat(l),horizontal:r.concat(i).concat(a)}}function GM(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function NH(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ptt(e,t,n,s){const{pos:o,box:r}=n,i=e.maxPadding;if(!dn(o)){n.size&&(e[o]-=n.size);const d=s[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?r.height:r.width),n.size=d.size/d.count,e[o]+=n.size}r.getPadding&&NH(i,r.getPadding());const a=Math.max(0,t.outerWidth-GM(i,e,"left","right")),l=Math.max(0,t.outerHeight-GM(i,e,"top","bottom")),u=a!==e.w,c=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:u,other:c}:{same:c,other:u}}function gtt(e){const t=e.maxPadding;function n(s){const o=Math.max(t[s]-e[s],0);return e[s]+=o,o}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function mtt(e,t){const n=t.maxPadding;function s(o){const r={left:0,top:0,right:0,bottom:0};return o.forEach(i=>{r[i]=Math.max(t[i],n[i])}),r}return s(e?["left","right"]:["top","bottom"])}function bh(e,t,n,s){const o=[];let r,i,a,l,u,c;for(r=0,i=e.length,u=0;r<i;++r){a=e[r],l=a.box,l.update(a.width||t.w,a.height||t.h,mtt(a.horizontal,t));const{same:d,other:f}=ptt(t,n,a,s);u|=d&&o.length,c=c||f,l.fullSize||o.push(a)}return u&&bh(o,t,n,s)||c}function pv(e,t,n,s,o){e.top=n,e.left=t,e.right=t+s,e.bottom=n+o,e.width=s,e.height=o}function KM(e,t,n,s){const o=n.padding;let{x:r,y:i}=t;for(const a of e){const l=a.box,u=s[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/u.weight||1;if(a.horizontal){const d=t.w*c,f=u.size||l.height;js(u.start)&&(i=u.start),l.fullSize?pv(l,o.left,i,n.outerWidth-o.right-o.left,f):pv(l,t.left+u.placed,i,d,f),u.start=i,u.placed+=d,i=l.bottom}else{const d=t.h*c,f=u.size||l.width;js(u.start)&&(r=u.start),l.fullSize?pv(l,r,o.top,f,n.outerHeight-o.bottom-o.top):pv(l,r,t.top+u.placed,f,d),u.start=r,u.placed+=d,r=l.right}}t.x=r,t.y=i}Cn.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Do={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const o=Qs(e.options.layout.padding),r=Math.max(t-o.width,0),i=Math.max(n-o.height,0),a=htt(e.boxes),l=a.vertical,u=a.horizontal;Gn(e.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const c=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:n,padding:o,availableWidth:r,availableHeight:i,vBoxMaxWidth:r/2/c,hBoxMaxHeight:i/2}),f=Object.assign({},o);NH(f,Qs(s));const h=Object.assign({maxPadding:f,w:r,h:i,x:o.left,y:o.top},o),p=ftt(l.concat(u),d);bh(a.fullSize,h,d,p),bh(l,h,d,p),bh(u,h,d,p)&&bh(l,h,d,p),gtt(h),KM(a.leftAndTop,h,d,p),h.x+=h.w,h.y+=h.h,KM(a.rightAndBottom,h,d,p),e.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},Gn(a.chartArea,g=>{const m=g.box;Object.assign(m,e.chartArea),m.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}};class AH{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,o){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,o?Math.floor(n/o):s)}}isAttached(t){return!0}updateConfig(t){}}class vtt extends AH{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const a0="$chartjs",btt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},qM=e=>e===null||e==="";function ytt(e,t){const n=e.style,s=e.getAttribute("height"),o=e.getAttribute("width");if(e[a0]={initial:{height:s,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",qM(o)){const r=_M(e,"width");r!==void 0&&(e.width=r)}if(qM(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=_M(e,"height");r!==void 0&&(e.height=r)}return e}const DH=het?{passive:!0}:!1;function wtt(e,t,n){e.addEventListener(t,n,DH)}function $tt(e,t,n){e.canvas.removeEventListener(t,n,DH)}function Ctt(e,t){const n=btt[e.type]||e.type,{x:s,y:o}=$H(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:o!==void 0?o:null}}function ob(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function xtt(e,t,n){const s=e.canvas,o=new MutationObserver(r=>{let i=!1;for(const a of r)i=i||ob(a.addedNodes,s),i=i&&!ob(a.removedNodes,s);i&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}function ktt(e,t,n){const s=e.canvas,o=new MutationObserver(r=>{let i=!1;for(const a of r)i=i||ob(a.removedNodes,s),i=i&&!ob(a.addedNodes,s);i&&n()});return o.observe(document,{childList:!0,subtree:!0}),o}const Ip=new Map;let YM=0;function RH(){const e=window.devicePixelRatio;e!==YM&&(YM=e,Ip.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function Stt(e,t){Ip.size||window.addEventListener("resize",RH),Ip.set(e,t)}function Itt(e){Ip.delete(e),Ip.size||window.removeEventListener("resize",RH)}function Ett(e,t,n){const s=e.canvas,o=s&&_E(s);if(!o)return;const r=tH((a,l)=>{const u=o.clientWidth;n(a,l),u<o.clientWidth&&n()},window),i=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||r(u,c)});return i.observe(o),Stt(e,r),i}function I$(e,t,n){n&&n.disconnect(),t==="resize"&&Itt(e)}function Ttt(e,t,n){const s=e.canvas,o=tH(r=>{e.ctx!==null&&n(Ctt(r,e))},e,r=>{const i=r[0];return[i,i.offsetX,i.offsetY]});return wtt(s,t,o),o}class _tt extends AH{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(ytt(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[a0])return!1;const s=n[a0].initial;["height","width"].forEach(r=>{const i=s[r];On(i)?n.removeAttribute(r):n.setAttribute(r,i)});const o=s.style||{};return Object.keys(o).forEach(r=>{n.style[r]=o[r]}),n.width=n.width,delete n[a0],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const o=t.$proxies||(t.$proxies={}),i={attach:xtt,detach:ktt,resize:Ett}[n]||Ttt;o[n]=i(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),o=s[n];if(!o)return;({attach:I$,detach:I$,resize:I$}[n]||$tt)(t,n,o),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,o){return fet(t,n,s,o)}isAttached(t){const n=_E(t);return!!(n&&n.isConnected)}}function Ntt(e){return!wH()||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas?vtt:_tt}class To{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return wp(this.x)&&wp(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const o={};return t.forEach(r=>{o[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),o}}To.defaults={};To.defaultRoutes=void 0;const MH={values(e){return Wn(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let o,r=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(o="scientific"),r=Att(e,n)}const i=zr(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:o,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),gm(e,s,l)},logarithmic(e,t,n){if(e===0)return"0";const s=e/Math.pow(10,Math.floor(zr(e)));return s===1||s===2||s===5?MH.numeric.call(this,e,t,n):""}};function Att(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var A1={formatters:MH};Cn.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:A1.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});Cn.route("scale.ticks","color","","color");Cn.route("scale.grid","color","","borderColor");Cn.route("scale.grid","borderColor","","borderColor");Cn.route("scale.title","color","","color");Cn.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"});Cn.describe("scales",{_fallback:"scale"});Cn.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"});function Dtt(e,t){const n=e.options.ticks,s=n.maxTicksLimit||Rtt(e),o=n.major.enabled?Ott(t):[],r=o.length,i=o[0],a=o[r-1],l=[];if(r>s)return Ftt(t,l,o,r/s),l;const u=Mtt(o,t,s);if(r>0){let c,d;const f=r>1?Math.round((a-i)/(r-1)):null;for(gv(t,l,u,On(f)?0:i-f,i),c=0,d=r-1;c<d;c++)gv(t,l,u,o[c],o[c+1]);return gv(t,l,u,a,On(f)?t.length:a+f),l}return gv(t,l,u),l}function Rtt(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),o=e._maxLength/n;return Math.floor(Math.min(s,o))}function Mtt(e,t,n){const s=Ptt(e),o=t.length/n;if(!s)return Math.max(o,1);const r=iQe(s);for(let i=0,a=r.length-1;i<a;i++){const l=r[i];if(l>o)return l}return Math.max(o,1)}function Ott(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function Ftt(e,t,n,s){let o=0,r=n[0],i;for(s=Math.ceil(s),i=0;i<e.length;i++)i===r&&(t.push(e[i]),o++,r=n[o*s])}function gv(e,t,n,s,o){const r=Xt(s,0),i=Math.min(Xt(o,e.length),e.length);let a=0,l,u,c;for(n=Math.ceil(n),o&&(l=o-s,n=l/Math.floor(l/n)),c=r;c<0;)a++,c=Math.round(r+a*n);for(u=Math.max(r,0);u<i;u++)u===c&&(t.push(e[u]),a++,c=Math.round(r+a*n))}function Ptt(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const Ltt=e=>e==="left"?"right":e==="right"?"left":e,XM=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n;function ZM(e,t){const n=[],s=e.length/t,o=e.length;let r=0;for(;r<o;r+=s)n.push(e[Math.floor(r)]);return n}function Btt(e,t,n){const s=e.ticks.length,o=Math.min(t,s-1),r=e._startPixel,i=e._endPixel,a=1e-6;let l=e.getPixelForTick(o),u;if(!(n&&(s===1?u=Math.max(l-r,i-l):t===0?u=(e.getPixelForTick(1)-l)/2:u=(l-e.getPixelForTick(o-1))/2,l+=o<t?u:-u,l<r-a||l>i+a)))return l}function ztt(e,t){Gn(e,n=>{const s=n.gc,o=s.length/2;let r;if(o>t){for(r=0;r<o;++r)delete n.data[s[r]];s.splice(0,o)}})}function Yf(e){return e.drawTicks?e.tickLength:0}function JM(e,t){if(!e.display)return 0;const n=Rs(e.font,t),s=Qs(e.padding);return(Wn(e.text)?e.text.length:1)*n.lineHeight+s.height}function Vtt(e,t){return Ul(e,{scale:t,type:"scale"})}function Wtt(e,t,n){return Ul(e,{tick:n,index:t,type:"tick"})}function Htt(e,t,n){let s=vE(e);return(n&&t!=="right"||!n&&t==="right")&&(s=Ltt(s)),s}function Utt(e,t,n,s){const{top:o,left:r,bottom:i,right:a,chart:l}=e,{chartArea:u,scales:c}=l;let d=0,f,h,p;const g=i-o,m=a-r;if(e.isHorizontal()){if(h=_o(s,r,a),dn(n)){const v=Object.keys(n)[0],b=n[v];p=c[v].getPixelForValue(b)+g-t}else n==="center"?p=(u.bottom+u.top)/2+g-t:p=XM(e,n,t);f=a-r}else{if(dn(n)){const v=Object.keys(n)[0],b=n[v];h=c[v].getPixelForValue(b)-m+t}else n==="center"?h=(u.left+u.right)/2-m+t:h=XM(e,n,t);p=_o(s,i,o),d=n==="left"?-xs:xs}return{titleX:h,titleY:p,maxWidth:f,rotation:d}}class kc extends To{constructor(t){super();this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:o}=this;return t=Dr(t,Number.POSITIVE_INFINITY),n=Dr(n,Number.NEGATIVE_INFINITY),s=Dr(s,Number.POSITIVE_INFINITY),o=Dr(o,Number.NEGATIVE_INFINITY),{min:Dr(t,s),max:Dr(n,o),minDefined:$s(t),maxDefined:$s(n)}}getMinMax(t){let{min:n,max:s,minDefined:o,maxDefined:r}=this.getUserBounds(),i;if(o&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)i=a[l].controller.getMinMax(this,t),o||(n=Math.min(n,i.min)),r||(s=Math.max(s,i.max));return n=r&&n>s?s:n,s=o&&n>s?n:s,{min:Dr(n,Dr(s,n)),max:Dr(s,Dr(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Jn(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:o,grace:r,ticks:i}=this.options,a=i.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=zQe(this,r,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?ZM(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||i.source==="auto")&&(this.ticks=Dtt(this,this.ticks),this._labelSizes=null),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Jn(this.options.afterUpdate,[this])}beforeSetDimensions(){Jn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Jn(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Jn(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Jn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,o,r;for(s=0,o=t.length;s<o;s++)r=t[s],r.label=Jn(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Jn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Jn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=this.ticks.length,o=n.minRotation||0,r=n.maxRotation;let i=o,a,l,u;if(!this._isVisible()||!n.display||o>=r||s<=1||!this.isHorizontal()){this.labelRotation=o;return}const c=this._getLabelSizes(),d=c.widest.width,f=c.highest.height,h=ao(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/s:h/(s-1),d+6>a&&(a=h/(s-(t.offset?.5:1)),l=this.maxHeight-Yf(t.grid)-n.padding-JM(t.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),i=yE(Math.min(Math.asin(ao((c.highest.height+6)/a,-1,1)),Math.asin(ao(l/u,-1,1))-Math.asin(ao(f/u,-1,1)))),i=Math.max(o,Math.min(r,i))),this.labelRotation=i}afterCalculateLabelRotation(){Jn(this.options.afterCalculateLabelRotation,[this])}beforeFit(){Jn(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:o,grid:r}}=this,i=this._isVisible(),a=this.isHorizontal();if(i){const l=JM(o,n.options.font);if(a?(t.width=this.maxWidth,t.height=Yf(r)+l):(t.height=this.maxHeight,t.width=Yf(r)+l),s.display&&this.ticks.length){const{first:u,last:c,widest:d,highest:f}=this._getLabelSizes(),h=s.padding*2,p=io(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){const v=s.mirror?0:m*d.width+g*f.height;t.height=Math.min(this.maxHeight,t.height+v+h)}else{const v=s.mirror?0:g*d.width+m*f.height;t.width=Math.min(this.maxWidth,t.width+v+h)}this._calculatePadding(u,c,m,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,o){const{ticks:{align:r,padding:i},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const c=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,h=0;l?u?(f=o*t.width,h=s*n.height):(f=s*t.height,h=o*n.width):r==="start"?h=n.width:r==="end"?f=t.width:(f=t.width/2,h=n.width/2),this.paddingLeft=Math.max((f-c+i)*this.width/(this.width-c),0),this.paddingRight=Math.max((h-d+i)*this.width/(this.width-d),0)}else{let c=n.height/2,d=t.height/2;r==="start"?(c=0,d=t.height):r==="end"&&(c=n.height,d=0),this.paddingTop=c+i,this.paddingBottom=d+i}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Jn(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)On(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=ZM(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length)}return t}_computeLabelSizes(t,n){const{ctx:s,_longestTextCache:o}=this,r=[],i=[];let a=0,l=0,u,c,d,f,h,p,g,m,v,b,$;for(u=0;u<n;++u){if(f=t[u].label,h=this._resolveTickFontOptions(u),s.font=p=h.string,g=o[p]=o[p]||{data:{},gc:[]},m=h.lineHeight,v=b=0,!On(f)&&!Wn(f))v=nb(s,g.data,g.gc,v,f),b=m;else if(Wn(f))for(c=0,d=f.length;c<d;++c)$=f[c],!On($)&&!Wn($)&&(v=nb(s,g.data,g.gc,v,$),b+=m);r.push(v),i.push(b),a=Math.max(v,a),l=Math.max(b,l)}ztt(o,n);const y=r.indexOf(a),w=i.indexOf(l),C=x=>({width:r[x]||0,height:i[x]||0});return{first:C(0),last:C(n-1),widest:C(y),highest:C(w),widths:r,heights:i}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return uQe(this._alignToPixels?ou(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=Wtt(this.getContext(),t,s))}return this.$context||(this.$context=Vtt(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=io(this.labelRotation),s=Math.abs(Math.cos(n)),o=Math.abs(Math.sin(n)),r=this._getLabelSizes(),i=t.autoSkipPadding||0,a=r?r.widest.width+i:0,l=r?r.highest.height+i:0;return this.isHorizontal()?l*s>a*o?a/s:l/o:l*o<a*s?l/s:a/o}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,o=this.options,{grid:r,position:i}=o,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),d=Yf(r),f=[],h=r.setContext(this.getContext()),p=h.drawBorder?h.borderWidth:0,g=p/2,m=function(P){return ou(s,P,p)};let v,b,$,y,w,C,x,S,T,I,_,N;if(i==="top")v=m(this.bottom),C=this.bottom-d,S=v-g,I=m(t.top)+g,N=t.bottom;else if(i==="bottom")v=m(this.top),I=t.top,N=m(t.bottom)-g,C=v+g,S=this.top+d;else if(i==="left")v=m(this.right),w=this.right-d,x=v-g,T=m(t.left)+g,_=t.right;else if(i==="right")v=m(this.left),T=t.left,_=m(t.right)-g,w=v+g,x=this.left+d;else if(n==="x"){if(i==="center")v=m((t.top+t.bottom)/2+.5);else if(dn(i)){const P=Object.keys(i)[0],M=i[P];v=m(this.chart.scales[P].getPixelForValue(M))}I=t.top,N=t.bottom,C=v+g,S=C+d}else if(n==="y"){if(i==="center")v=m((t.left+t.right)/2);else if(dn(i)){const P=Object.keys(i)[0],M=i[P];v=m(this.chart.scales[P].getPixelForValue(M))}w=v-g,x=w-d,T=t.left,_=t.right}const D=Xt(o.ticks.maxTicksLimit,c),F=Math.max(1,Math.ceil(c/D));for(b=0;b<c;b+=F){const P=r.setContext(this.getContext(b)),M=P.lineWidth,B=P.color,j=r.borderDash||[],X=P.borderDashOffset,ae=P.tickWidth,be=P.tickColor,ie=P.tickBorderDash||[],ye=P.tickBorderDashOffset;$=Btt(this,b,a),$!==void 0&&(y=ou(s,$,M),l?w=x=T=_=y:C=S=I=N=y,f.push({tx1:w,ty1:C,tx2:x,ty2:S,x1:T,y1:I,x2:_,y2:N,width:M,color:B,borderDash:j,borderDashOffset:X,tickWidth:ae,tickColor:be,tickBorderDash:ie,tickBorderDashOffset:ye}))}return this._ticksLength=c,this._borderValue=v,f}_computeLabelItems(t){const n=this.axis,s=this.options,{position:o,ticks:r}=s,i=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:c,mirror:d}=r,f=Yf(s.grid),h=f+c,p=d?-c:h,g=-io(this.labelRotation),m=[];let v,b,$,y,w,C,x,S,T,I,_,N,D="middle";if(o==="top")C=this.bottom-p,x=this._getXAxisLabelAlignment();else if(o==="bottom")C=this.top+p,x=this._getXAxisLabelAlignment();else if(o==="left"){const P=this._getYAxisLabelAlignment(f);x=P.textAlign,w=P.x}else if(o==="right"){const P=this._getYAxisLabelAlignment(f);x=P.textAlign,w=P.x}else if(n==="x"){if(o==="center")C=(t.top+t.bottom)/2+h;else if(dn(o)){const P=Object.keys(o)[0],M=o[P];C=this.chart.scales[P].getPixelForValue(M)+h}x=this._getXAxisLabelAlignment()}else if(n==="y"){if(o==="center")w=(t.left+t.right)/2-h;else if(dn(o)){const P=Object.keys(o)[0],M=o[P];w=this.chart.scales[P].getPixelForValue(M)}x=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?D="top":l==="end"&&(D="bottom"));const F=this._getLabelSizes();for(v=0,b=a.length;v<b;++v){$=a[v],y=$.label;const P=r.setContext(this.getContext(v));S=this.getPixelForTick(v)+r.labelOffset,T=this._resolveTickFontOptions(v),I=T.lineHeight,_=Wn(y)?y.length:1;const M=_/2,B=P.color,j=P.textStrokeColor,X=P.textStrokeWidth;i?(w=S,o==="top"?u==="near"||g!==0?N=-_*I+I/2:u==="center"?N=-F.highest.height/2-M*I+I:N=-F.highest.height+I/2:u==="near"||g!==0?N=I/2:u==="center"?N=F.highest.height/2-M*I:N=F.highest.height-_*I,d&&(N*=-1)):(C=S,N=(1-_)*I/2);let ae;if(P.showLabelBackdrop){const be=Qs(P.backdropPadding),ie=F.heights[v],ye=F.widths[v];let ue=C+N-be.top,Z=w-be.left;switch(D){case"middle":ue-=ie/2;break;case"bottom":ue-=ie;break}switch(x){case"center":Z-=ye/2;break;case"right":Z-=ye;break}ae={left:Z,top:ue,width:ye+be.width,height:ie+be.height,color:P.backdropColor}}m.push({rotation:g,label:y,font:T,color:B,strokeColor:j,strokeWidth:X,textOffset:N,textAlign:x,textBaseline:D,translation:[w,C],backdrop:ae})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-io(this.labelRotation))return t==="top"?"left":"right";let o="center";return n.align==="start"?o="left":n.align==="end"&&(o="right"),o}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:o,padding:r}}=this.options,i=this._getLabelSizes(),a=t+r,l=i.widest.width;let u,c;return n==="left"?o?(c=this.right+r,s==="near"?u="left":s==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-a,s==="near"?u="right":s==="center"?(u="center",c-=l/2):(u="left",c=this.left)):n==="right"?o?(c=this.left+r,s==="near"?u="right":s==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+a,s==="near"?u="left":s==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:o,width:r,height:i}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,o,r,i),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const o=this.ticks.findIndex(r=>r.value===t);return o>=0?n.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,i;const a=(l,u,c)=>{!c.width||!c.color||(s.save(),s.lineWidth=c.width,s.strokeStyle=c.color,s.setLineDash(c.borderDash||[]),s.lineDashOffset=c.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(r=0,i=o.length;r<i;++r){const l=o[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{grid:s}}=this,o=s.setContext(this.getContext()),r=s.drawBorder?o.borderWidth:0;if(!r)return;const i=s.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,u,c,d;this.isHorizontal()?(l=ou(t,this.left,r)-r/2,u=ou(t,this.right,i)+i/2,c=d=a):(c=ou(t,this.top,r)-r/2,d=ou(t,this.bottom,i)+i/2,l=u=a),n.save(),n.lineWidth=o.borderWidth,n.strokeStyle=o.borderColor,n.beginPath(),n.moveTo(l,c),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,o=this._computeLabelArea();o&&hm(s,o);const r=this._labelItems||(this._labelItems=this._computeLabelItems(t));let i,a;for(i=0,a=r.length;i<a;++i){const l=r[i],u=l.font,c=l.label;l.backdrop&&(s.fillStyle=l.backdrop.color,s.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height));let d=l.textOffset;ac(s,c,0,d,u,l)}o&&pm(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:o}}=this;if(!s.display)return;const r=Rs(s.font),i=Qs(s.padding),a=s.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||dn(n)?(l+=i.bottom,Wn(s.text)&&(l+=r.lineHeight*(s.text.length-1))):l+=i.top;const{titleX:u,titleY:c,maxWidth:d,rotation:f}=Utt(this,l,n,a);ac(t,s.text,0,0,r,{color:s.color,maxWidth:d,rotation:f,textAlign:Htt(a,n,o),textBaseline:"middle",translation:[u,c]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=Xt(t.grid&&t.grid.z,-1);return!this._isVisible()||this.draw!==kc.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s+1,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",o=[];let r,i;for(r=0,i=n.length;r<i;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&o.push(a)}return o}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Rs(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class mv{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;Ktt(n)&&(s=this.register(n));const o=this.items,r=t.id,i=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in o||(o[r]=t,jtt(t,i,s),this.override&&Cn.override(t.id,t.overrides)),i}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,o=this.scope;s in n&&delete n[s],o&&s in Cn[o]&&(delete Cn[o][s],this.override&&delete rc[s])}}function jtt(e,t,n){const s=yp(Object.create(null),[n?Cn.get(n):{},Cn.get(t),e.defaults]);Cn.set(t,s),e.defaultRoutes&&Gtt(t,e.defaultRoutes),e.descriptors&&Cn.describe(t,e.descriptors)}function Gtt(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),o=s.pop(),r=[e].concat(s).join("."),i=t[n].split("."),a=i.pop(),l=i.join(".");Cn.route(r,o,l,a)})}function Ktt(e){return"id"in e&&"defaults"in e}class qtt{constructor(){this.controllers=new mv(ra,"datasets",!0),this.elements=new mv(To,"elements"),this.plugins=new mv(Object,"plugins"),this.scales=new mv(kc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(o=>{const r=s||this._getRegistryForType(o);s||r.isForType(o)||r===this.plugins&&o.id?this._exec(t,r,o):Gn(o,i=>{const a=s||this._getRegistryForType(i);this._exec(t,a,i)})})}_exec(t,n,s){const o=bE(t);Jn(s["before"+o],[],s),n[t](s),Jn(s["after"+o],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const o=n.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return o}}var Ca=new qtt;class Ytt{constructor(){this._init=[]}notify(t,n,s,o){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=o?this._descriptors(t).filter(o):this._descriptors(t),i=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),i}_notify(t,n,s,o){o=o||{};for(const r of t){const i=r.plugin,a=i[s],l=[n,o,r.options];if(Jn(a,l,i)===!1&&o.cancelable)return!1}return!0}invalidate(){On(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,o=Xt(s.options&&s.options.plugins,{}),r=Xtt(s);return o===!1&&!n?[]:Jtt(t,r,o,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,o=(r,i)=>r.filter(a=>!i.some(l=>a.plugin.id===l.plugin.id));this._notify(o(n,s),t,"stop"),this._notify(o(s,n),t,"start")}}function Xtt(e){const t=[],n=Object.keys(Ca.plugins.items);for(let o=0;o<n.length;o++)t.push(Ca.getPlugin(n[o]));const s=e.plugins||[];for(let o=0;o<s.length;o++){const r=s[o];t.indexOf(r)===-1&&t.push(r)}return t}function Ztt(e,t){return!t&&e===!1?null:e===!0?{}:e}function Jtt(e,t,n,s){const o=[],r=e.getContext();for(let i=0;i<t.length;i++){const a=t[i],l=a.id,u=Ztt(n[l],s);u!==null&&o.push({plugin:a,options:Qtt(e.config,a,u,r)})}return o}function Qtt(e,t,n,s){const o=e.pluginScopeKeys(t),r=e.getOptionScopes(n,o);return e.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Lx(e,t){const n=Cn.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function ent(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function tnt(e,t){return e===t?"_index_":"_value_"}function nnt(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Bx(e,t){return e==="x"||e==="y"?e:t.axis||nnt(t.position)||e.charAt(0).toLowerCase()}function snt(e,t){const n=rc[e.type]||{scales:{}},s=t.scales||{},o=Lx(e.type,t),r=Object.create(null),i=Object.create(null);return Object.keys(s).forEach(a=>{const l=s[a];if(!dn(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const u=Bx(a,l),c=tnt(u,o),d=n.scales||{};r[u]=r[u]||a,i[a]=Dh(Object.create(null),[{axis:u},l,d[u],d[c]])}),e.data.datasets.forEach(a=>{const l=a.type||e.type,u=a.indexAxis||Lx(l,t),d=(rc[l]||{}).scales||{};Object.keys(d).forEach(f=>{const h=ent(f,u),p=a[h+"AxisID"]||r[h]||h;i[p]=i[p]||Object.create(null),Dh(i[p],[{axis:h},s[p],d[f]])})}),Object.keys(i).forEach(a=>{const l=i[a];Dh(l,[Cn.scales[l.type],Cn.scale])}),i}function OH(e){const t=e.options||(e.options={});t.plugins=Xt(t.plugins,{}),t.scales=snt(e,t)}function FH(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function ont(e){return e=e||{},e.data=FH(e.data),OH(e),e}const QM=new Map,PH=new Set;function vv(e,t){let n=QM.get(e);return n||(n=t(),QM.set(e,n),PH.add(n)),n}const Xf=(e,t,n)=>{const s=oc(t,n);s!==void 0&&e.add(s)};class rnt{constructor(t){this._config=ont(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=FH(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),OH(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return vv(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return vv(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return vv(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return vv(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let o=s.get(t);return(!o||n)&&(o=new Map,s.set(t,o)),o}getOptionScopes(t,n,s){const{options:o,type:r}=this,i=this._cachedScopes(t,s),a=i.get(n);if(a)return a;const l=new Set;n.forEach(c=>{t&&(l.add(t),c.forEach(d=>Xf(l,t,d))),c.forEach(d=>Xf(l,o,d)),c.forEach(d=>Xf(l,rc[r]||{},d)),c.forEach(d=>Xf(l,Cn,d)),c.forEach(d=>Xf(l,Fx,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),PH.has(n)&&i.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,rc[n]||{},Cn.datasets[n]||{},{type:n},Cn,Fx]}resolveNamedOptions(t,n,s,o=[""]){const r={$shared:!0},{resolver:i,subPrefixes:a}=eO(this._resolverCache,t,o);let l=i;if(ant(i,n)){r.$shared=!1,s=kl(s)?s():s;const u=this.createResolver(t,s,a);l=qd(i,s,u)}for(const u of n)r[u]=l[u];return r}createResolver(t,n,s=[""],o){const{resolver:r}=eO(this._resolverCache,t,s);return dn(n)?qd(r,n,void 0,o):r}}function eO(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const o=n.join();let r=s.get(o);return r||(r={resolver:IE(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(o,r)),r}const int=e=>dn(e)&&Object.getOwnPropertyNames(e).reduce((t,n)=>t||kl(e[n]),!1);function ant(e,t){const{isScriptable:n,isIndexable:s}=gH(e);for(const o of t){const r=n(o),i=s(o),a=(i||r)&&e[o];if(r&&(kl(a)||int(a))||i&&Wn(a))return!0}return!1}var lnt="3.7.1";const unt=["top","bottom","left","right","chartArea"];function tO(e,t){return e==="top"||e==="bottom"||unt.indexOf(e)===-1&&t==="x"}function nO(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function sO(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Jn(n&&n.onComplete,[e],t)}function cnt(e){const t=e.chart,n=t.options.animation;Jn(n&&n.onProgress,[e],t)}function LH(e){return wH()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const rb={},BH=e=>{const t=LH(e);return Object.values(rb).filter(n=>n.canvas===t).pop()};function dnt(e,t,n){const s=Object.keys(e);for(const o of s){const r=+o;if(r>=t){const i=e[o];delete e[o],(n>0||r>t)&&(e[r+n]=i)}}}function fnt(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}class _u{constructor(t,n){const s=this.config=new rnt(n),o=LH(t),r=BH(o);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const i=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Ntt(o)),this.platform.updateConfig(s);const a=this.platform.acquireContext(o,i.aspectRatio),l=a&&a.canvas,u=l&&l.height,c=l&&l.width;if(this.id=JJe(),this.ctx=a,this.canvas=l,this.width=c,this.height=u,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ytt,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=XJe(d=>this.update(d),i.resizeDelay||0),this._dataChanges=[],rb[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ha.listen(this,"complete",sO),ha.listen(this,"progress",cnt),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:o,_aspectRatio:r}=this;return On(t)?n&&r?r:o?s/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():TM(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return kM(this.canvas,this.ctx),this}stop(){return ha.stop(this),this}resize(t,n){ha.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,o=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(o,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,!!TM(this,a,!0)&&(this.notifyPlugins("resize",{size:i}),Jn(s.onResize,[this,i],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Gn(n,(s,o)=>{s.id=o})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,o=Object.keys(s).reduce((i,a)=>(i[a]=!1,i),{});let r=[];n&&(r=r.concat(Object.keys(n).map(i=>{const a=n[i],l=Bx(i,a),u=l==="r",c=l==="x";return{options:a,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),Gn(r,i=>{const a=i.options,l=a.id,u=Bx(l,a),c=Xt(a.type,i.dtype);(a.position===void 0||tO(a.position,u)!==tO(i.dposition))&&(a.position=i.dposition),o[l]=!0;let d=null;if(l in s&&s[l].type===c)d=s[l];else{const f=Ca.getScale(c);d=new f({id:l,type:c,ctx:this.ctx,chart:this}),s[d.id]=d}d.init(a,t)}),Gn(o,(i,a)=>{i||delete s[a]}),Gn(s,i=>{Do.configure(this,i,i.options),Do.addBox(this,i)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((o,r)=>o.index-r.index),s>n){for(let o=n;o<s;++o)this._destroyDatasetMeta(o);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(nO("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,o)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,o;for(this._removeUnreferencedMetasets(),s=0,o=n.length;s<o;s++){const r=n[s];let i=this.getDatasetMeta(s);const a=r.type||this.config.type;if(i.type&&i.type!==a&&(this._destroyDatasetMeta(s),i=this.getDatasetMeta(s)),i.type=a,i.indexAxis=r.indexAxis||Lx(a,this.options),i.order=r.order||0,i.index=s,i.label=""+r.label,i.visible=this.isDatasetVisible(s),i.controller)i.controller.updateIndex(s),i.controller.linkScales();else{const l=Ca.getController(a),{datasetElementType:u,dataElementType:c}=Cn.datasets[a];Object.assign(l.prototype,{dataElementType:Ca.getElement(c),datasetElementType:u&&Ca.getElement(u)}),i.controller=new l(this,s),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){Gn(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let u=0,c=this.data.datasets.length;u<c;u++){const{controller:d}=this.getDatasetMeta(u),f=!o&&r.indexOf(d)===-1;d.buildOrUpdateElements(f),i=Math.max(+d.getMaxOverflow(),i)}i=this._minPadding=s.layout.autoPadding?i:0,this._updateLayout(i),o||Gn(r,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(nO("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Gn(this.scales,t=>{Do.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!hM(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:o,count:r}of n){const i=s==="_removeElements"?-r:r;dnt(t,o,i)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(i=>i[0]===r).map((i,a)=>a+","+i.splice(1).join(","))),o=s(0);for(let r=1;r<n;r++)if(!hM(o,s(r)))return;return Array.from(o).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Do.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Gn(this.boxes,o=>{s&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,r)=>{o._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,kl(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),o={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(s.controller._update(n),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ha.has(this)?this.attached&&!ha.running(this)&&ha.start(this):(this.draw(),sO({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:o}=this._resizeBeforeDraw;this._resize(s,o),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let o,r;for(o=0,r=n.length;o<r;++o){const i=n[o];(!t||i.visible)&&s.push(i)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s=t._clip,o=!s.disabled,r=this.chartArea,i={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&hm(n,{left:s.left===!1?0:r.left-s.left,right:s.right===!1?this.width:r.right+s.right,top:s.top===!1?0:r.top-s.top,bottom:s.bottom===!1?this.height:r.bottom+s.bottom}),t.controller.draw(),o&&pm(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}getElementsAtEventForMode(t,n,s,o){const r=utt.modes[n];return typeof r=="function"?r(this,t,s,o):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let o=s.filter(r=>r&&r._dataset===n).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(o)),o}getContext(){return this.$context||(this.$context=Ul(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const o=s?"show":"hide",r=this.getDatasetMeta(t),i=r.controller._resolveAnimations(void 0,o);js(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),i.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?o:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),ha.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),kM(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete rb[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,i)=>{n.addEventListener(this,r,i),t[r]=i},o=(r,i,a)=>{r.offsetX=i,r.offsetY=a,this._eventHandler(r)};Gn(this.options.events,r=>s(r,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(l,u)=>{n.addEventListener(this,l,u),t[l]=u},o=(l,u)=>{t[l]&&(n.removeEventListener(this,l,u),delete t[l])},r=(l,u)=>{this.canvas&&this.resize(l,u)};let i;const a=()=>{o("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",i)};i=()=>{this.attached=!1,o("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():i()}unbindEvents(){Gn(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Gn(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const o=s?"set":"remove";let r,i,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+o+"DatasetHoverStyle"]()),a=0,l=t.length;a<l;++a){i=t[a];const u=i&&this.getDatasetMeta(i.datasetIndex).controller;u&&u[o+"HoverStyle"](i.element,i.datasetIndex,i.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:i})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[i],index:i}});!J0(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}_updateHoverStyles(t,n,s){const o=this.options.hover,r=(l,u)=>l.filter(c=>!u.some(d=>c.datasetIndex===d.datasetIndex&&c.index===d.index)),i=r(n,t),a=s?t:r(t,n);i.length&&this.updateHoverStyle(i,o.mode,!1),a.length&&o.mode&&this.updateHoverStyle(a,o.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:ic(t,this.chartArea,this._minPadding)},o=i=>(i.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,o)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,o),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:o=[],options:r}=this,i=n,a=this._getActiveElements(t,o,s,i),l=oQe(t),u=fnt(t,this._lastEvent,s,l);s&&(this._lastEvent=null,Jn(r.onHover,[t,a,this],this),l&&Jn(r.onClick,[t,a,this],this));const c=!J0(a,o);return(c||n)&&(this._active=a,this._updateHoverStyles(a,o,n)),this._lastEvent=u,c}_getActiveElements(t,n,s,o){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,o)}}const oO=()=>Gn(_u.instances,e=>e._plugins.invalidate()),qa=!0;Object.defineProperties(_u,{defaults:{enumerable:qa,value:Cn},instances:{enumerable:qa,value:rb},overrides:{enumerable:qa,value:rc},registry:{enumerable:qa,value:Ca},version:{enumerable:qa,value:lnt},getChart:{enumerable:qa,value:BH},register:{enumerable:qa,value:(...e)=>{Ca.add(...e),oO()}},unregister:{enumerable:qa,value:(...e)=>{Ca.remove(...e),oO()}}});function zH(e,t,n){const{startAngle:s,pixelMargin:o,x:r,y:i,outerRadius:a,innerRadius:l}=t;let u=o/a;e.beginPath(),e.arc(r,i,a,s-u,n+u),l>o?(u=o/l,e.arc(r,i,l,n+u,s-u,!0)):e.arc(r,i,o,n+xs,s-xs),e.closePath(),e.clip()}function hnt(e){return kE(e,["outerStart","outerEnd","innerStart","innerEnd"])}function pnt(e,t,n,s){const o=hnt(e.options.borderRadius),r=(n-t)/2,i=Math.min(r,s*t/2),a=l=>{const u=(n-Math.min(r,l))*s/2;return ao(l,0,Math.min(r,u))};return{outerStart:a(o.outerStart),outerEnd:a(o.outerEnd),innerStart:ao(o.innerStart,0,i),innerEnd:ao(o.innerEnd,0,i)}}function Yc(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function zx(e,t,n,s,o){const{x:r,y:i,startAngle:a,pixelMargin:l,innerRadius:u}=t,c=Math.max(t.outerRadius+s+n-l,0),d=u>0?u+s+n+l:0;let f=0;const h=o-a;if(s){const M=u>0?u-s:0,B=c>0?c-s:0,j=(M+B)/2,X=j!==0?h*j/(j+s):h;f=(h-X)/2}const p=Math.max(.001,h*c-n/Bn)/c,g=(h-p)/2,m=a+g+f,v=o-g-f,{outerStart:b,outerEnd:$,innerStart:y,innerEnd:w}=pnt(t,d,c,v-m),C=c-b,x=c-$,S=m+b/C,T=v-$/x,I=d+y,_=d+w,N=m+y/I,D=v-w/_;if(e.beginPath(),e.arc(r,i,c,S,T),$>0){const M=Yc(x,T,r,i);e.arc(M.x,M.y,$,T,v+xs)}const F=Yc(_,v,r,i);if(e.lineTo(F.x,F.y),w>0){const M=Yc(_,D,r,i);e.arc(M.x,M.y,w,v+xs,D+Math.PI)}if(e.arc(r,i,d,v-w/d,m+y/d,!0),y>0){const M=Yc(I,N,r,i);e.arc(M.x,M.y,y,N+Math.PI,m-xs)}const P=Yc(C,m,r,i);if(e.lineTo(P.x,P.y),b>0){const M=Yc(C,S,r,i);e.arc(M.x,M.y,b,m-xs,S)}e.closePath()}function gnt(e,t,n,s){const{fullCircles:o,startAngle:r,circumference:i}=t;let a=t.endAngle;if(o){zx(e,t,n,s,r+ns);for(let l=0;l<o;++l)e.fill();isNaN(i)||(a=r+i%ns,i%ns===0&&(a+=ns))}return zx(e,t,n,s,a),e.fill(),a}function mnt(e,t,n){const{x:s,y:o,startAngle:r,pixelMargin:i,fullCircles:a}=t,l=Math.max(t.outerRadius-i,0),u=t.innerRadius+i;let c;for(n&&zH(e,t,r+ns),e.beginPath(),e.arc(s,o,u,r+ns,r,!0),c=0;c<a;++c)e.stroke();for(e.beginPath(),e.arc(s,o,l,r,r+ns),c=0;c<a;++c)e.stroke()}function vnt(e,t,n,s,o){const{options:r}=t,{borderWidth:i,borderJoinStyle:a}=r,l=r.borderAlign==="inner";!i||(l?(e.lineWidth=i*2,e.lineJoin=a||"round"):(e.lineWidth=i,e.lineJoin=a||"bevel"),t.fullCircles&&mnt(e,t,l),l&&zH(e,t,o),zx(e,t,n,s,o),e.stroke())}class D1 extends To{constructor(t){super();this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,s){const o=this.getProps(["x","y"],s),{angle:r,distance:i}=iH(o,{x:t,y:n}),{startAngle:a,endAngle:l,innerRadius:u,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),f=this.options.spacing/2,p=Xt(d,l-a)>=ns||Cp(r,a,l),g=wa(i,u+f,c+f);return p&&g}getCenterPoint(t){const{x:n,y:s,startAngle:o,endAngle:r,innerRadius:i,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:l,spacing:u}=this.options,c=(o+r)/2,d=(i+a+u+l)/2;return{x:n+Math.cos(c)*d,y:s+Math.sin(c)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:s}=this,o=(n.offset||0)/2,r=(n.spacing||0)/2;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>ns?Math.floor(s/ns):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let i=0;if(o){i=o/2;const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*i,Math.sin(l)*i),this.circumference>=Bn&&(i=o)}t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor;const a=gnt(t,this,i,r);vnt(t,this,i,r,a),t.restore()}}D1.id="arc";D1.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0};D1.defaultRoutes={backgroundColor:"backgroundColor"};function VH(e,t,n=t){e.lineCap=Xt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Xt(n.borderDash,t.borderDash)),e.lineDashOffset=Xt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Xt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Xt(n.borderWidth,t.borderWidth),e.strokeStyle=Xt(n.borderColor,t.borderColor)}function bnt(e,t,n){e.lineTo(n.x,n.y)}function ynt(e){return e.stepped?DQe:e.tension||e.cubicInterpolationMode==="monotone"?RQe:bnt}function WH(e,t,n={}){const s=e.length,{start:o=0,end:r=s-1}=n,{start:i,end:a}=t,l=Math.max(o,i),u=Math.min(r,a),c=o<i&&r<i||o>a&&r>a;return{count:s,start:l,loop:t.loop,ilen:u<l&&!c?s+u-l:u-l}}function wnt(e,t,n,s){const{points:o,options:r}=t,{count:i,start:a,loop:l,ilen:u}=WH(o,n,s),c=ynt(r);let{move:d=!0,reverse:f}=s||{},h,p,g;for(h=0;h<=u;++h)p=o[(a+(f?u-h:h))%i],!p.skip&&(d?(e.moveTo(p.x,p.y),d=!1):c(e,g,p,f,r.stepped),g=p);return l&&(p=o[(a+(f?u:0))%i],c(e,g,p,f,r.stepped)),!!l}function $nt(e,t,n,s){const o=t.points,{count:r,start:i,ilen:a}=WH(o,n,s),{move:l=!0,reverse:u}=s||{};let c=0,d=0,f,h,p,g,m,v;const b=y=>(i+(u?a-y:y))%r,$=()=>{g!==m&&(e.lineTo(c,m),e.lineTo(c,g),e.lineTo(c,v))};for(l&&(h=o[b(0)],e.moveTo(h.x,h.y)),f=0;f<=a;++f){if(h=o[b(f)],h.skip)continue;const y=h.x,w=h.y,C=y|0;C===p?(w<g?g=w:w>m&&(m=w),c=(d*c+y)/++d):($(),e.lineTo(y,w),p=C,d=0,g=m=w),v=w}$()}function Vx(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?$nt:wnt}function Cnt(e){return e.stepped?pet:e.tension||e.cubicInterpolationMode==="monotone"?get:hu}function xnt(e,t,n,s){let o=t._path;o||(o=t._path=new Path2D,t.path(o,n,s)&&o.closePath()),VH(e,t.options),e.stroke(o)}function knt(e,t,n,s){const{segments:o,options:r}=t,i=Vx(t);for(const a of o)VH(e,r,a.style),e.beginPath(),i(e,t,a,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const Snt=typeof Path2D=="function";function Int(e,t,n,s){Snt&&!t.options.segment?xnt(e,t,n,s):knt(e,t,n,s)}class jl extends To{constructor(t){super();this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const o=s.spanGaps?this._loop:this._fullLoop;ret(this._points,s,t,o,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Cet(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,o=t[n],r=this.points,i=IH(this,{property:n,start:o,end:o});if(!i.length)return;const a=[],l=Cnt(s);let u,c;for(u=0,c=i.length;u<c;++u){const{start:d,end:f}=i[u],h=r[d],p=r[f];if(h===p){a.push(h);continue}const g=Math.abs((o-h[n])/(p[n]-h[n])),m=l(h,p,g,s.stepped);m[n]=t[n],a.push(m)}return a.length===1?a[0]:a}pathSegment(t,n,s){return Vx(this)(t,this,n,s)}path(t,n,s){const o=this.segments,r=Vx(this);let i=this._loop;n=n||0,s=s||this.points.length-n;for(const a of o)i&=r(t,this,a,{start:n,end:n+s-1});return!!i}draw(t,n,s,o){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),Int(t,this,s,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}jl.id="line";jl.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};jl.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};jl.descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};function rO(e,t,n,s){const o=e.options,{[n]:r}=e.getProps([n],s);return Math.abs(t-r)<o.radius+o.hitRadius}class R1 extends To{constructor(t){super();this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,s){const o=this.options,{x:r,y:i}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(n-i,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,n){return rO(this,t,"x",n)}inYRange(t,n){return rO(this,t,"y",n)}getCenterPoint(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const s=n&&t.borderWidth||0;return(n+s)*2}draw(t,n){const s=this.options;this.skip||s.radius<.1||!ic(this,n,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,kp(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}R1.id="point";R1.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};R1.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function HH(e,t){const{x:n,y:s,base:o,width:r,height:i}=e.getProps(["x","y","base","width","height"],t);let a,l,u,c,d;return e.horizontal?(d=i/2,a=Math.min(n,o),l=Math.max(n,o),u=s-d,c=s+d):(d=r/2,a=n-d,l=n+d,u=Math.min(s,o),c=Math.max(s,o)),{left:a,top:u,right:l,bottom:c}}function ll(e,t,n,s){return e?0:ao(t,n,s)}function Ent(e,t,n){const s=e.options.borderWidth,o=e.borderSkipped,r=fH(s);return{t:ll(o.top,r.top,0,n),r:ll(o.right,r.right,0,t),b:ll(o.bottom,r.bottom,0,n),l:ll(o.left,r.left,0,t)}}function Tnt(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),o=e.options.borderRadius,r=zu(o),i=Math.min(t,n),a=e.borderSkipped,l=s||dn(o);return{topLeft:ll(!l||a.top||a.left,r.topLeft,0,i),topRight:ll(!l||a.top||a.right,r.topRight,0,i),bottomLeft:ll(!l||a.bottom||a.left,r.bottomLeft,0,i),bottomRight:ll(!l||a.bottom||a.right,r.bottomRight,0,i)}}function _nt(e){const t=HH(e),n=t.right-t.left,s=t.bottom-t.top,o=Ent(e,n/2,s/2),r=Tnt(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:r},inner:{x:t.left+o.l,y:t.top+o.t,w:n-o.l-o.r,h:s-o.t-o.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,r.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(o.b,o.r))}}}}function E$(e,t,n,s){const o=t===null,r=n===null,a=e&&!(o&&r)&&HH(e,s);return a&&(o||wa(t,a.left,a.right))&&(r||wa(n,a.top,a.bottom))}function Nnt(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Ant(e,t){e.rect(t.x,t.y,t.w,t.h)}function T$(e,t,n={}){const s=e.x!==n.x?-t:0,o=e.y!==n.y?-t:0,r=(e.x+e.w!==n.x+n.w?t:0)-s,i=(e.y+e.h!==n.y+n.h?t:0)-o;return{x:e.x+s,y:e.y+o,w:e.w+r,h:e.h+i,radius:e.radius}}class M1 extends To{constructor(t){super();this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:o}}=this,{inner:r,outer:i}=_nt(this),a=Nnt(i.radius)?Sp:Ant;t.save(),(i.w!==r.w||i.h!==r.h)&&(t.beginPath(),a(t,T$(i,n,r)),t.clip(),a(t,T$(r,-n,i)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,T$(r,n)),t.fillStyle=o,t.fill(),t.restore()}inRange(t,n,s){return E$(this,t,n,s)}inXRange(t,n){return E$(this,t,null,n)}inYRange(t,n){return E$(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:o,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(n+o)/2:n,y:r?s:(s+o)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}M1.id="bar";M1.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};M1.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Dnt=Object.freeze({__proto__:null,ArcElement:D1,LineElement:jl,PointElement:R1,BarElement:M1});function Rnt(e,t,n,s,o){const r=o.samples||s;if(r>=n)return e.slice(t,t+n);const i=[],a=(n-2)/(r-2);let l=0;const u=t+n-1;let c=t,d,f,h,p,g;for(i[l++]=e[c],d=0;d<r-2;d++){let m=0,v=0,b;const $=Math.floor((d+1)*a)+1+t,y=Math.min(Math.floor((d+2)*a)+1,n)+t,w=y-$;for(b=$;b<y;b++)m+=e[b].x,v+=e[b].y;m/=w,v/=w;const C=Math.floor(d*a)+1+t,x=Math.min(Math.floor((d+1)*a)+1,n)+t,{x:S,y:T}=e[c];for(h=p=-1,b=C;b<x;b++)p=.5*Math.abs((S-m)*(e[b].y-T)-(S-e[b].x)*(v-T)),p>h&&(h=p,f=e[b],g=b);i[l++]=f,c=g}return i[l++]=e[u],i}function Mnt(e,t,n,s){let o=0,r=0,i,a,l,u,c,d,f,h,p,g;const m=[],v=t+n-1,b=e[t].x,y=e[v].x-b;for(i=t;i<t+n;++i){a=e[i],l=(a.x-b)/y*s,u=a.y;const w=l|0;if(w===c)u<p?(p=u,d=i):u>g&&(g=u,f=i),o=(r*o+a.x)/++r;else{const C=i-1;if(!On(d)&&!On(f)){const x=Math.min(d,f),S=Math.max(d,f);x!==h&&x!==C&&m.push(Ut(dt({},e[x]),{x:o})),S!==h&&S!==C&&m.push(Ut(dt({},e[S]),{x:o}))}i>0&&C!==h&&m.push(e[C]),m.push(a),c=w,r=0,p=g=u,d=f=h=i}}return m}function UH(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{value:t})}}function iO(e){e.data.datasets.forEach(t=>{UH(t)})}function Ont(e,t){const n=t.length;let s=0,o;const{iScale:r}=e,{min:i,max:a,minDefined:l,maxDefined:u}=r.getUserBounds();return l&&(s=ao($a(t,r.axis,i).lo,0,n-1)),u?o=ao($a(t,r.axis,a).hi+1,s,n)-s:o=n-s,{start:s,count:o}}var Fnt={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){iO(e);return}const s=e.width;e.data.datasets.forEach((o,r)=>{const{_data:i,indexAxis:a}=o,l=e.getDatasetMeta(r),u=i||o.data;if(mh([a,e.options.indexAxis])==="y"||l.type!=="line")return;const c=e.scales[l.xAxisID];if(c.type!=="linear"&&c.type!=="time"||e.options.parsing)return;let{start:d,count:f}=Ont(l,u);const h=n.threshold||4*s;if(f<=h){UH(o);return}On(i)&&(o._data=u,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(n.algorithm){case"lttb":p=Rnt(u,d,f,s,n);break;case"min-max":p=Mnt(u,d,f,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}o._decimated=p})},destroy(e){iO(e)}};function Pnt(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function Lnt(e){const t=e.options,n=t.fill;let s=Xt(n&&n.target,n);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function Bnt(e,t,n){const s=Lnt(e);if(dn(s))return isNaN(s.value)?!1:s;let o=parseFloat(s);return $s(o)&&Math.floor(o)===o?((s[0]==="-"||s[0]==="+")&&(o=t+o),o===t||o<0||o>=n?!1:o):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function znt(e){const{scale:t={},fill:n}=e;let s=null,o;return n==="start"?s=t.bottom:n==="end"?s=t.top:dn(n)?s=t.getPixelForValue(n.value):t.getBasePixel&&(s=t.getBasePixel()),$s(s)?(o=t.isHorizontal(),{x:o?s:null,y:o?null:s}):null}class jH{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,s){const{x:o,y:r,radius:i}=this;return n=n||{start:0,end:ns},t.arc(o,r,i,n.end,n.start,!0),!s.bounds}interpolate(t){const{x:n,y:s,radius:o}=this,r=t.angle;return{x:n+Math.cos(r)*o,y:s+Math.sin(r)*o,angle:r}}}function Vnt(e){const{scale:t,fill:n}=e,s=t.options,o=t.getLabels().length,r=[],i=s.reverse?t.max:t.min,a=s.reverse?t.min:t.max;let l,u,c;if(n==="start"?c=i:n==="end"?c=a:dn(n)?c=n.value:c=t.getBaseValue(),s.grid.circular)return u=t.getPointPositionForValue(0,i),new jH({x:u.x,y:u.y,radius:t.getDistanceFromCenterForValue(c)});for(l=0;l<o;++l)r.push(t.getPointPositionForValue(l,c));return r}function Wnt(e){return(e.scale||{}).getPointPositionForValue?Vnt(e):znt(e)}function RE(e,t,n){for(;t>e;t--){const s=n[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function Hnt(e,t){const{x:n=null,y:s=null}=e||{},o=t.points,r=[];return t.segments.forEach(({start:i,end:a})=>{a=RE(i,a,o);const l=o[i],u=o[a];s!==null?(r.push({x:l.x,y:s}),r.push({x:u.x,y:s})):n!==null&&(r.push({x:n,y:l.y}),r.push({x:n,y:u.y}))}),r}function Unt(e){const{scale:t,index:n,line:s}=e,o=[],r=s.segments,i=s.points,a=jnt(t,n);a.push(GH({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){const u=r[l];for(let c=u.start;c<=u.end;c++)Gnt(o,i[c],a)}return new jl({points:o,options:{}})}function jnt(e,t){const n=[],s=e.getMatchingVisibleMetas("line");for(let o=0;o<s.length;o++){const r=s[o];if(r.index===t)break;r.hidden||n.unshift(r.dataset)}return n}function Gnt(e,t,n){const s=[];for(let o=0;o<n.length;o++){const r=n[o],{first:i,last:a,point:l}=Knt(r,t,"x");if(!(!l||i&&a)){if(i)s.unshift(l);else if(e.push(l),!a)break}}e.push(...s)}function Knt(e,t,n){const s=e.interpolate(t,n);if(!s)return{};const o=s[n],r=e.segments,i=e.points;let a=!1,l=!1;for(let u=0;u<r.length;u++){const c=r[u],d=i[c.start][n],f=i[c.end][n];if(wa(o,d,f)){a=o===d,l=o===f;break}}return{first:a,last:l,point:s}}function qnt(e){const{chart:t,fill:n,line:s}=e;if($s(n))return Pnt(t,n);if(n==="stack")return Unt(e);if(n==="shape")return!0;const o=Wnt(e);return o instanceof jH?o:GH(o,s)}function GH(e,t){let n=[],s=!1;return Wn(e)?(s=!0,n=e):n=Hnt(e,t),n.length?new jl({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function Ynt(e,t,n){let o=e[t].fill;const r=[t];let i;if(!n)return o;for(;o!==!1&&r.indexOf(o)===-1;){if(!$s(o))return o;if(i=e[o],!i)return!1;if(i.visible)return o;r.push(o),o=i.fill}return!1}function aO(e,t,n){const{segments:s,points:o}=t;let r=!0,i=!1;e.beginPath();for(const a of s){const{start:l,end:u}=a,c=o[l],d=o[RE(l,u,o)];r?(e.moveTo(c.x,c.y),r=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,a,{move:i}),i?e.closePath():e.lineTo(d.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function Wx(e,t,n,s){if(s)return;let o=t[e],r=n[e];return e==="angle"&&(o=hr(o),r=hr(r)),{property:e,start:o,end:r}}function lO(e,t,n,s){return e&&t?s(e[n],t[n]):e?e[n]:t?t[n]:0}function Xnt(e,t,n){const s=e.segments,o=e.points,r=t.points,i=[];for(const a of s){let{start:l,end:u}=a;u=RE(l,u,o);const c=Wx(n,o[l],o[u],a.loop);if(!t.segments){i.push({source:a,target:c,start:o[l],end:o[u]});continue}const d=IH(t,c);for(const f of d){const h=Wx(n,r[f.start],r[f.end],f.loop),p=SH(a,o,h);for(const g of p)i.push({source:g,target:f,start:{[n]:lO(c,h,"start",Math.max)},end:{[n]:lO(c,h,"end",Math.min)}})}}return i}function Znt(e,t,n){const{top:s,bottom:o}=t.chart.chartArea,{property:r,start:i,end:a}=n||{};r==="x"&&(e.beginPath(),e.rect(i,s,a-i,o-s),e.clip())}function uO(e,t,n,s){const o=t.interpolate(n,s);o&&e.lineTo(o.x,o.y)}function cO(e,t){const{line:n,target:s,property:o,color:r,scale:i}=t,a=Xnt(n,s,o);for(const{source:l,target:u,start:c,end:d}of a){const{style:{backgroundColor:f=r}={}}=l,h=s!==!0;e.save(),e.fillStyle=f,Znt(e,i,h&&Wx(o,c,d)),e.beginPath();const p=!!n.pathSegment(e,l);let g;if(h){p?e.closePath():uO(e,s,d,o);const m=!!s.pathSegment(e,u,{move:p,reverse:!0});g=p&&m,g||uO(e,s,c,o)}e.closePath(),e.fill(g?"evenodd":"nonzero"),e.restore()}}function Jnt(e,t){const{line:n,target:s,above:o,below:r,area:i,scale:a}=t,l=n._loop?"angle":t.axis;e.save(),l==="x"&&r!==o&&(aO(e,s,i.top),cO(e,{line:n,target:s,color:o,scale:a,property:l}),e.restore(),e.save(),aO(e,s,i.bottom)),cO(e,{line:n,target:s,color:r,scale:a,property:l}),e.restore()}function _$(e,t,n){const s=qnt(t),{line:o,scale:r,axis:i}=t,a=o.options,l=a.fill,u=a.backgroundColor,{above:c=u,below:d=u}=l||{};s&&o.points.length&&(hm(e,n),Jnt(e,{line:o,target:s,above:c,below:d,area:n,scale:r,axis:i}),pm(e))}var Qnt={id:"filler",afterDatasetsUpdate(e,t,n){const s=(e.data.datasets||[]).length,o=[];let r,i,a,l;for(i=0;i<s;++i)r=e.getDatasetMeta(i),a=r.dataset,l=null,a&&a.options&&a instanceof jl&&(l={visible:e.isDatasetVisible(i),index:i,fill:Bnt(a,i,s),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,o.push(l);for(i=0;i<s;++i)l=o[i],!(!l||l.fill===!1)&&(l.fill=Ynt(o,i,n.propagate))},beforeDraw(e,t,n){const s=n.drawTime==="beforeDraw",o=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let i=o.length-1;i>=0;--i){const a=o[i].$filler;!a||(a.line.updateControlPoints(r,a.axis),s&&_$(e.ctx,a,r))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let o=s.length-1;o>=0;--o){const r=s[o].$filler;r&&_$(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,n){const s=t.meta.$filler;!s||s.fill===!1||n.drawTime!=="beforeDatasetDraw"||_$(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const dO=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},est=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class fO extends To{constructor(t){super();this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Jn(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,o)=>t.sort(s,o,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,o=Rs(s.font),r=o.size,i=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=dO(s,r);let u,c;n.font=o.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(i,r,a,l)+10):(c=this.maxHeight,u=this._fitCols(i,r,a,l)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,o){const{ctx:r,maxWidth:i,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=o+a;let d=t;r.textAlign="left",r.textBaseline="middle";let f=-1,h=-c;return this.legendItems.forEach((p,g)=>{const m=s+n/2+r.measureText(p.text).width;(g===0||u[u.length-1]+m+2*a>i)&&(d+=c,u[u.length-(g>0?0:1)]=0,h+=c,f++),l[g]={left:0,top:h,row:f,width:m,height:o},u[u.length-1]+=m+a}),d}_fitCols(t,n,s,o){const{ctx:r,maxHeight:i,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=i-t;let d=a,f=0,h=0,p=0,g=0;return this.legendItems.forEach((m,v)=>{const b=s+n/2+r.measureText(m.text).width;v>0&&h+o+2*a>c&&(d+=f+a,u.push({width:f,height:h}),p+=f+a,g++,f=h=0),l[v]={left:p,top:h,col:g,width:b,height:o},f=Math.max(f,b),h+=o+a}),d+=f,u.push({width:f,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:o},rtl:r}}=this,i=bd(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=_o(s,this.left+o,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=_o(s,this.left+o,this.right-this.lineWidths[a])),u.top+=this.top+t+o,u.left=i.leftForLtr(i.x(l),u.width),l+=u.width+o}else{let a=0,l=_o(s,this.top+t+o,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=_o(s,this.top+t+o,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+o,u.left=i.leftForLtr(i.x(u.left),u.width),l+=u.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;hm(t,this),this._draw(),pm(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:o}=this,{align:r,labels:i}=t,a=Cn.color,l=bd(t.rtl,this.left,this.width),u=Rs(i.font),{color:c,padding:d}=i,f=u.size,h=f/2;let p;this.drawTitle(),o.textAlign=l.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=u.string;const{boxWidth:g,boxHeight:m,itemHeight:v}=dO(i,f),b=function(x,S,T){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;o.save();const I=Xt(T.lineWidth,1);if(o.fillStyle=Xt(T.fillStyle,a),o.lineCap=Xt(T.lineCap,"butt"),o.lineDashOffset=Xt(T.lineDashOffset,0),o.lineJoin=Xt(T.lineJoin,"miter"),o.lineWidth=I,o.strokeStyle=Xt(T.strokeStyle,a),o.setLineDash(Xt(T.lineDash,[])),i.usePointStyle){const _={radius:g*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:I},N=l.xPlus(x,g/2),D=S+h;kp(o,_,N,D)}else{const _=S+Math.max((f-m)/2,0),N=l.leftForLtr(x,g),D=zu(T.borderRadius);o.beginPath(),Object.values(D).some(F=>F!==0)?Sp(o,{x:N,y:_,w:g,h:m,radius:D}):o.rect(N,_,g,m),o.fill(),I!==0&&o.stroke()}o.restore()},$=function(x,S,T){ac(o,T.text,x,S+v/2,u,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},y=this.isHorizontal(),w=this._computeTitleHeight();y?p={x:_o(r,this.left+d,this.right-s[0]),y:this.top+d+w,line:0}:p={x:this.left+d,y:_o(r,this.top+w+d,this.bottom-n[0].height),line:0},CH(this.ctx,t.textDirection);const C=v+d;this.legendItems.forEach((x,S)=>{o.strokeStyle=x.fontColor||c,o.fillStyle=x.fontColor||c;const T=o.measureText(x.text).width,I=l.textAlign(x.textAlign||(x.textAlign=i.textAlign)),_=g+h+T;let N=p.x,D=p.y;l.setWidth(this.width),y?S>0&&N+_+d>this.right&&(D=p.y+=C,p.line++,N=p.x=_o(r,this.left+d,this.right-s[p.line])):S>0&&D+C>this.bottom&&(N=p.x=N+n[p.line].width+d,p.line++,D=p.y=_o(r,this.top+w+d,this.bottom-n[p.line].height));const F=l.x(N);b(F,D,x),N=ZJe(I,N+g+h,y?N+_:this.right,t.rtl),$(l.x(N),D,x),y?p.x+=_+d:p.y+=C}),xH(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=Rs(n.font),o=Qs(n.padding);if(!n.display)return;const r=bd(t.rtl,this.left,this.width),i=this.ctx,a=n.position,l=s.size/2,u=o.top+l;let c,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),c=this.top+u,d=_o(t.align,d,this.right-f);else{const p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);c=u+_o(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const h=_o(a,d,d+f);i.textAlign=r.textAlign(vE(a)),i.textBaseline="middle",i.strokeStyle=n.color,i.fillStyle=n.color,i.font=s.string,ac(i,n.text,h,c,s)}_computeTitleHeight(){const t=this.options.title,n=Rs(t.font),s=Qs(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,o,r;if(wa(t,this.left,this.right)&&wa(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(o=r[s],wa(t,o.left,o.left+o.width)&&wa(n,o.top,o.top+o.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!tst(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"){const o=this._hoveredItem,r=est(o,s);o&&!r&&Jn(n.onLeave,[t,o,this],this),this._hoveredItem=s,s&&!r&&Jn(n.onHover,[t,s,this],this)}else s&&Jn(n.onClick,[t,s,this],this)}}function tst(e,t){return!!(e==="mousemove"&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var nst={id:"legend",_element:fO,start(e,t,n){const s=e.legend=new fO({ctx:e.ctx,options:n,chart:e});Do.configure(e,s,n),Do.addBox(e,s)},stop(e){Do.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Do.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,o=n.chart;o.isDatasetVisible(s)?(o.hide(s),t.hidden=!0):(o.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:o,color:r}}=e.legend.options;return e._getSortedDatasetMetas().map(i=>{const a=i.controller.getStyle(n?0:void 0),l=Qs(a.borderWidth);return{text:t[i.index].label,fillStyle:a.backgroundColor,fontColor:r,hidden:!i.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:s||a.pointStyle,rotation:a.rotation,textAlign:o||a.textAlign,borderRadius:0,datasetIndex:i.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class ME extends To{constructor(t){super();this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const o=Wn(s.text)?s.text.length:1;this._padding=Qs(s.padding);const r=o*Rs(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:o,right:r,options:i}=this,a=i.align;let l=0,u,c,d;return this.isHorizontal()?(c=_o(a,s,r),d=n+t,u=r-s):(i.position==="left"?(c=s+t,d=_o(a,o,n),l=Bn*-.5):(c=r-t,d=_o(a,n,o),l=Bn*.5),u=o-n),{titleX:c,titleY:d,maxWidth:u,rotation:l}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=Rs(n.font),r=s.lineHeight/2+this._padding.top,{titleX:i,titleY:a,maxWidth:l,rotation:u}=this._drawArgs(r);ac(t,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:u,textAlign:vE(n.align),textBaseline:"middle",translation:[i,a]})}}function sst(e,t){const n=new ME({ctx:e.ctx,options:t,chart:e});Do.configure(e,n,t),Do.addBox(e,n),e.titleBlock=n}var ost={id:"title",_element:ME,start(e,t,n){sst(e,n)},stop(e){const t=e.titleBlock;Do.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Do.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const bv=new WeakMap;var rst={id:"subtitle",start(e,t,n){const s=new ME({ctx:e.ctx,options:n,chart:e});Do.configure(e,s,n),Do.addBox(e,s),bv.set(e,s)},stop(e){Do.removeBox(e,bv.get(e)),bv.delete(e)},beforeUpdate(e,t,n){const s=bv.get(e);Do.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fh={average(e){if(!e.length)return!1;let t,n,s=0,o=0,r=0;for(t=0,n=e.length;t<n;++t){const i=e[t].element;if(i&&i.hasValue()){const a=i.tooltipPosition();s+=a.x,o+=a.y,++r}}return{x:s/r,y:o/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,o=Number.POSITIVE_INFINITY,r,i,a;for(r=0,i=e.length;r<i;++r){const l=e[r].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),c=$p(t,u);c<o&&(o=c,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function Pi(e,t){return t&&(Wn(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function pa(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function ist(e,t){const{element:n,datasetIndex:s,index:o}=t,r=e.getDatasetMeta(s).controller,{label:i,value:a}=r.getLabelAndValue(o);return{chart:e,label:i,parsed:r.getParsed(o),raw:e.data.datasets[s].data[o],formattedValue:a,dataset:r.getDataset(),dataIndex:o,datasetIndex:s,element:n}}function hO(e,t){const n=e.chart.ctx,{body:s,footer:o,title:r}=e,{boxWidth:i,boxHeight:a}=t,l=Rs(t.bodyFont),u=Rs(t.titleFont),c=Rs(t.footerFont),d=r.length,f=o.length,h=s.length,p=Qs(t.padding);let g=p.height,m=0,v=s.reduce((y,w)=>y+w.before.length+w.lines.length+w.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,d&&(g+=d*u.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){const y=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=h*y+(v-h)*l.lineHeight+(v-1)*t.bodySpacing}f&&(g+=t.footerMarginTop+f*c.lineHeight+(f-1)*t.footerSpacing);let b=0;const $=function(y){m=Math.max(m,n.measureText(y).width+b)};return n.save(),n.font=u.string,Gn(e.title,$),n.font=l.string,Gn(e.beforeBody.concat(e.afterBody),$),b=t.displayColors?i+2+t.boxPadding:0,Gn(s,y=>{Gn(y.before,$),Gn(y.lines,$),Gn(y.after,$)}),b=0,n.font=c.string,Gn(e.footer,$),n.restore(),m+=p.width,{width:m,height:g}}function ast(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function lst(e,t,n,s){const{x:o,width:r}=s,i=n.caretSize+n.caretPadding;if(e==="left"&&o+r+i>t.width||e==="right"&&o-r-i<0)return!0}function ust(e,t,n,s){const{x:o,width:r}=n,{width:i,chartArea:{left:a,right:l}}=e;let u="center";return s==="center"?u=o<=(a+l)/2?"left":"right":o<=r/2?u="left":o>=i-r/2&&(u="right"),lst(u,e,t,n)&&(u="center"),u}function pO(e,t,n){const s=n.yAlign||t.yAlign||ast(e,n);return{xAlign:n.xAlign||t.xAlign||ust(e,t,n,s),yAlign:s}}function cst(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function dst(e,t,n){let{y:s,height:o}=e;return t==="top"?s+=n:t==="bottom"?s-=o+n:s-=o/2,s}function gO(e,t,n,s){const{caretSize:o,caretPadding:r,cornerRadius:i}=e,{xAlign:a,yAlign:l}=n,u=o+r,{topLeft:c,topRight:d,bottomLeft:f,bottomRight:h}=zu(i);let p=cst(t,a);const g=dst(t,l,u);return l==="center"?a==="left"?p+=u:a==="right"&&(p-=u):a==="left"?p-=Math.max(c,f)+o:a==="right"&&(p+=Math.max(d,h)+o),{x:ao(p,0,s.width-t.width),y:ao(g,0,s.height-t.height)}}function yv(e,t,n){const s=Qs(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function mO(e){return Pi([],pa(e))}function fst(e,t,n){return Ul(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function vO(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}class Hx extends To{constructor(t){super();this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),o=s.enabled&&n.options.animation&&s.animations,r=new NE(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=fst(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,o=s.beforeTitle.apply(this,[t]),r=s.title.apply(this,[t]),i=s.afterTitle.apply(this,[t]);let a=[];return a=Pi(a,pa(o)),a=Pi(a,pa(r)),a=Pi(a,pa(i)),a}getBeforeBody(t,n){return mO(n.callbacks.beforeBody.apply(this,[t]))}getBody(t,n){const{callbacks:s}=n,o=[];return Gn(t,r=>{const i={before:[],lines:[],after:[]},a=vO(s,r);Pi(i.before,pa(a.beforeLabel.call(this,r))),Pi(i.lines,a.label.call(this,r)),Pi(i.after,pa(a.afterLabel.call(this,r))),o.push(i)}),o}getAfterBody(t,n){return mO(n.callbacks.afterBody.apply(this,[t]))}getFooter(t,n){const{callbacks:s}=n,o=s.beforeFooter.apply(this,[t]),r=s.footer.apply(this,[t]),i=s.afterFooter.apply(this,[t]);let a=[];return a=Pi(a,pa(o)),a=Pi(a,pa(r)),a=Pi(a,pa(i)),a}_createItems(t){const n=this._active,s=this.chart.data,o=[],r=[],i=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(ist(this.chart,n[l]));return t.filter&&(a=a.filter((c,d,f)=>t.filter(c,d,f,s))),t.itemSort&&(a=a.sort((c,d)=>t.itemSort(c,d,s))),Gn(a,c=>{const d=vO(t.callbacks,c);o.push(d.labelColor.call(this,c)),r.push(d.labelPointStyle.call(this,c)),i.push(d.labelTextColor.call(this,c))}),this.labelColors=o,this.labelPointStyles=r,this.labelTextColors=i,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),o=this._active;let r,i=[];if(!o.length)this.opacity!==0&&(r={opacity:0});else{const a=Fh[s.position].call(this,o,this._eventPosition);i=this._createItems(s),this.title=this.getTitle(i,s),this.beforeBody=this.getBeforeBody(i,s),this.body=this.getBody(i,s),this.afterBody=this.getAfterBody(i,s),this.footer=this.getFooter(i,s);const l=this._size=hO(this,s),u=Object.assign({},a,l),c=pO(this.chart,s,u),d=gO(s,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,r={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=i,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,o){const r=this.getCaretPosition(t,s,o);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:o,yAlign:r}=this,{caretSize:i,cornerRadius:a}=s,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:d}=zu(a),{x:f,y:h}=t,{width:p,height:g}=n;let m,v,b,$,y,w;return r==="center"?(y=h+g/2,o==="left"?(m=f,v=m-i,$=y+i,w=y-i):(m=f+p,v=m+i,$=y-i,w=y+i),b=m):(o==="left"?v=f+Math.max(l,c)+i:o==="right"?v=f+p-Math.max(u,d)-i:v=this.caretX,r==="top"?($=h,y=$-i,m=v-i,b=v+i):($=h+g,y=$+i,m=v+i,b=v-i),w=$),{x1:m,x2:v,x3:b,y1:$,y2:y,y3:w}}drawTitle(t,n,s){const o=this.title,r=o.length;let i,a,l;if(r){const u=bd(s.rtl,this.x,this.width);for(t.x=yv(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",i=Rs(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=i.string,l=0;l<r;++l)n.fillText(o[l],u.x(t.x),t.y+i.lineHeight/2),t.y+=i.lineHeight+a,l+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,o,r){const i=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:u,boxPadding:c}=r,d=Rs(r.bodyFont),f=yv(this,"left",r),h=o.x(f),p=l<d.lineHeight?(d.lineHeight-l)/2:0,g=n.y+p;if(r.usePointStyle){const m={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=o.leftForLtr(h,u)+u/2,b=g+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,kp(t,m,v,b),t.strokeStyle=i.borderColor,t.fillStyle=i.backgroundColor,kp(t,m,v,b)}else{t.lineWidth=i.borderWidth||1,t.strokeStyle=i.borderColor,t.setLineDash(i.borderDash||[]),t.lineDashOffset=i.borderDashOffset||0;const m=o.leftForLtr(h,u-c),v=o.leftForLtr(o.xPlus(h,1),u-c-2),b=zu(i.borderRadius);Object.values(b).some($=>$!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Sp(t,{x:m,y:g,w:u,h:l,radius:b}),t.fill(),t.stroke(),t.fillStyle=i.backgroundColor,t.beginPath(),Sp(t,{x:v,y:g+1,w:u-2,h:l-2,radius:b}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(m,g,u,l),t.strokeRect(m,g,u,l),t.fillStyle=i.backgroundColor,t.fillRect(v,g+1,u-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:o}=this,{bodySpacing:r,bodyAlign:i,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:c}=s,d=Rs(s.bodyFont);let f=d.lineHeight,h=0;const p=bd(s.rtl,this.x,this.width),g=function(S){n.fillText(S,p.x(t.x+h),t.y+f/2),t.y+=f+r},m=p.textAlign(i);let v,b,$,y,w,C,x;for(n.textAlign=i,n.textBaseline="middle",n.font=d.string,t.x=yv(this,m,s),n.fillStyle=s.bodyColor,Gn(this.beforeBody,g),h=a&&m!=="right"?i==="center"?u/2+c:u+2+c:0,y=0,C=o.length;y<C;++y){for(v=o[y],b=this.labelTextColors[y],n.fillStyle=b,Gn(v.before,g),$=v.lines,a&&$.length&&(this._drawColorBox(n,t,y,p,s),f=Math.max(d.lineHeight,l)),w=0,x=$.length;w<x;++w)g($[w]),f=d.lineHeight;Gn(v.after,g)}h=0,f=d.lineHeight,Gn(this.afterBody,g),t.y-=r}drawFooter(t,n,s){const o=this.footer,r=o.length;let i,a;if(r){const l=bd(s.rtl,this.x,this.width);for(t.x=yv(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",i=Rs(s.footerFont),n.fillStyle=s.footerColor,n.font=i.string,a=0;a<r;++a)n.fillText(o[a],l.x(t.x),t.y+i.lineHeight/2),t.y+=i.lineHeight+s.footerSpacing}}drawBackground(t,n,s,o){const{xAlign:r,yAlign:i}=this,{x:a,y:l}=t,{width:u,height:c}=s,{topLeft:d,topRight:f,bottomLeft:h,bottomRight:p}=zu(o.cornerRadius);n.fillStyle=o.backgroundColor,n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.beginPath(),n.moveTo(a+d,l),i==="top"&&this.drawCaret(t,n,s,o),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),i==="center"&&r==="right"&&this.drawCaret(t,n,s,o),n.lineTo(a+u,l+c-p),n.quadraticCurveTo(a+u,l+c,a+u-p,l+c),i==="bottom"&&this.drawCaret(t,n,s,o),n.lineTo(a+h,l+c),n.quadraticCurveTo(a,l+c,a,l+c-h),i==="center"&&r==="left"&&this.drawCaret(t,n,s,o),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),o.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,o=s&&s.x,r=s&&s.y;if(o||r){const i=Fh[t.position].call(this,this._active,this._eventPosition);if(!i)return;const a=this._size=hO(this,t),l=Object.assign({},i,this._size),u=pO(n,t,l),c=gO(t,l,u,n);(o._to!==c.x||r._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,c))}}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const o={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const i=Qs(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,o,n),CH(t,n.textDirection),r.y+=i.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),xH(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,o=t.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),r=!J0(s,o),i=this._positionChanged(o,n);(r||i)&&(this._active=o,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,r=this._active||[],i=this._getActiveElements(t,r,n,s),a=this._positionChanged(i,t),l=n||!J0(i,r)||a;return l&&(this._active=i,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),l}_getActiveElements(t,n,s,o){const r=this.options;if(t.type==="mouseout")return[];if(!o)return n;const i=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&i.reverse(),i}_positionChanged(t,n){const{caretX:s,caretY:o,options:r}=this,i=Fh[r.position].call(this,t,n);return i!==!1&&(s!==i.x||o!==i.y)}}Hx.positioners=Fh;var hst={id:"tooltip",_element:Hx,positioners:Fh,afterInit(e,t,n){n&&(e.tooltip=new Hx({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip,n={tooltip:t};e.notifyPlugins("beforeTooltipDraw",n)!==!1&&(t&&t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n))},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:da,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:da,beforeBody:da,beforeLabel:da,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return On(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:da,afterBody:da,beforeFooter:da,footer:da,afterFooter:da}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},pst=Object.freeze({__proto__:null,Decimation:Fnt,Filler:Qnt,Legend:nst,SubTitle:rst,Title:ost,Tooltip:hst});const gst=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function mst(e,t,n,s){const o=e.indexOf(t);if(o===-1)return gst(e,t,n,s);const r=e.lastIndexOf(t);return o!==r?n:o}const vst=(e,t)=>e===null?null:ao(Math.round(e),0,t);class ib extends kc{constructor(t){super(t);this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:o,label:r}of n)s[o]===r&&s.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(On(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:mst(s,t,Xt(n,t),this._addedLabels),vst(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(o=this.getLabels().length-1)),this.min=s,this.max=o}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,o=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let i=t;i<=n;i++)o.push({value:i});return o}getLabelForValue(t){const n=this.getLabels();return t>=0&&t<n.length?n[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}ib.id="category";ib.defaults={ticks:{callback:ib.prototype.getLabelForValue}};function bst(e,t){const n=[],{bounds:o,step:r,min:i,max:a,precision:l,count:u,maxTicks:c,maxDigits:d,includeBounds:f}=e,h=r||1,p=c-1,{min:g,max:m}=t,v=!On(i),b=!On(a),$=!On(u),y=(m-g)/(d+1);let w=gM((m-g)/p/h)*h,C,x,S,T;if(w<1e-14&&!v&&!b)return[{value:g},{value:m}];T=Math.ceil(m/w)-Math.floor(g/w),T>p&&(w=gM(T*w/p/h)*h),On(l)||(C=Math.pow(10,l),w=Math.ceil(w*C)/C),o==="ticks"?(x=Math.floor(g/w)*w,S=Math.ceil(m/w)*w):(x=g,S=m),v&&b&&r&&aQe((a-i)/r,w/1e3)?(T=Math.round(Math.min((a-i)/w,c)),w=(a-i)/T,x=i,S=a):$?(x=v?i:x,S=b?a:S,T=u-1,w=(S-x)/T):(T=(S-x)/w,Rh(T,Math.round(T),w/1e3)?T=Math.round(T):T=Math.ceil(T));const I=Math.max(mM(w),mM(x));C=Math.pow(10,On(l)?I:l),x=Math.round(x*C)/C,S=Math.round(S*C)/C;let _=0;for(v&&(f&&x!==i?(n.push({value:i}),x<i&&_++,Rh(Math.round((x+_*w)*C)/C,i,bO(i,y,e))&&_++):x<i&&_++);_<T;++_)n.push({value:Math.round((x+_*w)*C)/C});return b&&f&&S!==a?n.length&&Rh(n[n.length-1].value,a,bO(a,y,e))?n[n.length-1].value=a:n.push({value:a}):(!b||S===a)&&n.push({value:S}),n}function bO(e,t,{horizontal:n,minRotation:s}){const o=io(s),r=(n?Math.sin(o):Math.cos(o))||.001,i=.75*t*(""+e).length;return Math.min(t/r,i)}class ab extends kc{constructor(t){super(t);this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return On(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:o,max:r}=this;const i=l=>o=n?o:l,a=l=>r=s?r:l;if(t){const l=Zi(o),u=Zi(r);l<0&&u<0?a(0):l>0&&u>0&&i(0)}if(o===r){let l=1;(r>=Number.MAX_SAFE_INTEGER||o<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(r*.05)),a(r+l),t||i(o-l)}this.min=o,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,o;return s?(o=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),n=n||11),n&&(o=Math.min(n,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const o={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,i=bst(o,r);return t.bounds==="ticks"&&rH(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const o=(s-n)/Math.max(t.length-1,1)/2;n-=o,s+=o}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return gm(t,this.chart.options.locale,this.options.ticks.format)}}class OE extends ab{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=$s(t)?t:0,this.max=$s(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=io(this.options.ticks.minRotation),o=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}OE.id="linear";OE.defaults={ticks:{callback:A1.formatters.numeric}};function yO(e){return e/Math.pow(10,Math.floor(zr(e)))===1}function yst(e,t){const n=Math.floor(zr(t.max)),s=Math.ceil(t.max/Math.pow(10,n)),o=[];let r=Dr(e.min,Math.pow(10,Math.floor(zr(t.min)))),i=Math.floor(zr(r)),a=Math.floor(r/Math.pow(10,i)),l=i<0?Math.pow(10,Math.abs(i)):1;do o.push({value:r,major:yO(r)}),++a,a===10&&(a=1,++i,l=i>=0?1:l),r=Math.round(a*Math.pow(10,i)*l)/l;while(i<n||i===n&&a<s);const u=Dr(e.max,r);return o.push({value:u,major:yO(r)}),o}class FE extends kc{constructor(t){super(t);this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const s=ab.prototype.parse.apply(this,[t,n]);if(s===0){this._zero=!0;return}return $s(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=$s(t)?Math.max(0,t):null,this.max=$s(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let s=this.min,o=this.max;const r=l=>s=t?s:l,i=l=>o=n?o:l,a=(l,u)=>Math.pow(10,Math.floor(zr(l))+u);s===o&&(s<=0?(r(1),i(10)):(r(a(s,-1)),i(a(o,1)))),s<=0&&r(a(o,-1)),o<=0&&i(a(s,1)),this._zero&&this.min!==this._suggestedMin&&s===a(this.min,0)&&r(a(s,-1)),this.min=s,this.max=o}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},s=yst(n,this);return t.bounds==="ticks"&&rH(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":gm(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=zr(t),this._valueRange=zr(this.max)-zr(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(zr(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}FE.id="logarithmic";FE.defaults={ticks:{callback:A1.formatters.logarithmic,major:{enabled:!0}}};function Ux(e){const t=e.ticks;if(t.display&&e.display){const n=Qs(t.backdropPadding);return Xt(t.font&&t.font.size,Cn.font.size)+n.height}return 0}function wst(e,t,n){return n=Wn(n)?n:[n],{w:AQe(e,t.string,n),h:n.length*t.lineHeight}}function wO(e,t,n,s,o){return e===s||e===o?{start:t-n/2,end:t+n/2}:e<s||e>o?{start:t-n,end:t}:{start:t,end:t+n}}function $st(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),s=[],o=[],r=e._pointLabels.length,i=e.options.pointLabels,a=i.centerPointLabels?Bn/r:0;for(let l=0;l<r;l++){const u=i.setContext(e.getPointLabelContext(l));o[l]=u.padding;const c=e.getPointPosition(l,e.drawingArea+o[l],a),d=Rs(u.font),f=wst(e.ctx,d,e._pointLabels[l]);s[l]=f;const h=hr(e.getIndexAngle(l)+a),p=Math.round(yE(h)),g=wO(p,c.x,f.w,0,180),m=wO(p,c.y,f.h,90,270);Cst(n,t,h,g,m)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=xst(e,s,o)}function Cst(e,t,n,s,o){const r=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n));let a=0,l=0;s.start<t.l?(a=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),o.start<t.t?(l=(t.t-o.start)/i,e.t=Math.min(e.t,t.t-l)):o.end>t.b&&(l=(o.end-t.b)/i,e.b=Math.max(e.b,t.b+l))}function xst(e,t,n){const s=[],o=e._pointLabels.length,r=e.options,i=Ux(r)/2,a=e.drawingArea,l=r.pointLabels.centerPointLabels?Bn/o:0;for(let u=0;u<o;u++){const c=e.getPointPosition(u,a+i+n[u],l),d=Math.round(yE(hr(c.angle+xs))),f=t[u],h=Ist(c.y,f.h,d),p=kst(d),g=Sst(c.x,f.w,p);s.push({x:c.x,y:h,textAlign:p,left:g,top:h,right:g+f.w,bottom:h+f.h})}return s}function kst(e){return e===0||e===180?"center":e<180?"left":"right"}function Sst(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function Ist(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function Est(e,t){const{ctx:n,options:{pointLabels:s}}=e;for(let o=t-1;o>=0;o--){const r=s.setContext(e.getPointLabelContext(o)),i=Rs(r.font),{x:a,y:l,textAlign:u,left:c,top:d,right:f,bottom:h}=e._pointLabelItems[o],{backdropColor:p}=r;if(!On(p)){const g=Qs(r.backdropPadding);n.fillStyle=p,n.fillRect(c-g.left,d-g.top,f-c+g.width,h-d+g.height)}ac(n,e._pointLabels[o],a,l+i.lineHeight/2,i,{color:r.color,textAlign:u,textBaseline:"middle"})}}function KH(e,t,n,s){const{ctx:o}=e;if(n)o.arc(e.xCenter,e.yCenter,t,0,ns);else{let r=e.getPointPosition(0,t);o.moveTo(r.x,r.y);for(let i=1;i<s;i++)r=e.getPointPosition(i,t),o.lineTo(r.x,r.y)}}function Tst(e,t,n,s){const o=e.ctx,r=t.circular,{color:i,lineWidth:a}=t;!r&&!s||!i||!a||n<0||(o.save(),o.strokeStyle=i,o.lineWidth=a,o.setLineDash(t.borderDash),o.lineDashOffset=t.borderDashOffset,o.beginPath(),KH(e,n,r,s),o.closePath(),o.stroke(),o.restore())}function _st(e,t,n){return Ul(e,{label:n,index:t,type:"pointLabel"})}class vm extends ab{constructor(t){super(t);this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Qs(Ux(this.options)/2),n=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=$s(t)&&!isNaN(t)?t:0,this.max=$s(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ux(this.options))}generateTickLabels(t){ab.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,s)=>{const o=Jn(this.options.pointLabels.callback,[n,s],this);return o||o===0?o:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?$st(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,s,o){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((s-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,s,o))}getIndexAngle(t){const n=ns/(this._pointLabels.length||1),s=this.options.startAngle||0;return hr(t*n+io(s))}getDistanceFromCenterForValue(t){if(On(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(On(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const s=n[t];return _st(this.getContext(),t,s)}}getPointPosition(t,n,s=0){const o=this.getIndexAngle(t)-xs+s;return{x:Math.cos(o)*n+this.xCenter,y:Math.sin(o)*n+this.yCenter,angle:o}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:s,right:o,bottom:r}=this._pointLabelItems[t];return{left:n,top:s,right:o,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),KH(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:s,grid:o}=n,r=this._pointLabels.length;let i,a,l;if(n.pointLabels.display&&Est(this,r),o.display&&this.ticks.forEach((u,c)=>{if(c!==0){a=this.getDistanceFromCenterForValue(u.value);const d=o.setContext(this.getContext(c-1));Tst(this,d,a,r)}}),s.display){for(t.save(),i=r-1;i>=0;i--){const u=s.setContext(this.getPointLabelContext(i)),{color:c,lineWidth:d}=u;!d||!c||(t.lineWidth=d,t.strokeStyle=c,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,a=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),l=this.getPointPosition(i,a),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const o=this.getIndexAngle(0);let r,i;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const u=s.setContext(this.getContext(l)),c=Rs(u.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){t.font=c.string,i=t.measureText(a.label).width,t.fillStyle=u.backdropColor;const d=Qs(u.backdropPadding);t.fillRect(-i/2-d.left,-r-c.size/2-d.top,i+d.width,c.size+d.height)}ac(t,a.label,0,-r,c,{color:u.color})}),t.restore()}drawTitle(){}}vm.id="radialLinear";vm.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:A1.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};vm.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};vm.descriptors={angleLines:{_fallback:"grid"}};const O1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xo=Object.keys(O1);function Nst(e,t){return e-t}function $O(e,t){if(On(t))return null;const n=e._adapter,{parser:s,round:o,isoWeekday:r}=e._parseOpts;let i=t;return typeof s=="function"&&(i=s(i)),$s(i)||(i=typeof s=="string"?n.parse(i,s):n.parse(i)),i===null?null:(o&&(i=o==="week"&&(wp(r)||r===!0)?n.startOf(i,"isoWeek",r):n.startOf(i,o)),+i)}function CO(e,t,n,s){const o=Xo.length;for(let r=Xo.indexOf(e);r<o-1;++r){const i=O1[Xo[r]],a=i.steps?i.steps:Number.MAX_SAFE_INTEGER;if(i.common&&Math.ceil((n-t)/(a*i.size))<=s)return Xo[r]}return Xo[o-1]}function Ast(e,t,n,s,o){for(let r=Xo.length-1;r>=Xo.indexOf(n);r--){const i=Xo[r];if(O1[i].common&&e._adapter.diff(o,s,i)>=t-1)return i}return Xo[n?Xo.indexOf(n):0]}function Dst(e){for(let t=Xo.indexOf(e)+1,n=Xo.length;t<n;++t)if(O1[Xo[t]].common)return Xo[t]}function xO(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:o}=SE(n,t),r=n[s]>=t?n[s]:n[o];e[r]=!0}}function Rst(e,t,n,s){const o=e._adapter,r=+o.startOf(t[0].value,s),i=t[t.length-1].value;let a,l;for(a=r;a<=i;a=+o.add(a,1,s))l=n[a],l>=0&&(t[l].major=!0);return t}function kO(e,t,n){const s=[],o={},r=t.length;let i,a;for(i=0;i<r;++i)a=t[i],o[a]=i,s.push({value:a,major:!1});return r===0||!n?s:Rst(e,s,o,n)}class bm extends kc{constructor(t){super(t);this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n){const s=t.time||(t.time={}),o=this._adapter=new stt._date(t.adapters.date);Dh(s.displayFormats,o.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:$O(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:o,max:r,minDefined:i,maxDefined:a}=this.getUserBounds();function l(u){!i&&!isNaN(u.min)&&(o=Math.min(o,u.min)),!a&&!isNaN(u.max)&&(r=Math.max(r,u.max))}(!i||!a)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),o=$s(o)&&!isNaN(o)?o:+n.startOf(Date.now(),s),r=$s(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(o,r-1),this.max=Math.max(o+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,o=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const r=this.min,i=this.max,a=WQe(o,r,i);return this._unit=n.unit||(s.autoSkip?CO(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):Ast(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Dst(this._unit),this.initOffsets(o),t.reverse&&a.reverse(),kO(this,a,this._majorUnit)}initOffsets(t){let n=0,s=0,o,r;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?n=1-o:n=(this.getDecimalForValue(t[1])-o)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const i=t.length<3?.5:.25;n=ao(n,0,i),s=ao(s,0,i),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,o=this.options,r=o.time,i=r.unit||CO(r.minUnit,n,s,this._getLabelCapacity(n)),a=Xt(r.stepSize,1),l=i==="week"?r.isoWeekday:!1,u=wp(l)||l===!0,c={};let d=n,f,h;if(u&&(d=+t.startOf(d,"isoWeek",l)),d=+t.startOf(d,u?"day":i),t.diff(s,n,i)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+i);const p=o.ticks.source==="data"&&this.getDataTimestamps();for(f=d,h=0;f<s;f=+t.add(f,a,i),h++)xO(c,f,p);return(f===s||o.bounds==="ticks"||h===1)&&xO(c,f,p),Object.keys(c).sort((g,m)=>g-m).map(g=>+g)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}_tickFormatFunction(t,n,s,o){const r=this.options,i=r.time.displayFormats,a=this._unit,l=this._majorUnit,u=a&&i[a],c=l&&i[l],d=s[n],f=l&&c&&d&&d.major,h=this._adapter.format(t,o||(f?c:u)),p=r.ticks.callback;return p?Jn(p,[h,n,s],this):h}generateTickLabels(t){let n,s,o;for(n=0,s=t.length;n<s;++n)o=t[n],o.label=this._tickFormatFunction(o.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,o=io(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(o),i=Math.sin(o),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*i,h:s*i+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,o=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,kO(this,[t],this._majorUnit),o),i=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/i.w:this.height/i.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(n=0,s=o.length;n<s;++n)t=t.concat(o[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const o=this.getLabels();for(n=0,s=o.length;n<s;++n)t.push($O(this,o[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return pH(t.sort(Nst))}}bm.id="time";bm.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function wv(e,t,n){let s=0,o=e.length-1,r,i,a,l;n?(t>=e[s].pos&&t<=e[o].pos&&({lo:s,hi:o}=$a(e,"pos",t)),{pos:r,time:a}=e[s],{pos:i,time:l}=e[o]):(t>=e[s].time&&t<=e[o].time&&({lo:s,hi:o}=$a(e,"time",t)),{time:r,pos:a}=e[s],{time:i,pos:l}=e[o]);const u=i-r;return u?a+(l-a)*(t-r)/u:a}class PE extends bm{constructor(t){super(t);this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=wv(n,this.min),this._tableRange=wv(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,o=[],r=[];let i,a,l,u,c;for(i=0,a=t.length;i<a;++i)u=t[i],u>=n&&u<=s&&o.push(u);if(o.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(i=0,a=o.length;i<a;++i)c=o[i+1],l=o[i-1],u=o[i],Math.round((c+l)/2)!==u&&r.push({time:u,pos:i/(a-1)});return r}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(wv(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return wv(this._table,s*this._tableRange+this._minPos,!0)}}PE.id="timeseries";PE.defaults=bm.defaults;var Mst=Object.freeze({__proto__:null,CategoryScale:ib,LinearScale:OE,LogarithmicScale:FE,RadialLinearScale:vm,TimeScale:bm,TimeSeriesScale:PE});const Uct=[ntt,Dnt,pst,Mst];var Ost=typeof global=="object"&&global&&global.Object===Object&&global,qH=Ost,Fst=typeof self=="object"&&self&&self.Object===Object&&self,Pst=qH||Fst||Function("return this")(),ia=Pst,Lst=ia.Symbol,Sl=Lst,YH=Object.prototype,Bst=YH.hasOwnProperty,zst=YH.toString,Zf=Sl?Sl.toStringTag:void 0;function Vst(e){var t=Bst.call(e,Zf),n=e[Zf];try{e[Zf]=void 0;var s=!0}catch{}var o=zst.call(e);return s&&(t?e[Zf]=n:delete e[Zf]),o}var Wst=Object.prototype,Hst=Wst.toString;function Ust(e){return Hst.call(e)}var jst="[object Null]",Gst="[object Undefined]",SO=Sl?Sl.toStringTag:void 0;function ym(e){return e==null?e===void 0?Gst:jst:SO&&SO in Object(e)?Vst(e):Ust(e)}function lc(e){return e!=null&&typeof e=="object"}var Kst=Array.isArray,Xd=Kst;function wm(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var qst="[object AsyncFunction]",Yst="[object Function]",Xst="[object GeneratorFunction]",Zst="[object Proxy]";function XH(e){if(!wm(e))return!1;var t=ym(e);return t==Yst||t==Xst||t==qst||t==Zst}var Jst=ia["__core-js_shared__"],N$=Jst,IO=function(){var e=/[^.]+$/.exec(N$&&N$.keys&&N$.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Qst(e){return!!IO&&IO in e}var eot=Function.prototype,tot=eot.toString;function Sc(e){if(e!=null){try{return tot.call(e)}catch{}try{return e+""}catch{}}return""}var not=/[\\^$.*+?()[\]{}|]/g,sot=/^\[object .+?Constructor\]$/,oot=Function.prototype,rot=Object.prototype,iot=oot.toString,aot=rot.hasOwnProperty,lot=RegExp("^"+iot.call(aot).replace(not,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function uot(e){if(!wm(e)||Qst(e))return!1;var t=XH(e)?lot:sot;return t.test(Sc(e))}function cot(e,t){return e==null?void 0:e[t]}function Ic(e,t){var n=cot(e,t);return uot(n)?n:void 0}var dot=Ic(ia,"WeakMap"),jx=dot,EO=Object.create,fot=function(){function e(){}return function(t){if(!wm(t))return{};if(EO)return EO(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),hot=fot;function pot(e,t){var n=-1,s=e.length;for(t||(t=Array(s));++n<s;)t[n]=e[n];return t}var got=function(){try{var e=Ic(Object,"defineProperty");return e({},"",{}),e}catch{}}(),TO=got;function mot(e,t){for(var n=-1,s=e==null?0:e.length;++n<s&&t(e[n],n,e)!==!1;);return e}var vot=9007199254740991,bot=/^(?:0|[1-9]\d*)$/;function yot(e,t){var n=typeof e;return t=t==null?vot:t,!!t&&(n=="number"||n!="symbol"&&bot.test(e))&&e>-1&&e%1==0&&e<t}function ZH(e,t,n){t=="__proto__"&&TO?TO(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function LE(e,t){return e===t||e!==e&&t!==t}var wot=Object.prototype,$ot=wot.hasOwnProperty;function JH(e,t,n){var s=e[t];(!($ot.call(e,t)&&LE(s,n))||n===void 0&&!(t in e))&&ZH(e,t,n)}function F1(e,t,n,s){var o=!n;n||(n={});for(var r=-1,i=t.length;++r<i;){var a=t[r],l=s?s(n[a],e[a],a,n,e):void 0;l===void 0&&(l=e[a]),o?ZH(n,a,l):JH(n,a,l)}return n}var Cot=9007199254740991;function QH(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Cot}function BE(e){return e!=null&&QH(e.length)&&!XH(e)}var xot=Object.prototype;function P1(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||xot;return e===n}function kot(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var Sot="[object Arguments]";function _O(e){return lc(e)&&ym(e)==Sot}var eU=Object.prototype,Iot=eU.hasOwnProperty,Eot=eU.propertyIsEnumerable,Tot=_O(function(){return arguments}())?_O:function(e){return lc(e)&&Iot.call(e,"callee")&&!Eot.call(e,"callee")},tU=Tot;function _ot(){return!1}var nU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,NO=nU&&typeof module=="object"&&module&&!module.nodeType&&module,Not=NO&&NO.exports===nU,AO=Not?ia.Buffer:void 0,Aot=AO?AO.isBuffer:void 0,Dot=Aot||_ot,Ep=Dot,Rot="[object Arguments]",Mot="[object Array]",Oot="[object Boolean]",Fot="[object Date]",Pot="[object Error]",Lot="[object Function]",Bot="[object Map]",zot="[object Number]",Vot="[object Object]",Wot="[object RegExp]",Hot="[object Set]",Uot="[object String]",jot="[object WeakMap]",Got="[object ArrayBuffer]",Kot="[object DataView]",qot="[object Float32Array]",Yot="[object Float64Array]",Xot="[object Int8Array]",Zot="[object Int16Array]",Jot="[object Int32Array]",Qot="[object Uint8Array]",ert="[object Uint8ClampedArray]",trt="[object Uint16Array]",nrt="[object Uint32Array]",hs={};hs[qot]=hs[Yot]=hs[Xot]=hs[Zot]=hs[Jot]=hs[Qot]=hs[ert]=hs[trt]=hs[nrt]=!0;hs[Rot]=hs[Mot]=hs[Got]=hs[Oot]=hs[Kot]=hs[Fot]=hs[Pot]=hs[Lot]=hs[Bot]=hs[zot]=hs[Vot]=hs[Wot]=hs[Hot]=hs[Uot]=hs[jot]=!1;function srt(e){return lc(e)&&QH(e.length)&&!!hs[ym(e)]}function zE(e){return function(t){return e(t)}}var sU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ph=sU&&typeof module=="object"&&module&&!module.nodeType&&module,ort=Ph&&Ph.exports===sU,A$=ort&&qH.process,rrt=function(){try{var e=Ph&&Ph.require&&Ph.require("util").types;return e||A$&&A$.binding&&A$.binding("util")}catch{}}(),Zd=rrt,DO=Zd&&Zd.isTypedArray,irt=DO?zE(DO):srt,VE=irt,art=Object.prototype,lrt=art.hasOwnProperty;function oU(e,t){var n=Xd(e),s=!n&&tU(e),o=!n&&!s&&Ep(e),r=!n&&!s&&!o&&VE(e),i=n||s||o||r,a=i?kot(e.length,String):[],l=a.length;for(var u in e)(t||lrt.call(e,u))&&!(i&&(u=="length"||o&&(u=="offset"||u=="parent")||r&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||yot(u,l)))&&a.push(u);return a}function rU(e,t){return function(n){return e(t(n))}}var urt=rU(Object.keys,Object),crt=urt,drt=Object.prototype,frt=drt.hasOwnProperty;function iU(e){if(!P1(e))return crt(e);var t=[];for(var n in Object(e))frt.call(e,n)&&n!="constructor"&&t.push(n);return t}function WE(e){return BE(e)?oU(e):iU(e)}function hrt(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var prt=Object.prototype,grt=prt.hasOwnProperty;function mrt(e){if(!wm(e))return hrt(e);var t=P1(e),n=[];for(var s in e)s=="constructor"&&(t||!grt.call(e,s))||n.push(s);return n}function HE(e){return BE(e)?oU(e,!0):mrt(e)}var vrt=Ic(Object,"create"),Tp=vrt;function brt(){this.__data__=Tp?Tp(null):{},this.size=0}function yrt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var wrt="__lodash_hash_undefined__",$rt=Object.prototype,Crt=$rt.hasOwnProperty;function xrt(e){var t=this.__data__;if(Tp){var n=t[e];return n===wrt?void 0:n}return Crt.call(t,e)?t[e]:void 0}var krt=Object.prototype,Srt=krt.hasOwnProperty;function Irt(e){var t=this.__data__;return Tp?t[e]!==void 0:Srt.call(t,e)}var Ert="__lodash_hash_undefined__";function Trt(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Tp&&t===void 0?Ert:t,this}function uc(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}uc.prototype.clear=brt;uc.prototype.delete=yrt;uc.prototype.get=xrt;uc.prototype.has=Irt;uc.prototype.set=Trt;function _rt(){this.__data__=[],this.size=0}function L1(e,t){for(var n=e.length;n--;)if(LE(e[n][0],t))return n;return-1}var Nrt=Array.prototype,Art=Nrt.splice;function Drt(e){var t=this.__data__,n=L1(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():Art.call(t,n,1),--this.size,!0}function Rrt(e){var t=this.__data__,n=L1(t,e);return n<0?void 0:t[n][1]}function Mrt(e){return L1(this.__data__,e)>-1}function Ort(e,t){var n=this.__data__,s=L1(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}function Va(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Va.prototype.clear=_rt;Va.prototype.delete=Drt;Va.prototype.get=Rrt;Va.prototype.has=Mrt;Va.prototype.set=Ort;var Frt=Ic(ia,"Map"),_p=Frt;function Prt(){this.size=0,this.__data__={hash:new uc,map:new(_p||Va),string:new uc}}function Lrt(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function B1(e,t){var n=e.__data__;return Lrt(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Brt(e){var t=B1(this,e).delete(e);return this.size-=t?1:0,t}function zrt(e){return B1(this,e).get(e)}function Vrt(e){return B1(this,e).has(e)}function Wrt(e,t){var n=B1(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}function Ec(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Ec.prototype.clear=Prt;Ec.prototype.delete=Brt;Ec.prototype.get=zrt;Ec.prototype.has=Vrt;Ec.prototype.set=Wrt;function aU(e,t){for(var n=-1,s=t.length,o=e.length;++n<s;)e[o+n]=t[n];return e}var Hrt=rU(Object.getPrototypeOf,Object),lU=Hrt;function Urt(){this.__data__=new Va,this.size=0}function jrt(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Grt(e){return this.__data__.get(e)}function Krt(e){return this.__data__.has(e)}var qrt=200;function Yrt(e,t){var n=this.__data__;if(n instanceof Va){var s=n.__data__;if(!_p||s.length<qrt-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ec(s)}return n.set(e,t),this.size=n.size,this}function Ia(e){var t=this.__data__=new Va(e);this.size=t.size}Ia.prototype.clear=Urt;Ia.prototype.delete=jrt;Ia.prototype.get=Grt;Ia.prototype.has=Krt;Ia.prototype.set=Yrt;function Xrt(e,t){return e&&F1(t,WE(t),e)}function Zrt(e,t){return e&&F1(t,HE(t),e)}var uU=typeof exports=="object"&&exports&&!exports.nodeType&&exports,RO=uU&&typeof module=="object"&&module&&!module.nodeType&&module,Jrt=RO&&RO.exports===uU,MO=Jrt?ia.Buffer:void 0,OO=MO?MO.allocUnsafe:void 0;function Qrt(e,t){if(t)return e.slice();var n=e.length,s=OO?OO(n):new e.constructor(n);return e.copy(s),s}function eit(e,t){for(var n=-1,s=e==null?0:e.length,o=0,r=[];++n<s;){var i=e[n];t(i,n,e)&&(r[o++]=i)}return r}function cU(){return[]}var tit=Object.prototype,nit=tit.propertyIsEnumerable,FO=Object.getOwnPropertySymbols,sit=FO?function(e){return e==null?[]:(e=Object(e),eit(FO(e),function(t){return nit.call(e,t)}))}:cU,UE=sit;function oit(e,t){return F1(e,UE(e),t)}var rit=Object.getOwnPropertySymbols,iit=rit?function(e){for(var t=[];e;)aU(t,UE(e)),e=lU(e);return t}:cU,dU=iit;function ait(e,t){return F1(e,dU(e),t)}function fU(e,t,n){var s=t(e);return Xd(e)?s:aU(s,n(e))}function Gx(e){return fU(e,WE,UE)}function lit(e){return fU(e,HE,dU)}var uit=Ic(ia,"DataView"),Kx=uit,cit=Ic(ia,"Promise"),qx=cit,dit=Ic(ia,"Set"),Yx=dit,PO="[object Map]",fit="[object Object]",LO="[object Promise]",BO="[object Set]",zO="[object WeakMap]",VO="[object DataView]",hit=Sc(Kx),pit=Sc(_p),git=Sc(qx),mit=Sc(Yx),vit=Sc(jx),pu=ym;(Kx&&pu(new Kx(new ArrayBuffer(1)))!=VO||_p&&pu(new _p)!=PO||qx&&pu(qx.resolve())!=LO||Yx&&pu(new Yx)!=BO||jx&&pu(new jx)!=zO)&&(pu=function(e){var t=ym(e),n=t==fit?e.constructor:void 0,s=n?Sc(n):"";if(s)switch(s){case hit:return VO;case pit:return PO;case git:return LO;case mit:return BO;case vit:return zO}return t});var Jd=pu,bit=Object.prototype,yit=bit.hasOwnProperty;function wit(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&yit.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var $it=ia.Uint8Array,lb=$it;function jE(e){var t=new e.constructor(e.byteLength);return new lb(t).set(new lb(e)),t}function Cit(e,t){var n=t?jE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var xit=/\w*$/;function kit(e){var t=new e.constructor(e.source,xit.exec(e));return t.lastIndex=e.lastIndex,t}var WO=Sl?Sl.prototype:void 0,HO=WO?WO.valueOf:void 0;function Sit(e){return HO?Object(HO.call(e)):{}}function Iit(e,t){var n=t?jE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Eit="[object Boolean]",Tit="[object Date]",_it="[object Map]",Nit="[object Number]",Ait="[object RegExp]",Dit="[object Set]",Rit="[object String]",Mit="[object Symbol]",Oit="[object ArrayBuffer]",Fit="[object DataView]",Pit="[object Float32Array]",Lit="[object Float64Array]",Bit="[object Int8Array]",zit="[object Int16Array]",Vit="[object Int32Array]",Wit="[object Uint8Array]",Hit="[object Uint8ClampedArray]",Uit="[object Uint16Array]",jit="[object Uint32Array]";function Git(e,t,n){var s=e.constructor;switch(t){case Oit:return jE(e);case Eit:case Tit:return new s(+e);case Fit:return Cit(e,n);case Pit:case Lit:case Bit:case zit:case Vit:case Wit:case Hit:case Uit:case jit:return Iit(e,n);case _it:return new s;case Nit:case Rit:return new s(e);case Ait:return kit(e);case Dit:return new s;case Mit:return Sit(e)}}function Kit(e){return typeof e.constructor=="function"&&!P1(e)?hot(lU(e)):{}}var qit="[object Map]";function Yit(e){return lc(e)&&Jd(e)==qit}var UO=Zd&&Zd.isMap,Xit=UO?zE(UO):Yit,Zit=Xit,Jit="[object Set]";function Qit(e){return lc(e)&&Jd(e)==Jit}var jO=Zd&&Zd.isSet,eat=jO?zE(jO):Qit,tat=eat,nat=1,sat=2,oat=4,hU="[object Arguments]",rat="[object Array]",iat="[object Boolean]",aat="[object Date]",lat="[object Error]",pU="[object Function]",uat="[object GeneratorFunction]",cat="[object Map]",dat="[object Number]",gU="[object Object]",fat="[object RegExp]",hat="[object Set]",pat="[object String]",gat="[object Symbol]",mat="[object WeakMap]",vat="[object ArrayBuffer]",bat="[object DataView]",yat="[object Float32Array]",wat="[object Float64Array]",$at="[object Int8Array]",Cat="[object Int16Array]",xat="[object Int32Array]",kat="[object Uint8Array]",Sat="[object Uint8ClampedArray]",Iat="[object Uint16Array]",Eat="[object Uint32Array]",rs={};rs[hU]=rs[rat]=rs[vat]=rs[bat]=rs[iat]=rs[aat]=rs[yat]=rs[wat]=rs[$at]=rs[Cat]=rs[xat]=rs[cat]=rs[dat]=rs[gU]=rs[fat]=rs[hat]=rs[pat]=rs[gat]=rs[kat]=rs[Sat]=rs[Iat]=rs[Eat]=!0;rs[lat]=rs[pU]=rs[mat]=!1;function l0(e,t,n,s,o,r){var i,a=t&nat,l=t&sat,u=t&oat;if(n&&(i=o?n(e,s,o,r):n(e)),i!==void 0)return i;if(!wm(e))return e;var c=Xd(e);if(c){if(i=wit(e),!a)return pot(e,i)}else{var d=Jd(e),f=d==pU||d==uat;if(Ep(e))return Qrt(e,a);if(d==gU||d==hU||f&&!o){if(i=l||f?{}:Kit(e),!a)return l?ait(e,Zrt(i,e)):oit(e,Xrt(i,e))}else{if(!rs[d])return o?e:{};i=Git(e,d,a)}}r||(r=new Ia);var h=r.get(e);if(h)return h;r.set(e,i),tat(e)?e.forEach(function(m){i.add(l0(m,t,n,m,e,r))}):Zit(e)&&e.forEach(function(m,v){i.set(v,l0(m,t,n,v,e,r))});var p=u?l?lit:Gx:l?HE:WE,g=c?void 0:p(e);return mot(g||e,function(m,v){g&&(v=m,m=e[v]),JH(i,v,l0(m,t,n,v,e,r))}),i}var Tat=1,_at=4;function Jf(e){return l0(e,Tat|_at)}var Nat="__lodash_hash_undefined__";function Aat(e){return this.__data__.set(e,Nat),this}function Dat(e){return this.__data__.has(e)}function ub(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Ec;++t<n;)this.add(e[t])}ub.prototype.add=ub.prototype.push=Aat;ub.prototype.has=Dat;function Rat(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}function Mat(e,t){return e.has(t)}var Oat=1,Fat=2;function mU(e,t,n,s,o,r){var i=n&Oat,a=e.length,l=t.length;if(a!=l&&!(i&&l>a))return!1;var u=r.get(e),c=r.get(t);if(u&&c)return u==t&&c==e;var d=-1,f=!0,h=n&Fat?new ub:void 0;for(r.set(e,t),r.set(t,e);++d<a;){var p=e[d],g=t[d];if(s)var m=i?s(g,p,d,t,e,r):s(p,g,d,e,t,r);if(m!==void 0){if(m)continue;f=!1;break}if(h){if(!Rat(t,function(v,b){if(!Mat(h,b)&&(p===v||o(p,v,n,s,r)))return h.push(b)})){f=!1;break}}else if(!(p===g||o(p,g,n,s,r))){f=!1;break}}return r.delete(e),r.delete(t),f}function Pat(e){var t=-1,n=Array(e.size);return e.forEach(function(s,o){n[++t]=[o,s]}),n}function Lat(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var Bat=1,zat=2,Vat="[object Boolean]",Wat="[object Date]",Hat="[object Error]",Uat="[object Map]",jat="[object Number]",Gat="[object RegExp]",Kat="[object Set]",qat="[object String]",Yat="[object Symbol]",Xat="[object ArrayBuffer]",Zat="[object DataView]",GO=Sl?Sl.prototype:void 0,D$=GO?GO.valueOf:void 0;function Jat(e,t,n,s,o,r,i){switch(n){case Zat:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Xat:return!(e.byteLength!=t.byteLength||!r(new lb(e),new lb(t)));case Vat:case Wat:case jat:return LE(+e,+t);case Hat:return e.name==t.name&&e.message==t.message;case Gat:case qat:return e==t+"";case Uat:var a=Pat;case Kat:var l=s&Bat;if(a||(a=Lat),e.size!=t.size&&!l)return!1;var u=i.get(e);if(u)return u==t;s|=zat,i.set(e,t);var c=mU(a(e),a(t),s,o,r,i);return i.delete(e),c;case Yat:if(D$)return D$.call(e)==D$.call(t)}return!1}var Qat=1,elt=Object.prototype,tlt=elt.hasOwnProperty;function nlt(e,t,n,s,o,r){var i=n&Qat,a=Gx(e),l=a.length,u=Gx(t),c=u.length;if(l!=c&&!i)return!1;for(var d=l;d--;){var f=a[d];if(!(i?f in t:tlt.call(t,f)))return!1}var h=r.get(e),p=r.get(t);if(h&&p)return h==t&&p==e;var g=!0;r.set(e,t),r.set(t,e);for(var m=i;++d<l;){f=a[d];var v=e[f],b=t[f];if(s)var $=i?s(b,v,f,t,e,r):s(v,b,f,e,t,r);if(!($===void 0?v===b||o(v,b,n,s,r):$)){g=!1;break}m||(m=f=="constructor")}if(g&&!m){var y=e.constructor,w=t.constructor;y!=w&&"constructor"in e&&"constructor"in t&&!(typeof y=="function"&&y instanceof y&&typeof w=="function"&&w instanceof w)&&(g=!1)}return r.delete(e),r.delete(t),g}var slt=1,KO="[object Arguments]",qO="[object Array]",$v="[object Object]",olt=Object.prototype,YO=olt.hasOwnProperty;function rlt(e,t,n,s,o,r){var i=Xd(e),a=Xd(t),l=i?qO:Jd(e),u=a?qO:Jd(t);l=l==KO?$v:l,u=u==KO?$v:u;var c=l==$v,d=u==$v,f=l==u;if(f&&Ep(e)){if(!Ep(t))return!1;i=!0,c=!1}if(f&&!c)return r||(r=new Ia),i||VE(e)?mU(e,t,n,s,o,r):Jat(e,t,l,n,s,o,r);if(!(n&slt)){var h=c&&YO.call(e,"__wrapped__"),p=d&&YO.call(t,"__wrapped__");if(h||p){var g=h?e.value():e,m=p?t.value():t;return r||(r=new Ia),o(g,m,n,s,r)}}return f?(r||(r=new Ia),nlt(e,t,n,s,o,r)):!1}function vU(e,t,n,s,o){return e===t?!0:e==null||t==null||!lc(e)&&!lc(t)?e!==e&&t!==t:rlt(e,t,n,s,vU,o)}var ilt="[object Map]",alt="[object Set]",llt=Object.prototype,ult=llt.hasOwnProperty;function clt(e){if(e==null)return!0;if(BE(e)&&(Xd(e)||typeof e=="string"||typeof e.splice=="function"||Ep(e)||VE(e)||tU(e)))return!e.length;var t=Jd(e);if(t==ilt||t==alt)return!e.size;if(P1(e))return!iU(e).length;for(var n in e)if(ult.call(e,n))return!1;return!0}function XO(e,t){return vU(e,t)}var dlt=Object.defineProperty,flt=Object.defineProperties,hlt=Object.getOwnPropertyDescriptors,ZO=Object.getOwnPropertySymbols,plt=Object.prototype.hasOwnProperty,glt=Object.prototype.propertyIsEnumerable,JO=(e,t,n)=>t in e?dlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mlt=(e,t)=>{for(var n in t||(t={}))plt.call(t,n)&&JO(e,n,t[n]);if(ZO)for(var n of ZO(t))glt.call(t,n)&&JO(e,n,t[n]);return e},vlt=(e,t)=>flt(e,hlt(t));function blt(e){return(e.match(/[a-zA-Z0-9]+/g)||[]).map(t=>`${t.charAt(0).toUpperCase()}${t.slice(1)}`).join("")}var Gl=(e,t)=>{const n={chartData:{type:Object,required:!0},options:{type:Object,required:!1},chartId:{default:e,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default:()=>[]},onLabelsUpdate:{type:Function},onChartUpdate:{type:Function},onChartDestroy:{type:Function},onChartRender:{type:Function}},s=blt(e);return $e({name:s,props:n,emits:{"labels:update":()=>!0,"chart:update":o=>!0,"chart:destroy":()=>!0,"chart:render":o=>!0},setup(o,{emit:r,expose:i}){const a=V(null),l=`${o.chartId}`;let u=bo(null);Le(()=>o.chartData,c,{deep:!0}),Le(()=>o.options,m=>{u.value&&m&&(u.value.options=Jf(m),p())},{deep:!0});function c(m){if(u.value){let v=u.value;XO(m.labels,u.value.data.labels)||(v.data.labels=m.labels,f()),XO(m.datasets,u.value.data.datasets)||m.datasets.forEach((b,$)=>{var y,w;if(clt(b))v.data.datasets=[];else{const C=Jf(v.data),x=Object.keys((w=(y=C.datasets)==null?void 0:y[$])!=null?w:{}),S=Object.keys(b);x.filter(I=>I!=="_meta"&&S.indexOf(I)===-1).forEach(I=>{v.data.datasets[$]&&delete v.data.datasets[$][I]});for(const I in b){const _=Jf(b[I]);v.data.datasets[$]||(v.data.datasets[$]={}),b.hasOwnProperty(I)&&_!=null&&v&&(v.data.datasets[$][I]=_)}}}),p()}else u.value&&g(),d()}function d(){a.value?(u.value=new _u(a.value,{data:Jf(o.chartData),type:t,options:Jf(o.options),plugins:o.plugins}),h()):console.error(`Error on component ${s}, canvas cannot be rendered. Check if the render appends server-side`)}function f(){r("labels:update"),o.onLabelsUpdate&&o.onLabelsUpdate()}function h(){u.value&&(r("chart:render",u.value),o.onChartRender&&o.onChartRender(u.value))}function p(){u.value&&(u.value.update(),r("chart:update",u.value),o.onChartUpdate&&o.onChartUpdate(u.value))}function g(){u.value&&u.value.destroy(),r("chart:destroy"),o.onChartDestroy&&o.onChartDestroy()}return Ft(d),us(()=>{u.value&&u.value.destroy()}),i({canvasRef:a,renderChart:d,chartInstance:u,canvasId:l,update:p}),()=>Ke("div",{style:vlt(mlt({maxWidth:"100%"},o.styles),{position:"relative"}),class:o.cssClasses},[Ke("canvas",{style:{maxWidth:"100%",maxHeight:"100%"},id:l,width:o.width,height:o.height,ref:a})])}})};Gl("bar-chart","bar");var jct=Gl("doughnut-chart","doughnut");Gl("line-chart","line");Gl("pie-chart","pie");Gl("polar-chart","polarArea");Gl("radar-chart","radar");Gl("bubble-chart","bubble");var Gct=Gl("scatter-chart","scatter");/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const bU=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Nf=e=>bU?Symbol(e):"_vr_"+e,ylt=Nf("rvlm"),QO=Nf("rvd"),GE=Nf("r"),yU=Nf("rl"),Xx=Nf("rvl"),od=typeof window!="undefined";function wlt(e){return e.__esModule||bU&&e[Symbol.toStringTag]==="Module"}const Zn=Object.assign;function R$(e,t){const n={};for(const s in t){const o=t[s];n[s]=Array.isArray(o)?o.map(e):e(o)}return n}const Lh=()=>{},$lt=/\/$/,Clt=e=>e.replace($lt,"");function M$(e,t,n="/"){let s,o={},r="",i="";const a=t.indexOf("?"),l=t.indexOf("#",a>-1?a:0);return a>-1&&(s=t.slice(0,a),r=t.slice(a+1,l>-1?l:t.length),o=e(r)),l>-1&&(s=s||t.slice(0,l),i=t.slice(l,t.length)),s=Ilt(s!=null?s:t,n),{fullPath:s+(r&&"?")+r+i,path:s,query:o,hash:i}}function xlt(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function e3(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function klt(e,t,n){const s=t.matched.length-1,o=n.matched.length-1;return s>-1&&s===o&&Qd(t.matched[s],n.matched[o])&&wU(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Qd(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function wU(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Slt(e[n],t[n]))return!1;return!0}function Slt(e,t){return Array.isArray(e)?t3(e,t):Array.isArray(t)?t3(t,e):e===t}function t3(e,t){return Array.isArray(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function Ilt(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/");let o=n.length-1,r,i;for(r=0;r<s.length;r++)if(i=s[r],!(o===1||i==="."))if(i==="..")o--;else break;return n.slice(0,o).join("/")+"/"+s.slice(r-(r===s.length?1:0)).join("/")}var Np;(function(e){e.pop="pop",e.push="push"})(Np||(Np={}));var Bh;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Bh||(Bh={}));function Elt(e){if(!e)if(od){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Clt(e)}const Tlt=/^[^#]+#/;function _lt(e,t){return e.replace(Tlt,"#")+t}function Nlt(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const z1=()=>({left:window.pageXOffset,top:window.pageYOffset});function Alt(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=Nlt(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function n3(e,t){return(history.state?history.state.position-t:-1)+e}const Zx=new Map;function Dlt(e,t){Zx.set(e,t)}function Rlt(e){const t=Zx.get(e);return Zx.delete(e),t}let Mlt=()=>location.protocol+"//"+location.host;function $U(e,t){const{pathname:n,search:s,hash:o}=t,r=e.indexOf("#");if(r>-1){let a=o.includes(e.slice(r))?e.slice(r).length:1,l=o.slice(a);return l[0]!=="/"&&(l="/"+l),e3(l,"")}return e3(n,e)+s+o}function Olt(e,t,n,s){let o=[],r=[],i=null;const a=({state:f})=>{const h=$U(e,location),p=n.value,g=t.value;let m=0;if(f){if(n.value=h,t.value=f,i&&i===p){i=null;return}m=g?f.position-g.position:0}else s(h);o.forEach(v=>{v(n.value,p,{delta:m,type:Np.pop,direction:m?m>0?Bh.forward:Bh.back:Bh.unknown})})};function l(){i=n.value}function u(f){o.push(f);const h=()=>{const p=o.indexOf(f);p>-1&&o.splice(p,1)};return r.push(h),h}function c(){const{history:f}=window;!f.state||f.replaceState(Zn({},f.state,{scroll:z1()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:d}}function s3(e,t,n,s=!1,o=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:o?z1():null}}function Flt(e){const{history:t,location:n}=window,s={value:$U(e,n)},o={value:t.state};o.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,c){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:Mlt()+e+l;try{t[c?"replaceState":"pushState"](u,"",f),o.value=u}catch(h){console.error(h),n[c?"replace":"assign"](f)}}function i(l,u){const c=Zn({},t.state,s3(o.value.back,l,o.value.forward,!0),u,{position:o.value.position});r(l,c,!0),s.value=l}function a(l,u){const c=Zn({},o.value,t.state,{forward:l,scroll:z1()});r(c.current,c,!0);const d=Zn({},s3(s.value,l,null),{position:c.position+1},u);r(l,d,!1),s.value=l}return{location:s,state:o,push:a,replace:i}}function Kct(e){e=Elt(e);const t=Flt(e),n=Olt(e,t.state,t.location,t.replace);function s(r,i=!0){i||n.pauseListeners(),history.go(r)}const o=Zn({location:"",base:e,go:s,createHref:_lt.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function Plt(e){return typeof e=="string"||e&&typeof e=="object"}function CU(e){return typeof e=="string"||typeof e=="symbol"}const Ya={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},xU=Nf("nf");var o3;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(o3||(o3={}));function ef(e,t){return Zn(new Error,{type:e,[xU]:!0},t)}function iu(e,t){return e instanceof Error&&xU in e&&(t==null||!!(e.type&t))}const r3="[^/]+?",Llt={sensitive:!1,strict:!1,start:!0,end:!0},Blt=/[.+*?^${}()[\]/\\]/g;function zlt(e,t){const n=Zn({},Llt,t),s=[];let o=n.start?"^":"";const r=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(o+="/");for(let d=0;d<u.length;d++){const f=u[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(o+="/"),o+=f.value.replace(Blt,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:g,optional:m,regexp:v}=f;r.push({name:p,repeatable:g,optional:m});const b=v||r3;if(b!==r3){h+=10;try{new RegExp(`(${b})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${p}" (${b}): `+y.message)}}let $=g?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||($=m&&u.length<2?`(?:/${$})`:"/"+$),m&&($+="?"),o+=$,h+=20,m&&(h+=-8),g&&(h+=-20),b===".*"&&(h+=-50)}c.push(h)}s.push(c)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const i=new RegExp(o,n.sensitive?"":"i");function a(u){const c=u.match(i),d={};if(!c)return null;for(let f=1;f<c.length;f++){const h=c[f]||"",p=r[f-1];d[p.name]=h&&p.repeatable?h.split("/"):h}return d}function l(u){let c="",d=!1;for(const f of e){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of f)if(h.type===0)c+=h.value;else if(h.type===1){const{value:p,repeatable:g,optional:m}=h,v=p in u?u[p]:"";if(Array.isArray(v)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const b=Array.isArray(v)?v.join("/"):v;if(!b)if(m)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);c+=b}}return c}return{re:i,score:s,keys:r,parse:a,stringify:l}}function Vlt(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Wlt(e,t){let n=0;const s=e.score,o=t.score;for(;n<s.length&&n<o.length;){const r=Vlt(s[n],o[n]);if(r)return r;n++}return o.length-s.length}const Hlt={type:0,value:""},Ult=/[a-zA-Z0-9_]/;function jlt(e){if(!e)return[[]];if(e==="/")return[[Hlt]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=0,s=n;const o=[];let r;function i(){r&&o.push(r),r=[]}let a=0,l,u="",c="";function d(){!u||(n===0?r.push({type:0,value:u}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),i()):l===":"?(d(),n=1):f();break;case 4:f(),n=s;break;case 1:l==="("?n=2:Ult.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),i(),o}function Glt(e,t,n){const s=zlt(jlt(e.path),n),o=Zn(s,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Klt(e,t){const n=[],s=new Map;t=a3({strict:!1,end:!0,sensitive:!1},t);function o(c){return s.get(c)}function r(c,d,f){const h=!f,p=Ylt(c);p.aliasOf=f&&f.record;const g=a3(t,c),m=[p];if("alias"in c){const $=typeof c.alias=="string"?[c.alias]:c.alias;for(const y of $)m.push(Zn({},p,{components:f?f.record.components:p.components,path:y,aliasOf:f?f.record:p}))}let v,b;for(const $ of m){const{path:y}=$;if(d&&y[0]!=="/"){const w=d.record.path,C=w[w.length-1]==="/"?"":"/";$.path=d.record.path+(y&&C+y)}if(v=Glt($,d,g),f?f.alias.push(v):(b=b||v,b!==v&&b.alias.push(v),h&&c.name&&!i3(v)&&i(c.name)),"children"in p){const w=p.children;for(let C=0;C<w.length;C++)r(w[C],v,f&&f.children[C])}f=f||v,l(v)}return b?()=>{i(b)}:Lh}function i(c){if(CU(c)){const d=s.get(c);d&&(s.delete(c),n.splice(n.indexOf(d),1),d.children.forEach(i),d.alias.forEach(i))}else{const d=n.indexOf(c);d>-1&&(n.splice(d,1),c.record.name&&s.delete(c.record.name),c.children.forEach(i),c.alias.forEach(i))}}function a(){return n}function l(c){let d=0;for(;d<n.length&&Wlt(c,n[d])>=0;)d++;n.splice(d,0,c),c.record.name&&!i3(c)&&s.set(c.record.name,c)}function u(c,d){let f,h={},p,g;if("name"in c&&c.name){if(f=s.get(c.name),!f)throw ef(1,{location:c});g=f.record.name,h=Zn(qlt(d.params,f.keys.filter(b=>!b.optional).map(b=>b.name)),c.params),p=f.stringify(h)}else if("path"in c)p=c.path,f=n.find(b=>b.re.test(p)),f&&(h=f.parse(p),g=f.record.name);else{if(f=d.name?s.get(d.name):n.find(b=>b.re.test(d.path)),!f)throw ef(1,{location:c,currentLocation:d});g=f.record.name,h=Zn({},d.params,c.params),p=f.stringify(h)}const m=[];let v=f;for(;v;)m.unshift(v.record),v=v.parent;return{name:g,path:p,params:h,matched:m,meta:Zlt(m)}}return e.forEach(c=>r(c)),{addRoute:r,resolve:u,removeRoute:i,getRoutes:a,getRecordMatcher:o}}function qlt(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Ylt(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Xlt(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function Xlt(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="boolean"?n:n[s];return t}function i3(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Zlt(e){return e.reduce((t,n)=>Zn(t,n.meta),{})}function a3(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const kU=/#/g,Jlt=/&/g,Qlt=/\//g,eut=/=/g,tut=/\?/g,SU=/\+/g,nut=/%5B/g,sut=/%5D/g,IU=/%5E/g,out=/%60/g,EU=/%7B/g,rut=/%7C/g,TU=/%7D/g,iut=/%20/g;function KE(e){return encodeURI(""+e).replace(rut,"|").replace(nut,"[").replace(sut,"]")}function aut(e){return KE(e).replace(EU,"{").replace(TU,"}").replace(IU,"^")}function Jx(e){return KE(e).replace(SU,"%2B").replace(iut,"+").replace(kU,"%23").replace(Jlt,"%26").replace(out,"`").replace(EU,"{").replace(TU,"}").replace(IU,"^")}function lut(e){return Jx(e).replace(eut,"%3D")}function uut(e){return KE(e).replace(kU,"%23").replace(tut,"%3F")}function cut(e){return e==null?"":uut(e).replace(Qlt,"%2F")}function cb(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function dut(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<s.length;++o){const r=s[o].replace(SU," "),i=r.indexOf("="),a=cb(i<0?r:r.slice(0,i)),l=i<0?null:cb(r.slice(i+1));if(a in t){let u=t[a];Array.isArray(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function l3(e){let t="";for(let n in e){const s=e[n];if(n=lut(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(Array.isArray(s)?s.map(r=>r&&Jx(r)):[s&&Jx(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function fut(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=Array.isArray(s)?s.map(o=>o==null?null:""+o):s==null?s:""+s)}return t}function Qf(){let e=[];function t(s){return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function tl(e,t,n,s,o){const r=s&&(s.enterCallbacks[o]=s.enterCallbacks[o]||[]);return()=>new Promise((i,a)=>{const l=d=>{d===!1?a(ef(4,{from:n,to:t})):d instanceof Error?a(d):Plt(d)?a(ef(2,{from:t,to:d})):(r&&s.enterCallbacks[o]===r&&typeof d=="function"&&r.push(d),i())},u=e.call(s&&s.instances[o],t,n,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(d=>a(d))})}function O$(e,t,n,s){const o=[];for(const r of e)for(const i in r.components){let a=r.components[i];if(!(t!=="beforeRouteEnter"&&!r.instances[i]))if(hut(a)){const u=(a.__vccOpts||a)[t];u&&o.push(tl(u,n,s,r,i))}else{let l=a();o.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${i}" at "${r.path}"`));const c=wlt(u)?u.default:u;r.components[i]=c;const f=(c.__vccOpts||c)[t];return f&&tl(f,n,s,r,i)()}))}}return o}function hut(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function u3(e){const t=Qe(GE),n=Qe(yU),s=O(()=>t.resolve(Xe(e.to))),o=O(()=>{const{matched:l}=s.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const f=d.findIndex(Qd.bind(null,c));if(f>-1)return f;const h=c3(l[u-2]);return u>1&&c3(c)===h&&d[d.length-1].path!==h?d.findIndex(Qd.bind(null,l[u-2])):f}),r=O(()=>o.value>-1&&vut(n.params,s.value.params)),i=O(()=>o.value>-1&&o.value===n.matched.length-1&&wU(n.params,s.value.params));function a(l={}){return mut(l)?t[Xe(e.replace)?"replace":"push"](Xe(e.to)).catch(Lh):Promise.resolve()}return{route:s,href:O(()=>s.value.href),isActive:r,isExactActive:i,navigate:a}}const put=$e({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:u3,setup(e,{slots:t}){const n=En(u3(e)),{options:s}=Qe(GE),o=O(()=>({[d3(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[d3(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:Ke("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},r)}}}),gut=put;function mut(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function vut(e,t){for(const n in t){const s=t[n],o=e[n];if(typeof s=="string"){if(s!==o)return!1}else if(!Array.isArray(o)||o.length!==s.length||s.some((r,i)=>r!==o[i]))return!1}return!0}function c3(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const d3=(e,t,n)=>e!=null?e:t!=null?t:n,but=$e({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const s=Qe(Xx),o=O(()=>e.route||s.value),r=Qe(QO,0),i=O(()=>o.value.matched[r]);jt(QO,r+1),jt(ylt,i),jt(Xx,o);const a=V();return Le(()=>[a.value,i.value,e.name],([l,u,c],[d,f,h])=>{u&&(u.instances[c]=l,f&&f!==u&&l&&l===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),l&&u&&(!f||!Qd(u,f)||!d)&&(u.enterCallbacks[c]||[]).forEach(p=>p(l))},{flush:"post"}),()=>{const l=o.value,u=i.value,c=u&&u.components[e.name],d=e.name;if(!c)return f3(n.default,{Component:c,route:l});const f=u.props[e.name],h=f?f===!0?l.params:typeof f=="function"?f(l):f:null,g=Ke(c,Zn({},h,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(u.instances[d]=null)},ref:a}));return f3(n.default,{Component:g,route:l})||g}}});function f3(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const yut=but;function qct(e){const t=Klt(e.routes,e),n=e.parseQuery||dut,s=e.stringifyQuery||l3,o=e.history,r=Qf(),i=Qf(),a=Qf(),l=bo(Ya);let u=Ya;od&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=R$.bind(null,Z=>""+Z),d=R$.bind(null,cut),f=R$.bind(null,cb);function h(Z,ee){let te,fe;return CU(Z)?(te=t.getRecordMatcher(Z),fe=ee):fe=Z,t.addRoute(fe,te)}function p(Z){const ee=t.getRecordMatcher(Z);ee&&t.removeRoute(ee)}function g(){return t.getRoutes().map(Z=>Z.record)}function m(Z){return!!t.getRecordMatcher(Z)}function v(Z,ee){if(ee=Zn({},ee||l.value),typeof Z=="string"){const Ve=M$(n,Z,ee.path),Y=t.resolve({path:Ve.path},ee),ne=o.createHref(Ve.fullPath);return Zn(Ve,Y,{params:f(Y.params),hash:cb(Ve.hash),redirectedFrom:void 0,href:ne})}let te;if("path"in Z)te=Zn({},Z,{path:M$(n,Z.path,ee.path).path});else{const Ve=Zn({},Z.params);for(const Y in Ve)Ve[Y]==null&&delete Ve[Y];te=Zn({},Z,{params:d(Z.params)}),ee.params=d(ee.params)}const fe=t.resolve(te,ee),De=Z.hash||"";fe.params=c(f(fe.params));const We=xlt(s,Zn({},Z,{hash:aut(De),path:fe.path})),He=o.createHref(We);return Zn({fullPath:We,hash:De,query:s===l3?fut(Z.query):Z.query||{}},fe,{redirectedFrom:void 0,href:He})}function b(Z){return typeof Z=="string"?M$(n,Z,l.value.path):Zn({},Z)}function $(Z,ee){if(u!==Z)return ef(8,{from:ee,to:Z})}function y(Z){return x(Z)}function w(Z){return y(Zn(b(Z),{replace:!0}))}function C(Z){const ee=Z.matched[Z.matched.length-1];if(ee&&ee.redirect){const{redirect:te}=ee;let fe=typeof te=="function"?te(Z):te;return typeof fe=="string"&&(fe=fe.includes("?")||fe.includes("#")?fe=b(fe):{path:fe},fe.params={}),Zn({query:Z.query,hash:Z.hash,params:Z.params},fe)}}function x(Z,ee){const te=u=v(Z),fe=l.value,De=Z.state,We=Z.force,He=Z.replace===!0,Ve=C(te);if(Ve)return x(Zn(b(Ve),{state:De,force:We,replace:He}),ee||te);const Y=te;Y.redirectedFrom=ee;let ne;return!We&&klt(s,fe,te)&&(ne=ef(16,{to:Y,from:fe}),ae(fe,fe,!0,!1)),(ne?Promise.resolve(ne):T(Y,fe)).catch(q=>iu(q)?q:B(q,Y,fe)).then(q=>{if(q){if(iu(q,2))return x(Zn(b(q.to),{state:De,force:We,replace:He}),ee||Y)}else q=_(Y,fe,!0,He,De);return I(Y,fe,q),q})}function S(Z,ee){const te=$(Z,ee);return te?Promise.reject(te):Promise.resolve()}function T(Z,ee){let te;const[fe,De,We]=wut(Z,ee);te=O$(fe.reverse(),"beforeRouteLeave",Z,ee);for(const Ve of fe)Ve.leaveGuards.forEach(Y=>{te.push(tl(Y,Z,ee))});const He=S.bind(null,Z,ee);return te.push(He),Xc(te).then(()=>{te=[];for(const Ve of r.list())te.push(tl(Ve,Z,ee));return te.push(He),Xc(te)}).then(()=>{te=O$(De,"beforeRouteUpdate",Z,ee);for(const Ve of De)Ve.updateGuards.forEach(Y=>{te.push(tl(Y,Z,ee))});return te.push(He),Xc(te)}).then(()=>{te=[];for(const Ve of Z.matched)if(Ve.beforeEnter&&!ee.matched.includes(Ve))if(Array.isArray(Ve.beforeEnter))for(const Y of Ve.beforeEnter)te.push(tl(Y,Z,ee));else te.push(tl(Ve.beforeEnter,Z,ee));return te.push(He),Xc(te)}).then(()=>(Z.matched.forEach(Ve=>Ve.enterCallbacks={}),te=O$(We,"beforeRouteEnter",Z,ee),te.push(He),Xc(te))).then(()=>{te=[];for(const Ve of i.list())te.push(tl(Ve,Z,ee));return te.push(He),Xc(te)}).catch(Ve=>iu(Ve,8)?Ve:Promise.reject(Ve))}function I(Z,ee,te){for(const fe of a.list())fe(Z,ee,te)}function _(Z,ee,te,fe,De){const We=$(Z,ee);if(We)return We;const He=ee===Ya,Ve=od?history.state:{};te&&(fe||He?o.replace(Z.fullPath,Zn({scroll:He&&Ve&&Ve.scroll},De)):o.push(Z.fullPath,De)),l.value=Z,ae(Z,ee,te,He),X()}let N;function D(){N=o.listen((Z,ee,te)=>{const fe=v(Z),De=C(fe);if(De){x(Zn(De,{replace:!0}),fe).catch(Lh);return}u=fe;const We=l.value;od&&Dlt(n3(We.fullPath,te.delta),z1()),T(fe,We).catch(He=>iu(He,12)?He:iu(He,2)?(x(He.to,fe).then(Ve=>{iu(Ve,20)&&!te.delta&&te.type===Np.pop&&o.go(-1,!1)}).catch(Lh),Promise.reject()):(te.delta&&o.go(-te.delta,!1),B(He,fe,We))).then(He=>{He=He||_(fe,We,!1),He&&(te.delta?o.go(-te.delta,!1):te.type===Np.pop&&iu(He,20)&&o.go(-1,!1)),I(fe,We,He)}).catch(Lh)})}let F=Qf(),P=Qf(),M;function B(Z,ee,te){X(Z);const fe=P.list();return fe.length?fe.forEach(De=>De(Z,ee,te)):console.error(Z),Promise.reject(Z)}function j(){return M&&l.value!==Ya?Promise.resolve():new Promise((Z,ee)=>{F.add([Z,ee])})}function X(Z){M||(M=!0,D(),F.list().forEach(([ee,te])=>Z?te(Z):ee()),F.reset())}function ae(Z,ee,te,fe){const{scrollBehavior:De}=e;if(!od||!De)return Promise.resolve();const We=!te&&Rlt(n3(Z.fullPath,0))||(fe||!te)&&history.state&&history.state.scroll||null;return ft().then(()=>De(Z,ee,We)).then(He=>He&&Alt(He)).catch(He=>B(He,Z,ee))}const be=Z=>o.go(Z);let ie;const ye=new Set;return{currentRoute:l,addRoute:h,removeRoute:p,hasRoute:m,getRoutes:g,resolve:v,options:e,push:y,replace:w,go:be,back:()=>be(-1),forward:()=>be(1),beforeEach:r.add,beforeResolve:i.add,afterEach:a.add,onError:P.add,isReady:j,install(Z){const ee=this;Z.component("RouterLink",gut),Z.component("RouterView",yut),Z.config.globalProperties.$router=ee,Object.defineProperty(Z.config.globalProperties,"$route",{enumerable:!0,get:()=>Xe(l)}),od&&!ie&&l.value===Ya&&(ie=!0,y(o.location).catch(De=>{}));const te={};for(const De in Ya)te[De]=O(()=>l.value[De]);Z.provide(GE,ee),Z.provide(yU,En(te)),Z.provide(Xx,l);const fe=Z.unmount;ye.add(Z),Z.unmount=function(){ye.delete(Z),ye.size<1&&(u=Ya,N&&N(),l.value=Ya,ie=!1,M=!1),fe()}}}}function Xc(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function wut(e,t){const n=[],s=[],o=[],r=Math.max(t.matched.length,e.matched.length);for(let i=0;i<r;i++){const a=t.matched[i];a&&(e.matched.find(u=>Qd(u,a))?s.push(a):n.push(a));const l=e.matched[i];l&&(t.matched.find(u=>Qd(u,l))||o.push(l))}return[n,s,o]}/*!
* chartjs-plugin-annotation v1.4.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2022 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const _U=["click","dblclick"],Qx=["enter","leave"],qE=_U.concat(Qx);function $ut(e,t,n){t.listened=!1,t.moveListened=!1,qE.forEach(s=>{typeof n[s]=="function"?(t.listened=!0,t.listeners[s]=n[s]):js(t.listeners[s])&&delete t.listeners[s]}),Qx.forEach(s=>{typeof n[s]=="function"&&(t.moveListened=!0)}),(!t.listened||!t.moveListened)&&t.annotations.forEach(s=>{t.listened||_U.forEach(o=>{typeof s[o]=="function"&&(t.listened=!0)}),t.moveListened||Qx.forEach(o=>{typeof s[o]=="function"&&(t.listened=!0,t.moveListened=!0)})})}function Cut(e,t,n){if(e.listened)switch(t.type){case"mousemove":case"mouseout":xut(e,t);break;case"click":Sut(e,t,n);break}}function xut(e,t){if(!e.moveListened)return;let n;t.type==="mousemove"&&(n=NU(e.elements,t));const s=e.hovered;e.hovered=n,kut(e,{previous:s,element:n},t)}function kut(e,t,n){const{previous:s,element:o}=t;s&&s!==o&&zh(s.options.leave||e.listeners.leave,s,n),o&&o!==s&&zh(o.options.enter||e.listeners.enter,o,n)}function Sut(e,t,n){const s=e.listeners,o=NU(e.elements,t);if(o){const r=o.options,i=r.dblclick||s.dblclick,a=r.click||s.click;o.clickTimeout?(clearTimeout(o.clickTimeout),delete o.clickTimeout,zh(i,o,t)):i?o.clickTimeout=setTimeout(()=>{delete o.clickTimeout,zh(a,o,t)},n.dblClickSpeed):zh(a,o,t)}}function zh(e,t,n){Jn(e,[t.$context,n])}function NU(e,t){let n=Number.POSITIVE_INFINITY;return e.filter(s=>s.options.display&&s.inRange(t.x,t.y)).reduce((s,o)=>{const r=o.getCenterPoint(),i=$p(t,r);return i<n?(s=[o],n=i):i===n&&s.push(o),s},[]).sort((s,o)=>s._index-o._index).slice(0,1)[0]}function Iut(e,t,n){const s=Aut(t,n);let o=h3(t,s,"min","suggestedMin");o=h3(t,s,"max","suggestedMax")||o,o&&typeof t.handleTickRangeOptions=="function"&&t.handleTickRangeOptions()}function Eut(e,t){for(const n of e)_ut(n,t)}function h3(e,t,n,s){if($s(t[n])&&!Tut(e.options,n,s)){const o=e[n]!==t[n];return e[n]=t[n],o}}function Tut(e,t,n){return js(e[t])||js(e[n])}function _ut(e,t){for(const n of["scaleID","xScaleID","yScaleID"])e[n]&&!t[e[n]]&&Nut(e,n)&&console.warn(`No scale found with id '${e[n]}' for annotation '${e.id}'`)}function Nut(e,t){if(t==="scaleID")return!0;const n=t.charAt(0);for(const s of["Min","Max","Value"])if(js(e[n+s]))return!0;return!1}function Aut(e,t){const n=e.axis,s=e.id,o=n+"ScaleID",r={min:Xt(e.min,Number.NEGATIVE_INFINITY),max:Xt(e.max,Number.POSITIVE_INFINITY)};for(const i of t)i.scaleID===s?p3(i,e,["value","endValue"],r):i[o]===s&&p3(i,e,[n+"Min",n+"Max",n+"Value"],r);return r}function p3(e,t,n,s){for(const o of n){const r=e[o];if(js(r)){const i=t.parse(r);s.min=Math.min(s.min,i),s.max=Math.max(s.max,i)}}}const Cv=.001,YE=(e,t,n)=>Math.min(n,Math.max(t,e));function Dut(e,t,n){for(const s of Object.keys(e))e[s]=YE(e[s],t,n);return e}function Rut(e,t,n,s){if(!e||!t||n<=0)return!1;const o=s/2||0;return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(n+o,2)}function AU(e,t,{x:n,y:s,width:o,height:r},i){const a=i/2;return e>=n-a-Cv&&e<=n+o+a+Cv&&t>=s-a-Cv&&t<=s+r+a+Cv}function DU(e,t){const{x:n,y:s}=e.getProps(["x","y"],t);return{x:n,y:s}}const Mut=(e,t)=>t>e||e.length>t.length&&e.substr(0,t.length)===t;function Out(e,t,n,s=!0){const o=n.split(".");let r=0;for(const i of t.split(".")){const a=o[r++];if(parseInt(i,10)<parseInt(a,10))break;if(Mut(a,i)){if(s)throw new Error(`${e} v${n} is not supported. v${t} or newer is required.`);return!1}}return!0}const RU=e=>typeof e=="string"&&e.endsWith("%"),MU=e=>YE(parseFloat(e)/100,0,1);function XE(e,t){return t==="start"?0:t==="end"?e:RU(t)?MU(t)*e:e/2}function tf(e,t){return typeof t=="number"?t:RU(t)?MU(t)*e:e}function Fut(e,t){const{x:n,width:s}=e,o=t.textAlign;return o==="center"?n+s/2:o==="end"||o==="right"?n+s:n}function OU(e){return dn(e)?{x:Xt(e.x,"center"),y:Xt(e.y,"center")}:(e=Xt(e,"center"),{x:e,y:e})}function FU(e){return e&&(js(e.xValue)||js(e.yValue))}const F$=new Map;function ZE(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object HTMLImageElement]"||t==="[object HTMLCanvasElement]"}}function db(e,t,n){if(n){const s=t.getCenterPoint();e.translate(s.x,s.y),e.rotate(io(n)),e.translate(-s.x,-s.y)}}function Tc(e,t){if(t&&t.borderWidth)return e.lineCap=t.borderCapStyle,e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.lineJoin=t.borderJoinStyle,e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,!0}function Af(e,t){e.shadowColor=t.backgroundShadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY}function JE(e,t){const n=t.content;if(ZE(n))return{width:tf(n.width,t.width),height:tf(n.height,t.height)};const s=Rs(t.font),o=t.textStrokeWidth,r=Wn(n)?n:[n],i=r.join()+s.string+o+(e._measureText?"-spriting":"");if(!F$.has(i)){e.save(),e.font=s.string;const a=r.length;let l=0;for(let c=0;c<a;c++){const d=r[c];l=Math.max(l,e.measureText(d).width+o)}e.restore();const u=a*s.lineHeight+o;F$.set(i,{width:l,height:u})}return F$.get(i)}function QE(e,t,n){const{x:s,y:o,width:r,height:i}=t;e.save(),Af(e,n);const a=Tc(e,n);e.fillStyle=n.backgroundColor,e.beginPath(),Sp(e,{x:s,y:o,w:r,h:i,radius:Dut(zu(Xt(n.cornerRadius,n.borderRadius)),0,Math.min(r,i)/2)}),e.closePath(),e.fill(),a&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore()}function eT(e,t,n){const s=n.content;if(ZE(s)){e.drawImage(s,t.x,t.y,t.width,t.height);return}const o=Wn(s)?s:[s],r=Rs(n.font),i=r.lineHeight,a=Fut(t,n),l=t.y+i/2+n.textStrokeWidth/2;e.save(),e.font=r.string,e.textBaseline="middle",e.textAlign=n.textAlign,Put(e,n)&&o.forEach((u,c)=>e.strokeText(u,a,l+c*i)),e.fillStyle=n.color,o.forEach((u,c)=>e.fillText(u,a,l+c*i)),e.restore()}function Put(e,t){if(t.textStrokeWidth>0)return e.lineJoin="round",e.miterLimit=2,e.lineWidth=t.textStrokeWidth,e.strokeStyle=t.textStrokeColor,!0}function Ap(e){const{x:t,y:n,width:s,height:o}=e;return{x:t+s/2,y:n+o/2}}function $m(e,t,n){const s=Math.cos(n),o=Math.sin(n),r=t.x,i=t.y;return{x:r+s*(e.x-r)-o*(e.y-i),y:i+o*(e.x-r)+s*(e.y-i)}}function Wi(e,t,n){return t=typeof t=="number"?t:e.parse(t),$s(t)?e.getPixelForValue(t):n}function g3(e,t){if(e){const n=Wi(e,t.min,t.start),s=Wi(e,t.max,t.end);return{start:Math.min(n,s),end:Math.max(n,s)}}return{start:t.start,end:t.end}}function PU(e,t){const{chartArea:n,scales:s}=e,o=s[t.xScaleID],r=s[t.yScaleID];let i=n.width/2,a=n.height/2;return o&&(i=Wi(o,t.xValue,i)),r&&(a=Wi(r,t.yValue,a)),{x:i,y:a}}function V1(e,t){const n=e.scales[t.xScaleID],s=e.scales[t.yScaleID];let{top:o,left:r,bottom:i,right:a}=e.chartArea;if(!n&&!s)return{};const l=g3(n,{min:t.xMin,max:t.xMax,start:r,end:a});r=l.start,a=l.end;const u=g3(s,{min:t.yMin,max:t.yMax,start:o,end:i});return o=u.start,i=u.end,{x:r,y:o,x2:a,y2:i,width:a-r,height:i-o}}function Lut(e,t){const n=PU(e,t);return{x:n.x+t.xAdjust,y:n.y+t.yAdjust,width:t.radius*2,height:t.radius*2}}function LU(e,t){if(!FU(t)){const n=V1(e,t),s=Ap(n);let o=t.radius;return(!o||isNaN(o))&&(o=Math.min(n.width,n.height)/2,t.radius=o),{x:s.x+t.xAdjust,y:s.y+t.yAdjust,width:o*2,height:o*2}}return Lut(e,t)}class Cm extends To{inRange(t,n,s){const{x:o,y:r}=$m({x:t,y:n},this.getCenterPoint(s),io(-this.options.rotation));return AU(o,r,this.getProps(["x","y","width","height"],s),this.options.borderWidth)}getCenterPoint(t){return Ap(this.getProps(["x","y","width","height"],t))}draw(t){t.save(),db(t,this,this.options.rotation),QE(t,this,this.options),t.restore()}drawLabel(t){const{x:n,y:s,width:o,height:r,options:i}=this,{label:a,borderWidth:l}=i,u=l/2,c=OU(a.position),d=Qs(a.padding),f=JE(t,a),h={x:But(this,f,c,d),y:zut(this,f,c,d),width:f.width,height:f.height};t.save(),db(t,this,a.rotation),t.beginPath(),t.rect(n+u+d.left,s+u+d.top,o-l-d.width,r-l-d.height),t.clip(),eT(t,h,a),t.restore()}resolveElementProperties(t,n){return V1(t,n)}}Cm.id="boxAnnotation";Cm.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,cornerRadius:void 0,display:!0,label:{borderWidth:void 0,color:"black",content:null,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,xAdjust:0,yAdjust:0,width:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"};Cm.defaultRoutes={borderColor:"color",backgroundColor:"color"};Cm.descriptors={label:{_fallback:!0}};function But(e,t,n,s){const{x:o,x2:r,width:i,options:a}=e,{xAdjust:l,borderWidth:u}=a.label;return BU({start:o,end:r,size:i},{position:n.x,padding:{start:s.left,end:s.right},adjust:l,borderWidth:u,size:t.width})}function zut(e,t,n,s){const{y:o,y2:r,height:i,options:a}=e,{yAdjust:l,borderWidth:u}=a.label;return BU({start:o,end:r,size:i},{position:n.y,padding:{start:s.top,end:s.bottom},adjust:l,borderWidth:u,size:t.height})}function BU(e,t){const{start:n,end:s}=e,{position:o,padding:{start:r,end:i},adjust:a,borderWidth:l}=t,u=s-l-n-r-i-t.size;return n+l/2+a+r+XE(u,o)}const tT=(e,t,n)=>({x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}),e2=(e,t,n)=>tT(t,n,Math.abs((e-t.y)/(n.y-t.y))).x,m3=(e,t,n)=>tT(t,n,Math.abs((e-t.x)/(n.x-t.x))).y,eh=e=>e*e,th=.001;function v3({x:e,y:t,x2:n,y2:s},{top:o,right:r,bottom:i,left:a}){return!(e<a&&n<a||e>r&&n>r||t<o&&s<o||t>i&&s>i)}function b3({x:e,y:t},n,{top:s,right:o,bottom:r,left:i}){return e<i&&(t=m3(i,{x:e,y:t},n),e=i),e>o&&(t=m3(o,{x:e,y:t},n),e=o),t<s&&(e=e2(s,{x:e,y:t},n),t=s),t>r&&(e=e2(r,{x:e,y:t},n),t=r),{x:e,y:t}}function Vut(e,t,n){const{x:s,y:o}=b3(e,t,n),{x:r,y:i}=b3(t,e,n);return{x:s,y:o,x2:r,y2:i,width:Math.abs(r-s),height:Math.abs(i-o)}}class xm extends To{intersects(t,n,s=th,o){const{x:r,y:i,x2:a,y2:l}=this.getProps(["x","y","x2","y2"],o),u=a-r,c=l-i,d=eh(u)+eh(c),f=d===0?-1:((t-r)*u+(n-i)*c)/d;let h,p;return f<0?(h=r,p=i):f>1?(h=a,p=l):(h=r+f*u,p=i+f*c),eh(t-h)+eh(n-p)<=s}labelIsVisible(t,n){const s=this.options.label;return!s||!s.enabled?!1:!n||v3(this.getProps(["x","y","x2","y2"],t),n)}isOnLabel(t,n,s){if(!this.labelIsVisible(s))return!1;const{labelX:o,labelY:r,labelWidth:i,labelHeight:a,labelRotation:l}=this.getProps(["labelX","labelY","labelWidth","labelHeight","labelRotation"],s),{x:u,y:c}=$m({x:t,y:n},{x:o,y:r},-l),d=this.options.label.borderWidth/2||0,f=i/2+d,h=a/2+d;return u>=o-f-th&&u<=o+f+th&&c>=r-h-th&&c<=r+h+th}inRange(t,n,s){const o=eh(this.options.borderWidth/2);return this.intersects(t,n,o,s)||this.isOnLabel(t,n,s)}getCenterPoint(){return{x:(this.x2+this.x)/2,y:(this.y2+this.y)/2}}draw(t){const{x:n,y:s,x2:o,y2:r,options:i}=this;if(t.save(),!Tc(t,i))return t.restore();Af(t,i);const a=Math.atan2(r-s,o-n),l=Math.sqrt(Math.pow(o-n,2)+Math.pow(r-s,2)),{startOpts:u,endOpts:c,startAdjust:d,endAdjust:f}=Yut(this);t.translate(n,s),t.rotate(a),t.beginPath(),t.moveTo(0+d,0),t.lineTo(l-f,0),t.shadowColor=i.borderShadowColor,t.stroke(),x3(t,0,d,u),x3(t,l,-f,c),t.restore()}drawLabel(t,n){if(!this.labelIsVisible(!1,n))return;const{labelX:s,labelY:o,labelWidth:r,labelHeight:i,labelRotation:a,labelPadding:l,labelTextSize:u,options:{label:c}}=this;t.save(),t.translate(s,o),t.rotate(a);const d={x:-(r/2),y:-(i/2),width:r,height:i};QE(t,d,c);const f={x:-(r/2)+l.left+c.borderWidth/2,y:-(i/2)+l.top+c.borderWidth/2,width:u.width,height:u.height};eT(t,f,c),t.restore()}resolveElementProperties(t,n){const s=t.scales[n.scaleID];let{top:o,left:r,bottom:i,right:a}=t.chartArea,l,u;if(s)l=Wi(s,n.value,NaN),u=Wi(s,n.endValue,l),s.isHorizontal()?(r=l,a=u):(o=l,i=u);else{const h=t.scales[n.xScaleID],p=t.scales[n.yScaleID];h&&(r=Wi(h,n.xMin,r),a=Wi(h,n.xMax,a)),p&&(o=Wi(p,n.yMin,o),i=Wi(p,n.yMax,i))}const d=v3({x:r,y:o,x2:a,y2:i},t.chartArea)?Vut({x:r,y:o},{x:a,y:i},t.chartArea):{x:r,y:o,x2:a,y2:i,width:Math.abs(a-r),height:Math.abs(i-o)},f=n.label;return f&&f.content?Wut(d,t,f):d}}xm.id="lineAnnotation";const y3={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,enabled:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};xm.defaults={adjustScaleRange:!0,arrowHeads:{enabled:!1,end:Object.assign({},y3),fill:!1,length:12,start:Object.assign({},y3),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,display:!0,endValue:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,color:"#fff",content:null,cornerRadius:void 0,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xPadding:void 0,yAdjust:0,yPadding:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"};xm.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};xm.defaultRoutes={borderColor:"color"};function Wut(e,t,n){const{padding:s,xPadding:o,yPadding:r,borderWidth:i}=n,a=Uut(s,o,r),l=JE(t.ctx,n),u=l.width+a.width+i,c=l.height+a.height+i,d=jut(e,n,{width:u,height:c,padding:a},t.chartArea);return e.labelX=d.x,e.labelY=d.y,e.labelWidth=d.width,e.labelHeight=d.height,e.labelRotation=d.rotation,e.labelPadding=a,e.labelTextSize=l,e}function Hut(e){const{x:t,y:n,x2:s,y2:o}=e,r=Math.atan2(o-n,s-t);return r>Bn/2?r-Bn:r<Bn/-2?r+Bn:r}function Uut(e,t,n){let s=e;return(t||n)&&(s={x:t||6,y:n||6}),Qs(s)}function jut(e,t,n,s){const{width:o,height:r,padding:i}=n,{xAdjust:a,yAdjust:l}=t,u={x:e.x,y:e.y},c={x:e.x2,y:e.y2},d=t.rotation==="auto"?Hut(e):io(t.rotation),f=Gut(o,r,d),h=Kut(e,t,{labelSize:f,padding:i},s),p=tT(u,c,h),g={size:f.w,min:s.left,max:s.right,padding:i.left},m={size:f.h,min:s.top,max:s.bottom,padding:i.top};return{x:$3(p.x,g)+a,y:$3(p.y,m)+l,width:o,height:r,rotation:d}}function Gut(e,t,n){const s=Math.cos(n),o=Math.sin(n);return{w:Math.abs(e*s)+Math.abs(t*o),h:Math.abs(e*o)+Math.abs(t*s)}}function Kut(e,t,n,s){let o;const r=qut(e,s);return t.position==="start"?o=w3({w:e.x2-e.x,h:e.y2-e.y},n,t,r):t.position==="end"?o=1-w3({w:e.x-e.x2,h:e.y-e.y2},n,t,r):o=XE(1,t.position),o}function w3(e,t,n,s){const{labelSize:o,padding:r}=t,i=e.w*s.dx,a=e.h*s.dy,l=i>0&&(o.w/2+r.left-s.x)/i,u=a>0&&(o.h/2+r.top-s.y)/a;return YE(Math.max(l,u),0,.25)}function qut(e,t){const{x:n,x2:s,y:o,y2:r}=e,i=Math.min(o,r)-t.top,a=Math.min(n,s)-t.left,l=t.bottom-Math.max(o,r),u=t.right-Math.max(n,s);return{x:Math.min(a,u),y:Math.min(i,l),dx:a<=u?1:-1,dy:i<=l?1:-1}}function $3(e,t){const{size:n,min:s,max:o,padding:r}=t,i=n/2;return n>o-s?(o+s)/2:(s>=e-r-i&&(e=s+r+i),o<=e+r+i&&(e=o-r-i),e)}function Yut(e){const t=e.options,n=t.arrowHeads&&t.arrowHeads.start,s=t.arrowHeads&&t.arrowHeads.end;return{startOpts:n,endOpts:s,startAdjust:C3(e,n),endAdjust:C3(e,s)}}function C3(e,t){if(!t||!t.enabled)return 0;const{length:n,width:s}=t,o=e.options.borderWidth/2,r={x:n,y:s+o};return Math.abs(e2(0,r,{x:0,y:o}))}function x3(e,t,n,s){if(!s||!s.enabled)return;const{length:o,width:r,fill:i,backgroundColor:a,borderColor:l}=s,u=Math.abs(t-o)+n;e.beginPath(),Af(e,s),Tc(e,s),e.moveTo(u,-r),e.lineTo(t+n,0),e.lineTo(u,r),i===!0?(e.fillStyle=a||l,e.closePath(),e.fill(),e.shadowColor="transparent"):e.shadowColor=s.borderShadowColor,e.stroke()}class W1 extends To{inRange(t,n,s){return Xut({x:t,y:n},this.getProps(["width","height"],s),this.options.rotation,this.options.borderWidth)}getCenterPoint(t){return Ap(this.getProps(["x","y","width","height"],t))}draw(t){const{width:n,height:s,options:o}=this,r=this.getCenterPoint();t.save(),db(t,this,o.rotation),Af(t,this.options),t.beginPath(),t.fillStyle=o.backgroundColor;const i=Tc(t,o);t.ellipse(r.x,r.y,s/2,n/2,Bn/2,0,2*Bn),t.fill(),i&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,n){return V1(t,n)}}W1.id="ellipseAnnotation";W1.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"};W1.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Xut(e,t,n,s){const{width:o,height:r}=t,i=t.getCenterPoint(!0),a=o/2,l=r/2;if(a<=0||l<=0)return!1;const u=io(n||0),c=s/2||0,d=Math.cos(u),f=Math.sin(u),h=Math.pow(d*(e.x-i.x)+f*(e.y-i.y),2),p=Math.pow(f*(e.x-i.x)-d*(e.y-i.y),2);return h/Math.pow(a+c,2)+p/Math.pow(l+c,2)<=1.0001}class H1 extends To{inRange(t,n,s){const{x:o,y:r}=$m({x:t,y:n},this.getCenterPoint(s),io(-this.options.rotation));return AU(o,r,this.getProps(["x","y","width","height"],s),this.options.borderWidth)}getCenterPoint(t){return Ap(this.getProps(["x","y","width","height"],t))}draw(t){if(!this.options.content)return;const{labelX:n,labelY:s,labelWidth:o,labelHeight:r,options:i}=this;t.save(),db(t,this,i.rotation),Jut(t,this),QE(t,this,i),eT(t,{x:n,y:s,width:o,height:r},i),t.restore()}resolveElementProperties(t,n){const s=FU(n)?PU(t,n):Ap(V1(t,n)),o=Qs(n.padding),r=JE(t.ctx,n),i=Zut(s,r,n,o),a=n.borderWidth/2,l=Ut(dt({pointX:s.x,pointY:s.y},i),{labelX:i.x+o.left+a,labelY:i.y+o.top+a,labelWidth:r.width,labelHeight:r.height});return l.calloutPosition=n.callout.enabled&&sct(l,n.callout,n.rotation),l}}H1.id="labelAnnotation";H1.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,enabled:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0};H1.defaultRoutes={borderColor:"color"};function Zut(e,t,n,s){const o=t.width+s.width+n.borderWidth,r=t.height+s.height+n.borderWidth,i=OU(n.position);return{x:k3(e.x,o,n.xAdjust,i.x),y:k3(e.y,r,n.yAdjust,i.y),width:o,height:r}}function k3(e,t,n=0,s){return e-XE(t,s)+n}function Jut(e,t){const{pointX:n,pointY:s,calloutPosition:o,options:r}=t;if(!o||t.inRange(n,s))return;const i=r.callout;if(e.save(),e.beginPath(),!Tc(e,i))return e.restore();const{separatorStart:l,separatorEnd:u}=Qut(t,o),{sideStart:c,sideEnd:d}=tct(t,o,l);(i.margin>0||r.borderWidth===0)&&(e.moveTo(l.x,l.y),e.lineTo(u.x,u.y)),e.moveTo(c.x,c.y),e.lineTo(d.x,d.y);const f=$m({x:n,y:s},t.getCenterPoint(),io(-r.rotation));e.lineTo(f.x,f.y),e.stroke(),e.restore()}function Qut(e,t){const{x:n,y:s,width:o,height:r}=e,i=ect(e,t);let a,l;return t==="left"||t==="right"?(a={x:n+i,y:s},l={x:a.x,y:a.y+r}):(a={x:n,y:s+i},l={x:a.x+o,y:a.y}),{separatorStart:a,separatorEnd:l}}function ect(e,t){const{width:n,height:s,options:o}=e,r=o.callout.margin+o.borderWidth/2;return t==="right"?n+r:t==="bottom"?s+r:-r}function tct(e,t,n){const{y:s,width:o,height:r,options:i}=e,a=i.callout.start,l=nct(t,i.callout);let u,c;return t==="left"||t==="right"?(u={x:n.x,y:s+tf(r,a)},c={x:u.x+l,y:u.y}):(u={x:n.x+tf(o,a),y:n.y},c={x:u.x,y:u.y+l}),{sideStart:u,sideEnd:c}}function nct(e,t){const n=t.side;return e==="left"||e==="top"?-n:n}function sct(e,t,n){const s=t.position;return s==="left"||s==="right"||s==="top"||s==="bottom"?s:rct(e,t,n)}const oct=["left","bottom","top","right"];function rct(e,t,n){const{x:s,y:o,width:r,height:i,pointX:a,pointY:l}=e,u={x:s+r/2,y:o+i/2},c=t.start,d=tf(r,c),f=tf(i,c),h=[s,s+d,s+d,s+r],p=[o+f,o+i,o,o+f],g=[];for(let m=0;m<4;m++){const v=$m({x:h[m],y:p[m]},u,io(n));g.push({position:oct[m],distance:$p(v,{x:a,y:l})})}return g.sort((m,v)=>m.distance-v.distance)[0].position}class U1 extends To{inRange(t,n,s){const{width:o}=this.getProps(["width"],s);return Rut({x:t,y:n},this.getCenterPoint(s),o/2,this.options.borderWidth)}getCenterPoint(t){return DU(this,t)}draw(t){const n=this.options,s=n.borderWidth;if(n.radius<.1)return;t.save(),t.fillStyle=n.backgroundColor,Af(t,n);const o=Tc(t,n);n.borderWidth=0,kp(t,n,this.x,this.y),o&&!ZE(n.pointStyle)&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore(),n.borderWidth=s}resolveElementProperties(t,n){return LU(t,n)}}U1.id="pointAnnotation";U1.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0};U1.defaultRoutes={borderColor:"color",backgroundColor:"color"};class j1 extends To{inRange(t,n,s){return this.options.radius>=.1&&this.elements.length>1&&ict(this.elements,t,n,s)}getCenterPoint(t){return DU(this,t)}draw(t){const{elements:n,options:s}=this;t.save(),t.beginPath(),t.fillStyle=s.backgroundColor,Af(t,s);const o=Tc(t,s);let r=!0;for(const i of n)r?(t.moveTo(i.x,i.y),r=!1):t.lineTo(i.x,i.y);t.closePath(),t.fill(),o&&(t.shadowColor=s.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,n){const{x:s,y:o,width:r,height:i}=LU(t,n),{sides:a,radius:l,rotation:u,borderWidth:c}=n,d=c/2,f=[],h=2*Bn/a;let p=u*oH;for(let g=0;g<a;g++,p+=h){const m=Math.sin(p),v=Math.cos(p);f.push({type:"point",optionScope:"point",properties:{x:s+m*l,y:o-v*l,bX:s+m*(l+d),bY:o-v*(l+d)}})}return{x:s,y:o,width:r,height:i,elements:f,initProperties:{x:s,y:o}}}}j1.id="polygonAnnotation";j1.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0};j1.defaultRoutes={borderColor:"color",backgroundColor:"color"};function ict(e,t,n,s){let o=!1,r=e[e.length-1].getProps(["bX","bY"],s);for(const i of e){const a=i.getProps(["bX","bY"],s);a.bY>n!=r.bY>n&&t<(r.bX-a.bX)*(n-a.bY)/(r.bY-a.bY)+a.bX&&(o=!o),r=a}return o}const gl={box:Cm,ellipse:W1,label:H1,line:xm,point:U1,polygon:j1};Object.keys(gl).forEach(e=>{Cn.describe(`elements.${gl[e].id}`,{_fallback:"plugins.annotation"})});const act={update:Object.assign};function nT(e="line"){return gl[e]?e:(console.warn(`Unknown annotation type: '${e}', defaulting to 'line'`),"line")}function lct(e,t,n,s){const o=cct(e,n.animations,s),r=t.annotations,i=hct(t.elements,r);for(let a=0;a<r.length;a++){const l=r[a],u=zU(i,a,l.type),c=l.setContext(fct(e,u,l)),d=u.resolveElementProperties(e,c);d.skip=uct(d),"elements"in d&&(dct(u,d,c,o),delete d.elements),js(u.x)||Object.assign(u,d),d.options=VU(c),o.update(u,d)}}function uct(e){return isNaN(e.x)||isNaN(e.y)}function cct(e,t,n){return n==="reset"||n==="none"||n==="resize"?act:new NE(e,t)}function dct(e,{elements:t,initProperties:n},s,o){const r=e.elements||(e.elements=[]);r.length=t.length;for(let i=0;i<t.length;i++){const a=t[i],l=a.properties,u=zU(r,i,a.type,n),c=s[a.optionScope].override(a);l.options=VU(c),o.update(u,l)}}function zU(e,t,n,s){const o=gl[nT(n)];let r=e[t];return(!r||!(r instanceof o))&&(r=e[t]=new o,dn(s)&&Object.assign(r,s)),r}function VU(e){const t=gl[nT(e.type)],n={};n.id=e.id,n.type=e.type,n.drawTime=e.drawTime,Object.assign(n,t2(e,t.defaults),t2(e,t.defaultRoutes));for(const s of qE)n[s]=e[s];return n}function t2(e,t){const n={};for(const s of Object.keys(t)){const o=t[s],r=e[s];n[s]=dn(o)?t2(r,o):r}return n}function fct(e,t,n){return t.$context||(t.$context=Object.assign(Object.create(e.getContext()),{element:t,id:n.id,type:"annotation"}))}function hct(e,t){const n=t.length,s=e.length;if(s<n){const o=n-s;e.splice(s,0,...new Array(o))}else s>n&&e.splice(n,s-n);return e}var pct="chartjs-plugin-annotation",gct="1.4.0";const Ja=new Map;var Yct={id:"annotation",version:gct,afterRegister(){_u.register(gl),Out("chart.js","3.7",_u.version,!1)||(console.warn(`${pct} has known issues with chart.js versions prior to 3.7, please consider upgrading.`),_u.defaults.set("elements.lineAnnotation",{callout:{},font:{},padding:6}))},afterUnregister(){_u.unregister(gl)},beforeInit(e){Ja.set(e,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1})},beforeUpdate(e,t,n){const s=Ja.get(e),o=s.annotations=[];let r=n.annotations;dn(r)?Object.keys(r).forEach(i=>{const a=r[i];dn(a)&&(a.id=i,o.push(a))}):Wn(r)&&o.push(...r),Eut(o,e.scales)},afterDataLimits(e,t){const n=Ja.get(e);Iut(e,t.scale,n.annotations.filter(s=>s.display&&s.adjustScaleRange))},afterUpdate(e,t,n){const s=Ja.get(e);$ut(e,s,n),lct(e,s,n,t.mode),s.visibleElements=s.elements.filter(o=>!o.skip&&o.options.display)},beforeDatasetsDraw(e,t,n){xv(e,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(e,t,n){xv(e,"afterDatasetsDraw",n.clip)},beforeDraw(e,t,n){xv(e,"beforeDraw",n.clip)},afterDraw(e,t,n){xv(e,"afterDraw",n.clip)},beforeEvent(e,t,n){const s=Ja.get(e);Cut(s,t.event,n)},destroy(e){Ja.delete(e)},_getState(e){return Ja.get(e)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","pointX","pointY","labelX","labelY","labelWidth","labelHeight","radius"],type:"number"}},clip:!0,dblClickSpeed:350,drawTime:"afterDatasetsDraw",label:{drawTime:null}},descriptors:{_indexable:!1,_scriptable:e=>!qE.includes(e),annotations:{_allKeys:!1,_fallback:(e,t)=>`elements.${gl[nT(t.type)].id}`}},additionalOptionScopes:[""]};function xv(e,t,n){const{ctx:s,chartArea:o}=e,{visibleElements:r}=Ja.get(e);n&&hm(s,o),WU(s,r,t),mct(s,r,t),n&&pm(s),r.forEach(i=>{if(!("drawLabel"in i))return;const a=i.options.label;a&&a.enabled&&a.content&&(a.drawTime||i.options.drawTime)===t&&i.drawLabel(s,o)})}function WU(e,t,n){for(const s of t)s.options.drawTime===n&&s.draw(e)}function mct(e,t,n){for(const s of t)Wn(s.elements)&&WU(e,s.elements,n)}export{ke as A,qct as B,Kct as C,jct as D,DNe as E,ct as F,_u as G,Uct as H,Yct as I,hY as J,wct as K,$ct as O,Hct as P,Gct as S,SAe as V,K as a,pe as b,H as c,$e as d,VJe as e,r0 as f,Zy as g,mDe as h,Vct as i,gt as j,en as k,Cct as l,Pl as m,rt as n,R as o,zd as p,me as q,de as r,Lct as s,Qo as t,Zt as u,ze as v,ce as w,bct as x,yct as y,Q as z};
